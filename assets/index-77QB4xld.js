function GV(s,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in s)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var ED=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mp(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function zV(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var r=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return s[i]}})}),n}var F1={exports:{}},QT={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD;function VV(){if(SD)return QT;SD=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:s,type:i,key:l,ref:r!==void 0?r:null,props:a}}return QT.Fragment=e,QT.jsx=n,QT.jsxs=n,QT}var AD;function WV(){return AD||(AD=1,F1.exports=VV()),F1.exports}var he=WV(),H1={exports:{}},vi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $D;function XV(){if($D)return vi;$D=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function y(K){return K===null||typeof K!="object"?null:(K=T&&K[T]||K["@@iterator"],typeof K=="function"?K:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,M={};function C(K,fe,Ne){this.props=K,this.context=fe,this.refs=M,this.updater=Ne||S}C.prototype.isReactComponent={},C.prototype.setState=function(K,fe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,fe,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function E(){}E.prototype=C.prototype;function w(K,fe,Ne){this.props=K,this.context=fe,this.refs=M,this.updater=Ne||S}var I=w.prototype=new E;I.constructor=w,$(I,C.prototype),I.isPureReactComponent=!0;var O=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function V(K,fe,Ne,Pe,Ee,We){return Ne=We.ref,{$$typeof:s,type:K,key:fe,ref:Ne!==void 0?Ne:null,props:We}}function X(K,fe){return V(K.type,fe,void 0,void 0,void 0,K.props)}function G(K){return typeof K=="object"&&K!==null&&K.$$typeof===s}function D(K){var fe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Ne){return fe[Ne]})}var Z=/\/+/g;function Y(K,fe){return typeof K=="object"&&K!==null&&K.key!=null?D(""+K.key):fe.toString(36)}function j(){}function ne(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(j,j):(K.status="pending",K.then(function(fe){K.status==="pending"&&(K.status="fulfilled",K.value=fe)},function(fe){K.status==="pending"&&(K.status="rejected",K.reason=fe)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ee(K,fe,Ne,Pe,Ee){var We=typeof K;(We==="undefined"||We==="boolean")&&(K=null);var Fe=!1;if(K===null)Fe=!0;else switch(We){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(K.$$typeof){case s:case e:Fe=!0;break;case v:return Fe=K._init,ee(Fe(K._payload),fe,Ne,Pe,Ee)}}if(Fe)return Ee=Ee(K),Fe=Pe===""?"."+Y(K,0):Pe,O(Ee)?(Ne="",Fe!=null&&(Ne=Fe.replace(Z,"$&/")+"/"),ee(Ee,fe,Ne,"",function(Ut){return Ut})):Ee!=null&&(G(Ee)&&(Ee=X(Ee,Ne+(Ee.key==null||K&&K.key===Ee.key?"":(""+Ee.key).replace(Z,"$&/")+"/")+Fe)),fe.push(Ee)),1;Fe=0;var gt=Pe===""?".":Pe+":";if(O(K))for(var ft=0;ft<K.length;ft++)Pe=K[ft],We=gt+Y(Pe,ft),Fe+=ee(Pe,fe,Ne,We,Ee);else if(ft=y(K),typeof ft=="function")for(K=ft.call(K),ft=0;!(Pe=K.next()).done;)Pe=Pe.value,We=gt+Y(Pe,ft++),Fe+=ee(Pe,fe,Ne,We,Ee);else if(We==="object"){if(typeof K.then=="function")return ee(ne(K),fe,Ne,Pe,Ee);throw fe=String(K),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function z(K,fe,Ne){if(K==null)return K;var Pe=[],Ee=0;return ee(K,Pe,"","",function(We){return fe.call(Ne,We,Ee++)}),Pe}function te(K){if(K._status===-1){var fe=K._result;fe=fe(),fe.then(function(Ne){(K._status===0||K._status===-1)&&(K._status=1,K._result=Ne)},function(Ne){(K._status===0||K._status===-1)&&(K._status=2,K._result=Ne)}),K._status===-1&&(K._status=0,K._result=fe)}if(K._status===1)return K._result.default;throw K._result}var ce=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function pe(){}return vi.Children={map:z,forEach:function(K,fe,Ne){z(K,function(){fe.apply(this,arguments)},Ne)},count:function(K){var fe=0;return z(K,function(){fe++}),fe},toArray:function(K){return z(K,function(fe){return fe})||[]},only:function(K){if(!G(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},vi.Component=C,vi.Fragment=n,vi.Profiler=r,vi.PureComponent=w,vi.StrictMode=i,vi.Suspense=f,vi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,vi.__COMPILER_RUNTIME={__proto__:null,c:function(K){return P.H.useMemoCache(K)}},vi.cache=function(K){return function(){return K.apply(null,arguments)}},vi.cloneElement=function(K,fe,Ne){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Pe=$({},K.props),Ee=K.key,We=void 0;if(fe!=null)for(Fe in fe.ref!==void 0&&(We=void 0),fe.key!==void 0&&(Ee=""+fe.key),fe)!F.call(fe,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&fe.ref===void 0||(Pe[Fe]=fe[Fe]);var Fe=arguments.length-2;if(Fe===1)Pe.children=Ne;else if(1<Fe){for(var gt=Array(Fe),ft=0;ft<Fe;ft++)gt[ft]=arguments[ft+2];Pe.children=gt}return V(K.type,Ee,void 0,void 0,We,Pe)},vi.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:a,_context:K},K},vi.createElement=function(K,fe,Ne){var Pe,Ee={},We=null;if(fe!=null)for(Pe in fe.key!==void 0&&(We=""+fe.key),fe)F.call(fe,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(Ee[Pe]=fe[Pe]);var Fe=arguments.length-2;if(Fe===1)Ee.children=Ne;else if(1<Fe){for(var gt=Array(Fe),ft=0;ft<Fe;ft++)gt[ft]=arguments[ft+2];Ee.children=gt}if(K&&K.defaultProps)for(Pe in Fe=K.defaultProps,Fe)Ee[Pe]===void 0&&(Ee[Pe]=Fe[Pe]);return V(K,We,void 0,void 0,null,Ee)},vi.createRef=function(){return{current:null}},vi.forwardRef=function(K){return{$$typeof:h,render:K}},vi.isValidElement=G,vi.lazy=function(K){return{$$typeof:v,_payload:{_status:-1,_result:K},_init:te}},vi.memo=function(K,fe){return{$$typeof:p,type:K,compare:fe===void 0?null:fe}},vi.startTransition=function(K){var fe=P.T,Ne={};P.T=Ne;try{var Pe=K(),Ee=P.S;Ee!==null&&Ee(Ne,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(pe,ce)}catch(We){ce(We)}finally{P.T=fe}},vi.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},vi.use=function(K){return P.H.use(K)},vi.useActionState=function(K,fe,Ne){return P.H.useActionState(K,fe,Ne)},vi.useCallback=function(K,fe){return P.H.useCallback(K,fe)},vi.useContext=function(K){return P.H.useContext(K)},vi.useDebugValue=function(){},vi.useDeferredValue=function(K,fe){return P.H.useDeferredValue(K,fe)},vi.useEffect=function(K,fe,Ne){var Pe=P.H;if(typeof Ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Pe.useEffect(K,fe)},vi.useId=function(){return P.H.useId()},vi.useImperativeHandle=function(K,fe,Ne){return P.H.useImperativeHandle(K,fe,Ne)},vi.useInsertionEffect=function(K,fe){return P.H.useInsertionEffect(K,fe)},vi.useLayoutEffect=function(K,fe){return P.H.useLayoutEffect(K,fe)},vi.useMemo=function(K,fe){return P.H.useMemo(K,fe)},vi.useOptimistic=function(K,fe){return P.H.useOptimistic(K,fe)},vi.useReducer=function(K,fe,Ne){return P.H.useReducer(K,fe,Ne)},vi.useRef=function(K){return P.H.useRef(K)},vi.useState=function(K){return P.H.useState(K)},vi.useSyncExternalStore=function(K,fe,Ne){return P.H.useSyncExternalStore(K,fe,Ne)},vi.useTransition=function(){return P.H.useTransition()},vi.version="19.1.0",vi}var xD;function uT(){return xD||(xD=1,H1.exports=XV()),H1.exports}var Q=uT();const Un=Mp(Q),wI=GV({__proto__:null,default:Un},[Q]);var G1={exports:{}},eE={},z1={exports:{}},V1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD;function jV(){return CD||(CD=1,function(s){function e(z,te){var ce=z.length;z.push(te);e:for(;0<ce;){var pe=ce-1>>>1,K=z[pe];if(0<r(K,te))z[pe]=te,z[ce]=K,ce=pe;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var te=z[0],ce=z.pop();if(ce!==te){z[0]=ce;e:for(var pe=0,K=z.length,fe=K>>>1;pe<fe;){var Ne=2*(pe+1)-1,Pe=z[Ne],Ee=Ne+1,We=z[Ee];if(0>r(Pe,ce))Ee<K&&0>r(We,Pe)?(z[pe]=We,z[Ee]=ce,pe=Ee):(z[pe]=Pe,z[Ne]=ce,pe=Ne);else if(Ee<K&&0>r(We,ce))z[pe]=We,z[Ee]=ce,pe=Ee;else break e}}return te}function r(z,te){var ce=z.sortIndex-te.sortIndex;return ce!==0?ce:z.id-te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();s.unstable_now=function(){return l.now()-h}}var f=[],p=[],v=1,T=null,y=3,S=!1,$=!1,M=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function O(z){for(var te=n(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=z)i(p),te.sortIndex=te.expirationTime,e(f,te);else break;te=n(p)}}function P(z){if(M=!1,O(z),!$)if(n(f)!==null)$=!0,F||(F=!0,Y());else{var te=n(p);te!==null&&ee(P,te.startTime-z)}}var F=!1,V=-1,X=5,G=-1;function D(){return C?!0:!(s.unstable_now()-G<X)}function Z(){if(C=!1,F){var z=s.unstable_now();G=z;var te=!0;try{e:{$=!1,M&&(M=!1,w(V),V=-1),S=!0;var ce=y;try{t:{for(O(z),T=n(f);T!==null&&!(T.expirationTime>z&&D());){var pe=T.callback;if(typeof pe=="function"){T.callback=null,y=T.priorityLevel;var K=pe(T.expirationTime<=z);if(z=s.unstable_now(),typeof K=="function"){T.callback=K,O(z),te=!0;break t}T===n(f)&&i(f),O(z)}else i(f);T=n(f)}if(T!==null)te=!0;else{var fe=n(p);fe!==null&&ee(P,fe.startTime-z),te=!1}}break e}finally{T=null,y=ce,S=!1}te=void 0}}finally{te?Y():F=!1}}}var Y;if(typeof I=="function")Y=function(){I(Z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ne=j.port2;j.port1.onmessage=Z,Y=function(){ne.postMessage(null)}}else Y=function(){E(Z,0)};function ee(z,te){V=E(function(){z(s.unstable_now())},te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_next=function(z){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ce=y;y=te;try{return z()}finally{y=ce}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(z,te){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=y;y=z;try{return te()}finally{y=ce}},s.unstable_scheduleCallback=function(z,te,ce){var pe=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?pe+ce:pe):ce=pe,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ce+K,z={id:v++,callback:te,priorityLevel:z,startTime:ce,expirationTime:K,sortIndex:-1},ce>pe?(z.sortIndex=ce,e(p,z),n(f)===null&&z===n(p)&&(M?(w(V),V=-1):M=!0,ee(P,ce-pe))):(z.sortIndex=K,e(f,z),$||S||($=!0,F||(F=!0,Y()))),z},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(z){var te=y;return function(){var ce=y;y=te;try{return z.apply(this,arguments)}finally{y=ce}}}}(V1)),V1}var MD;function YV(){return MD||(MD=1,z1.exports=jV()),z1.exports}var W1={exports:{}},Al={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD;function KV(){if(RD)return Al;RD=1;var s=uT();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:f,containerInfo:p,implementation:v}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Al.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Al.createPortal=function(f,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,v)},Al.flushSync=function(f){var p=l.T,v=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=p,i.p=v,i.d.f()}},Al.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},Al.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Al.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var v=p.as,T=h(v,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:y,fetchPriority:S}):v==="script"&&i.d.X(f,{crossOrigin:T,integrity:y,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Al.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},Al.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=h(v,p.crossOrigin);i.d.L(f,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Al.preloadModule=function(f,p){if(typeof f=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},Al.requestFormReset=function(f){i.d.r(f)},Al.unstable_batchedUpdates=function(f,p){return f(p)},Al.useFormState=function(f,p,v){return l.H.useFormState(f,p,v)},Al.useFormStatus=function(){return l.H.useHostTransitionStatus()},Al.version="19.1.0",Al}var wD;function sF(){if(wD)return W1.exports;wD=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),W1.exports=KV(),W1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID;function qV(){if(ID)return eE;ID=1;var s=YV(),e=uT(),n=sF();function i(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var d=c,b=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(b=d.return),c=d.return;while(c)}return d.tag===3?b:null}function l(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function h(c){if(a(c)!==c)throw Error(i(188))}function f(c){var d=c.alternate;if(!d){if(d=a(c),d===null)throw Error(i(188));return d!==c?null:c}for(var b=c,A=d;;){var N=b.return;if(N===null)break;var B=N.alternate;if(B===null){if(A=N.return,A!==null){b=A;continue}break}if(N.child===B.child){for(B=N.child;B;){if(B===b)return h(N),c;if(B===A)return h(N),d;B=B.sibling}throw Error(i(188))}if(b.return!==A.return)b=N,A=B;else{for(var ie=!1,de=N.child;de;){if(de===b){ie=!0,b=N,A=B;break}if(de===A){ie=!0,A=N,b=B;break}de=de.sibling}if(!ie){for(de=B.child;de;){if(de===b){ie=!0,b=B,A=N;break}if(de===A){ie=!0,A=B,b=N;break}de=de.sibling}if(!ie)throw Error(i(189))}}if(b.alternate!==A)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?c:d}function p(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=p(c),d!==null)return d;c=c.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function Y(c){return c===null||typeof c!="object"?null:(c=Z&&c[Z]||c["@@iterator"],typeof c=="function"?c:null)}var j=Symbol.for("react.client.reference");function ne(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===j?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case $:return"Fragment";case C:return"Profiler";case M:return"StrictMode";case P:return"Suspense";case F:return"SuspenseList";case G:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case S:return"Portal";case I:return(c.displayName||"Context")+".Provider";case w:return(c._context.displayName||"Context")+".Consumer";case O:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case V:return d=c.displayName||null,d!==null?d:ne(c.type)||"Memo";case X:d=c._payload,c=c._init;try{return ne(c(d))}catch{}}return null}var ee=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},pe=[],K=-1;function fe(c){return{current:c}}function Ne(c){0>K||(c.current=pe[K],pe[K]=null,K--)}function Pe(c,d){K++,pe[K]=c.current,c.current=d}var Ee=fe(null),We=fe(null),Fe=fe(null),gt=fe(null);function ft(c,d){switch(Pe(Fe,d),Pe(We,c),Pe(Ee,null),d.nodeType){case 9:case 11:c=(c=d.documentElement)&&(c=c.namespaceURI)?L_(c):0;break;default:if(c=d.tagName,d=d.namespaceURI)d=L_(d),c=fA(d,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Ne(Ee),Pe(Ee,c)}function Ut(){Ne(Ee),Ne(We),Ne(Fe)}function Ke(c){c.memoizedState!==null&&Pe(gt,c);var d=Ee.current,b=fA(d,c.type);d!==b&&(Pe(We,c),Pe(Ee,b))}function Ht(c){We.current===c&&(Ne(Ee),Ne(We)),gt.current===c&&(Ne(gt),Dd._currentValue=ce)}var Re=Object.prototype.hasOwnProperty,Ye=s.unstable_scheduleCallback,J=s.unstable_cancelCallback,Se=s.unstable_shouldYield,Ae=s.unstable_requestPaint,we=s.unstable_now,Ie=s.unstable_getCurrentPriorityLevel,dt=s.unstable_ImmediatePriority,Qe=s.unstable_UserBlockingPriority,vt=s.unstable_NormalPriority,et=s.unstable_LowPriority,_e=s.unstable_IdlePriority,se=s.log,$e=s.unstable_setDisableYieldValue,Le=null,Xe=null;function Ve(c){if(typeof se=="function"&&$e(c),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Le,c)}catch{}}var yt=Math.clz32?Math.clz32:Ft,bt=Math.log,At=Math.LN2;function Ft(c){return c>>>=0,c===0?32:31-(bt(c)/At|0)|0}var H=256,oe=4194304;function ve(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function re(c,d,b){var A=c.pendingLanes;if(A===0)return 0;var N=0,B=c.suspendedLanes,ie=c.pingedLanes;c=c.warmLanes;var de=A&134217727;return de!==0?(A=de&~B,A!==0?N=ve(A):(ie&=de,ie!==0?N=ve(ie):b||(b=de&~c,b!==0&&(N=ve(b))))):(de=A&~B,de!==0?N=ve(de):ie!==0?N=ve(ie):b||(b=A&~c,b!==0&&(N=ve(b)))),N===0?0:d!==0&&d!==N&&(d&B)===0&&(B=N&-N,b=d&-d,B>=b||B===32&&(b&4194048)!==0)?d:N}function ye(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function lt(c,d){switch(c){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Me(){var c=H;return H<<=1,(H&4194048)===0&&(H=256),c}function Ze(){var c=oe;return oe<<=1,(oe&62914560)===0&&(oe=4194304),c}function $t(c){for(var d=[],b=0;31>b;b++)d.push(c);return d}function Pt(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Mt(c,d,b,A,N,B){var ie=c.pendingLanes;c.pendingLanes=b,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=b,c.entangledLanes&=b,c.errorRecoveryDisabledLanes&=b,c.shellSuspendCounter=0;var de=c.entanglements,Oe=c.expirationTimes,nt=c.hiddenUpdates;for(b=ie&~b;0<b;){var wt=31-yt(b),Dt=1<<wt;de[wt]=0,Oe[wt]=-1;var it=nt[wt];if(it!==null)for(nt[wt]=null,wt=0;wt<it.length;wt++){var mt=it[wt];mt!==null&&(mt.lane&=-536870913)}b&=~Dt}A!==0&&xt(c,A,0),B!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=B&~(ie&~d))}function xt(c,d,b){c.pendingLanes|=d,c.suspendedLanes&=~d;var A=31-yt(d);c.entangledLanes|=d,c.entanglements[A]=c.entanglements[A]|1073741824|b&4194090}function Xt(c,d){var b=c.entangledLanes|=d;for(c=c.entanglements;b;){var A=31-yt(b),N=1<<A;N&d|c[A]&d&&(c[A]|=d),b&=~N}}function Yt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Wt(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function xn(){var c=te.p;return c!==0?c:(c=window.event,c===void 0?32:UT(c.type))}function jt(c,d){var b=te.p;try{return te.p=c,d()}finally{te.p=b}}var Zt=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Zt,gn="__reactProps$"+Zt,zn="__reactContainer$"+Zt,is="__reactEvents$"+Zt,lr="__reactListeners$"+Zt,Rs="__reactHandles$"+Zt,Cn="__reactResources$"+Zt,Ks="__reactMarker$"+Zt;function Ri(c){delete c[Nn],delete c[gn],delete c[is],delete c[lr],delete c[Rs]}function ae(c){var d=c[Nn];if(d)return d;for(var b=c.parentNode;b;){if(d=b[zn]||b[Nn]){if(b=d.alternate,d.child!==null||b!==null&&b.child!==null)for(c=un(c);c!==null;){if(b=c[Nn])return b;c=un(c)}return d}c=b,b=c.parentNode}return null}function ge(c){if(c=c[Nn]||c[zn]){var d=c.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return c}return null}function Ue(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c.stateNode;throw Error(i(33))}function ot(c){var d=c[Cn];return d||(d=c[Cn]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function ht(c){c[Ks]=!0}var _t=new Set,Gt={};function kt(c,d){le(c,d),le(c+"Capture",d)}function le(c,d){for(Gt[c]=d,c=0;c<d.length;c++)_t.add(d[c])}var Te=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),De={},ke={};function ze(c){return Re.call(ke,c)?!0:Re.call(De,c)?!1:Te.test(c)?ke[c]=!0:(De[c]=!0,!1)}function rt(c,d,b){if(ze(d))if(b===null)c.removeAttribute(d);else{switch(typeof b){case"undefined":case"function":case"symbol":c.removeAttribute(d);return;case"boolean":var A=d.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){c.removeAttribute(d);return}}c.setAttribute(d,""+b)}}function Tt(c,d,b){if(b===null)c.removeAttribute(d);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttribute(d,""+b)}}function Nt(c,d,b,A){if(A===null)c.removeAttribute(b);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(b);return}c.setAttributeNS(d,b,""+A)}}var Bt,qt;function Kt(c){if(Bt===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);Bt=d&&d[1]||"",qt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bt+c+qt}var Jt=!1;function vn(c,d){if(!c||Jt)return"";Jt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(d){var Dt=function(){throw Error()};if(Object.defineProperty(Dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dt,[])}catch(mt){var it=mt}Reflect.construct(c,[],Dt)}else{try{Dt.call()}catch(mt){it=mt}c.call(Dt.prototype)}}else{try{throw Error()}catch(mt){it=mt}(Dt=c())&&typeof Dt.catch=="function"&&Dt.catch(function(){})}}catch(mt){if(mt&&it&&typeof mt.stack=="string")return[mt.stack,it.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=A.DetermineComponentFrameRoot(),ie=B[0],de=B[1];if(ie&&de){var Oe=ie.split(`
`),nt=de.split(`
`);for(N=A=0;A<Oe.length&&!Oe[A].includes("DetermineComponentFrameRoot");)A++;for(;N<nt.length&&!nt[N].includes("DetermineComponentFrameRoot");)N++;if(A===Oe.length||N===nt.length)for(A=Oe.length-1,N=nt.length-1;1<=A&&0<=N&&Oe[A]!==nt[N];)N--;for(;1<=A&&0<=N;A--,N--)if(Oe[A]!==nt[N]){if(A!==1||N!==1)do if(A--,N--,0>N||Oe[A]!==nt[N]){var wt=`
`+Oe[A].replace(" at new "," at ");return c.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",c.displayName)),wt}while(1<=A&&0<=N);break}}}finally{Jt=!1,Error.prepareStackTrace=b}return(b=c?c.displayName||c.name:"")?Kt(b):""}function Tn(c){switch(c.tag){case 26:case 27:case 5:return Kt(c.type);case 16:return Kt("Lazy");case 13:return Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return vn(c.type,!1);case 11:return vn(c.type.render,!1);case 1:return vn(c.type,!0);case 31:return Kt("Activity");default:return""}}function ei(c){try{var d="";do d+=Tn(c),c=c.return;while(c);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ln(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Dn(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function fn(c){var d=Dn(c)?"checked":"value",b=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),A=""+c[d];if(!c.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var N=b.get,B=b.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return N.call(this)},set:function(ie){A=""+ie,B.call(this,ie)}}),Object.defineProperty(c,d,{enumerable:b.enumerable}),{getValue:function(){return A},setValue:function(ie){A=""+ie},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function yi(c){c._valueTracker||(c._valueTracker=fn(c))}function Hn(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var b=d.getValue(),A="";return c&&(A=Dn(c)?c.checked?"true":"false":c.value),c=A,c!==b?(d.setValue(c),!0):!1}function Mn(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Xn=/[\n"\\]/g;function Rn(c){return c.replace(Xn,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function ti(c,d,b,A,N,B,ie,de){c.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?c.type=ie:c.removeAttribute("type"),d!=null?ie==="number"?(d===0&&c.value===""||c.value!=d)&&(c.value=""+ln(d)):c.value!==""+ln(d)&&(c.value=""+ln(d)):ie!=="submit"&&ie!=="reset"||c.removeAttribute("value"),d!=null?Ui(c,ie,ln(d)):b!=null?Ui(c,ie,ln(b)):A!=null&&c.removeAttribute("value"),N==null&&B!=null&&(c.defaultChecked=!!B),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?c.name=""+ln(de):c.removeAttribute("name")}function Gn(c,d,b,A,N,B,ie,de){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(c.type=B),d!=null||b!=null){if(!(B!=="submit"&&B!=="reset"||d!=null))return;b=b!=null?""+ln(b):"",d=d!=null?""+ln(d):b,de||d===c.value||(c.value=d),c.defaultValue=d}A=A??N,A=typeof A!="function"&&typeof A!="symbol"&&!!A,c.checked=de?c.checked:!!A,c.defaultChecked=!!A,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(c.name=ie)}function Ui(c,d,b){d==="number"&&Mn(c.ownerDocument)===c||c.defaultValue===""+b||(c.defaultValue=""+b)}function Ti(c,d,b,A){if(c=c.options,d){d={};for(var N=0;N<b.length;N++)d["$"+b[N]]=!0;for(b=0;b<c.length;b++)N=d.hasOwnProperty("$"+c[b].value),c[b].selected!==N&&(c[b].selected=N),N&&A&&(c[b].defaultSelected=!0)}else{for(b=""+ln(b),d=null,N=0;N<c.length;N++){if(c[N].value===b){c[N].selected=!0,A&&(c[N].defaultSelected=!0);return}d!==null||c[N].disabled||(d=c[N])}d!==null&&(d.selected=!0)}}function ss(c,d,b){if(d!=null&&(d=""+ln(d),d!==c.value&&(c.value=d),b==null)){c.defaultValue!==d&&(c.defaultValue=d);return}c.defaultValue=b!=null?""+ln(b):""}function ur(c,d,b,A){if(d==null){if(A!=null){if(b!=null)throw Error(i(92));if(ee(A)){if(1<A.length)throw Error(i(93));A=A[0]}b=A}b==null&&(b=""),d=b}b=ln(d),c.defaultValue=b,A=c.textContent,A===b&&A!==""&&A!==null&&(c.value=A)}function so(c,d){if(d){var b=c.firstChild;if(b&&b===c.lastChild&&b.nodeType===3){b.nodeValue=d;return}}c.textContent=d}var Ol=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jh(c,d,b){var A=d.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?A?c.setProperty(d,""):d==="float"?c.cssFloat="":c[d]="":A?c.setProperty(d,b):typeof b!="number"||b===0||Ol.has(d)?d==="float"?c.cssFloat=b:c[d]=(""+b).trim():c[d]=b+"px"}function ic(c,d,b){if(d!=null&&typeof d!="object")throw Error(i(62));if(c=c.style,b!=null){for(var A in b)!b.hasOwnProperty(A)||d!=null&&d.hasOwnProperty(A)||(A.indexOf("--")===0?c.setProperty(A,""):A==="float"?c.cssFloat="":c[A]="");for(var N in d)A=d[N],d.hasOwnProperty(N)&&b[N]!==A&&jh(c,N,A)}else for(var B in d)d.hasOwnProperty(B)&&jh(c,B,d[B])}function Ip(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yc(c){return Jg.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Op=null;function Np(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var sc=null,Ja=null;function om(c){var d=ge(c);if(d&&(c=d.stateNode)){var b=c[gn]||null;e:switch(c=d.stateNode,d.type){case"input":if(ti(c,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),d=b.name,b.type==="radio"&&d!=null){for(b=c;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Rn(""+d)+'"][type="radio"]'),d=0;d<b.length;d++){var A=b[d];if(A!==c&&A.form===c.form){var N=A[gn]||null;if(!N)throw Error(i(90));ti(A,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(d=0;d<b.length;d++)A=b[d],A.form===c.form&&Hn(A)}break e;case"textarea":ss(c,b.value,b.defaultValue);break e;case"select":d=b.value,d!=null&&Ti(c,!!b.multiple,d,!1)}}}var Yh=!1;function vr(c,d,b){if(Yh)return c(d,b);Yh=!0;try{var A=c(d);return A}finally{if(Yh=!1,(sc!==null||Ja!==null)&&(eu(),sc&&(d=sc,c=Ja,Ja=sc=null,om(d),c)))for(d=0;d<c.length;d++)om(c[d])}}function rc(c,d){var b=c.stateNode;if(b===null)return null;var A=b[gn]||null;if(A===null)return null;b=A[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(c=c.type,A=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!A;break e;default:c=!1}if(c)return null;if(b&&typeof b!="function")throw Error(i(231,d,typeof b));return b}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kc=!1;if(Za)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){Kc=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{Kc=!1}var gu=null,Lp=null,hf=null;function am(){if(hf)return hf;var c,d=Lp,b=d.length,A,N="value"in gu?gu.value:gu.textContent,B=N.length;for(c=0;c<b&&d[c]===N[c];c++);var ie=b-c;for(A=1;A<=ie&&d[b-A]===N[B-A];A++);return hf=N.slice(c,1<A?1-A:void 0)}function Nl(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Qa(){return!0}function qc(){return!1}function mo(c){function d(b,A,N,B,ie){this._reactName=b,this._targetInst=N,this.type=A,this.nativeEvent=B,this.target=ie,this.currentTarget=null;for(var de in c)c.hasOwnProperty(de)&&(b=c[de],this[de]=b?b(B):B[de]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?Qa:qc,this.isPropagationStopped=qc,this}return v(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),d}var _u={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=mo(_u),Kh=v({},_u,{view:0,detail:0}),Zg=mo(Kh),No,qh,vu,Ll=v({},Kh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==vu&&(vu&&c.type==="mousemove"?(No=c.screenX-vu.screenX,qh=c.screenY-vu.screenY):qh=No=0,vu=c),No)},movementY:function(c){return"movementY"in c?c.movementY:qh}}),Zc=mo(Ll),Aa=v({},Ll,{dataTransfer:0}),lb=mo(Aa),Fr=v({},Kh,{relatedTarget:0}),Dp=mo(Fr),Qg=v({},_u,{animationName:0,elapsedTime:0,pseudoElement:0}),e_=mo(Qg),t_=v({},_u,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),n_=mo(t_),Jh=v({},_u,{data:0}),Dl=mo(Jh),Zh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=i_[c])?!!d[c]:!1}function df(){return um}var s_=v({},Kh,{key:function(c){if(c.key){var d=Zh[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Nl(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?lm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(c){return c.type==="keypress"?Nl(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Nl(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),cm=mo(s_),hm=v({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bp=mo(hm),r_=v({},Kh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),dm=mo(r_),fm=v({},_u,{propertyName:0,elapsedTime:0,pseudoElement:0}),bu=mo(fm),ac=v({},Ll,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),pm=mo(ac),o_=v({},_u,{newState:0,oldState:0}),$a=mo(o_),el=[9,13,27,32],Qh=Za&&"CompositionEvent"in window,lc=null;Za&&"documentMode"in document&&(lc=document.documentMode);var Qc=Za&&"TextEvent"in window&&!lc,eh=Za&&(!Qh||lc&&8<lc&&11>=lc),yu=" ",Hr=!1;function ed(c,d){switch(c){case"keyup":return el.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kp(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Tu=!1;function td(c,d){switch(c){case"compositionend":return kp(d);case"keypress":return d.which!==32?null:(Hr=!0,yu);case"textInput":return c=d.data,c===yu&&Hr?null:c;default:return null}}function Pp(c,d){if(Tu)return c==="compositionend"||!Qh&&ed(c,d)?(c=am(),hf=Lp=gu=null,Tu=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return eh&&d.locale!=="ko"?null:d.data;default:return null}}var ff={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Up(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!ff[c.type]:d==="textarea"}function Lo(c,d,b,A){sc?Ja?Ja.push(A):Ja=[A]:sc=A,d=I_(d,"onChange"),0<d.length&&(b=new Jc("onChange","change",null,b,A),c.push({event:b,listeners:d}))}var Eu=null,uc=null;function Fp(c){gb(c,0)}function th(c){var d=Ue(c);if(Hn(d))return c}function xa(c,d){if(c==="change")return d}var pf=!1;if(Za){var mf;if(Za){var Su="oninput"in document;if(!Su){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),Su=typeof nh.oninput=="function"}mf=Su}else mf=!1;pf=mf&&(!document.documentMode||9<document.documentMode)}function Ss(){Eu&&(Eu.detachEvent("onpropertychange",a_),uc=Eu=null)}function a_(c){if(c.propertyName==="value"&&th(uc)){var d=[];Lo(d,uc,c,Np(c)),vr(Fp,d)}}function mm(c,d,b){c==="focusin"?(Ss(),Eu=d,uc=b,Eu.attachEvent("onpropertychange",a_)):c==="focusout"&&Ss()}function gm(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return th(uc)}function gf(c,d){if(c==="click")return th(d)}function cc(c,d){if(c==="input"||c==="change")return th(d)}function l_(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Do=typeof Object.is=="function"?Object.is:l_;function tl(c,d){if(Do(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var b=Object.keys(c),A=Object.keys(d);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var N=b[A];if(!Re.call(d,N)||!Do(c[N],d[N]))return!1}return!0}function wr(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Hp(c,d){var b=wr(c);c=0;for(var A;b;){if(b.nodeType===3){if(A=c+b.textContent.length,c<=d&&A>=d)return{node:b,offset:d-c};c=A}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=wr(b)}}function Gp(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?Gp(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function nd(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var d=Mn(c.document);d instanceof c.HTMLIFrameElement;){try{var b=typeof d.contentWindow.location.href=="string"}catch{b=!1}if(b)c=d.contentWindow;else break;d=Mn(c.document)}return d}function id(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}var _m=Za&&"documentMode"in document&&11>=document.documentMode,Au=null,_f=null,sd=null,nl=!1;function zp(c,d,b){var A=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;nl||Au==null||Au!==Mn(A)||(A=Au,"selectionStart"in A&&id(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),sd&&tl(sd,A)||(sd=A,A=I_(_f,"onSelect"),0<A.length&&(d=new Jc("onSelect","select",null,d,b),c.push({event:d,listeners:A}),d.target=Au)))}function Ir(c,d){var b={};return b[c.toLowerCase()]=d.toLowerCase(),b["Webkit"+c]="webkit"+d,b["Moz"+c]="moz"+d,b}var hc={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionrun:Ir("Transition","TransitionRun"),transitionstart:Ir("Transition","TransitionStart"),transitioncancel:Ir("Transition","TransitionCancel"),transitionend:Ir("Transition","TransitionEnd")},Vp={},u_={};Za&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function $u(c){if(Vp[c])return Vp[c];if(!hc[c])return c;var d=hc[c],b;for(b in d)if(d.hasOwnProperty(b)&&b in u_)return Vp[c]=d[b];return c}var ro=$u("animationend"),vm=$u("animationiteration"),go=$u("animationstart"),c_=$u("transitionrun"),Bo=$u("transitionstart"),xu=$u("transitioncancel"),il=$u("transitionend"),rd=new Map,Bl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bl.push("scrollEnd");function br(c,d){rd.set(c,d),kt(d,[c])}var vf=new WeakMap;function Or(c,d){if(typeof c=="object"&&c!==null){var b=vf.get(c);return b!==void 0?b:(d={value:c,source:d,stack:ei(d)},vf.set(c,d),d)}return{value:c,source:d,stack:ei(d)}}var mi=[],Ca=0,dc=0;function Cu(){for(var c=Ca,d=dc=Ca=0;d<c;){var b=mi[d];mi[d++]=null;var A=mi[d];mi[d++]=null;var N=mi[d];mi[d++]=null;var B=mi[d];if(mi[d++]=null,A!==null&&N!==null){var ie=A.pending;ie===null?N.next=N:(N.next=ie.next,ie.next=N),A.pending=N}B!==0&&ih(b,N,B)}}function fc(c,d,b,A){mi[Ca++]=c,mi[Ca++]=d,mi[Ca++]=b,mi[Ca++]=A,dc|=A,c.lanes|=A,c=c.alternate,c!==null&&(c.lanes|=A)}function bf(c,d,b,A){return fc(c,d,b,A),sh(c)}function sl(c,d){return fc(c,null,null,d),sh(c)}function ih(c,d,b){c.lanes|=b;var A=c.alternate;A!==null&&(A.lanes|=b);for(var N=!1,B=c.return;B!==null;)B.childLanes|=b,A=B.alternate,A!==null&&(A.childLanes|=b),B.tag===22&&(c=B.stateNode,c===null||c._visibility&1||(N=!0)),c=B,B=B.return;return c.tag===3?(B=c.stateNode,N&&d!==null&&(N=31-yt(b),c=B.hiddenUpdates,A=c[N],A===null?c[N]=[d]:A.push(d),d.lane=b|536870912),B):null}function sh(c){if(50<Ql)throw Ql=0,gh=null,Error(i(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}var oa={};function od(c,d,b,A){this.tag=c,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _o(c,d,b,A){return new od(c,d,b,A)}function ad(c){return c=c.prototype,!(!c||!c.isReactComponent)}function qs(c,d){var b=c.alternate;return b===null?(b=_o(c.tag,d,c.key,c.mode),b.elementType=c.elementType,b.type=c.type,b.stateNode=c.stateNode,b.alternate=c,c.alternate=b):(b.pendingProps=d,b.type=c.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=c.flags&65011712,b.childLanes=c.childLanes,b.lanes=c.lanes,b.child=c.child,b.memoizedProps=c.memoizedProps,b.memoizedState=c.memoizedState,b.updateQueue=c.updateQueue,d=c.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=c.sibling,b.index=c.index,b.ref=c.ref,b.refCleanup=c.refCleanup,b}function bm(c,d){c.flags&=65011714;var b=c.alternate;return b===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=b.childLanes,c.lanes=b.lanes,c.child=b.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=b.memoizedProps,c.memoizedState=b.memoizedState,c.updateQueue=b.updateQueue,c.type=b.type,d=b.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function Nr(c,d,b,A,N,B){var ie=0;if(A=c,typeof c=="function")ad(c)&&(ie=1);else if(typeof c=="string")ie=DT(c,b,Ee.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case G:return c=_o(31,b,d,N),c.elementType=G,c.lanes=B,c;case $:return Mu(b.children,N,B,d);case M:ie=8,N|=24;break;case C:return c=_o(12,b,d,N|2),c.elementType=C,c.lanes=B,c;case P:return c=_o(13,b,d,N),c.elementType=P,c.lanes=B,c;case F:return c=_o(19,b,d,N),c.elementType=F,c.lanes=B,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case E:case I:ie=10;break e;case w:ie=9;break e;case O:ie=11;break e;case V:ie=14;break e;case X:ie=16,A=null;break e}ie=29,b=Error(i(130,c===null?"null":typeof c,"")),A=null}return d=_o(ie,b,d,N),d.elementType=c,d.type=A,d.lanes=B,d}function Mu(c,d,b,A){return c=_o(7,c,A,d),c.lanes=b,c}function yf(c,d,b){return c=_o(6,c,null,d),c.lanes=b,c}function Tf(c,d,b){return d=_o(4,c.children!==null?c.children:[],c.key,d),d.lanes=b,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}var kl=[],ko=0,Ef=null,ld=0,Gr=[],oo=0,Ru=null,rl=1,Ma="";function ol(c,d){kl[ko++]=ld,kl[ko++]=Ef,Ef=c,ld=d}function Wp(c,d,b){Gr[oo++]=rl,Gr[oo++]=Ma,Gr[oo++]=Ru,Ru=c;var A=rl;c=Ma;var N=32-yt(A)-1;A&=~(1<<N),b+=1;var B=32-yt(d)+N;if(30<B){var ie=N-N%5;B=(A&(1<<ie)-1).toString(32),A>>=ie,N-=ie,rl=1<<32-yt(d)+N|b<<N|A,Ma=B+c}else rl=1<<B|b<<N|A,Ma=c}function ud(c){c.return!==null&&(ol(c,1),Wp(c,1,0))}function Xp(c){for(;c===Ef;)Ef=kl[--ko],kl[ko]=null,ld=kl[--ko],kl[ko]=null;for(;c===Ru;)Ru=Gr[--oo],Gr[oo]=null,Ma=Gr[--oo],Gr[oo]=null,rl=Gr[--oo],Gr[oo]=null}var Lr=null,Ds=null,wi=!1,Dr=null,Po=!1,Ra=Error(i(519));function pc(c){var d=Error(i(418,""));throw rh(Or(d,c)),Ra}function h_(c){var d=c.stateNode,b=c.type,A=c.memoizedProps;switch(d[Nn]=c,d[gn]=A,b){case"dialog":gi("cancel",d),gi("close",d);break;case"iframe":case"object":case"embed":gi("load",d);break;case"video":case"audio":for(b=0;b<sr.length;b++)gi(sr[b],d);break;case"source":gi("error",d);break;case"img":case"image":case"link":gi("error",d),gi("load",d);break;case"details":gi("toggle",d);break;case"input":gi("invalid",d),Gn(d,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0),yi(d);break;case"select":gi("invalid",d);break;case"textarea":gi("invalid",d),ur(d,A.value,A.defaultValue,A.children),yi(d)}b=A.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||d.textContent===""+b||A.suppressHydrationWarning===!0||O_(d.textContent,b)?(A.popover!=null&&(gi("beforetoggle",d),gi("toggle",d)),A.onScroll!=null&&gi("scroll",d),A.onScrollEnd!=null&&gi("scrollend",d),A.onClick!=null&&(d.onclick=yl),d=!0):d=!1,d||pc(c)}function jp(c){for(Lr=c.return;Lr;)switch(Lr.tag){case 5:case 13:Po=!1;return;case 27:case 3:Po=!0;return;default:Lr=Lr.return}}function al(c){if(c!==Lr)return!1;if(!wi)return jp(c),wi=!0,!1;var d=c.tag,b;if((b=d!==3&&d!==27)&&((b=d===5)&&(b=c.type,b=!(b!=="form"&&b!=="button")||yb(c.type,c.memoizedProps)),b=!b),b&&Ds&&pc(c),jp(c),d===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8)if(b=c.data,b==="/$"){if(d===0){Ds=su(c.nextSibling);break e}d--}else b!=="$"&&b!=="$!"&&b!=="$?"||d++;c=c.nextSibling}Ds=null}}else d===27?(d=Ds,Id(c.type)?(c=B_,B_=null,Ds=c):Ds=d):Ds=Lr?su(c.stateNode.nextSibling):null;return!0}function ll(){Ds=Lr=null,wi=!1}function Fi(){var c=Dr;return c!==null&&(Pn===null?Pn=c:Pn.push.apply(Pn,c),Dr=null),c}function rh(c){Dr===null?Dr=[c]:Dr.push(c)}var ym=fe(null),mc=null,wu=null;function gc(c,d,b){Pe(ym,d._currentValue),d._currentValue=b}function Pl(c){c._currentValue=ym.current,Ne(ym)}function Tm(c,d,b){for(;c!==null;){var A=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),c===b)break;c=c.return}}function Sf(c,d,b,A){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var B=N.dependencies;if(B!==null){var ie=N.child;B=B.firstContext;e:for(;B!==null;){var de=B;B=N;for(var Oe=0;Oe<d.length;Oe++)if(de.context===d[Oe]){B.lanes|=b,de=B.alternate,de!==null&&(de.lanes|=b),Tm(B.return,b,c),A||(ie=null);break e}B=de.next}}else if(N.tag===18){if(ie=N.return,ie===null)throw Error(i(341));ie.lanes|=b,B=ie.alternate,B!==null&&(B.lanes|=b),Tm(ie,b,c),ie=null}else ie=N.child;if(ie!==null)ie.return=N;else for(ie=N;ie!==null;){if(ie===c){ie=null;break}if(N=ie.sibling,N!==null){N.return=ie.return,ie=N;break}ie=ie.return}N=ie}}function Uo(c,d,b,A){c=null;for(var N=d,B=!1;N!==null;){if(!B){if((N.flags&524288)!==0)B=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var ie=N.alternate;if(ie===null)throw Error(i(387));if(ie=ie.memoizedProps,ie!==null){var de=N.type;Do(N.pendingProps.value,ie.value)||(c!==null?c.push(de):c=[de])}}else if(N===gt.current){if(ie=N.alternate,ie===null)throw Error(i(387));ie.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(Dd):c=[Dd])}N=N.return}c!==null&&Sf(d,c,b,A),d.flags|=262144}function Af(c){for(c=c.firstContext;c!==null;){if(!Do(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Ul(c){mc=c,wu=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Bs(c){return Yp(mc,c)}function aa(c,d){return mc===null&&Ul(c),Yp(c,d)}function Yp(c,d){var b=d._currentValue;if(d={context:d,memoizedValue:b,next:null},wu===null){if(c===null)throw Error(i(308));wu=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else wu=wu.next=d;return b}var Em=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(b,A){c.push(A)}};this.abort=function(){d.aborted=!0,c.forEach(function(b){return b()})}},$f=s.unstable_scheduleCallback,d_=s.unstable_NormalPriority,Js={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cd(){return{controller:new Em,data:new Map,refCount:0}}function hd(c){c.refCount--,c.refCount===0&&$f(d_,function(){c.controller.abort()})}var dd=null,xf=0,Jn=0,_c=null;function Fo(c,d){if(dd===null){var b=dd=[];xf=0,Jn=R_(),_c={status:"pending",value:void 0,then:function(A){b.push(A)}}}return xf++,d.then(fd,fd),d}function fd(){if(--xf===0&&dd!==null){_c!==null&&(_c.status="fulfilled");var c=dd;dd=null,Jn=0,_c=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function ub(c,d){var b=[],A={status:"pending",value:null,reason:null,then:function(N){b.push(N)}};return c.then(function(){A.status="fulfilled",A.value=d;for(var N=0;N<b.length;N++)(0,b[N])(d)},function(N){for(A.status="rejected",A.reason=N,N=0;N<b.length;N++)(0,b[N])(void 0)}),A}var Cf=z.S;z.S=function(c,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&Fo(c,d),Cf!==null&&Cf(c,d)};var wa=fe(null);function vc(){var c=wa.current;return c!==null?c:qn.pooledCache}function cn(c,d){d===null?Pe(wa,wa.current):Pe(wa,d.pool)}function ao(){var c=vc();return c===null?null:{parent:Js._currentValue,pool:c}}var Zs=Error(i(460)),ws=Error(i(474)),yr=Error(i(542)),Iu={then:function(){}};function hn(c){return c=c.status,c==="fulfilled"||c==="rejected"}function ps(){}function Kp(c,d,b){switch(b=c[b],b===void 0?c.push(d):b!==d&&(d.then(ps,ps),d=b),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,Am(c),c;default:if(typeof d.status=="string")d.then(ps,ps);else{if(c=qn,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=d,c.status="pending",c.then(function(A){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=A}},function(A){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=A}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,Am(c),c}throw Ia=d,Zs}}var Ia=null;function Sm(){if(Ia===null)throw Error(i(459));var c=Ia;return Ia=null,c}function Am(c){if(c===Zs||c===yr)throw Error(i(483))}var Ou=!1;function Mf(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vn(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ul(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Fl(c,d,b){var A=c.updateQueue;if(A===null)return null;if(A=A.shared,(Oi&2)!==0){var N=A.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),A.pending=d,d=sh(c),ih(c,null,b),d}return fc(c,A,d,b),sh(c)}function bc(c,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194048)!==0)){var A=d.lanes;A&=c.pendingLanes,b|=A,d.lanes=b,Xt(c,b)}}function Hl(c,d){var b=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var N=null,B=null;if(b=b.firstBaseUpdate,b!==null){do{var ie={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};B===null?N=B=ie:B=B.next=ie,b=b.next}while(b!==null);B===null?N=B=d:B=B.next=d}else N=B=d;b={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:B,shared:A.shared,callbacks:A.callbacks},c.updateQueue=b;return}c=b.lastBaseUpdate,c===null?b.firstBaseUpdate=d:c.next=d,b.lastBaseUpdate=d}var $m=!1;function Rf(){if($m){var c=_c;if(c!==null)throw c}}function pd(c,d,b,A){$m=!1;var N=c.updateQueue;Ou=!1;var B=N.firstBaseUpdate,ie=N.lastBaseUpdate,de=N.shared.pending;if(de!==null){N.shared.pending=null;var Oe=de,nt=Oe.next;Oe.next=null,ie===null?B=nt:ie.next=nt,ie=Oe;var wt=c.alternate;wt!==null&&(wt=wt.updateQueue,de=wt.lastBaseUpdate,de!==ie&&(de===null?wt.firstBaseUpdate=nt:de.next=nt,wt.lastBaseUpdate=Oe))}if(B!==null){var Dt=N.baseState;ie=0,wt=nt=Oe=null,de=B;do{var it=de.lane&-536870913,mt=it!==de.lane;if(mt?(On&it)===it:(A&it)===it){it!==0&&it===Jn&&($m=!0),wt!==null&&(wt=wt.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Ce=c,Sn=de;it=d;var Qi=b;switch(Sn.tag){case 1:if(Ce=Sn.payload,typeof Ce=="function"){Dt=Ce.call(Qi,Dt,it);break e}Dt=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Sn.payload,it=typeof Ce=="function"?Ce.call(Qi,Dt,it):Ce,it==null)break e;Dt=v({},Dt,it);break e;case 2:Ou=!0}}it=de.callback,it!==null&&(c.flags|=64,mt&&(c.flags|=8192),mt=N.callbacks,mt===null?N.callbacks=[it]:mt.push(it))}else mt={lane:it,tag:de.tag,payload:de.payload,callback:de.callback,next:null},wt===null?(nt=wt=mt,Oe=Dt):wt=wt.next=mt,ie|=it;if(de=de.next,de===null){if(de=N.shared.pending,de===null)break;mt=de,de=mt.next,mt.next=null,N.lastBaseUpdate=mt,N.shared.pending=null}}while(!0);wt===null&&(Oe=Dt),N.baseState=Oe,N.firstBaseUpdate=nt,N.lastBaseUpdate=wt,B===null&&(N.shared.lanes=0),_l|=ie,c.lanes=ie,c.memoizedState=Dt}}function Gl(c,d){if(typeof c!="function")throw Error(i(191,c));c.call(d)}function xm(c,d){var b=c.callbacks;if(b!==null)for(c.callbacks=null,c=0;c<b.length;c++)Gl(b[c],d)}var md=fe(null),gd=fe(0);function Oa(c,d){c=Jo,Pe(gd,c),Pe(md,d),Jo=c|d.baseLanes}function qp(){Pe(gd,Jo),Pe(md,md.current)}function Nu(){Jo=gd.current,Ne(md),Ne(gd)}var Br=0,jn=null,Xi=null,Qs=null,Jp=!1,Ho=!1,zr=!1,Hs=0,la=0,Vr=null,Cm=0;function er(){throw Error(i(321))}function kr(c,d){if(d===null)return!1;for(var b=0;b<d.length&&b<c.length;b++)if(!Do(c[b],d[b]))return!1;return!0}function zl(c,d,b,A,N,B){return Br=B,jn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,z.H=c===null||c.memoizedState===null?d0:jm,zr=!1,B=b(A,N),zr=!1,Ho&&(B=Rm(d,b,A,N)),Mm(c),B}function Mm(c){z.H=yd;var d=Xi!==null&&Xi.next!==null;if(Br=0,Qs=Xi=jn=null,Jp=!1,la=0,Vr=null,d)throw Error(i(300));c===null||dr||(c=c.dependencies,c!==null&&Af(c)&&(dr=!0))}function Rm(c,d,b,A){jn=c;var N=0;do{if(Ho&&(Vr=null),la=0,Ho=!1,25<=N)throw Error(i(301));if(N+=1,Qs=Xi=null,c.updateQueue!=null){var B=c.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}z.H=E_,B=d(b,A)}while(Ho);return B}function cb(){var c=z.H,d=c.useState()[0];return d=typeof d.then=="function"?hl(d):d,c=c.useState()[0],(Xi!==null?Xi.memoizedState:null)!==c&&(jn.flags|=1024),d}function Zp(){var c=Hs!==0;return Hs=0,c}function Qp(c,d,b){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~b}function wf(c){if(Jp){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Jp=!1}Br=0,Qs=Xi=jn=null,Ho=!1,la=Hs=0,Vr=null}function vo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?jn.memoizedState=Qs=c:Qs=Qs.next=c,Qs}function cr(){if(Xi===null){var c=jn.alternate;c=c!==null?c.memoizedState:null}else c=Xi.next;var d=Qs===null?jn.memoizedState:Qs.next;if(d!==null)Qs=d,Xi=c;else{if(c===null)throw jn.alternate===null?Error(i(467)):Error(i(310));Xi=c,c={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},Qs===null?jn.memoizedState=Qs=c:Qs=Qs.next=c}return Qs}function cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hl(c){var d=la;return la+=1,Vr===null&&(Vr=[]),c=Kp(Vr,c,d),d=jn,(Qs===null?d.memoizedState:Qs.next)===null&&(d=d.alternate,z.H=d===null||d.memoizedState===null?d0:jm),c}function If(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return hl(c);if(c.$$typeof===I)return Bs(c)}throw Error(i(438,String(c)))}function Of(c){var d=null,b=jn.updateQueue;if(b!==null&&(d=b.memoCache),d==null){var A=jn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(d={data:A.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),b===null&&(b=cl(),jn.updateQueue=b),b.memoCache=d,b=d.data[d.index],b===void 0)for(b=d.data[d.index]=Array(c),A=0;A<c;A++)b[A]=D;return d.index++,b}function dl(c,d){return typeof d=="function"?d(c):d}function Vl(c){var d=cr();return Nf(d,Xi,c)}function Nf(c,d,b){var A=c.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=b;var N=c.baseQueue,B=A.pending;if(B!==null){if(N!==null){var ie=N.next;N.next=B.next,B.next=ie}d.baseQueue=N=B,A.pending=null}if(B=c.baseState,N===null)c.memoizedState=B;else{d=N.next;var de=ie=null,Oe=null,nt=d,wt=!1;do{var Dt=nt.lane&-536870913;if(Dt!==nt.lane?(On&Dt)===Dt:(Br&Dt)===Dt){var it=nt.revertLane;if(it===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),Dt===Jn&&(wt=!0);else if((Br&it)===it){nt=nt.next,it===Jn&&(wt=!0);continue}else Dt={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Oe===null?(de=Oe=Dt,ie=B):Oe=Oe.next=Dt,jn.lanes|=it,_l|=it;Dt=nt.action,zr&&b(B,Dt),B=nt.hasEagerState?nt.eagerState:b(B,Dt)}else it={lane:Dt,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Oe===null?(de=Oe=it,ie=B):Oe=Oe.next=it,jn.lanes|=Dt,_l|=Dt;nt=nt.next}while(nt!==null&&nt!==d);if(Oe===null?ie=B:Oe.next=de,!Do(B,c.memoizedState)&&(dr=!0,wt&&(b=_c,b!==null)))throw b;c.memoizedState=B,c.baseState=ie,c.baseQueue=Oe,A.lastRenderedState=B}return N===null&&(A.lanes=0),[c.memoizedState,A.dispatch]}function e0(c){var d=cr(),b=d.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=c;var A=b.dispatch,N=b.pending,B=d.memoizedState;if(N!==null){b.pending=null;var ie=N=N.next;do B=c(B,ie.action),ie=ie.next;while(ie!==N);Do(B,d.memoizedState)||(dr=!0),d.memoizedState=B,d.baseQueue===null&&(d.baseState=B),b.lastRenderedState=B}return[B,A]}function f_(c,d,b){var A=jn,N=cr(),B=wi;if(B){if(b===void 0)throw Error(i(407));b=b()}else b=d();var ie=!Do((Xi||N).memoizedState,b);ie&&(N.memoizedState=b,dr=!0),N=N.queue;var de=n0.bind(null,A,N,c);if(vd(2048,8,de,[c]),N.getSnapshot!==d||ie||Qs!==null&&Qs.memoizedState.tag&1){if(A.flags|=2048,ah(9,_d(),t0.bind(null,A,N,b,d),null),qn===null)throw Error(i(349));B||(Br&124)!==0||oh(A,d,b)}return b}function oh(c,d,b){c.flags|=16384,c={getSnapshot:d,value:b},d=jn.updateQueue,d===null?(d=cl(),jn.updateQueue=d,d.stores=[c]):(b=d.stores,b===null?d.stores=[c]:b.push(c))}function t0(c,d,b,A){d.value=b,d.getSnapshot=A,p_(d)&&i0(c)}function n0(c,d,b){return b(function(){p_(d)&&i0(c)})}function p_(c){var d=c.getSnapshot;c=c.value;try{var b=d();return!Do(c,b)}catch{return!0}}function i0(c){var d=sl(c,2);d!==null&&So(d,c,2)}function wm(c){var d=vo();if(typeof c=="function"){var b=c;if(c=b(),zr){Ve(!0);try{b()}finally{Ve(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:c},d}function Im(c,d,b,A){return c.baseState=b,Nf(c,Xi,typeof A=="function"?A:dl)}function hb(c,d,b,A,N){if(Ff(c))throw Error(i(485));if(c=d.action,c!==null){var B={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){B.listeners.push(ie)}};z.T!==null?b(!0):B.isTransition=!1,A(B),b=d.pending,b===null?(B.next=d.pending=B,yc(d,B)):(B.next=b.next,d.pending=b.next=B)}}function yc(c,d){var b=d.action,A=d.payload,N=c.state;if(d.isTransition){var B=z.T,ie={};z.T=ie;try{var de=b(N,A),Oe=z.S;Oe!==null&&Oe(ie,de),Om(c,d,de)}catch(nt){s0(c,d,nt)}finally{z.T=B}}else try{B=b(N,A),Om(c,d,B)}catch(nt){s0(c,d,nt)}}function Om(c,d,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(A){Lf(c,d,A)},function(A){return s0(c,d,A)}):Lf(c,d,b)}function Lf(c,d,b){d.status="fulfilled",d.value=b,Nm(d),c.state=b,d=c.pending,d!==null&&(b=d.next,b===d?c.pending=null:(b=b.next,d.next=b,yc(c,b)))}function s0(c,d,b){var A=c.pending;if(c.pending=null,A!==null){A=A.next;do d.status="rejected",d.reason=b,Nm(d),d=d.next;while(d!==A)}c.action=null}function Nm(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function Df(c,d){return d}function Lm(c,d){if(wi){var b=qn.formState;if(b!==null){e:{var A=jn;if(wi){if(Ds){t:{for(var N=Ds,B=Po;N.nodeType!==8;){if(!B){N=null;break t}if(N=su(N.nextSibling),N===null){N=null;break t}}B=N.data,N=B==="F!"||B==="F"?N:null}if(N){Ds=su(N.nextSibling),A=N.data==="F!";break e}}pc(A)}A=!1}A&&(d=b[0])}}return b=vo(),b.memoizedState=b.baseState=d,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:d},b.queue=A,b=Wm.bind(null,jn,A),A.dispatch=b,A=wm(!1),B=Uf.bind(null,jn,!1,A.queue),A=vo(),N={state:d,dispatch:null,action:c,pending:null},A.queue=N,b=hb.bind(null,jn,N,B,b),N.dispatch=b,A.memoizedState=c,[d,b,!1]}function Dm(c){var d=cr();return Bm(d,Xi,c)}function Bm(c,d,b){if(d=Nf(c,d,Df)[0],c=Vl(dl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var A=hl(d)}catch(ie){throw ie===Zs?yr:ie}else A=d;d=cr();var N=d.queue,B=N.dispatch;return b!==d.memoizedState&&(jn.flags|=2048,ah(9,_d(),m_.bind(null,N,b),null)),[A,B,c]}function m_(c,d){c.action=d}function km(c){var d=cr(),b=Xi;if(b!==null)return Bm(d,b,c);cr(),d=d.memoizedState,b=cr();var A=b.queue.dispatch;return b.memoizedState=c,[d,A,!1]}function ah(c,d,b,A){return c={tag:c,create:b,deps:A,inst:d,next:null},d=jn.updateQueue,d===null&&(d=cl(),jn.updateQueue=d),b=d.lastEffect,b===null?d.lastEffect=c.next=c:(A=b.next,b.next=c,c.next=A,d.lastEffect=c),c}function _d(){return{destroy:void 0,resource:void 0}}function r0(){return cr().memoizedState}function Bf(c,d,b,A){var N=vo();A=A===void 0?null:A,jn.flags|=c,N.memoizedState=ah(1|d,_d(),b,A)}function vd(c,d,b,A){var N=cr();A=A===void 0?null:A;var B=N.memoizedState.inst;Xi!==null&&A!==null&&kr(A,Xi.memoizedState.deps)?N.memoizedState=ah(d,B,b,A):(jn.flags|=c,N.memoizedState=ah(1|d,B,b,A))}function Pm(c,d){Bf(8390656,8,c,d)}function Um(c,d){vd(2048,8,c,d)}function o0(c,d){return vd(4,2,c,d)}function a0(c,d){return vd(4,4,c,d)}function g_(c,d){if(typeof d=="function"){c=c();var b=d(c);return function(){typeof b=="function"?b():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function __(c,d,b){b=b!=null?b.concat([c]):null,vd(4,4,g_.bind(null,d,c),b)}function Fm(){}function Hm(c,d){var b=cr();d=d===void 0?null:d;var A=b.memoizedState;return d!==null&&kr(d,A[1])?A[0]:(b.memoizedState=[c,d],c)}function l0(c,d){var b=cr();d=d===void 0?null:d;var A=b.memoizedState;if(d!==null&&kr(d,A[1]))return A[0];if(A=c(),zr){Ve(!0);try{c()}finally{Ve(!1)}}return b.memoizedState=[A,d],A}function kf(c,d,b){return b===void 0||(Br&1073741824)!==0?c.memoizedState=d:(c.memoizedState=b,c=b0(),jn.lanes|=c,_l|=c,b)}function Gm(c,d,b,A){return Do(b,d)?b:md.current!==null?(c=kf(c,b,A),Do(c,d)||(dr=!0),c):(Br&42)===0?(dr=!0,c.memoizedState=b):(c=b0(),jn.lanes|=c,_l|=c,d)}function zm(c,d,b,A,N){var B=te.p;te.p=B!==0&&8>B?B:8;var ie=z.T,de={};z.T=de,Uf(c,!1,d,b);try{var Oe=N(),nt=z.S;if(nt!==null&&nt(de,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var wt=ub(Oe,A);bd(c,d,wt,Ws(c))}else bd(c,d,A,Ws(c))}catch(Dt){bd(c,d,{then:function(){},status:"rejected",reason:Dt},Ws())}finally{te.p=B,z.T=ie}}function v_(){}function u0(c,d,b,A){if(c.tag!==5)throw Error(i(476));var N=c0(c).queue;zm(c,N,d,ce,b===null?v_:function(){return Pf(c),b(A)})}function c0(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:ce},next:null};var b={};return d.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:b},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function Pf(c){var d=c0(c).next.queue;bd(c,d,{},Ws())}function h0(){return Bs(Dd)}function b_(){return cr().memoizedState}function Vm(){return cr().memoizedState}function y_(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var b=Ws();c=ul(b);var A=Fl(d,c,b);A!==null&&(So(A,d,b),bc(A,d,b)),d={cache:cd()},c.payload=d;return}d=d.return}}function T_(c,d,b){var A=Ws();b={lane:A,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},Ff(c)?Xm(d,b):(b=bf(c,d,b,A),b!==null&&(So(b,c,A),Go(b,d,A)))}function Wm(c,d,b){var A=Ws();bd(c,d,b,A)}function bd(c,d,b,A){var N={lane:A,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(Ff(c))Xm(d,N);else{var B=c.alternate;if(c.lanes===0&&(B===null||B.lanes===0)&&(B=d.lastRenderedReducer,B!==null))try{var ie=d.lastRenderedState,de=B(ie,b);if(N.hasEagerState=!0,N.eagerState=de,Do(de,ie))return fc(c,d,N,0),qn===null&&Cu(),!1}catch{}finally{}if(b=bf(c,d,N,A),b!==null)return So(b,c,A),Go(b,d,A),!0}return!1}function Uf(c,d,b,A){if(A={lane:2,revertLane:R_(),action:A,hasEagerState:!1,eagerState:null,next:null},Ff(c)){if(d)throw Error(i(479))}else d=bf(c,b,A,2),d!==null&&So(d,c,2)}function Ff(c){var d=c.alternate;return c===jn||d!==null&&d===jn}function Xm(c,d){Ho=Jp=!0;var b=c.pending;b===null?d.next=d:(d.next=b.next,b.next=d),c.pending=d}function Go(c,d,b){if((b&4194048)!==0){var A=d.lanes;A&=c.pendingLanes,b|=A,d.lanes=b,Xt(c,b)}}var yd={readContext:Bs,use:If,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useLayoutEffect:er,useInsertionEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useSyncExternalStore:er,useId:er,useHostTransitionStatus:er,useFormState:er,useActionState:er,useOptimistic:er,useMemoCache:er,useCacheRefresh:er},d0={readContext:Bs,use:If,useCallback:function(c,d){return vo().memoizedState=[c,d===void 0?null:d],c},useContext:Bs,useEffect:Pm,useImperativeHandle:function(c,d,b){b=b!=null?b.concat([c]):null,Bf(4194308,4,g_.bind(null,d,c),b)},useLayoutEffect:function(c,d){return Bf(4194308,4,c,d)},useInsertionEffect:function(c,d){Bf(4,2,c,d)},useMemo:function(c,d){var b=vo();d=d===void 0?null:d;var A=c();if(zr){Ve(!0);try{c()}finally{Ve(!1)}}return b.memoizedState=[A,d],A},useReducer:function(c,d,b){var A=vo();if(b!==void 0){var N=b(d);if(zr){Ve(!0);try{b(d)}finally{Ve(!1)}}}else N=d;return A.memoizedState=A.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},A.queue=c,c=c.dispatch=T_.bind(null,jn,c),[A.memoizedState,c]},useRef:function(c){var d=vo();return c={current:c},d.memoizedState=c},useState:function(c){c=wm(c);var d=c.queue,b=Wm.bind(null,jn,d);return d.dispatch=b,[c.memoizedState,b]},useDebugValue:Fm,useDeferredValue:function(c,d){var b=vo();return kf(b,c,d)},useTransition:function(){var c=wm(!1);return c=zm.bind(null,jn,c.queue,!0,!1),vo().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,b){var A=jn,N=vo();if(wi){if(b===void 0)throw Error(i(407));b=b()}else{if(b=d(),qn===null)throw Error(i(349));(On&124)!==0||oh(A,d,b)}N.memoizedState=b;var B={value:b,getSnapshot:d};return N.queue=B,Pm(n0.bind(null,A,B,c),[c]),A.flags|=2048,ah(9,_d(),t0.bind(null,A,B,b,d),null),b},useId:function(){var c=vo(),d=qn.identifierPrefix;if(wi){var b=Ma,A=rl;b=(A&~(1<<32-yt(A)-1)).toString(32)+b,d="«"+d+"R"+b,b=Hs++,0<b&&(d+="H"+b.toString(32)),d+="»"}else b=Cm++,d="«"+d+"r"+b.toString(32)+"»";return c.memoizedState=d},useHostTransitionStatus:h0,useFormState:Lm,useActionState:Lm,useOptimistic:function(c){var d=vo();d.memoizedState=d.baseState=c;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=b,d=Uf.bind(null,jn,!0,b),b.dispatch=d,[c,d]},useMemoCache:Of,useCacheRefresh:function(){return vo().memoizedState=y_.bind(null,jn)}},jm={readContext:Bs,use:If,useCallback:Hm,useContext:Bs,useEffect:Um,useImperativeHandle:__,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:l0,useReducer:Vl,useRef:r0,useState:function(){return Vl(dl)},useDebugValue:Fm,useDeferredValue:function(c,d){var b=cr();return Gm(b,Xi.memoizedState,c,d)},useTransition:function(){var c=Vl(dl)[0],d=cr().memoizedState;return[typeof c=="boolean"?c:hl(c),d]},useSyncExternalStore:f_,useId:b_,useHostTransitionStatus:h0,useFormState:Dm,useActionState:Dm,useOptimistic:function(c,d){var b=cr();return Im(b,Xi,c,d)},useMemoCache:Of,useCacheRefresh:Vm},E_={readContext:Bs,use:If,useCallback:Hm,useContext:Bs,useEffect:Um,useImperativeHandle:__,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:l0,useReducer:e0,useRef:r0,useState:function(){return e0(dl)},useDebugValue:Fm,useDeferredValue:function(c,d){var b=cr();return Xi===null?kf(b,c,d):Gm(b,Xi.memoizedState,c,d)},useTransition:function(){var c=e0(dl)[0],d=cr().memoizedState;return[typeof c=="boolean"?c:hl(c),d]},useSyncExternalStore:f_,useId:b_,useHostTransitionStatus:h0,useFormState:km,useActionState:km,useOptimistic:function(c,d){var b=cr();return Xi!==null?Im(b,Xi,c,d):(b.baseState=c,[c,b.queue.dispatch])},useMemoCache:Of,useCacheRefresh:Vm},Tc=null,Hf=0;function Gf(c){var d=Hf;return Hf+=1,Tc===null&&(Tc=[]),Kp(Tc,c,d)}function Td(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function f0(c,d){throw d.$$typeof===T?Error(i(525)):(c=Object.prototype.toString.call(d),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function ut(c){var d=c._init;return d(c._payload)}function Ec(c){function d(Je,Ge){if(c){var st=Je.deletions;st===null?(Je.deletions=[Ge],Je.flags|=16):st.push(Ge)}}function b(Je,Ge){if(!c)return null;for(;Ge!==null;)d(Je,Ge),Ge=Ge.sibling;return null}function A(Je){for(var Ge=new Map;Je!==null;)Je.key!==null?Ge.set(Je.key,Je):Ge.set(Je.index,Je),Je=Je.sibling;return Ge}function N(Je,Ge){return Je=qs(Je,Ge),Je.index=0,Je.sibling=null,Je}function B(Je,Ge,st){return Je.index=st,c?(st=Je.alternate,st!==null?(st=st.index,st<Ge?(Je.flags|=67108866,Ge):st):(Je.flags|=67108866,Ge)):(Je.flags|=1048576,Ge)}function ie(Je){return c&&Je.alternate===null&&(Je.flags|=67108866),Je}function de(Je,Ge,st,Lt){return Ge===null||Ge.tag!==6?(Ge=yf(st,Je.mode,Lt),Ge.return=Je,Ge):(Ge=N(Ge,st),Ge.return=Je,Ge)}function Oe(Je,Ge,st,Lt){var mn=st.type;return mn===$?wt(Je,Ge,st.props.children,Lt,st.key):Ge!==null&&(Ge.elementType===mn||typeof mn=="object"&&mn!==null&&mn.$$typeof===X&&ut(mn)===Ge.type)?(Ge=N(Ge,st.props),Td(Ge,st),Ge.return=Je,Ge):(Ge=Nr(st.type,st.key,st.props,null,Je.mode,Lt),Td(Ge,st),Ge.return=Je,Ge)}function nt(Je,Ge,st,Lt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==st.containerInfo||Ge.stateNode.implementation!==st.implementation?(Ge=Tf(st,Je.mode,Lt),Ge.return=Je,Ge):(Ge=N(Ge,st.children||[]),Ge.return=Je,Ge)}function wt(Je,Ge,st,Lt,mn){return Ge===null||Ge.tag!==7?(Ge=Mu(st,Je.mode,Lt,mn),Ge.return=Je,Ge):(Ge=N(Ge,st),Ge.return=Je,Ge)}function Dt(Je,Ge,st){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=yf(""+Ge,Je.mode,st),Ge.return=Je,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case y:return st=Nr(Ge.type,Ge.key,Ge.props,null,Je.mode,st),Td(st,Ge),st.return=Je,st;case S:return Ge=Tf(Ge,Je.mode,st),Ge.return=Je,Ge;case X:var Lt=Ge._init;return Ge=Lt(Ge._payload),Dt(Je,Ge,st)}if(ee(Ge)||Y(Ge))return Ge=Mu(Ge,Je.mode,st,null),Ge.return=Je,Ge;if(typeof Ge.then=="function")return Dt(Je,Gf(Ge),st);if(Ge.$$typeof===I)return Dt(Je,aa(Je,Ge),st);f0(Je,Ge)}return null}function it(Je,Ge,st,Lt){var mn=Ge!==null?Ge.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return mn!==null?null:de(Je,Ge,""+st,Lt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case y:return st.key===mn?Oe(Je,Ge,st,Lt):null;case S:return st.key===mn?nt(Je,Ge,st,Lt):null;case X:return mn=st._init,st=mn(st._payload),it(Je,Ge,st,Lt)}if(ee(st)||Y(st))return mn!==null?null:wt(Je,Ge,st,Lt,null);if(typeof st.then=="function")return it(Je,Ge,Gf(st),Lt);if(st.$$typeof===I)return it(Je,Ge,aa(Je,st),Lt);f0(Je,st)}return null}function mt(Je,Ge,st,Lt,mn){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint")return Je=Je.get(st)||null,de(Ge,Je,""+Lt,mn);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case y:return Je=Je.get(Lt.key===null?st:Lt.key)||null,Oe(Ge,Je,Lt,mn);case S:return Je=Je.get(Lt.key===null?st:Lt.key)||null,nt(Ge,Je,Lt,mn);case X:var _i=Lt._init;return Lt=_i(Lt._payload),mt(Je,Ge,st,Lt,mn)}if(ee(Lt)||Y(Lt))return Je=Je.get(st)||null,wt(Ge,Je,Lt,mn,null);if(typeof Lt.then=="function")return mt(Je,Ge,st,Gf(Lt),mn);if(Lt.$$typeof===I)return mt(Je,Ge,st,aa(Ge,Lt),mn);f0(Ge,Lt)}return null}function Ce(Je,Ge,st,Lt){for(var mn=null,_i=null,In=Ge,yn=Ge=0,Kr=null;In!==null&&yn<st.length;yn++){In.index>yn?(Kr=In,In=null):Kr=In.sibling;var Gi=it(Je,In,st[yn],Lt);if(Gi===null){In===null&&(In=Kr);break}c&&In&&Gi.alternate===null&&d(Je,In),Ge=B(Gi,Ge,yn),_i===null?mn=Gi:_i.sibling=Gi,_i=Gi,In=Kr}if(yn===st.length)return b(Je,In),wi&&ol(Je,yn),mn;if(In===null){for(;yn<st.length;yn++)In=Dt(Je,st[yn],Lt),In!==null&&(Ge=B(In,Ge,yn),_i===null?mn=In:_i.sibling=In,_i=In);return wi&&ol(Je,yn),mn}for(In=A(In);yn<st.length;yn++)Kr=mt(In,Je,yn,st[yn],Lt),Kr!==null&&(c&&Kr.alternate!==null&&In.delete(Kr.key===null?yn:Kr.key),Ge=B(Kr,Ge,yn),_i===null?mn=Kr:_i.sibling=Kr,_i=Kr);return c&&In.forEach(function(Ud){return d(Je,Ud)}),wi&&ol(Je,yn),mn}function Sn(Je,Ge,st,Lt){if(st==null)throw Error(i(151));for(var mn=null,_i=null,In=Ge,yn=Ge=0,Kr=null,Gi=st.next();In!==null&&!Gi.done;yn++,Gi=st.next()){In.index>yn?(Kr=In,In=null):Kr=In.sibling;var Ud=it(Je,In,Gi.value,Lt);if(Ud===null){In===null&&(In=Kr);break}c&&In&&Ud.alternate===null&&d(Je,In),Ge=B(Ud,Ge,yn),_i===null?mn=Ud:_i.sibling=Ud,_i=Ud,In=Kr}if(Gi.done)return b(Je,In),wi&&ol(Je,yn),mn;if(In===null){for(;!Gi.done;yn++,Gi=st.next())Gi=Dt(Je,Gi.value,Lt),Gi!==null&&(Ge=B(Gi,Ge,yn),_i===null?mn=Gi:_i.sibling=Gi,_i=Gi);return wi&&ol(Je,yn),mn}for(In=A(In);!Gi.done;yn++,Gi=st.next())Gi=mt(In,Je,yn,Gi.value,Lt),Gi!==null&&(c&&Gi.alternate!==null&&In.delete(Gi.key===null?yn:Gi.key),Ge=B(Gi,Ge,yn),_i===null?mn=Gi:_i.sibling=Gi,_i=Gi);return c&&In.forEach(function(TA){return d(Je,TA)}),wi&&ol(Je,yn),mn}function Qi(Je,Ge,st,Lt){if(typeof st=="object"&&st!==null&&st.type===$&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case y:e:{for(var mn=st.key;Ge!==null;){if(Ge.key===mn){if(mn=st.type,mn===$){if(Ge.tag===7){b(Je,Ge.sibling),Lt=N(Ge,st.props.children),Lt.return=Je,Je=Lt;break e}}else if(Ge.elementType===mn||typeof mn=="object"&&mn!==null&&mn.$$typeof===X&&ut(mn)===Ge.type){b(Je,Ge.sibling),Lt=N(Ge,st.props),Td(Lt,st),Lt.return=Je,Je=Lt;break e}b(Je,Ge);break}else d(Je,Ge);Ge=Ge.sibling}st.type===$?(Lt=Mu(st.props.children,Je.mode,Lt,st.key),Lt.return=Je,Je=Lt):(Lt=Nr(st.type,st.key,st.props,null,Je.mode,Lt),Td(Lt,st),Lt.return=Je,Je=Lt)}return ie(Je);case S:e:{for(mn=st.key;Ge!==null;){if(Ge.key===mn)if(Ge.tag===4&&Ge.stateNode.containerInfo===st.containerInfo&&Ge.stateNode.implementation===st.implementation){b(Je,Ge.sibling),Lt=N(Ge,st.children||[]),Lt.return=Je,Je=Lt;break e}else{b(Je,Ge);break}else d(Je,Ge);Ge=Ge.sibling}Lt=Tf(st,Je.mode,Lt),Lt.return=Je,Je=Lt}return ie(Je);case X:return mn=st._init,st=mn(st._payload),Qi(Je,Ge,st,Lt)}if(ee(st))return Ce(Je,Ge,st,Lt);if(Y(st)){if(mn=Y(st),typeof mn!="function")throw Error(i(150));return st=mn.call(st),Sn(Je,Ge,st,Lt)}if(typeof st.then=="function")return Qi(Je,Ge,Gf(st),Lt);if(st.$$typeof===I)return Qi(Je,Ge,aa(Je,st),Lt);f0(Je,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Ge!==null&&Ge.tag===6?(b(Je,Ge.sibling),Lt=N(Ge,st),Lt.return=Je,Je=Lt):(b(Je,Ge),Lt=yf(st,Je.mode,Lt),Lt.return=Je,Je=Lt),ie(Je)):b(Je,Ge)}return function(Je,Ge,st,Lt){try{Hf=0;var mn=Qi(Je,Ge,st,Lt);return Tc=null,mn}catch(In){if(In===Zs||In===yr)throw In;var _i=_o(29,In,null,Je.mode);return _i.lanes=Lt,_i.return=Je,_i}finally{}}}var Ed=Ec(!0),p0=Ec(!1),ri=fe(null),Et=null;function bo(c){var d=c.alternate;Pe(ks,ks.current&1),Pe(ri,c),Et===null&&(d===null||md.current!==null||d.memoizedState!==null)&&(Et=c)}function As(c){if(c.tag===22){if(Pe(ks,ks.current),Pe(ri,c),Et===null){var d=c.alternate;d!==null&&d.memoizedState!==null&&(Et=c)}}else lh()}function lh(){Pe(ks,ks.current),Pe(ri,ri.current)}function Wl(c){Ne(ri),Et===c&&(Et=null),Ne(ks)}var ks=fe(0);function zo(c){for(var d=c;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||D_(b)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function Xl(c,d,b,A){d=c.memoizedState,b=b(A,d),b=b==null?d:v({},d,b),c.memoizedState=b,c.lanes===0&&(c.updateQueue.baseState=b)}var hr={enqueueSetState:function(c,d,b){c=c._reactInternals;var A=Ws(),N=ul(A);N.payload=d,b!=null&&(N.callback=b),d=Fl(c,N,A),d!==null&&(So(d,c,A),bc(d,c,A))},enqueueReplaceState:function(c,d,b){c=c._reactInternals;var A=Ws(),N=ul(A);N.tag=1,N.payload=d,b!=null&&(N.callback=b),d=Fl(c,N,A),d!==null&&(So(d,c,A),bc(d,c,A))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var b=Ws(),A=ul(b);A.tag=2,d!=null&&(A.callback=d),d=Fl(c,A,b),d!==null&&(So(d,c,b),bc(d,c,b))}};function Ym(c,d,b,A,N,B,ie){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,B,ie):d.prototype&&d.prototype.isPureReactComponent?!tl(b,A)||!tl(N,B):!0}function S_(c,d,b,A){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,A),d.state!==c&&hr.enqueueReplaceState(d,d.state,null)}function jl(c,d){var b=d;if("ref"in d){b={};for(var A in d)A!=="ref"&&(b[A]=d[A])}if(c=c.defaultProps){b===d&&(b=v({},b));for(var N in c)b[N]===void 0&&(b[N]=c[N])}return b}var uh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function ch(c){uh(c)}function Sd(c){console.error(c)}function Km(c){uh(c)}function m0(c,d){try{var b=c.onUncaughtError;b(d.value,{componentStack:d.stack})}catch(A){setTimeout(function(){throw A})}}function Na(c,d,b){try{var A=c.onCaughtError;A(b.value,{componentStack:b.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function g0(c,d,b){return b=ul(b),b.tag=3,b.payload={element:null},b.callback=function(){m0(c,d)},b}function db(c){return c=ul(c),c.tag=3,c}function _0(c,d,b,A){var N=b.type.getDerivedStateFromError;if(typeof N=="function"){var B=A.value;c.payload=function(){return N(B)},c.callback=function(){Na(d,b,A)}}var ie=b.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(c.callback=function(){Na(d,b,A),typeof N!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var de=A.stack;this.componentDidCatch(A.value,{componentStack:de!==null?de:""})})}function fb(c,d,b,A,N){if(b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(d=b.alternate,d!==null&&Uo(d,b,N,!0),b=ri.current,b!==null){switch(b.tag){case 13:return Et===null?m():b.alternate===null&&_s===0&&(_s=3),b.flags&=-257,b.flags|=65536,b.lanes=N,A===Iu?b.flags|=16384:(d=b.updateQueue,d===null?b.updateQueue=new Set([A]):d.add(A),pt(c,A,N)),!1;case 22:return b.flags|=65536,A===Iu?b.flags|=16384:(d=b.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([A])},b.updateQueue=d):(b=d.retryQueue,b===null?d.retryQueue=new Set([A]):b.add(A)),pt(c,A,N)),!1}throw Error(i(435,b.tag))}return pt(c,A,N),m(),!1}if(wi)return d=ri.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,A!==Ra&&(c=Error(i(422),{cause:A}),rh(Or(c,b)))):(A!==Ra&&(d=Error(i(423),{cause:A}),rh(Or(d,b))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,A=Or(A,b),N=g0(c.stateNode,A,N),Hl(c,N),_s!==4&&(_s=2)),!1;var B=Error(i(520),{cause:A});if(B=Or(B,b),Li===null?Li=[B]:Li.push(B),_s!==4&&(_s=2),d===null)return!0;A=Or(A,b),b=d;do{switch(b.tag){case 3:return b.flags|=65536,c=N&-N,b.lanes|=c,c=g0(b.stateNode,A,c),Hl(b,c),!1;case 1:if(d=b.type,B=b.stateNode,(b.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Eo===null||!Eo.has(B))))return b.flags|=65536,N&=-N,b.lanes|=N,N=db(N),_0(N,c,b,A),Hl(b,N),!1}b=b.return}while(b!==null);return!1}var qm=Error(i(461)),dr=!1;function tr(c,d,b,A){d.child=c===null?p0(d,null,b,A):Ed(d,c.child,b,A)}function yo(c,d,b,A,N){b=b.render;var B=d.ref;if("ref"in A){var ie={};for(var de in A)de!=="ref"&&(ie[de]=A[de])}else ie=A;return Ul(d),A=zl(c,d,b,ie,B,N),de=Zp(),c!==null&&!dr?(Qp(c,d,N),qi(c,d,N)):(wi&&de&&ud(d),d.flags|=1,tr(c,d,A,N),d.child)}function Vo(c,d,b,A,N){if(c===null){var B=b.type;return typeof B=="function"&&!ad(B)&&B.defaultProps===void 0&&b.compare===null?(d.tag=15,d.type=B,A_(c,d,B,A,N)):(c=Nr(b.type,null,A,d,d.mode,N),c.ref=d.ref,c.return=d,d.child=c)}if(B=c.child,!Da(c,N)){var ie=B.memoizedProps;if(b=b.compare,b=b!==null?b:tl,b(ie,A)&&c.ref===d.ref)return qi(c,d,N)}return d.flags|=1,c=qs(B,A),c.ref=d.ref,c.return=d,d.child=c}function A_(c,d,b,A,N){if(c!==null){var B=c.memoizedProps;if(tl(B,A)&&c.ref===d.ref)if(dr=!1,d.pendingProps=A=B,Da(c,N))(c.flags&131072)!==0&&(dr=!0);else return d.lanes=c.lanes,qi(c,d,N)}return tt(c,d,b,A,N)}function hh(c,d,b){var A=d.pendingProps,N=A.children,B=c!==null?c.memoizedState:null;if(A.mode==="hidden"){if((d.flags&128)!==0){if(A=B!==null?B.baseLanes|b:b,c!==null){for(N=d.child=c.child,B=0;N!==null;)B=B|N.lanes|N.childLanes,N=N.sibling;d.childLanes=B&~A}else d.childLanes=0,d.child=null;return dh(c,d,A,b)}if((b&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&cn(d,B!==null?B.cachePool:null),B!==null?Oa(d,B):qp(),As(d);else return d.lanes=d.childLanes=536870912,dh(c,d,B!==null?B.baseLanes|b:b,b)}else B!==null?(cn(d,B.cachePool),Oa(d,B),lh(),d.memoizedState=null):(c!==null&&cn(d,null),qp(),lh());return tr(c,d,N,b),d.child}function dh(c,d,b,A){var N=vc();return N=N===null?null:{parent:Js._currentValue,pool:N},d.memoizedState={baseLanes:b,cachePool:N},c!==null&&cn(d,null),qp(),As(d),c!==null&&Uo(c,d,A,!0),null}function Wo(c,d){var b=d.ref;if(b===null)c!==null&&c.ref!==null&&(d.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(c===null||c.ref!==b)&&(d.flags|=4194816)}}function tt(c,d,b,A,N){return Ul(d),b=zl(c,d,b,A,void 0,N),A=Zp(),c!==null&&!dr?(Qp(c,d,N),qi(c,d,N)):(wi&&A&&ud(d),d.flags|=1,tr(c,d,b,N),d.child)}function ua(c,d,b,A,N,B){return Ul(d),d.updateQueue=null,b=Rm(d,A,b,N),Mm(c),A=Zp(),c!==null&&!dr?(Qp(c,d,B),qi(c,d,B)):(wi&&A&&ud(d),d.flags|=1,tr(c,d,b,B),d.child)}function ca(c,d,b,A,N){if(Ul(d),d.stateNode===null){var B=oa,ie=b.contextType;typeof ie=="object"&&ie!==null&&(B=Bs(ie)),B=new b(A,B),d.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=hr,d.stateNode=B,B._reactInternals=d,B=d.stateNode,B.props=A,B.state=d.memoizedState,B.refs={},Mf(d),ie=b.contextType,B.context=typeof ie=="object"&&ie!==null?Bs(ie):oa,B.state=d.memoizedState,ie=b.getDerivedStateFromProps,typeof ie=="function"&&(Xl(d,b,ie,A),B.state=d.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(ie=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),ie!==B.state&&hr.enqueueReplaceState(B,B.state,null),pd(d,A,B,N),Rf(),B.state=d.memoizedState),typeof B.componentDidMount=="function"&&(d.flags|=4194308),A=!0}else if(c===null){B=d.stateNode;var de=d.memoizedProps,Oe=jl(b,de);B.props=Oe;var nt=B.context,wt=b.contextType;ie=oa,typeof wt=="object"&&wt!==null&&(ie=Bs(wt));var Dt=b.getDerivedStateFromProps;wt=typeof Dt=="function"||typeof B.getSnapshotBeforeUpdate=="function",de=d.pendingProps!==de,wt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(de||nt!==ie)&&S_(d,B,A,ie),Ou=!1;var it=d.memoizedState;B.state=it,pd(d,A,B,N),Rf(),nt=d.memoizedState,de||it!==nt||Ou?(typeof Dt=="function"&&(Xl(d,b,Dt,A),nt=d.memoizedState),(Oe=Ou||Ym(d,b,Oe,A,it,nt,ie))?(wt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(d.flags|=4194308)):(typeof B.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=nt),B.props=A,B.state=nt,B.context=ie,A=Oe):(typeof B.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{B=d.stateNode,Vn(c,d),ie=d.memoizedProps,wt=jl(b,ie),B.props=wt,Dt=d.pendingProps,it=B.context,nt=b.contextType,Oe=oa,typeof nt=="object"&&nt!==null&&(Oe=Bs(nt)),de=b.getDerivedStateFromProps,(nt=typeof de=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ie!==Dt||it!==Oe)&&S_(d,B,A,Oe),Ou=!1,it=d.memoizedState,B.state=it,pd(d,A,B,N),Rf();var mt=d.memoizedState;ie!==Dt||it!==mt||Ou||c!==null&&c.dependencies!==null&&Af(c.dependencies)?(typeof de=="function"&&(Xl(d,b,de,A),mt=d.memoizedState),(wt=Ou||Ym(d,b,wt,A,it,mt,Oe)||c!==null&&c.dependencies!==null&&Af(c.dependencies))?(nt||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(A,mt,Oe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(A,mt,Oe)),typeof B.componentDidUpdate=="function"&&(d.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof B.componentDidUpdate!="function"||ie===c.memoizedProps&&it===c.memoizedState||(d.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&it===c.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=mt),B.props=A,B.state=mt,B.context=Oe,A=wt):(typeof B.componentDidUpdate!="function"||ie===c.memoizedProps&&it===c.memoizedState||(d.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&it===c.memoizedState||(d.flags|=1024),A=!1)}return B=A,Wo(c,d),A=(d.flags&128)!==0,B||A?(B=d.stateNode,b=A&&typeof b.getDerivedStateFromError!="function"?null:B.render(),d.flags|=1,c!==null&&A?(d.child=Ed(d,c.child,null,N),d.child=Ed(d,null,b,N)):tr(c,d,b,N),d.memoizedState=B.state,c=d.child):c=qi(c,d,N),c}function Sc(c,d,b,A){return ll(),d.flags|=256,tr(c,d,b,A),d.child}var Yl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function La(c){return{baseLanes:c,cachePool:ao()}}function Tr(c,d,b){return c=c!==null?c.childLanes&~b:0,d&&(c|=Vs),c}function Lu(c,d,b){var A=d.pendingProps,N=!1,B=(d.flags&128)!==0,ie;if((ie=B)||(ie=c!==null&&c.memoizedState===null?!1:(ks.current&2)!==0),ie&&(N=!0,d.flags&=-129),ie=(d.flags&32)!==0,d.flags&=-33,c===null){if(wi){if(N?bo(d):lh(),wi){var de=Ds,Oe;if(Oe=de){e:{for(Oe=de,de=Po;Oe.nodeType!==8;){if(!de){de=null;break e}if(Oe=su(Oe.nextSibling),Oe===null){de=null;break e}}de=Oe}de!==null?(d.memoizedState={dehydrated:de,treeContext:Ru!==null?{id:rl,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},Oe=_o(18,null,null,0),Oe.stateNode=de,Oe.return=d,d.child=Oe,Lr=d,Ds=null,Oe=!0):Oe=!1}Oe||pc(d)}if(de=d.memoizedState,de!==null&&(de=de.dehydrated,de!==null))return D_(de)?d.lanes=32:d.lanes=536870912,null;Wl(d)}return de=A.children,A=A.fallback,N?(lh(),N=d.mode,de=Ac({mode:"hidden",children:de},N),A=Mu(A,N,b,null),de.return=d,A.return=d,de.sibling=A,d.child=de,N=d.child,N.memoizedState=La(b),N.childLanes=Tr(c,ie,b),d.memoizedState=Yl,A):(bo(d),fl(d,de))}if(Oe=c.memoizedState,Oe!==null&&(de=Oe.dehydrated,de!==null)){if(B)d.flags&256?(bo(d),d.flags&=-257,d=Is(c,d,b)):d.memoizedState!==null?(lh(),d.child=c.child,d.flags|=128,d=null):(lh(),N=A.fallback,de=d.mode,A=Ac({mode:"visible",children:A.children},de),N=Mu(N,de,b,null),N.flags|=2,A.return=d,N.return=d,A.sibling=N,d.child=A,Ed(d,c.child,null,b),A=d.child,A.memoizedState=La(b),A.childLanes=Tr(c,ie,b),d.memoizedState=Yl,d=N);else if(bo(d),D_(de)){if(ie=de.nextSibling&&de.nextSibling.dataset,ie)var nt=ie.dgst;ie=nt,A=Error(i(419)),A.stack="",A.digest=ie,rh({value:A,source:null,stack:null}),d=Is(c,d,b)}else if(dr||Uo(c,d,b,!1),ie=(b&c.childLanes)!==0,dr||ie){if(ie=qn,ie!==null&&(A=b&-b,A=(A&42)!==0?1:Yt(A),A=(A&(ie.suspendedLanes|b))!==0?0:A,A!==0&&A!==Oe.retryLane))throw Oe.retryLane=A,sl(c,A),So(ie,c,A),qm;de.data==="$?"||m(),d=Is(c,d,b)}else de.data==="$?"?(d.flags|=192,d.child=c.child,d=null):(c=Oe.treeContext,Ds=su(de.nextSibling),Lr=d,wi=!0,Dr=null,Po=!1,c!==null&&(Gr[oo++]=rl,Gr[oo++]=Ma,Gr[oo++]=Ru,rl=c.id,Ma=c.overflow,Ru=d),d=fl(d,A.children),d.flags|=4096);return d}return N?(lh(),N=A.fallback,de=d.mode,Oe=c.child,nt=Oe.sibling,A=qs(Oe,{mode:"hidden",children:A.children}),A.subtreeFlags=Oe.subtreeFlags&65011712,nt!==null?N=qs(nt,N):(N=Mu(N,de,b,null),N.flags|=2),N.return=d,A.return=d,A.sibling=N,d.child=A,A=N,N=d.child,de=c.child.memoizedState,de===null?de=La(b):(Oe=de.cachePool,Oe!==null?(nt=Js._currentValue,Oe=Oe.parent!==nt?{parent:nt,pool:nt}:Oe):Oe=ao(),de={baseLanes:de.baseLanes|b,cachePool:Oe}),N.memoizedState=de,N.childLanes=Tr(c,ie,b),d.memoizedState=Yl,A):(bo(d),b=c.child,c=b.sibling,b=qs(b,{mode:"visible",children:A.children}),b.return=d,b.sibling=null,c!==null&&(ie=d.deletions,ie===null?(d.deletions=[c],d.flags|=16):ie.push(c)),d.child=b,d.memoizedState=null,b)}function fl(c,d){return d=Ac({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function Ac(c,d){return c=_o(22,c,null,d),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function Is(c,d,b){return Ed(d,c.child,null,b),c=fl(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function Wr(c,d,b){c.lanes|=d;var A=c.alternate;A!==null&&(A.lanes|=d),Tm(c.return,d,b)}function hi(c,d,b,A,N){var B=c.memoizedState;B===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:N}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=A,B.tail=b,B.tailMode=N)}function fr(c,d,b){var A=d.pendingProps,N=A.revealOrder,B=A.tail;if(tr(c,d,A.children,b),A=ks.current,(A&2)!==0)A=A&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Wr(c,b,d);else if(c.tag===19)Wr(c,b,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}A&=1}switch(Pe(ks,A),N){case"forwards":for(b=d.child,N=null;b!==null;)c=b.alternate,c!==null&&zo(c)===null&&(N=b),b=b.sibling;b=N,b===null?(N=d.child,d.child=null):(N=b.sibling,b.sibling=null),hi(d,!1,N,b,B);break;case"backwards":for(b=null,N=d.child,d.child=null;N!==null;){if(c=N.alternate,c!==null&&zo(c)===null){d.child=N;break}c=N.sibling,N.sibling=b,b=N,N=c}hi(d,!0,b,null,B);break;case"together":hi(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function qi(c,d,b){if(c!==null&&(d.dependencies=c.dependencies),_l|=d.lanes,(b&d.childLanes)===0)if(c!==null){if(Uo(c,d,b,!1),(b&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(i(153));if(d.child!==null){for(c=d.child,b=qs(c,c.pendingProps),d.child=b,b.return=d;c.sibling!==null;)c=c.sibling,b=b.sibling=qs(c,c.pendingProps),b.return=d;b.sibling=null}return d.child}function Da(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&Af(c)))}function nr(c,d,b){switch(d.tag){case 3:ft(d,d.stateNode.containerInfo),gc(d,Js,c.memoizedState.cache),ll();break;case 27:case 5:Ke(d);break;case 4:ft(d,d.stateNode.containerInfo);break;case 10:gc(d,d.type,d.memoizedProps.value);break;case 13:var A=d.memoizedState;if(A!==null)return A.dehydrated!==null?(bo(d),d.flags|=128,null):(b&d.child.childLanes)!==0?Lu(c,d,b):(bo(d),c=qi(c,d,b),c!==null?c.sibling:null);bo(d);break;case 19:var N=(c.flags&128)!==0;if(A=(b&d.childLanes)!==0,A||(Uo(c,d,b,!1),A=(b&d.childLanes)!==0),N){if(A)return fr(c,d,b);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Pe(ks,ks.current),A)break;return null;case 22:case 23:return d.lanes=0,hh(c,d,b);case 24:gc(d,Js,c.memoizedState.cache)}return qi(c,d,b)}function $c(c,d,b){if(c!==null)if(c.memoizedProps!==d.pendingProps)dr=!0;else{if(!Da(c,b)&&(d.flags&128)===0)return dr=!1,nr(c,d,b);dr=(c.flags&131072)!==0}else dr=!1,wi&&(d.flags&1048576)!==0&&Wp(d,ld,d.index);switch(d.lanes=0,d.tag){case 16:e:{c=d.pendingProps;var A=d.elementType,N=A._init;if(A=N(A._payload),d.type=A,typeof A=="function")ad(A)?(c=jl(A,c),d.tag=1,d=ca(null,d,A,c,b)):(d.tag=0,d=tt(null,d,A,c,b));else{if(A!=null){if(N=A.$$typeof,N===O){d.tag=11,d=yo(null,d,A,c,b);break e}else if(N===V){d.tag=14,d=Vo(null,d,A,c,b);break e}}throw d=ne(A)||A,Error(i(306,d,""))}}return d;case 0:return tt(c,d,d.type,d.pendingProps,b);case 1:return A=d.type,N=jl(A,d.pendingProps),ca(c,d,A,N,b);case 3:e:{if(ft(d,d.stateNode.containerInfo),c===null)throw Error(i(387));A=d.pendingProps;var B=d.memoizedState;N=B.element,Vn(c,d),pd(d,A,null,b);var ie=d.memoizedState;if(A=ie.cache,gc(d,Js,A),A!==B.cache&&Sf(d,[Js],b,!0),Rf(),A=ie.element,B.isDehydrated)if(B={element:A,isDehydrated:!1,cache:ie.cache},d.updateQueue.baseState=B,d.memoizedState=B,d.flags&256){d=Sc(c,d,A,b);break e}else if(A!==N){N=Or(Error(i(424)),d),rh(N),d=Sc(c,d,A,b);break e}else{switch(c=d.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Ds=su(c.firstChild),Lr=d,wi=!0,Dr=null,Po=!0,b=p0(d,null,A,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(ll(),A===N){d=qi(c,d,b);break e}tr(c,d,A,b)}d=d.child}return d;case 26:return Wo(c,d),c===null?(b=U_(d.type,null,d.pendingProps,null))?d.memoizedState=b:wi||(b=d.type,c=d.pendingProps,A=wc(Fe.current).createElement(b),A[Nn]=d,A[gn]=c,Yr(A,b,c),ht(A),d.stateNode=A):d.memoizedState=U_(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:return Ke(d),c===null&&wi&&(A=d.stateNode=A0(d.type,d.pendingProps,Fe.current),Lr=d,Po=!0,N=Ds,Id(d.type)?(B_=N,Ds=su(A.firstChild)):Ds=N),tr(c,d,d.pendingProps.children,b),Wo(c,d),c===null&&(d.flags|=4194304),d.child;case 5:return c===null&&wi&&((N=A=Ds)&&(A=vh(A,d.type,d.pendingProps,Po),A!==null?(d.stateNode=A,Lr=d,Ds=su(A.firstChild),Po=!1,N=!0):N=!1),N||pc(d)),Ke(d),N=d.type,B=d.pendingProps,ie=c!==null?c.memoizedProps:null,A=B.children,yb(N,B)?A=null:ie!==null&&yb(N,ie)&&(d.flags|=32),d.memoizedState!==null&&(N=zl(c,d,cb,null,null,b),Dd._currentValue=N),Wo(c,d),tr(c,d,A,b),d.child;case 6:return c===null&&wi&&((c=b=Ds)&&(b=_a(b,d.pendingProps,Po),b!==null?(d.stateNode=b,Lr=d,Ds=null,c=!0):c=!1),c||pc(d)),null;case 13:return Lu(c,d,b);case 4:return ft(d,d.stateNode.containerInfo),A=d.pendingProps,c===null?d.child=Ed(d,null,A,b):tr(c,d,A,b),d.child;case 11:return yo(c,d,d.type,d.pendingProps,b);case 7:return tr(c,d,d.pendingProps,b),d.child;case 8:return tr(c,d,d.pendingProps.children,b),d.child;case 12:return tr(c,d,d.pendingProps.children,b),d.child;case 10:return A=d.pendingProps,gc(d,d.type,A.value),tr(c,d,A.children,b),d.child;case 9:return N=d.type._context,A=d.pendingProps.children,Ul(d),N=Bs(N),A=A(N),d.flags|=1,tr(c,d,A,b),d.child;case 14:return Vo(c,d,d.type,d.pendingProps,b);case 15:return A_(c,d,d.type,d.pendingProps,b);case 19:return fr(c,d,b);case 31:return A=d.pendingProps,b=d.mode,A={mode:A.mode,children:A.children},c===null?(b=Ac(A,b),b.ref=d.ref,d.child=b,b.return=d,d=b):(b=qs(c.child,A),b.ref=d.ref,d.child=b,b.return=d,d=b),d;case 22:return hh(c,d,b);case 24:return Ul(d),A=Bs(Js),c===null?(N=vc(),N===null&&(N=qn,B=cd(),N.pooledCache=B,B.refCount++,B!==null&&(N.pooledCacheLanes|=b),N=B),d.memoizedState={parent:A,cache:N},Mf(d),gc(d,Js,N)):((c.lanes&b)!==0&&(Vn(c,d),pd(d,null,null,b),Rf()),N=c.memoizedState,B=d.memoizedState,N.parent!==A?(N={parent:A,cache:A},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),gc(d,Js,A)):(A=B.cache,gc(d,Js,A),A!==N.cache&&Sf(d,[Js],b,!0))),tr(c,d,d.pendingProps.children,b),d.child;case 29:throw d.pendingProps}throw Error(i(156,d.tag))}function Xo(c){c.flags|=4}function ir(c,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!BT(d)){if(d=ri.current,d!==null&&((On&4194048)===On?Et!==null:(On&62914560)!==On&&(On&536870912)===0||d!==Et))throw Ia=Iu,ws;c.flags|=8192}}function $s(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?Ze():536870912,c.lanes|=d,Ni|=d)}function Ad(c,d){if(!wi)switch(c.tailMode){case"hidden":d=c.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?c.tail=null:b.sibling=null;break;case"collapsed":b=c.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function ni(c){var d=c.alternate!==null&&c.alternate.child===c.child,b=0,A=0;if(d)for(var N=c.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags&65011712,A|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)b|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=A,c.childLanes=b,d}function Jm(c,d,b){var A=d.pendingProps;switch(Xp(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(d),null;case 1:return ni(d),null;case 3:return b=d.stateNode,A=null,c!==null&&(A=c.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),Pl(Js),Ut(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(al(d)?Xo(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Fi())),ni(d),null;case 26:return b=d.memoizedState,c===null?(Xo(d),b!==null?(ni(d),ir(d,b)):(ni(d),d.flags&=-16777217)):b?b!==c.memoizedState?(Xo(d),ni(d),ir(d,b)):(ni(d),d.flags&=-16777217):(c.memoizedProps!==A&&Xo(d),ni(d),d.flags&=-16777217),null;case 27:Ht(d),b=Fe.current;var N=d.type;if(c!==null&&d.stateNode!=null)c.memoizedProps!==A&&Xo(d);else{if(!A){if(d.stateNode===null)throw Error(i(166));return ni(d),null}c=Ee.current,al(d)?h_(d):(c=A0(N,A,b),d.stateNode=c,Xo(d))}return ni(d),null;case 5:if(Ht(d),b=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==A&&Xo(d);else{if(!A){if(d.stateNode===null)throw Error(i(166));return ni(d),null}if(c=Ee.current,al(d))h_(d);else{switch(N=wc(Fe.current),c){case 1:c=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:c=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":c=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":c=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":c=N.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof A.is=="string"?N.createElement("select",{is:A.is}):N.createElement("select"),A.multiple?c.multiple=!0:A.size&&(c.size=A.size);break;default:c=typeof A.is=="string"?N.createElement(b,{is:A.is}):N.createElement(b)}}c[Nn]=d,c[gn]=A;e:for(N=d.child;N!==null;){if(N.tag===5||N.tag===6)c.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===d)break e;for(;N.sibling===null;){if(N.return===null||N.return===d)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}d.stateNode=c;e:switch(Yr(c,b,A),b){case"button":case"input":case"select":case"textarea":c=!!A.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xo(d)}}return ni(d),d.flags&=-16777217,null;case 6:if(c&&d.stateNode!=null)c.memoizedProps!==A&&Xo(d);else{if(typeof A!="string"&&d.stateNode===null)throw Error(i(166));if(c=Fe.current,al(d)){if(c=d.stateNode,b=d.memoizedProps,A=null,N=Lr,N!==null)switch(N.tag){case 27:case 5:A=N.memoizedProps}c[Nn]=d,c=!!(c.nodeValue===b||A!==null&&A.suppressHydrationWarning===!0||O_(c.nodeValue,b)),c||pc(d)}else c=wc(c).createTextNode(A),c[Nn]=d,d.stateNode=c}return ni(d),null;case 13:if(A=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=al(d),A!==null&&A.dehydrated!==null){if(c===null){if(!N)throw Error(i(318));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));N[Nn]=d}else ll(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ni(d),N=!1}else N=Fi(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(Wl(d),d):(Wl(d),null)}if(Wl(d),(d.flags&128)!==0)return d.lanes=b,d;if(b=A!==null,c=c!==null&&c.memoizedState!==null,b){A=d.child,N=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(N=A.alternate.memoizedState.cachePool.pool);var B=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(B=A.memoizedState.cachePool.pool),B!==N&&(A.flags|=2048)}return b!==c&&b&&(d.child.flags|=8192),$s(d,d.updateQueue),ni(d),null;case 4:return Ut(),c===null&&E0(d.stateNode.containerInfo),ni(d),null;case 10:return Pl(d.type),ni(d),null;case 19:if(Ne(ks),N=d.memoizedState,N===null)return ni(d),null;if(A=(d.flags&128)!==0,B=N.rendering,B===null)if(A)Ad(N,!1);else{if(_s!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(B=zo(c),B!==null){for(d.flags|=128,Ad(N,!1),c=B.updateQueue,d.updateQueue=c,$s(d,c),d.subtreeFlags=0,c=b,b=d.child;b!==null;)bm(b,c),b=b.sibling;return Pe(ks,ks.current&1|2),d.child}c=c.sibling}N.tail!==null&&we()>jr&&(d.flags|=128,A=!0,Ad(N,!1),d.lanes=4194304)}else{if(!A)if(c=zo(B),c!==null){if(d.flags|=128,A=!0,c=c.updateQueue,d.updateQueue=c,$s(d,c),Ad(N,!0),N.tail===null&&N.tailMode==="hidden"&&!B.alternate&&!wi)return ni(d),null}else 2*we()-N.renderingStartTime>jr&&b!==536870912&&(d.flags|=128,A=!0,Ad(N,!1),d.lanes=4194304);N.isBackwards?(B.sibling=d.child,d.child=B):(c=N.last,c!==null?c.sibling=B:d.child=B,N.last=B)}return N.tail!==null?(d=N.tail,N.rendering=d,N.tail=d.sibling,N.renderingStartTime=we(),d.sibling=null,c=ks.current,Pe(ks,A?c&1|2:c&1),d):(ni(d),null);case 22:case 23:return Wl(d),Nu(),A=d.memoizedState!==null,c!==null?c.memoizedState!==null!==A&&(d.flags|=8192):A&&(d.flags|=8192),A?(b&536870912)!==0&&(d.flags&128)===0&&(ni(d),d.subtreeFlags&6&&(d.flags|=8192)):ni(d),b=d.updateQueue,b!==null&&$s(d,b.retryQueue),b=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==b&&(d.flags|=2048),c!==null&&Ne(wa),null;case 24:return b=null,c!==null&&(b=c.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Pl(Js),ni(d),null;case 25:return null;case 30:return null}throw Error(i(156,d.tag))}function Ii(c,d){switch(Xp(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Pl(Js),Ut(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return Ht(d),null;case 13:if(Wl(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(i(340));ll()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Ne(ks),null;case 4:return Ut(),null;case 10:return Pl(d.type),null;case 22:case 23:return Wl(d),Nu(),c!==null&&Ne(wa),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return Pl(Js),null;case 25:return null;default:return null}}function Du(c,d){switch(Xp(d),d.tag){case 3:Pl(Js),Ut();break;case 26:case 27:case 5:Ht(d);break;case 4:Ut();break;case 13:Wl(d);break;case 19:Ne(ks);break;case 10:Pl(d.type);break;case 22:case 23:Wl(d),Nu(),c!==null&&Ne(wa);break;case 24:Pl(Js)}}function fh(c,d){try{var b=d.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var N=A.next;b=N;do{if((b.tag&c)===c){A=void 0;var B=b.create,ie=b.inst;A=B(),ie.destroy=A}b=b.next}while(b!==N)}}catch(de){He(d,d.return,de)}}function ha(c,d,b){try{var A=d.updateQueue,N=A!==null?A.lastEffect:null;if(N!==null){var B=N.next;A=B;do{if((A.tag&c)===c){var ie=A.inst,de=ie.destroy;if(de!==void 0){ie.destroy=void 0,N=d;var Oe=b,nt=de;try{nt()}catch(wt){He(N,Oe,wt)}}}A=A.next}while(A!==B)}}catch(wt){He(d,d.return,wt)}}function Kl(c){var d=c.updateQueue;if(d!==null){var b=c.stateNode;try{xm(d,b)}catch(A){He(c,c.return,A)}}}function Bu(c,d,b){b.props=jl(c.type,c.memoizedProps),b.state=c.memoizedState;try{b.componentWillUnmount()}catch(A){He(c,d,A)}}function Os(c,d){try{var b=c.ref;if(b!==null){switch(c.tag){case 26:case 27:case 5:var A=c.stateNode;break;case 30:A=c.stateNode;break;default:A=c.stateNode}typeof b=="function"?c.refCleanup=b(A):b.current=A}}catch(N){He(c,d,N)}}function jo(c,d){var b=c.ref,A=c.refCleanup;if(b!==null)if(typeof A=="function")try{A()}catch(N){He(c,d,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(N){He(c,d,N)}else b.current=null}function Yo(c){var d=c.type,b=c.memoizedProps,A=c.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":b.autoFocus&&A.focus();break e;case"img":b.src?A.src=b.src:b.srcSet&&(A.srcset=b.srcSet)}}catch(N){He(c,c.return,N)}}function $d(c,d,b){try{var A=c.stateNode;S0(A,c.type,b,d),A[gn]=d}catch(N){He(c,c.return,N)}}function xd(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Id(c.type)||c.tag===4}function xc(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||xd(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Id(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function To(c,d,b){var A=c.tag;if(A===5||A===6)c=c.stateNode,d?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(c,d):(d=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,d.appendChild(c),b=b._reactRootContainer,b!=null||d.onclick!==null||(d.onclick=yl));else if(A!==4&&(A===27&&Id(c.type)&&(b=c.stateNode,d=null),c=c.child,c!==null))for(To(c,d,b),c=c.sibling;c!==null;)To(c,d,b),c=c.sibling}function Hi(c,d,b){var A=c.tag;if(A===5||A===6)c=c.stateNode,d?b.insertBefore(c,d):b.appendChild(c);else if(A!==4&&(A===27&&Id(c.type)&&(b=c.stateNode),c=c.child,c!==null))for(Hi(c,d,b),c=c.sibling;c!==null;)Hi(c,d,b),c=c.sibling}function ku(c){var d=c.stateNode,b=c.memoizedProps;try{for(var A=c.type,N=d.attributes;N.length;)d.removeAttributeNode(N[0]);Yr(d,A,b),d[Nn]=c,d[gn]=b}catch(B){He(c,c.return,B)}}var pl=!1,cs=!1,Ot=!1,qe=typeof WeakSet=="function"?WeakSet:Set,pn=null;function wn(c,d){if(c=c.containerInfo,oi=Zi,c=nd(c),id(c)){if("selectionStart"in c)var b={start:c.selectionStart,end:c.selectionEnd};else e:{b=(b=c.ownerDocument)&&b.defaultView||window;var A=b.getSelection&&b.getSelection();if(A&&A.rangeCount!==0){b=A.anchorNode;var N=A.anchorOffset,B=A.focusNode;A=A.focusOffset;try{b.nodeType,B.nodeType}catch{b=null;break e}var ie=0,de=-1,Oe=-1,nt=0,wt=0,Dt=c,it=null;t:for(;;){for(var mt;Dt!==b||N!==0&&Dt.nodeType!==3||(de=ie+N),Dt!==B||A!==0&&Dt.nodeType!==3||(Oe=ie+A),Dt.nodeType===3&&(ie+=Dt.nodeValue.length),(mt=Dt.firstChild)!==null;)it=Dt,Dt=mt;for(;;){if(Dt===c)break t;if(it===b&&++nt===N&&(de=ie),it===B&&++wt===A&&(Oe=ie),(mt=Dt.nextSibling)!==null)break;Dt=it,it=Dt.parentNode}Dt=mt}b=de===-1||Oe===-1?null:{start:de,end:Oe}}else b=null}b=b||{start:0,end:0}}else b=null;for(N_={focusedElem:c,selectionRange:b},Zi=!1,pn=d;pn!==null;)if(d=pn,c=d.child,(d.subtreeFlags&1024)!==0&&c!==null)c.return=d,pn=c;else for(;pn!==null;){switch(d=pn,B=d.alternate,c=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&B!==null){c=void 0,b=d,N=B.memoizedProps,B=B.memoizedState,A=b.stateNode;try{var Ce=jl(b.type,N,b.elementType===b.type);c=A.getSnapshotBeforeUpdate(Ce,B),A.__reactInternalSnapshotBeforeUpdate=c}catch(Sn){He(b,b.return,Sn)}}break;case 3:if((c&1024)!==0){if(c=d.stateNode.containerInfo,b=c.nodeType,b===9)sg(c);else if(b===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":sg(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=d.sibling,c!==null){c.return=d.return,pn=c;break}pn=d.return}}function Pu(c,d,b){var A=b.flags;switch(b.tag){case 0:case 11:case 15:Er(c,b),A&4&&fh(5,b);break;case 1:if(Er(c,b),A&4)if(c=b.stateNode,d===null)try{c.componentDidMount()}catch(ie){He(b,b.return,ie)}else{var N=jl(b.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(N,d,c.__reactInternalSnapshotBeforeUpdate)}catch(ie){He(b,b.return,ie)}}A&64&&Kl(b),A&512&&Os(b,b.return);break;case 3:if(Er(c,b),A&64&&(c=b.updateQueue,c!==null)){if(d=null,b.child!==null)switch(b.child.tag){case 27:case 5:d=b.child.stateNode;break;case 1:d=b.child.stateNode}try{xm(c,d)}catch(ie){He(b,b.return,ie)}}break;case 27:d===null&&A&4&&ku(b);case 26:case 5:Er(c,b),d===null&&A&4&&Yo(b),A&512&&Os(b,b.return);break;case 12:Er(c,b);break;case 13:Er(c,b),A&4&&rs(c,b),A&64&&(c=b.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(b=os.bind(null,b),s1(c,b))));break;case 22:if(A=b.memoizedState!==null||pl,!A){d=d!==null&&d.memoizedState!==null||cs,N=pl;var B=cs;pl=A,(cs=d)&&!B?ql(c,b,(b.subtreeFlags&8772)!==0):Er(c,b),pl=N,cs=B}break;case 30:break;default:Er(c,b)}}function Yn(c){var d=c.alternate;d!==null&&(c.alternate=null,Yn(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Ri(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var kn=null,Ai=!1;function ml(c,d,b){for(b=b.child;b!==null;)Ba(c,d,b),b=b.sibling}function Ba(c,d,b){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Le,b)}catch{}switch(b.tag){case 26:cs||jo(b,d),ml(c,d,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:cs||jo(b,d);var A=kn,N=Ai;Id(b.type)&&(kn=b.stateNode,Ai=!1),ml(c,d,b),$0(b.stateNode),kn=A,Ai=N;break;case 5:cs||jo(b,d);case 6:if(A=kn,N=Ai,kn=null,ml(c,d,b),kn=A,Ai=N,kn!==null)if(Ai)try{(kn.nodeType===9?kn.body:kn.nodeName==="HTML"?kn.ownerDocument.body:kn).removeChild(b.stateNode)}catch(B){He(b,d,B)}else try{kn.removeChild(b.stateNode)}catch(B){He(b,d,B)}break;case 18:kn!==null&&(Ai?(c=kn,ig(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,b.stateNode),hg(c)):ig(kn,b.stateNode));break;case 4:A=kn,N=Ai,kn=b.stateNode.containerInfo,Ai=!0,ml(c,d,b),kn=A,Ai=N;break;case 0:case 11:case 14:case 15:cs||ha(2,b,d),cs||ha(4,b,d),ml(c,d,b);break;case 1:cs||(jo(b,d),A=b.stateNode,typeof A.componentWillUnmount=="function"&&Bu(b,d,A)),ml(c,d,b);break;case 21:ml(c,d,b);break;case 22:cs=(A=cs)||b.memoizedState!==null,ml(c,d,b),cs=A;break;default:ml(c,d,b)}}function rs(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{hg(c)}catch(b){He(d,d.return,b)}}function Cd(c){switch(c.tag){case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new qe),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new qe),d;default:throw Error(i(435,c.tag))}}function Cc(c,d){var b=Cd(c);d.forEach(function(A){var N=Bn.bind(null,c,A);b.has(A)||(b.add(A),A.then(N,N))})}function pr(c,d){var b=d.deletions;if(b!==null)for(var A=0;A<b.length;A++){var N=b[A],B=c,ie=d,de=ie;e:for(;de!==null;){switch(de.tag){case 27:if(Id(de.type)){kn=de.stateNode,Ai=!1;break e}break;case 5:kn=de.stateNode,Ai=!1;break e;case 3:case 4:kn=de.stateNode.containerInfo,Ai=!0;break e}de=de.return}if(kn===null)throw Error(i(160));Ba(B,ie,N),kn=null,Ai=!1,B=N.alternate,B!==null&&(B.return=null),N.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)ph(d,c),d=d.sibling}var Ko=null;function ph(c,d){var b=c.alternate,A=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:pr(d,c),Gs(c),A&4&&(ha(3,c,c.return),fh(3,c),ha(5,c,c.return));break;case 1:pr(d,c),Gs(c),A&512&&(cs||b===null||jo(b,b.return)),A&64&&pl&&(c=c.updateQueue,c!==null&&(A=c.callbacks,A!==null&&(b=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=b===null?A:b.concat(A))));break;case 26:var N=Ko;if(pr(d,c),Gs(c),A&512&&(cs||b===null||jo(b,b.return)),A&4){var B=b!==null?b.memoizedState:null;if(A=c.memoizedState,b===null)if(A===null)if(c.stateNode===null){e:{A=c.type,b=c.memoizedProps,N=N.ownerDocument||N;t:switch(A){case"title":B=N.getElementsByTagName("title")[0],(!B||B[Ks]||B[Nn]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=N.createElement(A),N.head.insertBefore(B,N.querySelector("head > title"))),Yr(B,A,b),B[Nn]=c,ht(B),A=B;break e;case"link":var ie=Xf("link","href",N).get(A+(b.href||""));if(ie){for(var de=0;de<ie.length;de++)if(B=ie[de],B.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&B.getAttribute("rel")===(b.rel==null?null:b.rel)&&B.getAttribute("title")===(b.title==null?null:b.title)&&B.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){ie.splice(de,1);break t}}B=N.createElement(A),Yr(B,A,b),N.head.appendChild(B);break;case"meta":if(ie=Xf("meta","content",N).get(A+(b.content||""))){for(de=0;de<ie.length;de++)if(B=ie[de],B.getAttribute("content")===(b.content==null?null:""+b.content)&&B.getAttribute("name")===(b.name==null?null:b.name)&&B.getAttribute("property")===(b.property==null?null:b.property)&&B.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&B.getAttribute("charset")===(b.charSet==null?null:b.charSet)){ie.splice(de,1);break t}}B=N.createElement(A),Yr(B,A,b),N.head.appendChild(B);break;default:throw Error(i(468,A))}B[Nn]=c,ht(B),A=B}c.stateNode=A}else xb(N,c.type,c.stateNode);else c.stateNode=Ci(N,A,c.memoizedProps);else B!==A?(B===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):B.count--,A===null?xb(N,c.type,c.stateNode):Ci(N,A,c.memoizedProps)):A===null&&c.stateNode!==null&&$d(c,c.memoizedProps,b.memoizedProps)}break;case 27:pr(d,c),Gs(c),A&512&&(cs||b===null||jo(b,b.return)),b!==null&&A&4&&$d(c,c.memoizedProps,b.memoizedProps);break;case 5:if(pr(d,c),Gs(c),A&512&&(cs||b===null||jo(b,b.return)),c.flags&32){N=c.stateNode;try{so(N,"")}catch(mt){He(c,c.return,mt)}}A&4&&c.stateNode!=null&&(N=c.memoizedProps,$d(c,N,b!==null?b.memoizedProps:N)),A&1024&&(Ot=!0);break;case 6:if(pr(d,c),Gs(c),A&4){if(c.stateNode===null)throw Error(i(162));A=c.memoizedProps,b=c.stateNode;try{b.nodeValue=A}catch(mt){He(c,c.return,mt)}}break;case 3:if(G_=null,N=Ko,Ko=x0(d.containerInfo),pr(d,c),Ko=N,Gs(c),A&4&&b!==null&&b.memoizedState.isDehydrated)try{hg(d.containerInfo)}catch(mt){He(c,c.return,mt)}Ot&&(Ot=!1,mh(c));break;case 4:A=Ko,Ko=x0(c.stateNode.containerInfo),pr(d,c),Gs(c),Ko=A;break;case 12:pr(d,c),Gs(c);break;case 13:pr(d,c),Gs(c),c.child.flags&8192&&c.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Di=we()),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,Cc(c,A)));break;case 22:N=c.memoizedState!==null;var Oe=b!==null&&b.memoizedState!==null,nt=pl,wt=cs;if(pl=nt||N,cs=wt||Oe,pr(d,c),cs=wt,pl=nt,Gs(c),A&8192)e:for(d=c.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(b===null||Oe||pl||cs||qo(c)),b=null,d=c;;){if(d.tag===5||d.tag===26){if(b===null){Oe=b=d;try{if(B=Oe.stateNode,N)ie=B.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{de=Oe.stateNode;var Dt=Oe.memoizedProps.style,it=Dt!=null&&Dt.hasOwnProperty("display")?Dt.display:null;de.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(mt){He(Oe,Oe.return,mt)}}}else if(d.tag===6){if(b===null){Oe=d;try{Oe.stateNode.nodeValue=N?"":Oe.memoizedProps}catch(mt){He(Oe,Oe.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;b===d&&(b=null),d=d.return}b===d&&(b=null),d.sibling.return=d.return,d=d.sibling}A&4&&(A=c.updateQueue,A!==null&&(b=A.retryQueue,b!==null&&(A.retryQueue=null,Cc(c,b))));break;case 19:pr(d,c),Gs(c),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,Cc(c,A)));break;case 30:break;case 21:break;default:pr(d,c),Gs(c)}}function Gs(c){var d=c.flags;if(d&2){try{for(var b,A=c.return;A!==null;){if(xd(A)){b=A;break}A=A.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var N=b.stateNode,B=xc(c);Hi(c,B,N);break;case 5:var ie=b.stateNode;b.flags&32&&(so(ie,""),b.flags&=-33);var de=xc(c);Hi(c,de,ie);break;case 3:case 4:var Oe=b.stateNode.containerInfo,nt=xc(c);To(c,nt,Oe);break;default:throw Error(i(161))}}catch(wt){He(c,c.return,wt)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function mh(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;mh(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),c=c.sibling}}function Er(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Pu(c,d.alternate,d),d=d.sibling}function qo(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:ha(4,d,d.return),qo(d);break;case 1:jo(d,d.return);var b=d.stateNode;typeof b.componentWillUnmount=="function"&&Bu(d,d.return,b),qo(d);break;case 27:$0(d.stateNode);case 26:case 5:jo(d,d.return),qo(d);break;case 22:d.memoizedState===null&&qo(d);break;case 30:qo(d);break;default:qo(d)}c=c.sibling}}function ql(c,d,b){for(b=b&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var A=d.alternate,N=c,B=d,ie=B.flags;switch(B.tag){case 0:case 11:case 15:ql(N,B,b),fh(4,B);break;case 1:if(ql(N,B,b),A=B,N=A.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(nt){He(A,A.return,nt)}if(A=B,N=A.updateQueue,N!==null){var de=A.stateNode;try{var Oe=N.shared.hiddenCallbacks;if(Oe!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Oe.length;N++)Gl(Oe[N],de)}catch(nt){He(A,A.return,nt)}}b&&ie&64&&Kl(B),Os(B,B.return);break;case 27:ku(B);case 26:case 5:ql(N,B,b),b&&A===null&&ie&4&&Yo(B),Os(B,B.return);break;case 12:ql(N,B,b);break;case 13:ql(N,B,b),b&&ie&4&&rs(N,B);break;case 22:B.memoizedState===null&&ql(N,B,b),Os(B,B.return);break;case 30:break;default:ql(N,B,b)}d=d.sibling}}function Kn(c,d){var b=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==b&&(c!=null&&c.refCount++,b!=null&&hd(b))}function v0(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&hd(c))}function $i(c,d,b,A){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)gl(c,d,b,A),d=d.sibling}function gl(c,d,b,A){var N=d.flags;switch(d.tag){case 0:case 11:case 15:$i(c,d,b,A),N&2048&&fh(9,d);break;case 1:$i(c,d,b,A);break;case 3:$i(c,d,b,A),N&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&hd(c)));break;case 12:if(N&2048){$i(c,d,b,A),c=d.stateNode;try{var B=d.memoizedProps,ie=B.id,de=B.onPostCommit;typeof de=="function"&&de(ie,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Oe){He(d,d.return,Oe)}}else $i(c,d,b,A);break;case 13:$i(c,d,b,A);break;case 23:break;case 22:B=d.stateNode,ie=d.alternate,d.memoizedState!==null?B._visibility&2?$i(c,d,b,A):Xr(c,d):B._visibility&2?$i(c,d,b,A):(B._visibility|=2,da(c,d,b,A,(d.subtreeFlags&10256)!==0)),N&2048&&Kn(ie,d);break;case 24:$i(c,d,b,A),N&2048&&v0(d.alternate,d);break;default:$i(c,d,b,A)}}function da(c,d,b,A,N){for(N=N&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var B=c,ie=d,de=b,Oe=A,nt=ie.flags;switch(ie.tag){case 0:case 11:case 15:da(B,ie,de,Oe,N),fh(8,ie);break;case 23:break;case 22:var wt=ie.stateNode;ie.memoizedState!==null?wt._visibility&2?da(B,ie,de,Oe,N):Xr(B,ie):(wt._visibility|=2,da(B,ie,de,Oe,N)),N&&nt&2048&&Kn(ie.alternate,ie);break;case 24:da(B,ie,de,Oe,N),N&&nt&2048&&v0(ie.alternate,ie);break;default:da(B,ie,de,Oe,N)}d=d.sibling}}function Xr(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var b=c,A=d,N=A.flags;switch(A.tag){case 22:Xr(b,A),N&2048&&Kn(A.alternate,A);break;case 24:Xr(b,A),N&2048&&v0(A.alternate,A);break;default:Xr(b,A)}d=d.sibling}}var Pr=8192;function Sr(c){if(c.subtreeFlags&Pr)for(c=c.child;c!==null;)$_(c),c=c.sibling}function $_(c){switch(c.tag){case 26:Sr(c),c.flags&Pr&&c.memoizedState!==null&&yh(Ko,c.memoizedState,c.memoizedProps);break;case 5:Sr(c);break;case 3:case 4:var d=Ko;Ko=x0(c.stateNode.containerInfo),Sr(c),Ko=d;break;case 22:c.memoizedState===null&&(d=c.alternate,d!==null&&d.memoizedState!==null?(d=Pr,Pr=16777216,Sr(c),Pr=d):Sr(c));break;default:Sr(c)}}function x_(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function ms(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var A=d[b];pn=A,Uu(A,c)}x_(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Zm(c),c=c.sibling}function Zm(c){switch(c.tag){case 0:case 11:case 15:ms(c),c.flags&2048&&ha(9,c,c.return);break;case 3:ms(c);break;case 12:ms(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&2&&(c.return===null||c.return.tag!==13)?(d._visibility&=-3,Jl(c)):ms(c);break;default:ms(c)}}function Jl(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var b=0;b<d.length;b++){var A=d[b];pn=A,Uu(A,c)}x_(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:ha(8,d,d.return),Jl(d);break;case 22:b=d.stateNode,b._visibility&2&&(b._visibility&=-3,Jl(d));break;default:Jl(d)}c=c.sibling}}function Uu(c,d){for(;pn!==null;){var b=pn;switch(b.tag){case 0:case 11:case 15:ha(8,b,d);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var A=b.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:hd(b.memoizedState.cache)}if(A=b.child,A!==null)A.return=b,pn=A;else e:for(b=c;pn!==null;){A=pn;var N=A.sibling,B=A.return;if(Yn(A),A===b){pn=null;break e}if(N!==null){N.return=B,pn=N;break e}pn=B}}}var Ps={getCacheForType:function(c){var d=Bs(Js),b=d.data.get(c);return b===void 0&&(b=c(),d.data.set(c,b)),b}},Qm=typeof WeakMap=="function"?WeakMap:Map,Oi=0,qn=null,ii=null,On=0,si=0,zs=null,Ns=!1,gs=!1,Fu=!1,Jo=0,_s=0,_l=0,fa=0,Hu=0,Vs=0,Ni=0,Li=null,Pn=null,di=!1,Di=0,jr=1/0,ka=null,Eo=null,mr=0,lo=null,ji=null,pa=0,Gu=0,Zl=null,ma=null,Ql=0,gh=null;function Ws(){if((Oi&2)!==0&&On!==0)return On&-On;if(z.T!==null){var c=Jn;return c!==0?c:R_()}return xn()}function b0(){Vs===0&&(Vs=(On&536870912)===0||wi?Me():536870912);var c=ri.current;return c!==null&&(c.flags|=32),Vs}function So(c,d,b){(c===qn&&(si===2||si===9)||c.cancelPendingCommit!==null)&&(zu(c,0),vl(c,On,Vs,!1)),Pt(c,b),((Oi&2)===0||c!==qn)&&(c===qn&&((Oi&2)===0&&(fa|=b),_s===4&&vl(c,On,Vs,!1)),Ua(c))}function Md(c,d,b){if((Oi&6)!==0)throw Error(i(327));var A=!b&&(d&124)===0&&(d&c.expiredLanes)===0||ye(c,d),N=A?L(c,d):_(c,d,!0),B=A;do{if(N===0){gs&&!A&&vl(c,d,0,!1);break}else{if(b=c.current.alternate,B&&!Ao(b)){N=_(c,d,!1),B=!1;continue}if(N===2){if(B=d,c.errorRecoveryDisabledLanes&B)var ie=0;else ie=c.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){d=ie;e:{var de=c;N=Li;var Oe=de.current.memoizedState.isDehydrated;if(Oe&&(zu(de,ie).flags|=256),ie=_(de,ie,!1),ie!==2){if(Fu&&!Oe){de.errorRecoveryDisabledLanes|=B,fa|=B,N=4;break e}B=Pn,Pn=N,B!==null&&(Pn===null?Pn=B:Pn.push.apply(Pn,B))}N=ie}if(B=!1,N!==2)continue}}if(N===1){zu(c,0),vl(c,d,0,!0);break}e:{switch(A=c,B=N,B){case 0:case 1:throw Error(i(345));case 4:if((d&4194048)!==d)break;case 6:vl(A,d,Vs,!Ns);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((d&62914560)===d&&(N=Di+300-we(),10<N)){if(vl(A,d,Vs,!Ns),re(A,0,!0)!==0)break e;A.timeoutHandle=NT(zf.bind(null,A,b,Pn,ka,di,d,Vs,fa,Ni,Ns,B,2,-0,0),N);break e}zf(A,b,Pn,ka,di,d,Vs,fa,Ni,Ns,B,0,-0,0)}}break}while(!0);Ua(c)}function zf(c,d,b,A,N,B,ie,de,Oe,nt,wt,Dt,it,mt){if(c.timeoutHandle=-1,Dt=d.subtreeFlags,(Dt&8192||(Dt&16785408)===16785408)&&($r={stylesheets:null,count:0,unsuspend:og},$_(d),Dt=Ld(),Dt!==null)){c.cancelPendingCommit=Dt(zt.bind(null,c,d,B,b,A,N,ie,de,Oe,wt,1,it,mt)),vl(c,B,ie,!nt);return}zt(c,d,B,b,A,N,ie,de,Oe)}function Ao(c){for(var d=c;;){var b=d.tag;if((b===0||b===11||b===15)&&d.flags&16384&&(b=d.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var A=0;A<b.length;A++){var N=b[A],B=N.getSnapshot;N=N.value;try{if(!Do(B(),N))return!1}catch{return!1}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function vl(c,d,b,A){d&=~Hu,d&=~fa,c.suspendedLanes|=d,c.pingedLanes&=~d,A&&(c.warmLanes|=d),A=c.expirationTimes;for(var N=d;0<N;){var B=31-yt(N),ie=1<<B;A[B]=-1,N&=~ie}b!==0&&xt(c,b,d)}function eu(){return(Oi&6)===0?(Vf(0),!1):!0}function Mc(){if(ii!==null){if(si===0)var c=ii.return;else c=ii,wu=mc=null,wf(c),Tc=null,Hf=0,c=ii;for(;c!==null;)Du(c.alternate,c),c=c.return;ii=null}}function zu(c,d){var b=c.timeoutHandle;b!==-1&&(c.timeoutHandle=-1,pA(b)),b=c.cancelPendingCommit,b!==null&&(c.cancelPendingCommit=null,b()),Mc(),qn=c,ii=b=qs(c.current,null),On=d,si=0,zs=null,Ns=!1,gs=ye(c,d),Fu=!1,Ni=Vs=Hu=fa=_l=_s=0,Pn=Li=null,di=!1,(d&8)!==0&&(d|=d&32);var A=c.entangledLanes;if(A!==0)for(c=c.entanglements,A&=d;0<A;){var N=31-yt(A),B=1<<N;d|=c[N],A&=~B}return Jo=d,Cu(),b}function y0(c,d){jn=null,z.H=yd,d===Zs||d===yr?(d=Sm(),si=3):d===ws?(d=Sm(),si=4):si=d===qm?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,zs=d,ii===null&&(_s=1,m0(c,Or(d,c.current)))}function vs(){var c=z.H;return z.H=yd,c===null?yd:c}function Rc(){var c=z.A;return z.A=Ps,c}function m(){_s=4,Ns||(On&4194048)!==On&&ri.current!==null||(gs=!0),(_l&134217727)===0&&(fa&134217727)===0||qn===null||vl(qn,On,Vs,!1)}function _(c,d,b){var A=Oi;Oi|=2;var N=vs(),B=Rc();(qn!==c||On!==d)&&(ka=null,zu(c,d)),d=!1;var ie=_s;e:do try{if(si!==0&&ii!==null){var de=ii,Oe=zs;switch(si){case 8:Mc(),ie=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(d=!0);var nt=si;if(si=0,zs=null,Be(c,de,Oe,nt),b&&gs){ie=0;break e}break;default:nt=si,si=0,zs=null,Be(c,de,Oe,nt)}}x(),ie=_s;break}catch(wt){y0(c,wt)}while(!0);return d&&c.shellSuspendCounter++,wu=mc=null,Oi=A,z.H=N,z.A=B,ii===null&&(qn=null,On=0,Cu()),ie}function x(){for(;ii!==null;)W(ii)}function L(c,d){var b=Oi;Oi|=2;var A=vs(),N=Rc();qn!==c||On!==d?(ka=null,jr=we()+500,zu(c,d)):gs=ye(c,d);e:do try{if(si!==0&&ii!==null){d=ii;var B=zs;t:switch(si){case 1:si=0,zs=null,Be(c,d,B,1);break;case 2:case 9:if(hn(B)){si=0,zs=null,me(d);break}d=function(){si!==2&&si!==9||qn!==c||(si=7),Ua(c)},B.then(d,d);break e;case 3:si=7;break e;case 4:si=5;break e;case 7:hn(B)?(si=0,zs=null,me(d)):(si=0,zs=null,Be(c,d,B,7));break;case 5:var ie=null;switch(ii.tag){case 26:ie=ii.memoizedState;case 5:case 27:var de=ii;if(!ie||BT(ie)){si=0,zs=null;var Oe=de.sibling;if(Oe!==null)ii=Oe;else{var nt=de.return;nt!==null?(ii=nt,je(nt)):ii=null}break t}}si=0,zs=null,Be(c,d,B,5);break;case 6:si=0,zs=null,Be(c,d,B,6);break;case 8:Mc(),_s=6;break e;default:throw Error(i(462))}}U();break}catch(wt){y0(c,wt)}while(!0);return wu=mc=null,z.H=A,z.A=N,Oi=b,ii!==null?0:(qn=null,On=0,Cu(),_s)}function U(){for(;ii!==null&&!Se();)W(ii)}function W(c){var d=$c(c.alternate,c,Jo);c.memoizedProps=c.pendingProps,d===null?je(c):ii=d}function me(c){var d=c,b=d.alternate;switch(d.tag){case 15:case 0:d=ua(b,d,d.pendingProps,d.type,void 0,On);break;case 11:d=ua(b,d,d.pendingProps,d.type.render,d.ref,On);break;case 5:wf(d);default:Du(b,d),d=ii=bm(d,Jo),d=$c(b,d,Jo)}c.memoizedProps=c.pendingProps,d===null?je(c):ii=d}function Be(c,d,b,A){wu=mc=null,wf(d),Tc=null,Hf=0;var N=d.return;try{if(fb(c,N,d,b,On)){_s=1,m0(c,Or(b,c.current)),ii=null;return}}catch(B){if(N!==null)throw ii=N,B;_s=1,m0(c,Or(b,c.current)),ii=null;return}d.flags&32768?(wi||A===1?c=!0:gs||(On&536870912)!==0?c=!1:(Ns=c=!0,(A===2||A===9||A===3||A===6)&&(A=ri.current,A!==null&&A.tag===13&&(A.flags|=16384))),Ct(d,c)):je(d)}function je(c){var d=c;do{if((d.flags&32768)!==0){Ct(d,Ns);return}c=d.return;var b=Jm(d.alternate,d,Jo);if(b!==null){ii=b;return}if(d=d.sibling,d!==null){ii=d;return}ii=d=c}while(d!==null);_s===0&&(_s=5)}function Ct(c,d){do{var b=Ii(c.alternate,c);if(b!==null){b.flags&=32767,ii=b;return}if(b=c.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!d&&(c=c.sibling,c!==null)){ii=c;return}ii=c=b}while(c!==null);_s=6,ii=null}function zt(c,d,b,A,N,B,ie,de,Oe){c.cancelPendingCommit=null;do Vu();while(mr!==0);if((Oi&6)!==0)throw Error(i(327));if(d!==null){if(d===c.current)throw Error(i(177));if(B=d.lanes|d.childLanes,B|=dc,Mt(c,b,B,ie,de,Oe),c===qn&&(ii=qn=null,On=0),ji=d,lo=c,pa=b,Gu=B,Zl=N,ma=A,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,xi(vt,function(){return tu(),null})):(c.callbackNode=null,c.callbackPriority=0),A=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||A){A=z.T,z.T=null,N=te.p,te.p=2,ie=Oi,Oi|=4;try{wn(c,d,b)}finally{Oi=ie,te.p=N,z.T=A}}mr=1,en(),nn(),Zn()}}function en(){if(mr===1){mr=0;var c=lo,d=ji,b=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||b){b=z.T,z.T=null;var A=te.p;te.p=2;var N=Oi;Oi|=4;try{ph(d,c);var B=N_,ie=nd(c.containerInfo),de=B.focusedElem,Oe=B.selectionRange;if(ie!==de&&de&&de.ownerDocument&&Gp(de.ownerDocument.documentElement,de)){if(Oe!==null&&id(de)){var nt=Oe.start,wt=Oe.end;if(wt===void 0&&(wt=nt),"selectionStart"in de)de.selectionStart=nt,de.selectionEnd=Math.min(wt,de.value.length);else{var Dt=de.ownerDocument||document,it=Dt&&Dt.defaultView||window;if(it.getSelection){var mt=it.getSelection(),Ce=de.textContent.length,Sn=Math.min(Oe.start,Ce),Qi=Oe.end===void 0?Sn:Math.min(Oe.end,Ce);!mt.extend&&Sn>Qi&&(ie=Qi,Qi=Sn,Sn=ie);var Je=Hp(de,Sn),Ge=Hp(de,Qi);if(Je&&Ge&&(mt.rangeCount!==1||mt.anchorNode!==Je.node||mt.anchorOffset!==Je.offset||mt.focusNode!==Ge.node||mt.focusOffset!==Ge.offset)){var st=Dt.createRange();st.setStart(Je.node,Je.offset),mt.removeAllRanges(),Sn>Qi?(mt.addRange(st),mt.extend(Ge.node,Ge.offset)):(st.setEnd(Ge.node,Ge.offset),mt.addRange(st))}}}}for(Dt=[],mt=de;mt=mt.parentNode;)mt.nodeType===1&&Dt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<Dt.length;de++){var Lt=Dt[de];Lt.element.scrollLeft=Lt.left,Lt.element.scrollTop=Lt.top}}Zi=!!oi,N_=oi=null}finally{Oi=N,te.p=A,z.T=b}}c.current=d,mr=2}}function nn(){if(mr===2){mr=0;var c=lo,d=ji,b=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||b){b=z.T,z.T=null;var A=te.p;te.p=2;var N=Oi;Oi|=4;try{Pu(c,d.alternate,d)}finally{Oi=N,te.p=A,z.T=b}}mr=3}}function Zn(){if(mr===4||mr===3){mr=0,Ae();var c=lo,d=ji,b=pa,A=ma;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?mr=5:(mr=0,ji=lo=null,ga(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(Eo=null),Wt(b),d=d.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Le,d,void 0,(d.current.flags&128)===128)}catch{}if(A!==null){d=z.T,N=te.p,te.p=2,z.T=null;try{for(var B=c.onRecoverableError,ie=0;ie<A.length;ie++){var de=A[ie];B(de.value,{componentStack:de.stack})}}finally{z.T=d,te.p=N}}(pa&3)!==0&&Vu(),Ua(c),N=c.pendingLanes,(b&4194090)!==0&&(N&42)!==0?c===gh?Ql++:(Ql=0,gh=c):Ql=0,Vf(0)}}function ga(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,hd(d)))}function Vu(c){return en(),nn(),Zn(),tu()}function tu(){if(mr!==5)return!1;var c=lo,d=Gu;Gu=0;var b=Wt(pa),A=z.T,N=te.p;try{te.p=32>b?32:b,z.T=null,b=Zl,Zl=null;var B=lo,ie=pa;if(mr=0,ji=lo=null,pa=0,(Oi&6)!==0)throw Error(i(331));var de=Oi;if(Oi|=4,Zm(B.current),gl(B,B.current,ie,b),Oi=de,Vf(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Le,B)}catch{}return!0}finally{te.p=N,z.T=A,ga(c,d)}}function ct(c,d,b){d=Or(b,d),d=g0(c.stateNode,d,2),c=Fl(c,d,2),c!==null&&(Pt(c,2),Ua(c))}function He(c,d,b){if(c.tag===3)ct(c,c,b);else for(;d!==null;){if(d.tag===3){ct(d,c,b);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Eo===null||!Eo.has(A))){c=Or(b,c),b=db(2),A=Fl(d,b,2),A!==null&&(_0(b,A,d,c),Pt(A,2),Ua(A));break}}d=d.return}}function pt(c,d,b){var A=c.pingCache;if(A===null){A=c.pingCache=new Qm;var N=new Set;A.set(d,N)}else N=A.get(d),N===void 0&&(N=new Set,A.set(d,N));N.has(b)||(Fu=!0,N.add(b),c=Vt.bind(null,c,d,b),d.then(c,c))}function Vt(c,d,b){var A=c.pingCache;A!==null&&A.delete(d),c.pingedLanes|=c.suspendedLanes&b,c.warmLanes&=~b,qn===c&&(On&b)===b&&(_s===4||_s===3&&(On&62914560)===On&&300>we()-Di?(Oi&2)===0&&zu(c,0):Hu|=b,Ni===On&&(Ni=0)),Ua(c)}function Qt(c,d){d===0&&(d=Ze()),c=sl(c,d),c!==null&&(Pt(c,d),Ua(c))}function os(c){var d=c.memoizedState,b=0;d!==null&&(b=d.retryLane),Qt(c,b)}function Bn(c,d){var b=0;switch(c.tag){case 13:var A=c.stateNode,N=c.memoizedState;N!==null&&(b=N.retryLane);break;case 19:A=c.stateNode;break;case 22:A=c.stateNode._retryCache;break;default:throw Error(i(314))}A!==null&&A.delete(d),Qt(c,b)}function xi(c,d){return Ye(c,d)}var hs=null,fi=null,Pa=!1,Rd=!1,C_=!1,Ar=0;function Ua(c){c!==fi&&c.next===null&&(fi===null?hs=fi=c:fi=fi.next=c),Rd=!0,Pa||(Pa=!0,IT())}function Vf(c,d){if(!C_&&Rd){C_=!0;do for(var b=!1,A=hs;A!==null;){if(c!==0){var N=A.pendingLanes;if(N===0)var B=0;else{var ie=A.suspendedLanes,de=A.pingedLanes;B=(1<<31-yt(42|c)+1)-1,B&=N&~(ie&~de),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(b=!0,Wf(A,B))}else B=On,B=re(A,A===qn?B:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(B&3)===0||ye(A,B)||(b=!0,Wf(A,B));A=A.next}while(b);C_=!1}}function M_(){T0()}function T0(){Rd=Pa=!1;var c=0;Ar!==0&&(Eb()&&(c=Ar),Ar=0);for(var d=we(),b=null,A=hs;A!==null;){var N=A.next,B=RT(A,d);B===0?(A.next=null,b===null?hs=N:b.next=N,N===null&&(fi=b)):(b=A,(c!==0||(B&3)!==0)&&(Rd=!0)),A=N}Vf(c)}function RT(c,d){for(var b=c.suspendedLanes,A=c.pingedLanes,N=c.expirationTimes,B=c.pendingLanes&-62914561;0<B;){var ie=31-yt(B),de=1<<ie,Oe=N[ie];Oe===-1?((de&b)===0||(de&A)!==0)&&(N[ie]=lt(de,d)):Oe<=d&&(c.expiredLanes|=de),B&=~de}if(d=qn,b=On,b=re(c,c===d?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),A=c.callbackNode,b===0||c===d&&(si===2||si===9)||c.cancelPendingCommit!==null)return A!==null&&A!==null&&J(A),c.callbackNode=null,c.callbackPriority=0;if((b&3)===0||ye(c,b)){if(d=b&-b,d===c.callbackPriority)return d;switch(A!==null&&J(A),Wt(b)){case 2:case 8:b=Qe;break;case 32:b=vt;break;case 268435456:b=_e;break;default:b=vt}return A=wT.bind(null,c),b=Ye(b,A),c.callbackPriority=d,c.callbackNode=b,d}return A!==null&&A!==null&&J(A),c.callbackPriority=2,c.callbackNode=null,2}function wT(c,d){if(mr!==0&&mr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var b=c.callbackNode;if(Vu()&&c.callbackNode!==b)return null;var A=On;return A=re(c,c===qn?A:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),A===0?null:(Md(c,A,d),RT(c,we()),c.callbackNode!=null&&c.callbackNode===b?wT.bind(null,c):null)}function Wf(c,d){if(Vu())return null;Md(c,d,!0)}function IT(){mA(function(){(Oi&6)!==0?Ye(dt,M_):T0()})}function R_(){return Ar===0&&(Ar=Me()),Ar}function nu(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Yc(""+c)}function eg(c,d){var b=d.ownerDocument.createElement("input");return b.name=d.name,b.value=d.value,c.id&&b.setAttribute("form",c.id),d.parentNode.insertBefore(b,d),c=new FormData(c),b.parentNode.removeChild(b),c}function OT(c,d,b,A,N){if(d==="submit"&&b&&b.stateNode===N){var B=nu((N[gn]||null).action),ie=A.submitter;ie&&(d=(d=ie[gn]||null)?nu(d.formAction):ie.getAttribute("formAction"),d!==null&&(B=d,ie=null));var de=new Jc("action","action",null,A,N);c.push({event:de,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(Ar!==0){var Oe=ie?eg(N,ie):new FormData(N);u0(b,{pending:!0,data:Oe,method:N.method,action:B},null,Oe)}}else typeof B=="function"&&(de.preventDefault(),Oe=ie?eg(N,ie):new FormData(N),u0(b,{pending:!0,data:Oe,method:N.method,action:B},B,Oe))},currentTarget:N}]})}}for(var w_=0;w_<Bl.length;w_++){var pb=Bl[w_],dA=pb.toLowerCase(),mb=pb[0].toUpperCase()+pb.slice(1);br(dA,"on"+mb)}br(ro,"onAnimationEnd"),br(vm,"onAnimationIteration"),br(go,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(c_,"onTransitionRun"),br(Bo,"onTransitionStart"),br(xu,"onTransitionCancel"),br(il,"onTransitionEnd"),le("onMouseEnter",["mouseout","mouseover"]),le("onMouseLeave",["mouseout","mouseover"]),le("onPointerEnter",["pointerout","pointerover"]),le("onPointerLeave",["pointerout","pointerover"]),kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sr));function gb(c,d){d=(d&4)!==0;for(var b=0;b<c.length;b++){var A=c[b],N=A.event;A=A.listeners;e:{var B=void 0;if(d)for(var ie=A.length-1;0<=ie;ie--){var de=A[ie],Oe=de.instance,nt=de.currentTarget;if(de=de.listener,Oe!==B&&N.isPropagationStopped())break e;B=de,N.currentTarget=nt;try{B(N)}catch(wt){uh(wt)}N.currentTarget=null,B=Oe}else for(ie=0;ie<A.length;ie++){if(de=A[ie],Oe=de.instance,nt=de.currentTarget,de=de.listener,Oe!==B&&N.isPropagationStopped())break e;B=de,N.currentTarget=nt;try{B(N)}catch(wt){uh(wt)}N.currentTarget=null,B=Oe}}}}function gi(c,d){var b=d[is];b===void 0&&(b=d[is]=new Set);var A=c+"__bubble";b.has(A)||(Ji(d,c,2,!1),b.add(A))}function _b(c,d,b){var A=0;d&&(A|=4),Ji(b,c,A,d)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function E0(c){if(!c[Fa]){c[Fa]=!0,_t.forEach(function(b){b!=="selectionchange"&&(iu.has(b)||_b(b,!1,c),_b(b,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[Fa]||(d[Fa]=!0,_b("selectionchange",!1,d))}}function Ji(c,d,b,A){switch(UT(d)){case 2:var N=vA;break;case 8:N=Mb;break;default:N=Yf}b=N.bind(null,d,b,c),N=void 0,!Kc||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(N=!0),A?N!==void 0?c.addEventListener(d,b,{capture:!0,passive:N}):c.addEventListener(d,b,!0):N!==void 0?c.addEventListener(d,b,{passive:N}):c.addEventListener(d,b,!1)}function rr(c,d,b,A,N){var B=A;if((d&1)===0&&(d&2)===0&&A!==null)e:for(;;){if(A===null)return;var ie=A.tag;if(ie===3||ie===4){var de=A.stateNode.containerInfo;if(de===N)break;if(ie===4)for(ie=A.return;ie!==null;){var Oe=ie.tag;if((Oe===3||Oe===4)&&ie.stateNode.containerInfo===N)return;ie=ie.return}for(;de!==null;){if(ie=ae(de),ie===null)return;if(Oe=ie.tag,Oe===5||Oe===6||Oe===26||Oe===27){A=B=ie;continue e}de=de.parentNode}}A=A.return}vr(function(){var nt=B,wt=Np(b),Dt=[];e:{var it=rd.get(c);if(it!==void 0){var mt=Jc,Ce=c;switch(c){case"keypress":if(Nl(b)===0)break e;case"keydown":case"keyup":mt=cm;break;case"focusin":Ce="focus",mt=Dp;break;case"focusout":Ce="blur",mt=Dp;break;case"beforeblur":case"afterblur":mt=Dp;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=dm;break;case ro:case vm:case go:mt=e_;break;case il:mt=bu;break;case"scroll":case"scrollend":mt=Zg;break;case"wheel":mt=pm;break;case"copy":case"cut":case"paste":mt=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Bp;break;case"toggle":case"beforetoggle":mt=$a}var Sn=(d&4)!==0,Qi=!Sn&&(c==="scroll"||c==="scrollend"),Je=Sn?it!==null?it+"Capture":null:it;Sn=[];for(var Ge=nt,st;Ge!==null;){var Lt=Ge;if(st=Lt.stateNode,Lt=Lt.tag,Lt!==5&&Lt!==26&&Lt!==27||st===null||Je===null||(Lt=rc(Ge,Je),Lt!=null&&Sn.push(_h(Ge,Lt,st))),Qi)break;Ge=Ge.return}0<Sn.length&&(it=new mt(it,Ce,null,b,wt),Dt.push({event:it,listeners:Sn}))}}if((d&7)===0){e:{if(it=c==="mouseover"||c==="pointerover",mt=c==="mouseout"||c==="pointerout",it&&b!==Op&&(Ce=b.relatedTarget||b.fromElement)&&(ae(Ce)||Ce[zn]))break e;if((mt||it)&&(it=wt.window===wt?wt:(it=wt.ownerDocument)?it.defaultView||it.parentWindow:window,mt?(Ce=b.relatedTarget||b.toElement,mt=nt,Ce=Ce?ae(Ce):null,Ce!==null&&(Qi=a(Ce),Sn=Ce.tag,Ce!==Qi||Sn!==5&&Sn!==27&&Sn!==6)&&(Ce=null)):(mt=null,Ce=nt),mt!==Ce)){if(Sn=Zc,Lt="onMouseLeave",Je="onMouseEnter",Ge="mouse",(c==="pointerout"||c==="pointerover")&&(Sn=Bp,Lt="onPointerLeave",Je="onPointerEnter",Ge="pointer"),Qi=mt==null?it:Ue(mt),st=Ce==null?it:Ue(Ce),it=new Sn(Lt,Ge+"leave",mt,b,wt),it.target=Qi,it.relatedTarget=st,Lt=null,ae(wt)===nt&&(Sn=new Sn(Je,Ge+"enter",Ce,b,wt),Sn.target=st,Sn.relatedTarget=Qi,Lt=Sn),Qi=Lt,mt&&Ce)t:{for(Sn=mt,Je=Ce,Ge=0,st=Sn;st;st=wd(st))Ge++;for(st=0,Lt=Je;Lt;Lt=wd(Lt))st++;for(;0<Ge-st;)Sn=wd(Sn),Ge--;for(;0<st-Ge;)Je=wd(Je),st--;for(;Ge--;){if(Sn===Je||Je!==null&&Sn===Je.alternate)break t;Sn=wd(Sn),Je=wd(Je)}Sn=null}else Sn=null;mt!==null&&vb(Dt,it,mt,Sn,!1),Ce!==null&&Qi!==null&&vb(Dt,Qi,Ce,Sn,!0)}}e:{if(it=nt?Ue(nt):window,mt=it.nodeName&&it.nodeName.toLowerCase(),mt==="select"||mt==="input"&&it.type==="file")var mn=xa;else if(Up(it))if(pf)mn=cc;else{mn=gm;var _i=mm}else mt=it.nodeName,!mt||mt.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?nt&&Ip(nt.elementType)&&(mn=xa):mn=gf;if(mn&&(mn=mn(c,nt))){Lo(Dt,mn,b,wt);break e}_i&&_i(c,it,nt),c==="focusout"&&nt&&it.type==="number"&&nt.memoizedProps.value!=null&&Ui(it,"number",it.value)}switch(_i=nt?Ue(nt):window,c){case"focusin":(Up(_i)||_i.contentEditable==="true")&&(Au=_i,_f=nt,sd=null);break;case"focusout":sd=_f=Au=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,zp(Dt,b,wt);break;case"selectionchange":if(_m)break;case"keydown":case"keyup":zp(Dt,b,wt)}var In;if(Qh)e:{switch(c){case"compositionstart":var yn="onCompositionStart";break e;case"compositionend":yn="onCompositionEnd";break e;case"compositionupdate":yn="onCompositionUpdate";break e}yn=void 0}else Tu?ed(c,b)&&(yn="onCompositionEnd"):c==="keydown"&&b.keyCode===229&&(yn="onCompositionStart");yn&&(eh&&b.locale!=="ko"&&(Tu||yn!=="onCompositionStart"?yn==="onCompositionEnd"&&Tu&&(In=am()):(gu=wt,Lp="value"in gu?gu.value:gu.textContent,Tu=!0)),_i=I_(nt,yn),0<_i.length&&(yn=new Dl(yn,c,null,b,wt),Dt.push({event:yn,listeners:_i}),In?yn.data=In:(In=kp(b),In!==null&&(yn.data=In)))),(In=Qc?td(c,b):Pp(c,b))&&(yn=I_(nt,"onBeforeInput"),0<yn.length&&(_i=new Dl("onBeforeInput","beforeinput",null,b,wt),Dt.push({event:_i,listeners:yn}),_i.data=In)),OT(Dt,c,nt,b,wt)}gb(Dt,d)})}function _h(c,d,b){return{instance:c,listener:d,currentTarget:b}}function I_(c,d){for(var b=d+"Capture",A=[];c!==null;){var N=c,B=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||B===null||(N=rc(c,b),N!=null&&A.unshift(_h(c,N,B)),N=rc(c,d),N!=null&&A.push(_h(c,N,B))),c.tag===3)return A;c=c.return}return[]}function wd(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function vb(c,d,b,A,N){for(var B=d._reactName,ie=[];b!==null&&b!==A;){var de=b,Oe=de.alternate,nt=de.stateNode;if(de=de.tag,Oe!==null&&Oe===A)break;de!==5&&de!==26&&de!==27||nt===null||(Oe=nt,N?(nt=rc(b,B),nt!=null&&ie.unshift(_h(b,nt,Oe))):N||(nt=rc(b,B),nt!=null&&ie.push(_h(b,nt,Oe)))),b=b.return}ie.length!==0&&c.push({event:d,listeners:ie})}var tg=/\r\n?/g,ng=/\u0000|\uFFFD/g;function bl(c){return(typeof c=="string"?c:""+c).replace(tg,`
`).replace(ng,"")}function O_(c,d){return d=bl(d),bl(c)===d}function yl(){}function as(c,d,b,A,N,B){switch(b){case"children":typeof A=="string"?d==="body"||d==="textarea"&&A===""||so(c,A):(typeof A=="number"||typeof A=="bigint")&&d!=="body"&&so(c,""+A);break;case"className":Tt(c,"class",A);break;case"tabIndex":Tt(c,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":Tt(c,b,A);break;case"style":ic(c,A,B);break;case"data":if(d!=="object"){Tt(c,"data",A);break}case"src":case"href":if(A===""&&(d!=="a"||b!=="href")){c.removeAttribute(b);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){c.removeAttribute(b);break}A=Yc(""+A),c.setAttribute(b,A);break;case"action":case"formAction":if(typeof A=="function"){c.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(b==="formAction"?(d!=="input"&&as(c,d,"name",N.name,N,null),as(c,d,"formEncType",N.formEncType,N,null),as(c,d,"formMethod",N.formMethod,N,null),as(c,d,"formTarget",N.formTarget,N,null)):(as(c,d,"encType",N.encType,N,null),as(c,d,"method",N.method,N,null),as(c,d,"target",N.target,N,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){c.removeAttribute(b);break}A=Yc(""+A),c.setAttribute(b,A);break;case"onClick":A!=null&&(c.onclick=yl);break;case"onScroll":A!=null&&gi("scroll",c);break;case"onScrollEnd":A!=null&&gi("scrollend",c);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(b=A.__html,b!=null){if(N.children!=null)throw Error(i(60));c.innerHTML=b}}break;case"multiple":c.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":c.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){c.removeAttribute("xlink:href");break}b=Yc(""+A),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,""+A):c.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,""):c.removeAttribute(b);break;case"capture":case"download":A===!0?c.setAttribute(b,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,A):c.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?c.setAttribute(b,A):c.removeAttribute(b);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?c.removeAttribute(b):c.setAttribute(b,A);break;case"popover":gi("beforetoggle",c),gi("toggle",c),rt(c,"popover",A);break;case"xlinkActuate":Nt(c,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":Nt(c,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":Nt(c,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":Nt(c,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":Nt(c,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":Nt(c,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":Nt(c,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":Nt(c,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":Nt(c,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":rt(c,"is",A);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=cf.get(b)||b,rt(c,b,A))}}function bb(c,d,b,A,N,B){switch(b){case"style":ic(c,A,B);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(b=A.__html,b!=null){if(N.children!=null)throw Error(i(60));c.innerHTML=b}}break;case"children":typeof A=="string"?so(c,A):(typeof A=="number"||typeof A=="bigint")&&so(c,""+A);break;case"onScroll":A!=null&&gi("scroll",c);break;case"onScrollEnd":A!=null&&gi("scrollend",c);break;case"onClick":A!=null&&(c.onclick=yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gt.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(N=b.endsWith("Capture"),d=b.slice(2,N?b.length-7:void 0),B=c[gn]||null,B=B!=null?B[b]:null,typeof B=="function"&&c.removeEventListener(d,B,N),typeof A=="function")){typeof B!="function"&&B!==null&&(b in c?c[b]=null:c.hasAttribute(b)&&c.removeAttribute(b)),c.addEventListener(d,A,N);break e}b in c?c[b]=A:A===!0?c.setAttribute(b,""):rt(c,b,A)}}}function Yr(c,d,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gi("error",c),gi("load",c);var A=!1,N=!1,B;for(B in b)if(b.hasOwnProperty(B)){var ie=b[B];if(ie!=null)switch(B){case"src":A=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:as(c,d,B,ie,b,null)}}N&&as(c,d,"srcSet",b.srcSet,b,null),A&&as(c,d,"src",b.src,b,null);return;case"input":gi("invalid",c);var de=B=ie=N=null,Oe=null,nt=null;for(A in b)if(b.hasOwnProperty(A)){var wt=b[A];if(wt!=null)switch(A){case"name":N=wt;break;case"type":ie=wt;break;case"checked":Oe=wt;break;case"defaultChecked":nt=wt;break;case"value":B=wt;break;case"defaultValue":de=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(i(137,d));break;default:as(c,d,A,wt,b,null)}}Gn(c,B,de,Oe,nt,ie,N,!1),yi(c);return;case"select":gi("invalid",c),A=ie=B=null;for(N in b)if(b.hasOwnProperty(N)&&(de=b[N],de!=null))switch(N){case"value":B=de;break;case"defaultValue":ie=de;break;case"multiple":A=de;default:as(c,d,N,de,b,null)}d=B,b=ie,c.multiple=!!A,d!=null?Ti(c,!!A,d,!1):b!=null&&Ti(c,!!A,b,!0);return;case"textarea":gi("invalid",c),B=N=A=null;for(ie in b)if(b.hasOwnProperty(ie)&&(de=b[ie],de!=null))switch(ie){case"value":A=de;break;case"defaultValue":N=de;break;case"children":B=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(91));break;default:as(c,d,ie,de,b,null)}ur(c,A,N,B),yi(c);return;case"option":for(Oe in b)if(b.hasOwnProperty(Oe)&&(A=b[Oe],A!=null))switch(Oe){case"selected":c.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:as(c,d,Oe,A,b,null)}return;case"dialog":gi("beforetoggle",c),gi("toggle",c),gi("cancel",c),gi("close",c);break;case"iframe":case"object":gi("load",c);break;case"video":case"audio":for(A=0;A<sr.length;A++)gi(sr[A],c);break;case"image":gi("error",c),gi("load",c);break;case"details":gi("toggle",c);break;case"embed":case"source":case"link":gi("error",c),gi("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in b)if(b.hasOwnProperty(nt)&&(A=b[nt],A!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:as(c,d,nt,A,b,null)}return;default:if(Ip(d)){for(wt in b)b.hasOwnProperty(wt)&&(A=b[wt],A!==void 0&&bb(c,d,wt,A,b,void 0));return}}for(de in b)b.hasOwnProperty(de)&&(A=b[de],A!=null&&as(c,d,de,A,b,null))}function S0(c,d,b,A){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,B=null,ie=null,de=null,Oe=null,nt=null,wt=null;for(mt in b){var Dt=b[mt];if(b.hasOwnProperty(mt)&&Dt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Oe=Dt;default:A.hasOwnProperty(mt)||as(c,d,mt,null,A,Dt)}}for(var it in A){var mt=A[it];if(Dt=b[it],A.hasOwnProperty(it)&&(mt!=null||Dt!=null))switch(it){case"type":B=mt;break;case"name":N=mt;break;case"checked":nt=mt;break;case"defaultChecked":wt=mt;break;case"value":ie=mt;break;case"defaultValue":de=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,d));break;default:mt!==Dt&&as(c,d,it,mt,A,Dt)}}ti(c,ie,de,Oe,nt,wt,B,N);return;case"select":mt=ie=de=it=null;for(B in b)if(Oe=b[B],b.hasOwnProperty(B)&&Oe!=null)switch(B){case"value":break;case"multiple":mt=Oe;default:A.hasOwnProperty(B)||as(c,d,B,null,A,Oe)}for(N in A)if(B=A[N],Oe=b[N],A.hasOwnProperty(N)&&(B!=null||Oe!=null))switch(N){case"value":it=B;break;case"defaultValue":de=B;break;case"multiple":ie=B;default:B!==Oe&&as(c,d,N,B,A,Oe)}d=de,b=ie,A=mt,it!=null?Ti(c,!!b,it,!1):!!A!=!!b&&(d!=null?Ti(c,!!b,d,!0):Ti(c,!!b,b?[]:"",!1));return;case"textarea":mt=it=null;for(de in b)if(N=b[de],b.hasOwnProperty(de)&&N!=null&&!A.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:as(c,d,de,null,A,N)}for(ie in A)if(N=A[ie],B=b[ie],A.hasOwnProperty(ie)&&(N!=null||B!=null))switch(ie){case"value":it=N;break;case"defaultValue":mt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:N!==B&&as(c,d,ie,N,A,B)}ss(c,it,mt);return;case"option":for(var Ce in b)if(it=b[Ce],b.hasOwnProperty(Ce)&&it!=null&&!A.hasOwnProperty(Ce))switch(Ce){case"selected":c.selected=!1;break;default:as(c,d,Ce,null,A,it)}for(Oe in A)if(it=A[Oe],mt=b[Oe],A.hasOwnProperty(Oe)&&it!==mt&&(it!=null||mt!=null))switch(Oe){case"selected":c.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:as(c,d,Oe,it,A,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Sn in b)it=b[Sn],b.hasOwnProperty(Sn)&&it!=null&&!A.hasOwnProperty(Sn)&&as(c,d,Sn,null,A,it);for(nt in A)if(it=A[nt],mt=b[nt],A.hasOwnProperty(nt)&&it!==mt&&(it!=null||mt!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(i(137,d));break;default:as(c,d,nt,it,A,mt)}return;default:if(Ip(d)){for(var Qi in b)it=b[Qi],b.hasOwnProperty(Qi)&&it!==void 0&&!A.hasOwnProperty(Qi)&&bb(c,d,Qi,void 0,A,it);for(wt in A)it=A[wt],mt=b[wt],!A.hasOwnProperty(wt)||it===mt||it===void 0&&mt===void 0||bb(c,d,wt,it,A,mt);return}}for(var Je in b)it=b[Je],b.hasOwnProperty(Je)&&it!=null&&!A.hasOwnProperty(Je)&&as(c,d,Je,null,A,it);for(Dt in A)it=A[Dt],mt=b[Dt],!A.hasOwnProperty(Dt)||it===mt||it==null&&mt==null||as(c,d,Dt,it,A,mt)}var oi=null,N_=null;function wc(c){return c.nodeType===9?c:c.ownerDocument}function L_(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fA(c,d){if(c===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&d==="foreignObject"?0:c}function yb(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Tb=null;function Eb(){var c=window.event;return c&&c.type==="popstate"?c===Tb?!1:(Tb=c,!0):(Tb=null,!1)}var NT=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,Sb=typeof Promise=="function"?Promise:void 0,mA=typeof queueMicrotask=="function"?queueMicrotask:typeof Sb<"u"?function(c){return Sb.resolve(null).then(c).catch(gA)}:NT;function gA(c){setTimeout(function(){throw c})}function Id(c){return c==="head"}function ig(c,d){var b=d,A=0,N=0;do{var B=b.nextSibling;if(c.removeChild(b),B&&B.nodeType===8)if(b=B.data,b==="/$"){if(0<A&&8>A){b=A;var ie=c.ownerDocument;if(b&1&&$0(ie.documentElement),b&2&&$0(ie.body),b&4)for(b=ie.head,$0(b),ie=b.firstChild;ie;){var de=ie.nextSibling,Oe=ie.nodeName;ie[Ks]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||b.removeChild(ie),ie=de}}if(N===0){c.removeChild(B),hg(d);return}N--}else b==="$"||b==="$?"||b==="$!"?N++:A=b.charCodeAt(0)-48;else A=0;b=B}while(b);hg(d)}function sg(c){var d=c.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var b=d;switch(d=d.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":sg(b),Ri(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}c.removeChild(b)}}function vh(c,d,b,A){for(;c.nodeType===1;){var N=b;if(c.nodeName.toLowerCase()!==d.toLowerCase()){if(!A&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(A){if(!c[Ks])switch(d){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(B=c.getAttribute("rel"),B==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(B!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(B=c.getAttribute("src"),(B!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&B&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(d==="input"&&c.type==="hidden"){var B=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===B)return c}else return c;if(c=su(c.nextSibling),c===null)break}return null}function _a(c,d,b){if(d==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!b||(c=su(c.nextSibling),c===null))return null;return c}function D_(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function s1(c,d){var b=c.ownerDocument;if(c.data!=="$?"||b.readyState==="complete")d();else{var A=function(){d(),b.removeEventListener("DOMContentLoaded",A)};b.addEventListener("DOMContentLoaded",A),c._reactRetry=A}}function su(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return c}var B_=null;function un(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var b=c.data;if(b==="$"||b==="$!"||b==="$?"){if(d===0)return c;d--}else b==="/$"&&d++}c=c.previousSibling}return null}function A0(c,d,b){switch(d=wc(b),c){case"html":if(c=d.documentElement,!c)throw Error(i(452));return c;case"head":if(c=d.head,!c)throw Error(i(453));return c;case"body":if(c=d.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}function $0(c){for(var d=c.attributes;d.length;)c.removeAttributeNode(d[0]);Ri(c)}var Tl=new Map,LT=new Set;function x0(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Xs=te.d;te.d={f:C0,r:r1,D:bh,C:_A,L:ru,m:ls,X:P_,S:Od,M:Ab};function C0(){var c=Xs.f(),d=eu();return c||d}function r1(c){var d=ge(c);d!==null&&d.tag===5&&d.type==="form"?Pf(d):Xs.r(c)}var rg=typeof document>"u"?null:document;function k_(c,d,b){var A=rg;if(A&&typeof d=="string"&&d){var N=Rn(d);N='link[rel="'+c+'"][href="'+N+'"]',typeof b=="string"&&(N+='[crossorigin="'+b+'"]'),LT.has(N)||(LT.add(N),c={rel:c,crossOrigin:b,href:d},A.querySelector(N)===null&&(d=A.createElement("link"),Yr(d,"link",c),ht(d),A.head.appendChild(d)))}}function bh(c){Xs.D(c),k_("dns-prefetch",c,null)}function _A(c,d){Xs.C(c,d),k_("preconnect",c,d)}function ru(c,d,b){Xs.L(c,d,b);var A=rg;if(A&&c&&d){var N='link[rel="preload"][as="'+Rn(d)+'"]';d==="image"&&b&&b.imageSrcSet?(N+='[imagesrcset="'+Rn(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(N+='[imagesizes="'+Rn(b.imageSizes)+'"]')):N+='[href="'+Rn(c)+'"]';var B=N;switch(d){case"style":B=Ic(c);break;case"script":B=El(c)}Tl.has(B)||(c=v({rel:"preload",href:d==="image"&&b&&b.imageSrcSet?void 0:c,as:d},b),Tl.set(B,c),A.querySelector(N)!==null||d==="style"&&A.querySelector(F_(B))||d==="script"&&A.querySelector(xs(B))||(d=A.createElement("link"),Yr(d,"link",c),ht(d),A.head.appendChild(d)))}}function ls(c,d){Xs.m(c,d);var b=rg;if(b&&c){var A=d&&typeof d.as=="string"?d.as:"script",N='link[rel="modulepreload"][as="'+Rn(A)+'"][href="'+Rn(c)+'"]',B=N;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=El(c)}if(!Tl.has(B)&&(c=v({rel:"modulepreload",href:c},d),Tl.set(B,c),b.querySelector(N)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(xs(B)))return}A=b.createElement("link"),Yr(A,"link",c),ht(A),b.head.appendChild(A)}}}function Od(c,d,b){Xs.S(c,d,b);var A=rg;if(A&&c){var N=ot(A).hoistableStyles,B=Ic(c);d=d||"default";var ie=N.get(B);if(!ie){var de={loading:0,preload:null};if(ie=A.querySelector(F_(B)))de.loading=5;else{c=v({rel:"stylesheet",href:c,"data-precedence":d},b),(b=Tl.get(B))&&$b(c,b);var Oe=ie=A.createElement("link");ht(Oe),Yr(Oe,"link",c),Oe._p=new Promise(function(nt,wt){Oe.onload=nt,Oe.onerror=wt}),Oe.addEventListener("load",function(){de.loading|=1}),Oe.addEventListener("error",function(){de.loading|=2}),de.loading|=4,H_(ie,d,A)}ie={type:"stylesheet",instance:ie,count:1,state:de},N.set(B,ie)}}}function P_(c,d){Xs.X(c,d);var b=rg;if(b&&c){var A=ot(b).hoistableScripts,N=El(c),B=A.get(N);B||(B=b.querySelector(xs(N)),B||(c=v({src:c,async:!0},d),(d=Tl.get(N))&&Nd(c,d),B=b.createElement("script"),ht(B),Yr(B,"link",c),b.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},A.set(N,B))}}function Ab(c,d){Xs.M(c,d);var b=rg;if(b&&c){var A=ot(b).hoistableScripts,N=El(c),B=A.get(N);B||(B=b.querySelector(xs(N)),B||(c=v({src:c,async:!0,type:"module"},d),(d=Tl.get(N))&&Nd(c,d),B=b.createElement("script"),ht(B),Yr(B,"link",c),b.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},A.set(N,B))}}function U_(c,d,b,A){var N=(N=Fe.current)?x0(N):null;if(!N)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(d=Ic(b.href),b=ot(N).hoistableStyles,A=b.get(d),A||(A={type:"style",instance:null,count:0,state:null},b.set(d,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){c=Ic(b.href);var B=ot(N).hoistableStyles,ie=B.get(c);if(ie||(N=N.ownerDocument||N,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(c,ie),(B=N.querySelector(F_(c)))&&!B._p&&(ie.instance=B,ie.state.loading=5),Tl.has(c)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Tl.set(c,b),B||ds(N,c,b,ie.state))),d&&A===null)throw Error(i(528,""));return ie}if(d&&A!==null)throw Error(i(529,""));return null;case"script":return d=b.async,b=b.src,typeof b=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=El(b),b=ot(N).hoistableScripts,A=b.get(d),A||(A={type:"script",instance:null,count:0,state:null},b.set(d,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function Ic(c){return'href="'+Rn(c)+'"'}function F_(c){return'link[rel="stylesheet"]['+c+"]"}function Wu(c){return v({},c,{"data-precedence":c.precedence,precedence:null})}function ds(c,d,b,A){c.querySelector('link[rel="preload"][as="style"]['+d+"]")?A.loading=1:(d=c.createElement("link"),A.preload=d,d.addEventListener("load",function(){return A.loading|=1}),d.addEventListener("error",function(){return A.loading|=2}),Yr(d,"link",b),ht(d),c.head.appendChild(d))}function El(c){return'[src="'+Rn(c)+'"]'}function xs(c){return"script[async]"+c}function Ci(c,d,b){if(d.count++,d.instance===null)switch(d.type){case"style":var A=c.querySelector('style[data-href~="'+Rn(b.href)+'"]');if(A)return d.instance=A,ht(A),A;var N=v({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return A=(c.ownerDocument||c).createElement("style"),ht(A),Yr(A,"style",N),H_(A,b.precedence,c),d.instance=A;case"stylesheet":N=Ic(b.href);var B=c.querySelector(F_(N));if(B)return d.state.loading|=4,d.instance=B,ht(B),B;A=Wu(b),(N=Tl.get(N))&&$b(A,N),B=(c.ownerDocument||c).createElement("link"),ht(B);var ie=B;return ie._p=new Promise(function(de,Oe){ie.onload=de,ie.onerror=Oe}),Yr(B,"link",A),d.state.loading|=4,H_(B,b.precedence,c),d.instance=B;case"script":return B=El(b.src),(N=c.querySelector(xs(B)))?(d.instance=N,ht(N),N):(A=b,(N=Tl.get(B))&&(A=v({},b),Nd(A,N)),c=c.ownerDocument||c,N=c.createElement("script"),ht(N),Yr(N,"link",A),c.head.appendChild(N),d.instance=N);case"void":return null;default:throw Error(i(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(A=d.instance,d.state.loading|=4,H_(A,b.precedence,c));return d.instance}function H_(c,d,b){for(var A=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=A.length?A[A.length-1]:null,B=N,ie=0;ie<A.length;ie++){var de=A[ie];if(de.dataset.precedence===d)B=de;else if(B!==N)break}B?B.parentNode.insertBefore(c,B.nextSibling):(d=b.nodeType===9?b.head:b,d.insertBefore(c,d.firstChild))}function $b(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.title==null&&(c.title=d.title)}function Nd(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.integrity==null&&(c.integrity=d.integrity)}var G_=null;function Xf(c,d,b){if(G_===null){var A=new Map,N=G_=new Map;N.set(b,A)}else N=G_,A=N.get(b),A||(A=new Map,N.set(b,A));if(A.has(c))return A;for(A.set(c,null),b=b.getElementsByTagName(c),N=0;N<b.length;N++){var B=b[N];if(!(B[Ks]||B[Nn]||c==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=B.getAttribute(d)||"";ie=c+ie;var de=A.get(ie);de?de.push(B):A.set(ie,[B])}}return A}function xb(c,d,b){c=c.ownerDocument||c,c.head.insertBefore(b,d==="title"?c.querySelector("head > title"):null)}function DT(c,d,b){if(b===1||d.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return c=d.disabled,typeof d.precedence=="string"&&c==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function BT(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var $r=null;function og(){}function yh(c,d,b){if($r===null)throw Error(i(475));var A=$r;if(d.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var N=Ic(b.href),B=c.querySelector(F_(N));if(B){c=B._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(A.count++,A=va.bind(A),c.then(A,A)),d.state.loading|=4,d.instance=B,ht(B);return}B=c.ownerDocument||c,b=Wu(b),(N=Tl.get(N))&&$b(b,N),B=B.createElement("link"),ht(B);var ie=B;ie._p=new Promise(function(de,Oe){ie.onload=de,ie.onerror=Oe}),Yr(B,"link",b),d.instance=B}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(A.count++,d=va.bind(A),c.addEventListener("load",d),c.addEventListener("error",d))}}function Ld(){if($r===null)throw Error(i(475));var c=$r;return c.stylesheets&&c.count===0&&jf(c,c.stylesheets),0<c.count?function(d){var b=setTimeout(function(){if(c.stylesheets&&jf(c,c.stylesheets),c.unsuspend){var A=c.unsuspend;c.unsuspend=null,A()}},6e4);return c.unsuspend=d,function(){c.unsuspend=null,clearTimeout(b)}}:null}function va(){if(this.count--,this.count===0){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var z_=null;function jf(c,d){c.stylesheets=null,c.unsuspend!==null&&(c.count++,z_=new Map,d.forEach(Cb,c),z_=null,va.call(c))}function Cb(c,d){if(!(d.state.loading&4)){var b=z_.get(c);if(b)var A=b.get(null);else{b=new Map,z_.set(c,b);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<N.length;B++){var ie=N[B];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(b.set(ie.dataset.precedence,ie),A=ie)}A&&b.set(null,A)}N=d.instance,ie=N.getAttribute("data-precedence"),B=b.get(ie)||A,B===A&&b.set(null,N),b.set(ie,N),this.count++,A=va.bind(this),N.addEventListener("load",A),N.addEventListener("error",A),B?B.parentNode.insertBefore(N,B.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),d.state.loading|=4}}var Dd={$$typeof:I,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function V_(c,d,b,A,N,B,ie,de){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$t(0),this.hiddenUpdates=$t(null),this.identifierPrefix=A,this.onUncaughtError=N,this.onCaughtError=B,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function ag(c,d,b,A,N,B,ie,de,Oe,nt,wt,Dt){return c=new V_(c,d,b,ie,de,Oe,nt,Dt),d=1,B===!0&&(d|=24),B=_o(3,null,null,d),c.current=B,B.stateNode=c,d=cd(),d.refCount++,c.pooledCache=d,d.refCount++,B.memoizedState={element:A,isDehydrated:b,cache:d},Mf(B),c}function W_(c){return c?(c=oa,c):oa}function kT(c,d,b,A,N,B){N=W_(N),A.context===null?A.context=N:A.pendingContext=N,A=ul(d),A.payload={element:b},B=B===void 0?null:B,B!==null&&(A.callback=B),b=Fl(c,A,d),b!==null&&(So(b,c,d),bc(b,c,d))}function PT(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var b=c.retryLane;c.retryLane=b!==0&&b<d?b:d}}function X_(c,d){PT(c,d),(c=c.alternate)&&PT(c,d)}function Oc(c){if(c.tag===13){var d=sl(c,67108864);d!==null&&So(d,c,67108864),X_(c,67108864)}}var Zi=!0;function vA(c,d,b,A){var N=z.T;z.T=null;var B=te.p;try{te.p=2,Yf(c,d,b,A)}finally{te.p=B,z.T=N}}function Mb(c,d,b,A){var N=z.T;z.T=null;var B=te.p;try{te.p=8,Yf(c,d,b,A)}finally{te.p=B,z.T=N}}function Yf(c,d,b,A){if(Zi){var N=j_(A);if(N===null)rr(c,d,A,Y_,b),bA(c,A);else if(FT(N,c,d,b,A))A.stopPropagation();else if(bA(c,A),d&4&&-1<o1.indexOf(c)){for(;N!==null;){var B=ge(N);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var ie=ve(B.pendingLanes);if(ie!==0){var de=B;for(de.pendingLanes|=2,de.entangledLanes|=2;ie;){var Oe=1<<31-yt(ie);de.entanglements[1]|=Oe,ie&=~Oe}Ua(B),(Oi&6)===0&&(jr=we()+500,Vf(0))}}break;case 13:de=sl(B,2),de!==null&&So(de,B,2),eu(),X_(B,2)}if(B=j_(A),B===null&&rr(c,d,A,Y_,b),B===N)break;N=B}N!==null&&A.stopPropagation()}else rr(c,d,A,null,b)}}function j_(c){return c=Np(c),Zo(c)}var Y_=null;function Zo(c){if(Y_=null,c=ae(c),c!==null){var d=a(c);if(d===null)c=null;else{var b=d.tag;if(b===13){if(c=l(d),c!==null)return c;c=null}else if(b===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return Y_=c,null}function UT(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case dt:return 2;case Qe:return 8;case vt:case et:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Rb=!1,Nc=null,Bd=null,kd=null,K_=new Map,lg=new Map,Pd=[],o1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bA(c,d){switch(c){case"focusin":case"focusout":Nc=null;break;case"dragenter":case"dragleave":Bd=null;break;case"mouseover":case"mouseout":kd=null;break;case"pointerover":case"pointerout":K_.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":lg.delete(d.pointerId)}}function ug(c,d,b,A,N,B){return c===null||c.nativeEvent!==B?(c={blockedOn:d,domEventName:b,eventSystemFlags:A,nativeEvent:B,targetContainers:[N]},d!==null&&(d=ge(d),d!==null&&Oc(d)),c):(c.eventSystemFlags|=A,d=c.targetContainers,N!==null&&d.indexOf(N)===-1&&d.push(N),c)}function FT(c,d,b,A,N){switch(d){case"focusin":return Nc=ug(Nc,c,d,b,A,N),!0;case"dragenter":return Bd=ug(Bd,c,d,b,A,N),!0;case"mouseover":return kd=ug(kd,c,d,b,A,N),!0;case"pointerover":var B=N.pointerId;return K_.set(B,ug(K_.get(B)||null,c,d,b,A,N)),!0;case"gotpointercapture":return B=N.pointerId,lg.set(B,ug(lg.get(B)||null,c,d,b,A,N)),!0}return!1}function HT(c){var d=ae(c.target);if(d!==null){var b=a(d);if(b!==null){if(d=b.tag,d===13){if(d=l(b),d!==null){c.blockedOn=d,jt(c.priority,function(){if(b.tag===13){var A=Ws();A=Yt(A);var N=sl(b,A);N!==null&&So(N,b,A),X_(b,A)}});return}}else if(d===3&&b.stateNode.current.memoizedState.isDehydrated){c.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}c.blockedOn=null}function cg(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var b=j_(c.nativeEvent);if(b===null){b=c.nativeEvent;var A=new b.constructor(b.type,b);Op=A,b.target.dispatchEvent(A),Op=null}else return d=ge(b),d!==null&&Oc(d),c.blockedOn=b,!1;d.shift()}return!0}function M0(c,d,b){cg(c)&&b.delete(d)}function yA(){Rb=!1,Nc!==null&&cg(Nc)&&(Nc=null),Bd!==null&&cg(Bd)&&(Bd=null),kd!==null&&cg(kd)&&(kd=null),K_.forEach(M0),lg.forEach(M0)}function R0(c,d){c.blockedOn===d&&(c.blockedOn=null,Rb||(Rb=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,yA)))}var q_=null;function J_(c){q_!==c&&(q_=c,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){q_===c&&(q_=null);for(var d=0;d<c.length;d+=3){var b=c[d],A=c[d+1],N=c[d+2];if(typeof A!="function"){if(Zo(A||b)===null)continue;break}var B=ge(b);B!==null&&(c.splice(d,3),d-=3,u0(B,{pending:!0,data:N,method:b.method,action:A},A,N))}}))}function hg(c){function d(Oe){return R0(Oe,c)}Nc!==null&&R0(Nc,c),Bd!==null&&R0(Bd,c),kd!==null&&R0(kd,c),K_.forEach(d),lg.forEach(d);for(var b=0;b<Pd.length;b++){var A=Pd[b];A.blockedOn===c&&(A.blockedOn=null)}for(;0<Pd.length&&(b=Pd[0],b.blockedOn===null);)HT(b),b.blockedOn===null&&Pd.shift();if(b=(c.ownerDocument||c).$$reactFormReplay,b!=null)for(A=0;A<b.length;A+=3){var N=b[A],B=b[A+1],ie=N[gn]||null;if(typeof B=="function")ie||J_(b);else if(ie){var de=null;if(B&&B.hasAttribute("formAction")){if(N=B,ie=B[gn]||null)de=ie.formAction;else if(Zo(N)!==null)continue}else de=ie.action;typeof de=="function"?b[A+1]=de:(b.splice(A,3),A-=3),J_(b)}}}function GT(c){this._internalRoot=c}wb.prototype.render=GT.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(i(409));var b=d.current,A=Ws();kT(b,A,c,d,null,null)},wb.prototype.unmount=GT.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;kT(c.current,2,null,c,null,null),eu(),d[zn]=null}};function wb(c){this._internalRoot=c}wb.prototype.unstable_scheduleHydration=function(c){if(c){var d=xn();c={blockedOn:null,target:c,priority:d};for(var b=0;b<Pd.length&&d!==0&&d<Pd[b].priority;b++);Pd.splice(b,0,c),b===0&&HT(c)}};var Z_=e.version;if(Z_!=="19.1.0")throw Error(i(527,Z_,"19.1.0"));te.findDOMNode=function(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=f(d),c=c!==null?p(c):null,c=c===null?null:c.stateNode,c};var zT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ib=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ib.isDisabled&&Ib.supportsFiber)try{Le=Ib.inject(zT),Xe=Ib}catch{}}return eE.createRoot=function(c,d){if(!r(c))throw Error(i(299));var b=!1,A="",N=ch,B=Sd,ie=Km,de=null;return d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onUncaughtError!==void 0&&(N=d.onUncaughtError),d.onCaughtError!==void 0&&(B=d.onCaughtError),d.onRecoverableError!==void 0&&(ie=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(de=d.unstable_transitionCallbacks)),d=ag(c,1,!1,null,null,b,A,N,B,ie,de,null),c[zn]=d.current,E0(c),new GT(d)},eE.hydrateRoot=function(c,d,b){if(!r(c))throw Error(i(299));var A=!1,N="",B=ch,ie=Sd,de=Km,Oe=null,nt=null;return b!=null&&(b.unstable_strictMode===!0&&(A=!0),b.identifierPrefix!==void 0&&(N=b.identifierPrefix),b.onUncaughtError!==void 0&&(B=b.onUncaughtError),b.onCaughtError!==void 0&&(ie=b.onCaughtError),b.onRecoverableError!==void 0&&(de=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Oe=b.unstable_transitionCallbacks),b.formState!==void 0&&(nt=b.formState)),d=ag(c,1,!0,d,b??null,A,N,B,ie,de,Oe,nt),d.context=W_(null),b=d.current,A=Ws(),A=Yt(A),N=ul(A),N.callback=null,Fl(b,N,A),b=A,d.current.lanes=b,Pt(d,b),Ua(d),c[zn]=d.current,E0(c),new wb(d)},eE.version="19.1.0",eE}var OD;function JV(){if(OD)return G1.exports;OD=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),G1.exports=qV(),G1.exports}var ZV=JV();function ts(s){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error(typeof s=="number"?"[MobX] minified error nr: "+s+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+s)}var QV={};function HC(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:QV}var rF=Object.assign,yx=Object.getOwnPropertyDescriptor,gp=Object.defineProperty,AS=Object.prototype,II=[];Object.freeze(II);var oF={};Object.freeze(oF);var e5=typeof Proxy<"u",t5=Object.toString();function aF(){e5||ts("Proxy not available")}function lF(s){var e=!1;return function(){if(!e)return e=!0,s.apply(this,arguments)}}var yy=function(){};function ef(s){return typeof s=="function"}function Hv(s){var e=typeof s;switch(e){case"string":case"symbol":case"number":return!0}return!1}function GC(s){return s!==null&&typeof s=="object"}function Lg(s){if(!GC(s))return!1;var e=Object.getPrototypeOf(s);if(e==null)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n.toString()===t5}function uF(s){var e=s?.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function zC(s,e,n){gp(s,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function cF(s,e,n){gp(s,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Gg(s,e){var n="isMobX"+s;return e.prototype[n]=!0,function(i){return GC(i)&&i[n]===!0}}function cT(s){return s!=null&&Object.prototype.toString.call(s)==="[object Map]"}function n5(s){var e=Object.getPrototypeOf(s),n=Object.getPrototypeOf(e),i=Object.getPrototypeOf(n);return i===null}function z0(s){return s!=null&&Object.prototype.toString.call(s)==="[object Set]"}var hF=typeof Object.getOwnPropertySymbols<"u";function i5(s){var e=Object.keys(s);if(!hF)return e;var n=Object.getOwnPropertySymbols(s);return n.length?[].concat(e,n.filter(function(i){return AS.propertyIsEnumerable.call(s,i)})):e}var VC=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:hF?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames;function dF(s){return s===null?null:typeof s=="object"?""+s:s}function K0(s,e){return AS.hasOwnProperty.call(s,e)}var s5=Object.getOwnPropertyDescriptors||function(e){var n={};return VC(e).forEach(function(i){n[i]=yx(e,i)}),n};function kc(s,e){return!!(s&e)}function Pc(s,e,n){return n?s|=e:s&=~e,s}function ND(s,e){(e==null||e>s.length)&&(e=s.length);for(var n=0,i=Array(e);n<e;n++)i[n]=s[n];return i}function r5(s,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,a5(i.key),i)}}function hT(s,e,n){return e&&r5(s.prototype,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ty(s,e){var n=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n)return(n=n.call(s)).next.bind(n);if(Array.isArray(s)||(n=l5(s))||e){n&&(s=n);var i=0;return function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Gv.apply(null,arguments)}function fF(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,OI(s,e)}function OI(s,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},OI(s,e)}function o5(s,e){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}function a5(s){var e=o5(s,"string");return typeof e=="symbol"?e:e+""}function l5(s,e){if(s){if(typeof s=="string")return ND(s,e);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ND(s,e):void 0}}var pp=Symbol("mobx-stored-annotations");function _p(s){function e(n,i){if(xS(i))return s.decorate_20223_(n,i);$S(n,i,s)}return Object.assign(e,s)}function $S(s,e,n){K0(s,pp)||zC(s,pp,Gv({},s[pp])),m5(n)||(s[pp][e]=n)}function u5(s){return K0(s,pp)||zC(s,pp,Gv({},s[pp])),s[pp]}function xS(s){return typeof s=="object"&&typeof s.kind=="string"}var Qn=Symbol("mobx administration"),zg=function(){function s(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=fs.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var e=s.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.reportObserved=function(){return MF(this)},e.reportChanged=function(){Ih(),RF(this),Oh()},e.toString=function(){return this.name_},hT(s,[{key:"isBeingObserved",get:function(){return kc(this.flags_,s.isBeingObservedMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return kc(this.flags_,s.isPendingUnobservationMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return kc(this.flags_,s.diffValueMask_)?1:0},set:function(i){this.flags_=Pc(this.flags_,s.diffValueMask_,i===1)}}])}();zg.isBeingObservedMask_=1;zg.isPendingUnobservationMask_=2;zg.diffValueMask_=4;var XO=Gg("Atom",zg);function jO(s,e,n){e===void 0&&(e=yy),n===void 0&&(n=yy);var i=new zg(s);return e!==yy&&T6(i,e),n!==yy&&LF(i,n),i}function c5(s,e){return WF(s,e)}function h5(s,e){return Object.is?Object.is(s,e):s===e?s!==0||1/s===1/e:s!==s&&e!==e}var Tx={structural:c5,default:h5};function zv(s,e,n){return KO(s)?s:Array.isArray(s)?li.array(s,{name:n}):Lg(s)?li.object(s,void 0,{name:n}):cT(s)?li.map(s,{name:n}):z0(s)?li.set(s,{name:n}):typeof s=="function"&&!tS(s)&&!nS(s)?uF(s)?Py(s):eS(n,s):s}function d5(s,e,n){if(s==null||NS(s)||OS(s)||Vg(s)||Kd(s))return s;if(Array.isArray(s))return li.array(s,{name:n,deep:!1});if(Lg(s))return li.object(s,void 0,{name:n,deep:!1});if(cT(s))return li.map(s,{name:n,deep:!1});if(z0(s))return li.set(s,{name:n,deep:!1})}function WC(s){return s}function f5(s,e){return WF(s,e)?e:s}var p5="override";function m5(s){return s.annotationType_===p5}function CS(s,e){return{annotationType_:s,options_:e,make_:g5,extend_:_5,decorate_20223_:v5}}function g5(s,e,n,i){var r;if((r=this.options_)!=null&&r.bound)return this.extend_(s,e,n,!1)===null?0:1;if(i===s.target_)return this.extend_(s,e,n,!1)===null?0:2;if(tS(n.value))return 1;var a=pF(s,this,e,n,!1);return gp(i,e,a),2}function _5(s,e,n,i){var r=pF(s,this,e,n);return s.defineProperty_(e,r,i)}function v5(s,e){var n=e.kind,i=e.name,r=e.addInitializer,a=this,l=function(p){var v,T,y,S;return Vv((v=(T=a.options_)==null?void 0:T.name)!=null?v:i.toString(),p,(y=(S=a.options_)==null?void 0:S.autoAction)!=null?y:!1)};if(n=="field")return function(f){var p,v=f;return tS(v)||(v=l(v)),(p=a.options_)!=null&&p.bound&&(v=v.bind(this),v.isMobxAction=!0),v};if(n=="method"){var h;return tS(s)||(s=l(s)),(h=this.options_)!=null&&h.bound&&r(function(){var f=this,p=f[i].bind(f);p.isMobxAction=!0,f[i]=p}),s}ts("Cannot apply '"+a.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):"+(`
'`+a.annotationType_+"' can only be used on properties with a function value."))}function b5(s,e,n,i){e.annotationType_,i.value}function pF(s,e,n,i,r){var a,l,h,f,p,v,T;r===void 0&&(r=rn.safeDescriptors),b5(s,e,n,i);var y=i.value;if((a=e.options_)!=null&&a.bound){var S;y=y.bind((S=s.proxy_)!=null?S:s.target_)}return{value:Vv((l=(h=e.options_)==null?void 0:h.name)!=null?l:n.toString(),y,(f=(p=e.options_)==null?void 0:p.autoAction)!=null?f:!1,(v=e.options_)!=null&&v.bound?(T=s.proxy_)!=null?T:s.target_:void 0),configurable:r?s.isPlainObject_:!0,enumerable:!1,writable:!r}}function mF(s,e){return{annotationType_:s,options_:e,make_:y5,extend_:T5,decorate_20223_:E5}}function y5(s,e,n,i){var r;if(i===s.target_)return this.extend_(s,e,n,!1)===null?0:2;if((r=this.options_)!=null&&r.bound&&(!K0(s.target_,e)||!nS(s.target_[e]))&&this.extend_(s,e,n,!1)===null)return 0;if(nS(n.value))return 1;var a=gF(s,this,e,n,!1,!1);return gp(i,e,a),2}function T5(s,e,n,i){var r,a=gF(s,this,e,n,(r=this.options_)==null?void 0:r.bound);return s.defineProperty_(e,a,i)}function E5(s,e){var n,i=e.name,r=e.addInitializer;return nS(s)||(s=Py(s)),(n=this.options_)!=null&&n.bound&&r(function(){var a=this,l=a[i].bind(a);l.isMobXFlow=!0,a[i]=l}),s}function S5(s,e,n,i){e.annotationType_,i.value}function gF(s,e,n,i,r,a){a===void 0&&(a=rn.safeDescriptors),S5(s,e,n,i);var l=i.value;if(nS(l)||(l=Py(l)),r){var h;l=l.bind((h=s.proxy_)!=null?h:s.target_),l.isMobXFlow=!0}return{value:l,configurable:a?s.isPlainObject_:!0,enumerable:!1,writable:!a}}function YO(s,e){return{annotationType_:s,options_:e,make_:A5,extend_:$5,decorate_20223_:x5}}function A5(s,e,n){return this.extend_(s,e,n,!1)===null?0:1}function $5(s,e,n,i){return C5(s,this,e,n),s.defineComputedProperty_(e,Gv({},this.options_,{get:n.get,set:n.set}),i)}function x5(s,e){var n=this,i=e.name,r=e.addInitializer;return r(function(){var a=fT(this)[Qn],l=Gv({},n.options_,{get:s,context:this});l.name||(l.name="ObservableObject."+i.toString()),a.values_.set(i,new tf(l))}),function(){return this[Qn].getObservablePropValue_(i)}}function C5(s,e,n,i){e.annotationType_,i.get}function XC(s,e){return{annotationType_:s,options_:e,make_:M5,extend_:R5,decorate_20223_:w5}}function M5(s,e,n){return this.extend_(s,e,n,!1)===null?0:1}function R5(s,e,n,i){var r,a;return I5(s,this),s.defineObservableProperty_(e,n.value,(r=(a=this.options_)==null?void 0:a.enhancer)!=null?r:zv,i)}function w5(s,e){var n=this,i=e.kind,r=e.name,a=new WeakSet;function l(h,f){var p,v,T=fT(h)[Qn],y=new Rg(f,(p=(v=n.options_)==null?void 0:v.enhancer)!=null?p:zv,"ObservableObject."+r.toString(),!1);T.values_.set(r,y),a.add(h)}if(i=="accessor")return{get:function(){return a.has(this)||l(this,s.get.call(this)),this[Qn].getObservablePropValue_(r)},set:function(f){return a.has(this)||l(this,f),this[Qn].setObservablePropValue_(r,f)},init:function(f){return a.has(this)||l(this,f),f}}}function I5(s,e,n,i){e.annotationType_}var O5="true",N5=_F();function _F(s){return{annotationType_:O5,options_:s,make_:L5,extend_:D5,decorate_20223_:B5}}function L5(s,e,n,i){var r,a;if(n.get)return MS.make_(s,e,n,i);if(n.set){var l=Vv(e.toString(),n.set);return i===s.target_?s.defineProperty_(e,{configurable:rn.safeDescriptors?s.isPlainObject_:!0,set:l})===null?0:2:(gp(i,e,{configurable:!0,set:l}),2)}if(i!==s.target_&&typeof n.value=="function"){var h;if(uF(n.value)){var f,p=(f=this.options_)!=null&&f.autoBind?Py.bound:Py;return p.make_(s,e,n,i)}var v=(h=this.options_)!=null&&h.autoBind?eS.bound:eS;return v.make_(s,e,n,i)}var T=((r=this.options_)==null?void 0:r.deep)===!1?li.ref:li;if(typeof n.value=="function"&&(a=this.options_)!=null&&a.autoBind){var y;n.value=n.value.bind((y=s.proxy_)!=null?y:s.target_)}return T.make_(s,e,n,i)}function D5(s,e,n,i){var r,a;if(n.get)return MS.extend_(s,e,n,i);if(n.set)return s.defineProperty_(e,{configurable:rn.safeDescriptors?s.isPlainObject_:!0,set:Vv(e.toString(),n.set)},i);if(typeof n.value=="function"&&(r=this.options_)!=null&&r.autoBind){var l;n.value=n.value.bind((l=s.proxy_)!=null?l:s.target_)}var h=((a=this.options_)==null?void 0:a.deep)===!1?li.ref:li;return h.extend_(s,e,n,i)}function B5(s,e){ts("'"+this.annotationType_+"' cannot be used as a decorator")}var k5="observable",P5="observable.ref",U5="observable.shallow",F5="observable.struct",vF={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(vF);function OA(s){return s||vF}var NI=XC(k5),H5=XC(P5,{enhancer:WC}),G5=XC(U5,{enhancer:d5}),z5=XC(F5,{enhancer:f5}),bF=_p(NI);function NA(s){return s.deep===!0?zv:s.deep===!1?WC:W5(s.defaultDecorator)}function V5(s){var e;return s?(e=s.defaultDecorator)!=null?e:_F(s):void 0}function W5(s){var e,n;return s&&(e=(n=s.options_)==null?void 0:n.enhancer)!=null?e:zv}function yF(s,e,n){if(xS(e))return NI.decorate_20223_(s,e);if(Hv(e)){$S(s,e,NI);return}return KO(s)?s:Lg(s)?li.object(s,e,n):Array.isArray(s)?li.array(s,e):cT(s)?li.map(s,e):z0(s)?li.set(s,e):typeof s=="object"&&s!==null?s:li.box(s,e)}rF(yF,bF);var X5={box:function(e,n){var i=OA(n);return new Rg(e,NA(i),i.name,!0,i.equals)},array:function(e,n){var i=OA(n);return(rn.useProxies===!1||i.proxy===!1?X6:B6)(e,NA(i),i.name)},map:function(e,n){var i=OA(n);return new UF(e,NA(i),i.name)},set:function(e,n){var i=OA(n);return new FF(e,NA(i),i.name)},object:function(e,n,i){return nb(function(){return $6(rn.useProxies===!1||i?.proxy===!1?fT({},i):N6({},i),e,n)})},ref:_p(H5),shallow:_p(G5),deep:bF,struct:_p(z5)},li=rF(yF,X5),TF="computed",j5="computed.struct",LI=YO(TF),Y5=YO(j5,{equals:Tx.structural}),MS=function(e,n){if(xS(n))return LI.decorate_20223_(e,n);if(Hv(n))return $S(e,n,LI);if(Lg(e))return _p(YO(TF,e));var i=Lg(n)?n:{};return i.get=e,i.name||(i.name=e.name||""),new tf(i)};Object.assign(MS,LI);MS.struct=_p(Y5);var LD,DD,Ex=0,K5=1,q5=(LD=(DD=yx(function(){},"name"))==null?void 0:DD.configurable)!=null?LD:!1,BD={value:"action",configurable:!0,writable:!1,enumerable:!1};function Vv(s,e,n,i){n===void 0&&(n=!1);function r(){return J5(s,n,e,i||this,arguments)}return r.isMobxAction=!0,r.toString=function(){return e.toString()},q5&&(BD.value=s,gp(r,"name",BD)),r}function J5(s,e,n,i,r){var a=Z5(s,e);try{return n.apply(i,r)}catch(l){throw a.error_=l,l}finally{Q5(a)}}function Z5(s,e,n,i){var r=!1,a=0,l=rn.trackingDerivation,h=!e||!l;Ih();var f=rn.allowStateChanges;h&&(tb(),f=jC(!0));var p=xy(!0),v={runAsAction_:h,prevDerivation_:l,prevAllowStateChanges_:f,prevAllowStateReads_:p,notifySpy_:r,startTime_:a,actionId_:K5++,parentActionId_:Ex};return Ex=v.actionId_,v}function Q5(s){Ex!==s.actionId_&&ts(30),Ex=s.parentActionId_,s.error_!==void 0&&(rn.suppressReactionErrors=!0),YC(s.prevAllowStateChanges_),wg(s.prevAllowStateReads_),Oh(),s.runAsAction_&&q0(s.prevDerivation_),rn.suppressReactionErrors=!1}function e6(s,e){var n=jC(s);try{return e()}finally{YC(n)}}function jC(s){var e=rn.allowStateChanges;return rn.allowStateChanges=s,e}function YC(s){rn.allowStateChanges=s}var Rg=function(s){function e(i,r,a,l,h){var f;return a===void 0&&(a="ObservableValue"),h===void 0&&(h=Tx.default),f=s.call(this,a)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=r,f.name_=a,f.equals=h,f.value_=r(i,void 0,a),f}fF(e,s);var n=e.prototype;return n.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.set=function(r){this.value_,r=this.prepareNewValue_(r),r!==rn.UNCHANGED&&this.setNewValue_(r)},n.prepareNewValue_=function(r){if(Ch(this)){var a=Mh(this,{object:this,type:vp,newValue:r});if(!a)return rn.UNCHANGED;r=a.newValue}return r=this.enhancer(r,this.value_,this.name_),this.equals(this.value_,r)?rn.UNCHANGED:r},n.setNewValue_=function(r){var a=this.value_;this.value_=r,this.reportChanged(),Jd(this)&&Zd(this,{type:vp,object:this,newValue:r,oldValue:a})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(r){return wS(this,r)},n.observe_=function(r,a){return a&&r({observableKind:"value",debugObjectName:this.name_,object:this,type:vp,newValue:this.value_,oldValue:void 0}),IS(this,r)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return dF(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e}(zg),t6=Gg("ObservableValue",Rg),tf=function(){function s(n){this.dependenciesState_=fs.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=fs.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ax(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Sx.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||ts(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=Vv("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?Tx.structural:Tx.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var e=s.prototype;return e.onBecomeStale_=function(){o6(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},e.get=function(){if(this.isComputing&&ts(32,this.name_,this.derivation),rn.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)DI(this)&&(this.warnAboutUntrackedRead_(),Ih(),this.value_=this.computeValue_(!1),Oh());else if(MF(this),DI(this)){var i=rn.trackingContext;this.keepAlive_&&!i&&(rn.trackingContext=this),this.trackAndCompute()&&r6(this),rn.trackingContext=i}var r=this.value_;if(Q$(r))throw r.cause;return r},e.set=function(i){if(this.setter_){this.isRunningSetter&&ts(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,i)}finally{this.isRunningSetter=!1}}else ts(34,this.name_)},e.trackAndCompute=function(){var i=this.value_,r=this.dependenciesState_===fs.NOT_TRACKING_,a=this.computeValue_(!0),l=r||Q$(i)||Q$(a)||!this.equals_(i,a);return l&&(this.value_=a),l},e.computeValue_=function(i){this.isComputing=!0;var r=jC(!1),a;if(i)a=EF(this,this.derivation,this.scope_);else if(rn.disableErrorBoundaries===!0)a=this.derivation.call(this.scope_);else try{a=this.derivation.call(this.scope_)}catch(l){a=new Ax(l)}return YC(r),this.isComputing=!1,a},e.suspend_=function(){this.keepAlive_||(BI(this),this.value_=void 0)},e.observe_=function(i,r){var a=this,l=!0,h=void 0;return g6(function(){var f=a.get();if(!l||r){var p=tb();i({observableKind:"computed",debugObjectName:a.name_,type:vp,object:a,newValue:f,oldValue:h}),q0(p)}l=!1,h=f})},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return dF(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},hT(s,[{key:"isComputing",get:function(){return kc(this.flags_,s.isComputingMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isComputingMask_,i)}},{key:"isRunningSetter",get:function(){return kc(this.flags_,s.isRunningSetterMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isRunningSetterMask_,i)}},{key:"isBeingObserved",get:function(){return kc(this.flags_,s.isBeingObservedMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return kc(this.flags_,s.isPendingUnobservationMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return kc(this.flags_,s.diffValueMask_)?1:0},set:function(i){this.flags_=Pc(this.flags_,s.diffValueMask_,i===1)}}])}();tf.isComputingMask_=1;tf.isRunningSetterMask_=2;tf.isBeingObservedMask_=4;tf.isPendingUnobservationMask_=8;tf.diffValueMask_=16;var RS=Gg("ComputedValue",tf),fs;(function(s){s[s.NOT_TRACKING_=-1]="NOT_TRACKING_",s[s.UP_TO_DATE_=0]="UP_TO_DATE_",s[s.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",s[s.STALE_=2]="STALE_"})(fs||(fs={}));var Sx;(function(s){s[s.NONE=0]="NONE",s[s.LOG=1]="LOG",s[s.BREAK=2]="BREAK"})(Sx||(Sx={}));var Ax=function(e){this.cause=void 0,this.cause=e};function Q$(s){return s instanceof Ax}function DI(s){switch(s.dependenciesState_){case fs.UP_TO_DATE_:return!1;case fs.NOT_TRACKING_:case fs.STALE_:return!0;case fs.POSSIBLY_STALE_:{for(var e=xy(!0),n=tb(),i=s.observing_,r=i.length,a=0;a<r;a++){var l=i[a];if(RS(l)){if(rn.disableErrorBoundaries)l.get();else try{l.get()}catch{return q0(n),wg(e),!0}if(s.dependenciesState_===fs.STALE_)return q0(n),wg(e),!0}}return AF(s),q0(n),wg(e),!1}}}function EF(s,e,n){var i=xy(!0);AF(s),s.newObserving_=new Array(s.runId_===0?100:s.observing_.length),s.unboundDepsCount_=0,s.runId_=++rn.runId;var r=rn.trackingDerivation;rn.trackingDerivation=s,rn.inBatch++;var a;if(rn.disableErrorBoundaries===!0)a=e.call(n);else try{a=e.call(n)}catch(l){a=new Ax(l)}return rn.inBatch--,rn.trackingDerivation=r,n6(s),wg(i),a}function n6(s){for(var e=s.observing_,n=s.observing_=s.newObserving_,i=fs.UP_TO_DATE_,r=0,a=s.unboundDepsCount_,l=0;l<a;l++){var h=n[l];h.diffValue===0&&(h.diffValue=1,r!==l&&(n[r]=h),r++),h.dependenciesState_>i&&(i=h.dependenciesState_)}for(n.length=r,s.newObserving_=null,a=e.length;a--;){var f=e[a];f.diffValue===0&&xF(f,s),f.diffValue=0}for(;r--;){var p=n[r];p.diffValue===1&&(p.diffValue=0,s6(p,s))}i!==fs.UP_TO_DATE_&&(s.dependenciesState_=i,s.onBecomeStale_())}function BI(s){var e=s.observing_;s.observing_=[];for(var n=e.length;n--;)xF(e[n],s);s.dependenciesState_=fs.NOT_TRACKING_}function SF(s){var e=tb();try{return s()}finally{q0(e)}}function tb(){var s=rn.trackingDerivation;return rn.trackingDerivation=null,s}function q0(s){rn.trackingDerivation=s}function xy(s){var e=rn.allowStateReads;return rn.allowStateReads=s,e}function wg(s){rn.allowStateReads=s}function AF(s){if(s.dependenciesState_!==fs.UP_TO_DATE_){s.dependenciesState_=fs.UP_TO_DATE_;for(var e=s.observing_,n=e.length;n--;)e[n].lowestObserverState_=fs.UP_TO_DATE_}}var ex=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},tx=!0,$F=!1,rn=function(){var s=HC();return s.__mobxInstanceCount>0&&!s.__mobxGlobals&&(tx=!1),s.__mobxGlobals&&s.__mobxGlobals.version!==new ex().version&&(tx=!1),tx?s.__mobxGlobals?(s.__mobxInstanceCount+=1,s.__mobxGlobals.UNCHANGED||(s.__mobxGlobals.UNCHANGED={}),s.__mobxGlobals):(s.__mobxInstanceCount=1,s.__mobxGlobals=new ex):(setTimeout(function(){$F||ts(35)},1),new ex)}();function i6(){if((rn.pendingReactions.length||rn.inBatch||rn.isRunningReactions)&&ts(36),$F=!0,tx){var s=HC();--s.__mobxInstanceCount===0&&(s.__mobxGlobals=void 0),rn=new ex}}function s6(s,e){s.observers_.add(e),s.lowestObserverState_>e.dependenciesState_&&(s.lowestObserverState_=e.dependenciesState_)}function xF(s,e){s.observers_.delete(e),s.observers_.size===0&&CF(s)}function CF(s){s.isPendingUnobservation===!1&&(s.isPendingUnobservation=!0,rn.pendingUnobservations.push(s))}function Ih(){rn.inBatch++}function Oh(){if(--rn.inBatch===0){wF();for(var s=rn.pendingUnobservations,e=0;e<s.length;e++){var n=s[e];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof tf&&n.suspend_())}rn.pendingUnobservations=[]}}function MF(s){var e=rn.trackingDerivation;return e!==null?(e.runId_!==s.lastAccessedBy_&&(s.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=s,!s.isBeingObserved&&rn.trackingContext&&(s.isBeingObserved=!0,s.onBO())),s.isBeingObserved):(s.observers_.size===0&&rn.inBatch>0&&CF(s),!1)}function RF(s){s.lowestObserverState_!==fs.STALE_&&(s.lowestObserverState_=fs.STALE_,s.observers_.forEach(function(e){e.dependenciesState_===fs.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=fs.STALE_}))}function r6(s){s.lowestObserverState_!==fs.STALE_&&(s.lowestObserverState_=fs.STALE_,s.observers_.forEach(function(e){e.dependenciesState_===fs.POSSIBLY_STALE_?e.dependenciesState_=fs.STALE_:e.dependenciesState_===fs.UP_TO_DATE_&&(s.lowestObserverState_=fs.UP_TO_DATE_)}))}function o6(s){s.lowestObserverState_===fs.UP_TO_DATE_&&(s.lowestObserverState_=fs.POSSIBLY_STALE_,s.observers_.forEach(function(e){e.dependenciesState_===fs.UP_TO_DATE_&&(e.dependenciesState_=fs.POSSIBLY_STALE_,e.onBecomeStale_())}))}var nf=function(){function s(n,i,r,a){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=fs.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Sx.NONE,this.name_=n,this.onInvalidate_=i,this.errorHandler_=r,this.requiresObservable_=a}var e=s.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,rn.pendingReactions.push(this),wF())},e.runReaction_=function(){if(!this.isDisposed){Ih(),this.isScheduled=!1;var i=rn.trackingContext;if(rn.trackingContext=this,DI(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(r){this.reportExceptionInDerivation_(r)}}rn.trackingContext=i,Oh()}},e.track=function(i){if(!this.isDisposed){Ih(),this.isRunning=!0;var r=rn.trackingContext;rn.trackingContext=this;var a=EF(this,i,void 0);rn.trackingContext=r,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&BI(this),Q$(a)&&this.reportExceptionInDerivation_(a.cause),Oh()}},e.reportExceptionInDerivation_=function(i){var r=this;if(this.errorHandler_){this.errorHandler_(i,this);return}if(rn.disableErrorBoundaries)throw i;var a="[mobx] uncaught error in '"+this+"'";rn.suppressReactionErrors||console.error(a,i),rn.globalReactionErrorHandlers.forEach(function(l){return l(i,r)})},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Ih(),BI(this),Oh()))},e.getDisposer_=function(i){var r=this,a=function l(){r.dispose(),i==null||i.removeEventListener==null||i.removeEventListener("abort",l)};return i==null||i.addEventListener==null||i.addEventListener("abort",a),a[Qn]=this,a},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(i){},hT(s,[{key:"isDisposed",get:function(){return kc(this.flags_,s.isDisposedMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isDisposedMask_,i)}},{key:"isScheduled",get:function(){return kc(this.flags_,s.isScheduledMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isScheduledMask_,i)}},{key:"isTrackPending",get:function(){return kc(this.flags_,s.isTrackPendingMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isTrackPendingMask_,i)}},{key:"isRunning",get:function(){return kc(this.flags_,s.isRunningMask_)},set:function(i){this.flags_=Pc(this.flags_,s.isRunningMask_,i)}},{key:"diffValue",get:function(){return kc(this.flags_,s.diffValueMask_)?1:0},set:function(i){this.flags_=Pc(this.flags_,s.diffValueMask_,i===1)}}])}();nf.isDisposedMask_=1;nf.isScheduledMask_=2;nf.isTrackPendingMask_=4;nf.isRunningMask_=8;nf.diffValueMask_=16;var a6=100,kI=function(e){return e()};function wF(){rn.inBatch>0||rn.isRunningReactions||kI(l6)}function l6(){rn.isRunningReactions=!0;for(var s=rn.pendingReactions,e=0;s.length>0;){++e===a6&&(console.error("[mobx] cycle in reaction: "+s[0]),s.splice(0));for(var n=s.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}rn.isRunningReactions=!1}var $x=Gg("Reaction",nf);function u6(s){var e=kI;kI=function(i){return s(function(){return e(i)})}}function DE(){return!1}function c6(s){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var IF="action",h6="action.bound",OF="autoAction",d6="autoAction.bound",f6="<unnamed action>",PI=CS(IF),p6=CS(h6,{bound:!0}),UI=CS(OF,{autoAction:!0}),m6=CS(d6,{autoAction:!0,bound:!0});function NF(s){var e=function(i,r){if(ef(i))return Vv(i.name||f6,i,s);if(ef(r))return Vv(i,r,s);if(xS(r))return(s?UI:PI).decorate_20223_(i,r);if(Hv(r))return $S(i,r,s?UI:PI);if(Hv(i))return _p(CS(s?OF:IF,{name:i,autoAction:s}))};return e}var Si=NF(!1);Object.assign(Si,PI);var eS=NF(!0);Object.assign(eS,UI);Si.bound=_p(p6);eS.bound=_p(m6);function tS(s){return ef(s)&&s.isMobxAction===!0}function g6(s,e){var n,i,r,a;e===void 0&&(e=oF);var l=(n=(i=e)==null?void 0:i.name)!=null?n:"Autorun",h=!e.scheduler&&!e.delay,f;if(h)f=new nf(l,function(){this.track(T)},e.onError,e.requiresObservable);else{var p=v6(e),v=!1;f=new nf(l,function(){v||(v=!0,p(function(){v=!1,f.isDisposed||f.track(T)}))},e.onError,e.requiresObservable)}function T(){s(f)}return(r=e)!=null&&(r=r.signal)!=null&&r.aborted||f.schedule_(),f.getDisposer_((a=e)==null?void 0:a.signal)}var _6=function(e){return e()};function v6(s){return s.scheduler?s.scheduler:s.delay?function(e){return setTimeout(e,s.delay)}:_6}var b6="onBO",y6="onBUO";function T6(s,e,n){return DF(b6,s,e,n)}function LF(s,e,n){return DF(y6,s,e,n)}function DF(s,e,n,i){var r=Mx(e),a=ef(i)?i:n,l=s+"L";return r[l]?r[l].add(a):r[l]=new Set([a]),function(){var h=r[l];h&&(h.delete(a),h.size===0&&delete r[l])}}var E6="never",LA="always",S6="observed";function A6(s){s.isolateGlobalState===!0&&i6();var e=s.useProxies,n=s.enforceActions;if(e!==void 0&&(rn.useProxies=e===LA?!0:e===E6?!1:typeof Proxy<"u"),e==="ifavailable"&&(rn.verifyProxies=!0),n!==void 0){var i=n===LA?LA:n===S6;rn.enforceActions=i,rn.allowStateChanges=!(i===!0||i===LA)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(r){r in s&&(rn[r]=!!s[r])}),rn.allowStateReads=!rn.observableRequiresReaction,s.reactionScheduler&&u6(s.reactionScheduler)}function $6(s,e,n,i){var r=s5(e);return nb(function(){var a=fT(s,i)[Qn];VC(r).forEach(function(l){a.extend_(l,r[l],n&&l in n?n[l]:!0)})}),s}function x6(s,e){return BF(Mx(s,e))}function BF(s){var e={name:s.name_};return s.observing_&&s.observing_.length>0&&(e.dependencies=C6(s.observing_).map(BF)),e}function C6(s){return Array.from(new Set(s))}var M6=0;function kF(){this.message="FLOW_CANCELLED"}kF.prototype=Object.create(Error.prototype);var X1=mF("flow"),R6=mF("flow.bound",{bound:!0}),Py=Object.assign(function(e,n){if(xS(n))return X1.decorate_20223_(e,n);if(Hv(n))return $S(e,n,X1);var i=e,r=i.name||"<unnamed flow>",a=function(){var h=this,f=arguments,p=++M6,v=Si(r+" - runid: "+p+" - init",i).apply(h,f),T,y=void 0,S=new Promise(function($,M){var C=0;T=M;function E(O){y=void 0;var P;try{P=Si(r+" - runid: "+p+" - yield "+C++,v.next).call(v,O)}catch(F){return M(F)}I(P)}function w(O){y=void 0;var P;try{P=Si(r+" - runid: "+p+" - yield "+C++,v.throw).call(v,O)}catch(F){return M(F)}I(P)}function I(O){if(ef(O?.then)){O.then(I,M);return}return O.done?$(O.value):(y=Promise.resolve(O.value),y.then(E,w))}E(void 0)});return S.cancel=Si(r+" - runid: "+p+" - cancel",function(){try{y&&kD(y);var $=v.return(void 0),M=Promise.resolve($.value);M.then(yy,yy),kD(M),T(new kF)}catch(C){T(C)}}),S};return a.isMobXFlow=!0,a},X1);Py.bound=_p(R6);function kD(s){ef(s.cancel)&&s.cancel()}function nS(s){return s?.isMobXFlow===!0}function w6(s,e){return s?NS(s)||!!s[Qn]||XO(s)||$x(s)||RS(s):!1}function KO(s){return w6(s)}function I6(s){if(NS(s))return s[Qn].ownKeys_();ts(38)}function DA(s,e,n){return s.set(e,n),n}function _y(s,e){if(s==null||typeof s!="object"||s instanceof Date||!KO(s))return s;if(t6(s)||RS(s))return _y(s.get(),e);if(e.has(s))return e.get(s);if(OS(s)){var n=DA(e,s,new Array(s.length));return s.forEach(function(l,h){n[h]=_y(l,e)}),n}if(Kd(s)){var i=DA(e,s,new Set);return s.forEach(function(l){i.add(_y(l,e))}),i}if(Vg(s)){var r=DA(e,s,new Map);return s.forEach(function(l,h){r.set(h,_y(l,e))}),r}else{var a=DA(e,s,{});return I6(s).forEach(function(l){AS.propertyIsEnumerable.call(s,l)&&(a[l]=_y(s[l],e))}),a}}function BE(s,e){return _y(s,new Map)}function V0(s,e){e===void 0&&(e=void 0),Ih();try{return s.apply(e)}finally{Oh()}}function Pb(s){return s[Qn]}var O6={has:function(e,n){return Pb(e).has_(n)},get:function(e,n){return Pb(e).get_(n)},set:function(e,n,i){var r;return Hv(n)?(r=Pb(e).set_(n,i,!0))!=null?r:!0:!1},deleteProperty:function(e,n){var i;return Hv(n)?(i=Pb(e).delete_(n,!0))!=null?i:!0:!1},defineProperty:function(e,n,i){var r;return(r=Pb(e).defineProperty_(n,i))!=null?r:!0},ownKeys:function(e){return Pb(e).ownKeys_()},preventExtensions:function(e){ts(13)}};function N6(s,e){var n,i;return aF(),s=fT(s,e),(i=(n=s[Qn]).proxy_)!=null?i:n.proxy_=new Proxy(s,O6)}function Ch(s){return s.interceptors_!==void 0&&s.interceptors_.length>0}function wS(s,e){var n=s.interceptors_||(s.interceptors_=[]);return n.push(e),lF(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function Mh(s,e){var n=tb();try{for(var i=[].concat(s.interceptors_||[]),r=0,a=i.length;r<a&&(e=i[r](e),e&&!e.type&&ts(14),!!e);r++);return e}finally{q0(n)}}function Jd(s){return s.changeListeners_!==void 0&&s.changeListeners_.length>0}function IS(s,e){var n=s.changeListeners_||(s.changeListeners_=[]);return n.push(e),lF(function(){var i=n.indexOf(e);i!==-1&&n.splice(i,1)})}function Zd(s,e){var n=tb(),i=s.changeListeners_;if(i){i=i.slice();for(var r=0,a=i.length;r<a;r++)i[r](e);q0(n)}}function dT(s,e,n){return nb(function(){var i,r=fT(s,n)[Qn];(i=e)!=null||(e=u5(s)),VC(e).forEach(function(a){return r.make_(a,e[a])})}),s}var PD="splice",vp="update",L6=1e4,D6={get:function(e,n){var i=e[Qn];return n===Qn?i:n==="length"?i.getArrayLength_():typeof n=="string"&&!isNaN(n)?i.get_(parseInt(n)):K0(xx,n)?xx[n]:e[n]},set:function(e,n,i){var r=e[Qn];return n==="length"&&r.setArrayLength_(i),typeof n=="symbol"||isNaN(n)?e[n]=i:r.set_(parseInt(n),i),!0},preventExtensions:function(){ts(15)}},qO=function(){function s(n,i,r,a){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=a,this.atom_=new zg(n),this.enhancer_=function(l,h){return i(l,h,"ObservableArray[..]")}}var e=s.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.dehanceValues_=function(i){return this.dehancer!==void 0&&i.length>0?i.map(this.dehancer):i},e.intercept_=function(i){return wS(this,i)},e.observe_=function(i,r){return r===void 0&&(r=!1),r&&i({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),IS(this,i)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(i){(typeof i!="number"||isNaN(i)||i<0)&&ts("Out of range: "+i);var r=this.values_.length;if(i!==r)if(i>r){for(var a=new Array(i-r),l=0;l<i-r;l++)a[l]=void 0;this.spliceWithArray_(r,0,a)}else this.spliceWithArray_(i,r-i)},e.updateArrayLength_=function(i,r){i!==this.lastKnownLength_&&ts(16),this.lastKnownLength_+=r,this.legacyMode_&&r>0&&VF(i+r+1)},e.spliceWithArray_=function(i,r,a){var l=this;this.atom_;var h=this.values_.length;if(i===void 0?i=0:i>h?i=h:i<0&&(i=Math.max(0,h+i)),arguments.length===1?r=h-i:r==null?r=0:r=Math.max(0,Math.min(r,h-i)),a===void 0&&(a=II),Ch(this)){var f=Mh(this,{object:this.proxy_,type:PD,index:i,removedCount:r,added:a});if(!f)return II;r=f.removedCount,a=f.added}if(a=a.length===0?a:a.map(function(T){return l.enhancer_(T,void 0)}),this.legacyMode_){var p=a.length-r;this.updateArrayLength_(h,p)}var v=this.spliceItemsIntoValues_(i,r,a);return(r!==0||a.length!==0)&&this.notifyArraySplice_(i,a,v),this.dehanceValues_(v)},e.spliceItemsIntoValues_=function(i,r,a){if(a.length<L6){var l;return(l=this.values_).splice.apply(l,[i,r].concat(a))}else{var h=this.values_.slice(i,i+r),f=this.values_.slice(i+r);this.values_.length+=a.length-r;for(var p=0;p<a.length;p++)this.values_[i+p]=a[p];for(var v=0;v<f.length;v++)this.values_[i+a.length+v]=f[v];return h}},e.notifyArrayChildUpdate_=function(i,r,a){var l=!this.owned_&&DE(),h=Jd(this),f=h||l?{observableKind:"array",object:this.proxy_,type:vp,debugObjectName:this.atom_.name_,index:i,newValue:r,oldValue:a}:null;this.atom_.reportChanged(),h&&Zd(this,f)},e.notifyArraySplice_=function(i,r,a){var l=!this.owned_&&DE(),h=Jd(this),f=h||l?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:PD,index:i,removed:a,added:r,removedCount:a.length,addedCount:r.length}:null;this.atom_.reportChanged(),h&&Zd(this,f)},e.get_=function(i){if(this.legacyMode_&&i>=this.values_.length){console.warn("[mobx] Out of bounds read: "+i);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[i])},e.set_=function(i,r){var a=this.values_;if(this.legacyMode_&&i>a.length&&ts(17,i,a.length),i<a.length){this.atom_;var l=a[i];if(Ch(this)){var h=Mh(this,{type:vp,object:this.proxy_,index:i,newValue:r});if(!h)return;r=h.newValue}r=this.enhancer_(r,l);var f=r!==l;f&&(a[i]=r,this.notifyArrayChildUpdate_(i,r,l))}else{for(var p=new Array(i+1-a.length),v=0;v<p.length-1;v++)p[v]=void 0;p[p.length-1]=r,this.spliceWithArray_(a.length,0,p)}},s}();function B6(s,e,n,i){return n===void 0&&(n="ObservableArray"),i===void 0&&(i=!1),aF(),nb(function(){var r=new qO(n,e,i,!1);cF(r.values_,Qn,r);var a=new Proxy(r.values_,D6);return r.proxy_=a,s&&s.length&&r.spliceWithArray_(0,0,s),a})}var xx={clear:function(){return this.splice(0)},replace:function(e){var n=this[Qn];return n.spliceWithArray_(0,n.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];var l=this[Qn];switch(arguments.length){case 0:return[];case 1:return l.spliceWithArray_(e);case 2:return l.spliceWithArray_(e,n)}return l.spliceWithArray_(e,n,r)},spliceWithArray:function(e,n,i){return this[Qn].spliceWithArray_(e,n,i)},push:function(){for(var e=this[Qn],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,i),e.values_.length},pop:function(){return this.splice(Math.max(this[Qn].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Qn],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.spliceWithArray_(0,0,i),e.values_.length},reverse:function(){return rn.trackingDerivation&&ts(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){rn.trackingDerivation&&ts(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var n=this[Qn],i=n.dehanceValues_(n.values_).indexOf(e);return i>-1?(this.splice(i,1),!0):!1}};ar("at",Xc);ar("concat",Xc);ar("flat",Xc);ar("includes",Xc);ar("indexOf",Xc);ar("join",Xc);ar("lastIndexOf",Xc);ar("slice",Xc);ar("toString",Xc);ar("toLocaleString",Xc);ar("toSorted",Xc);ar("toSpliced",Xc);ar("with",Xc);ar("every",of);ar("filter",of);ar("find",of);ar("findIndex",of);ar("findLast",of);ar("findLastIndex",of);ar("flatMap",of);ar("forEach",of);ar("map",of);ar("some",of);ar("toReversed",of);ar("reduce",PF);ar("reduceRight",PF);function ar(s,e){typeof Array.prototype[s]=="function"&&(xx[s]=e(s))}function Xc(s){return function(){var e=this[Qn];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[s].apply(n,arguments)}}function of(s){return function(e,n){var i=this,r=this[Qn];r.atom_.reportObserved();var a=r.dehanceValues_(r.values_);return a[s](function(l,h){return e.call(n,l,h,i)})}}function PF(s){return function(){var e=this,n=this[Qn];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(a,l,h){return r(a,l,h,e)},i[s].apply(i,arguments)}}var k6=Gg("ObservableArrayAdministration",qO);function OS(s){return GC(s)&&k6(s[Qn])}var P6={},xg="add",Cx="delete",UF=function(){function s(n,i,r){var a=this;i===void 0&&(i=zv),r===void 0&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Qn]=P6,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=i,this.name_=r,ef(Map)||ts(18),nb(function(){a.keysAtom_=jO("ObservableMap.keys()"),a.data_=new Map,a.hasMap_=new Map,n&&a.merge(n)})}var e=s.prototype;return e.has_=function(i){return this.data_.has(i)},e.has=function(i){var r=this;if(!rn.trackingDerivation)return this.has_(i);var a=this.hasMap_.get(i);if(!a){var l=a=new Rg(this.has_(i),WC,"ObservableMap.key?",!1);this.hasMap_.set(i,l),LF(l,function(){return r.hasMap_.delete(i)})}return a.get()},e.set=function(i,r){var a=this.has_(i);if(Ch(this)){var l=Mh(this,{type:a?vp:xg,object:this,newValue:r,name:i});if(!l)return this;r=l.newValue}return a?this.updateValue_(i,r):this.addValue_(i,r),this},e.delete=function(i){var r=this;if(this.keysAtom_,Ch(this)){var a=Mh(this,{type:Cx,object:this,name:i});if(!a)return!1}if(this.has_(i)){var l=DE(),h=Jd(this),f=h||l?{observableKind:"map",debugObjectName:this.name_,type:Cx,object:this,oldValue:this.data_.get(i).value_,name:i}:null;return V0(function(){var p;r.keysAtom_.reportChanged(),(p=r.hasMap_.get(i))==null||p.setNewValue_(!1);var v=r.data_.get(i);v.setNewValue_(void 0),r.data_.delete(i)}),h&&Zd(this,f),!0}return!1},e.updateValue_=function(i,r){var a=this.data_.get(i);if(r=a.prepareNewValue_(r),r!==rn.UNCHANGED){var l=DE(),h=Jd(this),f=h||l?{observableKind:"map",debugObjectName:this.name_,type:vp,object:this,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),h&&Zd(this,f)}},e.addValue_=function(i,r){var a=this;this.keysAtom_,V0(function(){var p,v=new Rg(r,a.enhancer_,"ObservableMap.key",!1);a.data_.set(i,v),r=v.value_,(p=a.hasMap_.get(i))==null||p.setNewValue_(!0),a.keysAtom_.reportChanged()});var l=DE(),h=Jd(this),f=h||l?{observableKind:"map",debugObjectName:this.name_,type:xg,object:this,name:i,newValue:r}:null;h&&Zd(this,f)},e.get=function(i){return this.has(i)?this.dehanceValue_(this.data_.get(i).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var i=this,r=this.keys();return UD({next:function(){var l=r.next(),h=l.done,f=l.value;return{done:h,value:h?void 0:i.get(f)}}})},e.entries=function(){var i=this,r=this.keys();return UD({next:function(){var l=r.next(),h=l.done,f=l.value;return{done:h,value:h?void 0:[f,i.get(f)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(i,r){for(var a=Ty(this),l;!(l=a()).done;){var h=l.value,f=h[0],p=h[1];i.call(r,p,f,this)}},e.merge=function(i){var r=this;return Vg(i)&&(i=new Map(i)),V0(function(){Lg(i)?i5(i).forEach(function(a){return r.set(a,i[a])}):Array.isArray(i)?i.forEach(function(a){var l=a[0],h=a[1];return r.set(l,h)}):cT(i)?(n5(i)||ts(19,i),i.forEach(function(a,l){return r.set(l,a)})):i!=null&&ts(20,i)}),this},e.clear=function(){var i=this;V0(function(){SF(function(){for(var r=Ty(i.keys()),a;!(a=r()).done;){var l=a.value;i.delete(l)}})})},e.replace=function(i){var r=this;return V0(function(){for(var a=U6(i),l=new Map,h=!1,f=Ty(r.data_.keys()),p;!(p=f()).done;){var v=p.value;if(!a.has(v)){var T=r.delete(v);if(T)h=!0;else{var y=r.data_.get(v);l.set(v,y)}}}for(var S=Ty(a.entries()),$;!($=S()).done;){var M=$.value,C=M[0],E=M[1],w=r.data_.has(C);if(r.set(C,E),r.data_.has(C)){var I=r.data_.get(C);l.set(C,I),w||(h=!0)}}if(!h)if(r.data_.size!==l.size)r.keysAtom_.reportChanged();else for(var O=r.data_.keys(),P=l.keys(),F=O.next(),V=P.next();!F.done;){if(F.value!==V.value){r.keysAtom_.reportChanged();break}F=O.next(),V=P.next()}r.data_=l}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(i,r){return IS(this,i)},e.intercept_=function(i){return wS(this,i)},hT(s,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Vg=Gg("ObservableMap",UF);function UD(s){return s[Symbol.toStringTag]="MapIterator",ZO(s)}function U6(s){if(cT(s)||Vg(s))return s;if(Array.isArray(s))return new Map(s);if(Lg(s)){var e=new Map;for(var n in s)e.set(n,s[n]);return e}else return ts(21,s)}var F6={},FF=function(){function s(n,i,r){var a=this;i===void 0&&(i=zv),r===void 0&&(r="ObservableSet"),this.name_=void 0,this[Qn]=F6,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,ef(Set)||ts(22),this.enhancer_=function(l,h){return i(l,h,r)},nb(function(){a.atom_=jO(a.name_),n&&a.replace(n)})}var e=s.prototype;return e.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.clear=function(){var i=this;V0(function(){SF(function(){for(var r=Ty(i.data_.values()),a;!(a=r()).done;){var l=a.value;i.delete(l)}})})},e.forEach=function(i,r){for(var a=Ty(this),l;!(l=a()).done;){var h=l.value;i.call(r,h,h,this)}},e.add=function(i){var r=this;if(this.atom_,Ch(this)){var a=Mh(this,{type:xg,object:this,newValue:i});if(!a)return this;i=a.newValue}if(!this.has(i)){V0(function(){r.data_.add(r.enhancer_(i,void 0)),r.atom_.reportChanged()});var l=!1,h=Jd(this),f=h||l?{observableKind:"set",debugObjectName:this.name_,type:xg,object:this,newValue:i}:null;h&&Zd(this,f)}return this},e.delete=function(i){var r=this;if(Ch(this)){var a=Mh(this,{type:Cx,object:this,oldValue:i});if(!a)return!1}if(this.has(i)){var l=!1,h=Jd(this),f=h||l?{observableKind:"set",debugObjectName:this.name_,type:Cx,object:this,oldValue:i}:null;return V0(function(){r.atom_.reportChanged(),r.data_.delete(i)}),h&&Zd(this,f),!0}return!1},e.has=function(i){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(i))},e.entries=function(){var i=this.values();return FD({next:function(){var a=i.next(),l=a.value,h=a.done;return h?{value:void 0,done:h}:{value:[l,l],done:h}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var i=this,r=this.data_.values();return FD({next:function(){var l=r.next(),h=l.value,f=l.done;return f?{value:void 0,done:f}:{value:i.dehanceValue_(h),done:f}}})},e.intersection=function(i){if(z0(i)&&!Kd(i))return i.intersection(this);var r=new Set(this);return r.intersection(i)},e.union=function(i){if(z0(i)&&!Kd(i))return i.union(this);var r=new Set(this);return r.union(i)},e.difference=function(i){return new Set(this).difference(i)},e.symmetricDifference=function(i){if(z0(i)&&!Kd(i))return i.symmetricDifference(this);var r=new Set(this);return r.symmetricDifference(i)},e.isSubsetOf=function(i){return new Set(this).isSubsetOf(i)},e.isSupersetOf=function(i){return new Set(this).isSupersetOf(i)},e.isDisjointFrom=function(i){if(z0(i)&&!Kd(i))return i.isDisjointFrom(this);var r=new Set(this);return r.isDisjointFrom(i)},e.replace=function(i){var r=this;return Kd(i)&&(i=new Set(i)),V0(function(){Array.isArray(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):z0(i)?(r.clear(),i.forEach(function(a){return r.add(a)})):i!=null&&ts("Cannot initialize set from "+i)}),this},e.observe_=function(i,r){return IS(this,i)},e.intercept_=function(i){return wS(this,i)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},hT(s,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Kd=Gg("ObservableSet",FF);function FD(s){return s[Symbol.toStringTag]="SetIterator",ZO(s)}var HD=Object.create(null),GD="remove",HF=function(){function s(n,i,r,a){i===void 0&&(i=new Map),a===void 0&&(a=N5),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=i,this.name_=r,this.defaultAnnotation_=a,this.keysAtom_=new zg("ObservableObject.keys"),this.isPlainObject_=Lg(this.target_)}var e=s.prototype;return e.getObservablePropValue_=function(i){return this.values_.get(i).get()},e.setObservablePropValue_=function(i,r){var a=this.values_.get(i);if(a instanceof tf)return a.set(r),!0;if(Ch(this)){var l=Mh(this,{type:vp,object:this.proxy_||this.target_,name:i,newValue:r});if(!l)return null;r=l.newValue}if(r=a.prepareNewValue_(r),r!==rn.UNCHANGED){var h=Jd(this),f=!1,p=h||f?{type:vp,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:a.value_,name:i,newValue:r}:null;a.setNewValue_(r),h&&Zd(this,p)}return!0},e.get_=function(i){return rn.trackingDerivation&&!K0(this.target_,i)&&this.has_(i),this.target_[i]},e.set_=function(i,r,a){return a===void 0&&(a=!1),K0(this.target_,i)?this.values_.has(i)?this.setObservablePropValue_(i,r):a?Reflect.set(this.target_,i,r):(this.target_[i]=r,!0):this.extend_(i,{value:r,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,a)},e.has_=function(i){if(!rn.trackingDerivation)return i in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var r=this.pendingKeys_.get(i);return r||(r=new Rg(i in this.target_,WC,"ObservableObject.key?",!1),this.pendingKeys_.set(i,r)),r.get()},e.make_=function(i,r){if(r===!0&&(r=this.defaultAnnotation_),r!==!1){if(!(i in this.target_)){var a;if((a=this.target_[pp])!=null&&a[i])return;ts(1,r.annotationType_,this.name_+"."+i.toString())}for(var l=this.target_;l&&l!==AS;){var h=yx(l,i);if(h){var f=r.make_(this,i,h,l);if(f===0)return;if(f===1)break}l=Object.getPrototypeOf(l)}VD(this,r,i)}},e.extend_=function(i,r,a,l){if(l===void 0&&(l=!1),a===!0&&(a=this.defaultAnnotation_),a===!1)return this.defineProperty_(i,r,l);var h=a.extend_(this,i,r,l);return h&&VD(this,a,i),h},e.defineProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Ih();var l=this.delete_(i);if(!l)return l;if(Ch(this)){var h=Mh(this,{object:this.proxy_||this.target_,name:i,type:xg,newValue:r.value});if(!h)return null;var f=h.newValue;r.value!==f&&(r=Gv({},r,{value:f}))}if(a){if(!Reflect.defineProperty(this.target_,i,r))return!1}else gp(this.target_,i,r);this.notifyPropertyAddition_(i,r.value)}finally{Oh()}return!0},e.defineObservableProperty_=function(i,r,a,l){l===void 0&&(l=!1),this.keysAtom_;try{Ih();var h=this.delete_(i);if(!h)return h;if(Ch(this)){var f=Mh(this,{object:this.proxy_||this.target_,name:i,type:xg,newValue:r});if(!f)return null;r=f.newValue}var p=zD(i),v={configurable:rn.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:p.get,set:p.set};if(l){if(!Reflect.defineProperty(this.target_,i,v))return!1}else gp(this.target_,i,v);var T=new Rg(r,a,"ObservableObject.key",!1);this.values_.set(i,T),this.notifyPropertyAddition_(i,T.value_)}finally{Oh()}return!0},e.defineComputedProperty_=function(i,r,a){a===void 0&&(a=!1),this.keysAtom_;try{Ih();var l=this.delete_(i);if(!l)return l;if(Ch(this)){var h=Mh(this,{object:this.proxy_||this.target_,name:i,type:xg,newValue:void 0});if(!h)return null}r.name||(r.name="ObservableObject.key"),r.context=this.proxy_||this.target_;var f=zD(i),p={configurable:rn.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(a){if(!Reflect.defineProperty(this.target_,i,p))return!1}else gp(this.target_,i,p);this.values_.set(i,new tf(r)),this.notifyPropertyAddition_(i,void 0)}finally{Oh()}return!0},e.delete_=function(i,r){if(r===void 0&&(r=!1),this.keysAtom_,!K0(this.target_,i))return!0;if(Ch(this)){var a=Mh(this,{object:this.proxy_||this.target_,name:i,type:GD});if(!a)return null}try{var l;Ih();var h=Jd(this),f=!1,p=this.values_.get(i),v=void 0;if(!p&&(h||f)){var T;v=(T=yx(this.target_,i))==null?void 0:T.value}if(r){if(!Reflect.deleteProperty(this.target_,i))return!1}else delete this.target_[i];if(p&&(this.values_.delete(i),p instanceof Rg&&(v=p.value_),RF(p)),this.keysAtom_.reportChanged(),(l=this.pendingKeys_)==null||(l=l.get(i))==null||l.set(i in this.target_),h||f){var y={type:GD,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:v,name:i};h&&Zd(this,y)}}finally{Oh()}return!0},e.observe_=function(i,r){return IS(this,i)},e.intercept_=function(i){return wS(this,i)},e.notifyPropertyAddition_=function(i,r){var a,l=Jd(this),h=!1;if(l||h){var f=l||h?{type:xg,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:i,newValue:r}:null;l&&Zd(this,f)}(a=this.pendingKeys_)==null||(a=a.get(i))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),VC(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},s}();function fT(s,e){var n;if(K0(s,Qn))return s;var i=(n=e?.name)!=null?n:"ObservableObject",r=new HF(s,new Map,String(i),V5(e));return zC(s,Qn,r),s}var H6=Gg("ObservableObjectAdministration",HF);function zD(s){return HD[s]||(HD[s]={get:function(){return this[Qn].getObservablePropValue_(s)},set:function(n){return this[Qn].setObservablePropValue_(s,n)}})}function NS(s){return GC(s)?H6(s[Qn]):!1}function VD(s,e,n){var i;(i=s.target_[pp])==null||delete i[n]}var G6=zF(0),z6=function(){var s=!1,e={};return Object.defineProperty(e,"0",{set:function(){s=!0}}),Object.create(e)[0]=1,s===!1}(),j1=0,GF=function(){};function V6(s,e){Object.setPrototypeOf?Object.setPrototypeOf(s.prototype,e):s.prototype.__proto__!==void 0?s.prototype.__proto__=e:s.prototype=e}V6(GF,Array.prototype);var JO=function(s){function e(i,r,a,l){var h;return a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),h=s.call(this)||this,nb(function(){var f=new qO(a,r,l,!0);f.proxy_=h,cF(h,Qn,f),i&&i.length&&h.spliceWithArray(0,0,i),z6&&Object.defineProperty(h,"0",G6)}),h}fF(e,s);var n=e.prototype;return n.concat=function(){this[Qn].atom_.reportObserved();for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(h){return OS(h)?h.slice():h}))},n[Symbol.iterator]=function(){var i=this,r=0;return ZO({next:function(){return r<i.length?{value:i[r++],done:!1}:{done:!0,value:void 0}}})},hT(e,[{key:"length",get:function(){return this[Qn].getArrayLength_()},set:function(r){this[Qn].setArrayLength_(r)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(GF);Object.entries(xx).forEach(function(s){var e=s[0],n=s[1];e!=="concat"&&zC(JO.prototype,e,n)});function zF(s){return{enumerable:!1,configurable:!0,get:function(){return this[Qn].get_(s)},set:function(n){this[Qn].set_(s,n)}}}function W6(s){gp(JO.prototype,""+s,zF(s))}function VF(s){if(s>j1){for(var e=j1;e<s+100;e++)W6(e);j1=s}}VF(1e3);function X6(s,e,n){return new JO(s,e,n)}function Mx(s,e){if(typeof s=="object"&&s!==null){if(OS(s))return e!==void 0&&ts(23),s[Qn].atom_;if(Kd(s))return s.atom_;if(Vg(s)){if(e===void 0)return s.keysAtom_;var n=s.data_.get(e)||s.hasMap_.get(e);return n||ts(25,e,FI(s)),n}if(NS(s)){if(!e)return ts(26);var i=s[Qn].values_.get(e);return i||ts(27,e,FI(s)),i}if(XO(s)||RS(s)||$x(s))return s}else if(ef(s)&&$x(s[Qn]))return s[Qn];ts(28)}function j6(s,e){if(s||ts(29),XO(s)||RS(s)||$x(s)||Vg(s)||Kd(s))return s;if(s[Qn])return s[Qn];ts(24,s)}function FI(s,e){var n;if(e!==void 0)n=Mx(s,e);else{if(tS(s))return s.name;NS(s)||Vg(s)||Kd(s)?n=j6(s):n=Mx(s)}return n.name_}function nb(s){var e=tb(),n=jC(!0);Ih();try{return s()}finally{Oh(),YC(n),q0(e)}}var WD=AS.toString;function WF(s,e,n){return n===void 0&&(n=-1),HI(s,e,n)}function HI(s,e,n,i,r){if(s===e)return s!==0||1/s===1/e;if(s==null||e==null)return!1;if(s!==s)return e!==e;var a=typeof s;if(a!=="function"&&a!=="object"&&typeof e!="object")return!1;var l=WD.call(s);if(l!==WD.call(e))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+s==""+e;case"[object Number]":return+s!=+s?+e!=+e:+s==0?1/+s===1/e:+s==+e;case"[object Date]":case"[object Boolean]":return+s==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(s)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}s=XD(s),e=XD(e);var h=l==="[object Array]";if(!h){if(typeof s!="object"||typeof e!="object")return!1;var f=s.constructor,p=e.constructor;if(f!==p&&!(ef(f)&&f instanceof f&&ef(p)&&p instanceof p)&&"constructor"in s&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),i=i||[],r=r||[];for(var v=i.length;v--;)if(i[v]===s)return r[v]===e;if(i.push(s),r.push(e),h){if(v=s.length,v!==e.length)return!1;for(;v--;)if(!HI(s[v],e[v],n-1,i,r))return!1}else{var T=Object.keys(s),y=T.length;if(Object.keys(e).length!==y)return!1;for(var S=0;S<y;S++){var $=T[S];if(!(K0(e,$)&&HI(s[$],e[$],n-1,i,r)))return!1}}return i.pop(),r.pop(),!0}function XD(s){return OS(s)?s.slice():cT(s)||Vg(s)||z0(s)||Kd(s)?Array.from(s.entries()):s}var jD,Y6=((jD=HC().Iterator)==null?void 0:jD.prototype)||{};function ZO(s){return s[Symbol.iterator]=K6,Object.assign(Object.create(Y6),s)}function K6(){return this}["Symbol","Map","Set"].forEach(function(s){var e=HC();typeof e[s]>"u"&&ts("MobX requires global '"+s+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:c6,extras:{getDebugName:FI},$mobx:Qn});if(!Q.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!dT)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var QO=sF();const BA=Mp(QO);function q6(s){s()}function J6(s){s||(s=q6),A6({reactionScheduler:s})}function Z6(s){return x6(s)}var Q6=1e4,e8=1e4,t8=function(){function s(e){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(i){i===void 0&&(i=Q6),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var r=Date.now();n.registrations.forEach(function(a,l){r-a.registeredAt>=i&&(n.finalize(a.value),n.registrations.delete(l))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(s.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n,i){this.registrations.set(i,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(s.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(s.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,e8))}}),s}(),n8=typeof FinalizationRegistry<"u"?FinalizationRegistry:t8,GI=new n8(function(s){var e;(e=s.reaction)===null||e===void 0||e.dispose(),s.reaction=null}),YD=function(s,e){var n=typeof Symbol=="function"&&s[Symbol.iterator];if(!n)return s;var i=n.call(s),r,a=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(h){l={error:h}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a};function KD(s){return"observer".concat(s)}var i8=function(){function s(){}return s}();function s8(){return new i8}function r8(s,e){e===void 0&&(e="observed");var n=YD(Un.useState(s8),1),i=n[0],r=YD(Un.useState(),2),a=r[1],l=function(){return a([])},h=Un.useRef(null);h.current||(h.current={reaction:null,mounted:!1,changedBeforeMount:!1});var f=h.current;f.reaction||(f.reaction=new nf(KD(e),function(){f.mounted?l():f.changedBeforeMount=!0}),GI.register(i,f,f)),Un.useDebugValue(f.reaction,Z6),Un.useEffect(function(){return GI.unregister(f),f.mounted=!0,f.reaction?f.changedBeforeMount&&(f.changedBeforeMount=!1,l()):(f.reaction=new nf(KD(e),function(){l()}),l()),function(){f.reaction.dispose(),f.reaction=null,f.mounted=!1,f.changedBeforeMount=!1}},[]);var p,v;if(f.reaction.track(function(){try{p=s()}catch(T){v=T}}),v)throw v;return p}var XF=typeof Symbol=="function"&&Symbol.for,qD=XF?Symbol.for("react.forward_ref"):typeof Q.forwardRef=="function"&&Q.forwardRef(function(s){return null}).$$typeof,JD=XF?Symbol.for("react.memo"):typeof Q.memo=="function"&&Q.memo(function(s){return null}).$$typeof;function o8(s,e){var n;if(JD&&s.$$typeof===JD)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=(n=void 0)!==null&&n!==void 0?n:!1,r=s,a=s.displayName||s.name;if(qD&&s.$$typeof===qD&&(i=!0,r=s.render,typeof r!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var l=function(h,f){return r8(function(){return r(h,f)},a)};return a!==""&&(l.displayName=a),s.contextTypes&&(l.contextTypes=s.contextTypes),i&&(l=Q.forwardRef(l)),l=Q.memo(l),l8(s,l),l}var a8={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function l8(s,e){Object.keys(s).forEach(function(n){a8[n]||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}var Y1;J6(QO.unstable_batchedUpdates);Y1=GI.finalizeAllImmediately;var ZD=0;function u8(s){if(typeof Symbol=="function")return Symbol(s);var e="__$mobx-react "+s+" ("+ZD+")";return ZD++,e}var K1={};function Dg(s){return K1[s]||(K1[s]=u8(s)),K1[s]}function jF(s,e){if(QD(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var n=Object.keys(s),i=Object.keys(e);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!Object.hasOwnProperty.call(e,n[r])||!QD(s[n[r]],e[n[r]]))return!1;return!0}function QD(s,e){return s===e?s!==0||1/s===1/e:s!==s&&e!==e}function W0(s,e,n){Object.hasOwnProperty.call(s,e)?s[e]=n:Object.defineProperty(s,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}var eB=Dg("patchMixins"),YF=Dg("patchedDefinition");function c8(s,e){var n=s[eB]=s[eB]||{},i=n[e]=n[e]||{};return i.locks=i.locks||0,i.methods=i.methods||[],i}function tB(s,e){for(var n=this,i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];e.locks++;try{var l;return s!=null&&(l=s.apply(this,r)),l}finally{e.locks--,e.locks===0&&e.methods.forEach(function(h){h.apply(n,r)})}}function nB(s,e){var n=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];tB.call.apply(tB,[this,s,e].concat(a))};return n}function iB(s,e,n){var i=c8(s,e);i.methods.indexOf(n)<0&&i.methods.push(n);var r=Object.getOwnPropertyDescriptor(s,e);if(!(r&&r[YF])){var a=s[e],l=KF(s,e,r?r.enumerable:void 0,i,a);Object.defineProperty(s,e,l)}}function KF(s,e,n,i,r){var a,l=nB(r,i);return a={},a[YF]=!0,a.get=function(){return l},a.set=function(f){if(this===s)l=nB(f,i);else{var p=KF(this,e,n,i,f);Object.defineProperty(this,e,p)}},a.configurable=!0,a.enumerable=n,a}var Cy=Qn||"$mobx",sB=Dg("isMobXReactObserver"),zI=Dg("isUnmounted"),Rx=Dg("skipRender"),nx=Dg("isForcingUpdate");function h8(s){var e=s.prototype;if(s[sB]){var n=ix(e);console.warn("The provided component class ("+n+`)
                has already been declared as an observer component.`)}else s[sB]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(s.__proto__!==Q.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=rB;else if(e.shouldComponentUpdate!==rB)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}q1(e,"props"),q1(e,"state"),s.contextType&&q1(e,"context");var i=e.render;if(typeof i!="function"){var r=ix(e);throw new Error("[mobx-react] class component ("+r+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return e.render=function(){return this.render=d8.call(this,i),this.render()},iB(e,"componentDidMount",function(){this[zI]=!1,this.render[Cy]||Q.Component.prototype.forceUpdate.call(this)}),iB(e,"componentWillUnmount",function(){var a=this.render[Cy];if(a)a.dispose(),this.render[Cy]=null;else{var l=ix(this);console.warn("The reactive render of an observer class component ("+l+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[zI]=!0}),s}function ix(s){return s.displayName||s.name||s.constructor&&(s.constructor.displayName||s.constructor.name)||"<component>"}function d8(s){var e=this;W0(this,Rx,!1),W0(this,nx,!1);var n=ix(this),i=s.bind(this),r=!1,a=function(){var f=new nf(n+".render()",function(){if(!r&&(r=!0,e[zI]!==!0)){var p=!0;try{W0(e,nx,!0),e[Rx]||Q.Component.prototype.forceUpdate.call(e),p=!1}finally{W0(e,nx,!1),p&&(f.dispose(),e.render[Cy]=null)}}});return f.reactComponent=e,f};function l(){var h;r=!1;var f=(h=l[Cy])!=null?h:l[Cy]=a(),p=void 0,v=void 0;if(f.track(function(){try{v=e6(!1,i)}catch(T){p=T}}),p)throw p;return v}return l}function rB(s,e){return this.state!==e?!0:!jF(this.props,s)}function q1(s,e){var n=Dg("reactProp_"+e+"_valueHolder"),i=Dg("reactProp_"+e+"_atomHolder");function r(){return this[i]||W0(this,i,jO("reactive "+e)),this[i]}Object.defineProperty(s,e,{configurable:!0,enumerable:!0,get:function(){var l=!1;return xy&&wg&&(l=xy(!0)),r.call(this).reportObserved(),xy&&wg&&wg(l),this[n]},set:function(l){!this[nx]&&!jF(this[n],l)?(W0(this,n,l),W0(this,Rx,!0),r.call(this).reportChanged(),W0(this,Rx,!1)):W0(this,n,l)}})}function rm(s){return s.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(Q.Component,s)||Object.prototype.isPrototypeOf.call(Q.PureComponent,s)?h8(s):o8(s)}if(!Q.Component)throw new Error("mobx-react requires React to be available");if(!li)throw new Error("mobx-react requires mobx to be available");/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const LS="178",bv={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yv={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},qF=0,VI=1,JF=2,f8=3,ZF=0,KC=1,kE=2,jd=3,Ap=0,hu=1,Rh=2,bp=0,Bv=1,WI=2,XI=3,jI=4,QF=5,$g=100,eH=101,tH=102,nH=103,iH=104,sH=200,rH=201,oH=202,aH=203,wx=204,Ix=205,lH=206,uH=207,cH=208,hH=209,dH=210,fH=211,pH=212,mH=213,gH=214,Ox=0,Nx=1,Lx=2,Wv=3,Dx=4,Bx=5,kx=6,Px=7,DS=0,_H=1,vH=2,yp=0,bH=1,yH=2,TH=3,e2=4,EH=5,SH=6,AH=7,YI="attached",$H="detached",Bg=300,$p=301,kg=302,Uy=303,iS=304,pT=306,Pg=1e3,co=1001,Fy=1002,Ta=1003,qC=1004,p8=1004,Cv=1005,m8=1005,us=1006,My=1007,g8=1007,Nh=1008,KI=1008,fu=1009,JC=1010,ZC=1011,Hy=1012,BS=1013,xp=1014,Rr=1015,ea=1016,QC=1017,eM=1018,Gy=1020,t2=35902,n2=1021,i2=1022,ho=1023,zy=1026,Vy=1027,kS=1028,PS=1029,s2=1030,tM=1031,_8=1032,nM=1033,PE=33776,UE=33777,FE=33778,HE=33779,Ux=35840,Fx=35841,Hx=35842,Gx=35843,zx=36196,Vx=37492,Wx=37496,Xx=37808,jx=37809,Yx=37810,Kx=37811,qx=37812,Jx=37813,Zx=37814,Qx=37815,eC=37816,tC=37817,nC=37818,iC=37819,sC=37820,rC=37821,GE=36492,oC=36494,aC=36495,r2=36283,lC=36284,uC=36285,cC=36286,xH=2200,CH=2201,MH=2202,Wy=2300,Xy=2301,sx=2302,Mv=2400,Rv=2401,sS=2402,iM=2500,o2=2501,RH=0,a2=1,hC=2,wH=3200,IH=3201,v8=3202,b8=3203,Wg=0,OH=1,X0="",Wa="srgb",sf="srgb-linear",rS="linear",Ls="srgb",y8=0,Tv=7680,T8=7681,E8=7682,S8=7683,A8=34055,$8=34056,x8=5386,C8=512,M8=513,R8=514,w8=515,I8=516,O8=517,N8=518,qI=519,NH=512,LH=513,DH=514,l2=515,BH=516,kH=517,PH=518,UH=519,oS=35044,L8=35048,D8=35040,B8=35045,k8=35049,P8=35041,U8=35046,F8=35050,H8=35042,G8="100",JI="300 es",Lh=2e3,aS=2001,z8={COMPUTE:"compute",RENDER:"render"},V8={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},W8={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Rp=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,l=r.length;a<l;a++)r[a].call(this,e);e.target=null}}};const $l=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let oB=1234567;const kv=Math.PI/180,jy=180/Math.PI;function Fc(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return($l[s&255]+$l[s>>8&255]+$l[s>>16&255]+$l[s>>24&255]+"-"+$l[e&255]+$l[e>>8&255]+"-"+$l[e>>16&15|64]+$l[e>>24&255]+"-"+$l[n&63|128]+$l[n>>8&255]+"-"+$l[n>>16&255]+$l[n>>24&255]+$l[i&255]+$l[i>>8&255]+$l[i>>16&255]+$l[i>>24&255]).toLowerCase()}function ai(s,e,n){return Math.max(e,Math.min(n,s))}function u2(s,e){return(s%e+e)%e}function X8(s,e,n,i,r){return i+(s-e)*(r-i)/(n-e)}function j8(s,e,n){return s!==e?(n-s)/(e-s):0}function zE(s,e,n){return(1-n)*s+n*e}function Y8(s,e,n,i){return zE(s,e,1-Math.exp(-n*i))}function K8(s,e=1){return e-Math.abs(u2(s,e*2)-e)}function q8(s,e,n){return s<=e?0:s>=n?1:(s=(s-e)/(n-e),s*s*(3-2*s))}function J8(s,e,n){return s<=e?0:s>=n?1:(s=(s-e)/(n-e),s*s*s*(s*(s*6-15)+10))}function Z8(s,e){return s+Math.floor(Math.random()*(e-s+1))}function Q8(s,e){return s+Math.random()*(e-s)}function eW(s){return s*(.5-Math.random())}function tW(s){s!==void 0&&(oB=s);let e=oB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function nW(s){return s*kv}function iW(s){return s*jy}function sW(s){return(s&s-1)===0&&s!==0}function rW(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function oW(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function aW(s,e,n,i,r){const a=Math.cos,l=Math.sin,h=a(n/2),f=l(n/2),p=a((e+i)/2),v=l((e+i)/2),T=a((e-i)/2),y=l((e-i)/2),S=a((i-e)/2),$=l((i-e)/2);switch(r){case"XYX":s.set(h*v,f*T,f*y,h*p);break;case"YZY":s.set(f*y,h*v,f*T,h*p);break;case"ZXZ":s.set(f*T,f*y,h*v,h*p);break;case"XZX":s.set(h*v,f*$,f*S,h*p);break;case"YXY":s.set(f*S,h*v,f*$,h*p);break;case"ZYZ":s.set(f*$,f*S,h*v,h*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function cu(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function pi(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const c2={DEG2RAD:kv,RAD2DEG:jy,generateUUID:Fc,clamp:ai,euclideanModulo:u2,mapLinear:X8,inverseLerp:j8,lerp:zE,damp:Y8,pingpong:K8,smoothstep:q8,smootherstep:J8,randInt:Z8,randFloat:Q8,randFloatSpread:eW,seededRandom:tW,degToRad:nW,radToDeg:iW,isPowerOfTwo:sW,ceilPowerOfTwo:rW,floorPowerOfTwo:oW,setQuaternionFromProperEuler:aW,normalize:pi,denormalize:cu};class It{constructor(e=0,n=0){It.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=ai(this.x,e.x,n.x),this.y=ai(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=ai(this.x,e,n),this.y=ai(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ai(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(ai(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,l=this.y-e.y;return this.x=a*i-l*r+e.x,this.y=a*r+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Mo{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,a,l,h){let f=i[r+0],p=i[r+1],v=i[r+2],T=i[r+3];const y=a[l+0],S=a[l+1],$=a[l+2],M=a[l+3];if(h===0){e[n+0]=f,e[n+1]=p,e[n+2]=v,e[n+3]=T;return}if(h===1){e[n+0]=y,e[n+1]=S,e[n+2]=$,e[n+3]=M;return}if(T!==M||f!==y||p!==S||v!==$){let C=1-h;const E=f*y+p*S+v*$+T*M,w=E>=0?1:-1,I=1-E*E;if(I>Number.EPSILON){const P=Math.sqrt(I),F=Math.atan2(P,E*w);C=Math.sin(C*F)/P,h=Math.sin(h*F)/P}const O=h*w;if(f=f*C+y*O,p=p*C+S*O,v=v*C+$*O,T=T*C+M*O,C===1-h){const P=1/Math.sqrt(f*f+p*p+v*v+T*T);f*=P,p*=P,v*=P,T*=P}}e[n]=f,e[n+1]=p,e[n+2]=v,e[n+3]=T}static multiplyQuaternionsFlat(e,n,i,r,a,l){const h=i[r],f=i[r+1],p=i[r+2],v=i[r+3],T=a[l],y=a[l+1],S=a[l+2],$=a[l+3];return e[n]=h*$+v*T+f*S-p*y,e[n+1]=f*$+v*y+p*T-h*S,e[n+2]=p*$+v*S+h*y-f*T,e[n+3]=v*$-h*T-f*y-p*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,a=e._z,l=e._order,h=Math.cos,f=Math.sin,p=h(i/2),v=h(r/2),T=h(a/2),y=f(i/2),S=f(r/2),$=f(a/2);switch(l){case"XYZ":this._x=y*v*T+p*S*$,this._y=p*S*T-y*v*$,this._z=p*v*$+y*S*T,this._w=p*v*T-y*S*$;break;case"YXZ":this._x=y*v*T+p*S*$,this._y=p*S*T-y*v*$,this._z=p*v*$-y*S*T,this._w=p*v*T+y*S*$;break;case"ZXY":this._x=y*v*T-p*S*$,this._y=p*S*T+y*v*$,this._z=p*v*$+y*S*T,this._w=p*v*T-y*S*$;break;case"ZYX":this._x=y*v*T-p*S*$,this._y=p*S*T+y*v*$,this._z=p*v*$-y*S*T,this._w=p*v*T+y*S*$;break;case"YZX":this._x=y*v*T+p*S*$,this._y=p*S*T+y*v*$,this._z=p*v*$-y*S*T,this._w=p*v*T-y*S*$;break;case"XZY":this._x=y*v*T-p*S*$,this._y=p*S*T-y*v*$,this._z=p*v*$+y*S*T,this._w=p*v*T+y*S*$;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],l=n[1],h=n[5],f=n[9],p=n[2],v=n[6],T=n[10],y=i+h+T;if(y>0){const S=.5/Math.sqrt(y+1);this._w=.25/S,this._x=(v-f)*S,this._y=(a-p)*S,this._z=(l-r)*S}else if(i>h&&i>T){const S=2*Math.sqrt(1+i-h-T);this._w=(v-f)/S,this._x=.25*S,this._y=(r+l)/S,this._z=(a+p)/S}else if(h>T){const S=2*Math.sqrt(1+h-i-T);this._w=(a-p)/S,this._x=(r+l)/S,this._y=.25*S,this._z=(f+v)/S}else{const S=2*Math.sqrt(1+T-i-h);this._w=(l-r)/S,this._x=(a+p)/S,this._y=(f+v)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ai(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,l=e._w,h=n._x,f=n._y,p=n._z,v=n._w;return this._x=i*v+l*h+r*p-a*f,this._y=r*v+l*f+a*h-i*p,this._z=a*v+l*p+i*f-r*h,this._w=l*v-i*h-r*f-a*p,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,l=this._w;let h=l*e._w+i*e._x+r*e._y+a*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=l,this._x=i,this._y=r,this._z=a,this;const f=1-h*h;if(f<=Number.EPSILON){const S=1-n;return this._w=S*l+n*this._w,this._x=S*i+n*this._x,this._y=S*r+n*this._y,this._z=S*a+n*this._z,this.normalize(),this}const p=Math.sqrt(f),v=Math.atan2(p,h),T=Math.sin((1-n)*v)/p,y=Math.sin(n*v)/p;return this._w=l*T+this._w*y,this._x=i*T+this._x*y,this._y=r*T+this._y*y,this._z=a*T+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class be{constructor(e=0,n=0,i=0){be.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(aB.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(aB.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,l=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*l,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*l,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*l,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,l=e.y,h=e.z,f=e.w,p=2*(l*r-h*i),v=2*(h*n-a*r),T=2*(a*i-l*n);return this.x=n+f*p+l*T-h*v,this.y=i+f*v+h*p-a*T,this.z=r+f*T+a*v-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=ai(this.x,e.x,n.x),this.y=ai(this.y,e.y,n.y),this.z=ai(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=ai(this.x,e,n),this.y=ai(this.y,e,n),this.z=ai(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ai(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,l=n.x,h=n.y,f=n.z;return this.x=r*f-a*h,this.y=a*l-i*f,this.z=i*h-r*l,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return J1.copy(this).projectOnVector(e),this.sub(J1)}reflect(e){return this.sub(J1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(ai(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const J1=new be,aB=new Mo;class ci{constructor(e,n,i,r,a,l,h,f,p){ci.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,l,h,f,p)}set(e,n,i,r,a,l,h,f,p){const v=this.elements;return v[0]=e,v[1]=r,v[2]=h,v[3]=n,v[4]=a,v[5]=f,v[6]=i,v[7]=l,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,l=i[0],h=i[3],f=i[6],p=i[1],v=i[4],T=i[7],y=i[2],S=i[5],$=i[8],M=r[0],C=r[3],E=r[6],w=r[1],I=r[4],O=r[7],P=r[2],F=r[5],V=r[8];return a[0]=l*M+h*w+f*P,a[3]=l*C+h*I+f*F,a[6]=l*E+h*O+f*V,a[1]=p*M+v*w+T*P,a[4]=p*C+v*I+T*F,a[7]=p*E+v*O+T*V,a[2]=y*M+S*w+$*P,a[5]=y*C+S*I+$*F,a[8]=y*E+S*O+$*V,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],l=e[4],h=e[5],f=e[6],p=e[7],v=e[8];return n*l*v-n*h*p-i*a*v+i*h*f+r*a*p-r*l*f}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],l=e[4],h=e[5],f=e[6],p=e[7],v=e[8],T=v*l-h*p,y=h*f-v*a,S=p*a-l*f,$=n*T+i*y+r*S;if($===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/$;return e[0]=T*M,e[1]=(r*p-v*i)*M,e[2]=(h*i-r*l)*M,e[3]=y*M,e[4]=(v*n-r*f)*M,e[5]=(r*a-h*n)*M,e[6]=S*M,e[7]=(i*f-p*n)*M,e[8]=(l*n-i*a)*M,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,l,h){const f=Math.cos(a),p=Math.sin(a);return this.set(i*f,i*p,-i*(f*l+p*h)+l+e,-r*p,r*f,-r*(-p*l+f*h)+h+n,0,0,1),this}scale(e,n){return this.premultiply(Z1.makeScale(e,n)),this}rotate(e){return this.premultiply(Z1.makeRotation(-e)),this}translate(e,n){return this.premultiply(Z1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Z1=new ci;function FH(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}const lW={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ey(s,e){return new lW[s](e)}function lS(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function HH(){const s=lS("canvas");return s.style.display="block",s}const lB={};function Ry(s){s in lB||(lB[s]=!0,console.warn(s))}function uW(s,e,n){return new Promise(function(i,r){function a(){switch(s.clientWaitSync(e,s.SYNC_FLUSH_COMMANDS_BIT,0)){case s.WAIT_FAILED:r();break;case s.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}setTimeout(a,n)})}function cW(s){const e=s.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function hW(s){const e=s.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const uB=new ci().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),cB=new ci().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function dW(){const s={enabled:!0,workingColorSpace:sf,spaces:{},convert:function(r,a,l){return this.enabled===!1||a===l||!a||!l||(this.spaces[a].transfer===Ls&&(r.r=J0(r.r),r.g=J0(r.g),r.b=J0(r.b)),this.spaces[a].primaries!==this.spaces[l].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===Ls&&(r.r=wy(r.r),r.g=wy(r.g),r.b=wy(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===X0?rS:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,l){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return Ry("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),s.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return Ry("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),s.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return s.define({[sf]:{primaries:e,whitePoint:i,transfer:rS,toXYZ:uB,fromXYZ:cB,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Wa},outputColorSpaceConfig:{drawingBufferColorSpace:Wa}},[Wa]:{primaries:e,whitePoint:i,transfer:Ls,toXYZ:uB,fromXYZ:cB,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Wa}}}),s}const Yi=dW();function J0(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function wy(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let Ub;class GH{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Ub===void 0&&(Ub=lS("canvas")),Ub.width=e.width,Ub.height=e.height;const r=Ub.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Ub}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=lS("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let l=0;l<a.length;l++)a[l]=J0(a[l]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(J0(n[i]/255)*255):n[i]=J0(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fW=0;class Cg{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fW++}),this.uuid=Fc(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let l=0,h=r.length;l<h;l++)r[l].isDataTexture?a.push(Q1(r[l].image)):a.push(Q1(r[l]))}else a=Q1(r);i.url=a}return n||(e.images[this.uuid]=i),i}}function Q1(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?GH.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pW=0;const eR=new be;class Ms extends Rp{constructor(e=Ms.DEFAULT_IMAGE,n=Ms.DEFAULT_MAPPING,i=co,r=co,a=us,l=Nh,h=ho,f=fu,p=Ms.DEFAULT_ANISOTROPY,v=X0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pW++}),this.uuid=Fc(),this.name="",this.source=new Cg(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=l,this.anisotropy=p,this.format=h,this.internalFormat=null,this.type=f,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ci,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(eR).x}get height(){return this.source.getSize(eR).y}get depth(){return this.source.getSize(eR).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Bg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pg:e.x=e.x-Math.floor(e.x);break;case co:e.x=e.x<0?0:1;break;case Fy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pg:e.y=e.y-Math.floor(e.y);break;case co:e.y=e.y<0?0:1;break;case Fy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ms.DEFAULT_IMAGE=null;Ms.DEFAULT_MAPPING=Bg;Ms.DEFAULT_ANISOTROPY=1;class Ei{constructor(e=0,n=0,i=0,r=1){Ei.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,l=e.elements;return this.x=l[0]*n+l[4]*i+l[8]*r+l[12]*a,this.y=l[1]*n+l[5]*i+l[9]*r+l[13]*a,this.z=l[2]*n+l[6]*i+l[10]*r+l[14]*a,this.w=l[3]*n+l[7]*i+l[11]*r+l[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const f=e.elements,p=f[0],v=f[4],T=f[8],y=f[1],S=f[5],$=f[9],M=f[2],C=f[6],E=f[10];if(Math.abs(v-y)<.01&&Math.abs(T-M)<.01&&Math.abs($-C)<.01){if(Math.abs(v+y)<.1&&Math.abs(T+M)<.1&&Math.abs($+C)<.1&&Math.abs(p+S+E-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const I=(p+1)/2,O=(S+1)/2,P=(E+1)/2,F=(v+y)/4,V=(T+M)/4,X=($+C)/4;return I>O&&I>P?I<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(I),r=F/i,a=V/i):O>P?O<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(O),i=F/r,a=X/r):P<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(P),i=V/a,r=X/a),this.set(i,r,a,n),this}let w=Math.sqrt((C-$)*(C-$)+(T-M)*(T-M)+(y-v)*(y-v));return Math.abs(w)<.001&&(w=1),this.x=(C-$)/w,this.y=(T-M)/w,this.z=(y-v)/w,this.w=Math.acos((p+S+E-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=ai(this.x,e.x,n.x),this.y=ai(this.y,e.y,n.y),this.z=ai(this.z,e.z,n.z),this.w=ai(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=ai(this.x,e,n),this.y=ai(this.y,e,n),this.z=ai(this.z,e,n),this.w=ai(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ai(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class h2 extends Rp{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:us,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new Ei(0,0,e,n),this.scissorTest=!1,this.viewport=new Ei(0,0,e,n);const r={width:e,height:n,depth:i.depth},a=new Ms(r);this.textures=[];const l=i.count;for(let h=0;h<l;h++)this.textures[h]=a.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:us,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new Cg(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gc extends h2{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class sM extends Ms{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Ta,this.minFilter=Ta,this.wrapR=co,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class mW extends Gc{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new sM(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class rM extends Ms{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Ta,this.minFilter=Ta,this.wrapR=co,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gW extends Gc{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new rM(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ro{constructor(e=new be(1/0,1/0,1/0),n=new be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Gd.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Gd.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Gd.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let l=0,h=a.count;l<h;l++)e.isMesh===!0?e.getVertexPosition(l,Gd):Gd.fromBufferAttribute(a,l),Gd.applyMatrix4(e.matrixWorld),this.expandByPoint(Gd);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),kA.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),kA.copy(i.boundingBox)),kA.applyMatrix4(e.matrixWorld),this.union(kA)}const r=e.children;for(let a=0,l=r.length;a<l;a++)this.expandByObject(r[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Gd),Gd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tE),PA.subVectors(this.max,tE),Fb.subVectors(e.a,tE),Hb.subVectors(e.b,tE),Gb.subVectors(e.c,tE),mg.subVectors(Hb,Fb),gg.subVectors(Gb,Hb),tv.subVectors(Fb,Gb);let n=[0,-mg.z,mg.y,0,-gg.z,gg.y,0,-tv.z,tv.y,mg.z,0,-mg.x,gg.z,0,-gg.x,tv.z,0,-tv.x,-mg.y,mg.x,0,-gg.y,gg.x,0,-tv.y,tv.x,0];return!tR(n,Fb,Hb,Gb,PA)||(n=[1,0,0,0,1,0,0,0,1],!tR(n,Fb,Hb,Gb,PA))?!1:(UA.crossVectors(mg,gg),n=[UA.x,UA.y,UA.z],tR(n,Fb,Hb,Gb,PA))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gd).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(I0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),I0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),I0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),I0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),I0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),I0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),I0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),I0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(I0),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const I0=[new be,new be,new be,new be,new be,new be,new be,new be],Gd=new be,kA=new Ro,Fb=new be,Hb=new be,Gb=new be,mg=new be,gg=new be,tv=new be,tE=new be,PA=new be,UA=new be,nv=new be;function tR(s,e,n,i,r){for(let a=0,l=s.length-3;a<=l;a+=3){nv.fromArray(s,a);const h=r.x*Math.abs(nv.x)+r.y*Math.abs(nv.y)+r.z*Math.abs(nv.z),f=e.dot(nv),p=n.dot(nv),v=i.dot(nv);if(Math.max(-Math.max(f,p,v),Math.min(f,p,v))>h)return!1}return!0}const _W=new Ro,nE=new be,nR=new be;class wo{constructor(e=new be,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):_W.setFromPoints(e).getCenter(i);let r=0;for(let a=0,l=e.length;a<l;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;nE.subVectors(e,this.center);const n=nE.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(nE,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(nR.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(nE.copy(e.center).add(nR)),this.expandByPoint(nE.copy(e.center).sub(nR))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const O0=new be,iR=new be,FA=new be,_g=new be,sR=new be,HA=new be,rR=new be;class ib{constructor(e=new be,n=new be(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,O0)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=O0.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(O0.copy(this.origin).addScaledVector(this.direction,n),O0.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){iR.copy(e).add(n).multiplyScalar(.5),FA.copy(n).sub(e).normalize(),_g.copy(this.origin).sub(iR);const a=e.distanceTo(n)*.5,l=-this.direction.dot(FA),h=_g.dot(this.direction),f=-_g.dot(FA),p=_g.lengthSq(),v=Math.abs(1-l*l);let T,y,S,$;if(v>0)if(T=l*f-h,y=l*h-f,$=a*v,T>=0)if(y>=-$)if(y<=$){const M=1/v;T*=M,y*=M,S=T*(T+l*y+2*h)+y*(l*T+y+2*f)+p}else y=a,T=Math.max(0,-(l*y+h)),S=-T*T+y*(y+2*f)+p;else y=-a,T=Math.max(0,-(l*y+h)),S=-T*T+y*(y+2*f)+p;else y<=-$?(T=Math.max(0,-(-l*a+h)),y=T>0?-a:Math.min(Math.max(-a,-f),a),S=-T*T+y*(y+2*f)+p):y<=$?(T=0,y=Math.min(Math.max(-a,-f),a),S=y*(y+2*f)+p):(T=Math.max(0,-(l*a+h)),y=T>0?a:Math.min(Math.max(-a,-f),a),S=-T*T+y*(y+2*f)+p);else y=l>0?-a:a,T=Math.max(0,-(l*y+h)),S=-T*T+y*(y+2*f)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,T),r&&r.copy(iR).addScaledVector(FA,y),S}intersectSphere(e,n){O0.subVectors(e.center,this.origin);const i=O0.dot(this.direction),r=O0.dot(O0)-i*i,a=e.radius*e.radius;if(r>a)return null;const l=Math.sqrt(a-r),h=i-l,f=i+l;return f<0?null:h<0?this.at(f,n):this.at(h,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,l,h,f;const p=1/this.direction.x,v=1/this.direction.y,T=1/this.direction.z,y=this.origin;return p>=0?(i=(e.min.x-y.x)*p,r=(e.max.x-y.x)*p):(i=(e.max.x-y.x)*p,r=(e.min.x-y.x)*p),v>=0?(a=(e.min.y-y.y)*v,l=(e.max.y-y.y)*v):(a=(e.max.y-y.y)*v,l=(e.min.y-y.y)*v),i>l||a>r||((a>i||isNaN(i))&&(i=a),(l<r||isNaN(r))&&(r=l),T>=0?(h=(e.min.z-y.z)*T,f=(e.max.z-y.z)*T):(h=(e.max.z-y.z)*T,f=(e.min.z-y.z)*T),i>f||h>r)||((h>i||i!==i)&&(i=h),(f<r||r!==r)&&(r=f),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,O0)!==null}intersectTriangle(e,n,i,r,a){sR.subVectors(n,e),HA.subVectors(i,e),rR.crossVectors(sR,HA);let l=this.direction.dot(rR),h;if(l>0){if(r)return null;h=1}else if(l<0)h=-1,l=-l;else return null;_g.subVectors(this.origin,e);const f=h*this.direction.dot(HA.crossVectors(_g,HA));if(f<0)return null;const p=h*this.direction.dot(sR.cross(_g));if(p<0||f+p>l)return null;const v=-h*_g.dot(rR);return v<0?null:this.at(v/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fn{constructor(e,n,i,r,a,l,h,f,p,v,T,y,S,$,M,C){Fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,l,h,f,p,v,T,y,S,$,M,C)}set(e,n,i,r,a,l,h,f,p,v,T,y,S,$,M,C){const E=this.elements;return E[0]=e,E[4]=n,E[8]=i,E[12]=r,E[1]=a,E[5]=l,E[9]=h,E[13]=f,E[2]=p,E[6]=v,E[10]=T,E[14]=y,E[3]=S,E[7]=$,E[11]=M,E[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fn().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/zb.setFromMatrixColumn(e,0).length(),a=1/zb.setFromMatrixColumn(e,1).length(),l=1/zb.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*l,n[9]=i[9]*l,n[10]=i[10]*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,a=e.z,l=Math.cos(i),h=Math.sin(i),f=Math.cos(r),p=Math.sin(r),v=Math.cos(a),T=Math.sin(a);if(e.order==="XYZ"){const y=l*v,S=l*T,$=h*v,M=h*T;n[0]=f*v,n[4]=-f*T,n[8]=p,n[1]=S+$*p,n[5]=y-M*p,n[9]=-h*f,n[2]=M-y*p,n[6]=$+S*p,n[10]=l*f}else if(e.order==="YXZ"){const y=f*v,S=f*T,$=p*v,M=p*T;n[0]=y+M*h,n[4]=$*h-S,n[8]=l*p,n[1]=l*T,n[5]=l*v,n[9]=-h,n[2]=S*h-$,n[6]=M+y*h,n[10]=l*f}else if(e.order==="ZXY"){const y=f*v,S=f*T,$=p*v,M=p*T;n[0]=y-M*h,n[4]=-l*T,n[8]=$+S*h,n[1]=S+$*h,n[5]=l*v,n[9]=M-y*h,n[2]=-l*p,n[6]=h,n[10]=l*f}else if(e.order==="ZYX"){const y=l*v,S=l*T,$=h*v,M=h*T;n[0]=f*v,n[4]=$*p-S,n[8]=y*p+M,n[1]=f*T,n[5]=M*p+y,n[9]=S*p-$,n[2]=-p,n[6]=h*f,n[10]=l*f}else if(e.order==="YZX"){const y=l*f,S=l*p,$=h*f,M=h*p;n[0]=f*v,n[4]=M-y*T,n[8]=$*T+S,n[1]=T,n[5]=l*v,n[9]=-h*v,n[2]=-p*v,n[6]=S*T+$,n[10]=y-M*T}else if(e.order==="XZY"){const y=l*f,S=l*p,$=h*f,M=h*p;n[0]=f*v,n[4]=-T,n[8]=p*v,n[1]=y*T+M,n[5]=l*v,n[9]=S*T-$,n[2]=$*T-S,n[6]=h*v,n[10]=M*T+y}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vW,e,bW)}lookAt(e,n,i){const r=this.elements;return Lc.subVectors(e,n),Lc.lengthSq()===0&&(Lc.z=1),Lc.normalize(),vg.crossVectors(i,Lc),vg.lengthSq()===0&&(Math.abs(i.z)===1?Lc.x+=1e-4:Lc.z+=1e-4,Lc.normalize(),vg.crossVectors(i,Lc)),vg.normalize(),GA.crossVectors(Lc,vg),r[0]=vg.x,r[4]=GA.x,r[8]=Lc.x,r[1]=vg.y,r[5]=GA.y,r[9]=Lc.y,r[2]=vg.z,r[6]=GA.z,r[10]=Lc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,l=i[0],h=i[4],f=i[8],p=i[12],v=i[1],T=i[5],y=i[9],S=i[13],$=i[2],M=i[6],C=i[10],E=i[14],w=i[3],I=i[7],O=i[11],P=i[15],F=r[0],V=r[4],X=r[8],G=r[12],D=r[1],Z=r[5],Y=r[9],j=r[13],ne=r[2],ee=r[6],z=r[10],te=r[14],ce=r[3],pe=r[7],K=r[11],fe=r[15];return a[0]=l*F+h*D+f*ne+p*ce,a[4]=l*V+h*Z+f*ee+p*pe,a[8]=l*X+h*Y+f*z+p*K,a[12]=l*G+h*j+f*te+p*fe,a[1]=v*F+T*D+y*ne+S*ce,a[5]=v*V+T*Z+y*ee+S*pe,a[9]=v*X+T*Y+y*z+S*K,a[13]=v*G+T*j+y*te+S*fe,a[2]=$*F+M*D+C*ne+E*ce,a[6]=$*V+M*Z+C*ee+E*pe,a[10]=$*X+M*Y+C*z+E*K,a[14]=$*G+M*j+C*te+E*fe,a[3]=w*F+I*D+O*ne+P*ce,a[7]=w*V+I*Z+O*ee+P*pe,a[11]=w*X+I*Y+O*z+P*K,a[15]=w*G+I*j+O*te+P*fe,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],l=e[1],h=e[5],f=e[9],p=e[13],v=e[2],T=e[6],y=e[10],S=e[14],$=e[3],M=e[7],C=e[11],E=e[15];return $*(+a*f*T-r*p*T-a*h*y+i*p*y+r*h*S-i*f*S)+M*(+n*f*S-n*p*y+a*l*y-r*l*S+r*p*v-a*f*v)+C*(+n*p*T-n*h*S-a*l*T+i*l*S+a*h*v-i*p*v)+E*(-r*h*v-n*f*T+n*h*y+r*l*T-i*l*y+i*f*v)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],l=e[4],h=e[5],f=e[6],p=e[7],v=e[8],T=e[9],y=e[10],S=e[11],$=e[12],M=e[13],C=e[14],E=e[15],w=T*C*p-M*y*p+M*f*S-h*C*S-T*f*E+h*y*E,I=$*y*p-v*C*p-$*f*S+l*C*S+v*f*E-l*y*E,O=v*M*p-$*T*p+$*h*S-l*M*S-v*h*E+l*T*E,P=$*T*f-v*M*f-$*h*y+l*M*y+v*h*C-l*T*C,F=n*w+i*I+r*O+a*P;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/F;return e[0]=w*V,e[1]=(M*y*a-T*C*a-M*r*S+i*C*S+T*r*E-i*y*E)*V,e[2]=(h*C*a-M*f*a+M*r*p-i*C*p-h*r*E+i*f*E)*V,e[3]=(T*f*a-h*y*a-T*r*p+i*y*p+h*r*S-i*f*S)*V,e[4]=I*V,e[5]=(v*C*a-$*y*a+$*r*S-n*C*S-v*r*E+n*y*E)*V,e[6]=($*f*a-l*C*a-$*r*p+n*C*p+l*r*E-n*f*E)*V,e[7]=(l*y*a-v*f*a+v*r*p-n*y*p-l*r*S+n*f*S)*V,e[8]=O*V,e[9]=($*T*a-v*M*a-$*i*S+n*M*S+v*i*E-n*T*E)*V,e[10]=(l*M*a-$*h*a+$*i*p-n*M*p-l*i*E+n*h*E)*V,e[11]=(v*h*a-l*T*a-v*i*p+n*T*p+l*i*S-n*h*S)*V,e[12]=P*V,e[13]=(v*M*r-$*T*r+$*i*y-n*M*y-v*i*C+n*T*C)*V,e[14]=($*h*r-l*M*r-$*i*f+n*M*f+l*i*C-n*h*C)*V,e[15]=(l*T*r-v*h*r+v*i*f-n*T*f-l*i*y+n*h*y)*V,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,l=e.x,h=e.y,f=e.z,p=a*l,v=a*h;return this.set(p*l+i,p*h-r*f,p*f+r*h,0,p*h+r*f,v*h+i,v*f-r*l,0,p*f-r*h,v*f+r*l,a*f*f+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,a,l){return this.set(1,i,a,0,e,1,l,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,l=n._y,h=n._z,f=n._w,p=a+a,v=l+l,T=h+h,y=a*p,S=a*v,$=a*T,M=l*v,C=l*T,E=h*T,w=f*p,I=f*v,O=f*T,P=i.x,F=i.y,V=i.z;return r[0]=(1-(M+E))*P,r[1]=(S+O)*P,r[2]=($-I)*P,r[3]=0,r[4]=(S-O)*F,r[5]=(1-(y+E))*F,r[6]=(C+w)*F,r[7]=0,r[8]=($+I)*V,r[9]=(C-w)*V,r[10]=(1-(y+M))*V,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let a=zb.set(r[0],r[1],r[2]).length();const l=zb.set(r[4],r[5],r[6]).length(),h=zb.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],zd.copy(this);const p=1/a,v=1/l,T=1/h;return zd.elements[0]*=p,zd.elements[1]*=p,zd.elements[2]*=p,zd.elements[4]*=v,zd.elements[5]*=v,zd.elements[6]*=v,zd.elements[8]*=T,zd.elements[9]*=T,zd.elements[10]*=T,n.setFromRotationMatrix(zd),i.x=a,i.y=l,i.z=h,this}makePerspective(e,n,i,r,a,l,h=Lh){const f=this.elements,p=2*a/(n-e),v=2*a/(i-r),T=(n+e)/(n-e),y=(i+r)/(i-r);let S,$;if(h===Lh)S=-(l+a)/(l-a),$=-2*l*a/(l-a);else if(h===aS)S=-l/(l-a),$=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return f[0]=p,f[4]=0,f[8]=T,f[12]=0,f[1]=0,f[5]=v,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=S,f[14]=$,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,n,i,r,a,l,h=Lh){const f=this.elements,p=1/(n-e),v=1/(i-r),T=1/(l-a),y=(n+e)*p,S=(i+r)*v;let $,M;if(h===Lh)$=(l+a)*T,M=-2*T;else if(h===aS)$=a*T,M=-1*T;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*v,f[9]=0,f[13]=-S,f[2]=0,f[6]=0,f[10]=M,f[14]=-$,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const zb=new be,zd=new Fn,vW=new be(0,0,0),bW=new be(1,1,1),vg=new be,GA=new be,Lc=new be,hB=new Fn,dB=new Mo;class zc{constructor(e=0,n=0,i=0,r=zc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,a=r[0],l=r[4],h=r[8],f=r[1],p=r[5],v=r[9],T=r[2],y=r[6],S=r[10];switch(n){case"XYZ":this._y=Math.asin(ai(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,S),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(y,p),this._z=0);break;case"YXZ":this._x=Math.asin(-ai(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(h,S),this._z=Math.atan2(f,p)):(this._y=Math.atan2(-T,a),this._z=0);break;case"ZXY":this._x=Math.asin(ai(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-T,S),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(f,a));break;case"ZYX":this._y=Math.asin(-ai(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(y,S),this._z=Math.atan2(f,a)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(ai(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-v,p),this._y=Math.atan2(-T,a)):(this._x=0,this._y=Math.atan2(h,S));break;case"XZY":this._z=Math.asin(-ai(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(y,p),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-v,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return hB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hB,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return dB.setFromEuler(this),this.setFromQuaternion(dB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}zc.DEFAULT_ORDER="XYZ";class Yy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yW=0;const fB=new be,Vb=new Mo,N0=new Fn,zA=new be,iE=new be,TW=new be,EW=new Mo,pB=new be(1,0,0),mB=new be(0,1,0),gB=new be(0,0,1),_B={type:"added"},SW={type:"removed"},Wb={type:"childadded",child:null},oR={type:"childremoved",child:null};class zi extends Rp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yW++}),this.uuid=Fc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zi.DEFAULT_UP.clone();const e=new be,n=new zc,i=new Mo,r=new be(1,1,1);function a(){i.setFromEuler(n,!1)}function l(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Fn},normalMatrix:{value:new ci}}),this.matrix=new Fn,this.matrixWorld=new Fn,this.matrixAutoUpdate=zi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=zi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Yy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Vb.setFromAxisAngle(e,n),this.quaternion.multiply(Vb),this}rotateOnWorldAxis(e,n){return Vb.setFromAxisAngle(e,n),this.quaternion.premultiply(Vb),this}rotateX(e){return this.rotateOnAxis(pB,e)}rotateY(e){return this.rotateOnAxis(mB,e)}rotateZ(e){return this.rotateOnAxis(gB,e)}translateOnAxis(e,n){return fB.copy(e).applyQuaternion(this.quaternion),this.position.add(fB.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(pB,e)}translateY(e){return this.translateOnAxis(mB,e)}translateZ(e){return this.translateOnAxis(gB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(N0.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?zA.copy(e):zA.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),iE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?N0.lookAt(iE,zA,this.up):N0.lookAt(zA,iE,this.up),this.quaternion.setFromRotationMatrix(N0),r&&(N0.extractRotation(r.matrixWorld),Vb.setFromRotationMatrix(N0),this.quaternion.premultiply(Vb.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(_B),Wb.child=e,this.dispatchEvent(Wb),Wb.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(SW),oR.child=e,this.dispatchEvent(oR),oR.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),N0.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),N0.multiply(e.parent.matrixWorld)),e.applyMatrix4(N0),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(_B),Wb.child=e,this.dispatchEvent(Wb),Wb.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const l=this.children[i].getObjectByProperty(e,n);if(l!==void 0)return l}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iE,e,TW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iE,EW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(h=>({...h})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(h,f){return h[f.uuid]===void 0&&(h[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const f=h.shapes;if(Array.isArray(f))for(let p=0,v=f.length;p<v;p++){const T=f[p];a(e.shapes,T)}else a(e.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let f=0,p=this.material.length;f<p;f++)h.push(a(e.materials,this.material[f]));r.material=h}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let h=0;h<this.children.length;h++)r.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let h=0;h<this.animations.length;h++){const f=this.animations[h];r.animations.push(a(e.animations,f))}}if(n){const h=l(e.geometries),f=l(e.materials),p=l(e.textures),v=l(e.images),T=l(e.shapes),y=l(e.skeletons),S=l(e.animations),$=l(e.nodes);h.length>0&&(i.geometries=h),f.length>0&&(i.materials=f),p.length>0&&(i.textures=p),v.length>0&&(i.images=v),T.length>0&&(i.shapes=T),y.length>0&&(i.skeletons=y),S.length>0&&(i.animations=S),$.length>0&&(i.nodes=$)}return i.object=r,i;function l(h){const f=[];for(const p in h){const v=h[p];delete v.metadata,f.push(v)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}zi.DEFAULT_UP=new be(0,1,0);zi.DEFAULT_MATRIX_AUTO_UPDATE=!0;zi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Vd=new be,L0=new be,aR=new be,D0=new be,Xb=new be,jb=new be,vB=new be,lR=new be,uR=new be,cR=new be,hR=new Ei,dR=new Ei,fR=new Ei;class Ku{constructor(e=new be,n=new be,i=new be){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Vd.subVectors(e,n),r.cross(Vd);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){Vd.subVectors(r,n),L0.subVectors(i,n),aR.subVectors(e,n);const l=Vd.dot(Vd),h=Vd.dot(L0),f=Vd.dot(aR),p=L0.dot(L0),v=L0.dot(aR),T=l*p-h*h;if(T===0)return a.set(0,0,0),null;const y=1/T,S=(p*f-h*v)*y,$=(l*v-h*f)*y;return a.set(1-S-$,$,S)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,D0)===null?!1:D0.x>=0&&D0.y>=0&&D0.x+D0.y<=1}static getInterpolation(e,n,i,r,a,l,h,f){return this.getBarycoord(e,n,i,r,D0)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(a,D0.x),f.addScaledVector(l,D0.y),f.addScaledVector(h,D0.z),f)}static getInterpolatedAttribute(e,n,i,r,a,l){return hR.setScalar(0),dR.setScalar(0),fR.setScalar(0),hR.fromBufferAttribute(e,n),dR.fromBufferAttribute(e,i),fR.fromBufferAttribute(e,r),l.setScalar(0),l.addScaledVector(hR,a.x),l.addScaledVector(dR,a.y),l.addScaledVector(fR,a.z),l}static isFrontFacing(e,n,i,r){return Vd.subVectors(i,n),L0.subVectors(e,n),Vd.cross(L0).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Vd.subVectors(this.c,this.b),L0.subVectors(this.a,this.b),Vd.cross(L0).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ku.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ku.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,a){return Ku.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return Ku.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ku.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,a=this.c;let l,h;Xb.subVectors(r,i),jb.subVectors(a,i),lR.subVectors(e,i);const f=Xb.dot(lR),p=jb.dot(lR);if(f<=0&&p<=0)return n.copy(i);uR.subVectors(e,r);const v=Xb.dot(uR),T=jb.dot(uR);if(v>=0&&T<=v)return n.copy(r);const y=f*T-v*p;if(y<=0&&f>=0&&v<=0)return l=f/(f-v),n.copy(i).addScaledVector(Xb,l);cR.subVectors(e,a);const S=Xb.dot(cR),$=jb.dot(cR);if($>=0&&S<=$)return n.copy(a);const M=S*p-f*$;if(M<=0&&p>=0&&$<=0)return h=p/(p-$),n.copy(i).addScaledVector(jb,h);const C=v*$-S*T;if(C<=0&&T-v>=0&&S-$>=0)return vB.subVectors(a,r),h=(T-v)/(T-v+(S-$)),n.copy(r).addScaledVector(vB,h);const E=1/(C+M+y);return l=M*E,h=y*E,n.copy(i).addScaledVector(Xb,l).addScaledVector(jb,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const zH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bg={h:0,s:0,l:0},VA={h:0,s:0,l:0};function pR(s,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(e-s)*6*n:n<1/2?e:n<2/3?s+(e-s)*6*(2/3-n):s}let on=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Wa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Yi.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=Yi.workingColorSpace){return this.r=e,this.g=n,this.b=i,Yi.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=Yi.workingColorSpace){if(e=u2(e,1),n=ai(n,0,1),i=ai(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,l=2*i-a;this.r=pR(l,a,e+1/3),this.g=pR(l,a,e),this.b=pR(l,a,e-1/3)}return Yi.colorSpaceToWorking(this,r),this}setStyle(e,n=Wa){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=r[1],h=r[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(l===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Wa){const i=zH[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=J0(e.r),this.g=J0(e.g),this.b=J0(e.b),this}copyLinearToSRGB(e){return this.r=wy(e.r),this.g=wy(e.g),this.b=wy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Wa){return Yi.workingToColorSpace(xl.copy(this),e),Math.round(ai(xl.r*255,0,255))*65536+Math.round(ai(xl.g*255,0,255))*256+Math.round(ai(xl.b*255,0,255))}getHexString(e=Wa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Yi.workingColorSpace){Yi.workingToColorSpace(xl.copy(this),n);const i=xl.r,r=xl.g,a=xl.b,l=Math.max(i,r,a),h=Math.min(i,r,a);let f,p;const v=(h+l)/2;if(h===l)f=0,p=0;else{const T=l-h;switch(p=v<=.5?T/(l+h):T/(2-l-h),l){case i:f=(r-a)/T+(r<a?6:0);break;case r:f=(a-i)/T+2;break;case a:f=(i-r)/T+4;break}f/=6}return e.h=f,e.s=p,e.l=v,e}getRGB(e,n=Yi.workingColorSpace){return Yi.workingToColorSpace(xl.copy(this),n),e.r=xl.r,e.g=xl.g,e.b=xl.b,e}getStyle(e=Wa){Yi.workingToColorSpace(xl.copy(this),e);const n=xl.r,i=xl.g,r=xl.b;return e!==Wa?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(bg),this.setHSL(bg.h+e,bg.s+n,bg.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(bg),e.getHSL(VA);const i=zE(bg.h,VA.h,n),r=zE(bg.s,VA.s,n),a=zE(bg.l,VA.l,n);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*r,this.g=a[1]*n+a[4]*i+a[7]*r,this.b=a[2]*n+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const xl=new on;on.NAMES=zH;let AW=0;class ta extends Rp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:AW++}),this.uuid=Fc(),this.name="",this.type="Material",this.blending=Bv,this.side=Ap,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=wx,this.blendDst=Ix,this.blendEquation=$g,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new on(0,0,0),this.blendAlpha=0,this.depthFunc=Wv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=qI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tv,this.stencilZFail=Tv,this.stencilZPass=Tv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Bv&&(i.blending=this.blending),this.side!==Ap&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==wx&&(i.blendSrc=this.blendSrc),this.blendDst!==Ix&&(i.blendDst=this.blendDst),this.blendEquation!==$g&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Wv&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==qI&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Tv&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Tv&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Tv&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const l=[];for(const h in a){const f=a[h];delete f.metadata,l.push(f)}return l}if(n){const a=r(e.textures),l=r(e.images);a.length>0&&(i.textures=a),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class qu extends ta{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new on(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zc,this.combine=DS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const j0=$W();function $W(){const s=new ArrayBuffer(4),e=new Float32Array(s),n=new Uint32Array(s),i=new Uint32Array(512),r=new Uint32Array(512);for(let f=0;f<256;++f){const p=f-127;p<-27?(i[f]=0,i[f|256]=32768,r[f]=24,r[f|256]=24):p<-14?(i[f]=1024>>-p-14,i[f|256]=1024>>-p-14|32768,r[f]=-p-1,r[f|256]=-p-1):p<=15?(i[f]=p+15<<10,i[f|256]=p+15<<10|32768,r[f]=13,r[f|256]=13):p<128?(i[f]=31744,i[f|256]=64512,r[f]=24,r[f|256]=24):(i[f]=31744,i[f|256]=64512,r[f]=13,r[f|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),h=new Uint32Array(64);for(let f=1;f<1024;++f){let p=f<<13,v=0;for(;(p&8388608)===0;)p<<=1,v-=8388608;p&=-8388609,v+=947912704,a[f]=p|v}for(let f=1024;f<2048;++f)a[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)l[f]=f<<23;l[31]=1199570944,l[32]=2147483648;for(let f=33;f<63;++f)l[f]=2147483648+(f-32<<23);l[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(h[f]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:l,offsetTable:h}}function ju(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=ai(s,-65504,65504),j0.floatView[0]=s;const e=j0.uint32View[0],n=e>>23&511;return j0.baseTable[n]+((e&8388607)>>j0.shiftTable[n])}function $E(s){const e=s>>10;return j0.uint32View[0]=j0.mantissaTable[j0.offsetTable[e]+(s&1023)]+j0.exponentTable[e],j0.floatView[0]}class wv{static toHalfFloat(e){return ju(e)}static fromHalfFloat(e){return $E(e)}}const $o=new be,WA=new It;let xW=0;class ns{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:xW++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=oS,this.updateRanges=[],this.gpuType=Rr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)WA.fromBufferAttribute(this,n),WA.applyMatrix3(e),this.setXY(n,WA.x,WA.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)$o.fromBufferAttribute(this,n),$o.applyMatrix3(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)$o.fromBufferAttribute(this,n),$o.applyMatrix4(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)$o.fromBufferAttribute(this,n),$o.applyNormalMatrix(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)$o.fromBufferAttribute(this,n),$o.transformDirection(e),this.setXYZ(n,$o.x,$o.y,$o.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=cu(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=pi(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=cu(n,this.array)),n}setX(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=cu(n,this.array)),n}setY(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=cu(n,this.array)),n}setZ(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=cu(n,this.array)),n}setW(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array),a=pi(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==oS&&(e.usage=this.usage),e}}class CW extends ns{constructor(e,n,i){super(new Int8Array(e),n,i)}}class MW extends ns{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class RW extends ns{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class wW extends ns{constructor(e,n,i){super(new Int16Array(e),n,i)}}class d2 extends ns{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class IW extends ns{constructor(e,n,i){super(new Int32Array(e),n,i)}}class f2 extends ns{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class OW extends ns{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=$E(this.array[e*this.itemSize]);return this.normalized&&(n=cu(n,this.array)),n}setX(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize]=ju(n),this}getY(e){let n=$E(this.array[e*this.itemSize+1]);return this.normalized&&(n=cu(n,this.array)),n}setY(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+1]=ju(n),this}getZ(e){let n=$E(this.array[e*this.itemSize+2]);return this.normalized&&(n=cu(n,this.array)),n}setZ(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+2]=ju(n),this}getW(e){let n=$E(this.array[e*this.itemSize+3]);return this.normalized&&(n=cu(n,this.array)),n}setW(e,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+3]=ju(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array)),this.array[e+0]=ju(n),this.array[e+1]=ju(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array)),this.array[e+0]=ju(n),this.array[e+1]=ju(i),this.array[e+2]=ju(r),this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array),a=pi(a,this.array)),this.array[e+0]=ju(n),this.array[e+1]=ju(i),this.array[e+2]=ju(r),this.array[e+3]=ju(a),this}}class _n extends ns{constructor(e,n,i){super(new Float32Array(e),n,i)}}let NW=0;const Th=new Fn,mR=new zi,Yb=new be,Dc=new Ro,sE=new Ro,ba=new be;class ui extends Rp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NW++}),this.uuid=Fc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(FH(e)?f2:d2)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new ci().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Th.makeRotationFromQuaternion(e),this.applyMatrix4(Th),this}rotateX(e){return Th.makeRotationX(e),this.applyMatrix4(Th),this}rotateY(e){return Th.makeRotationY(e),this.applyMatrix4(Th),this}rotateZ(e){return Th.makeRotationZ(e),this.applyMatrix4(Th),this}translate(e,n,i){return Th.makeTranslation(e,n,i),this.applyMatrix4(Th),this}scale(e,n,i){return Th.makeScale(e,n,i),this.applyMatrix4(Th),this}lookAt(e){return mR.lookAt(e),mR.updateMatrix(),this.applyMatrix4(mR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yb).negate(),this.translate(Yb.x,Yb.y,Yb.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new _n(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ro);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const a=n[i];Dc.setFromBufferAttribute(a),this.morphTargetsRelative?(ba.addVectors(this.boundingBox.min,Dc.min),this.boundingBox.expandByPoint(ba),ba.addVectors(this.boundingBox.max,Dc.max),this.boundingBox.expandByPoint(ba)):(this.boundingBox.expandByPoint(Dc.min),this.boundingBox.expandByPoint(Dc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new be,1/0);return}if(e){const i=this.boundingSphere.center;if(Dc.setFromBufferAttribute(e),n)for(let a=0,l=n.length;a<l;a++){const h=n[a];sE.setFromBufferAttribute(h),this.morphTargetsRelative?(ba.addVectors(Dc.min,sE.min),Dc.expandByPoint(ba),ba.addVectors(Dc.max,sE.max),Dc.expandByPoint(ba)):(Dc.expandByPoint(sE.min),Dc.expandByPoint(sE.max))}Dc.getCenter(i);let r=0;for(let a=0,l=e.count;a<l;a++)ba.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(ba));if(n)for(let a=0,l=n.length;a<l;a++){const h=n[a],f=this.morphTargetsRelative;for(let p=0,v=h.count;p<v;p++)ba.fromBufferAttribute(h,p),f&&(Yb.fromBufferAttribute(e,p),ba.add(Yb)),r=Math.max(r,i.distanceToSquared(ba))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ns(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),h=[],f=[];for(let X=0;X<i.count;X++)h[X]=new be,f[X]=new be;const p=new be,v=new be,T=new be,y=new It,S=new It,$=new It,M=new be,C=new be;function E(X,G,D){p.fromBufferAttribute(i,X),v.fromBufferAttribute(i,G),T.fromBufferAttribute(i,D),y.fromBufferAttribute(a,X),S.fromBufferAttribute(a,G),$.fromBufferAttribute(a,D),v.sub(p),T.sub(p),S.sub(y),$.sub(y);const Z=1/(S.x*$.y-$.x*S.y);isFinite(Z)&&(M.copy(v).multiplyScalar($.y).addScaledVector(T,-S.y).multiplyScalar(Z),C.copy(T).multiplyScalar(S.x).addScaledVector(v,-$.x).multiplyScalar(Z),h[X].add(M),h[G].add(M),h[D].add(M),f[X].add(C),f[G].add(C),f[D].add(C))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let X=0,G=w.length;X<G;++X){const D=w[X],Z=D.start,Y=D.count;for(let j=Z,ne=Z+Y;j<ne;j+=3)E(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const I=new be,O=new be,P=new be,F=new be;function V(X){P.fromBufferAttribute(r,X),F.copy(P);const G=h[X];I.copy(G),I.sub(P.multiplyScalar(P.dot(G))).normalize(),O.crossVectors(F,G);const Z=O.dot(f[X])<0?-1:1;l.setXYZW(X,I.x,I.y,I.z,Z)}for(let X=0,G=w.length;X<G;++X){const D=w[X],Z=D.start,Y=D.count;for(let j=Z,ne=Z+Y;j<ne;j+=3)V(e.getX(j+0)),V(e.getX(j+1)),V(e.getX(j+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ns(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let y=0,S=i.count;y<S;y++)i.setXYZ(y,0,0,0);const r=new be,a=new be,l=new be,h=new be,f=new be,p=new be,v=new be,T=new be;if(e)for(let y=0,S=e.count;y<S;y+=3){const $=e.getX(y+0),M=e.getX(y+1),C=e.getX(y+2);r.fromBufferAttribute(n,$),a.fromBufferAttribute(n,M),l.fromBufferAttribute(n,C),v.subVectors(l,a),T.subVectors(r,a),v.cross(T),h.fromBufferAttribute(i,$),f.fromBufferAttribute(i,M),p.fromBufferAttribute(i,C),h.add(v),f.add(v),p.add(v),i.setXYZ($,h.x,h.y,h.z),i.setXYZ(M,f.x,f.y,f.z),i.setXYZ(C,p.x,p.y,p.z)}else for(let y=0,S=n.count;y<S;y+=3)r.fromBufferAttribute(n,y+0),a.fromBufferAttribute(n,y+1),l.fromBufferAttribute(n,y+2),v.subVectors(l,a),T.subVectors(r,a),v.cross(T),i.setXYZ(y+0,v.x,v.y,v.z),i.setXYZ(y+1,v.x,v.y,v.z),i.setXYZ(y+2,v.x,v.y,v.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)ba.fromBufferAttribute(e,n),ba.normalize(),e.setXYZ(n,ba.x,ba.y,ba.z)}toNonIndexed(){function e(h,f){const p=h.array,v=h.itemSize,T=h.normalized,y=new p.constructor(f.length*v);let S=0,$=0;for(let M=0,C=f.length;M<C;M++){h.isInterleavedBufferAttribute?S=f[M]*h.data.stride+h.offset:S=f[M]*v;for(let E=0;E<v;E++)y[$++]=p[S++]}return new ns(y,v,T)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ui,i=this.index.array,r=this.attributes;for(const h in r){const f=r[h],p=e(f,i);n.setAttribute(h,p)}const a=this.morphAttributes;for(const h in a){const f=[],p=a[h];for(let v=0,T=p.length;v<T;v++){const y=p[v],S=e(y,i);f.push(S)}n.morphAttributes[h]=f}n.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let h=0,f=l.length;h<f;h++){const p=l[h];n.addGroup(p.start,p.count,p.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const p in f)f[p]!==void 0&&(e[p]=f[p]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const f in i){const p=i[f];e.data.attributes[f]=p.toJSON(e.data)}const r={};let a=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],v=[];for(let T=0,y=p.length;T<y;T++){const S=p[T];v.push(S.toJSON(e.data))}v.length>0&&(r[f]=v,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere=h.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const p in r){const v=r[p];this.setAttribute(p,v.clone(n))}const a=e.morphAttributes;for(const p in a){const v=[],T=a[p];for(let y=0,S=T.length;y<S;y++)v.push(T[y].clone(n));this.morphAttributes[p]=v}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,v=l.length;p<v;p++){const T=l[p];this.addGroup(T.start,T.count,T.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const bB=new Fn,iv=new ib,XA=new wo,yB=new be,jA=new be,YA=new be,KA=new be,gR=new be,qA=new be,TB=new be,JA=new be;class _r extends zi{constructor(e=new ui,n=new qu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const h=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,l=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const h=this.morphTargetInfluences;if(a&&h){qA.set(0,0,0);for(let f=0,p=a.length;f<p;f++){const v=h[f],T=a[f];v!==0&&(gR.fromBufferAttribute(T,e),l?qA.addScaledVector(gR,v):qA.addScaledVector(gR.sub(n),v))}n.add(qA)}return n}raycast(e,n){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),XA.copy(i.boundingSphere),XA.applyMatrix4(a),iv.copy(e.ray).recast(e.near),!(XA.containsPoint(iv.origin)===!1&&(iv.intersectSphere(XA,yB)===null||iv.origin.distanceToSquared(yB)>(e.far-e.near)**2))&&(bB.copy(a).invert(),iv.copy(e.ray).applyMatrix4(bB),!(i.boundingBox!==null&&iv.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,iv)))}_computeIntersections(e,n,i){let r;const a=this.geometry,l=this.material,h=a.index,f=a.attributes.position,p=a.attributes.uv,v=a.attributes.uv1,T=a.attributes.normal,y=a.groups,S=a.drawRange;if(h!==null)if(Array.isArray(l))for(let $=0,M=y.length;$<M;$++){const C=y[$],E=l[C.materialIndex],w=Math.max(C.start,S.start),I=Math.min(h.count,Math.min(C.start+C.count,S.start+S.count));for(let O=w,P=I;O<P;O+=3){const F=h.getX(O),V=h.getX(O+1),X=h.getX(O+2);r=ZA(this,E,e,i,p,v,T,F,V,X),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=C.materialIndex,n.push(r))}}else{const $=Math.max(0,S.start),M=Math.min(h.count,S.start+S.count);for(let C=$,E=M;C<E;C+=3){const w=h.getX(C),I=h.getX(C+1),O=h.getX(C+2);r=ZA(this,l,e,i,p,v,T,w,I,O),r&&(r.faceIndex=Math.floor(C/3),n.push(r))}}else if(f!==void 0)if(Array.isArray(l))for(let $=0,M=y.length;$<M;$++){const C=y[$],E=l[C.materialIndex],w=Math.max(C.start,S.start),I=Math.min(f.count,Math.min(C.start+C.count,S.start+S.count));for(let O=w,P=I;O<P;O+=3){const F=O,V=O+1,X=O+2;r=ZA(this,E,e,i,p,v,T,F,V,X),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=C.materialIndex,n.push(r))}}else{const $=Math.max(0,S.start),M=Math.min(f.count,S.start+S.count);for(let C=$,E=M;C<E;C+=3){const w=C,I=C+1,O=C+2;r=ZA(this,l,e,i,p,v,T,w,I,O),r&&(r.faceIndex=Math.floor(C/3),n.push(r))}}}}function LW(s,e,n,i,r,a,l,h){let f;if(e.side===hu?f=i.intersectTriangle(l,a,r,!0,h):f=i.intersectTriangle(r,a,l,e.side===Ap,h),f===null)return null;JA.copy(h),JA.applyMatrix4(s.matrixWorld);const p=n.ray.origin.distanceTo(JA);return p<n.near||p>n.far?null:{distance:p,point:JA.clone(),object:s}}function ZA(s,e,n,i,r,a,l,h,f,p){s.getVertexPosition(h,jA),s.getVertexPosition(f,YA),s.getVertexPosition(p,KA);const v=LW(s,e,n,i,jA,YA,KA,TB);if(v){const T=new be;Ku.getBarycoord(TB,jA,YA,KA,T),r&&(v.uv=Ku.getInterpolatedAttribute(r,h,f,p,T,new It)),a&&(v.uv1=Ku.getInterpolatedAttribute(a,h,f,p,T,new It)),l&&(v.normal=Ku.getInterpolatedAttribute(l,h,f,p,T,new be),v.normal.dot(i.direction)>0&&v.normal.multiplyScalar(-1));const y={a:h,b:f,c:p,normal:new be,materialIndex:0};Ku.getNormal(jA,YA,KA,y.normal),v.face=y,v.barycoord=T}return v}class sb extends ui{constructor(e=1,n=1,i=1,r=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:l};const h=this;r=Math.floor(r),a=Math.floor(a),l=Math.floor(l);const f=[],p=[],v=[],T=[];let y=0,S=0;$("z","y","x",-1,-1,i,n,e,l,a,0),$("z","y","x",1,-1,i,n,-e,l,a,1),$("x","z","y",1,1,e,i,n,r,l,2),$("x","z","y",1,-1,e,i,-n,r,l,3),$("x","y","z",1,-1,e,n,i,r,a,4),$("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(f),this.setAttribute("position",new _n(p,3)),this.setAttribute("normal",new _n(v,3)),this.setAttribute("uv",new _n(T,2));function $(M,C,E,w,I,O,P,F,V,X,G){const D=O/V,Z=P/X,Y=O/2,j=P/2,ne=F/2,ee=V+1,z=X+1;let te=0,ce=0;const pe=new be;for(let K=0;K<z;K++){const fe=K*Z-j;for(let Ne=0;Ne<ee;Ne++){const Pe=Ne*D-Y;pe[M]=Pe*w,pe[C]=fe*I,pe[E]=ne,p.push(pe.x,pe.y,pe.z),pe[M]=0,pe[C]=0,pe[E]=F>0?1:-1,v.push(pe.x,pe.y,pe.z),T.push(Ne/V),T.push(1-K/X),te+=1}}for(let K=0;K<X;K++)for(let fe=0;fe<V;fe++){const Ne=y+fe+ee*K,Pe=y+fe+ee*(K+1),Ee=y+(fe+1)+ee*(K+1),We=y+(fe+1)+ee*K;f.push(Ne,Pe,We),f.push(Pe,Ee,We),ce+=6}h.addGroup(S,ce,G),S+=ce,y+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sb(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ky(s){const e={};for(const n in s){e[n]={};for(const i in s[n]){const r=s[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function lu(s){const e={};for(let n=0;n<s.length;n++){const i=Ky(s[n]);for(const r in i)e[r]=i[r]}return e}function DW(s){const e=[];for(let n=0;n<s.length;n++)e.push(s[n].clone());return e}function VH(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Yi.workingColorSpace}const dC={clone:Ky,merge:lu};var BW=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kW=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pu extends ta{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=BW,this.fragmentShader=kW,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ky(e.uniforms),this.uniformsGroups=DW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?n.uniforms[r]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?n.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?n.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?n.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?n.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?n.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?n.uniforms[r]={type:"m4",value:l.toArray()}:n.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class oM extends zi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fn,this.projectionMatrix=new Fn,this.projectionMatrixInverse=new Fn,this.coordinateSystem=Lh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const yg=new be,EB=new It,SB=new It;class io extends oM{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=jy*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jy*2*Math.atan(Math.tan(kv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){yg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(yg.x,yg.y).multiplyScalar(-e/yg.z),yg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(yg.x,yg.y).multiplyScalar(-e/yg.z)}getViewSize(e,n){return this.getViewBounds(e,EB,SB),n.subVectors(SB,EB)}setViewOffset(e,n,i,r,a,l){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(kv*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const f=l.fullWidth,p=l.fullHeight;a+=l.offsetX*r/f,n-=l.offsetY*i/p,r*=l.width/f,i*=l.height/p}const h=this.filmOffset;h!==0&&(a+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Kb=-90,qb=1;class WH extends zi{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new io(Kb,qb,e,n);r.layers=this.layers,this.add(r);const a=new io(Kb,qb,e,n);a.layers=this.layers,this.add(a);const l=new io(Kb,qb,e,n);l.layers=this.layers,this.add(l);const h=new io(Kb,qb,e,n);h.layers=this.layers,this.add(h);const f=new io(Kb,qb,e,n);f.layers=this.layers,this.add(f);const p=new io(Kb,qb,e,n);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,a,l,h,f]=n;for(const p of n)this.remove(p);if(e===Lh)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===aS)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of n)this.add(p),p.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,l,h,f,p,v]=this.children,T=e.getRenderTarget(),y=e.getActiveCubeFace(),S=e.getActiveMipmapLevel(),$=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,a),e.setRenderTarget(i,1,r),e.render(n,l),e.setRenderTarget(i,2,r),e.render(n,h),e.setRenderTarget(i,3,r),e.render(n,f),e.setRenderTarget(i,4,r),e.render(n,p),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(n,v),e.setRenderTarget(T,y,S),e.xr.enabled=$,i.texture.needsPMREMUpdate=!0}}class US extends Ms{constructor(e=[],n=$p,i,r,a,l,h,f,p,v){super(e,n,i,r,a,l,h,f,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class p2 extends Gc{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new US(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new sb(5,5,5),a=new pu({name:"CubemapFromEquirect",uniforms:Ky(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:hu,blending:bp});a.uniforms.tEquirect.value=n;const l=new _r(r,a),h=n.minFilter;return n.minFilter===Nh&&(n.minFilter=us),new WH(1,10,this).update(e,l),n.minFilter=h,l.geometry.dispose(),l.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(n,i,r);e.setRenderTarget(a)}}class Y0 extends zi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const PW={type:"move"};class rx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Y0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Y0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new be),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Y0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new be),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,a=null,l=null;const h=this._targetRay,f=this._grip,p=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const M of e.hand.values()){const C=n.getJointPose(M,i),E=this._getHandJoint(p,M);C!==null&&(E.matrix.fromArray(C.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=C.radius),E.visible=C!==null}const v=p.joints["index-finger-tip"],T=p.joints["thumb-tip"],y=v.position.distanceTo(T.position),S=.02,$=.005;p.inputState.pinching&&y>S+$?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&y<=S-$&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(f.matrix.fromArray(a.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,a.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(a.linearVelocity)):f.hasLinearVelocity=!1,a.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(a.angularVelocity)):f.hasAngularVelocity=!1));h!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(h.matrix.fromArray(r.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,r.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(r.linearVelocity)):h.hasLinearVelocity=!1,r.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(r.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(PW)))}return h!==null&&(h.visible=r!==null),f!==null&&(f.visible=a!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Y0;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class aM{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new on(e),this.density=n}clone(){return new aM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class lM{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new on(e),this.near=n,this.far=i}clone(){return new lM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class mT extends zi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new zc,this.environmentIntensity=1,this.environmentRotation=new zc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class FS{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=oS,this.updateRanges=[],this.version=0,this.uuid=Fc()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ou=new be;class Ju{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)ou.fromBufferAttribute(this,n),ou.applyMatrix4(e),this.setXYZ(n,ou.x,ou.y,ou.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)ou.fromBufferAttribute(this,n),ou.applyNormalMatrix(e),this.setXYZ(n,ou.x,ou.y,ou.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)ou.fromBufferAttribute(this,n),ou.transformDirection(e),this.setXYZ(n,ou.x,ou.y,ou.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=cu(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=pi(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=pi(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=pi(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=pi(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=pi(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=cu(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=cu(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=cu(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=cu(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array),a=pi(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new ns(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ju(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class m2 extends ta{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new on(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jb;const rE=new be,Zb=new be,Qb=new be,ey=new It,oE=new It,XH=new Fn,QA=new be,aE=new be,e$=new be,AB=new It,_R=new It,$B=new It;class jH extends zi{constructor(e=new m2){if(super(),this.isSprite=!0,this.type="Sprite",Jb===void 0){Jb=new ui;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new FS(n,5);Jb.setIndex([0,1,2,0,2,3]),Jb.setAttribute("position",new Ju(i,3,0,!1)),Jb.setAttribute("uv",new Ju(i,2,3,!1))}this.geometry=Jb,this.material=e,this.center=new It(.5,.5),this.count=1}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zb.setFromMatrixScale(this.matrixWorld),XH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Qb.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zb.multiplyScalar(-Qb.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const l=this.center;t$(QA.set(-.5,-.5,0),Qb,l,Zb,r,a),t$(aE.set(.5,-.5,0),Qb,l,Zb,r,a),t$(e$.set(.5,.5,0),Qb,l,Zb,r,a),AB.set(0,0),_R.set(1,0),$B.set(1,1);let h=e.ray.intersectTriangle(QA,aE,e$,!1,rE);if(h===null&&(t$(aE.set(-.5,.5,0),Qb,l,Zb,r,a),_R.set(0,1),h=e.ray.intersectTriangle(QA,e$,aE,!1,rE),h===null))return;const f=e.ray.origin.distanceTo(rE);f<e.near||f>e.far||n.push({distance:f,point:rE.clone(),uv:Ku.getInterpolation(rE,QA,aE,e$,AB,_R,$B,new It),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function t$(s,e,n,i,r,a){ey.subVectors(s,n).addScalar(.5).multiply(i),r!==void 0?(oE.x=a*ey.x-r*ey.y,oE.y=r*ey.x+a*ey.y):oE.copy(ey),s.copy(e),s.x+=oE.x,s.y+=oE.y,s.applyMatrix4(XH)}const n$=new be,xB=new be;class YH extends zi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let a;for(a=0;a<r.length&&!(n<r[a].distance);a++);return r.splice(a,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),e<a)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){n$.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(n$);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){n$.setFromMatrixPosition(e.matrixWorld),xB.setFromMatrixPosition(this.matrixWorld);const i=n$.distanceTo(xB)/e.zoom;n[0].object.visible=!0;let r,a;for(r=1,a=n.length;r<a;r++){let l=n[r].distance;if(n[r].object.visible&&(l-=l*n[r].hysteresis),i>=l)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const l=i[r];n.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return n}}const CB=new be,MB=new Ei,RB=new Ei,UW=new be,wB=new Fn,i$=new be,vR=new wo,IB=new Fn,bR=new ib;class g2 extends _r{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=YI,this.bindMatrix=new Fn,this.bindMatrixInverse=new Fn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ro),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,i$),this.boundingBox.expandByPoint(i$)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wo),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,i$),this.boundingSphere.expandByPoint(i$)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vR.copy(this.boundingSphere),vR.applyMatrix4(r),e.ray.intersectsSphere(vR)!==!1&&(IB.copy(r).invert(),bR.copy(e.ray).applyMatrix4(IB),!(this.boundingBox!==null&&bR.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,bR)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ei,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===YI?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===$H?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;MB.fromBufferAttribute(r.attributes.skinIndex,e),RB.fromBufferAttribute(r.attributes.skinWeight,e),CB.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const l=RB.getComponent(a);if(l!==0){const h=MB.getComponent(a);wB.multiplyMatrices(i.bones[h].matrixWorld,i.boneInverses[h]),n.addScaledVector(UW.copy(CB).applyMatrix4(wB),l)}}return n.applyMatrix4(this.bindMatrixInverse)}}class uM extends zi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qd extends Ms{constructor(e=null,n=1,i=1,r,a,l,h,f,p=Ta,v=Ta,T,y){super(null,l,h,f,p,v,r,a,T,y),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OB=new Fn,FW=new Fn;class HS{constructor(e=[],n=[]){this.uuid=Fc(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Fn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Fn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const h=e[a]?e[a].matrixWorld:FW;OB.multiplyMatrices(h,n[a]),OB.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new HS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Qd(n,e,e,ho,Rr);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let l=n[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new uM),this.bones.push(l),this.boneInverses.push(new Fn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,a=n.length;r<a;r++){const l=n[r];e.bones.push(l.uuid);const h=i[r];e.boneInverses.push(h.toArray())}return e}}class Xv extends ns{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ty=new Fn,NB=new Fn,s$=[],LB=new Ro,HW=new Fn,lE=new _r,uE=new wo;class _2 extends _r{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Xv(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,HW)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ro),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,ty),LB.copy(e.boundingBox).applyMatrix4(ty),this.boundingBox.union(LB)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new wo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,ty),uE.copy(e.boundingSphere).applyMatrix4(ty),this.boundingSphere.union(uE)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,l=e*a+1;for(let h=0;h<i.length;h++)i[h]=r[l+h]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(lE.geometry=this.geometry,lE.material=this.material,lE.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uE.copy(this.boundingSphere),uE.applyMatrix4(i),e.ray.intersectsSphere(uE)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,ty),NB.multiplyMatrices(i,ty),lE.matrixWorld=NB,lE.raycast(e,s$);for(let l=0,h=s$.length;l<h;l++){const f=s$[l];f.instanceId=a,f.object=this,n.push(f)}s$.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Xv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Qd(new Float32Array(r*this.count),r,this.count,kS,Rr));const a=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const h=this.geometry.morphTargetsRelative?1:1-l,f=r*e;a[f]=h,a.set(i,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const yR=new be,GW=new be,zW=new ci;let G0=class{constructor(e=new be(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=yR.subVectors(i,n).cross(GW.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(yR),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||zW.getNormalMatrix(e),r=this.coplanarPoint(yR).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const sv=new wo,VW=new It(.5,.5),r$=new be;class gT{constructor(e=new G0,n=new G0,i=new G0,r=new G0,a=new G0,l=new G0){this.planes=[e,n,i,r,a,l]}set(e,n,i,r,a,l){const h=this.planes;return h[0].copy(e),h[1].copy(n),h[2].copy(i),h[3].copy(r),h[4].copy(a),h[5].copy(l),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Lh){const i=this.planes,r=e.elements,a=r[0],l=r[1],h=r[2],f=r[3],p=r[4],v=r[5],T=r[6],y=r[7],S=r[8],$=r[9],M=r[10],C=r[11],E=r[12],w=r[13],I=r[14],O=r[15];if(i[0].setComponents(f-a,y-p,C-S,O-E).normalize(),i[1].setComponents(f+a,y+p,C+S,O+E).normalize(),i[2].setComponents(f+l,y+v,C+$,O+w).normalize(),i[3].setComponents(f-l,y-v,C-$,O-w).normalize(),i[4].setComponents(f-h,y-T,C-M,O-I).normalize(),n===Lh)i[5].setComponents(f+h,y+T,C+M,O+I).normalize();else if(n===aS)i[5].setComponents(h,T,M,I).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),sv.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sv)}intersectsSprite(e){sv.center.set(0,0,0);const n=VW.distanceTo(e.center);return sv.radius=.7071067811865476+n,sv.applyMatrix4(e.matrixWorld),this.intersectsSphere(sv)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(r$.x=r.normal.x>0?e.max.x:e.min.x,r$.y=r.normal.y>0?e.max.y:e.min.y,r$.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(r$)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const tp=new Fn,np=new gT;class cM{constructor(){this.coordinateSystem=Lh}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(tp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),np.setFromProjectionMatrix(tp,this.coordinateSystem),np.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(tp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),np.setFromProjectionMatrix(tp,this.coordinateSystem),np.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(tp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),np.setFromProjectionMatrix(tp,this.coordinateSystem),np.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(tp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),np.setFromProjectionMatrix(tp,this.coordinateSystem),np.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(tp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),np.setFromProjectionMatrix(tp,this.coordinateSystem),np.containsPoint(e))return!0}return!1}clone(){return new cM}}function TR(s,e){return s-e}function WW(s,e){return s.z-e.z}function XW(s,e){return e.z-s.z}class jW{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){const a=this.pool,l=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const h=a[this.index];l.push(h),this.index++,h.start=e,h.count=n,h.z=i,h.index=r}reset(){this.list.length=0,this.index=0}}const Xu=new Fn,YW=new on(1,1,1),DB=new gT,KW=new cM,o$=new Ro,rv=new wo,cE=new be,BB=new be,qW=new be,ER=new jW,Cl=new _r,a$=[];function JW(s,e,n=0){const i=e.itemSize;if(s.isInterleavedBufferAttribute||s.array.constructor!==e.array.constructor){const r=s.count;for(let a=0;a<r;a++)for(let l=0;l<i;l++)e.setComponent(a+n,l,s.getComponent(a,l))}else e.array.set(s.array,n*i);e.needsUpdate=!0}function ov(s,e){if(s.constructor!==e.constructor){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++)e[i]=s[i]}else{const n=Math.min(s.length,e.length);e.set(new s.constructor(s.buffer,0,n))}}class KH extends _r{constructor(e,n,i=n*2,r){super(new ui,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new Qd(n,e,e,ho,Rr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new Qd(n,e,e,PS,xp);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new Qd(n,e,e,ho,Rr);i.colorSpace=Yi.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:h,itemSize:f,normalized:p}=l,v=new h.constructor(i*f),T=new ns(v,f,p);n.setAttribute(a,T)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new ns(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=n.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ro);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Xu),this.getBoundingBoxAt(a,o$).applyMatrix4(Xu),e.union(o$)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wo);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,Xu),this.getBoundingSphereAt(a,rv).applyMatrix4(Xu),e.union(rv)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(TR),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Xu.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const l=this._colorsTexture;return l&&(YW.toArray(l.image.data,r*4),l.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const l=e.getIndex();if(l!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?l.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(TR),f=this._availableGeometryIds.shift(),a[f]=r):(f=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(f,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,f}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),l=n.getIndex(),h=this._geometryInfo[e];if(r&&l.count>h.reservedIndexCount||n.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=h.vertexStart,p=h.reservedVertexCount;h.vertexCount=n.getAttribute("position").count;for(const v in i.attributes){const T=n.getAttribute(v),y=i.getAttribute(v);JW(T,y,f);const S=T.itemSize;for(let $=T.count,M=p;$<M;$++){const C=f+$;for(let E=0;E<S;E++)y.setComponent(C,E,0)}y.needsUpdate=!0,y.addUpdateRange(f*S,p*S)}if(r){const v=h.indexStart,T=h.reservedIndexCount;h.indexCount=n.getIndex().count;for(let y=0;y<l.count;y++)a.setX(v+y,f+l.getX(y));for(let y=l.count,S=T;y<S;y++)a.setX(v+y,f);a.needsUpdate=!0,a.addUpdateRange(v,h.reservedIndexCount)}return h.start=r?h.indexStart:h.vertexStart,h.count=r?h.indexCount:h.vertexCount,h.boundingBox=null,n.boundingBox!==null&&(h.boundingBox=n.boundingBox.clone()),h.boundingSphere=null,n.boundingSphere!==null&&(h.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const i=this._geometryInfo,r=i.map((l,h)=>h).sort((l,h)=>i[l].vertexStart-i[h].vertexStart),a=this.geometry;for(let l=0,h=i.length;l<h;l++){const f=r[l],p=i[f];if(p.active!==!1){if(a.index!==null){if(p.indexStart!==n){const{indexStart:v,vertexStart:T,reservedIndexCount:y}=p,S=a.index,$=S.array,M=e-T;for(let C=v;C<v+y;C++)$[C]=$[C]+M;S.array.copyWithin(n,v,v+y),S.addUpdateRange(n,y),p.indexStart=n}n+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:v,reservedVertexCount:T}=p,y=a.attributes;for(const S in y){const $=y[S],{array:M,itemSize:C}=$;M.copyWithin(e*C,v*C,(v+T)*C),$.addUpdateRange(e*C,T*C)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=a.index?p.indexStart:p.vertexStart,this._nextIndexStart=a.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Ro,l=i.index,h=i.attributes.position;for(let f=r.start,p=r.start+r.count;f<p;f++){let v=f;l&&(v=l.getX(v)),a.expandByPoint(cE.fromBufferAttribute(h,v))}r.boundingBox=a}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new wo;this.getBoundingBoxAt(e,o$),o$.getCenter(a.center);const l=i.index,h=i.attributes.position;let f=0;for(let p=r.start,v=r.start+r.count;p<v;p++){let T=p;l&&(T=l.getX(T)),cE.fromBufferAttribute(h,T),f=Math.max(f,a.center.distanceToSquared(cE))}a.radius=Math.sqrt(f),r.boundingSphere=a}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){const n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(TR);n[n.length-1]===i.length;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);ov(this._multiDrawCounts,r),ov(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const l=this._indirectTexture,h=this._matricesTexture,f=this._colorsTexture;l.dispose(),this._initIndirectTexture(),ov(l.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),ov(h.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),ov(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const i=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...i.map(h=>h.vertexStart+h.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(f=>f.indexStart+f.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new ui,this._initializeGeometry(a));const l=this.geometry;a.index&&ov(a.index.array,l.index.array);for(const h in a.attributes)ov(a.attributes[h].array,l.attributes[h].array)}raycast(e,n){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,l=this.geometry;Cl.material=this.material,Cl.geometry.index=l.index,Cl.geometry.attributes=l.attributes,Cl.geometry.boundingBox===null&&(Cl.geometry.boundingBox=new Ro),Cl.geometry.boundingSphere===null&&(Cl.geometry.boundingSphere=new wo);for(let h=0,f=i.length;h<f;h++){if(!i[h].visible||!i[h].active)continue;const p=i[h].geometryIndex,v=r[p];Cl.geometry.setDrawRange(v.start,v.count),this.getMatrixAt(h,Cl.matrixWorld).premultiply(a),this.getBoundingBoxAt(p,Cl.geometry.boundingBox),this.getBoundingSphereAt(p,Cl.geometry.boundingSphere),Cl.raycast(e,a$);for(let T=0,y=a$.length;T<y;T++){const S=a$[T];S.object=this,S.batchId=h,n.push(S)}a$.length=0}Cl.material=null,Cl.geometry.index=null,Cl.geometry.attributes={},Cl.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=r.getIndex(),h=l===null?1:l.array.BYTES_PER_ELEMENT,f=this._instanceInfo,p=this._multiDrawStarts,v=this._multiDrawCounts,T=this._geometryInfo,y=this.perObjectFrustumCulled,S=this._indirectTexture,$=S.image.data,M=i.isArrayCamera?KW:DB;y&&!i.isArrayCamera&&(Xu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),DB.setFromProjectionMatrix(Xu,e.coordinateSystem));let C=0;if(this.sortObjects){Xu.copy(this.matrixWorld).invert(),cE.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Xu),BB.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Xu);for(let I=0,O=f.length;I<O;I++)if(f[I].visible&&f[I].active){const P=f[I].geometryIndex;this.getMatrixAt(I,Xu),this.getBoundingSphereAt(P,rv).applyMatrix4(Xu);let F=!1;if(y&&(F=!M.intersectsSphere(rv,i)),!F){const V=T[P],X=qW.subVectors(rv.center,cE).dot(BB);ER.push(V.start,V.count,X,I)}}const E=ER.list,w=this.customSort;w===null?E.sort(a.transparent?XW:WW):w.call(this,E,i);for(let I=0,O=E.length;I<O;I++){const P=E[I];p[C]=P.start*h,v[C]=P.count,$[C]=P.index,C++}ER.reset()}else for(let E=0,w=f.length;E<w;E++)if(f[E].visible&&f[E].active){const I=f[E].geometryIndex;let O=!1;if(y&&(this.getMatrixAt(E,Xu),this.getBoundingSphereAt(I,rv).applyMatrix4(Xu),O=!M.intersectsSphere(rv,i)),!O){const P=T[I];p[C]=P.start*h,v[C]=P.count,$[C]=E,C++}}S.needsUpdate=!0,this._multiDrawCount=C,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,a,l){this.onBeforeRender(e,null,r,a,l)}}class Il extends ta{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new on(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const fC=new be,pC=new be,kB=new Fn,hE=new ib,l$=new wo,SR=new be,PB=new be;let em=class extends zi{constructor(e=new ui,n=new Il){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,a=n.count;r<a;r++)fC.fromBufferAttribute(n,r-1),pC.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=fC.distanceTo(pC);e.setAttribute("lineDistance",new _n(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),l$.copy(i.boundingSphere),l$.applyMatrix4(r),l$.radius+=a,e.ray.intersectsSphere(l$)===!1)return;kB.copy(r).invert(),hE.copy(e.ray).applyMatrix4(kB);const h=a/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,p=this.isLineSegments?2:1,v=i.index,y=i.attributes.position;if(v!==null){const S=Math.max(0,l.start),$=Math.min(v.count,l.start+l.count);for(let M=S,C=$-1;M<C;M+=p){const E=v.getX(M),w=v.getX(M+1),I=u$(this,e,hE,f,E,w,M);I&&n.push(I)}if(this.isLineLoop){const M=v.getX($-1),C=v.getX(S),E=u$(this,e,hE,f,M,C,$-1);E&&n.push(E)}}else{const S=Math.max(0,l.start),$=Math.min(y.count,l.start+l.count);for(let M=S,C=$-1;M<C;M+=p){const E=u$(this,e,hE,f,M,M+1,M);E&&n.push(E)}if(this.isLineLoop){const M=u$(this,e,hE,f,$-1,S,$-1);M&&n.push(M)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const h=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}};function u$(s,e,n,i,r,a,l){const h=s.geometry.attributes.position;if(fC.fromBufferAttribute(h,r),pC.fromBufferAttribute(h,a),n.distanceSqToSegment(fC,pC,SR,PB)>i)return;SR.applyMatrix4(s.matrixWorld);const p=e.ray.origin.distanceTo(SR);if(!(p<e.near||p>e.far))return{distance:p,point:PB.clone().applyMatrix4(s.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:s}}const UB=new be,FB=new be;class af extends em{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,a=n.count;r<a;r+=2)UB.fromBufferAttribute(n,r),FB.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+UB.distanceTo(FB);e.setAttribute("lineDistance",new _n(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class v2 extends em{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class hM extends ta{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new on(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const HB=new Fn,ZI=new ib,c$=new wo,h$=new be;class b2 extends zi{constructor(e=new ui,n=new hM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),c$.copy(i.boundingSphere),c$.applyMatrix4(r),c$.radius+=a,e.ray.intersectsSphere(c$)===!1)return;HB.copy(r).invert(),ZI.copy(e.ray).applyMatrix4(HB);const h=a/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,p=i.index,T=i.attributes.position;if(p!==null){const y=Math.max(0,l.start),S=Math.min(p.count,l.start+l.count);for(let $=y,M=S;$<M;$++){const C=p.getX($);h$.fromBufferAttribute(T,C),GB(h$,C,f,r,e,n,this)}}else{const y=Math.max(0,l.start),S=Math.min(T.count,l.start+l.count);for(let $=y,M=S;$<M;$++)h$.fromBufferAttribute(T,$),GB(h$,$,f,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const h=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}}function GB(s,e,n,i,r,a,l){const h=ZI.distanceSqToPoint(s);if(h<n){const f=new be;ZI.closestPointToPoint(s,f),f.applyMatrix4(i);const p=r.ray.origin.distanceTo(f);if(p<r.near||p>r.far)return;a.push({distance:p,distanceToRay:Math.sqrt(h),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class qH extends Ms{constructor(e,n,i,r,a=us,l=us,h,f,p){super(e,n,i,r,a,l,h,f,p),this.isVideoTexture=!0,this.generateMipmaps=!1;const v=this;function T(){v.needsUpdate=!0,e.requestVideoFrameCallback(T)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(T)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ZW extends qH{constructor(e,n,i,r,a,l,h,f){super({},e,n,i,r,a,l,h,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class QW extends Ms{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Ta,this.minFilter=Ta,this.generateMipmaps=!1,this.needsUpdate=!0}}class dM extends Ms{constructor(e,n,i,r,a,l,h,f,p,v,T,y){super(null,l,h,f,p,v,r,a,T,y),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class e9 extends dM{constructor(e,n,i,r,a,l){super(e,n,i,a,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=co,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class t9 extends dM{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,$p),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class JH extends Ms{constructor(e,n,i,r,a,l,h,f,p){super(e,n,i,r,a,l,h,f,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fM extends Ms{constructor(e,n,i=xp,r,a,l,h=Ta,f=Ta,p,v=zy,T=1){if(v!==zy&&v!==Vy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:n,depth:T};super(y,r,a,l,h,f,v,i,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Cg(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class pM extends ui{constructor(e=1,n=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:a},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const l=[],h=[],f=[],p=[],v=n/2,T=Math.PI/2*e,y=n,S=2*T+y,$=i*2+a,M=r+1,C=new be,E=new be;for(let w=0;w<=$;w++){let I=0,O=0,P=0,F=0;if(w<=i){const G=w/i,D=G*Math.PI/2;O=-v-e*Math.cos(D),P=e*Math.sin(D),F=-e*Math.cos(D),I=G*T}else if(w<=i+a){const G=(w-i)/a;O=-v+G*n,P=e,F=0,I=T+G*y}else{const G=(w-i-a)/i,D=G*Math.PI/2;O=v+e*Math.sin(D),P=e*Math.cos(D),F=e*Math.sin(D),I=T+y+G*T}const V=Math.max(0,Math.min(1,I/S));let X=0;w===0?X=.5/r:w===$&&(X=-.5/r);for(let G=0;G<=r;G++){const D=G/r,Z=D*Math.PI*2,Y=Math.sin(Z),j=Math.cos(Z);E.x=-P*j,E.y=O,E.z=P*Y,h.push(E.x,E.y,E.z),C.set(-P*j,F,P*Y),C.normalize(),f.push(C.x,C.y,C.z),p.push(D+X,V)}if(w>0){const G=(w-1)*M;for(let D=0;D<r;D++){const Z=G+D,Y=G+D+1,j=w*M+D,ne=w*M+D+1;l.push(Z,Y,j),l.push(Y,ne,j)}}}this.setIndex(l),this.setAttribute("position",new _n(h,3)),this.setAttribute("normal",new _n(f,3)),this.setAttribute("uv",new _n(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pM(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class mM extends ui{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const a=[],l=[],h=[],f=[],p=new be,v=new It;l.push(0,0,0),h.push(0,0,1),f.push(.5,.5);for(let T=0,y=3;T<=n;T++,y+=3){const S=i+T/n*r;p.x=e*Math.cos(S),p.y=e*Math.sin(S),l.push(p.x,p.y,p.z),h.push(0,0,1),v.x=(l[y]/e+1)/2,v.y=(l[y+1]/e+1)/2,f.push(v.x,v.y)}for(let T=1;T<=n;T++)a.push(T,T+1,0);this.setIndex(a),this.setAttribute("position",new _n(l,3)),this.setAttribute("normal",new _n(h,3)),this.setAttribute("uv",new _n(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class GS extends ui{constructor(e=1,n=1,i=1,r=32,a=1,l=!1,h=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:a,openEnded:l,thetaStart:h,thetaLength:f};const p=this;r=Math.floor(r),a=Math.floor(a);const v=[],T=[],y=[],S=[];let $=0;const M=[],C=i/2;let E=0;w(),l===!1&&(e>0&&I(!0),n>0&&I(!1)),this.setIndex(v),this.setAttribute("position",new _n(T,3)),this.setAttribute("normal",new _n(y,3)),this.setAttribute("uv",new _n(S,2));function w(){const O=new be,P=new be;let F=0;const V=(n-e)/i;for(let X=0;X<=a;X++){const G=[],D=X/a,Z=D*(n-e)+e;for(let Y=0;Y<=r;Y++){const j=Y/r,ne=j*f+h,ee=Math.sin(ne),z=Math.cos(ne);P.x=Z*ee,P.y=-D*i+C,P.z=Z*z,T.push(P.x,P.y,P.z),O.set(ee,V,z).normalize(),y.push(O.x,O.y,O.z),S.push(j,1-D),G.push($++)}M.push(G)}for(let X=0;X<r;X++)for(let G=0;G<a;G++){const D=M[G][X],Z=M[G+1][X],Y=M[G+1][X+1],j=M[G][X+1];(e>0||G!==0)&&(v.push(D,Z,j),F+=3),(n>0||G!==a-1)&&(v.push(Z,Y,j),F+=3)}p.addGroup(E,F,0),E+=F}function I(O){const P=$,F=new It,V=new be;let X=0;const G=O===!0?e:n,D=O===!0?1:-1;for(let Y=1;Y<=r;Y++)T.push(0,C*D,0),y.push(0,D,0),S.push(.5,.5),$++;const Z=$;for(let Y=0;Y<=r;Y++){const ne=Y/r*f+h,ee=Math.cos(ne),z=Math.sin(ne);V.x=G*z,V.y=C*D,V.z=G*ee,T.push(V.x,V.y,V.z),y.push(0,D,0),F.x=ee*.5+.5,F.y=z*.5*D+.5,S.push(F.x,F.y),$++}for(let Y=0;Y<r;Y++){const j=P+Y,ne=Z+Y;O===!0?v.push(ne,ne+1,j):v.push(ne+1,ne,j),X+=3}p.addGroup(E,X,O===!0?1:2),E+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new GS(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zS extends GS{constructor(e=1,n=1,i=32,r=1,a=!1,l=0,h=Math.PI*2){super(0,e,n,i,r,a,l,h),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:h}}static fromJSON(e){return new zS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xg extends ui{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const a=[],l=[];h(r),p(i),v(),this.setAttribute("position",new _n(a,3)),this.setAttribute("normal",new _n(a.slice(),3)),this.setAttribute("uv",new _n(l,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function h(w){const I=new be,O=new be,P=new be;for(let F=0;F<n.length;F+=3)S(n[F+0],I),S(n[F+1],O),S(n[F+2],P),f(I,O,P,w)}function f(w,I,O,P){const F=P+1,V=[];for(let X=0;X<=F;X++){V[X]=[];const G=w.clone().lerp(O,X/F),D=I.clone().lerp(O,X/F),Z=F-X;for(let Y=0;Y<=Z;Y++)Y===0&&X===F?V[X][Y]=G:V[X][Y]=G.clone().lerp(D,Y/Z)}for(let X=0;X<F;X++)for(let G=0;G<2*(F-X)-1;G++){const D=Math.floor(G/2);G%2===0?(y(V[X][D+1]),y(V[X+1][D]),y(V[X][D])):(y(V[X][D+1]),y(V[X+1][D+1]),y(V[X+1][D]))}}function p(w){const I=new be;for(let O=0;O<a.length;O+=3)I.x=a[O+0],I.y=a[O+1],I.z=a[O+2],I.normalize().multiplyScalar(w),a[O+0]=I.x,a[O+1]=I.y,a[O+2]=I.z}function v(){const w=new be;for(let I=0;I<a.length;I+=3){w.x=a[I+0],w.y=a[I+1],w.z=a[I+2];const O=C(w)/2/Math.PI+.5,P=E(w)/Math.PI+.5;l.push(O,1-P)}$(),T()}function T(){for(let w=0;w<l.length;w+=6){const I=l[w+0],O=l[w+2],P=l[w+4],F=Math.max(I,O,P),V=Math.min(I,O,P);F>.9&&V<.1&&(I<.2&&(l[w+0]+=1),O<.2&&(l[w+2]+=1),P<.2&&(l[w+4]+=1))}}function y(w){a.push(w.x,w.y,w.z)}function S(w,I){const O=w*3;I.x=e[O+0],I.y=e[O+1],I.z=e[O+2]}function $(){const w=new be,I=new be,O=new be,P=new be,F=new It,V=new It,X=new It;for(let G=0,D=0;G<a.length;G+=9,D+=6){w.set(a[G+0],a[G+1],a[G+2]),I.set(a[G+3],a[G+4],a[G+5]),O.set(a[G+6],a[G+7],a[G+8]),F.set(l[D+0],l[D+1]),V.set(l[D+2],l[D+3]),X.set(l[D+4],l[D+5]),P.copy(w).add(I).add(O).divideScalar(3);const Z=C(P);M(F,D+0,w,Z),M(V,D+2,I,Z),M(X,D+4,O,Z)}}function M(w,I,O,P){P<0&&w.x===1&&(l[I]=w.x-1),O.x===0&&O.z===0&&(l[I]=P/2/Math.PI+.5)}function C(w){return Math.atan2(w.z,-w.x)}function E(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xg(e.vertices,e.indices,e.radius,e.details)}}class gM extends Xg{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new gM(e.radius,e.detail)}}const d$=new be,f$=new be,AR=new be,p$=new Ku;class ZH extends ui{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),a=Math.cos(kv*n),l=e.getIndex(),h=e.getAttribute("position"),f=l?l.count:h.count,p=[0,0,0],v=["a","b","c"],T=new Array(3),y={},S=[];for(let $=0;$<f;$+=3){l?(p[0]=l.getX($),p[1]=l.getX($+1),p[2]=l.getX($+2)):(p[0]=$,p[1]=$+1,p[2]=$+2);const{a:M,b:C,c:E}=p$;if(M.fromBufferAttribute(h,p[0]),C.fromBufferAttribute(h,p[1]),E.fromBufferAttribute(h,p[2]),p$.getNormal(AR),T[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,T[1]=`${Math.round(C.x*r)},${Math.round(C.y*r)},${Math.round(C.z*r)}`,T[2]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,!(T[0]===T[1]||T[1]===T[2]||T[2]===T[0]))for(let w=0;w<3;w++){const I=(w+1)%3,O=T[w],P=T[I],F=p$[v[w]],V=p$[v[I]],X=`${O}_${P}`,G=`${P}_${O}`;G in y&&y[G]?(AR.dot(y[G].normal)<=a&&(S.push(F.x,F.y,F.z),S.push(V.x,V.y,V.z)),y[G]=null):X in y||(y[X]={index0:p[w],index1:p[I],normal:AR.clone()})}}for(const $ in y)if(y[$]){const{index0:M,index1:C}=y[$];d$.fromBufferAttribute(h,M),f$.fromBufferAttribute(h,C),S.push(d$.x,d$.y,d$.z),S.push(f$.x,f$.y,f$.z)}this.setAttribute("position",new _n(S,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class lf{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),a=0;n.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),a+=i.distanceTo(r),n.push(a),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let r=0;const a=i.length;let l;n?l=n:l=e*i[a-1];let h=0,f=a-1,p;for(;h<=f;)if(r=Math.floor(h+(f-h)/2),p=i[r]-l,p<0)h=r+1;else if(p>0)f=r-1;else{f=r;break}if(r=f,i[r]===l)return r/(a-1);const v=i[r],y=i[r+1]-v,S=(l-v)/y;return(r+S)/(a-1)}getTangent(e,n){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const l=this.getPoint(r),h=this.getPoint(a),f=n||(l.isVector2?new It:new be);return f.copy(h).sub(l).normalize(),f}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new be,r=[],a=[],l=[],h=new be,f=new Fn;for(let S=0;S<=e;S++){const $=S/e;r[S]=this.getTangentAt($,new be)}a[0]=new be,l[0]=new be;let p=Number.MAX_VALUE;const v=Math.abs(r[0].x),T=Math.abs(r[0].y),y=Math.abs(r[0].z);v<=p&&(p=v,i.set(1,0,0)),T<=p&&(p=T,i.set(0,1,0)),y<=p&&i.set(0,0,1),h.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],h),l[0].crossVectors(r[0],a[0]);for(let S=1;S<=e;S++){if(a[S]=a[S-1].clone(),l[S]=l[S-1].clone(),h.crossVectors(r[S-1],r[S]),h.length()>Number.EPSILON){h.normalize();const $=Math.acos(ai(r[S-1].dot(r[S]),-1,1));a[S].applyMatrix4(f.makeRotationAxis(h,$))}l[S].crossVectors(r[S],a[S])}if(n===!0){let S=Math.acos(ai(a[0].dot(a[e]),-1,1));S/=e,r[0].dot(h.crossVectors(a[0],a[e]))>0&&(S=-S);for(let $=1;$<=e;$++)a[$].applyMatrix4(f.makeRotationAxis(r[$],S*$)),l[$].crossVectors(r[$],a[$])}return{tangents:r,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _M extends lf{constructor(e=0,n=0,i=1,r=1,a=0,l=Math.PI*2,h=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=h,this.aRotation=f}getPoint(e,n=new It){const i=n,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(l?a=0:a=r),this.aClockwise===!0&&!l&&(a===r?a=-r:a=a-r);const h=this.aStartAngle+e*a;let f=this.aX+this.xRadius*Math.cos(h),p=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const v=Math.cos(this.aRotation),T=Math.sin(this.aRotation),y=f-this.aX,S=p-this.aY;f=y*v-S*T+this.aX,p=y*T+S*v+this.aY}return i.set(f,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class QH extends _M{constructor(e,n,i,r,a,l){super(e,n,i,i,r,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function y2(){let s=0,e=0,n=0,i=0;function r(a,l,h,f){s=a,e=h,n=-3*a+3*l-2*h-f,i=2*a-2*l+h+f}return{initCatmullRom:function(a,l,h,f,p){r(l,h,p*(h-a),p*(f-l))},initNonuniformCatmullRom:function(a,l,h,f,p,v,T){let y=(l-a)/p-(h-a)/(p+v)+(h-l)/v,S=(h-l)/v-(f-l)/(v+T)+(f-h)/T;y*=v,S*=v,r(l,h,y,S)},calc:function(a){const l=a*a,h=l*a;return s+e*a+n*l+i*h}}}const m$=new be,$R=new y2,xR=new y2,CR=new y2;class eG extends lf{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new be){const i=n,r=this.points,a=r.length,l=(a-(this.closed?0:1))*e;let h=Math.floor(l),f=l-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/a)+1)*a:f===0&&h===a-1&&(h=a-2,f=1);let p,v;this.closed||h>0?p=r[(h-1)%a]:(m$.subVectors(r[0],r[1]).add(r[0]),p=m$);const T=r[h%a],y=r[(h+1)%a];if(this.closed||h+2<a?v=r[(h+2)%a]:(m$.subVectors(r[a-1],r[a-2]).add(r[a-1]),v=m$),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let $=Math.pow(p.distanceToSquared(T),S),M=Math.pow(T.distanceToSquared(y),S),C=Math.pow(y.distanceToSquared(v),S);M<1e-4&&(M=1),$<1e-4&&($=M),C<1e-4&&(C=M),$R.initNonuniformCatmullRom(p.x,T.x,y.x,v.x,$,M,C),xR.initNonuniformCatmullRom(p.y,T.y,y.y,v.y,$,M,C),CR.initNonuniformCatmullRom(p.z,T.z,y.z,v.z,$,M,C)}else this.curveType==="catmullrom"&&($R.initCatmullRom(p.x,T.x,y.x,v.x,this.tension),xR.initCatmullRom(p.y,T.y,y.y,v.y,this.tension),CR.initCatmullRom(p.z,T.z,y.z,v.z,this.tension));return i.set($R.calc(f),xR.calc(f),CR.calc(f)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new be().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zB(s,e,n,i,r){const a=(i-e)*.5,l=(r-n)*.5,h=s*s,f=s*h;return(2*n-2*i+a+l)*f+(-3*n+3*i-2*a-l)*h+a*s+n}function n9(s,e){const n=1-s;return n*n*e}function i9(s,e){return 2*(1-s)*s*e}function s9(s,e){return s*s*e}function VE(s,e,n,i){return n9(s,e)+i9(s,n)+s9(s,i)}function r9(s,e){const n=1-s;return n*n*n*e}function o9(s,e){const n=1-s;return 3*n*n*s*e}function a9(s,e){return 3*(1-s)*s*s*e}function l9(s,e){return s*s*s*e}function WE(s,e,n,i,r){return r9(s,e)+o9(s,n)+a9(s,i)+l9(s,r)}class T2 extends lf{constructor(e=new It,n=new It,i=new It,r=new It){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new It){const i=n,r=this.v0,a=this.v1,l=this.v2,h=this.v3;return i.set(WE(e,r.x,a.x,l.x,h.x),WE(e,r.y,a.y,l.y,h.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class tG extends lf{constructor(e=new be,n=new be,i=new be,r=new be){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new be){const i=n,r=this.v0,a=this.v1,l=this.v2,h=this.v3;return i.set(WE(e,r.x,a.x,l.x,h.x),WE(e,r.y,a.y,l.y,h.y),WE(e,r.z,a.z,l.z,h.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class E2 extends lf{constructor(e=new It,n=new It){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new It){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new It){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nG extends lf{constructor(e=new be,n=new be){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new be){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new be){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class S2 extends lf{constructor(e=new It,n=new It,i=new It){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new It){const i=n,r=this.v0,a=this.v1,l=this.v2;return i.set(VE(e,r.x,a.x,l.x),VE(e,r.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class A2 extends lf{constructor(e=new be,n=new be,i=new be){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new be){const i=n,r=this.v0,a=this.v1,l=this.v2;return i.set(VE(e,r.x,a.x,l.x),VE(e,r.y,a.y,l.y),VE(e,r.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $2 extends lf{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new It){const i=n,r=this.points,a=(r.length-1)*e,l=Math.floor(a),h=a-l,f=r[l===0?l:l-1],p=r[l],v=r[l>r.length-2?r.length-1:l+1],T=r[l>r.length-3?r.length-1:l+2];return i.set(zB(h,f.x,p.x,v.x,T.x),zB(h,f.y,p.y,v.y,T.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new It().fromArray(r))}return this}}var mC=Object.freeze({__proto__:null,ArcCurve:QH,CatmullRomCurve3:eG,CubicBezierCurve:T2,CubicBezierCurve3:tG,EllipseCurve:_M,LineCurve:E2,LineCurve3:nG,QuadraticBezierCurve:S2,QuadraticBezierCurve3:A2,SplineCurve:$2});class iG extends lf{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new mC[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const l=r[a]-i,h=this.curves[a],f=h.getLength(),p=f===0?0:1-l/f;return h.getPointAt(p,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const l=a[r],h=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,f=l.getPoints(h);for(let p=0;p<f.length;p++){const v=f[p];i&&i.equals(v)||(n.push(v),i=v)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new mC[r.type]().fromJSON(r))}return this}}class gC extends iG{constructor(e){super(),this.type="Path",this.currentPoint=new It,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new E2(this.currentPoint.clone(),new It(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const a=new S2(this.currentPoint.clone(),new It(e,n),new It(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,a,l){const h=new T2(this.currentPoint.clone(),new It(e,n),new It(i,r),new It(a,l));return this.curves.push(h),this.currentPoint.set(a,l),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new $2(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,a,l){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+h,n+f,i,r,a,l),this}absarc(e,n,i,r,a,l){return this.absellipse(e,n,i,i,r,a,l),this}ellipse(e,n,i,r,a,l,h,f){const p=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(e+p,n+v,i,r,a,l,h,f),this}absellipse(e,n,i,r,a,l,h,f){const p=new _M(e,n,i,r,a,l,h,f);if(this.curves.length>0){const T=p.getPoint(0);T.equals(this.currentPoint)||this.lineTo(T.x,T.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ig extends gC{constructor(e){super(e),this.uuid=Fc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new gC().fromJSON(r))}return this}}function u9(s,e,n=2){const i=e&&e.length,r=i?e[0]*n:s.length;let a=sG(s,0,r,n,!0);const l=[];if(!a||a.next===a.prev)return l;let h,f,p;if(i&&(a=p9(s,e,a,n)),s.length>80*n){h=1/0,f=1/0;let v=-1/0,T=-1/0;for(let y=n;y<r;y+=n){const S=s[y],$=s[y+1];S<h&&(h=S),$<f&&(f=$),S>v&&(v=S),$>T&&(T=$)}p=Math.max(v-h,T-f),p=p!==0?32767/p:0}return uS(a,l,n,h,f,p,0),l}function sG(s,e,n,i,r){let a;if(r===$9(s,e,n,i)>0)for(let l=e;l<n;l+=i)a=VB(l/i|0,s[l],s[l+1],a);else for(let l=n-i;l>=e;l-=i)a=VB(l/i|0,s[l],s[l+1],a);return a&&qy(a,a.next)&&(hS(a),a=a.next),a}function jv(s,e){if(!s)return s;e||(e=s);let n=s,i;do if(i=!1,!n.steiner&&(qy(n,n.next)||Ur(n.prev,n,n.next)===0)){if(hS(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function uS(s,e,n,i,r,a,l){if(!s)return;!l&&a&&b9(s,i,r,a);let h=s;for(;s.prev!==s.next;){const f=s.prev,p=s.next;if(a?h9(s,i,r,a):c9(s)){e.push(f.i,s.i,p.i),hS(s),s=p.next,h=p.next;continue}if(s=p,s===h){l?l===1?(s=d9(jv(s),e),uS(s,e,n,i,r,a,2)):l===2&&f9(s,e,n,i,r,a):uS(jv(s),e,n,i,r,a,1);break}}}function c9(s){const e=s.prev,n=s,i=s.next;if(Ur(e,n,i)>=0)return!1;const r=e.x,a=n.x,l=i.x,h=e.y,f=n.y,p=i.y,v=Math.min(r,a,l),T=Math.min(h,f,p),y=Math.max(r,a,l),S=Math.max(h,f,p);let $=i.next;for(;$!==e;){if($.x>=v&&$.x<=y&&$.y>=T&&$.y<=S&&xE(r,h,a,f,l,p,$.x,$.y)&&Ur($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function h9(s,e,n,i){const r=s.prev,a=s,l=s.next;if(Ur(r,a,l)>=0)return!1;const h=r.x,f=a.x,p=l.x,v=r.y,T=a.y,y=l.y,S=Math.min(h,f,p),$=Math.min(v,T,y),M=Math.max(h,f,p),C=Math.max(v,T,y),E=QI(S,$,e,n,i),w=QI(M,C,e,n,i);let I=s.prevZ,O=s.nextZ;for(;I&&I.z>=E&&O&&O.z<=w;){if(I.x>=S&&I.x<=M&&I.y>=$&&I.y<=C&&I!==r&&I!==l&&xE(h,v,f,T,p,y,I.x,I.y)&&Ur(I.prev,I,I.next)>=0||(I=I.prevZ,O.x>=S&&O.x<=M&&O.y>=$&&O.y<=C&&O!==r&&O!==l&&xE(h,v,f,T,p,y,O.x,O.y)&&Ur(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;I&&I.z>=E;){if(I.x>=S&&I.x<=M&&I.y>=$&&I.y<=C&&I!==r&&I!==l&&xE(h,v,f,T,p,y,I.x,I.y)&&Ur(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;O&&O.z<=w;){if(O.x>=S&&O.x<=M&&O.y>=$&&O.y<=C&&O!==r&&O!==l&&xE(h,v,f,T,p,y,O.x,O.y)&&Ur(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function d9(s,e){let n=s;do{const i=n.prev,r=n.next.next;!qy(i,r)&&oG(i,n,n.next,r)&&cS(i,r)&&cS(r,i)&&(e.push(i.i,n.i,r.i),hS(n),hS(n.next),n=s=r),n=n.next}while(n!==s);return jv(n)}function f9(s,e,n,i,r,a){let l=s;do{let h=l.next.next;for(;h!==l.prev;){if(l.i!==h.i&&E9(l,h)){let f=aG(l,h);l=jv(l,l.next),f=jv(f,f.next),uS(l,e,n,i,r,a,0),uS(f,e,n,i,r,a,0);return}h=h.next}l=l.next}while(l!==s)}function p9(s,e,n,i){const r=[];for(let a=0,l=e.length;a<l;a++){const h=e[a]*i,f=a<l-1?e[a+1]*i:s.length,p=sG(s,h,f,i,!1);p===p.next&&(p.steiner=!0),r.push(T9(p))}r.sort(m9);for(let a=0;a<r.length;a++)n=g9(r[a],n);return n}function m9(s,e){let n=s.x-e.x;if(n===0&&(n=s.y-e.y,n===0)){const i=(s.next.y-s.y)/(s.next.x-s.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function g9(s,e){const n=_9(s,e);if(!n)return e;const i=aG(n,s);return jv(i,i.next),jv(n,n.next)}function _9(s,e){let n=e;const i=s.x,r=s.y;let a=-1/0,l;if(qy(s,n))return n;do{if(qy(s,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const T=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(T<=i&&T>a&&(a=T,l=n.x<n.next.x?n:n.next,T===i))return l}n=n.next}while(n!==e);if(!l)return null;const h=l,f=l.x,p=l.y;let v=1/0;n=l;do{if(i>=n.x&&n.x>=f&&i!==n.x&&rG(r<p?i:a,r,f,p,r<p?a:i,r,n.x,n.y)){const T=Math.abs(r-n.y)/(i-n.x);cS(n,s)&&(T<v||T===v&&(n.x>l.x||n.x===l.x&&v9(l,n)))&&(l=n,v=T)}n=n.next}while(n!==h);return l}function v9(s,e){return Ur(s.prev,s,e.prev)<0&&Ur(e.next,s,s.next)<0}function b9(s,e,n,i){let r=s;do r.z===0&&(r.z=QI(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==s);r.prevZ.nextZ=null,r.prevZ=null,y9(r)}function y9(s){let e,n=1;do{let i=s,r;s=null;let a=null;for(e=0;i;){e++;let l=i,h=0;for(let p=0;p<n&&(h++,l=l.nextZ,!!l);p++);let f=n;for(;h>0||f>0&&l;)h!==0&&(f===0||!l||i.z<=l.z)?(r=i,i=i.nextZ,h--):(r=l,l=l.nextZ,f--),a?a.nextZ=r:s=r,r.prevZ=a,a=r;i=l}a.nextZ=null,n*=2}while(e>1);return s}function QI(s,e,n,i,r){return s=(s-n)*r|0,e=(e-i)*r|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,s|e<<1}function T9(s){let e=s,n=s;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==s);return n}function rG(s,e,n,i,r,a,l,h){return(r-l)*(e-h)>=(s-l)*(a-h)&&(s-l)*(i-h)>=(n-l)*(e-h)&&(n-l)*(a-h)>=(r-l)*(i-h)}function xE(s,e,n,i,r,a,l,h){return!(s===l&&e===h)&&rG(s,e,n,i,r,a,l,h)}function E9(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!S9(s,e)&&(cS(s,e)&&cS(e,s)&&A9(s,e)&&(Ur(s.prev,s,e.prev)||Ur(s,e.prev,e))||qy(s,e)&&Ur(s.prev,s,s.next)>0&&Ur(e.prev,e,e.next)>0)}function Ur(s,e,n){return(e.y-s.y)*(n.x-e.x)-(e.x-s.x)*(n.y-e.y)}function qy(s,e){return s.x===e.x&&s.y===e.y}function oG(s,e,n,i){const r=_$(Ur(s,e,n)),a=_$(Ur(s,e,i)),l=_$(Ur(n,i,s)),h=_$(Ur(n,i,e));return!!(r!==a&&l!==h||r===0&&g$(s,n,e)||a===0&&g$(s,i,e)||l===0&&g$(n,s,i)||h===0&&g$(n,e,i))}function g$(s,e,n){return e.x<=Math.max(s.x,n.x)&&e.x>=Math.min(s.x,n.x)&&e.y<=Math.max(s.y,n.y)&&e.y>=Math.min(s.y,n.y)}function _$(s){return s>0?1:s<0?-1:0}function S9(s,e){let n=s;do{if(n.i!==s.i&&n.next.i!==s.i&&n.i!==e.i&&n.next.i!==e.i&&oG(n,n.next,s,e))return!0;n=n.next}while(n!==s);return!1}function cS(s,e){return Ur(s.prev,s,s.next)<0?Ur(s,e,s.next)>=0&&Ur(s,s.prev,e)>=0:Ur(s,e,s.prev)<0||Ur(s,s.next,e)<0}function A9(s,e){let n=s,i=!1;const r=(s.x+e.x)/2,a=(s.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==s);return i}function aG(s,e){const n=eO(s.i,s.x,s.y),i=eO(e.i,e.x,e.y),r=s.next,a=e.prev;return s.next=e,e.prev=s,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function VB(s,e,n,i){const r=eO(s,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function hS(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function eO(s,e,n){return{i:s,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $9(s,e,n,i){let r=0;for(let a=e,l=n-i;a<n;a+=i)r+=(s[l]-s[a])*(s[a+1]+s[l+1]),l=a;return r}class x9{static triangulate(e,n,i=2){return u9(e,n,i)}}class qd{static area(e){const n=e.length;let i=0;for(let r=n-1,a=0;a<n;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return qd.area(e)<0}static triangulateShape(e,n){const i=[],r=[],a=[];WB(e),XB(i,e);let l=e.length;n.forEach(WB);for(let f=0;f<n.length;f++)r.push(l),l+=n[f].length,XB(i,n[f]);const h=x9.triangulate(i,r);for(let f=0;f<h.length;f+=3)a.push(h.slice(f,f+3));return a}}function WB(s){const e=s.length;e>2&&s[e-1].equals(s[0])&&s.pop()}function XB(s,e){for(let n=0;n<e.length;n++)s.push(e[n].x),s.push(e[n].y)}class vM extends ui{constructor(e=new Ig([new It(.5,.5),new It(-.5,.5),new It(-.5,-.5),new It(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let h=0,f=e.length;h<f;h++){const p=e[h];l(p)}this.setAttribute("position",new _n(r,3)),this.setAttribute("uv",new _n(a,2)),this.computeVertexNormals();function l(h){const f=[],p=n.curveSegments!==void 0?n.curveSegments:12,v=n.steps!==void 0?n.steps:1,T=n.depth!==void 0?n.depth:1;let y=n.bevelEnabled!==void 0?n.bevelEnabled:!0,S=n.bevelThickness!==void 0?n.bevelThickness:.2,$=n.bevelSize!==void 0?n.bevelSize:S-.1,M=n.bevelOffset!==void 0?n.bevelOffset:0,C=n.bevelSegments!==void 0?n.bevelSegments:3;const E=n.extrudePath,w=n.UVGenerator!==void 0?n.UVGenerator:C9;let I,O=!1,P,F,V,X;E&&(I=E.getSpacedPoints(v),O=!0,y=!1,P=E.computeFrenetFrames(v,!1),F=new be,V=new be,X=new be),y||(C=0,S=0,$=0,M=0);const G=h.extractPoints(p);let D=G.shape;const Z=G.holes;if(!qd.isClockWise(D)){D=D.reverse();for(let J=0,Se=Z.length;J<Se;J++){const Ae=Z[J];qd.isClockWise(Ae)&&(Z[J]=Ae.reverse())}}function j(J){const Ae=10000000000000001e-36;let we=J[0];for(let Ie=1;Ie<=J.length;Ie++){const dt=Ie%J.length,Qe=J[dt],vt=Qe.x-we.x,et=Qe.y-we.y,_e=vt*vt+et*et,se=Math.max(Math.abs(Qe.x),Math.abs(Qe.y),Math.abs(we.x),Math.abs(we.y)),$e=Ae*se*se;if(_e<=$e){J.splice(dt,1),Ie--;continue}we=Qe}}j(D),Z.forEach(j);const ne=Z.length,ee=D;for(let J=0;J<ne;J++){const Se=Z[J];D=D.concat(Se)}function z(J,Se,Ae){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),J.clone().addScaledVector(Se,Ae)}const te=D.length;function ce(J,Se,Ae){let we,Ie,dt;const Qe=J.x-Se.x,vt=J.y-Se.y,et=Ae.x-J.x,_e=Ae.y-J.y,se=Qe*Qe+vt*vt,$e=Qe*_e-vt*et;if(Math.abs($e)>Number.EPSILON){const Le=Math.sqrt(se),Xe=Math.sqrt(et*et+_e*_e),Ve=Se.x-vt/Le,yt=Se.y+Qe/Le,bt=Ae.x-_e/Xe,At=Ae.y+et/Xe,Ft=((bt-Ve)*_e-(At-yt)*et)/(Qe*_e-vt*et);we=Ve+Qe*Ft-J.x,Ie=yt+vt*Ft-J.y;const H=we*we+Ie*Ie;if(H<=2)return new It(we,Ie);dt=Math.sqrt(H/2)}else{let Le=!1;Qe>Number.EPSILON?et>Number.EPSILON&&(Le=!0):Qe<-Number.EPSILON?et<-Number.EPSILON&&(Le=!0):Math.sign(vt)===Math.sign(_e)&&(Le=!0),Le?(we=-vt,Ie=Qe,dt=Math.sqrt(se)):(we=Qe,Ie=vt,dt=Math.sqrt(se/2))}return new It(we/dt,Ie/dt)}const pe=[];for(let J=0,Se=ee.length,Ae=Se-1,we=J+1;J<Se;J++,Ae++,we++)Ae===Se&&(Ae=0),we===Se&&(we=0),pe[J]=ce(ee[J],ee[Ae],ee[we]);const K=[];let fe,Ne=pe.concat();for(let J=0,Se=ne;J<Se;J++){const Ae=Z[J];fe=[];for(let we=0,Ie=Ae.length,dt=Ie-1,Qe=we+1;we<Ie;we++,dt++,Qe++)dt===Ie&&(dt=0),Qe===Ie&&(Qe=0),fe[we]=ce(Ae[we],Ae[dt],Ae[Qe]);K.push(fe),Ne=Ne.concat(fe)}let Pe;if(C===0)Pe=qd.triangulateShape(ee,Z);else{const J=[],Se=[];for(let Ae=0;Ae<C;Ae++){const we=Ae/C,Ie=S*Math.cos(we*Math.PI/2),dt=$*Math.sin(we*Math.PI/2)+M;for(let Qe=0,vt=ee.length;Qe<vt;Qe++){const et=z(ee[Qe],pe[Qe],dt);Ut(et.x,et.y,-Ie),we===0&&J.push(et)}for(let Qe=0,vt=ne;Qe<vt;Qe++){const et=Z[Qe];fe=K[Qe];const _e=[];for(let se=0,$e=et.length;se<$e;se++){const Le=z(et[se],fe[se],dt);Ut(Le.x,Le.y,-Ie),we===0&&_e.push(Le)}we===0&&Se.push(_e)}}Pe=qd.triangulateShape(J,Se)}const Ee=Pe.length,We=$+M;for(let J=0;J<te;J++){const Se=y?z(D[J],Ne[J],We):D[J];O?(V.copy(P.normals[0]).multiplyScalar(Se.x),F.copy(P.binormals[0]).multiplyScalar(Se.y),X.copy(I[0]).add(V).add(F),Ut(X.x,X.y,X.z)):Ut(Se.x,Se.y,0)}for(let J=1;J<=v;J++)for(let Se=0;Se<te;Se++){const Ae=y?z(D[Se],Ne[Se],We):D[Se];O?(V.copy(P.normals[J]).multiplyScalar(Ae.x),F.copy(P.binormals[J]).multiplyScalar(Ae.y),X.copy(I[J]).add(V).add(F),Ut(X.x,X.y,X.z)):Ut(Ae.x,Ae.y,T/v*J)}for(let J=C-1;J>=0;J--){const Se=J/C,Ae=S*Math.cos(Se*Math.PI/2),we=$*Math.sin(Se*Math.PI/2)+M;for(let Ie=0,dt=ee.length;Ie<dt;Ie++){const Qe=z(ee[Ie],pe[Ie],we);Ut(Qe.x,Qe.y,T+Ae)}for(let Ie=0,dt=Z.length;Ie<dt;Ie++){const Qe=Z[Ie];fe=K[Ie];for(let vt=0,et=Qe.length;vt<et;vt++){const _e=z(Qe[vt],fe[vt],we);O?Ut(_e.x,_e.y+I[v-1].y,I[v-1].x+Ae):Ut(_e.x,_e.y,T+Ae)}}}Fe(),gt();function Fe(){const J=r.length/3;if(y){let Se=0,Ae=te*Se;for(let we=0;we<Ee;we++){const Ie=Pe[we];Ke(Ie[2]+Ae,Ie[1]+Ae,Ie[0]+Ae)}Se=v+C*2,Ae=te*Se;for(let we=0;we<Ee;we++){const Ie=Pe[we];Ke(Ie[0]+Ae,Ie[1]+Ae,Ie[2]+Ae)}}else{for(let Se=0;Se<Ee;Se++){const Ae=Pe[Se];Ke(Ae[2],Ae[1],Ae[0])}for(let Se=0;Se<Ee;Se++){const Ae=Pe[Se];Ke(Ae[0]+te*v,Ae[1]+te*v,Ae[2]+te*v)}}i.addGroup(J,r.length/3-J,0)}function gt(){const J=r.length/3;let Se=0;ft(ee,Se),Se+=ee.length;for(let Ae=0,we=Z.length;Ae<we;Ae++){const Ie=Z[Ae];ft(Ie,Se),Se+=Ie.length}i.addGroup(J,r.length/3-J,1)}function ft(J,Se){let Ae=J.length;for(;--Ae>=0;){const we=Ae;let Ie=Ae-1;Ie<0&&(Ie=J.length-1);for(let dt=0,Qe=v+C*2;dt<Qe;dt++){const vt=te*dt,et=te*(dt+1),_e=Se+we+vt,se=Se+Ie+vt,$e=Se+Ie+et,Le=Se+we+et;Ht(_e,se,$e,Le)}}}function Ut(J,Se,Ae){f.push(J),f.push(Se),f.push(Ae)}function Ke(J,Se,Ae){Re(J),Re(Se),Re(Ae);const we=r.length/3,Ie=w.generateTopUV(i,r,we-3,we-2,we-1);Ye(Ie[0]),Ye(Ie[1]),Ye(Ie[2])}function Ht(J,Se,Ae,we){Re(J),Re(Se),Re(we),Re(Se),Re(Ae),Re(we);const Ie=r.length/3,dt=w.generateSideWallUV(i,r,Ie-6,Ie-3,Ie-2,Ie-1);Ye(dt[0]),Ye(dt[1]),Ye(dt[3]),Ye(dt[1]),Ye(dt[2]),Ye(dt[3])}function Re(J){r.push(f[J*3+0]),r.push(f[J*3+1]),r.push(f[J*3+2])}function Ye(J){a.push(J.x),a.push(J.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return M9(n,i,e)}static fromJSON(e,n){const i=[];for(let a=0,l=e.shapes.length;a<l;a++){const h=n[e.shapes[a]];i.push(h)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new mC[r.type]().fromJSON(r)),new vM(i,e.options)}}const C9={generateTopUV:function(s,e,n,i,r){const a=e[n*3],l=e[n*3+1],h=e[i*3],f=e[i*3+1],p=e[r*3],v=e[r*3+1];return[new It(a,l),new It(h,f),new It(p,v)]},generateSideWallUV:function(s,e,n,i,r,a){const l=e[n*3],h=e[n*3+1],f=e[n*3+2],p=e[i*3],v=e[i*3+1],T=e[i*3+2],y=e[r*3],S=e[r*3+1],$=e[r*3+2],M=e[a*3],C=e[a*3+1],E=e[a*3+2];return Math.abs(h-v)<Math.abs(l-p)?[new It(l,1-f),new It(p,1-T),new It(y,1-$),new It(M,1-E)]:[new It(h,1-f),new It(v,1-T),new It(S,1-$),new It(C,1-E)]}};function M9(s,e,n){if(n.shapes=[],Array.isArray(s))for(let i=0,r=s.length;i<r;i++){const a=s[i];n.shapes.push(a.uuid)}else n.shapes.push(s.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class VS extends Xg{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new VS(e.radius,e.detail)}}class bM extends ui{constructor(e=[new It(0,-.5),new It(.5,0),new It(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=ai(r,0,Math.PI*2);const a=[],l=[],h=[],f=[],p=[],v=1/n,T=new be,y=new It,S=new be,$=new be,M=new be;let C=0,E=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:C=e[w+1].x-e[w].x,E=e[w+1].y-e[w].y,S.x=E*1,S.y=-C,S.z=E*0,M.copy(S),S.normalize(),f.push(S.x,S.y,S.z);break;case e.length-1:f.push(M.x,M.y,M.z);break;default:C=e[w+1].x-e[w].x,E=e[w+1].y-e[w].y,S.x=E*1,S.y=-C,S.z=E*0,$.copy(S),S.x+=M.x,S.y+=M.y,S.z+=M.z,S.normalize(),f.push(S.x,S.y,S.z),M.copy($)}for(let w=0;w<=n;w++){const I=i+w*v*r,O=Math.sin(I),P=Math.cos(I);for(let F=0;F<=e.length-1;F++){T.x=e[F].x*O,T.y=e[F].y,T.z=e[F].x*P,l.push(T.x,T.y,T.z),y.x=w/n,y.y=F/(e.length-1),h.push(y.x,y.y);const V=f[3*F+0]*O,X=f[3*F+1],G=f[3*F+0]*P;p.push(V,X,G)}}for(let w=0;w<n;w++)for(let I=0;I<e.length-1;I++){const O=I+w*e.length,P=O,F=O+e.length,V=O+e.length+1,X=O+1;a.push(P,F,X),a.push(V,X,F)}this.setIndex(a),this.setAttribute("position",new _n(l,3)),this.setAttribute("uv",new _n(h,2)),this.setAttribute("normal",new _n(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bM(e.points,e.segments,e.phiStart,e.phiLength)}}class WS extends Xg{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new WS(e.radius,e.detail)}}class jg extends ui{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,l=n/2,h=Math.floor(i),f=Math.floor(r),p=h+1,v=f+1,T=e/h,y=n/f,S=[],$=[],M=[],C=[];for(let E=0;E<v;E++){const w=E*y-l;for(let I=0;I<p;I++){const O=I*T-a;$.push(O,-w,0),M.push(0,0,1),C.push(I/h),C.push(1-E/f)}}for(let E=0;E<f;E++)for(let w=0;w<h;w++){const I=w+p*E,O=w+p*(E+1),P=w+1+p*(E+1),F=w+1+p*E;S.push(I,O,F),S.push(O,P,F)}this.setIndex(S),this.setAttribute("position",new _n($,3)),this.setAttribute("normal",new _n(M,3)),this.setAttribute("uv",new _n(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jg(e.width,e.height,e.widthSegments,e.heightSegments)}}class yM extends ui{constructor(e=.5,n=1,i=32,r=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:l},i=Math.max(3,i),r=Math.max(1,r);const h=[],f=[],p=[],v=[];let T=e;const y=(n-e)/r,S=new be,$=new It;for(let M=0;M<=r;M++){for(let C=0;C<=i;C++){const E=a+C/i*l;S.x=T*Math.cos(E),S.y=T*Math.sin(E),f.push(S.x,S.y,S.z),p.push(0,0,1),$.x=(S.x/n+1)/2,$.y=(S.y/n+1)/2,v.push($.x,$.y)}T+=y}for(let M=0;M<r;M++){const C=M*(i+1);for(let E=0;E<i;E++){const w=E+C,I=w,O=w+i+1,P=w+i+2,F=w+1;h.push(I,O,F),h.push(O,P,F)}}this.setIndex(h),this.setAttribute("position",new _n(f,3)),this.setAttribute("normal",new _n(p,3)),this.setAttribute("uv",new _n(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class TM extends ui{constructor(e=new Ig([new It(0,.5),new It(-.5,-.5),new It(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],a=[],l=[];let h=0,f=0;if(Array.isArray(e)===!1)p(e);else for(let v=0;v<e.length;v++)p(e[v]),this.addGroup(h,f,v),h+=f,f=0;this.setIndex(i),this.setAttribute("position",new _n(r,3)),this.setAttribute("normal",new _n(a,3)),this.setAttribute("uv",new _n(l,2));function p(v){const T=r.length/3,y=v.extractPoints(n);let S=y.shape;const $=y.holes;qd.isClockWise(S)===!1&&(S=S.reverse());for(let C=0,E=$.length;C<E;C++){const w=$[C];qd.isClockWise(w)===!0&&($[C]=w.reverse())}const M=qd.triangulateShape(S,$);for(let C=0,E=$.length;C<E;C++){const w=$[C];S=S.concat(w)}for(let C=0,E=S.length;C<E;C++){const w=S[C];r.push(w.x,w.y,0),a.push(0,0,1),l.push(w.x,w.y)}for(let C=0,E=M.length;C<E;C++){const w=M[C],I=w[0]+T,O=w[1]+T,P=w[2]+T;i.push(I,O,P),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return R9(n,e)}static fromJSON(e,n){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const l=n[e.shapes[r]];i.push(l)}return new TM(i,e.curveSegments)}}function R9(s,e){if(e.shapes=[],Array.isArray(s))for(let n=0,i=s.length;n<i;n++){const r=s[n];e.shapes.push(r.uuid)}else e.shapes.push(s.uuid);return e}class XS extends ui{constructor(e=1,n=32,i=16,r=0,a=Math.PI*2,l=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:l,thetaLength:h},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const f=Math.min(l+h,Math.PI);let p=0;const v=[],T=new be,y=new be,S=[],$=[],M=[],C=[];for(let E=0;E<=i;E++){const w=[],I=E/i;let O=0;E===0&&l===0?O=.5/n:E===i&&f===Math.PI&&(O=-.5/n);for(let P=0;P<=n;P++){const F=P/n;T.x=-e*Math.cos(r+F*a)*Math.sin(l+I*h),T.y=e*Math.cos(l+I*h),T.z=e*Math.sin(r+F*a)*Math.sin(l+I*h),$.push(T.x,T.y,T.z),y.copy(T).normalize(),M.push(y.x,y.y,y.z),C.push(F+O,1-I),w.push(p++)}v.push(w)}for(let E=0;E<i;E++)for(let w=0;w<n;w++){const I=v[E][w+1],O=v[E][w],P=v[E+1][w],F=v[E+1][w+1];(E!==0||l>0)&&S.push(I,O,F),(E!==i-1||f<Math.PI)&&S.push(O,P,F)}this.setIndex(S),this.setAttribute("position",new _n($,3)),this.setAttribute("normal",new _n(M,3)),this.setAttribute("uv",new _n(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XS(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class EM extends Xg{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new EM(e.radius,e.detail)}}class SM extends ui{constructor(e=1,n=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const l=[],h=[],f=[],p=[],v=new be,T=new be,y=new be;for(let S=0;S<=i;S++)for(let $=0;$<=r;$++){const M=$/r*a,C=S/i*Math.PI*2;T.x=(e+n*Math.cos(C))*Math.cos(M),T.y=(e+n*Math.cos(C))*Math.sin(M),T.z=n*Math.sin(C),h.push(T.x,T.y,T.z),v.x=e*Math.cos(M),v.y=e*Math.sin(M),y.subVectors(T,v).normalize(),f.push(y.x,y.y,y.z),p.push($/r),p.push(S/i)}for(let S=1;S<=i;S++)for(let $=1;$<=r;$++){const M=(r+1)*S+$-1,C=(r+1)*(S-1)+$-1,E=(r+1)*(S-1)+$,w=(r+1)*S+$;l.push(M,C,w),l.push(C,E,w)}this.setIndex(l),this.setAttribute("position",new _n(h,3)),this.setAttribute("normal",new _n(f,3)),this.setAttribute("uv",new _n(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class AM extends ui{constructor(e=1,n=.4,i=64,r=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:a,q:l},i=Math.floor(i),r=Math.floor(r);const h=[],f=[],p=[],v=[],T=new be,y=new be,S=new be,$=new be,M=new be,C=new be,E=new be;for(let I=0;I<=i;++I){const O=I/i*a*Math.PI*2;w(O,a,l,e,S),w(O+.01,a,l,e,$),C.subVectors($,S),E.addVectors($,S),M.crossVectors(C,E),E.crossVectors(M,C),M.normalize(),E.normalize();for(let P=0;P<=r;++P){const F=P/r*Math.PI*2,V=-n*Math.cos(F),X=n*Math.sin(F);T.x=S.x+(V*E.x+X*M.x),T.y=S.y+(V*E.y+X*M.y),T.z=S.z+(V*E.z+X*M.z),f.push(T.x,T.y,T.z),y.subVectors(T,S).normalize(),p.push(y.x,y.y,y.z),v.push(I/i),v.push(P/r)}}for(let I=1;I<=i;I++)for(let O=1;O<=r;O++){const P=(r+1)*(I-1)+(O-1),F=(r+1)*I+(O-1),V=(r+1)*I+O,X=(r+1)*(I-1)+O;h.push(P,F,X),h.push(F,V,X)}this.setIndex(h),this.setAttribute("position",new _n(f,3)),this.setAttribute("normal",new _n(p,3)),this.setAttribute("uv",new _n(v,2));function w(I,O,P,F,V){const X=Math.cos(I),G=Math.sin(I),D=P/O*I,Z=Math.cos(D);V.x=F*(2+Z)*.5*X,V.y=F*(2+Z)*G*.5,V.z=F*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new AM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class $M extends ui{constructor(e=new A2(new be(-1,-1,0),new be(-1,1,0),new be(1,1,0)),n=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:a};const l=e.computeFrenetFrames(n,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const h=new be,f=new be,p=new It;let v=new be;const T=[],y=[],S=[],$=[];M(),this.setIndex($),this.setAttribute("position",new _n(T,3)),this.setAttribute("normal",new _n(y,3)),this.setAttribute("uv",new _n(S,2));function M(){for(let I=0;I<n;I++)C(I);C(a===!1?n:0),w(),E()}function C(I){v=e.getPointAt(I/n,v);const O=l.normals[I],P=l.binormals[I];for(let F=0;F<=r;F++){const V=F/r*Math.PI*2,X=Math.sin(V),G=-Math.cos(V);f.x=G*O.x+X*P.x,f.y=G*O.y+X*P.y,f.z=G*O.z+X*P.z,f.normalize(),y.push(f.x,f.y,f.z),h.x=v.x+i*f.x,h.y=v.y+i*f.y,h.z=v.z+i*f.z,T.push(h.x,h.y,h.z)}}function E(){for(let I=1;I<=n;I++)for(let O=1;O<=r;O++){const P=(r+1)*(I-1)+(O-1),F=(r+1)*I+(O-1),V=(r+1)*I+O,X=(r+1)*(I-1)+O;$.push(P,F,X),$.push(F,V,X)}}function w(){for(let I=0;I<=n;I++)for(let O=0;O<=r;O++)p.x=I/n,p.y=O/r,S.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new $M(new mC[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class x2 extends ui{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new be,a=new be;if(e.index!==null){const l=e.attributes.position,h=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:h.count,materialIndex:0}]);for(let p=0,v=f.length;p<v;++p){const T=f[p],y=T.start,S=T.count;for(let $=y,M=y+S;$<M;$+=3)for(let C=0;C<3;C++){const E=h.getX($+C),w=h.getX($+(C+1)%3);r.fromBufferAttribute(l,E),a.fromBufferAttribute(l,w),jB(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let h=0,f=l.count/3;h<f;h++)for(let p=0;p<3;p++){const v=3*h+p,T=3*h+(p+1)%3;r.fromBufferAttribute(l,v),a.fromBufferAttribute(l,T),jB(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new _n(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function jB(s,e,n){const i=`${s.x},${s.y},${s.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${s.x},${s.y},${s.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var YB=Object.freeze({__proto__:null,BoxGeometry:sb,CapsuleGeometry:pM,CircleGeometry:mM,ConeGeometry:zS,CylinderGeometry:GS,DodecahedronGeometry:gM,EdgesGeometry:ZH,ExtrudeGeometry:vM,IcosahedronGeometry:VS,LatheGeometry:bM,OctahedronGeometry:WS,PlaneGeometry:jg,PolyhedronGeometry:Xg,RingGeometry:yM,ShapeGeometry:TM,SphereGeometry:XS,TetrahedronGeometry:EM,TorusGeometry:SM,TorusKnotGeometry:AM,TubeGeometry:$M,WireframeGeometry:x2});class lG extends ta{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new on(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class uG extends pu{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jS extends ta{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new on(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new on(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wg,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gh extends jS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new on(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new on(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new on(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cG extends ta{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new on(16777215),this.specular=new on(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new on(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wg,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zc,this.combine=DS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hG extends ta{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new on(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new on(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wg,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dG extends ta{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wg,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class fG extends ta{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new on(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new on(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wg,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zc,this.combine=DS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class C2 extends ta{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class M2 extends ta{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class pG extends ta{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new on(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wg,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mG extends Il{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Iv(s,e){return!s||s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)}function gG(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function _G(s){function e(r,a){return s[r]-s[a]}const n=s.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function tO(s,e,n){const i=s.length,r=new s.constructor(i);for(let a=0,l=0;l!==i;++a){const h=n[a]*e;for(let f=0;f!==e;++f)r[l++]=s[h+f]}return r}function R2(s,e,n,i){let r=1,a=s[0];for(;a!==void 0&&a[i]===void 0;)a=s[r++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(e.push(a.time),n.push(...l)),a=s[r++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(e.push(a.time),l.toArray(n,n.length)),a=s[r++];while(a!==void 0);else do l=a[i],l!==void 0&&(e.push(a.time),n.push(l)),a=s[r++];while(a!==void 0)}function w9(s,e,n,i,r=30){const a=s.clone();a.name=e;const l=[];for(let f=0;f<a.tracks.length;++f){const p=a.tracks[f],v=p.getValueSize(),T=[],y=[];for(let S=0;S<p.times.length;++S){const $=p.times[S]*r;if(!($<n||$>=i)){T.push(p.times[S]);for(let M=0;M<v;++M)y.push(p.values[S*v+M])}}T.length!==0&&(p.times=Iv(T,p.times.constructor),p.values=Iv(y,p.values.constructor),l.push(p))}a.tracks=l;let h=1/0;for(let f=0;f<a.tracks.length;++f)h>a.tracks[f].times[0]&&(h=a.tracks[f].times[0]);for(let f=0;f<a.tracks.length;++f)a.tracks[f].shift(-1*h);return a.resetDuration(),a}function I9(s,e=0,n=s,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let l=0;l<r;++l){const h=n.tracks[l],f=h.ValueTypeName;if(f==="bool"||f==="string")continue;const p=s.tracks.find(function(E){return E.name===h.name&&E.ValueTypeName===f});if(p===void 0)continue;let v=0;const T=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=T/3);let y=0;const S=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=S/3);const $=h.times.length-1;let M;if(a<=h.times[0]){const E=v,w=T-v;M=h.values.slice(E,w)}else if(a>=h.times[$]){const E=$*T+v,w=E+T-v;M=h.values.slice(E,w)}else{const E=h.createInterpolant(),w=v,I=T-v;E.evaluate(a),M=E.resultBuffer.slice(w,I)}f==="quaternion"&&new Mo().fromArray(M).normalize().conjugate().toArray(M);const C=p.times.length;for(let E=0;E<C;++E){const w=E*S+y;if(f==="quaternion")Mo.multiplyQuaternionsFlat(p.values,w,M,0,p.values,w);else{const I=S-y*2;for(let O=0;O<I;++O)p.values[w+O]-=M[O]}}}return s.blendMode=o2,s}class O9{static convertArray(e,n){return Iv(e,n)}static isTypedArray(e){return gG(e)}static getKeyframeOrder(e){return _G(e)}static sortedArray(e,n,i){return tO(e,n,i)}static flattenJSON(e,n,i,r){R2(e,n,i,r)}static subclip(e,n,i,r,a=30){return w9(e,n,i,r,a)}static makeClipAdditive(e,n=0,i=e,r=30){return I9(e,n,i,r)}}class _T{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{let l;n:{i:if(!(e<r)){for(let h=i+2;;){if(r===void 0){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===h)break;if(a=r,r=n[++i],e<r)break t}l=n.length;break n}if(!(e>=a)){const h=n[1];e<h&&(i=2,a=h);for(let f=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===f)break;if(r=a,a=n[--i-1],e>=a)break t}l=i,i=0;break n}break e}for(;i<l;){const h=i+l>>>1;e<n[h]?l=h:i=h+1}if(r=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let l=0;l!==r;++l)n[l]=i[a+l];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vG extends _T{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mv,endingEnd:Mv}}intervalChanged_(e,n,i){const r=this.parameterPositions;let a=e-2,l=e+1,h=r[a],f=r[l];if(h===void 0)switch(this.getSettings_().endingStart){case Rv:a=e,h=2*n-i;break;case sS:a=r.length-2,h=n+r[a]-r[a+1];break;default:a=e,h=i}if(f===void 0)switch(this.getSettings_().endingEnd){case Rv:l=e,f=2*i-n;break;case sS:l=1,f=i+r[1]-r[0];break;default:l=e-1,f=n}const p=(i-n)*.5,v=this.valueSize;this._weightPrev=p/(n-h),this._weightNext=p/(f-i),this._offsetPrev=a*v,this._offsetNext=l*v}interpolate_(e,n,i,r){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,f=e*h,p=f-h,v=this._offsetPrev,T=this._offsetNext,y=this._weightPrev,S=this._weightNext,$=(i-n)/(r-n),M=$*$,C=M*$,E=-y*C+2*y*M-y*$,w=(1+y)*C+(-1.5-2*y)*M+(-.5+y)*$+1,I=(-1-S)*C+(1.5+S)*M+.5*$,O=S*C-S*M;for(let P=0;P!==h;++P)a[P]=E*l[v+P]+w*l[p+P]+I*l[f+P]+O*l[T+P];return a}}class w2 extends _T{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,f=e*h,p=f-h,v=(i-n)/(r-n),T=1-v;for(let y=0;y!==h;++y)a[y]=l[p+y]*T+l[f+y]*v;return a}}class bG extends _T{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class zh{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Iv(n,this.TimeBufferType),this.values=Iv(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Iv(e.times,Array),values:Iv(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new bG(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new w2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vG(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Wy:n=this.InterpolantFactoryMethodDiscrete;break;case Xy:n=this.InterpolantFactoryMethodLinear;break;case sx:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wy;case this.InterpolantFactoryMethodLinear:return Xy;case this.InterpolantFactoryMethodSmooth:return sx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let a=0,l=r-1;for(;a!==r&&i[a]<e;)++a;for(;l!==-1&&i[l]>n;)--l;if(++l,a!==0||l!==r){a>=l&&(l=Math.max(l,1),a=l-1);const h=this.getValueSize();this.times=i.slice(a,l),this.values=this.values.slice(a*h,l*h)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let h=0;h!==a;h++){const f=i[h];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,f),e=!1;break}if(l!==null&&l>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,f,l),e=!1;break}l=f}if(r!==void 0&&gG(r))for(let h=0,f=r.length;h!==f;++h){const p=r[h];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===sx,a=e.length-1;let l=1;for(let h=1;h<a;++h){let f=!1;const p=e[h],v=e[h+1];if(p!==v&&(h!==1||p!==e[0]))if(r)f=!0;else{const T=h*i,y=T-i,S=T+i;for(let $=0;$!==i;++$){const M=n[T+$];if(M!==n[y+$]||M!==n[S+$]){f=!0;break}}}if(f){if(h!==l){e[l]=e[h];const T=h*i,y=l*i;for(let S=0;S!==i;++S)n[y+S]=n[T+S]}++l}}if(a>0){e[l]=e[a];for(let h=a*i,f=l*i,p=0;p!==i;++p)n[f+p]=n[h+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=n.slice(0,l*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}zh.prototype.ValueTypeName="";zh.prototype.TimeBufferType=Float32Array;zh.prototype.ValueBufferType=Float32Array;zh.prototype.DefaultInterpolation=Xy;class rb extends zh{constructor(e,n,i){super(e,n,i)}}rb.prototype.ValueTypeName="bool";rb.prototype.ValueBufferType=Array;rb.prototype.DefaultInterpolation=Wy;rb.prototype.InterpolantFactoryMethodLinear=void 0;rb.prototype.InterpolantFactoryMethodSmooth=void 0;class I2 extends zh{constructor(e,n,i,r){super(e,n,i,r)}}I2.prototype.ValueTypeName="color";class Yv extends zh{constructor(e,n,i,r){super(e,n,i,r)}}Yv.prototype.ValueTypeName="number";class yG extends _T{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,f=(i-n)/(r-n);let p=e*h;for(let v=p+h;p!==v;p+=4)Mo.slerpFlat(a,0,l,p-h,l,p,f);return a}}class Kv extends zh{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new yG(this.times,this.values,this.getValueSize(),e)}}Kv.prototype.ValueTypeName="quaternion";Kv.prototype.InterpolantFactoryMethodSmooth=void 0;class ob extends zh{constructor(e,n,i){super(e,n,i)}}ob.prototype.ValueTypeName="string";ob.prototype.ValueBufferType=Array;ob.prototype.DefaultInterpolation=Wy;ob.prototype.InterpolantFactoryMethodLinear=void 0;ob.prototype.InterpolantFactoryMethodSmooth=void 0;class qv extends zh{constructor(e,n,i,r){super(e,n,i,r)}}qv.prototype.ValueTypeName="vector";class Jy{constructor(e="",n=-1,i=[],r=iM){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Fc(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let l=0,h=i.length;l!==h;++l)n.push(L9(i[l]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=i.length;a!==l;++a)n.push(zh.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const a=n.length,l=[];for(let h=0;h<a;h++){let f=[],p=[];f.push((h+a-1)%a,h,(h+1)%a),p.push(0,1,0);const v=_G(f);f=tO(f,1,v),p=tO(p,1,v),!r&&f[0]===0&&(f.push(a),p.push(p[0])),l.push(new Yv(".morphTargetInfluences["+n[h].name+"]",f,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let h=0,f=e.length;h<f;h++){const p=e[h],v=p.name.match(a);if(v&&v.length>1){const T=v[1];let y=r[T];y||(r[T]=y=[]),y.push(p)}}const l=[];for(const h in r)l.push(this.CreateFromMorphTargetSequence(h,r[h],n,i));return l}static parseAnimation(e,n){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(T,y,S,$,M){if(S.length!==0){const C=[],E=[];R2(S,C,E,$),C.length!==0&&M.push(new T(y,C,E))}},r=[],a=e.name||"default",l=e.fps||30,h=e.blendMode;let f=e.length||-1;const p=e.hierarchy||[];for(let T=0;T<p.length;T++){const y=p[T].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const S={};let $;for($=0;$<y.length;$++)if(y[$].morphTargets)for(let M=0;M<y[$].morphTargets.length;M++)S[y[$].morphTargets[M]]=-1;for(const M in S){const C=[],E=[];for(let w=0;w!==y[$].morphTargets.length;++w){const I=y[$];C.push(I.time),E.push(I.morphTarget===M?1:0)}r.push(new Yv(".morphTargetInfluence["+M+"]",C,E))}f=S.length*l}else{const S=".bones["+n[T].name+"]";i(qv,S+".position",y,"pos",r),i(Kv,S+".quaternion",y,"rot",r),i(qv,S+".scale",y,"scl",r)}}return r.length===0?null:new this(a,f,r,h)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function N9(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yv;case"vector":case"vector2":case"vector3":case"vector4":return qv;case"color":return I2;case"quaternion":return Kv;case"bool":case"boolean":return rb;case"string":return ob}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function L9(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=N9(s.type);if(s.times===void 0){const n=[],i=[];R2(s.keys,n,i,"value"),s.times=n,s.values=i}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const mp={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class xM{constructor(e,n,i){const r=this;let a=!1,l=0,h=0,f;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(v){h++,a===!1&&r.onStart!==void 0&&r.onStart(v,l,h),a=!0},this.itemEnd=function(v){l++,r.onProgress!==void 0&&r.onProgress(v,l,h),l===h&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(v){r.onError!==void 0&&r.onError(v)},this.resolveURL=function(v){return f?f(v):v},this.setURLModifier=function(v){return f=v,this},this.addHandler=function(v,T){return p.push(v,T),this},this.removeHandler=function(v){const T=p.indexOf(v);return T!==-1&&p.splice(T,2),this},this.getHandler=function(v){for(let T=0,y=p.length;T<y;T+=2){const S=p[T],$=p[T+1];if(S.global&&(S.lastIndex=0),S.test(v))return $}return null}}}const TG=new xM;class Ya{constructor(e){this.manager=e!==void 0?e:TG,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,a){i.load(e,r,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ya.DEFAULT_MATERIAL_NAME="__DEFAULT";const B0={};class D9 extends Error{constructor(e,n){super(e),this.response=n}}class ja extends Ya{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=mp.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(B0[e]!==void 0){B0[e].push({onLoad:n,onProgress:i,onError:r});return}B0[e]=[],B0[e].push({onLoad:n,onProgress:i,onError:r});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,f=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const v=B0[e],T=p.body.getReader(),y=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),S=y?parseInt(y):0,$=S!==0;let M=0;const C=new ReadableStream({start(E){w();function w(){T.read().then(({done:I,value:O})=>{if(I)E.close();else{M+=O.byteLength;const P=new ProgressEvent("progress",{lengthComputable:$,loaded:M,total:S});for(let F=0,V=v.length;F<V;F++){const X=v[F];X.onProgress&&X.onProgress(P)}E.enqueue(O),w()}},I=>{E.error(I)})}}});return new Response(C)}else throw new D9(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(f){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>new DOMParser().parseFromString(v,h));case"json":return p.json();default:if(h==="")return p.text();{const T=/charset="?([^;"\s]*)"?/i.exec(h),y=T&&T[1]?T[1].toLowerCase():void 0,S=new TextDecoder(y);return p.arrayBuffer().then($=>S.decode($))}}}).then(p=>{mp.add(`file:${e}`,p);const v=B0[e];delete B0[e];for(let T=0,y=v.length;T<y;T++){const S=v[T];S.onLoad&&S.onLoad(p)}}).catch(p=>{const v=B0[e];if(v===void 0)throw this.manager.itemError(e),p;delete B0[e];for(let T=0,y=v.length;T<y;T++){const S=v[T];S.onError&&S.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class B9 extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=this,l=new ja(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{n(a.parse(JSON.parse(h)))}catch(f){r?r(f):console.error(f),a.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Jy.parse(e[i]);n.push(r)}return n}}class k9 extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=this,l=[],h=new dM,f=new ja(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(a.withCredentials);let p=0;function v(T){f.load(e[T],function(y){const S=a.parse(y,!0);l[T]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},p+=1,p===6&&(S.mipmapCount===1&&(h.minFilter=us),h.image=l,h.format=S.format,h.needsUpdate=!0,n&&n(h))},i,r)}if(Array.isArray(e))for(let T=0,y=e.length;T<y;++T)v(T);else f.load(e,function(T){const y=a.parse(T,!0);if(y.isCubemap){const S=y.mipmaps.length/y.mipmapCount;for(let $=0;$<S;$++){l[$]={mipmaps:[]};for(let M=0;M<y.mipmapCount;M++)l[$].mipmaps.push(y.mipmaps[$*y.mipmapCount+M]),l[$].format=y.format,l[$].width=y.width,l[$].height=y.height}h.image=l}else h.image.width=y.width,h.image.height=y.height,h.mipmaps=y.mipmaps;y.mipmapCount===1&&(h.minFilter=us),h.format=y.format,h.needsUpdate=!0,n&&n(h)},i,r);return h}}const ny=new WeakMap;class dS extends Ya{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=mp.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)a.manager.itemStart(e),setTimeout(function(){n&&n(l),a.manager.itemEnd(e)},0);else{let T=ny.get(l);T===void 0&&(T=[],ny.set(l,T)),T.push({onLoad:n,onError:r})}return l}const h=lS("img");function f(){v(),n&&n(this);const T=ny.get(this)||[];for(let y=0;y<T.length;y++){const S=T[y];S.onLoad&&S.onLoad(this)}ny.delete(this),a.manager.itemEnd(e)}function p(T){v(),r&&r(T),mp.remove(`image:${e}`);const y=ny.get(this)||[];for(let S=0;S<y.length;S++){const $=y[S];$.onError&&$.onError(T)}ny.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function v(){h.removeEventListener("load",f,!1),h.removeEventListener("error",p,!1)}return h.addEventListener("load",f,!1),h.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),mp.add(`image:${e}`,h),a.manager.itemStart(e),h.src=e,h}}class EG extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=new US;a.colorSpace=Wa;const l=new dS(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let h=0;function f(p){l.load(e[p],function(v){a.images[p]=v,h++,h===6&&(a.needsUpdate=!0,n&&n(a))},void 0,r)}for(let p=0;p<e.length;++p)f(p);return a}}class O2 extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=this,l=new Qd,h=new ja(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(a.withCredentials),h.load(e,function(f){let p;try{p=a.parse(f)}catch(v){if(r!==void 0)r(v);else{console.error(v);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:co,l.wrapT=p.wrapT!==void 0?p.wrapT:co,l.magFilter=p.magFilter!==void 0?p.magFilter:us,l.minFilter=p.minFilter!==void 0?p.minFilter:us,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=Nh),p.mipmapCount===1&&(l.minFilter=us),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,n&&n(l,p)},i,r),l}}class SG extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=new Ms,l=new dS(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(h){a.image=h,a.needsUpdate=!0,n!==void 0&&n(a)},i,r),a}}class Yg extends zi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new on(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class AG extends Yg{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new on(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const MR=new Fn,KB=new be,qB=new be;class N2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new It(512,512),this.mapType=fu,this.map=null,this.mapPass=null,this.matrix=new Fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gT,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new Ei(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;KB.setFromMatrixPosition(e.matrixWorld),n.position.copy(KB),qB.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(qB),n.updateMatrixWorld(),MR.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MR),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(MR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class P9 extends N2{constructor(){super(new io(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,i=jy*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||n.far;(i!==n.fov||r!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class L2 extends Yg{constructor(e,n,i=0,r=Math.PI/3,a=0,l=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zi.DEFAULT_UP),this.updateMatrix(),this.target=new zi,this.distance=i,this.angle=r,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new P9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const JB=new Fn,dE=new be,RR=new be;class U9 extends N2{constructor(){super(new io(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new It(4,2),this._viewportCount=6,this._viewports=[new Ei(2,1,1,1),new Ei(0,1,1,1),new Ei(3,1,1,1),new Ei(1,1,1,1),new Ei(3,0,1,1),new Ei(1,0,1,1)],this._cubeDirections=[new be(1,0,0),new be(-1,0,0),new be(0,0,1),new be(0,0,-1),new be(0,1,0),new be(0,-1,0)],this._cubeUps=[new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,0,1),new be(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),dE.setFromMatrixPosition(e.matrixWorld),i.position.copy(dE),RR.copy(i.position),RR.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(RR),i.updateMatrixWorld(),r.makeTranslation(-dE.x,-dE.y,-dE.z),JB.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JB)}}class D2 extends Yg{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new U9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let Tp=class extends oM{constructor(e=-1,n=1,i=1,r=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,l=i+e,h=r+n,f=r-n;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,l=a+p*this.view.width,h-=v*this.view.offsetY,f=h-v*this.view.height}this.projectionMatrix.makeOrthographic(a,l,h,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}};class F9 extends N2{constructor(){super(new Tp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class B2 extends Yg{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zi.DEFAULT_UP),this.updateMatrix(),this.target=new zi,this.shadow=new F9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class $G extends Yg{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class xG extends Yg{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class CG{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new be)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.282095),n.addScaledVector(l[1],.488603*r),n.addScaledVector(l[2],.488603*a),n.addScaledVector(l[3],.488603*i),n.addScaledVector(l[4],1.092548*(i*r)),n.addScaledVector(l[5],1.092548*(r*a)),n.addScaledVector(l[6],.315392*(3*a*a-1)),n.addScaledVector(l[7],1.092548*(i*a)),n.addScaledVector(l[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.886227),n.addScaledVector(l[1],2*.511664*r),n.addScaledVector(l[2],2*.511664*a),n.addScaledVector(l[3],2*.511664*i),n.addScaledVector(l[4],2*.429043*i*r),n.addScaledVector(l[5],2*.429043*r*a),n.addScaledVector(l[6],.743125*a*a-.247708),n.addScaledVector(l[7],2*.429043*i*a),n.addScaledVector(l[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-r*r)}}class MG extends Yg{constructor(e=new CG,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class CM extends Ya{constructor(e){super(e),this.textures={}}load(e,n,i,r){const a=this,l=new ja(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(h){try{n(a.parse(JSON.parse(h)))}catch(f){r?r(f):console.error(f),a.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new on().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(r.uniforms[a]={},l.type){case"t":r.uniforms[a].value=i(l.value);break;case"c":r.uniforms[a].value=new on().setHex(l.value);break;case"v2":r.uniforms[a].value=new It().fromArray(l.value);break;case"v3":r.uniforms[a].value=new be().fromArray(l.value);break;case"v4":r.uniforms[a].value=new Ei().fromArray(l.value);break;case"m3":r.uniforms[a].value=new ci().fromArray(l.value);break;case"m4":r.uniforms[a].value=new Fn().fromArray(l.value);break;default:r.uniforms[a].value=l.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new It().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new It().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return CM.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:lG,SpriteMaterial:m2,RawShaderMaterial:uG,ShaderMaterial:pu,PointsMaterial:hM,MeshPhysicalMaterial:Gh,MeshStandardMaterial:jS,MeshPhongMaterial:cG,MeshToonMaterial:hG,MeshNormalMaterial:dG,MeshLambertMaterial:fG,MeshDepthMaterial:C2,MeshDistanceMaterial:M2,MeshBasicMaterial:qu,MeshMatcapMaterial:pG,LineDashedMaterial:mG,LineBasicMaterial:Il,Material:ta};return new n[e]}}class Og{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class k2 extends ui{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class RG extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=this,l=new ja(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(h){try{n(a.parse(JSON.parse(h)))}catch(f){r?r(f):console.error(f),a.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(S,$){if(n[$]!==void 0)return n[$];const C=S.interleavedBuffers[$],E=a(S,C.buffer),w=Ey(C.type,E),I=new FS(w,C.stride);return I.uuid=C.uuid,n[$]=I,I}function a(S,$){if(i[$]!==void 0)return i[$];const C=S.arrayBuffers[$],E=new Uint32Array(C).buffer;return i[$]=E,E}const l=e.isInstancedBufferGeometry?new k2:new ui,h=e.data.index;if(h!==void 0){const S=Ey(h.type,h.array);l.setIndex(new ns(S,1))}const f=e.data.attributes;for(const S in f){const $=f[S];let M;if($.isInterleavedBufferAttribute){const C=r(e.data,$.data);M=new Ju(C,$.itemSize,$.offset,$.normalized)}else{const C=Ey($.type,$.array),E=$.isInstancedBufferAttribute?Xv:ns;M=new E(C,$.itemSize,$.normalized)}$.name!==void 0&&(M.name=$.name),$.usage!==void 0&&M.setUsage($.usage),l.setAttribute(S,M)}const p=e.data.morphAttributes;if(p)for(const S in p){const $=p[S],M=[];for(let C=0,E=$.length;C<E;C++){const w=$[C];let I;if(w.isInterleavedBufferAttribute){const O=r(e.data,w.data);I=new Ju(O,w.itemSize,w.offset,w.normalized)}else{const O=Ey(w.type,w.array);I=new ns(O,w.itemSize,w.normalized)}w.name!==void 0&&(I.name=w.name),M.push(I)}l.morphAttributes[S]=M}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const T=e.data.groups||e.data.drawcalls||e.data.offsets;if(T!==void 0)for(let S=0,$=T.length;S!==$;++S){const M=T[S];l.addGroup(M.start,M.count,M.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(l.boundingSphere=new wo().fromJSON(y)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class H9 extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=this,l=this.path===""?Og.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const h=new ja(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(f){let p=null;try{p=JSON.parse(f)}catch(T){r!==void 0&&r(T),console.error("THREE:ObjectLoader: Can't parse "+e+".",T.message);return}const v=p.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(p,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?Og.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new ja(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,n),h=JSON.parse(l),f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(h)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),l=this.parseImages(e.images,function(){n!==void 0&&n(p)}),h=this.parseTextures(e.textures,l),f=this.parseMaterials(e.materials,h),p=this.parseObject(e.object,a,f,h,i),v=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,v),this.bindLightTargets(p),n!==void 0){let T=!1;for(const y in l)if(l[y].data instanceof HTMLImageElement){T=!0;break}T===!1&&n(p)}return p}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),h=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,r,h,l,n),p=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,p),this.bindLightTargets(f),f}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Ig().fromJSON(e[i]);n[a.uuid]=a}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const h=new HS().fromJSON(e[a],r);i[h.uuid]=h}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new RG;for(let a=0,l=e.length;a<l;a++){let h;const f=e[a];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":h=r.parse(f);break;default:f.type in YB?h=YB[f.type].fromJSON(f,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}h.uuid=f.uuid,f.name!==void 0&&(h.name=f.name),f.userData!==void 0&&(h.userData=f.userData),i[f.uuid]=h}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const a=new CM;a.setTextures(n);for(let l=0,h=e.length;l<h;l++){const f=e[l];i[f.uuid]===void 0&&(i[f.uuid]=a.parse(f)),r[f.uuid]=i[f.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Jy.parse(r);n[a.uuid]=a}return n}parseImages(e,n){const i=this,r={};let a;function l(f){return i.manager.itemStart(f),a.load(f,function(){i.manager.itemEnd(f)},void 0,function(){i.manager.itemError(f),i.manager.itemEnd(f)})}function h(f){if(typeof f=="string"){const p=f,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(v)}else return f.data?{data:Ey(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new xM(n);a=new dS(f),a.setCrossOrigin(this.crossOrigin);for(let p=0,v=e.length;p<v;p++){const T=e[p],y=T.url;if(Array.isArray(y)){const S=[];for(let $=0,M=y.length;$<M;$++){const C=y[$],E=h(C);E!==null&&(E instanceof HTMLImageElement?S.push(E):S.push(new Qd(E.data,E.width,E.height)))}r[T.uuid]=new Cg(S)}else{const S=h(T.url);r[T.uuid]=new Cg(S)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function a(l){if(typeof l=="string"){const h=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return await r.loadAsync(f)}else return l.data?{data:Ey(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){r=new dS(this.manager),r.setCrossOrigin(this.crossOrigin);for(let l=0,h=e.length;l<h;l++){const f=e[l],p=f.url;if(Array.isArray(p)){const v=[];for(let T=0,y=p.length;T<y;T++){const S=p[T],$=await a(S);$!==null&&($ instanceof HTMLImageElement?v.push($):v.push(new Qd($.data,$.width,$.height)))}i[f.uuid]=new Cg(v)}else{const v=await a(f.url);i[f.uuid]=new Cg(v)}}}return i}parseTextures(e,n){function i(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const r={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const h=e[a];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),n[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const f=n[h.image],p=f.data;let v;Array.isArray(p)?(v=new US,p.length===6&&(v.needsUpdate=!0)):(p&&p.data?v=new Qd:v=new Ms,p&&(v.needsUpdate=!0)),v.source=f,v.uuid=h.uuid,h.name!==void 0&&(v.name=h.name),h.mapping!==void 0&&(v.mapping=i(h.mapping,G9)),h.channel!==void 0&&(v.channel=h.channel),h.offset!==void 0&&v.offset.fromArray(h.offset),h.repeat!==void 0&&v.repeat.fromArray(h.repeat),h.center!==void 0&&v.center.fromArray(h.center),h.rotation!==void 0&&(v.rotation=h.rotation),h.wrap!==void 0&&(v.wrapS=i(h.wrap[0],ZB),v.wrapT=i(h.wrap[1],ZB)),h.format!==void 0&&(v.format=h.format),h.internalFormat!==void 0&&(v.internalFormat=h.internalFormat),h.type!==void 0&&(v.type=h.type),h.colorSpace!==void 0&&(v.colorSpace=h.colorSpace),h.minFilter!==void 0&&(v.minFilter=i(h.minFilter,QB)),h.magFilter!==void 0&&(v.magFilter=i(h.magFilter,QB)),h.anisotropy!==void 0&&(v.anisotropy=h.anisotropy),h.flipY!==void 0&&(v.flipY=h.flipY),h.generateMipmaps!==void 0&&(v.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(v.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(v.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(v.compareFunction=h.compareFunction),h.userData!==void 0&&(v.userData=h.userData),r[h.uuid]=v}return r}parseObject(e,n,i,r,a){let l;function h(y){return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),n[y]}function f(y){if(y!==void 0){if(Array.isArray(y)){const S=[];for(let $=0,M=y.length;$<M;$++){const C=y[$];i[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),S.push(i[C])}return S}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function p(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let v,T;switch(e.type){case"Scene":l=new mT,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new on(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new lM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new aM(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new io(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Tp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new $G(e.color,e.intensity);break;case"DirectionalLight":l=new B2(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new D2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new xG(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new L2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new AG(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new MG().fromJSON(e);break;case"SkinnedMesh":v=h(e.geometry),T=f(e.material),l=new g2(v,T),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":v=h(e.geometry),T=f(e.material),l=new _r(v,T);break;case"InstancedMesh":v=h(e.geometry),T=f(e.material);const y=e.count,S=e.instanceMatrix,$=e.instanceColor;l=new _2(v,T,y),l.instanceMatrix=new Xv(new Float32Array(S.array),16),$!==void 0&&(l.instanceColor=new Xv(new Float32Array($.array),$.itemSize));break;case"BatchedMesh":v=h(e.geometry),T=f(e.material),l=new KH(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,T),l.geometry=v,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(M=>{let C=null,E=null;return M.boundingBox!==void 0&&(C=new Ro().fromJSON(M.boundingBox)),M.boundingSphere!==void 0&&(E=new wo().fromJSON(M.boundingSphere)),{...M,boundingBox:C,boundingSphere:E}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new wo().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Ro().fromJSON(e.boundingBox));break;case"LOD":l=new YH;break;case"Line":l=new em(h(e.geometry),f(e.material));break;case"LineLoop":l=new v2(h(e.geometry),f(e.material));break;case"LineSegments":l=new af(h(e.geometry),f(e.material));break;case"PointCloud":case"Points":l=new b2(h(e.geometry),f(e.material));break;case"Sprite":l=new jH(f(e.material));break;case"Group":l=new Y0;break;case"Bone":l=new uM;break;default:l=new zi}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let S=0;S<y.length;S++)l.add(this.parseObject(y[S],n,i,r,a))}if(e.animations!==void 0){const y=e.animations;for(let S=0;S<y.length;S++){const $=y[S];l.animations.push(a[$])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const y=e.levels;for(let S=0;S<y.length;S++){const $=y[S],M=l.getObjectByProperty("uuid",$.object);M!==void 0&&l.addLevel(M,$.distance,$.hysteresis)}}return l}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new zi}})}}const G9={UVMapping:Bg,CubeReflectionMapping:$p,CubeRefractionMapping:kg,EquirectangularReflectionMapping:Uy,EquirectangularRefractionMapping:iS,CubeUVReflectionMapping:pT},ZB={RepeatWrapping:Pg,ClampToEdgeWrapping:co,MirroredRepeatWrapping:Fy},QB={NearestFilter:Ta,NearestMipmapNearestFilter:qC,NearestMipmapLinearFilter:Cv,LinearFilter:us,LinearMipmapNearestFilter:My,LinearMipmapLinearFilter:Nh},wR=new WeakMap;class wG extends Ya{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=mp.get(`image-bitmap:${e}`);if(l!==void 0){if(a.manager.itemStart(e),l.then){l.then(p=>{if(wR.has(l)===!0)r&&r(wR.get(l)),a.manager.itemError(e),a.manager.itemEnd(e);else return n&&n(p),a.manager.itemEnd(e),p});return}return setTimeout(function(){n&&n(l),a.manager.itemEnd(e)},0),l}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader;const f=fetch(e,h).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(p){return mp.add(`image-bitmap:${e}`,p),n&&n(p),a.manager.itemEnd(e),p}).catch(function(p){r&&r(p),wR.set(f,p),mp.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});mp.add(`image-bitmap:${e}`,f),a.manager.itemStart(e)}}let v$;class P2{static getContext(){return v$===void 0&&(v$=new(window.AudioContext||window.webkitAudioContext)),v$}static setContext(e){v$=e}}class z9 extends Ya{constructor(e){super(e)}load(e,n,i,r){const a=this,l=new ja(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{const p=f.slice(0);P2.getContext().decodeAudioData(p,function(T){n(T)}).catch(h)}catch(p){h(p)}},i,r);function h(f){r?r(f):console.error(f),a.manager.itemError(e)}}}const ek=new Fn,tk=new Fn,av=new Fn;class V9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new io,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new io,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,av.copy(e.projectionMatrix);const r=n.eyeSep/2,a=r*n.near/n.focus,l=n.near*Math.tan(kv*n.fov*.5)/n.zoom;let h,f;tk.elements[12]=-r,ek.elements[12]=r,h=-l*n.aspect+a,f=l*n.aspect+a,av.elements[0]=2*n.near/(f-h),av.elements[8]=(f+h)/(f-h),this.cameraL.projectionMatrix.copy(av),h=-l*n.aspect-a,f=l*n.aspect-a,av.elements[0]=2*n.near/(f-h),av.elements[8]=(f+h)/(f-h),this.cameraR.projectionMatrix.copy(av)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tk),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ek)}}class IG extends io{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class U2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const lv=new be,IR=new Mo,W9=new be,uv=new be,cv=new be;class X9 extends zi{constructor(){super(),this.type="AudioListener",this.context=P2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new U2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(lv,IR,W9),uv.set(0,0,-1).applyQuaternion(IR),cv.set(0,1,0).applyQuaternion(IR),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(lv.x,i),n.positionY.linearRampToValueAtTime(lv.y,i),n.positionZ.linearRampToValueAtTime(lv.z,i),n.forwardX.linearRampToValueAtTime(uv.x,i),n.forwardY.linearRampToValueAtTime(uv.y,i),n.forwardZ.linearRampToValueAtTime(uv.z,i),n.upX.linearRampToValueAtTime(cv.x,i),n.upY.linearRampToValueAtTime(cv.y,i),n.upZ.linearRampToValueAtTime(cv.z,i)}else n.setPosition(lv.x,lv.y,lv.z),n.setOrientation(uv.x,uv.y,uv.z,cv.x,cv.y,cv.z)}}let OG=class extends zi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const hv=new be,nk=new Mo,j9=new be,dv=new be;class Y9 extends OG{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hv,nk,j9),dv.set(0,0,1).applyQuaternion(nk);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(hv.x,i),n.positionY.linearRampToValueAtTime(hv.y,i),n.positionZ.linearRampToValueAtTime(hv.z,i),n.orientationX.linearRampToValueAtTime(dv.x,i),n.orientationY.linearRampToValueAtTime(dv.y,i),n.orientationZ.linearRampToValueAtTime(dv.z,i)}else n.setPosition(hv.x,hv.y,hv.z),n.setOrientation(dv.x,dv.y,dv.z)}}class K9{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class NG{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,a,l;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,a=e*r+r;let l=this.cumulativeWeight;if(l===0){for(let h=0;h!==r;++h)i[a+h]=i[h];l=n}else{l+=n;const h=n/l;this._mixBufferRegion(i,a,0,h,r)}this.cumulativeWeight=l}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const f=n*this._origIndex;this._mixBufferRegion(i,r,f,1-a,n)}l>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let f=n,p=n+n;f!==p;++f)if(i[f]!==i[f+n]){h.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let a=i,l=r;a!==l;++a)n[a]=n[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,a){if(r>=.5)for(let l=0;l!==a;++l)e[n+l]=e[i+l]}_slerp(e,n,i,r){Mo.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,a){const l=this._workIndex*a;Mo.multiplyQuaternionsFlat(e,l,e,n,e,i),Mo.slerpFlat(e,n,e,n,e,l,r)}_lerp(e,n,i,r,a){const l=1-r;for(let h=0;h!==a;++h){const f=n+h;e[f]=e[f]*l+e[i+h]*r}}_lerpAdditive(e,n,i,r,a){for(let l=0;l!==a;++l){const h=n+l;e[h]=e[h]+e[i+l]*r}}}const F2="\\[\\]\\.:\\/",q9=new RegExp("["+F2+"]","g"),H2="[^"+F2+"]",J9="[^"+F2.replace("\\.","")+"]",Z9=/((?:WC+[\/:])*)/.source.replace("WC",H2),Q9=/(WCOD+)?/.source.replace("WCOD",J9),e7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",H2),t7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",H2),n7=new RegExp("^"+Z9+Q9+e7+t7+"$"),i7=["material","materials","bones","map"];class s7{constructor(e,n,i){const r=i||es.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class es{constructor(e,n,i){this.path=n,this.parsedPath=i||es.parseTrackName(n),this.node=es.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new es.Composite(e,n,i):new es(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(q9,"")}static parseTrackName(e){const n=n7.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);i7.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let l=0;l<a.length;l++){const h=a[l];if(h.name===n||h.uuid===n)return h;const f=i(h.children);if(f)return f}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=es.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let v=0;v<e.length;v++)if(e[v].name===p){p=v;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[r];if(l===void 0){const p=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+r+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?h=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}es.Composite=s7;es.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};es.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};es.prototype.GetterByBindingType=[es.prototype._getValue_direct,es.prototype._getValue_array,es.prototype._getValue_arrayElement,es.prototype._getValue_toArray];es.prototype.SetterByBindingTypeAndVersioning=[[es.prototype._setValue_direct,es.prototype._setValue_direct_setNeedsUpdate,es.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[es.prototype._setValue_array,es.prototype._setValue_array_setNeedsUpdate,es.prototype._setValue_array_setMatrixWorldNeedsUpdate],[es.prototype._setValue_arrayElement,es.prototype._setValue_arrayElement_setNeedsUpdate,es.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[es.prototype._setValue_fromArray,es.prototype._setValue_fromArray_setNeedsUpdate,es.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class r7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Fc(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length;let h,f=e.length,p=this.nCachedObjects_;for(let v=0,T=arguments.length;v!==T;++v){const y=arguments[v],S=y.uuid;let $=n[S];if($===void 0){$=f++,n[S]=$,e.push(y);for(let M=0,C=l;M!==C;++M)a[M].push(new es(y,i[M],r[M]))}else if($<p){h=e[$];const M=--p,C=e[M];n[C.uuid]=$,e[$]=C,n[S]=M,e[M]=y;for(let E=0,w=l;E!==w;++E){const I=a[E],O=I[M];let P=I[$];I[$]=O,P===void 0&&(P=new es(y,i[E],r[E])),I[M]=P}}else e[$]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let l=0,h=arguments.length;l!==h;++l){const f=arguments[l],p=f.uuid,v=n[p];if(v!==void 0&&v>=a){const T=a++,y=e[T];n[y.uuid]=v,e[v]=y,n[p]=T,e[T]=f;for(let S=0,$=r;S!==$;++S){const M=i[S],C=M[T],E=M[v];M[v]=C,M[T]=E}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,l=e.length;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],v=p.uuid,T=n[v];if(T!==void 0)if(delete n[v],T<a){const y=--a,S=e[y],$=--l,M=e[$];n[S.uuid]=T,e[T]=S,n[M.uuid]=y,e[y]=M,e.pop();for(let C=0,E=r;C!==E;++C){const w=i[C],I=w[y],O=w[$];w[T]=I,w[y]=O,w.pop()}}else{const y=--l,S=e[y];y>0&&(n[S.uuid]=T),e[T]=S,e.pop();for(let $=0,M=r;$!==M;++$){const C=i[$];C[T]=C[y],C.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const l=this._paths,h=this._parsedPaths,f=this._objects,p=f.length,v=this.nCachedObjects_,T=new Array(p);r=a.length,i[e]=r,l.push(e),h.push(n),a.push(T);for(let y=v,S=f.length;y!==S;++y){const $=f[y];T[y]=new es($,e,n)}return T}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,l=this._bindings,h=l.length-1,f=l[h],p=e[h];n[p]=i,l[i]=f,l.pop(),a[i]=a[h],a.pop(),r[i]=r[h],r.pop()}}}class LG{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const a=n.tracks,l=a.length,h=new Array(l),f={endingStart:Mv,endingEnd:Mv};for(let p=0;p!==l;++p){const v=a[p].createInterpolant(null);h[p]=v,v.settings=f}this._interpolantSettings=f,this._interpolants=h,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=CH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){const r=this._clip.duration,a=e._clip.duration,l=a/r,h=r/a;e.warp(1,l,n),this.warp(h,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,a=r.time,l=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=r._lendControlInterpolant(),this._timeScaleInterpolant=h);const f=h.parameterPositions,p=h.sampleValues;return f[0]=a,f[1]=a+i,p[0]=e/l,p[1]=n/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const f=(e-a)*i;f<0||i===0?n=0:(this._startTime=null,n=i*f)}n*=this._updateTimeScale(e);const l=this._updateTime(n),h=this._updateWeight(e);if(h>0){const f=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case o2:for(let v=0,T=f.length;v!==T;++v)f[v].evaluate(l),p[v].accumulateAdditive(h);break;case iM:default:for(let v=0,T=f.length;v!==T;++v)f[v].evaluate(l),p[v].accumulate(r,h)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const l=i===MH;if(e===0)return a===-1?r:l&&(a&1)===1?n-r:r;if(i===xH){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=n||r<0){const h=Math.floor(r/n);r-=n*h,a+=Math.abs(h);const f=this.repetitions-a;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=r;if(l&&(a&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Rv,r.endingEnd=Rv):(e?r.endingStart=this.zeroSlopeAtStart?Rv:Mv:r.endingStart=sS,n?r.endingEnd=this.zeroSlopeAtEnd?Rv:Mv:r.endingEnd=sS)}_scheduleFading(e,n,i){const r=this._mixer,a=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const h=l.parameterPositions,f=l.sampleValues;return h[0]=a,f[0]=n,h[1]=a+e,f[1]=i,this}}const o7=new Float32Array(1);class a7 extends Rp{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,l=e._propertyBindings,h=e._interpolants,f=i.uuid,p=this._bindingsByRootAndName;let v=p[f];v===void 0&&(v={},p[f]=v);for(let T=0;T!==a;++T){const y=r[T],S=y.name;let $=v[S];if($!==void 0)++$.referenceCount,l[T]=$;else{if($=l[T],$!==void 0){$._cacheIndex===null&&(++$.referenceCount,this._addInactiveBinding($,f,S));continue}const M=n&&n._propertyBindings[T].binding.parsedPath;$=new NG(es.create(i,S,M),y.ValueTypeName,y.getValueSize()),++$.referenceCount,this._addInactiveBinding($,f,S),l[T]=$}h[T].resultBuffer=$.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,a=this._actionsByClip;let l=a[n];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=l;else{const h=l.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=r.length,r.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,h=l[a],f=h.knownActions,p=f[f.length-1],v=e._byClipCacheIndex;p._byClipCacheIndex=v,f[v]=p,f.pop(),e._byClipCacheIndex=null;const T=h.actionByRoot,y=(e._localRoot||this._root).uuid;delete T[y],f.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,a=this._bindings;let l=r[n];l===void 0&&(l={},r[n]=l),l[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,l=this._bindingsByRootAndName,h=l[r],f=n[n.length-1],p=e._cacheIndex;f._cacheIndex=p,n[p]=f,n.pop(),delete h[a],Object.keys(h).length===0&&delete l[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new w2(new Float32Array(2),new Float32Array(2),1,o7),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=n[r];e.__cacheIndex=r,n[r]=e,a.__cacheIndex=i,n[i]=a}clipAction(e,n,i){const r=n||this._root,a=r.uuid;let l=typeof e=="string"?Jy.findByName(r,e):e;const h=l!==null?l.uuid:e,f=this._actionsByClip[h];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=iM),f!==void 0){const T=f.actionByRoot[a];if(T!==void 0&&T.blendMode===i)return T;p=f.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const v=new LG(this,l,n,i);return this._bindAction(v,p),this._addInactiveAction(v,h,a),v}existingAction(e,n){const i=n||this._root,r=i.uuid,a=typeof e=="string"?Jy.findByName(i,e):e,l=a?a.uuid:e,h=this._actionsByClip[l];return h!==void 0&&h.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)n[p]._update(r,e,a,l);const h=this._bindings,f=this._nActiveBindings;for(let p=0;p!==f;++p)h[p].apply(l);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const l=a.knownActions;for(let h=0,f=l.length;h!==f;++h){const p=l[h];this._deactivateAction(p);const v=p._cacheIndex,T=n[n.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,T._cacheIndex=v,n[v]=T,n.pop(),this._removeInactiveBindingsForAction(p)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const l in i){const h=i[l].actionByRoot,f=h[n];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const r=this._bindingsByRootAndName,a=r[n];if(a!==void 0)for(const l in a){const h=a[l];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class l7 extends h2{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new rM(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class G2{constructor(e){this.value=e}clone(){return new G2(this.value.clone===void 0?this.value:this.value.clone())}}let u7=0;class c7 extends Rp{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:u7++}),this.name="",this.usage=oS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const a=Array.isArray(n[i])?n[i]:[n[i]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class _C extends FS{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class h7{constructor(e,n,i,r,a,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ik=new Fn;class z2{constructor(e,n,i=0,r=1/0){this.ray=new ib(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Yy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return ik.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ik),this}intersectObject(e,n=!0,i=[]){return nO(e,this,i,n),i.sort(sk),i}intersectObjects(e,n=!0,i=[]){for(let r=0,a=e.length;r<a;r++)nO(e[r],this,i,n);return i.sort(sk),i}}function sk(s,e){return s.distance-e.distance}function nO(s,e,n,i){let r=!0;if(s.layers.test(e.layers)&&s.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const a=s.children;for(let l=0,h=a.length;l<h;l++)nO(a[l],e,n,!0)}}class iO{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ai(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ai(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class d7{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class V2{constructor(e,n,i,r){V2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const a=this.elements;return a[0]=e,a[2]=n,a[1]=i,a[3]=r,this}}const rk=new It;class f7{constructor(e=new It(1/0,1/0),n=new It(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=rk.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rk).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ok=new be,b$=new be;class DG{constructor(e=new be,n=new be){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){ok.subVectors(e,this.start),b$.subVectors(this.end,this.start);const i=b$.dot(b$);let a=b$.dot(ok)/i;return n&&(a=ai(a,0,1)),a}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const ak=new be;class p7 extends zi{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new ui,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,h=1,f=32;l<f;l++,h++){const p=l/f*Math.PI*2,v=h/f*Math.PI*2;r.push(Math.cos(p),Math.sin(p),1,Math.cos(v),Math.sin(v),1)}i.setAttribute("position",new _n(r,3));const a=new Il({fog:!1,toneMapped:!1});this.cone=new af(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),ak.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ak),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tg=new be,y$=new Fn,OR=new Fn;class m7 extends af{constructor(e){const n=BG(e),i=new ui,r=[],a=[],l=new on(0,0,1),h=new on(0,1,0);for(let p=0;p<n.length;p++){const v=n[p];v.parent&&v.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(l.r,l.g,l.b),a.push(h.r,h.g,h.b))}i.setAttribute("position",new _n(r,3)),i.setAttribute("color",new _n(a,3));const f=new Il({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");OR.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<n.length;a++){const h=n[a];h.parent&&h.parent.isBone&&(y$.multiplyMatrices(OR,h.matrixWorld),Tg.setFromMatrixPosition(y$),r.setXYZ(l,Tg.x,Tg.y,Tg.z),y$.multiplyMatrices(OR,h.parent.matrixWorld),Tg.setFromMatrixPosition(y$),r.setXYZ(l+1,Tg.x,Tg.y,Tg.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function BG(s){const e=[];s.isBone===!0&&e.push(s);for(let n=0;n<s.children.length;n++)e.push(...BG(s.children[n]));return e}class g7 extends _r{constructor(e,n,i){const r=new XS(n,4,2),a=new qu({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _7=new be,lk=new on,uk=new on;class v7 extends zi{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new WS(n);r.rotateY(Math.PI*.5),this.material=new qu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),l=new Float32Array(a.count*3);r.setAttribute("color",new ns(l,3)),this.add(new _r(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");lk.copy(this.light.color),uk.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const a=i<r/2?lk:uk;n.setXYZ(i,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(_7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class b7 extends af{constructor(e=10,n=10,i=4473924,r=8947848){i=new on(i),r=new on(r);const a=n/2,l=e/n,h=e/2,f=[],p=[];for(let y=0,S=0,$=-h;y<=n;y++,$+=l){f.push(-h,0,$,h,0,$),f.push($,0,-h,$,0,h);const M=y===a?i:r;M.toArray(p,S),S+=3,M.toArray(p,S),S+=3,M.toArray(p,S),S+=3,M.toArray(p,S),S+=3}const v=new ui;v.setAttribute("position",new _n(f,3)),v.setAttribute("color",new _n(p,3));const T=new Il({vertexColors:!0,toneMapped:!1});super(v,T),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class y7 extends af{constructor(e=10,n=16,i=8,r=64,a=4473924,l=8947848){a=new on(a),l=new on(l);const h=[],f=[];if(n>1)for(let T=0;T<n;T++){const y=T/n*(Math.PI*2),S=Math.sin(y)*e,$=Math.cos(y)*e;h.push(0,0,0),h.push(S,0,$);const M=T&1?a:l;f.push(M.r,M.g,M.b),f.push(M.r,M.g,M.b)}for(let T=0;T<i;T++){const y=T&1?a:l,S=e-e/i*T;for(let $=0;$<r;$++){let M=$/r*(Math.PI*2),C=Math.sin(M)*S,E=Math.cos(M)*S;h.push(C,0,E),f.push(y.r,y.g,y.b),M=($+1)/r*(Math.PI*2),C=Math.sin(M)*S,E=Math.cos(M)*S,h.push(C,0,E),f.push(y.r,y.g,y.b)}}const p=new ui;p.setAttribute("position",new _n(h,3)),p.setAttribute("color",new _n(f,3));const v=new Il({vertexColors:!0,toneMapped:!1});super(p,v),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ck=new be,T$=new be,hk=new be;class T7 extends zi{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new ui;r.setAttribute("position",new _n([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new Il({fog:!1,toneMapped:!1});this.lightPlane=new em(r,a),this.add(this.lightPlane),r=new ui,r.setAttribute("position",new _n([0,0,0,0,0,1],3)),this.targetLine=new em(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ck.setFromMatrixPosition(this.light.matrixWorld),T$.setFromMatrixPosition(this.light.target.matrixWorld),hk.subVectors(T$,ck),this.lightPlane.lookAt(T$),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(T$),this.targetLine.scale.z=hk.length()}}const E$=new be,qr=new oM;class E7 extends af{constructor(e){const n=new ui,i=new Il({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],l={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h($,M){f($),f(M)}function f($){r.push(0,0,0),a.push(0,0,0),l[$]===void 0&&(l[$]=[]),l[$].push(r.length/3-1)}n.setAttribute("position",new _n(r,3)),n.setAttribute("color",new _n(a,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new on(16755200),v=new on(16711680),T=new on(43775),y=new on(16777215),S=new on(3355443);this.setColors(p,v,T,y,S)}setColors(e,n,i,r,a){const h=this.geometry.getAttribute("color");h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,n.r,n.g,n.b),h.setXYZ(25,n.r,n.g,n.b),h.setXYZ(26,n.r,n.g,n.b),h.setXYZ(27,n.r,n.g,n.b),h.setXYZ(28,n.r,n.g,n.b),h.setXYZ(29,n.r,n.g,n.b),h.setXYZ(30,n.r,n.g,n.b),h.setXYZ(31,n.r,n.g,n.b),h.setXYZ(32,i.r,i.g,i.b),h.setXYZ(33,i.r,i.g,i.b),h.setXYZ(34,i.r,i.g,i.b),h.setXYZ(35,i.r,i.g,i.b),h.setXYZ(36,i.r,i.g,i.b),h.setXYZ(37,i.r,i.g,i.b),h.setXYZ(38,r.r,r.g,r.b),h.setXYZ(39,r.r,r.g,r.b),h.setXYZ(40,a.r,a.g,a.b),h.setXYZ(41,a.r,a.g,a.b),h.setXYZ(42,a.r,a.g,a.b),h.setXYZ(43,a.r,a.g,a.b),h.setXYZ(44,a.r,a.g,a.b),h.setXYZ(45,a.r,a.g,a.b),h.setXYZ(46,a.r,a.g,a.b),h.setXYZ(47,a.r,a.g,a.b),h.setXYZ(48,a.r,a.g,a.b),h.setXYZ(49,a.r,a.g,a.b),h.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;qr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===Lh?-1:0;uo("c",n,e,qr,0,0,a),uo("t",n,e,qr,0,0,1),uo("n1",n,e,qr,-i,-r,a),uo("n2",n,e,qr,i,-r,a),uo("n3",n,e,qr,-i,r,a),uo("n4",n,e,qr,i,r,a),uo("f1",n,e,qr,-i,-r,1),uo("f2",n,e,qr,i,-r,1),uo("f3",n,e,qr,-i,r,1),uo("f4",n,e,qr,i,r,1),uo("u1",n,e,qr,i*.7,r*1.1,a),uo("u2",n,e,qr,-i*.7,r*1.1,a),uo("u3",n,e,qr,0,r*2,a),uo("cf1",n,e,qr,-i,0,1),uo("cf2",n,e,qr,i,0,1),uo("cf3",n,e,qr,0,-r,1),uo("cf4",n,e,qr,0,r,1),uo("cn1",n,e,qr,-i,0,a),uo("cn2",n,e,qr,i,0,a),uo("cn3",n,e,qr,0,-r,a),uo("cn4",n,e,qr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function uo(s,e,n,i,r,a,l){E$.set(r,a,l).unproject(i);const h=e[s];if(h!==void 0){const f=n.getAttribute("position");for(let p=0,v=h.length;p<v;p++)f.setXYZ(h[p],E$.x,E$.y,E$.z)}}const S$=new Ro;class S7 extends af{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),a=new ui;a.setIndex(new ns(i,1)),a.setAttribute("position",new ns(r,3)),super(a,new Il({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&S$.setFromObject(this.object),S$.isEmpty())return;const e=S$.min,n=S$.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class A7 extends af{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new ui;a.setIndex(new ns(i,1)),a.setAttribute("position",new _n(r,3)),super(a,new Il({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class $7 extends em{constructor(e,n=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ui;l.setAttribute("position",new _n(a,3)),l.computeBoundingSphere(),super(l,new Il({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new ui;f.setAttribute("position",new _n(h,3)),f.computeBoundingSphere(),this.add(new _r(f,new qu({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const dk=new be;let A$,NR;class x7 extends zi{constructor(e=new be(0,0,1),n=new be(0,0,0),i=1,r=16776960,a=i*.2,l=a*.2){super(),this.type="ArrowHelper",A$===void 0&&(A$=new ui,A$.setAttribute("position",new _n([0,0,0,0,1,0],3)),NR=new zS(.5,1,5,1),NR.translate(0,-.5,0)),this.position.copy(n),this.line=new em(A$,new Il({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _r(NR,new qu({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{dk.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(dk,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class C7 extends af{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ui;r.setAttribute("position",new _n(n,3)),r.setAttribute("color",new _n(i,3));const a=new Il({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,n,i){const r=new on,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(n),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class M7{constructor(){this.type="ShapePath",this.color=new on,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new gC,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,a,l){return this.currentPath.bezierCurveTo(e,n,i,r,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(E){const w=[];for(let I=0,O=E.length;I<O;I++){const P=E[I],F=new Ig;F.curves=P.curves,w.push(F)}return w}function i(E,w){const I=w.length;let O=!1;for(let P=I-1,F=0;F<I;P=F++){let V=w[P],X=w[F],G=X.x-V.x,D=X.y-V.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(V=w[F],G=-G,X=w[P],D=-D),E.y<V.y||E.y>X.y)continue;if(E.y===V.y){if(E.x===V.x)return!0}else{const Z=D*(E.x-V.x)-G*(E.y-V.y);if(Z===0)return!0;if(Z<0)continue;O=!O}}else{if(E.y!==V.y)continue;if(X.x<=E.x&&E.x<=V.x||V.x<=E.x&&E.x<=X.x)return!0}}return O}const r=qd.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,h,f;const p=[];if(a.length===1)return h=a[0],f=new Ig,f.curves=h.curves,p.push(f),p;let v=!r(a[0].getPoints());v=e?!v:v;const T=[],y=[];let S=[],$=0,M;y[$]=void 0,S[$]=[];for(let E=0,w=a.length;E<w;E++)h=a[E],M=h.getPoints(),l=r(M),l=e?!l:l,l?(!v&&y[$]&&$++,y[$]={s:new Ig,p:M},y[$].s.curves=h.curves,v&&$++,S[$]=[]):S[$].push({h,p:M[0]});if(!y[0])return n(a);if(y.length>1){let E=!1,w=0;for(let I=0,O=y.length;I<O;I++)T[I]=[];for(let I=0,O=y.length;I<O;I++){const P=S[I];for(let F=0;F<P.length;F++){const V=P[F];let X=!0;for(let G=0;G<y.length;G++)i(V.p,y[G].p)&&(I!==G&&w++,X?(X=!1,T[G].push(V)):E=!0);X&&T[I].push(V)}}w>0&&E===!1&&(S=T)}let C;for(let E=0,w=y.length;E<w;E++){f=y[E].s,p.push(f),C=S[E];for(let I=0,O=C.length;I<O;I++)f.holes.push(C[I].h)}return p}}class R7 extends Rp{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function w7(s,e){const n=s.image&&s.image.width?s.image.width/s.image.height:1;return n>e?(s.repeat.x=1,s.repeat.y=n/e,s.offset.x=0,s.offset.y=(1-s.repeat.y)/2):(s.repeat.x=e/n,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0),s}function I7(s,e){const n=s.image&&s.image.width?s.image.width/s.image.height:1;return n>e?(s.repeat.x=e/n,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0):(s.repeat.x=1,s.repeat.y=n/e,s.offset.x=0,s.offset.y=(1-s.repeat.y)/2),s}function O7(s){return s.repeat.x=1,s.repeat.y=1,s.offset.x=0,s.offset.y=0,s}function sO(s,e,n,i){const r=N7(i);switch(n){case n2:return s*e;case kS:return s*e/r.components*r.byteLength;case PS:return s*e/r.components*r.byteLength;case s2:return s*e*2/r.components*r.byteLength;case tM:return s*e*2/r.components*r.byteLength;case i2:return s*e*3/r.components*r.byteLength;case ho:return s*e*4/r.components*r.byteLength;case nM:return s*e*4/r.components*r.byteLength;case PE:case UE:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;case FE:case HE:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case Fx:case Gx:return Math.max(s,16)*Math.max(e,8)/4;case Ux:case Hx:return Math.max(s,8)*Math.max(e,8)/2;case zx:case Vx:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;case Wx:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case Xx:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case jx:return Math.floor((s+4)/5)*Math.floor((e+3)/4)*16;case Yx:return Math.floor((s+4)/5)*Math.floor((e+4)/5)*16;case Kx:return Math.floor((s+5)/6)*Math.floor((e+4)/5)*16;case qx:return Math.floor((s+5)/6)*Math.floor((e+5)/6)*16;case Jx:return Math.floor((s+7)/8)*Math.floor((e+4)/5)*16;case Zx:return Math.floor((s+7)/8)*Math.floor((e+5)/6)*16;case Qx:return Math.floor((s+7)/8)*Math.floor((e+7)/8)*16;case eC:return Math.floor((s+9)/10)*Math.floor((e+4)/5)*16;case tC:return Math.floor((s+9)/10)*Math.floor((e+5)/6)*16;case nC:return Math.floor((s+9)/10)*Math.floor((e+7)/8)*16;case iC:return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case sC:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case rC:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case GE:case oC:case aC:return Math.ceil(s/4)*Math.ceil(e/4)*16;case r2:case lC:return Math.ceil(s/4)*Math.ceil(e/4)*8;case uC:case cC:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function N7(s){switch(s){case fu:case JC:return{byteLength:1,components:1};case Hy:case ZC:case ea:return{byteLength:2,components:1};case QC:case eM:return{byteLength:2,components:4};case xp:case BS:case Rr:return{byteLength:4,components:1};case t2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${s}.`)}class L7{static contain(e,n){return w7(e,n)}static cover(e,n){return I7(e,n)}static fill(e){return O7(e)}static getByteLength(e,n,i,r){return sO(e,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:LS}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=LS);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function kG(){let s=null,e=!1,n=null,i=null;function r(a,l){n(a,l),i=s.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=s.requestAnimationFrame(r),e=!0)},stop:function(){s.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){s=a}}}function D7(s){const e=new WeakMap;function n(h,f){const p=h.array,v=h.usage,T=p.byteLength,y=s.createBuffer();s.bindBuffer(f,y),s.bufferData(f,p,v),h.onUploadCallback();let S;if(p instanceof Float32Array)S=s.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)S=s.HALF_FLOAT;else if(p instanceof Uint16Array)h.isFloat16BufferAttribute?S=s.HALF_FLOAT:S=s.UNSIGNED_SHORT;else if(p instanceof Int16Array)S=s.SHORT;else if(p instanceof Uint32Array)S=s.UNSIGNED_INT;else if(p instanceof Int32Array)S=s.INT;else if(p instanceof Int8Array)S=s.BYTE;else if(p instanceof Uint8Array)S=s.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)S=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:S,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version,size:T}}function i(h,f,p){const v=f.array,T=f.updateRanges;if(s.bindBuffer(p,h),T.length===0)s.bufferSubData(p,0,v);else{T.sort((S,$)=>S.start-$.start);let y=0;for(let S=1;S<T.length;S++){const $=T[y],M=T[S];M.start<=$.start+$.count+1?$.count=Math.max($.count,M.start+M.count-$.start):(++y,T[y]=M)}T.length=y+1;for(let S=0,$=T.length;S<$;S++){const M=T[S];s.bufferSubData(p,M.start*v.BYTES_PER_ELEMENT,v,M.start,M.count)}f.clearUpdateRanges()}f.onUploadCallback()}function r(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function a(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=e.get(h);f&&(s.deleteBuffer(f.buffer),e.delete(h))}function l(h,f){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const v=e.get(h);(!v||v.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const p=e.get(h);if(p===void 0)e.set(h,n(h,f));else if(p.version<h.version){if(p.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,h,f),p.version=h.version}}return{get:r,remove:a,update:l}}var B7=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,k7=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,P7=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,U7=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,F7=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,H7=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,G7=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,z7=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,V7=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,W7=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,X7=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,j7=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Y7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,K7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,q7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,J7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Z7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Q7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,eX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,nX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,iX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,sX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,rX=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,oX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,aX=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,lX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,hX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,dX="gl_FragColor = linearToOutputTexel( gl_FragColor );",fX=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,pX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,mX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,gX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_X=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,vX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,bX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,EX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,AX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,$X=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,xX=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,CX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,MX=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,RX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,IX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,OX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,NX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,LX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,DX=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,BX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,kX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,PX=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,UX=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FX=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,HX=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,GX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,VX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,WX=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,jX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,YX=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,KX=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,qX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,JX=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,ZX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,QX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ej=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,tj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ij=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sj=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,rj=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,oj=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,aj=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,lj=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,uj=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,cj=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,hj=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,dj=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fj=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,pj=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,mj=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,gj=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_j=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,vj=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,bj=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yj=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Tj=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ej=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Sj=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Aj=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$j=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xj=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Cj=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Mj=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Rj=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,wj=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ij=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Oj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nj=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Lj=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Dj=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Bj=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Pj=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Uj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Fj=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Gj=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,zj=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Vj=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Xj=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jj=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yj=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Kj=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jj=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zj=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,eY=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tY=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,nY=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,iY=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sY=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rY=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,oY=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aY=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lY=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uY=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hY=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dY=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fY=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bi={alphahash_fragment:B7,alphahash_pars_fragment:k7,alphamap_fragment:P7,alphamap_pars_fragment:U7,alphatest_fragment:F7,alphatest_pars_fragment:H7,aomap_fragment:G7,aomap_pars_fragment:z7,batching_pars_vertex:V7,batching_vertex:W7,begin_vertex:X7,beginnormal_vertex:j7,bsdfs:Y7,iridescence_fragment:K7,bumpmap_pars_fragment:q7,clipping_planes_fragment:J7,clipping_planes_pars_fragment:Z7,clipping_planes_pars_vertex:Q7,clipping_planes_vertex:eX,color_fragment:tX,color_pars_fragment:nX,color_pars_vertex:iX,color_vertex:sX,common:rX,cube_uv_reflection_fragment:oX,defaultnormal_vertex:aX,displacementmap_pars_vertex:lX,displacementmap_vertex:uX,emissivemap_fragment:cX,emissivemap_pars_fragment:hX,colorspace_fragment:dX,colorspace_pars_fragment:fX,envmap_fragment:pX,envmap_common_pars_fragment:mX,envmap_pars_fragment:gX,envmap_pars_vertex:_X,envmap_physical_pars_fragment:MX,envmap_vertex:vX,fog_vertex:bX,fog_pars_vertex:yX,fog_fragment:TX,fog_pars_fragment:EX,gradientmap_pars_fragment:SX,lightmap_pars_fragment:AX,lights_lambert_fragment:$X,lights_lambert_pars_fragment:xX,lights_pars_begin:CX,lights_toon_fragment:RX,lights_toon_pars_fragment:wX,lights_phong_fragment:IX,lights_phong_pars_fragment:OX,lights_physical_fragment:NX,lights_physical_pars_fragment:LX,lights_fragment_begin:DX,lights_fragment_maps:BX,lights_fragment_end:kX,logdepthbuf_fragment:PX,logdepthbuf_pars_fragment:UX,logdepthbuf_pars_vertex:FX,logdepthbuf_vertex:HX,map_fragment:GX,map_pars_fragment:zX,map_particle_fragment:VX,map_particle_pars_fragment:WX,metalnessmap_fragment:XX,metalnessmap_pars_fragment:jX,morphinstance_vertex:YX,morphcolor_vertex:KX,morphnormal_vertex:qX,morphtarget_pars_vertex:JX,morphtarget_vertex:ZX,normal_fragment_begin:QX,normal_fragment_maps:ej,normal_pars_fragment:tj,normal_pars_vertex:nj,normal_vertex:ij,normalmap_pars_fragment:sj,clearcoat_normal_fragment_begin:rj,clearcoat_normal_fragment_maps:oj,clearcoat_pars_fragment:aj,iridescence_pars_fragment:lj,opaque_fragment:uj,packing:cj,premultiplied_alpha_fragment:hj,project_vertex:dj,dithering_fragment:fj,dithering_pars_fragment:pj,roughnessmap_fragment:mj,roughnessmap_pars_fragment:gj,shadowmap_pars_fragment:_j,shadowmap_pars_vertex:vj,shadowmap_vertex:bj,shadowmask_pars_fragment:yj,skinbase_vertex:Tj,skinning_pars_vertex:Ej,skinning_vertex:Sj,skinnormal_vertex:Aj,specularmap_fragment:$j,specularmap_pars_fragment:xj,tonemapping_fragment:Cj,tonemapping_pars_fragment:Mj,transmission_fragment:Rj,transmission_pars_fragment:wj,uv_pars_fragment:Ij,uv_pars_vertex:Oj,uv_vertex:Nj,worldpos_vertex:Lj,background_vert:Dj,background_frag:Bj,backgroundCube_vert:kj,backgroundCube_frag:Pj,cube_vert:Uj,cube_frag:Fj,depth_vert:Hj,depth_frag:Gj,distanceRGBA_vert:zj,distanceRGBA_frag:Vj,equirect_vert:Wj,equirect_frag:Xj,linedashed_vert:jj,linedashed_frag:Yj,meshbasic_vert:Kj,meshbasic_frag:qj,meshlambert_vert:Jj,meshlambert_frag:Zj,meshmatcap_vert:Qj,meshmatcap_frag:eY,meshnormal_vert:tY,meshnormal_frag:nY,meshphong_vert:iY,meshphong_frag:sY,meshphysical_vert:rY,meshphysical_frag:oY,meshtoon_vert:aY,meshtoon_frag:lY,points_vert:uY,points_frag:cY,shadow_vert:hY,shadow_frag:dY,sprite_vert:fY,sprite_frag:pY},sn={common:{diffuse:{value:new on(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ci},alphaMap:{value:null},alphaMapTransform:{value:new ci},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ci}},envmap:{envMap:{value:null},envMapRotation:{value:new ci},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ci}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ci}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ci},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ci},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ci},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ci}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ci}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ci}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new on(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new on(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ci},alphaTest:{value:0},uvTransform:{value:new ci}},sprite:{diffuse:{value:new on(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ci},alphaMap:{value:null},alphaMapTransform:{value:new ci},alphaTest:{value:0}}},Yd={basic:{uniforms:lu([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.fog]),vertexShader:bi.meshbasic_vert,fragmentShader:bi.meshbasic_frag},lambert:{uniforms:lu([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.fog,sn.lights,{emissive:{value:new on(0)}}]),vertexShader:bi.meshlambert_vert,fragmentShader:bi.meshlambert_frag},phong:{uniforms:lu([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.fog,sn.lights,{emissive:{value:new on(0)},specular:{value:new on(1118481)},shininess:{value:30}}]),vertexShader:bi.meshphong_vert,fragmentShader:bi.meshphong_frag},standard:{uniforms:lu([sn.common,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.roughnessmap,sn.metalnessmap,sn.fog,sn.lights,{emissive:{value:new on(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag},toon:{uniforms:lu([sn.common,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.gradientmap,sn.fog,sn.lights,{emissive:{value:new on(0)}}]),vertexShader:bi.meshtoon_vert,fragmentShader:bi.meshtoon_frag},matcap:{uniforms:lu([sn.common,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.fog,{matcap:{value:null}}]),vertexShader:bi.meshmatcap_vert,fragmentShader:bi.meshmatcap_frag},points:{uniforms:lu([sn.points,sn.fog]),vertexShader:bi.points_vert,fragmentShader:bi.points_frag},dashed:{uniforms:lu([sn.common,sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bi.linedashed_vert,fragmentShader:bi.linedashed_frag},depth:{uniforms:lu([sn.common,sn.displacementmap]),vertexShader:bi.depth_vert,fragmentShader:bi.depth_frag},normal:{uniforms:lu([sn.common,sn.bumpmap,sn.normalmap,sn.displacementmap,{opacity:{value:1}}]),vertexShader:bi.meshnormal_vert,fragmentShader:bi.meshnormal_frag},sprite:{uniforms:lu([sn.sprite,sn.fog]),vertexShader:bi.sprite_vert,fragmentShader:bi.sprite_frag},background:{uniforms:{uvTransform:{value:new ci},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bi.background_vert,fragmentShader:bi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ci}},vertexShader:bi.backgroundCube_vert,fragmentShader:bi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bi.cube_vert,fragmentShader:bi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bi.equirect_vert,fragmentShader:bi.equirect_frag},distanceRGBA:{uniforms:lu([sn.common,sn.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bi.distanceRGBA_vert,fragmentShader:bi.distanceRGBA_frag},shadow:{uniforms:lu([sn.lights,sn.fog,{color:{value:new on(0)},opacity:{value:1}}]),vertexShader:bi.shadow_vert,fragmentShader:bi.shadow_frag}};Yd.physical={uniforms:lu([Yd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ci},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ci},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ci},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ci},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ci},sheen:{value:0},sheenColor:{value:new on(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ci},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ci},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ci},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ci},attenuationDistance:{value:0},attenuationColor:{value:new on(0)},specularColor:{value:new on(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ci},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ci},anisotropyVector:{value:new It},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ci}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag};const $$={r:0,b:0,g:0},fv=new zc,mY=new Fn;function gY(s,e,n,i,r,a,l){const h=new on(0);let f=a===!0?0:1,p,v,T=null,y=0,S=null;function $(I){let O=I.isScene===!0?I.background:null;return O&&O.isTexture&&(O=(I.backgroundBlurriness>0?n:e).get(O)),O}function M(I){let O=!1;const P=$(I);P===null?E(h,f):P&&P.isColor&&(E(P,1),O=!0);const F=s.xr.getEnvironmentBlendMode();F==="additive"?i.buffers.color.setClear(0,0,0,1,l):F==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,l),(s.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function C(I,O){const P=$(O);P&&(P.isCubeTexture||P.mapping===pT)?(v===void 0&&(v=new _r(new sb(1,1,1),new pu({name:"BackgroundCubeMaterial",uniforms:Ky(Yd.backgroundCube.uniforms),vertexShader:Yd.backgroundCube.vertexShader,fragmentShader:Yd.backgroundCube.fragmentShader,side:hu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(F,V,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),fv.copy(O.backgroundRotation),fv.x*=-1,fv.y*=-1,fv.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(fv.y*=-1,fv.z*=-1),v.material.uniforms.envMap.value=P,v.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(mY.makeRotationFromEuler(fv)),v.material.toneMapped=Yi.getTransfer(P.colorSpace)!==Ls,(T!==P||y!==P.version||S!==s.toneMapping)&&(v.material.needsUpdate=!0,T=P,y=P.version,S=s.toneMapping),v.layers.enableAll(),I.unshift(v,v.geometry,v.material,0,0,null)):P&&P.isTexture&&(p===void 0&&(p=new _r(new jg(2,2),new pu({name:"BackgroundMaterial",uniforms:Ky(Yd.background.uniforms),vertexShader:Yd.background.vertexShader,fragmentShader:Yd.background.fragmentShader,side:Ap,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=P,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.toneMapped=Yi.getTransfer(P.colorSpace)!==Ls,P.matrixAutoUpdate===!0&&P.updateMatrix(),p.material.uniforms.uvTransform.value.copy(P.matrix),(T!==P||y!==P.version||S!==s.toneMapping)&&(p.material.needsUpdate=!0,T=P,y=P.version,S=s.toneMapping),p.layers.enableAll(),I.unshift(p,p.geometry,p.material,0,0,null))}function E(I,O){I.getRGB($$,VH(s)),i.buffers.color.setClear($$.r,$$.g,$$.b,O,l)}function w(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return h},setClearColor:function(I,O=1){h.set(I),f=O,E(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(I){f=I,E(h,f)},render:M,addToRenderList:C,dispose:w}}function _Y(s,e){const n=s.getParameter(s.MAX_VERTEX_ATTRIBS),i={},r=y(null);let a=r,l=!1;function h(D,Z,Y,j,ne){let ee=!1;const z=T(j,Y,Z);a!==z&&(a=z,p(a.object)),ee=S(D,j,Y,ne),ee&&$(D,j,Y,ne),ne!==null&&e.update(ne,s.ELEMENT_ARRAY_BUFFER),(ee||l)&&(l=!1,O(D,Z,Y,j),ne!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.get(ne).buffer))}function f(){return s.createVertexArray()}function p(D){return s.bindVertexArray(D)}function v(D){return s.deleteVertexArray(D)}function T(D,Z,Y){const j=Y.wireframe===!0;let ne=i[D.id];ne===void 0&&(ne={},i[D.id]=ne);let ee=ne[Z.id];ee===void 0&&(ee={},ne[Z.id]=ee);let z=ee[j];return z===void 0&&(z=y(f()),ee[j]=z),z}function y(D){const Z=[],Y=[],j=[];for(let ne=0;ne<n;ne++)Z[ne]=0,Y[ne]=0,j[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:Y,attributeDivisors:j,object:D,attributes:{},index:null}}function S(D,Z,Y,j){const ne=a.attributes,ee=Z.attributes;let z=0;const te=Y.getAttributes();for(const ce in te)if(te[ce].location>=0){const K=ne[ce];let fe=ee[ce];if(fe===void 0&&(ce==="instanceMatrix"&&D.instanceMatrix&&(fe=D.instanceMatrix),ce==="instanceColor"&&D.instanceColor&&(fe=D.instanceColor)),K===void 0||K.attribute!==fe||fe&&K.data!==fe.data)return!0;z++}return a.attributesNum!==z||a.index!==j}function $(D,Z,Y,j){const ne={},ee=Z.attributes;let z=0;const te=Y.getAttributes();for(const ce in te)if(te[ce].location>=0){let K=ee[ce];K===void 0&&(ce==="instanceMatrix"&&D.instanceMatrix&&(K=D.instanceMatrix),ce==="instanceColor"&&D.instanceColor&&(K=D.instanceColor));const fe={};fe.attribute=K,K&&K.data&&(fe.data=K.data),ne[ce]=fe,z++}a.attributes=ne,a.attributesNum=z,a.index=j}function M(){const D=a.newAttributes;for(let Z=0,Y=D.length;Z<Y;Z++)D[Z]=0}function C(D){E(D,0)}function E(D,Z){const Y=a.newAttributes,j=a.enabledAttributes,ne=a.attributeDivisors;Y[D]=1,j[D]===0&&(s.enableVertexAttribArray(D),j[D]=1),ne[D]!==Z&&(s.vertexAttribDivisor(D,Z),ne[D]=Z)}function w(){const D=a.newAttributes,Z=a.enabledAttributes;for(let Y=0,j=Z.length;Y<j;Y++)Z[Y]!==D[Y]&&(s.disableVertexAttribArray(Y),Z[Y]=0)}function I(D,Z,Y,j,ne,ee,z){z===!0?s.vertexAttribIPointer(D,Z,Y,ne,ee):s.vertexAttribPointer(D,Z,Y,j,ne,ee)}function O(D,Z,Y,j){M();const ne=j.attributes,ee=Y.getAttributes(),z=Z.defaultAttributeValues;for(const te in ee){const ce=ee[te];if(ce.location>=0){let pe=ne[te];if(pe===void 0&&(te==="instanceMatrix"&&D.instanceMatrix&&(pe=D.instanceMatrix),te==="instanceColor"&&D.instanceColor&&(pe=D.instanceColor)),pe!==void 0){const K=pe.normalized,fe=pe.itemSize,Ne=e.get(pe);if(Ne===void 0)continue;const Pe=Ne.buffer,Ee=Ne.type,We=Ne.bytesPerElement,Fe=Ee===s.INT||Ee===s.UNSIGNED_INT||pe.gpuType===BS;if(pe.isInterleavedBufferAttribute){const gt=pe.data,ft=gt.stride,Ut=pe.offset;if(gt.isInstancedInterleavedBuffer){for(let Ke=0;Ke<ce.locationSize;Ke++)E(ce.location+Ke,gt.meshPerAttribute);D.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let Ke=0;Ke<ce.locationSize;Ke++)C(ce.location+Ke);s.bindBuffer(s.ARRAY_BUFFER,Pe);for(let Ke=0;Ke<ce.locationSize;Ke++)I(ce.location+Ke,fe/ce.locationSize,Ee,K,ft*We,(Ut+fe/ce.locationSize*Ke)*We,Fe)}else{if(pe.isInstancedBufferAttribute){for(let gt=0;gt<ce.locationSize;gt++)E(ce.location+gt,pe.meshPerAttribute);D.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let gt=0;gt<ce.locationSize;gt++)C(ce.location+gt);s.bindBuffer(s.ARRAY_BUFFER,Pe);for(let gt=0;gt<ce.locationSize;gt++)I(ce.location+gt,fe/ce.locationSize,Ee,K,fe*We,fe/ce.locationSize*gt*We,Fe)}}else if(z!==void 0){const K=z[te];if(K!==void 0)switch(K.length){case 2:s.vertexAttrib2fv(ce.location,K);break;case 3:s.vertexAttrib3fv(ce.location,K);break;case 4:s.vertexAttrib4fv(ce.location,K);break;default:s.vertexAttrib1fv(ce.location,K)}}}}w()}function P(){X();for(const D in i){const Z=i[D];for(const Y in Z){const j=Z[Y];for(const ne in j)v(j[ne].object),delete j[ne];delete Z[Y]}delete i[D]}}function F(D){if(i[D.id]===void 0)return;const Z=i[D.id];for(const Y in Z){const j=Z[Y];for(const ne in j)v(j[ne].object),delete j[ne];delete Z[Y]}delete i[D.id]}function V(D){for(const Z in i){const Y=i[Z];if(Y[D.id]===void 0)continue;const j=Y[D.id];for(const ne in j)v(j[ne].object),delete j[ne];delete Y[D.id]}}function X(){G(),l=!0,a!==r&&(a=r,p(a.object))}function G(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:h,reset:X,resetDefaultState:G,dispose:P,releaseStatesOfGeometry:F,releaseStatesOfProgram:V,initAttributes:M,enableAttribute:C,disableUnusedAttributes:w}}function vY(s,e,n){let i;function r(p){i=p}function a(p,v){s.drawArrays(i,p,v),n.update(v,i,1)}function l(p,v,T){T!==0&&(s.drawArraysInstanced(i,p,v,T),n.update(v,i,T))}function h(p,v,T){if(T===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,v,0,T);let S=0;for(let $=0;$<T;$++)S+=v[$];n.update(S,i,1)}function f(p,v,T,y){if(T===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let $=0;$<p.length;$++)l(p[$],v[$],y[$]);else{S.multiDrawArraysInstancedWEBGL(i,p,0,v,0,y,0,T);let $=0;for(let M=0;M<T;M++)$+=v[M]*y[M];n.update($,i,1)}}this.setMode=r,this.render=a,this.renderInstances=l,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function bY(s,e,n,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");r=s.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function l(V){return!(V!==ho&&i.convert(V)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(V){const X=V===ea&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(V!==fu&&i.convert(V)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&V!==Rr&&!X)}function f(V){if(V==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=n.precision!==void 0?n.precision:"highp";const v=f(p);v!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",v,"instead."),p=v);const T=n.logarithmicDepthBuffer===!0,y=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),S=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),$=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=s.getParameter(s.MAX_TEXTURE_SIZE),C=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),E=s.getParameter(s.MAX_VERTEX_ATTRIBS),w=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),I=s.getParameter(s.MAX_VARYING_VECTORS),O=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),P=$>0,F=s.getParameter(s.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:f,textureFormatReadable:l,textureTypeReadable:h,precision:p,logarithmicDepthBuffer:T,reverseDepthBuffer:y,maxTextures:S,maxVertexTextures:$,maxTextureSize:M,maxCubemapSize:C,maxAttributes:E,maxVertexUniforms:w,maxVaryings:I,maxFragmentUniforms:O,vertexTextures:P,maxSamples:F}}function yY(s){const e=this;let n=null,i=0,r=!1,a=!1;const l=new G0,h=new ci,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(T,y){const S=T.length!==0||y||i!==0||r;return r=y,i=T.length,S},this.beginShadows=function(){a=!0,v(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(T,y){n=v(T,y,0)},this.setState=function(T,y,S){const $=T.clippingPlanes,M=T.clipIntersection,C=T.clipShadows,E=s.get(T);if(!r||$===null||$.length===0||a&&!C)a?v(null):p();else{const w=a?0:i,I=w*4;let O=E.clippingState||null;f.value=O,O=v($,y,I,S);for(let P=0;P!==I;++P)O[P]=n[P];E.clippingState=O,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=w}};function p(){f.value!==n&&(f.value=n,f.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function v(T,y,S,$){const M=T!==null?T.length:0;let C=null;if(M!==0){if(C=f.value,$!==!0||C===null){const E=S+M*4,w=y.matrixWorldInverse;h.getNormalMatrix(w),(C===null||C.length<E)&&(C=new Float32Array(E));for(let I=0,O=S;I!==M;++I,O+=4)l.copy(T[I]).applyMatrix4(w,h),l.normal.toArray(C,O),C[O+3]=l.constant}f.value=C,f.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,C}}function TY(s){let e=new WeakMap;function n(l,h){return h===Uy?l.mapping=$p:h===iS&&(l.mapping=kg),l}function i(l){if(l&&l.isTexture){const h=l.mapping;if(h===Uy||h===iS)if(e.has(l)){const f=e.get(l).texture;return n(f,l.mapping)}else{const f=l.image;if(f&&f.height>0){const p=new p2(f.height);return p.fromEquirectangularTexture(s,l),e.set(l,p),l.addEventListener("dispose",r),n(p.texture,l.mapping)}else return null}}return l}function r(l){const h=l.target;h.removeEventListener("dispose",r);const f=e.get(h);f!==void 0&&(e.delete(h),f.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const Sy=4,fk=[.125,.215,.35,.446,.526,.582],xv=20,LR=new Tp,pk=new on;let DR=null,BR=0,kR=0,PR=!1;const Ev=(1+Math.sqrt(5))/2,iy=1/Ev,mk=[new be(-Ev,iy,0),new be(Ev,iy,0),new be(-iy,0,Ev),new be(iy,0,Ev),new be(0,Ev,-iy),new be(0,Ev,iy),new be(-1,1,-1),new be(1,1,-1),new be(-1,1,1),new be(1,1,1)],EY=new be;class rO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100,a={}){const{size:l=256,position:h=EY}=a;DR=this._renderer.getRenderTarget(),BR=this._renderer.getActiveCubeFace(),kR=this._renderer.getActiveMipmapLevel(),PR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,i,r,f,h),n>0&&this._blur(f,0,0,n),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_k(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DR,BR,kR),this._renderer.xr.enabled=PR,e.scissorTest=!1,x$(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===$p||e.mapping===kg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DR=this._renderer.getRenderTarget(),BR=this._renderer.getActiveCubeFace(),kR=this._renderer.getActiveMipmapLevel(),PR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:us,minFilter:us,generateMipmaps:!1,type:ea,format:ho,colorSpace:sf,depthBuffer:!1},r=gk(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gk(e,n,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=SY(a)),this._blurMaterial=AY(a,e,n)}return r}_compileMaterial(e){const n=new _r(this._lodPlanes[0],e);this._renderer.compile(n,LR)}_sceneToCubeUV(e,n,i,r,a){const f=new io(90,1,n,i),p=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],T=this._renderer,y=T.autoClear,S=T.toneMapping;T.getClearColor(pk),T.toneMapping=yp,T.autoClear=!1;const $=new qu({name:"PMREM.Background",side:hu,depthWrite:!1,depthTest:!1}),M=new _r(new sb,$);let C=!1;const E=e.background;E?E.isColor&&($.color.copy(E),e.background=null,C=!0):($.color.copy(pk),C=!0);for(let w=0;w<6;w++){const I=w%3;I===0?(f.up.set(0,p[w],0),f.position.set(a.x,a.y,a.z),f.lookAt(a.x+v[w],a.y,a.z)):I===1?(f.up.set(0,0,p[w]),f.position.set(a.x,a.y,a.z),f.lookAt(a.x,a.y+v[w],a.z)):(f.up.set(0,p[w],0),f.position.set(a.x,a.y,a.z),f.lookAt(a.x,a.y,a.z+v[w]));const O=this._cubeSize;x$(r,I*O,w>2?O:0,O,O),T.setRenderTarget(r),C&&T.render(M,f),T.render(e,f)}M.geometry.dispose(),M.material.dispose(),T.toneMapping=S,T.autoClear=y,e.background=E}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===$p||e.mapping===kg;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=vk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_k());const a=r?this._cubemapMaterial:this._equirectMaterial,l=new _r(this._lodPlanes[0],a),h=a.uniforms;h.envMap.value=e;const f=this._cubeSize;x$(n,0,0,3*f,2*f),i.setRenderTarget(n),i.render(l,LR)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const l=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),h=mk[(r-a-1)%mk.length];this._blur(e,a-1,a,l,h)}n.autoClear=i}_blur(e,n,i,r,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,n,i,r,"latitudinal",a),this._halfBlur(l,e,i,i,r,"longitudinal",a)}_halfBlur(e,n,i,r,a,l,h){const f=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,T=new _r(this._lodPlanes[r],p),y=p.uniforms,S=this._sizeLods[i]-1,$=isFinite(a)?Math.PI/(2*S):2*Math.PI/(2*xv-1),M=a/$,C=isFinite(a)?1+Math.floor(v*M):xv;C>xv&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${xv}`);const E=[];let w=0;for(let V=0;V<xv;++V){const X=V/M,G=Math.exp(-X*X/2);E.push(G),V===0?w+=G:V<C&&(w+=2*G)}for(let V=0;V<E.length;V++)E[V]=E[V]/w;y.envMap.value=e.texture,y.samples.value=C,y.weights.value=E,y.latitudinal.value=l==="latitudinal",h&&(y.poleAxis.value=h);const{_lodMax:I}=this;y.dTheta.value=$,y.mipInt.value=I-i;const O=this._sizeLods[r],P=3*O*(r>I-Sy?r-I+Sy:0),F=4*(this._cubeSize-O);x$(n,P,F,3*O,2*O),f.setRenderTarget(n),f.render(T,LR)}}function SY(s){const e=[],n=[],i=[];let r=s;const a=s-Sy+1+fk.length;for(let l=0;l<a;l++){const h=Math.pow(2,r);n.push(h);let f=1/h;l>s-Sy?f=fk[l-s+Sy-1]:l===0&&(f=0),i.push(f);const p=1/(h-2),v=-p,T=1+p,y=[v,v,T,v,T,T,v,v,T,T,v,T],S=6,$=6,M=3,C=2,E=1,w=new Float32Array(M*$*S),I=new Float32Array(C*$*S),O=new Float32Array(E*$*S);for(let F=0;F<S;F++){const V=F%3*2/3-1,X=F>2?0:-1,G=[V,X,0,V+2/3,X,0,V+2/3,X+1,0,V,X,0,V+2/3,X+1,0,V,X+1,0];w.set(G,M*$*F),I.set(y,C*$*F);const D=[F,F,F,F,F,F];O.set(D,E*$*F)}const P=new ui;P.setAttribute("position",new ns(w,M)),P.setAttribute("uv",new ns(I,C)),P.setAttribute("faceIndex",new ns(O,E)),e.push(P),r>Sy&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function gk(s,e,n){const i=new Gc(s,e,n);return i.texture.mapping=pT,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function x$(s,e,n,i,r){s.viewport.set(e,n,i,r),s.scissor.set(e,n,i,r)}function AY(s,e,n){const i=new Float32Array(xv),r=new be(0,1,0);return new pu({name:"SphericalGaussianBlur",defines:{n:xv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:W2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bp,depthTest:!1,depthWrite:!1})}function _k(){return new pu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:W2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bp,depthTest:!1,depthWrite:!1})}function vk(){return new pu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:W2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bp,depthTest:!1,depthWrite:!1})}function W2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $Y(s){let e=new WeakMap,n=null;function i(h){if(h&&h.isTexture){const f=h.mapping,p=f===Uy||f===iS,v=f===$p||f===kg;if(p||v){let T=e.get(h);const y=T!==void 0?T.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==y)return n===null&&(n=new rO(s)),T=p?n.fromEquirectangular(h,T):n.fromCubemap(h,T),T.texture.pmremVersion=h.pmremVersion,e.set(h,T),T.texture;if(T!==void 0)return T.texture;{const S=h.image;return p&&S&&S.height>0||v&&S&&r(S)?(n===null&&(n=new rO(s)),T=p?n.fromEquirectangular(h):n.fromCubemap(h),T.texture.pmremVersion=h.pmremVersion,e.set(h,T),h.addEventListener("dispose",a),T.texture):null}}}return h}function r(h){let f=0;const p=6;for(let v=0;v<p;v++)h[v]!==void 0&&f++;return f===p}function a(h){const f=h.target;f.removeEventListener("dispose",a);const p=e.get(f);p!==void 0&&(e.delete(f),p.dispose())}function l(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:l}}function xY(s){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=s.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&Ry("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function CY(s,e,n,i){const r={},a=new WeakMap;function l(T){const y=T.target;y.index!==null&&e.remove(y.index);for(const $ in y.attributes)e.remove(y.attributes[$]);y.removeEventListener("dispose",l),delete r[y.id];const S=a.get(y);S&&(e.remove(S),a.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,n.memory.geometries--}function h(T,y){return r[y.id]===!0||(y.addEventListener("dispose",l),r[y.id]=!0,n.memory.geometries++),y}function f(T){const y=T.attributes;for(const S in y)e.update(y[S],s.ARRAY_BUFFER)}function p(T){const y=[],S=T.index,$=T.attributes.position;let M=0;if(S!==null){const w=S.array;M=S.version;for(let I=0,O=w.length;I<O;I+=3){const P=w[I+0],F=w[I+1],V=w[I+2];y.push(P,F,F,V,V,P)}}else if($!==void 0){const w=$.array;M=$.version;for(let I=0,O=w.length/3-1;I<O;I+=3){const P=I+0,F=I+1,V=I+2;y.push(P,F,F,V,V,P)}}else return;const C=new(FH(y)?f2:d2)(y,1);C.version=M;const E=a.get(T);E&&e.remove(E),a.set(T,C)}function v(T){const y=a.get(T);if(y){const S=T.index;S!==null&&y.version<S.version&&p(T)}else p(T);return a.get(T)}return{get:h,update:f,getWireframeAttribute:v}}function MY(s,e,n){let i;function r(y){i=y}let a,l;function h(y){a=y.type,l=y.bytesPerElement}function f(y,S){s.drawElements(i,S,a,y*l),n.update(S,i,1)}function p(y,S,$){$!==0&&(s.drawElementsInstanced(i,S,a,y*l,$),n.update(S,i,$))}function v(y,S,$){if($===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,S,0,a,y,0,$);let C=0;for(let E=0;E<$;E++)C+=S[E];n.update(C,i,1)}function T(y,S,$,M){if($===0)return;const C=e.get("WEBGL_multi_draw");if(C===null)for(let E=0;E<y.length;E++)p(y[E]/l,S[E],M[E]);else{C.multiDrawElementsInstancedWEBGL(i,S,0,a,y,0,M,0,$);let E=0;for(let w=0;w<$;w++)E+=S[w]*M[w];n.update(E,i,1)}}this.setMode=r,this.setIndex=h,this.render=f,this.renderInstances=p,this.renderMultiDraw=v,this.renderMultiDrawInstances=T}function RY(s){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,l,h){switch(n.calls++,l){case s.TRIANGLES:n.triangles+=h*(a/3);break;case s.LINES:n.lines+=h*(a/2);break;case s.LINE_STRIP:n.lines+=h*(a-1);break;case s.LINE_LOOP:n.lines+=h*a;break;case s.POINTS:n.points+=h*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function wY(s,e,n){const i=new WeakMap,r=new Ei;function a(l,h,f){const p=l.morphTargetInfluences,v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,T=v!==void 0?v.length:0;let y=i.get(h);if(y===void 0||y.count!==T){let D=function(){X.dispose(),i.delete(h),h.removeEventListener("dispose",D)};var S=D;y!==void 0&&y.texture.dispose();const $=h.morphAttributes.position!==void 0,M=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,E=h.morphAttributes.position||[],w=h.morphAttributes.normal||[],I=h.morphAttributes.color||[];let O=0;$===!0&&(O=1),M===!0&&(O=2),C===!0&&(O=3);let P=h.attributes.position.count*O,F=1;P>e.maxTextureSize&&(F=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const V=new Float32Array(P*F*4*T),X=new sM(V,P,F,T);X.type=Rr,X.needsUpdate=!0;const G=O*4;for(let Z=0;Z<T;Z++){const Y=E[Z],j=w[Z],ne=I[Z],ee=P*F*4*Z;for(let z=0;z<Y.count;z++){const te=z*G;$===!0&&(r.fromBufferAttribute(Y,z),V[ee+te+0]=r.x,V[ee+te+1]=r.y,V[ee+te+2]=r.z,V[ee+te+3]=0),M===!0&&(r.fromBufferAttribute(j,z),V[ee+te+4]=r.x,V[ee+te+5]=r.y,V[ee+te+6]=r.z,V[ee+te+7]=0),C===!0&&(r.fromBufferAttribute(ne,z),V[ee+te+8]=r.x,V[ee+te+9]=r.y,V[ee+te+10]=r.z,V[ee+te+11]=ne.itemSize===4?r.w:1)}}y={count:T,texture:X,size:new It(P,F)},i.set(h,y),h.addEventListener("dispose",D)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)f.getUniforms().setValue(s,"morphTexture",l.morphTexture,n);else{let $=0;for(let C=0;C<p.length;C++)$+=p[C];const M=h.morphTargetsRelative?1:1-$;f.getUniforms().setValue(s,"morphTargetBaseInfluence",M),f.getUniforms().setValue(s,"morphTargetInfluences",p)}f.getUniforms().setValue(s,"morphTargetsTexture",y.texture,n),f.getUniforms().setValue(s,"morphTargetsTextureSize",y.size)}return{update:a}}function IY(s,e,n,i){let r=new WeakMap;function a(f){const p=i.render.frame,v=f.geometry,T=e.get(f,v);if(r.get(T)!==p&&(e.update(T),r.set(T,p)),f.isInstancedMesh&&(f.hasEventListener("dispose",h)===!1&&f.addEventListener("dispose",h),r.get(f)!==p&&(n.update(f.instanceMatrix,s.ARRAY_BUFFER),f.instanceColor!==null&&n.update(f.instanceColor,s.ARRAY_BUFFER),r.set(f,p))),f.isSkinnedMesh){const y=f.skeleton;r.get(y)!==p&&(y.update(),r.set(y,p))}return T}function l(){r=new WeakMap}function h(f){const p=f.target;p.removeEventListener("dispose",h),n.remove(p.instanceMatrix),p.instanceColor!==null&&n.remove(p.instanceColor)}return{update:a,dispose:l}}const PG=new Ms,bk=new fM(1,1),UG=new sM,FG=new rM,HG=new US,yk=[],Tk=[],Ek=new Float32Array(16),Sk=new Float32Array(9),Ak=new Float32Array(4);function vT(s,e,n){const i=s[0];if(i<=0||i>0)return s;const r=e*n;let a=yk[r];if(a===void 0&&(a=new Float32Array(r),yk[r]=a),e!==0){i.toArray(a,0);for(let l=1,h=0;l!==e;++l)h+=n,s[l].toArray(a,h)}return a}function na(s,e){if(s.length!==e.length)return!1;for(let n=0,i=s.length;n<i;n++)if(s[n]!==e[n])return!1;return!0}function ia(s,e){for(let n=0,i=e.length;n<i;n++)s[n]=e[n]}function MM(s,e){let n=Tk[e];n===void 0&&(n=new Int32Array(e),Tk[e]=n);for(let i=0;i!==e;++i)n[i]=s.allocateTextureUnit();return n}function OY(s,e){const n=this.cache;n[0]!==e&&(s.uniform1f(this.addr,e),n[0]=e)}function NY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(na(n,e))return;s.uniform2fv(this.addr,e),ia(n,e)}}function LY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(na(n,e))return;s.uniform3fv(this.addr,e),ia(n,e)}}function DY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(na(n,e))return;s.uniform4fv(this.addr,e),ia(n,e)}}function BY(s,e){const n=this.cache,i=e.elements;if(i===void 0){if(na(n,e))return;s.uniformMatrix2fv(this.addr,!1,e),ia(n,e)}else{if(na(n,i))return;Ak.set(i),s.uniformMatrix2fv(this.addr,!1,Ak),ia(n,i)}}function kY(s,e){const n=this.cache,i=e.elements;if(i===void 0){if(na(n,e))return;s.uniformMatrix3fv(this.addr,!1,e),ia(n,e)}else{if(na(n,i))return;Sk.set(i),s.uniformMatrix3fv(this.addr,!1,Sk),ia(n,i)}}function PY(s,e){const n=this.cache,i=e.elements;if(i===void 0){if(na(n,e))return;s.uniformMatrix4fv(this.addr,!1,e),ia(n,e)}else{if(na(n,i))return;Ek.set(i),s.uniformMatrix4fv(this.addr,!1,Ek),ia(n,i)}}function UY(s,e){const n=this.cache;n[0]!==e&&(s.uniform1i(this.addr,e),n[0]=e)}function FY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(s.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(na(n,e))return;s.uniform2iv(this.addr,e),ia(n,e)}}function HY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(s.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(na(n,e))return;s.uniform3iv(this.addr,e),ia(n,e)}}function GY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(s.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(na(n,e))return;s.uniform4iv(this.addr,e),ia(n,e)}}function zY(s,e){const n=this.cache;n[0]!==e&&(s.uniform1ui(this.addr,e),n[0]=e)}function VY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(s.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(na(n,e))return;s.uniform2uiv(this.addr,e),ia(n,e)}}function WY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(s.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(na(n,e))return;s.uniform3uiv(this.addr,e),ia(n,e)}}function XY(s,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(s.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(na(n,e))return;s.uniform4uiv(this.addr,e),ia(n,e)}}function jY(s,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(s.uniform1i(this.addr,r),i[0]=r);let a;this.type===s.SAMPLER_2D_SHADOW?(bk.compareFunction=l2,a=bk):a=PG,n.setTexture2D(e||a,r)}function YY(s,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(s.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||FG,r)}function KY(s,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(s.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||HG,r)}function qY(s,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(s.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||UG,r)}function JY(s){switch(s){case 5126:return OY;case 35664:return NY;case 35665:return LY;case 35666:return DY;case 35674:return BY;case 35675:return kY;case 35676:return PY;case 5124:case 35670:return UY;case 35667:case 35671:return FY;case 35668:case 35672:return HY;case 35669:case 35673:return GY;case 5125:return zY;case 36294:return VY;case 36295:return WY;case 36296:return XY;case 35678:case 36198:case 36298:case 36306:case 35682:return jY;case 35679:case 36299:case 36307:return YY;case 35680:case 36300:case 36308:case 36293:return KY;case 36289:case 36303:case 36311:case 36292:return qY}}function ZY(s,e){s.uniform1fv(this.addr,e)}function QY(s,e){const n=vT(e,this.size,2);s.uniform2fv(this.addr,n)}function eK(s,e){const n=vT(e,this.size,3);s.uniform3fv(this.addr,n)}function tK(s,e){const n=vT(e,this.size,4);s.uniform4fv(this.addr,n)}function nK(s,e){const n=vT(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,n)}function iK(s,e){const n=vT(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,n)}function sK(s,e){const n=vT(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,n)}function rK(s,e){s.uniform1iv(this.addr,e)}function oK(s,e){s.uniform2iv(this.addr,e)}function aK(s,e){s.uniform3iv(this.addr,e)}function lK(s,e){s.uniform4iv(this.addr,e)}function uK(s,e){s.uniform1uiv(this.addr,e)}function cK(s,e){s.uniform2uiv(this.addr,e)}function hK(s,e){s.uniform3uiv(this.addr,e)}function dK(s,e){s.uniform4uiv(this.addr,e)}function fK(s,e,n){const i=this.cache,r=e.length,a=MM(n,r);na(i,a)||(s.uniform1iv(this.addr,a),ia(i,a));for(let l=0;l!==r;++l)n.setTexture2D(e[l]||PG,a[l])}function pK(s,e,n){const i=this.cache,r=e.length,a=MM(n,r);na(i,a)||(s.uniform1iv(this.addr,a),ia(i,a));for(let l=0;l!==r;++l)n.setTexture3D(e[l]||FG,a[l])}function mK(s,e,n){const i=this.cache,r=e.length,a=MM(n,r);na(i,a)||(s.uniform1iv(this.addr,a),ia(i,a));for(let l=0;l!==r;++l)n.setTextureCube(e[l]||HG,a[l])}function gK(s,e,n){const i=this.cache,r=e.length,a=MM(n,r);na(i,a)||(s.uniform1iv(this.addr,a),ia(i,a));for(let l=0;l!==r;++l)n.setTexture2DArray(e[l]||UG,a[l])}function _K(s){switch(s){case 5126:return ZY;case 35664:return QY;case 35665:return eK;case 35666:return tK;case 35674:return nK;case 35675:return iK;case 35676:return sK;case 5124:case 35670:return rK;case 35667:case 35671:return oK;case 35668:case 35672:return aK;case 35669:case 35673:return lK;case 5125:return uK;case 36294:return cK;case 36295:return hK;case 36296:return dK;case 35678:case 36198:case 36298:case 36306:case 35682:return fK;case 35679:case 36299:case 36307:return pK;case 35680:case 36300:case 36308:case 36293:return mK;case 36289:case 36303:case 36311:case 36292:return gK}}class vK{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=JY(n.type)}}class bK{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=_K(n.type)}}class yK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let a=0,l=r.length;a!==l;++a){const h=r[a];h.setValue(e,n[h.id],i)}}}const UR=/(\w+)(\])?(\[|\.)?/g;function $k(s,e){s.seq.push(e),s.map[e.id]=e}function TK(s,e,n){const i=s.name,r=i.length;for(UR.lastIndex=0;;){const a=UR.exec(i),l=UR.lastIndex;let h=a[1];const f=a[2]==="]",p=a[3];if(f&&(h=h|0),p===void 0||p==="["&&l+2===r){$k(n,p===void 0?new vK(h,s,e):new bK(h,s,e));break}else{let T=n.map[h];T===void 0&&(T=new yK(h),$k(n,T)),n=T}}}class ox{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(n,r),l=e.getUniformLocation(n,a.name);TK(a,l,this)}}setValue(e,n,i,r){const a=this.map[n];a!==void 0&&a.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let a=0,l=n.length;a!==l;++a){const h=n[a],f=i[h.id];f.needsUpdate!==!1&&h.setValue(e,f.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,a=e.length;r!==a;++r){const l=e[r];l.id in n&&i.push(l)}return i}}function xk(s,e,n){const i=s.createShader(e);return s.shaderSource(i,n),s.compileShader(i),i}const EK=37297;let SK=0;function AK(s,e){const n=s.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let l=r;l<a;l++){const h=l+1;i.push(`${h===e?">":" "} ${h}: ${n[l]}`)}return i.join(`
`)}const Ck=new ci;function $K(s){Yi._getMatrix(Ck,Yi.workingColorSpace,s);const e=`mat3( ${Ck.elements.map(n=>n.toFixed(4))} )`;switch(Yi.getTransfer(s)){case rS:return[e,"LinearTransferOETF"];case Ls:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",s),[e,"LinearTransferOETF"]}}function Mk(s,e,n){const i=s.getShaderParameter(e,s.COMPILE_STATUS),r=s.getShaderInfoLog(e).trim();if(i&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const l=parseInt(a[1]);return n.toUpperCase()+`

`+r+`

`+AK(s.getShaderSource(e),l)}else return r}function xK(s,e){const n=$K(e);return[`vec4 ${s}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function CK(s,e){let n;switch(e){case bH:n="Linear";break;case yH:n="Reinhard";break;case TH:n="Cineon";break;case e2:n="ACESFilmic";break;case SH:n="AgX";break;case AH:n="Neutral";break;case EH:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+s+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const C$=new be;function MK(){Yi.getLuminanceCoefficients(C$);const s=C$.x.toFixed(4),e=C$.y.toFixed(4),n=C$.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${s}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function RK(s){return[s.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(CE).join(`
`)}function wK(s){const e=[];for(const n in s){const i=s[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function IK(s,e){const n={},i=s.getProgramParameter(e,s.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=s.getActiveAttrib(e,r),l=a.name;let h=1;a.type===s.FLOAT_MAT2&&(h=2),a.type===s.FLOAT_MAT3&&(h=3),a.type===s.FLOAT_MAT4&&(h=4),n[l]={type:a.type,location:s.getAttribLocation(e,l),locationSize:h}}return n}function CE(s){return s!==""}function Rk(s,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function wk(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const OK=/^[ \t]*#include +<([\w\d./]+)>/gm;function oO(s){return s.replace(OK,LK)}const NK=new Map;function LK(s,e){let n=bi[e];if(n===void 0){const i=NK.get(e);if(i!==void 0)n=bi[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return oO(n)}const DK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ik(s){return s.replace(DK,BK)}function BK(s,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Ok(s){let e=`precision ${s.precision} float;
	precision ${s.precision} int;
	precision ${s.precision} sampler2D;
	precision ${s.precision} samplerCube;
	precision ${s.precision} sampler3D;
	precision ${s.precision} sampler2DArray;
	precision ${s.precision} sampler2DShadow;
	precision ${s.precision} samplerCubeShadow;
	precision ${s.precision} sampler2DArrayShadow;
	precision ${s.precision} isampler2D;
	precision ${s.precision} isampler3D;
	precision ${s.precision} isamplerCube;
	precision ${s.precision} isampler2DArray;
	precision ${s.precision} usampler2D;
	precision ${s.precision} usampler3D;
	precision ${s.precision} usamplerCube;
	precision ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function kK(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===KC?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===kE?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===jd&&(e="SHADOWMAP_TYPE_VSM"),e}function PK(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case $p:case kg:e="ENVMAP_TYPE_CUBE";break;case pT:e="ENVMAP_TYPE_CUBE_UV";break}return e}function UK(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case kg:e="ENVMAP_MODE_REFRACTION";break}return e}function FK(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case DS:e="ENVMAP_BLENDING_MULTIPLY";break;case _H:e="ENVMAP_BLENDING_MIX";break;case vH:e="ENVMAP_BLENDING_ADD";break}return e}function HK(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function GK(s,e,n,i){const r=s.getContext(),a=n.defines;let l=n.vertexShader,h=n.fragmentShader;const f=kK(n),p=PK(n),v=UK(n),T=FK(n),y=HK(n),S=RK(n),$=wK(a),M=r.createProgram();let C,E,w=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(C=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,$].filter(CE).join(`
`),C.length>0&&(C+=`
`),E=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,$].filter(CE).join(`
`),E.length>0&&(E+=`
`)):(C=[Ok(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,$,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(CE).join(`
`),E=[Ok(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,$,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+v:"",n.envMap?"#define "+T:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==yp?"#define TONE_MAPPING":"",n.toneMapping!==yp?bi.tonemapping_pars_fragment:"",n.toneMapping!==yp?CK("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",bi.colorspace_pars_fragment,xK("linearToOutputTexel",n.outputColorSpace),MK(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(CE).join(`
`)),l=oO(l),l=Rk(l,n),l=wk(l,n),h=oO(h),h=Rk(h,n),h=wk(h,n),l=Ik(l),h=Ik(h),n.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,C=[S,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,E=["#define varying in",n.glslVersion===JI?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===JI?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const I=w+C+l,O=w+E+h,P=xk(r,r.VERTEX_SHADER,I),F=xk(r,r.FRAGMENT_SHADER,O);r.attachShader(M,P),r.attachShader(M,F),n.index0AttributeName!==void 0?r.bindAttribLocation(M,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function V(Z){if(s.debug.checkShaderErrors){const Y=r.getProgramInfoLog(M).trim(),j=r.getShaderInfoLog(P).trim(),ne=r.getShaderInfoLog(F).trim();let ee=!0,z=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(ee=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(r,M,P,F);else{const te=Mk(r,P,"vertex"),ce=Mk(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+Z.name+`
Material Type: `+Z.type+`

Program Info Log: `+Y+`
`+te+`
`+ce)}else Y!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Y):(j===""||ne==="")&&(z=!1);z&&(Z.diagnostics={runnable:ee,programLog:Y,vertexShader:{log:j,prefix:C},fragmentShader:{log:ne,prefix:E}})}r.deleteShader(P),r.deleteShader(F),X=new ox(r,M),G=IK(r,M)}let X;this.getUniforms=function(){return X===void 0&&V(this),X};let G;this.getAttributes=function(){return G===void 0&&V(this),G};let D=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(M,EK)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=SK++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=P,this.fragmentShader=F,this}let zK=0;class VK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),a=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(r)===!1&&(l.add(r),r.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new WK(e),n.set(e,i)),i}}class WK{constructor(e){this.id=zK++,this.code=e,this.usedTimes=0}}function XK(s,e,n,i,r,a,l){const h=new Yy,f=new VK,p=new Set,v=[],T=r.logarithmicDepthBuffer,y=r.vertexTextures;let S=r.precision;const $={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(G){return p.add(G),G===0?"uv":`uv${G}`}function C(G,D,Z,Y,j){const ne=Y.fog,ee=j.geometry,z=G.isMeshStandardMaterial?Y.environment:null,te=(G.isMeshStandardMaterial?n:e).get(G.envMap||z),ce=te&&te.mapping===pT?te.image.height:null,pe=$[G.type];G.precision!==null&&(S=r.getMaxPrecision(G.precision),S!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",S,"instead."));const K=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,fe=K!==void 0?K.length:0;let Ne=0;ee.morphAttributes.position!==void 0&&(Ne=1),ee.morphAttributes.normal!==void 0&&(Ne=2),ee.morphAttributes.color!==void 0&&(Ne=3);let Pe,Ee,We,Fe;if(pe){const xn=Yd[pe];Pe=xn.vertexShader,Ee=xn.fragmentShader}else Pe=G.vertexShader,Ee=G.fragmentShader,f.update(G),We=f.getVertexShaderID(G),Fe=f.getFragmentShaderID(G);const gt=s.getRenderTarget(),ft=s.state.buffers.depth.getReversed(),Ut=j.isInstancedMesh===!0,Ke=j.isBatchedMesh===!0,Ht=!!G.map,Re=!!G.matcap,Ye=!!te,J=!!G.aoMap,Se=!!G.lightMap,Ae=!!G.bumpMap,we=!!G.normalMap,Ie=!!G.displacementMap,dt=!!G.emissiveMap,Qe=!!G.metalnessMap,vt=!!G.roughnessMap,et=G.anisotropy>0,_e=G.clearcoat>0,se=G.dispersion>0,$e=G.iridescence>0,Le=G.sheen>0,Xe=G.transmission>0,Ve=et&&!!G.anisotropyMap,yt=_e&&!!G.clearcoatMap,bt=_e&&!!G.clearcoatNormalMap,At=_e&&!!G.clearcoatRoughnessMap,Ft=$e&&!!G.iridescenceMap,H=$e&&!!G.iridescenceThicknessMap,oe=Le&&!!G.sheenColorMap,ve=Le&&!!G.sheenRoughnessMap,re=!!G.specularMap,ye=!!G.specularColorMap,lt=!!G.specularIntensityMap,Me=Xe&&!!G.transmissionMap,Ze=Xe&&!!G.thicknessMap,$t=!!G.gradientMap,Pt=!!G.alphaMap,Mt=G.alphaTest>0,xt=!!G.alphaHash,Xt=!!G.extensions;let Yt=yp;G.toneMapped&&(gt===null||gt.isXRRenderTarget===!0)&&(Yt=s.toneMapping);const Wt={shaderID:pe,shaderType:G.type,shaderName:G.name,vertexShader:Pe,fragmentShader:Ee,defines:G.defines,customVertexShaderID:We,customFragmentShaderID:Fe,isRawShaderMaterial:G.isRawShaderMaterial===!0,glslVersion:G.glslVersion,precision:S,batching:Ke,batchingColor:Ke&&j._colorsTexture!==null,instancing:Ut,instancingColor:Ut&&j.instanceColor!==null,instancingMorph:Ut&&j.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:gt===null?s.outputColorSpace:gt.isXRRenderTarget===!0?gt.texture.colorSpace:sf,alphaToCoverage:!!G.alphaToCoverage,map:Ht,matcap:Re,envMap:Ye,envMapMode:Ye&&te.mapping,envMapCubeUVHeight:ce,aoMap:J,lightMap:Se,bumpMap:Ae,normalMap:we,displacementMap:y&&Ie,emissiveMap:dt,normalMapObjectSpace:we&&G.normalMapType===OH,normalMapTangentSpace:we&&G.normalMapType===Wg,metalnessMap:Qe,roughnessMap:vt,anisotropy:et,anisotropyMap:Ve,clearcoat:_e,clearcoatMap:yt,clearcoatNormalMap:bt,clearcoatRoughnessMap:At,dispersion:se,iridescence:$e,iridescenceMap:Ft,iridescenceThicknessMap:H,sheen:Le,sheenColorMap:oe,sheenRoughnessMap:ve,specularMap:re,specularColorMap:ye,specularIntensityMap:lt,transmission:Xe,transmissionMap:Me,thicknessMap:Ze,gradientMap:$t,opaque:G.transparent===!1&&G.blending===Bv&&G.alphaToCoverage===!1,alphaMap:Pt,alphaTest:Mt,alphaHash:xt,combine:G.combine,mapUv:Ht&&M(G.map.channel),aoMapUv:J&&M(G.aoMap.channel),lightMapUv:Se&&M(G.lightMap.channel),bumpMapUv:Ae&&M(G.bumpMap.channel),normalMapUv:we&&M(G.normalMap.channel),displacementMapUv:Ie&&M(G.displacementMap.channel),emissiveMapUv:dt&&M(G.emissiveMap.channel),metalnessMapUv:Qe&&M(G.metalnessMap.channel),roughnessMapUv:vt&&M(G.roughnessMap.channel),anisotropyMapUv:Ve&&M(G.anisotropyMap.channel),clearcoatMapUv:yt&&M(G.clearcoatMap.channel),clearcoatNormalMapUv:bt&&M(G.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:At&&M(G.clearcoatRoughnessMap.channel),iridescenceMapUv:Ft&&M(G.iridescenceMap.channel),iridescenceThicknessMapUv:H&&M(G.iridescenceThicknessMap.channel),sheenColorMapUv:oe&&M(G.sheenColorMap.channel),sheenRoughnessMapUv:ve&&M(G.sheenRoughnessMap.channel),specularMapUv:re&&M(G.specularMap.channel),specularColorMapUv:ye&&M(G.specularColorMap.channel),specularIntensityMapUv:lt&&M(G.specularIntensityMap.channel),transmissionMapUv:Me&&M(G.transmissionMap.channel),thicknessMapUv:Ze&&M(G.thicknessMap.channel),alphaMapUv:Pt&&M(G.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(we||et),vertexColors:G.vertexColors,vertexAlphas:G.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!ee.attributes.uv&&(Ht||Pt),fog:!!ne,useFog:G.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:G.flatShading===!0&&G.wireframe===!1,sizeAttenuation:G.sizeAttenuation===!0,logarithmicDepthBuffer:T,reverseDepthBuffer:ft,skinning:j.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:fe,morphTextureStride:Ne,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:G.dithering,shadowMapEnabled:s.shadowMap.enabled&&Z.length>0,shadowMapType:s.shadowMap.type,toneMapping:Yt,decodeVideoTexture:Ht&&G.map.isVideoTexture===!0&&Yi.getTransfer(G.map.colorSpace)===Ls,decodeVideoTextureEmissive:dt&&G.emissiveMap.isVideoTexture===!0&&Yi.getTransfer(G.emissiveMap.colorSpace)===Ls,premultipliedAlpha:G.premultipliedAlpha,doubleSided:G.side===Rh,flipSided:G.side===hu,useDepthPacking:G.depthPacking>=0,depthPacking:G.depthPacking||0,index0AttributeName:G.index0AttributeName,extensionClipCullDistance:Xt&&G.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xt&&G.extensions.multiDraw===!0||Ke)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:G.customProgramCacheKey()};return Wt.vertexUv1s=p.has(1),Wt.vertexUv2s=p.has(2),Wt.vertexUv3s=p.has(3),p.clear(),Wt}function E(G){const D=[];if(G.shaderID?D.push(G.shaderID):(D.push(G.customVertexShaderID),D.push(G.customFragmentShaderID)),G.defines!==void 0)for(const Z in G.defines)D.push(Z),D.push(G.defines[Z]);return G.isRawShaderMaterial===!1&&(w(D,G),I(D,G),D.push(s.outputColorSpace)),D.push(G.customProgramCacheKey),D.join()}function w(G,D){G.push(D.precision),G.push(D.outputColorSpace),G.push(D.envMapMode),G.push(D.envMapCubeUVHeight),G.push(D.mapUv),G.push(D.alphaMapUv),G.push(D.lightMapUv),G.push(D.aoMapUv),G.push(D.bumpMapUv),G.push(D.normalMapUv),G.push(D.displacementMapUv),G.push(D.emissiveMapUv),G.push(D.metalnessMapUv),G.push(D.roughnessMapUv),G.push(D.anisotropyMapUv),G.push(D.clearcoatMapUv),G.push(D.clearcoatNormalMapUv),G.push(D.clearcoatRoughnessMapUv),G.push(D.iridescenceMapUv),G.push(D.iridescenceThicknessMapUv),G.push(D.sheenColorMapUv),G.push(D.sheenRoughnessMapUv),G.push(D.specularMapUv),G.push(D.specularColorMapUv),G.push(D.specularIntensityMapUv),G.push(D.transmissionMapUv),G.push(D.thicknessMapUv),G.push(D.combine),G.push(D.fogExp2),G.push(D.sizeAttenuation),G.push(D.morphTargetsCount),G.push(D.morphAttributeCount),G.push(D.numDirLights),G.push(D.numPointLights),G.push(D.numSpotLights),G.push(D.numSpotLightMaps),G.push(D.numHemiLights),G.push(D.numRectAreaLights),G.push(D.numDirLightShadows),G.push(D.numPointLightShadows),G.push(D.numSpotLightShadows),G.push(D.numSpotLightShadowsWithMaps),G.push(D.numLightProbes),G.push(D.shadowMapType),G.push(D.toneMapping),G.push(D.numClippingPlanes),G.push(D.numClipIntersection),G.push(D.depthPacking)}function I(G,D){h.disableAll(),D.supportsVertexTextures&&h.enable(0),D.instancing&&h.enable(1),D.instancingColor&&h.enable(2),D.instancingMorph&&h.enable(3),D.matcap&&h.enable(4),D.envMap&&h.enable(5),D.normalMapObjectSpace&&h.enable(6),D.normalMapTangentSpace&&h.enable(7),D.clearcoat&&h.enable(8),D.iridescence&&h.enable(9),D.alphaTest&&h.enable(10),D.vertexColors&&h.enable(11),D.vertexAlphas&&h.enable(12),D.vertexUv1s&&h.enable(13),D.vertexUv2s&&h.enable(14),D.vertexUv3s&&h.enable(15),D.vertexTangents&&h.enable(16),D.anisotropy&&h.enable(17),D.alphaHash&&h.enable(18),D.batching&&h.enable(19),D.dispersion&&h.enable(20),D.batchingColor&&h.enable(21),D.gradientMap&&h.enable(22),G.push(h.mask),h.disableAll(),D.fog&&h.enable(0),D.useFog&&h.enable(1),D.flatShading&&h.enable(2),D.logarithmicDepthBuffer&&h.enable(3),D.reverseDepthBuffer&&h.enable(4),D.skinning&&h.enable(5),D.morphTargets&&h.enable(6),D.morphNormals&&h.enable(7),D.morphColors&&h.enable(8),D.premultipliedAlpha&&h.enable(9),D.shadowMapEnabled&&h.enable(10),D.doubleSided&&h.enable(11),D.flipSided&&h.enable(12),D.useDepthPacking&&h.enable(13),D.dithering&&h.enable(14),D.transmission&&h.enable(15),D.sheen&&h.enable(16),D.opaque&&h.enable(17),D.pointsUvs&&h.enable(18),D.decodeVideoTexture&&h.enable(19),D.decodeVideoTextureEmissive&&h.enable(20),D.alphaToCoverage&&h.enable(21),G.push(h.mask)}function O(G){const D=$[G.type];let Z;if(D){const Y=Yd[D];Z=dC.clone(Y.uniforms)}else Z=G.uniforms;return Z}function P(G,D){let Z;for(let Y=0,j=v.length;Y<j;Y++){const ne=v[Y];if(ne.cacheKey===D){Z=ne,++Z.usedTimes;break}}return Z===void 0&&(Z=new GK(s,D,G,a),v.push(Z)),Z}function F(G){if(--G.usedTimes===0){const D=v.indexOf(G);v[D]=v[v.length-1],v.pop(),G.destroy()}}function V(G){f.remove(G)}function X(){f.dispose()}return{getParameters:C,getProgramCacheKey:E,getUniforms:O,acquireProgram:P,releaseProgram:F,releaseShaderCache:V,programs:v,dispose:X}}function jK(){let s=new WeakMap;function e(l){return s.has(l)}function n(l){let h=s.get(l);return h===void 0&&(h={},s.set(l,h)),h}function i(l){s.delete(l)}function r(l,h,f){s.get(l)[h]=f}function a(){s=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:a}}function YK(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function Nk(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function Lk(){const s=[];let e=0;const n=[],i=[],r=[];function a(){e=0,n.length=0,i.length=0,r.length=0}function l(T,y,S,$,M,C){let E=s[e];return E===void 0?(E={id:T.id,object:T,geometry:y,material:S,groupOrder:$,renderOrder:T.renderOrder,z:M,group:C},s[e]=E):(E.id=T.id,E.object=T,E.geometry=y,E.material=S,E.groupOrder=$,E.renderOrder=T.renderOrder,E.z=M,E.group=C),e++,E}function h(T,y,S,$,M,C){const E=l(T,y,S,$,M,C);S.transmission>0?i.push(E):S.transparent===!0?r.push(E):n.push(E)}function f(T,y,S,$,M,C){const E=l(T,y,S,$,M,C);S.transmission>0?i.unshift(E):S.transparent===!0?r.unshift(E):n.unshift(E)}function p(T,y){n.length>1&&n.sort(T||YK),i.length>1&&i.sort(y||Nk),r.length>1&&r.sort(y||Nk)}function v(){for(let T=e,y=s.length;T<y;T++){const S=s[T];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:h,unshift:f,finish:v,sort:p}}function KK(){let s=new WeakMap;function e(i,r){const a=s.get(i);let l;return a===void 0?(l=new Lk,s.set(i,[l])):r>=a.length?(l=new Lk,a.push(l)):l=a[r],l}function n(){s=new WeakMap}return{get:e,dispose:n}}function qK(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new be,color:new on};break;case"SpotLight":n={position:new be,direction:new be,color:new on,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new be,color:new on,distance:0,decay:0};break;case"HemisphereLight":n={direction:new be,skyColor:new on,groundColor:new on};break;case"RectAreaLight":n={color:new on,position:new be,halfWidth:new be,halfHeight:new be};break}return s[e.id]=n,n}}}function JK(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=n,n}}}let ZK=0;function QK(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function eq(s){const e=new qK,n=JK(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new be);const r=new be,a=new Fn,l=new Fn;function h(p){let v=0,T=0,y=0;for(let G=0;G<9;G++)i.probe[G].set(0,0,0);let S=0,$=0,M=0,C=0,E=0,w=0,I=0,O=0,P=0,F=0,V=0;p.sort(QK);for(let G=0,D=p.length;G<D;G++){const Z=p[G],Y=Z.color,j=Z.intensity,ne=Z.distance,ee=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)v+=Y.r*j,T+=Y.g*j,y+=Y.b*j;else if(Z.isLightProbe){for(let z=0;z<9;z++)i.probe[z].addScaledVector(Z.sh.coefficients[z],j);V++}else if(Z.isDirectionalLight){const z=e.get(Z);if(z.color.copy(Z.color).multiplyScalar(Z.intensity),Z.castShadow){const te=Z.shadow,ce=n.get(Z);ce.shadowIntensity=te.intensity,ce.shadowBias=te.bias,ce.shadowNormalBias=te.normalBias,ce.shadowRadius=te.radius,ce.shadowMapSize=te.mapSize,i.directionalShadow[S]=ce,i.directionalShadowMap[S]=ee,i.directionalShadowMatrix[S]=Z.shadow.matrix,w++}i.directional[S]=z,S++}else if(Z.isSpotLight){const z=e.get(Z);z.position.setFromMatrixPosition(Z.matrixWorld),z.color.copy(Y).multiplyScalar(j),z.distance=ne,z.coneCos=Math.cos(Z.angle),z.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),z.decay=Z.decay,i.spot[M]=z;const te=Z.shadow;if(Z.map&&(i.spotLightMap[P]=Z.map,P++,te.updateMatrices(Z),Z.castShadow&&F++),i.spotLightMatrix[M]=te.matrix,Z.castShadow){const ce=n.get(Z);ce.shadowIntensity=te.intensity,ce.shadowBias=te.bias,ce.shadowNormalBias=te.normalBias,ce.shadowRadius=te.radius,ce.shadowMapSize=te.mapSize,i.spotShadow[M]=ce,i.spotShadowMap[M]=ee,O++}M++}else if(Z.isRectAreaLight){const z=e.get(Z);z.color.copy(Y).multiplyScalar(j),z.halfWidth.set(Z.width*.5,0,0),z.halfHeight.set(0,Z.height*.5,0),i.rectArea[C]=z,C++}else if(Z.isPointLight){const z=e.get(Z);if(z.color.copy(Z.color).multiplyScalar(Z.intensity),z.distance=Z.distance,z.decay=Z.decay,Z.castShadow){const te=Z.shadow,ce=n.get(Z);ce.shadowIntensity=te.intensity,ce.shadowBias=te.bias,ce.shadowNormalBias=te.normalBias,ce.shadowRadius=te.radius,ce.shadowMapSize=te.mapSize,ce.shadowCameraNear=te.camera.near,ce.shadowCameraFar=te.camera.far,i.pointShadow[$]=ce,i.pointShadowMap[$]=ee,i.pointShadowMatrix[$]=Z.shadow.matrix,I++}i.point[$]=z,$++}else if(Z.isHemisphereLight){const z=e.get(Z);z.skyColor.copy(Z.color).multiplyScalar(j),z.groundColor.copy(Z.groundColor).multiplyScalar(j),i.hemi[E]=z,E++}}C>0&&(s.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=sn.LTC_FLOAT_1,i.rectAreaLTC2=sn.LTC_FLOAT_2):(i.rectAreaLTC1=sn.LTC_HALF_1,i.rectAreaLTC2=sn.LTC_HALF_2)),i.ambient[0]=v,i.ambient[1]=T,i.ambient[2]=y;const X=i.hash;(X.directionalLength!==S||X.pointLength!==$||X.spotLength!==M||X.rectAreaLength!==C||X.hemiLength!==E||X.numDirectionalShadows!==w||X.numPointShadows!==I||X.numSpotShadows!==O||X.numSpotMaps!==P||X.numLightProbes!==V)&&(i.directional.length=S,i.spot.length=M,i.rectArea.length=C,i.point.length=$,i.hemi.length=E,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=I,i.pointShadowMap.length=I,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=I,i.spotLightMatrix.length=O+P-F,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=V,X.directionalLength=S,X.pointLength=$,X.spotLength=M,X.rectAreaLength=C,X.hemiLength=E,X.numDirectionalShadows=w,X.numPointShadows=I,X.numSpotShadows=O,X.numSpotMaps=P,X.numLightProbes=V,i.version=ZK++)}function f(p,v){let T=0,y=0,S=0,$=0,M=0;const C=v.matrixWorldInverse;for(let E=0,w=p.length;E<w;E++){const I=p[E];if(I.isDirectionalLight){const O=i.directional[T];O.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(C),T++}else if(I.isSpotLight){const O=i.spot[S];O.position.setFromMatrixPosition(I.matrixWorld),O.position.applyMatrix4(C),O.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(C),S++}else if(I.isRectAreaLight){const O=i.rectArea[$];O.position.setFromMatrixPosition(I.matrixWorld),O.position.applyMatrix4(C),l.identity(),a.copy(I.matrixWorld),a.premultiply(C),l.extractRotation(a),O.halfWidth.set(I.width*.5,0,0),O.halfHeight.set(0,I.height*.5,0),O.halfWidth.applyMatrix4(l),O.halfHeight.applyMatrix4(l),$++}else if(I.isPointLight){const O=i.point[y];O.position.setFromMatrixPosition(I.matrixWorld),O.position.applyMatrix4(C),y++}else if(I.isHemisphereLight){const O=i.hemi[M];O.direction.setFromMatrixPosition(I.matrixWorld),O.direction.transformDirection(C),M++}}}return{setup:h,setupView:f,state:i}}function Dk(s){const e=new eq(s),n=[],i=[];function r(v){p.camera=v,n.length=0,i.length=0}function a(v){n.push(v)}function l(v){i.push(v)}function h(){e.setup(n)}function f(v){e.setupView(n,v)}const p={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:p,setupLights:h,setupLightsView:f,pushLight:a,pushShadow:l}}function tq(s){let e=new WeakMap;function n(r,a=0){const l=e.get(r);let h;return l===void 0?(h=new Dk(s),e.set(r,[h])):a>=l.length?(h=new Dk(s),l.push(h)):h=l[a],h}function i(){e=new WeakMap}return{get:n,dispose:i}}const nq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,iq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function sq(s,e,n){let i=new gT;const r=new It,a=new It,l=new Ei,h=new C2({depthPacking:IH}),f=new M2,p={},v=n.maxTextureSize,T={[Ap]:hu,[hu]:Ap,[Rh]:Rh},y=new pu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:nq,fragmentShader:iq}),S=y.clone();S.defines.HORIZONTAL_PASS=1;const $=new ui;$.setAttribute("position",new ns(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new _r($,y),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=KC;let E=this.type;this.render=function(F,V,X){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||F.length===0)return;const G=s.getRenderTarget(),D=s.getActiveCubeFace(),Z=s.getActiveMipmapLevel(),Y=s.state;Y.setBlending(bp),Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const j=E!==jd&&this.type===jd,ne=E===jd&&this.type!==jd;for(let ee=0,z=F.length;ee<z;ee++){const te=F[ee],ce=te.shadow;if(ce===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(ce.autoUpdate===!1&&ce.needsUpdate===!1)continue;r.copy(ce.mapSize);const pe=ce.getFrameExtents();if(r.multiply(pe),a.copy(ce.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(a.x=Math.floor(v/pe.x),r.x=a.x*pe.x,ce.mapSize.x=a.x),r.y>v&&(a.y=Math.floor(v/pe.y),r.y=a.y*pe.y,ce.mapSize.y=a.y)),ce.map===null||j===!0||ne===!0){const fe=this.type!==jd?{minFilter:Ta,magFilter:Ta}:{};ce.map!==null&&ce.map.dispose(),ce.map=new Gc(r.x,r.y,fe),ce.map.texture.name=te.name+".shadowMap",ce.camera.updateProjectionMatrix()}s.setRenderTarget(ce.map),s.clear();const K=ce.getViewportCount();for(let fe=0;fe<K;fe++){const Ne=ce.getViewport(fe);l.set(a.x*Ne.x,a.y*Ne.y,a.x*Ne.z,a.y*Ne.w),Y.viewport(l),ce.updateMatrices(te,fe),i=ce.getFrustum(),O(V,X,ce.camera,te,this.type)}ce.isPointLightShadow!==!0&&this.type===jd&&w(ce,X),ce.needsUpdate=!1}E=this.type,C.needsUpdate=!1,s.setRenderTarget(G,D,Z)};function w(F,V){const X=e.update(M);y.defines.VSM_SAMPLES!==F.blurSamples&&(y.defines.VSM_SAMPLES=F.blurSamples,S.defines.VSM_SAMPLES=F.blurSamples,y.needsUpdate=!0,S.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new Gc(r.x,r.y)),y.uniforms.shadow_pass.value=F.map.texture,y.uniforms.resolution.value=F.mapSize,y.uniforms.radius.value=F.radius,s.setRenderTarget(F.mapPass),s.clear(),s.renderBufferDirect(V,null,X,y,M,null),S.uniforms.shadow_pass.value=F.mapPass.texture,S.uniforms.resolution.value=F.mapSize,S.uniforms.radius.value=F.radius,s.setRenderTarget(F.map),s.clear(),s.renderBufferDirect(V,null,X,S,M,null)}function I(F,V,X,G){let D=null;const Z=X.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(Z!==void 0)D=Z;else if(D=X.isPointLight===!0?f:h,s.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0||V.alphaToCoverage===!0){const Y=D.uuid,j=V.uuid;let ne=p[Y];ne===void 0&&(ne={},p[Y]=ne);let ee=ne[j];ee===void 0&&(ee=D.clone(),ne[j]=ee,V.addEventListener("dispose",P)),D=ee}if(D.visible=V.visible,D.wireframe=V.wireframe,G===jd?D.side=V.shadowSide!==null?V.shadowSide:V.side:D.side=V.shadowSide!==null?V.shadowSide:T[V.side],D.alphaMap=V.alphaMap,D.alphaTest=V.alphaToCoverage===!0?.5:V.alphaTest,D.map=V.map,D.clipShadows=V.clipShadows,D.clippingPlanes=V.clippingPlanes,D.clipIntersection=V.clipIntersection,D.displacementMap=V.displacementMap,D.displacementScale=V.displacementScale,D.displacementBias=V.displacementBias,D.wireframeLinewidth=V.wireframeLinewidth,D.linewidth=V.linewidth,X.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const Y=s.properties.get(D);Y.light=X}return D}function O(F,V,X,G,D){if(F.visible===!1)return;if(F.layers.test(V.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&D===jd)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,F.matrixWorld);const j=e.update(F),ne=F.material;if(Array.isArray(ne)){const ee=j.groups;for(let z=0,te=ee.length;z<te;z++){const ce=ee[z],pe=ne[ce.materialIndex];if(pe&&pe.visible){const K=I(F,pe,G,D);F.onBeforeShadow(s,F,V,X,j,K,ce),s.renderBufferDirect(X,null,j,K,F,ce),F.onAfterShadow(s,F,V,X,j,K,ce)}}}else if(ne.visible){const ee=I(F,ne,G,D);F.onBeforeShadow(s,F,V,X,j,ee,null),s.renderBufferDirect(X,null,j,ee,F,null),F.onAfterShadow(s,F,V,X,j,ee,null)}}const Y=F.children;for(let j=0,ne=Y.length;j<ne;j++)O(Y[j],V,X,G,D)}function P(F){F.target.removeEventListener("dispose",P);for(const X in p){const G=p[X],D=F.target.uuid;D in G&&(G[D].dispose(),delete G[D])}}}const rq={[Ox]:Nx,[Lx]:kx,[Dx]:Px,[Wv]:Bx,[Nx]:Ox,[kx]:Lx,[Px]:Dx,[Bx]:Wv};function oq(s,e){function n(){let Me=!1;const Ze=new Ei;let $t=null;const Pt=new Ei(0,0,0,0);return{setMask:function(Mt){$t!==Mt&&!Me&&(s.colorMask(Mt,Mt,Mt,Mt),$t=Mt)},setLocked:function(Mt){Me=Mt},setClear:function(Mt,xt,Xt,Yt,Wt){Wt===!0&&(Mt*=Yt,xt*=Yt,Xt*=Yt),Ze.set(Mt,xt,Xt,Yt),Pt.equals(Ze)===!1&&(s.clearColor(Mt,xt,Xt,Yt),Pt.copy(Ze))},reset:function(){Me=!1,$t=null,Pt.set(-1,0,0,0)}}}function i(){let Me=!1,Ze=!1,$t=null,Pt=null,Mt=null;return{setReversed:function(xt){if(Ze!==xt){const Xt=e.get("EXT_clip_control");xt?Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.ZERO_TO_ONE_EXT):Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.NEGATIVE_ONE_TO_ONE_EXT),Ze=xt;const Yt=Mt;Mt=null,this.setClear(Yt)}},getReversed:function(){return Ze},setTest:function(xt){xt?gt(s.DEPTH_TEST):ft(s.DEPTH_TEST)},setMask:function(xt){$t!==xt&&!Me&&(s.depthMask(xt),$t=xt)},setFunc:function(xt){if(Ze&&(xt=rq[xt]),Pt!==xt){switch(xt){case Ox:s.depthFunc(s.NEVER);break;case Nx:s.depthFunc(s.ALWAYS);break;case Lx:s.depthFunc(s.LESS);break;case Wv:s.depthFunc(s.LEQUAL);break;case Dx:s.depthFunc(s.EQUAL);break;case Bx:s.depthFunc(s.GEQUAL);break;case kx:s.depthFunc(s.GREATER);break;case Px:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}Pt=xt}},setLocked:function(xt){Me=xt},setClear:function(xt){Mt!==xt&&(Ze&&(xt=1-xt),s.clearDepth(xt),Mt=xt)},reset:function(){Me=!1,$t=null,Pt=null,Mt=null,Ze=!1}}}function r(){let Me=!1,Ze=null,$t=null,Pt=null,Mt=null,xt=null,Xt=null,Yt=null,Wt=null;return{setTest:function(xn){Me||(xn?gt(s.STENCIL_TEST):ft(s.STENCIL_TEST))},setMask:function(xn){Ze!==xn&&!Me&&(s.stencilMask(xn),Ze=xn)},setFunc:function(xn,jt,Zt){($t!==xn||Pt!==jt||Mt!==Zt)&&(s.stencilFunc(xn,jt,Zt),$t=xn,Pt=jt,Mt=Zt)},setOp:function(xn,jt,Zt){(xt!==xn||Xt!==jt||Yt!==Zt)&&(s.stencilOp(xn,jt,Zt),xt=xn,Xt=jt,Yt=Zt)},setLocked:function(xn){Me=xn},setClear:function(xn){Wt!==xn&&(s.clearStencil(xn),Wt=xn)},reset:function(){Me=!1,Ze=null,$t=null,Pt=null,Mt=null,xt=null,Xt=null,Yt=null,Wt=null}}}const a=new n,l=new i,h=new r,f=new WeakMap,p=new WeakMap;let v={},T={},y=new WeakMap,S=[],$=null,M=!1,C=null,E=null,w=null,I=null,O=null,P=null,F=null,V=new on(0,0,0),X=0,G=!1,D=null,Z=null,Y=null,j=null,ne=null;const ee=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,te=0;const ce=s.getParameter(s.VERSION);ce.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(ce)[1]),z=te>=1):ce.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(ce)[1]),z=te>=2);let pe=null,K={};const fe=s.getParameter(s.SCISSOR_BOX),Ne=s.getParameter(s.VIEWPORT),Pe=new Ei().fromArray(fe),Ee=new Ei().fromArray(Ne);function We(Me,Ze,$t,Pt){const Mt=new Uint8Array(4),xt=s.createTexture();s.bindTexture(Me,xt),s.texParameteri(Me,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(Me,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let Xt=0;Xt<$t;Xt++)Me===s.TEXTURE_3D||Me===s.TEXTURE_2D_ARRAY?s.texImage3D(Ze,0,s.RGBA,1,1,Pt,0,s.RGBA,s.UNSIGNED_BYTE,Mt):s.texImage2D(Ze+Xt,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,Mt);return xt}const Fe={};Fe[s.TEXTURE_2D]=We(s.TEXTURE_2D,s.TEXTURE_2D,1),Fe[s.TEXTURE_CUBE_MAP]=We(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),Fe[s.TEXTURE_2D_ARRAY]=We(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),Fe[s.TEXTURE_3D]=We(s.TEXTURE_3D,s.TEXTURE_3D,1,1),a.setClear(0,0,0,1),l.setClear(1),h.setClear(0),gt(s.DEPTH_TEST),l.setFunc(Wv),Ae(!1),we(VI),gt(s.CULL_FACE),J(bp);function gt(Me){v[Me]!==!0&&(s.enable(Me),v[Me]=!0)}function ft(Me){v[Me]!==!1&&(s.disable(Me),v[Me]=!1)}function Ut(Me,Ze){return T[Me]!==Ze?(s.bindFramebuffer(Me,Ze),T[Me]=Ze,Me===s.DRAW_FRAMEBUFFER&&(T[s.FRAMEBUFFER]=Ze),Me===s.FRAMEBUFFER&&(T[s.DRAW_FRAMEBUFFER]=Ze),!0):!1}function Ke(Me,Ze){let $t=S,Pt=!1;if(Me){$t=y.get(Ze),$t===void 0&&($t=[],y.set(Ze,$t));const Mt=Me.textures;if($t.length!==Mt.length||$t[0]!==s.COLOR_ATTACHMENT0){for(let xt=0,Xt=Mt.length;xt<Xt;xt++)$t[xt]=s.COLOR_ATTACHMENT0+xt;$t.length=Mt.length,Pt=!0}}else $t[0]!==s.BACK&&($t[0]=s.BACK,Pt=!0);Pt&&s.drawBuffers($t)}function Ht(Me){return $!==Me?(s.useProgram(Me),$=Me,!0):!1}const Re={[$g]:s.FUNC_ADD,[eH]:s.FUNC_SUBTRACT,[tH]:s.FUNC_REVERSE_SUBTRACT};Re[nH]=s.MIN,Re[iH]=s.MAX;const Ye={[sH]:s.ZERO,[rH]:s.ONE,[oH]:s.SRC_COLOR,[wx]:s.SRC_ALPHA,[dH]:s.SRC_ALPHA_SATURATE,[cH]:s.DST_COLOR,[lH]:s.DST_ALPHA,[aH]:s.ONE_MINUS_SRC_COLOR,[Ix]:s.ONE_MINUS_SRC_ALPHA,[hH]:s.ONE_MINUS_DST_COLOR,[uH]:s.ONE_MINUS_DST_ALPHA,[fH]:s.CONSTANT_COLOR,[pH]:s.ONE_MINUS_CONSTANT_COLOR,[mH]:s.CONSTANT_ALPHA,[gH]:s.ONE_MINUS_CONSTANT_ALPHA};function J(Me,Ze,$t,Pt,Mt,xt,Xt,Yt,Wt,xn){if(Me===bp){M===!0&&(ft(s.BLEND),M=!1);return}if(M===!1&&(gt(s.BLEND),M=!0),Me!==QF){if(Me!==C||xn!==G){if((E!==$g||O!==$g)&&(s.blendEquation(s.FUNC_ADD),E=$g,O=$g),xn)switch(Me){case Bv:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case WI:s.blendFunc(s.ONE,s.ONE);break;case XI:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case jI:s.blendFuncSeparate(s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ZERO,s.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}else switch(Me){case Bv:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case WI:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE,s.ONE,s.ONE);break;case XI:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case jI:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}w=null,I=null,P=null,F=null,V.set(0,0,0),X=0,C=Me,G=xn}return}Mt=Mt||Ze,xt=xt||$t,Xt=Xt||Pt,(Ze!==E||Mt!==O)&&(s.blendEquationSeparate(Re[Ze],Re[Mt]),E=Ze,O=Mt),($t!==w||Pt!==I||xt!==P||Xt!==F)&&(s.blendFuncSeparate(Ye[$t],Ye[Pt],Ye[xt],Ye[Xt]),w=$t,I=Pt,P=xt,F=Xt),(Yt.equals(V)===!1||Wt!==X)&&(s.blendColor(Yt.r,Yt.g,Yt.b,Wt),V.copy(Yt),X=Wt),C=Me,G=!1}function Se(Me,Ze){Me.side===Rh?ft(s.CULL_FACE):gt(s.CULL_FACE);let $t=Me.side===hu;Ze&&($t=!$t),Ae($t),Me.blending===Bv&&Me.transparent===!1?J(bp):J(Me.blending,Me.blendEquation,Me.blendSrc,Me.blendDst,Me.blendEquationAlpha,Me.blendSrcAlpha,Me.blendDstAlpha,Me.blendColor,Me.blendAlpha,Me.premultipliedAlpha),l.setFunc(Me.depthFunc),l.setTest(Me.depthTest),l.setMask(Me.depthWrite),a.setMask(Me.colorWrite);const Pt=Me.stencilWrite;h.setTest(Pt),Pt&&(h.setMask(Me.stencilWriteMask),h.setFunc(Me.stencilFunc,Me.stencilRef,Me.stencilFuncMask),h.setOp(Me.stencilFail,Me.stencilZFail,Me.stencilZPass)),dt(Me.polygonOffset,Me.polygonOffsetFactor,Me.polygonOffsetUnits),Me.alphaToCoverage===!0?gt(s.SAMPLE_ALPHA_TO_COVERAGE):ft(s.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(Me){D!==Me&&(Me?s.frontFace(s.CW):s.frontFace(s.CCW),D=Me)}function we(Me){Me!==qF?(gt(s.CULL_FACE),Me!==Z&&(Me===VI?s.cullFace(s.BACK):Me===JF?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):ft(s.CULL_FACE),Z=Me}function Ie(Me){Me!==Y&&(z&&s.lineWidth(Me),Y=Me)}function dt(Me,Ze,$t){Me?(gt(s.POLYGON_OFFSET_FILL),(j!==Ze||ne!==$t)&&(s.polygonOffset(Ze,$t),j=Ze,ne=$t)):ft(s.POLYGON_OFFSET_FILL)}function Qe(Me){Me?gt(s.SCISSOR_TEST):ft(s.SCISSOR_TEST)}function vt(Me){Me===void 0&&(Me=s.TEXTURE0+ee-1),pe!==Me&&(s.activeTexture(Me),pe=Me)}function et(Me,Ze,$t){$t===void 0&&(pe===null?$t=s.TEXTURE0+ee-1:$t=pe);let Pt=K[$t];Pt===void 0&&(Pt={type:void 0,texture:void 0},K[$t]=Pt),(Pt.type!==Me||Pt.texture!==Ze)&&(pe!==$t&&(s.activeTexture($t),pe=$t),s.bindTexture(Me,Ze||Fe[Me]),Pt.type=Me,Pt.texture=Ze)}function _e(){const Me=K[pe];Me!==void 0&&Me.type!==void 0&&(s.bindTexture(Me.type,null),Me.type=void 0,Me.texture=void 0)}function se(){try{s.compressedTexImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function $e(){try{s.compressedTexImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Le(){try{s.texSubImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Xe(){try{s.texSubImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ve(){try{s.compressedTexSubImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function yt(){try{s.compressedTexSubImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function bt(){try{s.texStorage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function At(){try{s.texStorage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ft(){try{s.texImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function H(){try{s.texImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function oe(Me){Pe.equals(Me)===!1&&(s.scissor(Me.x,Me.y,Me.z,Me.w),Pe.copy(Me))}function ve(Me){Ee.equals(Me)===!1&&(s.viewport(Me.x,Me.y,Me.z,Me.w),Ee.copy(Me))}function re(Me,Ze){let $t=p.get(Ze);$t===void 0&&($t=new WeakMap,p.set(Ze,$t));let Pt=$t.get(Me);Pt===void 0&&(Pt=s.getUniformBlockIndex(Ze,Me.name),$t.set(Me,Pt))}function ye(Me,Ze){const Pt=p.get(Ze).get(Me);f.get(Ze)!==Pt&&(s.uniformBlockBinding(Ze,Pt,Me.__bindingPointIndex),f.set(Ze,Pt))}function lt(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.blendColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),l.setReversed(!1),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),v={},pe=null,K={},T={},y=new WeakMap,S=[],$=null,M=!1,C=null,E=null,w=null,I=null,O=null,P=null,F=null,V=new on(0,0,0),X=0,G=!1,D=null,Z=null,Y=null,j=null,ne=null,Pe.set(0,0,s.canvas.width,s.canvas.height),Ee.set(0,0,s.canvas.width,s.canvas.height),a.reset(),l.reset(),h.reset()}return{buffers:{color:a,depth:l,stencil:h},enable:gt,disable:ft,bindFramebuffer:Ut,drawBuffers:Ke,useProgram:Ht,setBlending:J,setMaterial:Se,setFlipSided:Ae,setCullFace:we,setLineWidth:Ie,setPolygonOffset:dt,setScissorTest:Qe,activeTexture:vt,bindTexture:et,unbindTexture:_e,compressedTexImage2D:se,compressedTexImage3D:$e,texImage2D:Ft,texImage3D:H,updateUBOMapping:re,uniformBlockBinding:ye,texStorage2D:bt,texStorage3D:At,texSubImage2D:Le,texSubImage3D:Xe,compressedTexSubImage2D:Ve,compressedTexSubImage3D:yt,scissor:oe,viewport:ve,reset:lt}}function aq(s,e,n,i,r,a,l){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new It,v=new WeakMap;let T;const y=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function $(_e,se){return S?new OffscreenCanvas(_e,se):lS("canvas")}function M(_e,se,$e){let Le=1;const Xe=et(_e);if((Xe.width>$e||Xe.height>$e)&&(Le=$e/Math.max(Xe.width,Xe.height)),Le<1)if(typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_e instanceof ImageBitmap||typeof VideoFrame<"u"&&_e instanceof VideoFrame){const Ve=Math.floor(Le*Xe.width),yt=Math.floor(Le*Xe.height);T===void 0&&(T=$(Ve,yt));const bt=se?$(Ve,yt):T;return bt.width=Ve,bt.height=yt,bt.getContext("2d").drawImage(_e,0,0,Ve,yt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xe.width+"x"+Xe.height+") to ("+Ve+"x"+yt+")."),bt}else return"data"in _e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xe.width+"x"+Xe.height+")."),_e;return _e}function C(_e){return _e.generateMipmaps}function E(_e){s.generateMipmap(_e)}function w(_e){return _e.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:_e.isWebGL3DRenderTarget?s.TEXTURE_3D:_e.isWebGLArrayRenderTarget||_e.isCompressedArrayTexture?s.TEXTURE_2D_ARRAY:s.TEXTURE_2D}function I(_e,se,$e,Le,Xe=!1){if(_e!==null){if(s[_e]!==void 0)return s[_e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+_e+"'")}let Ve=se;if(se===s.RED&&($e===s.FLOAT&&(Ve=s.R32F),$e===s.HALF_FLOAT&&(Ve=s.R16F),$e===s.UNSIGNED_BYTE&&(Ve=s.R8)),se===s.RED_INTEGER&&($e===s.UNSIGNED_BYTE&&(Ve=s.R8UI),$e===s.UNSIGNED_SHORT&&(Ve=s.R16UI),$e===s.UNSIGNED_INT&&(Ve=s.R32UI),$e===s.BYTE&&(Ve=s.R8I),$e===s.SHORT&&(Ve=s.R16I),$e===s.INT&&(Ve=s.R32I)),se===s.RG&&($e===s.FLOAT&&(Ve=s.RG32F),$e===s.HALF_FLOAT&&(Ve=s.RG16F),$e===s.UNSIGNED_BYTE&&(Ve=s.RG8)),se===s.RG_INTEGER&&($e===s.UNSIGNED_BYTE&&(Ve=s.RG8UI),$e===s.UNSIGNED_SHORT&&(Ve=s.RG16UI),$e===s.UNSIGNED_INT&&(Ve=s.RG32UI),$e===s.BYTE&&(Ve=s.RG8I),$e===s.SHORT&&(Ve=s.RG16I),$e===s.INT&&(Ve=s.RG32I)),se===s.RGB_INTEGER&&($e===s.UNSIGNED_BYTE&&(Ve=s.RGB8UI),$e===s.UNSIGNED_SHORT&&(Ve=s.RGB16UI),$e===s.UNSIGNED_INT&&(Ve=s.RGB32UI),$e===s.BYTE&&(Ve=s.RGB8I),$e===s.SHORT&&(Ve=s.RGB16I),$e===s.INT&&(Ve=s.RGB32I)),se===s.RGBA_INTEGER&&($e===s.UNSIGNED_BYTE&&(Ve=s.RGBA8UI),$e===s.UNSIGNED_SHORT&&(Ve=s.RGBA16UI),$e===s.UNSIGNED_INT&&(Ve=s.RGBA32UI),$e===s.BYTE&&(Ve=s.RGBA8I),$e===s.SHORT&&(Ve=s.RGBA16I),$e===s.INT&&(Ve=s.RGBA32I)),se===s.RGB&&$e===s.UNSIGNED_INT_5_9_9_9_REV&&(Ve=s.RGB9_E5),se===s.RGBA){const yt=Xe?rS:Yi.getTransfer(Le);$e===s.FLOAT&&(Ve=s.RGBA32F),$e===s.HALF_FLOAT&&(Ve=s.RGBA16F),$e===s.UNSIGNED_BYTE&&(Ve=yt===Ls?s.SRGB8_ALPHA8:s.RGBA8),$e===s.UNSIGNED_SHORT_4_4_4_4&&(Ve=s.RGBA4),$e===s.UNSIGNED_SHORT_5_5_5_1&&(Ve=s.RGB5_A1)}return(Ve===s.R16F||Ve===s.R32F||Ve===s.RG16F||Ve===s.RG32F||Ve===s.RGBA16F||Ve===s.RGBA32F)&&e.get("EXT_color_buffer_float"),Ve}function O(_e,se){let $e;return _e?se===null||se===xp||se===Gy?$e=s.DEPTH24_STENCIL8:se===Rr?$e=s.DEPTH32F_STENCIL8:se===Hy&&($e=s.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):se===null||se===xp||se===Gy?$e=s.DEPTH_COMPONENT24:se===Rr?$e=s.DEPTH_COMPONENT32F:se===Hy&&($e=s.DEPTH_COMPONENT16),$e}function P(_e,se){return C(_e)===!0||_e.isFramebufferTexture&&_e.minFilter!==Ta&&_e.minFilter!==us?Math.log2(Math.max(se.width,se.height))+1:_e.mipmaps!==void 0&&_e.mipmaps.length>0?_e.mipmaps.length:_e.isCompressedTexture&&Array.isArray(_e.image)?se.mipmaps.length:1}function F(_e){const se=_e.target;se.removeEventListener("dispose",F),X(se),se.isVideoTexture&&v.delete(se)}function V(_e){const se=_e.target;se.removeEventListener("dispose",V),D(se)}function X(_e){const se=i.get(_e);if(se.__webglInit===void 0)return;const $e=_e.source,Le=y.get($e);if(Le){const Xe=Le[se.__cacheKey];Xe.usedTimes--,Xe.usedTimes===0&&G(_e),Object.keys(Le).length===0&&y.delete($e)}i.remove(_e)}function G(_e){const se=i.get(_e);s.deleteTexture(se.__webglTexture);const $e=_e.source,Le=y.get($e);delete Le[se.__cacheKey],l.memory.textures--}function D(_e){const se=i.get(_e);if(_e.depthTexture&&(_e.depthTexture.dispose(),i.remove(_e.depthTexture)),_e.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++){if(Array.isArray(se.__webglFramebuffer[Le]))for(let Xe=0;Xe<se.__webglFramebuffer[Le].length;Xe++)s.deleteFramebuffer(se.__webglFramebuffer[Le][Xe]);else s.deleteFramebuffer(se.__webglFramebuffer[Le]);se.__webglDepthbuffer&&s.deleteRenderbuffer(se.__webglDepthbuffer[Le])}else{if(Array.isArray(se.__webglFramebuffer))for(let Le=0;Le<se.__webglFramebuffer.length;Le++)s.deleteFramebuffer(se.__webglFramebuffer[Le]);else s.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&s.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&s.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Le=0;Le<se.__webglColorRenderbuffer.length;Le++)se.__webglColorRenderbuffer[Le]&&s.deleteRenderbuffer(se.__webglColorRenderbuffer[Le]);se.__webglDepthRenderbuffer&&s.deleteRenderbuffer(se.__webglDepthRenderbuffer)}const $e=_e.textures;for(let Le=0,Xe=$e.length;Le<Xe;Le++){const Ve=i.get($e[Le]);Ve.__webglTexture&&(s.deleteTexture(Ve.__webglTexture),l.memory.textures--),i.remove($e[Le])}i.remove(_e)}let Z=0;function Y(){Z=0}function j(){const _e=Z;return _e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+_e+" texture units while this GPU supports only "+r.maxTextures),Z+=1,_e}function ne(_e){const se=[];return se.push(_e.wrapS),se.push(_e.wrapT),se.push(_e.wrapR||0),se.push(_e.magFilter),se.push(_e.minFilter),se.push(_e.anisotropy),se.push(_e.internalFormat),se.push(_e.format),se.push(_e.type),se.push(_e.generateMipmaps),se.push(_e.premultiplyAlpha),se.push(_e.flipY),se.push(_e.unpackAlignment),se.push(_e.colorSpace),se.join()}function ee(_e,se){const $e=i.get(_e);if(_e.isVideoTexture&&Qe(_e),_e.isRenderTargetTexture===!1&&_e.version>0&&$e.__version!==_e.version){const Le=_e.image;if(Le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Fe($e,_e,se);return}}n.bindTexture(s.TEXTURE_2D,$e.__webglTexture,s.TEXTURE0+se)}function z(_e,se){const $e=i.get(_e);if(_e.version>0&&$e.__version!==_e.version){Fe($e,_e,se);return}n.bindTexture(s.TEXTURE_2D_ARRAY,$e.__webglTexture,s.TEXTURE0+se)}function te(_e,se){const $e=i.get(_e);if(_e.version>0&&$e.__version!==_e.version){Fe($e,_e,se);return}n.bindTexture(s.TEXTURE_3D,$e.__webglTexture,s.TEXTURE0+se)}function ce(_e,se){const $e=i.get(_e);if(_e.version>0&&$e.__version!==_e.version){gt($e,_e,se);return}n.bindTexture(s.TEXTURE_CUBE_MAP,$e.__webglTexture,s.TEXTURE0+se)}const pe={[Pg]:s.REPEAT,[co]:s.CLAMP_TO_EDGE,[Fy]:s.MIRRORED_REPEAT},K={[Ta]:s.NEAREST,[qC]:s.NEAREST_MIPMAP_NEAREST,[Cv]:s.NEAREST_MIPMAP_LINEAR,[us]:s.LINEAR,[My]:s.LINEAR_MIPMAP_NEAREST,[Nh]:s.LINEAR_MIPMAP_LINEAR},fe={[NH]:s.NEVER,[UH]:s.ALWAYS,[LH]:s.LESS,[l2]:s.LEQUAL,[DH]:s.EQUAL,[PH]:s.GEQUAL,[BH]:s.GREATER,[kH]:s.NOTEQUAL};function Ne(_e,se){if(se.type===Rr&&e.has("OES_texture_float_linear")===!1&&(se.magFilter===us||se.magFilter===My||se.magFilter===Cv||se.magFilter===Nh||se.minFilter===us||se.minFilter===My||se.minFilter===Cv||se.minFilter===Nh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s.texParameteri(_e,s.TEXTURE_WRAP_S,pe[se.wrapS]),s.texParameteri(_e,s.TEXTURE_WRAP_T,pe[se.wrapT]),(_e===s.TEXTURE_3D||_e===s.TEXTURE_2D_ARRAY)&&s.texParameteri(_e,s.TEXTURE_WRAP_R,pe[se.wrapR]),s.texParameteri(_e,s.TEXTURE_MAG_FILTER,K[se.magFilter]),s.texParameteri(_e,s.TEXTURE_MIN_FILTER,K[se.minFilter]),se.compareFunction&&(s.texParameteri(_e,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(_e,s.TEXTURE_COMPARE_FUNC,fe[se.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(se.magFilter===Ta||se.minFilter!==Cv&&se.minFilter!==Nh||se.type===Rr&&e.has("OES_texture_float_linear")===!1)return;if(se.anisotropy>1||i.get(se).__currentAnisotropy){const $e=e.get("EXT_texture_filter_anisotropic");s.texParameterf(_e,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,r.getMaxAnisotropy())),i.get(se).__currentAnisotropy=se.anisotropy}}}function Pe(_e,se){let $e=!1;_e.__webglInit===void 0&&(_e.__webglInit=!0,se.addEventListener("dispose",F));const Le=se.source;let Xe=y.get(Le);Xe===void 0&&(Xe={},y.set(Le,Xe));const Ve=ne(se);if(Ve!==_e.__cacheKey){Xe[Ve]===void 0&&(Xe[Ve]={texture:s.createTexture(),usedTimes:0},l.memory.textures++,$e=!0),Xe[Ve].usedTimes++;const yt=Xe[_e.__cacheKey];yt!==void 0&&(Xe[_e.__cacheKey].usedTimes--,yt.usedTimes===0&&G(se)),_e.__cacheKey=Ve,_e.__webglTexture=Xe[Ve].texture}return $e}function Ee(_e,se,$e){return Math.floor(Math.floor(_e/$e)/se)}function We(_e,se,$e,Le){const Ve=_e.updateRanges;if(Ve.length===0)n.texSubImage2D(s.TEXTURE_2D,0,0,0,se.width,se.height,$e,Le,se.data);else{Ve.sort((H,oe)=>H.start-oe.start);let yt=0;for(let H=1;H<Ve.length;H++){const oe=Ve[yt],ve=Ve[H],re=oe.start+oe.count,ye=Ee(ve.start,se.width,4),lt=Ee(oe.start,se.width,4);ve.start<=re+1&&ye===lt&&Ee(ve.start+ve.count-1,se.width,4)===ye?oe.count=Math.max(oe.count,ve.start+ve.count-oe.start):(++yt,Ve[yt]=ve)}Ve.length=yt+1;const bt=s.getParameter(s.UNPACK_ROW_LENGTH),At=s.getParameter(s.UNPACK_SKIP_PIXELS),Ft=s.getParameter(s.UNPACK_SKIP_ROWS);s.pixelStorei(s.UNPACK_ROW_LENGTH,se.width);for(let H=0,oe=Ve.length;H<oe;H++){const ve=Ve[H],re=Math.floor(ve.start/4),ye=Math.ceil(ve.count/4),lt=re%se.width,Me=Math.floor(re/se.width),Ze=ye,$t=1;s.pixelStorei(s.UNPACK_SKIP_PIXELS,lt),s.pixelStorei(s.UNPACK_SKIP_ROWS,Me),n.texSubImage2D(s.TEXTURE_2D,0,lt,Me,Ze,$t,$e,Le,se.data)}_e.clearUpdateRanges(),s.pixelStorei(s.UNPACK_ROW_LENGTH,bt),s.pixelStorei(s.UNPACK_SKIP_PIXELS,At),s.pixelStorei(s.UNPACK_SKIP_ROWS,Ft)}}function Fe(_e,se,$e){let Le=s.TEXTURE_2D;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(Le=s.TEXTURE_2D_ARRAY),se.isData3DTexture&&(Le=s.TEXTURE_3D);const Xe=Pe(_e,se),Ve=se.source;n.bindTexture(Le,_e.__webglTexture,s.TEXTURE0+$e);const yt=i.get(Ve);if(Ve.version!==yt.__version||Xe===!0){n.activeTexture(s.TEXTURE0+$e);const bt=Yi.getPrimaries(Yi.workingColorSpace),At=se.colorSpace===X0?null:Yi.getPrimaries(se.colorSpace),Ft=se.colorSpace===X0||bt===At?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,se.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,se.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);let H=M(se.image,!1,r.maxTextureSize);H=vt(se,H);const oe=a.convert(se.format,se.colorSpace),ve=a.convert(se.type);let re=I(se.internalFormat,oe,ve,se.colorSpace,se.isVideoTexture);Ne(Le,se);let ye;const lt=se.mipmaps,Me=se.isVideoTexture!==!0,Ze=yt.__version===void 0||Xe===!0,$t=Ve.dataReady,Pt=P(se,H);if(se.isDepthTexture)re=O(se.format===Vy,se.type),Ze&&(Me?n.texStorage2D(s.TEXTURE_2D,1,re,H.width,H.height):n.texImage2D(s.TEXTURE_2D,0,re,H.width,H.height,0,oe,ve,null));else if(se.isDataTexture)if(lt.length>0){Me&&Ze&&n.texStorage2D(s.TEXTURE_2D,Pt,re,lt[0].width,lt[0].height);for(let Mt=0,xt=lt.length;Mt<xt;Mt++)ye=lt[Mt],Me?$t&&n.texSubImage2D(s.TEXTURE_2D,Mt,0,0,ye.width,ye.height,oe,ve,ye.data):n.texImage2D(s.TEXTURE_2D,Mt,re,ye.width,ye.height,0,oe,ve,ye.data);se.generateMipmaps=!1}else Me?(Ze&&n.texStorage2D(s.TEXTURE_2D,Pt,re,H.width,H.height),$t&&We(se,H,oe,ve)):n.texImage2D(s.TEXTURE_2D,0,re,H.width,H.height,0,oe,ve,H.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){Me&&Ze&&n.texStorage3D(s.TEXTURE_2D_ARRAY,Pt,re,lt[0].width,lt[0].height,H.depth);for(let Mt=0,xt=lt.length;Mt<xt;Mt++)if(ye=lt[Mt],se.format!==ho)if(oe!==null)if(Me){if($t)if(se.layerUpdates.size>0){const Xt=sO(ye.width,ye.height,se.format,se.type);for(const Yt of se.layerUpdates){const Wt=ye.data.subarray(Yt*Xt/ye.data.BYTES_PER_ELEMENT,(Yt+1)*Xt/ye.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Mt,0,0,Yt,ye.width,ye.height,1,oe,Wt)}se.clearLayerUpdates()}else n.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Mt,0,0,0,ye.width,ye.height,H.depth,oe,ye.data)}else n.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Mt,re,ye.width,ye.height,H.depth,0,ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Me?$t&&n.texSubImage3D(s.TEXTURE_2D_ARRAY,Mt,0,0,0,ye.width,ye.height,H.depth,oe,ve,ye.data):n.texImage3D(s.TEXTURE_2D_ARRAY,Mt,re,ye.width,ye.height,H.depth,0,oe,ve,ye.data)}else{Me&&Ze&&n.texStorage2D(s.TEXTURE_2D,Pt,re,lt[0].width,lt[0].height);for(let Mt=0,xt=lt.length;Mt<xt;Mt++)ye=lt[Mt],se.format!==ho?oe!==null?Me?$t&&n.compressedTexSubImage2D(s.TEXTURE_2D,Mt,0,0,ye.width,ye.height,oe,ye.data):n.compressedTexImage2D(s.TEXTURE_2D,Mt,re,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Me?$t&&n.texSubImage2D(s.TEXTURE_2D,Mt,0,0,ye.width,ye.height,oe,ve,ye.data):n.texImage2D(s.TEXTURE_2D,Mt,re,ye.width,ye.height,0,oe,ve,ye.data)}else if(se.isDataArrayTexture)if(Me){if(Ze&&n.texStorage3D(s.TEXTURE_2D_ARRAY,Pt,re,H.width,H.height,H.depth),$t)if(se.layerUpdates.size>0){const Mt=sO(H.width,H.height,se.format,se.type);for(const xt of se.layerUpdates){const Xt=H.data.subarray(xt*Mt/H.data.BYTES_PER_ELEMENT,(xt+1)*Mt/H.data.BYTES_PER_ELEMENT);n.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,xt,H.width,H.height,1,oe,ve,Xt)}se.clearLayerUpdates()}else n.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,H.width,H.height,H.depth,oe,ve,H.data)}else n.texImage3D(s.TEXTURE_2D_ARRAY,0,re,H.width,H.height,H.depth,0,oe,ve,H.data);else if(se.isData3DTexture)Me?(Ze&&n.texStorage3D(s.TEXTURE_3D,Pt,re,H.width,H.height,H.depth),$t&&n.texSubImage3D(s.TEXTURE_3D,0,0,0,0,H.width,H.height,H.depth,oe,ve,H.data)):n.texImage3D(s.TEXTURE_3D,0,re,H.width,H.height,H.depth,0,oe,ve,H.data);else if(se.isFramebufferTexture){if(Ze)if(Me)n.texStorage2D(s.TEXTURE_2D,Pt,re,H.width,H.height);else{let Mt=H.width,xt=H.height;for(let Xt=0;Xt<Pt;Xt++)n.texImage2D(s.TEXTURE_2D,Xt,re,Mt,xt,0,oe,ve,null),Mt>>=1,xt>>=1}}else if(lt.length>0){if(Me&&Ze){const Mt=et(lt[0]);n.texStorage2D(s.TEXTURE_2D,Pt,re,Mt.width,Mt.height)}for(let Mt=0,xt=lt.length;Mt<xt;Mt++)ye=lt[Mt],Me?$t&&n.texSubImage2D(s.TEXTURE_2D,Mt,0,0,oe,ve,ye):n.texImage2D(s.TEXTURE_2D,Mt,re,oe,ve,ye);se.generateMipmaps=!1}else if(Me){if(Ze){const Mt=et(H);n.texStorage2D(s.TEXTURE_2D,Pt,re,Mt.width,Mt.height)}$t&&n.texSubImage2D(s.TEXTURE_2D,0,0,0,oe,ve,H)}else n.texImage2D(s.TEXTURE_2D,0,re,oe,ve,H);C(se)&&E(Le),yt.__version=Ve.version,se.onUpdate&&se.onUpdate(se)}_e.__version=se.version}function gt(_e,se,$e){if(se.image.length!==6)return;const Le=Pe(_e,se),Xe=se.source;n.bindTexture(s.TEXTURE_CUBE_MAP,_e.__webglTexture,s.TEXTURE0+$e);const Ve=i.get(Xe);if(Xe.version!==Ve.__version||Le===!0){n.activeTexture(s.TEXTURE0+$e);const yt=Yi.getPrimaries(Yi.workingColorSpace),bt=se.colorSpace===X0?null:Yi.getPrimaries(se.colorSpace),At=se.colorSpace===X0||yt===bt?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,se.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,se.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,At);const Ft=se.isCompressedTexture||se.image[0].isCompressedTexture,H=se.image[0]&&se.image[0].isDataTexture,oe=[];for(let xt=0;xt<6;xt++)!Ft&&!H?oe[xt]=M(se.image[xt],!0,r.maxCubemapSize):oe[xt]=H?se.image[xt].image:se.image[xt],oe[xt]=vt(se,oe[xt]);const ve=oe[0],re=a.convert(se.format,se.colorSpace),ye=a.convert(se.type),lt=I(se.internalFormat,re,ye,se.colorSpace),Me=se.isVideoTexture!==!0,Ze=Ve.__version===void 0||Le===!0,$t=Xe.dataReady;let Pt=P(se,ve);Ne(s.TEXTURE_CUBE_MAP,se);let Mt;if(Ft){Me&&Ze&&n.texStorage2D(s.TEXTURE_CUBE_MAP,Pt,lt,ve.width,ve.height);for(let xt=0;xt<6;xt++){Mt=oe[xt].mipmaps;for(let Xt=0;Xt<Mt.length;Xt++){const Yt=Mt[Xt];se.format!==ho?re!==null?Me?$t&&n.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt,0,0,Yt.width,Yt.height,re,Yt.data):n.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt,lt,Yt.width,Yt.height,0,Yt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Me?$t&&n.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt,0,0,Yt.width,Yt.height,re,ye,Yt.data):n.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt,lt,Yt.width,Yt.height,0,re,ye,Yt.data)}}}else{if(Mt=se.mipmaps,Me&&Ze){Mt.length>0&&Pt++;const xt=et(oe[0]);n.texStorage2D(s.TEXTURE_CUBE_MAP,Pt,lt,xt.width,xt.height)}for(let xt=0;xt<6;xt++)if(H){Me?$t&&n.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,oe[xt].width,oe[xt].height,re,ye,oe[xt].data):n.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,lt,oe[xt].width,oe[xt].height,0,re,ye,oe[xt].data);for(let Xt=0;Xt<Mt.length;Xt++){const Wt=Mt[Xt].image[xt].image;Me?$t&&n.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt+1,0,0,Wt.width,Wt.height,re,ye,Wt.data):n.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt+1,lt,Wt.width,Wt.height,0,re,ye,Wt.data)}}else{Me?$t&&n.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,re,ye,oe[xt]):n.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,lt,re,ye,oe[xt]);for(let Xt=0;Xt<Mt.length;Xt++){const Yt=Mt[Xt];Me?$t&&n.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt+1,0,0,re,ye,Yt.image[xt]):n.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+xt,Xt+1,lt,re,ye,Yt.image[xt])}}}C(se)&&E(s.TEXTURE_CUBE_MAP),Ve.__version=Xe.version,se.onUpdate&&se.onUpdate(se)}_e.__version=se.version}function ft(_e,se,$e,Le,Xe,Ve){const yt=a.convert($e.format,$e.colorSpace),bt=a.convert($e.type),At=I($e.internalFormat,yt,bt,$e.colorSpace),Ft=i.get(se),H=i.get($e);if(H.__renderTarget=se,!Ft.__hasExternalTextures){const oe=Math.max(1,se.width>>Ve),ve=Math.max(1,se.height>>Ve);Xe===s.TEXTURE_3D||Xe===s.TEXTURE_2D_ARRAY?n.texImage3D(Xe,Ve,At,oe,ve,se.depth,0,yt,bt,null):n.texImage2D(Xe,Ve,At,oe,ve,0,yt,bt,null)}n.bindFramebuffer(s.FRAMEBUFFER,_e),dt(se)?h.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,Le,Xe,H.__webglTexture,0,Ie(se)):(Xe===s.TEXTURE_2D||Xe>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Xe<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,Le,Xe,H.__webglTexture,Ve),n.bindFramebuffer(s.FRAMEBUFFER,null)}function Ut(_e,se,$e){if(s.bindRenderbuffer(s.RENDERBUFFER,_e),se.depthBuffer){const Le=se.depthTexture,Xe=Le&&Le.isDepthTexture?Le.type:null,Ve=O(se.stencilBuffer,Xe),yt=se.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,bt=Ie(se);dt(se)?h.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,bt,Ve,se.width,se.height):$e?s.renderbufferStorageMultisample(s.RENDERBUFFER,bt,Ve,se.width,se.height):s.renderbufferStorage(s.RENDERBUFFER,Ve,se.width,se.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,yt,s.RENDERBUFFER,_e)}else{const Le=se.textures;for(let Xe=0;Xe<Le.length;Xe++){const Ve=Le[Xe],yt=a.convert(Ve.format,Ve.colorSpace),bt=a.convert(Ve.type),At=I(Ve.internalFormat,yt,bt,Ve.colorSpace),Ft=Ie(se);$e&&dt(se)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,Ft,At,se.width,se.height):dt(se)?h.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Ft,At,se.width,se.height):s.renderbufferStorage(s.RENDERBUFFER,At,se.width,se.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Ke(_e,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(s.FRAMEBUFFER,_e),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Le=i.get(se.depthTexture);Le.__renderTarget=se,(!Le.__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),ee(se.depthTexture,0);const Xe=Le.__webglTexture,Ve=Ie(se);if(se.depthTexture.format===zy)dt(se)?h.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Xe,0,Ve):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Xe,0);else if(se.depthTexture.format===Vy)dt(se)?h.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Xe,0,Ve):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Xe,0);else throw new Error("Unknown depthTexture format")}function Ht(_e){const se=i.get(_e),$e=_e.isWebGLCubeRenderTarget===!0;if(se.__boundDepthTexture!==_e.depthTexture){const Le=_e.depthTexture;if(se.__depthDisposeCallback&&se.__depthDisposeCallback(),Le){const Xe=()=>{delete se.__boundDepthTexture,delete se.__depthDisposeCallback,Le.removeEventListener("dispose",Xe)};Le.addEventListener("dispose",Xe),se.__depthDisposeCallback=Xe}se.__boundDepthTexture=Le}if(_e.depthTexture&&!se.__autoAllocateDepthBuffer){if($e)throw new Error("target.depthTexture not supported in Cube render targets");const Le=_e.texture.mipmaps;Le&&Le.length>0?Ke(se.__webglFramebuffer[0],_e):Ke(se.__webglFramebuffer,_e)}else if($e){se.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)if(n.bindFramebuffer(s.FRAMEBUFFER,se.__webglFramebuffer[Le]),se.__webglDepthbuffer[Le]===void 0)se.__webglDepthbuffer[Le]=s.createRenderbuffer(),Ut(se.__webglDepthbuffer[Le],_e,!1);else{const Xe=_e.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ve=se.__webglDepthbuffer[Le];s.bindRenderbuffer(s.RENDERBUFFER,Ve),s.framebufferRenderbuffer(s.FRAMEBUFFER,Xe,s.RENDERBUFFER,Ve)}}else{const Le=_e.texture.mipmaps;if(Le&&Le.length>0?n.bindFramebuffer(s.FRAMEBUFFER,se.__webglFramebuffer[0]):n.bindFramebuffer(s.FRAMEBUFFER,se.__webglFramebuffer),se.__webglDepthbuffer===void 0)se.__webglDepthbuffer=s.createRenderbuffer(),Ut(se.__webglDepthbuffer,_e,!1);else{const Xe=_e.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ve=se.__webglDepthbuffer;s.bindRenderbuffer(s.RENDERBUFFER,Ve),s.framebufferRenderbuffer(s.FRAMEBUFFER,Xe,s.RENDERBUFFER,Ve)}}n.bindFramebuffer(s.FRAMEBUFFER,null)}function Re(_e,se,$e){const Le=i.get(_e);se!==void 0&&ft(Le.__webglFramebuffer,_e,_e.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),$e!==void 0&&Ht(_e)}function Ye(_e){const se=_e.texture,$e=i.get(_e),Le=i.get(se);_e.addEventListener("dispose",V);const Xe=_e.textures,Ve=_e.isWebGLCubeRenderTarget===!0,yt=Xe.length>1;if(yt||(Le.__webglTexture===void 0&&(Le.__webglTexture=s.createTexture()),Le.__version=se.version,l.memory.textures++),Ve){$e.__webglFramebuffer=[];for(let bt=0;bt<6;bt++)if(se.mipmaps&&se.mipmaps.length>0){$e.__webglFramebuffer[bt]=[];for(let At=0;At<se.mipmaps.length;At++)$e.__webglFramebuffer[bt][At]=s.createFramebuffer()}else $e.__webglFramebuffer[bt]=s.createFramebuffer()}else{if(se.mipmaps&&se.mipmaps.length>0){$e.__webglFramebuffer=[];for(let bt=0;bt<se.mipmaps.length;bt++)$e.__webglFramebuffer[bt]=s.createFramebuffer()}else $e.__webglFramebuffer=s.createFramebuffer();if(yt)for(let bt=0,At=Xe.length;bt<At;bt++){const Ft=i.get(Xe[bt]);Ft.__webglTexture===void 0&&(Ft.__webglTexture=s.createTexture(),l.memory.textures++)}if(_e.samples>0&&dt(_e)===!1){$e.__webglMultisampledFramebuffer=s.createFramebuffer(),$e.__webglColorRenderbuffer=[],n.bindFramebuffer(s.FRAMEBUFFER,$e.__webglMultisampledFramebuffer);for(let bt=0;bt<Xe.length;bt++){const At=Xe[bt];$e.__webglColorRenderbuffer[bt]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,$e.__webglColorRenderbuffer[bt]);const Ft=a.convert(At.format,At.colorSpace),H=a.convert(At.type),oe=I(At.internalFormat,Ft,H,At.colorSpace,_e.isXRRenderTarget===!0),ve=Ie(_e);s.renderbufferStorageMultisample(s.RENDERBUFFER,ve,oe,_e.width,_e.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+bt,s.RENDERBUFFER,$e.__webglColorRenderbuffer[bt])}s.bindRenderbuffer(s.RENDERBUFFER,null),_e.depthBuffer&&($e.__webglDepthRenderbuffer=s.createRenderbuffer(),Ut($e.__webglDepthRenderbuffer,_e,!0)),n.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Ve){n.bindTexture(s.TEXTURE_CUBE_MAP,Le.__webglTexture),Ne(s.TEXTURE_CUBE_MAP,se);for(let bt=0;bt<6;bt++)if(se.mipmaps&&se.mipmaps.length>0)for(let At=0;At<se.mipmaps.length;At++)ft($e.__webglFramebuffer[bt][At],_e,se,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+bt,At);else ft($e.__webglFramebuffer[bt],_e,se,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+bt,0);C(se)&&E(s.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(yt){for(let bt=0,At=Xe.length;bt<At;bt++){const Ft=Xe[bt],H=i.get(Ft);n.bindTexture(s.TEXTURE_2D,H.__webglTexture),Ne(s.TEXTURE_2D,Ft),ft($e.__webglFramebuffer,_e,Ft,s.COLOR_ATTACHMENT0+bt,s.TEXTURE_2D,0),C(Ft)&&E(s.TEXTURE_2D)}n.unbindTexture()}else{let bt=s.TEXTURE_2D;if((_e.isWebGL3DRenderTarget||_e.isWebGLArrayRenderTarget)&&(bt=_e.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),n.bindTexture(bt,Le.__webglTexture),Ne(bt,se),se.mipmaps&&se.mipmaps.length>0)for(let At=0;At<se.mipmaps.length;At++)ft($e.__webglFramebuffer[At],_e,se,s.COLOR_ATTACHMENT0,bt,At);else ft($e.__webglFramebuffer,_e,se,s.COLOR_ATTACHMENT0,bt,0);C(se)&&E(bt),n.unbindTexture()}_e.depthBuffer&&Ht(_e)}function J(_e){const se=_e.textures;for(let $e=0,Le=se.length;$e<Le;$e++){const Xe=se[$e];if(C(Xe)){const Ve=w(_e),yt=i.get(Xe).__webglTexture;n.bindTexture(Ve,yt),E(Ve),n.unbindTexture()}}}const Se=[],Ae=[];function we(_e){if(_e.samples>0){if(dt(_e)===!1){const se=_e.textures,$e=_e.width,Le=_e.height;let Xe=s.COLOR_BUFFER_BIT;const Ve=_e.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,yt=i.get(_e),bt=se.length>1;if(bt)for(let Ft=0;Ft<se.length;Ft++)n.bindFramebuffer(s.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Ft,s.RENDERBUFFER,null),n.bindFramebuffer(s.FRAMEBUFFER,yt.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Ft,s.TEXTURE_2D,null,0);n.bindFramebuffer(s.READ_FRAMEBUFFER,yt.__webglMultisampledFramebuffer);const At=_e.texture.mipmaps;At&&At.length>0?n.bindFramebuffer(s.DRAW_FRAMEBUFFER,yt.__webglFramebuffer[0]):n.bindFramebuffer(s.DRAW_FRAMEBUFFER,yt.__webglFramebuffer);for(let Ft=0;Ft<se.length;Ft++){if(_e.resolveDepthBuffer&&(_e.depthBuffer&&(Xe|=s.DEPTH_BUFFER_BIT),_e.stencilBuffer&&_e.resolveStencilBuffer&&(Xe|=s.STENCIL_BUFFER_BIT)),bt){s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,yt.__webglColorRenderbuffer[Ft]);const H=i.get(se[Ft]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,H,0)}s.blitFramebuffer(0,0,$e,Le,0,0,$e,Le,Xe,s.NEAREST),f===!0&&(Se.length=0,Ae.length=0,Se.push(s.COLOR_ATTACHMENT0+Ft),_e.depthBuffer&&_e.resolveDepthBuffer===!1&&(Se.push(Ve),Ae.push(Ve),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,Ae)),s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Se))}if(n.bindFramebuffer(s.READ_FRAMEBUFFER,null),n.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),bt)for(let Ft=0;Ft<se.length;Ft++){n.bindFramebuffer(s.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Ft,s.RENDERBUFFER,yt.__webglColorRenderbuffer[Ft]);const H=i.get(se[Ft]).__webglTexture;n.bindFramebuffer(s.FRAMEBUFFER,yt.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Ft,s.TEXTURE_2D,H,0)}n.bindFramebuffer(s.DRAW_FRAMEBUFFER,yt.__webglMultisampledFramebuffer)}else if(_e.depthBuffer&&_e.resolveDepthBuffer===!1&&f){const se=_e.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[se])}}}function Ie(_e){return Math.min(r.maxSamples,_e.samples)}function dt(_e){const se=i.get(_e);return _e.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function Qe(_e){const se=l.render.frame;v.get(_e)!==se&&(v.set(_e,se),_e.update())}function vt(_e,se){const $e=_e.colorSpace,Le=_e.format,Xe=_e.type;return _e.isCompressedTexture===!0||_e.isVideoTexture===!0||$e!==sf&&$e!==X0&&(Yi.getTransfer($e)===Ls?(Le!==ho||Xe!==fu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",$e)),se}function et(_e){return typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement?(p.width=_e.naturalWidth||_e.width,p.height=_e.naturalHeight||_e.height):typeof VideoFrame<"u"&&_e instanceof VideoFrame?(p.width=_e.displayWidth,p.height=_e.displayHeight):(p.width=_e.width,p.height=_e.height),p}this.allocateTextureUnit=j,this.resetTextureUnits=Y,this.setTexture2D=ee,this.setTexture2DArray=z,this.setTexture3D=te,this.setTextureCube=ce,this.rebindTextures=Re,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=J,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=Ht,this.setupFrameBufferTexture=ft,this.useMultisampledRTT=dt}function GG(s,e){function n(i,r=X0){let a;const l=Yi.getTransfer(r);if(i===fu)return s.UNSIGNED_BYTE;if(i===QC)return s.UNSIGNED_SHORT_4_4_4_4;if(i===eM)return s.UNSIGNED_SHORT_5_5_5_1;if(i===t2)return s.UNSIGNED_INT_5_9_9_9_REV;if(i===JC)return s.BYTE;if(i===ZC)return s.SHORT;if(i===Hy)return s.UNSIGNED_SHORT;if(i===BS)return s.INT;if(i===xp)return s.UNSIGNED_INT;if(i===Rr)return s.FLOAT;if(i===ea)return s.HALF_FLOAT;if(i===n2)return s.ALPHA;if(i===i2)return s.RGB;if(i===ho)return s.RGBA;if(i===zy)return s.DEPTH_COMPONENT;if(i===Vy)return s.DEPTH_STENCIL;if(i===kS)return s.RED;if(i===PS)return s.RED_INTEGER;if(i===s2)return s.RG;if(i===tM)return s.RG_INTEGER;if(i===nM)return s.RGBA_INTEGER;if(i===PE||i===UE||i===FE||i===HE)if(l===Ls)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===PE)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===UE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===FE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===HE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===PE)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===UE)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===FE)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===HE)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Ux||i===Fx||i===Hx||i===Gx)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===Ux)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Fx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Hx)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Gx)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===zx||i===Vx||i===Wx)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===zx||i===Vx)return l===Ls?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===Wx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Xx||i===jx||i===Yx||i===Kx||i===qx||i===Jx||i===Zx||i===Qx||i===eC||i===tC||i===nC||i===iC||i===sC||i===rC)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Xx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===jx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Yx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Kx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===qx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Jx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Zx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Qx)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===eC)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===tC)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===nC)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===iC)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===sC)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===rC)return l===Ls?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===GE||i===oC||i===aC)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===GE)return l===Ls?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===oC)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===aC)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===r2||i===lC||i===uC||i===cC)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===GE)return a.COMPRESSED_RED_RGTC1_EXT;if(i===lC)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===uC)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===cC)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Gy?s.UNSIGNED_INT_24_8:s[i]!==void 0?s[i]:null}return{convert:n}}const lq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,uq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const r=new Ms,a=e.properties.get(r);a.__webglTexture=n.texture,(n.depthNear!==i.depthNear||n.depthFar!==i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new pu({vertexShader:lq,fragmentShader:uq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new _r(new jg(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class hq extends Rp{constructor(e,n){super();const i=this;let r=null,a=1,l=null,h="local-floor",f=1,p=null,v=null,T=null,y=null,S=null,$=null;const M=new cq,C=n.getContextAttributes();let E=null,w=null;const I=[],O=[],P=new It;let F=null;const V=new io;V.viewport=new Ei;const X=new io;X.viewport=new Ei;const G=[V,X],D=new IG;let Z=null,Y=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ee){let We=I[Ee];return We===void 0&&(We=new rx,I[Ee]=We),We.getTargetRaySpace()},this.getControllerGrip=function(Ee){let We=I[Ee];return We===void 0&&(We=new rx,I[Ee]=We),We.getGripSpace()},this.getHand=function(Ee){let We=I[Ee];return We===void 0&&(We=new rx,I[Ee]=We),We.getHandSpace()};function j(Ee){const We=O.indexOf(Ee.inputSource);if(We===-1)return;const Fe=I[We];Fe!==void 0&&(Fe.update(Ee.inputSource,Ee.frame,p||l),Fe.dispatchEvent({type:Ee.type,data:Ee.inputSource}))}function ne(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",ne),r.removeEventListener("inputsourceschange",ee);for(let Ee=0;Ee<I.length;Ee++){const We=O[Ee];We!==null&&(O[Ee]=null,I[Ee].disconnect(We))}Z=null,Y=null,M.reset(),e.setRenderTarget(E),S=null,y=null,T=null,r=null,w=null,Pe.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ee){a=Ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ee){h=Ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(Ee){p=Ee},this.getBaseLayer=function(){return y!==null?y:S},this.getBinding=function(){return T},this.getFrame=function(){return $},this.getSession=function(){return r},this.setSession=async function(Ee){if(r=Ee,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",ne),r.addEventListener("inputsourceschange",ee),C.xrCompatible!==!0&&await n.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Fe=null,gt=null,ft=null;C.depth&&(ft=C.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Fe=C.stencil?Vy:zy,gt=C.stencil?Gy:xp);const Ut={colorFormat:n.RGBA8,depthFormat:ft,scaleFactor:a};T=new XRWebGLBinding(r,n),y=T.createProjectionLayer(Ut),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),w=new Gc(y.textureWidth,y.textureHeight,{format:ho,type:fu,depthTexture:new fM(y.textureWidth,y.textureHeight,gt,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Fe={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:a};S=new XRWebGLLayer(r,n,Fe),r.updateRenderState({baseLayer:S}),e.setPixelRatio(1),e.setSize(S.framebufferWidth,S.framebufferHeight,!1),w=new Gc(S.framebufferWidth,S.framebufferHeight,{format:ho,type:fu,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(f),p=null,l=await r.requestReferenceSpace(h),Pe.setContext(r),Pe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function ee(Ee){for(let We=0;We<Ee.removed.length;We++){const Fe=Ee.removed[We],gt=O.indexOf(Fe);gt>=0&&(O[gt]=null,I[gt].disconnect(Fe))}for(let We=0;We<Ee.added.length;We++){const Fe=Ee.added[We];let gt=O.indexOf(Fe);if(gt===-1){for(let Ut=0;Ut<I.length;Ut++)if(Ut>=O.length){O.push(Fe),gt=Ut;break}else if(O[Ut]===null){O[Ut]=Fe,gt=Ut;break}if(gt===-1)break}const ft=I[gt];ft&&ft.connect(Fe)}}const z=new be,te=new be;function ce(Ee,We,Fe){z.setFromMatrixPosition(We.matrixWorld),te.setFromMatrixPosition(Fe.matrixWorld);const gt=z.distanceTo(te),ft=We.projectionMatrix.elements,Ut=Fe.projectionMatrix.elements,Ke=ft[14]/(ft[10]-1),Ht=ft[14]/(ft[10]+1),Re=(ft[9]+1)/ft[5],Ye=(ft[9]-1)/ft[5],J=(ft[8]-1)/ft[0],Se=(Ut[8]+1)/Ut[0],Ae=Ke*J,we=Ke*Se,Ie=gt/(-J+Se),dt=Ie*-J;if(We.matrixWorld.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.translateX(dt),Ee.translateZ(Ie),Ee.matrixWorld.compose(Ee.position,Ee.quaternion,Ee.scale),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert(),ft[10]===-1)Ee.projectionMatrix.copy(We.projectionMatrix),Ee.projectionMatrixInverse.copy(We.projectionMatrixInverse);else{const Qe=Ke+Ie,vt=Ht+Ie,et=Ae-dt,_e=we+(gt-dt),se=Re*Ht/vt*Qe,$e=Ye*Ht/vt*Qe;Ee.projectionMatrix.makePerspective(et,_e,se,$e,Qe,vt),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert()}}function pe(Ee,We){We===null?Ee.matrixWorld.copy(Ee.matrix):Ee.matrixWorld.multiplyMatrices(We.matrixWorld,Ee.matrix),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert()}this.updateCamera=function(Ee){if(r===null)return;let We=Ee.near,Fe=Ee.far;M.texture!==null&&(M.depthNear>0&&(We=M.depthNear),M.depthFar>0&&(Fe=M.depthFar)),D.near=X.near=V.near=We,D.far=X.far=V.far=Fe,(Z!==D.near||Y!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),Z=D.near,Y=D.far),V.layers.mask=Ee.layers.mask|2,X.layers.mask=Ee.layers.mask|4,D.layers.mask=V.layers.mask|X.layers.mask;const gt=Ee.parent,ft=D.cameras;pe(D,gt);for(let Ut=0;Ut<ft.length;Ut++)pe(ft[Ut],gt);ft.length===2?ce(D,V,X):D.projectionMatrix.copy(V.projectionMatrix),K(Ee,D,gt)};function K(Ee,We,Fe){Fe===null?Ee.matrix.copy(We.matrixWorld):(Ee.matrix.copy(Fe.matrixWorld),Ee.matrix.invert(),Ee.matrix.multiply(We.matrixWorld)),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.updateMatrixWorld(!0),Ee.projectionMatrix.copy(We.projectionMatrix),Ee.projectionMatrixInverse.copy(We.projectionMatrixInverse),Ee.isPerspectiveCamera&&(Ee.fov=jy*2*Math.atan(1/Ee.projectionMatrix.elements[5]),Ee.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(y===null&&S===null))return f},this.setFoveation=function(Ee){f=Ee,y!==null&&(y.fixedFoveation=Ee),S!==null&&S.fixedFoveation!==void 0&&(S.fixedFoveation=Ee)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(D)};let fe=null;function Ne(Ee,We){if(v=We.getViewerPose(p||l),$=We,v!==null){const Fe=v.views;S!==null&&(e.setRenderTargetFramebuffer(w,S.framebuffer),e.setRenderTarget(w));let gt=!1;Fe.length!==D.cameras.length&&(D.cameras.length=0,gt=!0);for(let Ke=0;Ke<Fe.length;Ke++){const Ht=Fe[Ke];let Re=null;if(S!==null)Re=S.getViewport(Ht);else{const J=T.getViewSubImage(y,Ht);Re=J.viewport,Ke===0&&(e.setRenderTargetTextures(w,J.colorTexture,J.depthStencilTexture),e.setRenderTarget(w))}let Ye=G[Ke];Ye===void 0&&(Ye=new io,Ye.layers.enable(Ke),Ye.viewport=new Ei,G[Ke]=Ye),Ye.matrix.fromArray(Ht.transform.matrix),Ye.matrix.decompose(Ye.position,Ye.quaternion,Ye.scale),Ye.projectionMatrix.fromArray(Ht.projectionMatrix),Ye.projectionMatrixInverse.copy(Ye.projectionMatrix).invert(),Ye.viewport.set(Re.x,Re.y,Re.width,Re.height),Ke===0&&(D.matrix.copy(Ye.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),gt===!0&&D.cameras.push(Ye)}const ft=r.enabledFeatures;if(ft&&ft.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&T){const Ke=T.getDepthInformation(Fe[0]);Ke&&Ke.isValid&&Ke.texture&&M.init(e,Ke,r.renderState)}}for(let Fe=0;Fe<I.length;Fe++){const gt=O[Fe],ft=I[Fe];gt!==null&&ft!==void 0&&ft.update(gt,We,p||l)}fe&&fe(Ee,We),We.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:We}),$=null}const Pe=new kG;Pe.setAnimationLoop(Ne),this.setAnimationLoop=function(Ee){fe=Ee},this.dispose=function(){}}}const pv=new zc,dq=new Fn;function fq(s,e){function n(C,E){C.matrixAutoUpdate===!0&&C.updateMatrix(),E.value.copy(C.matrix)}function i(C,E){E.color.getRGB(C.fogColor.value,VH(s)),E.isFog?(C.fogNear.value=E.near,C.fogFar.value=E.far):E.isFogExp2&&(C.fogDensity.value=E.density)}function r(C,E,w,I,O){E.isMeshBasicMaterial||E.isMeshLambertMaterial?a(C,E):E.isMeshToonMaterial?(a(C,E),T(C,E)):E.isMeshPhongMaterial?(a(C,E),v(C,E)):E.isMeshStandardMaterial?(a(C,E),y(C,E),E.isMeshPhysicalMaterial&&S(C,E,O)):E.isMeshMatcapMaterial?(a(C,E),$(C,E)):E.isMeshDepthMaterial?a(C,E):E.isMeshDistanceMaterial?(a(C,E),M(C,E)):E.isMeshNormalMaterial?a(C,E):E.isLineBasicMaterial?(l(C,E),E.isLineDashedMaterial&&h(C,E)):E.isPointsMaterial?f(C,E,w,I):E.isSpriteMaterial?p(C,E):E.isShadowMaterial?(C.color.value.copy(E.color),C.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function a(C,E){C.opacity.value=E.opacity,E.color&&C.diffuse.value.copy(E.color),E.emissive&&C.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(C.map.value=E.map,n(E.map,C.mapTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,n(E.alphaMap,C.alphaMapTransform)),E.bumpMap&&(C.bumpMap.value=E.bumpMap,n(E.bumpMap,C.bumpMapTransform),C.bumpScale.value=E.bumpScale,E.side===hu&&(C.bumpScale.value*=-1)),E.normalMap&&(C.normalMap.value=E.normalMap,n(E.normalMap,C.normalMapTransform),C.normalScale.value.copy(E.normalScale),E.side===hu&&C.normalScale.value.negate()),E.displacementMap&&(C.displacementMap.value=E.displacementMap,n(E.displacementMap,C.displacementMapTransform),C.displacementScale.value=E.displacementScale,C.displacementBias.value=E.displacementBias),E.emissiveMap&&(C.emissiveMap.value=E.emissiveMap,n(E.emissiveMap,C.emissiveMapTransform)),E.specularMap&&(C.specularMap.value=E.specularMap,n(E.specularMap,C.specularMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest);const w=e.get(E),I=w.envMap,O=w.envMapRotation;I&&(C.envMap.value=I,pv.copy(O),pv.x*=-1,pv.y*=-1,pv.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(pv.y*=-1,pv.z*=-1),C.envMapRotation.value.setFromMatrix4(dq.makeRotationFromEuler(pv)),C.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=E.reflectivity,C.ior.value=E.ior,C.refractionRatio.value=E.refractionRatio),E.lightMap&&(C.lightMap.value=E.lightMap,C.lightMapIntensity.value=E.lightMapIntensity,n(E.lightMap,C.lightMapTransform)),E.aoMap&&(C.aoMap.value=E.aoMap,C.aoMapIntensity.value=E.aoMapIntensity,n(E.aoMap,C.aoMapTransform))}function l(C,E){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,E.map&&(C.map.value=E.map,n(E.map,C.mapTransform))}function h(C,E){C.dashSize.value=E.dashSize,C.totalSize.value=E.dashSize+E.gapSize,C.scale.value=E.scale}function f(C,E,w,I){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,C.size.value=E.size*w,C.scale.value=I*.5,E.map&&(C.map.value=E.map,n(E.map,C.uvTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,n(E.alphaMap,C.alphaMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest)}function p(C,E){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,C.rotation.value=E.rotation,E.map&&(C.map.value=E.map,n(E.map,C.mapTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,n(E.alphaMap,C.alphaMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest)}function v(C,E){C.specular.value.copy(E.specular),C.shininess.value=Math.max(E.shininess,1e-4)}function T(C,E){E.gradientMap&&(C.gradientMap.value=E.gradientMap)}function y(C,E){C.metalness.value=E.metalness,E.metalnessMap&&(C.metalnessMap.value=E.metalnessMap,n(E.metalnessMap,C.metalnessMapTransform)),C.roughness.value=E.roughness,E.roughnessMap&&(C.roughnessMap.value=E.roughnessMap,n(E.roughnessMap,C.roughnessMapTransform)),E.envMap&&(C.envMapIntensity.value=E.envMapIntensity)}function S(C,E,w){C.ior.value=E.ior,E.sheen>0&&(C.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),C.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(C.sheenColorMap.value=E.sheenColorMap,n(E.sheenColorMap,C.sheenColorMapTransform)),E.sheenRoughnessMap&&(C.sheenRoughnessMap.value=E.sheenRoughnessMap,n(E.sheenRoughnessMap,C.sheenRoughnessMapTransform))),E.clearcoat>0&&(C.clearcoat.value=E.clearcoat,C.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(C.clearcoatMap.value=E.clearcoatMap,n(E.clearcoatMap,C.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,n(E.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(C.clearcoatNormalMap.value=E.clearcoatNormalMap,n(E.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===hu&&C.clearcoatNormalScale.value.negate())),E.dispersion>0&&(C.dispersion.value=E.dispersion),E.iridescence>0&&(C.iridescence.value=E.iridescence,C.iridescenceIOR.value=E.iridescenceIOR,C.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(C.iridescenceMap.value=E.iridescenceMap,n(E.iridescenceMap,C.iridescenceMapTransform)),E.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=E.iridescenceThicknessMap,n(E.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),E.transmission>0&&(C.transmission.value=E.transmission,C.transmissionSamplerMap.value=w.texture,C.transmissionSamplerSize.value.set(w.width,w.height),E.transmissionMap&&(C.transmissionMap.value=E.transmissionMap,n(E.transmissionMap,C.transmissionMapTransform)),C.thickness.value=E.thickness,E.thicknessMap&&(C.thicknessMap.value=E.thicknessMap,n(E.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=E.attenuationDistance,C.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(C.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(C.anisotropyMap.value=E.anisotropyMap,n(E.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=E.specularIntensity,C.specularColor.value.copy(E.specularColor),E.specularColorMap&&(C.specularColorMap.value=E.specularColorMap,n(E.specularColorMap,C.specularColorMapTransform)),E.specularIntensityMap&&(C.specularIntensityMap.value=E.specularIntensityMap,n(E.specularIntensityMap,C.specularIntensityMapTransform))}function $(C,E){E.matcap&&(C.matcap.value=E.matcap)}function M(C,E){const w=e.get(E).light;C.referencePosition.value.setFromMatrixPosition(w.matrixWorld),C.nearDistance.value=w.shadow.camera.near,C.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function pq(s,e,n,i){let r={},a={},l=[];const h=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);function f(w,I){const O=I.program;i.uniformBlockBinding(w,O)}function p(w,I){let O=r[w.id];O===void 0&&($(w),O=v(w),r[w.id]=O,w.addEventListener("dispose",C));const P=I.program;i.updateUBOMapping(w,P);const F=e.render.frame;a[w.id]!==F&&(y(w),a[w.id]=F)}function v(w){const I=T();w.__bindingPointIndex=I;const O=s.createBuffer(),P=w.__size,F=w.usage;return s.bindBuffer(s.UNIFORM_BUFFER,O),s.bufferData(s.UNIFORM_BUFFER,P,F),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,I,O),O}function T(){for(let w=0;w<h;w++)if(l.indexOf(w)===-1)return l.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(w){const I=r[w.id],O=w.uniforms,P=w.__cache;s.bindBuffer(s.UNIFORM_BUFFER,I);for(let F=0,V=O.length;F<V;F++){const X=Array.isArray(O[F])?O[F]:[O[F]];for(let G=0,D=X.length;G<D;G++){const Z=X[G];if(S(Z,F,G,P)===!0){const Y=Z.__offset,j=Array.isArray(Z.value)?Z.value:[Z.value];let ne=0;for(let ee=0;ee<j.length;ee++){const z=j[ee],te=M(z);typeof z=="number"||typeof z=="boolean"?(Z.__data[0]=z,s.bufferSubData(s.UNIFORM_BUFFER,Y+ne,Z.__data)):z.isMatrix3?(Z.__data[0]=z.elements[0],Z.__data[1]=z.elements[1],Z.__data[2]=z.elements[2],Z.__data[3]=0,Z.__data[4]=z.elements[3],Z.__data[5]=z.elements[4],Z.__data[6]=z.elements[5],Z.__data[7]=0,Z.__data[8]=z.elements[6],Z.__data[9]=z.elements[7],Z.__data[10]=z.elements[8],Z.__data[11]=0):(z.toArray(Z.__data,ne),ne+=te.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,Y,Z.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function S(w,I,O,P){const F=w.value,V=I+"_"+O;if(P[V]===void 0)return typeof F=="number"||typeof F=="boolean"?P[V]=F:P[V]=F.clone(),!0;{const X=P[V];if(typeof F=="number"||typeof F=="boolean"){if(X!==F)return P[V]=F,!0}else if(X.equals(F)===!1)return X.copy(F),!0}return!1}function $(w){const I=w.uniforms;let O=0;const P=16;for(let V=0,X=I.length;V<X;V++){const G=Array.isArray(I[V])?I[V]:[I[V]];for(let D=0,Z=G.length;D<Z;D++){const Y=G[D],j=Array.isArray(Y.value)?Y.value:[Y.value];for(let ne=0,ee=j.length;ne<ee;ne++){const z=j[ne],te=M(z),ce=O%P,pe=ce%te.boundary,K=ce+pe;O+=pe,K!==0&&P-K<te.storage&&(O+=P-K),Y.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=O,O+=te.storage}}}const F=O%P;return F>0&&(O+=P-F),w.__size=O,w.__cache={},this}function M(w){const I={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(I.boundary=4,I.storage=4):w.isVector2?(I.boundary=8,I.storage=8):w.isVector3||w.isColor?(I.boundary=16,I.storage=12):w.isVector4?(I.boundary=16,I.storage=16):w.isMatrix3?(I.boundary=48,I.storage=48):w.isMatrix4?(I.boundary=64,I.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),I}function C(w){const I=w.target;I.removeEventListener("dispose",C);const O=l.indexOf(I.__bindingPointIndex);l.splice(O,1),s.deleteBuffer(r[I.id]),delete r[I.id],delete a[I.id]}function E(){for(const w in r)s.deleteBuffer(r[w]);l=[],r={},a={}}return{bind:f,update:p,dispose:E}}class X2{constructor(e={}){const{canvas:n=HH(),context:i=null,depth:r=!0,stencil:a=!1,alpha:l=!1,antialias:h=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:p=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:T=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let S;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=i.getContextAttributes().alpha}else S=l;const $=new Uint32Array(4),M=new Int32Array(4);let C=null,E=null;const w=[],I=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=yp,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let P=!1;this._outputColorSpace=Wa;let F=0,V=0,X=null,G=-1,D=null;const Z=new Ei,Y=new Ei;let j=null;const ne=new on(0);let ee=0,z=n.width,te=n.height,ce=1,pe=null,K=null;const fe=new Ei(0,0,z,te),Ne=new Ei(0,0,z,te);let Pe=!1;const Ee=new gT;let We=!1,Fe=!1;const gt=new Fn,ft=new Fn,Ut=new be,Ke=new Ei,Ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Re=!1;function Ye(){return X===null?ce:1}let J=i;function Se(le,Te){return n.getContext(le,Te)}try{const le={alpha:!0,depth:r,stencil:a,antialias:h,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:v,failIfMajorPerformanceCaveat:T};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${LS}`),n.addEventListener("webglcontextlost",Pt,!1),n.addEventListener("webglcontextrestored",Mt,!1),n.addEventListener("webglcontextcreationerror",xt,!1),J===null){const Te="webgl2";if(J=Se(Te,le),J===null)throw Se(Te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let Ae,we,Ie,dt,Qe,vt,et,_e,se,$e,Le,Xe,Ve,yt,bt,At,Ft,H,oe,ve,re,ye,lt,Me;function Ze(){Ae=new xY(J),Ae.init(),ye=new GG(J,Ae),we=new bY(J,Ae,e,ye),Ie=new oq(J,Ae),we.reverseDepthBuffer&&y&&Ie.buffers.depth.setReversed(!0),dt=new RY(J),Qe=new jK,vt=new aq(J,Ae,Ie,Qe,we,ye,dt),et=new TY(O),_e=new $Y(O),se=new D7(J),lt=new _Y(J,se),$e=new CY(J,se,dt,lt),Le=new IY(J,$e,se,dt),oe=new wY(J,we,vt),At=new yY(Qe),Xe=new XK(O,et,_e,Ae,we,lt,At),Ve=new fq(O,Qe),yt=new KK,bt=new tq(Ae),H=new gY(O,et,_e,Ie,Le,S,f),Ft=new sq(O,Le,we),Me=new pq(J,dt,we,Ie),ve=new vY(J,Ae,dt),re=new MY(J,Ae,dt),dt.programs=Xe.programs,O.capabilities=we,O.extensions=Ae,O.properties=Qe,O.renderLists=yt,O.shadowMap=Ft,O.state=Ie,O.info=dt}Ze();const $t=new hq(O,J);this.xr=$t,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const le=Ae.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=Ae.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(le){le!==void 0&&(ce=le,this.setSize(z,te,!1))},this.getSize=function(le){return le.set(z,te)},this.setSize=function(le,Te,De=!0){if($t.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=le,te=Te,n.width=Math.floor(le*ce),n.height=Math.floor(Te*ce),De===!0&&(n.style.width=le+"px",n.style.height=Te+"px"),this.setViewport(0,0,le,Te)},this.getDrawingBufferSize=function(le){return le.set(z*ce,te*ce).floor()},this.setDrawingBufferSize=function(le,Te,De){z=le,te=Te,ce=De,n.width=Math.floor(le*De),n.height=Math.floor(Te*De),this.setViewport(0,0,le,Te)},this.getCurrentViewport=function(le){return le.copy(Z)},this.getViewport=function(le){return le.copy(fe)},this.setViewport=function(le,Te,De,ke){le.isVector4?fe.set(le.x,le.y,le.z,le.w):fe.set(le,Te,De,ke),Ie.viewport(Z.copy(fe).multiplyScalar(ce).round())},this.getScissor=function(le){return le.copy(Ne)},this.setScissor=function(le,Te,De,ke){le.isVector4?Ne.set(le.x,le.y,le.z,le.w):Ne.set(le,Te,De,ke),Ie.scissor(Y.copy(Ne).multiplyScalar(ce).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(le){Ie.setScissorTest(Pe=le)},this.setOpaqueSort=function(le){pe=le},this.setTransparentSort=function(le){K=le},this.getClearColor=function(le){return le.copy(H.getClearColor())},this.setClearColor=function(){H.setClearColor(...arguments)},this.getClearAlpha=function(){return H.getClearAlpha()},this.setClearAlpha=function(){H.setClearAlpha(...arguments)},this.clear=function(le=!0,Te=!0,De=!0){let ke=0;if(le){let ze=!1;if(X!==null){const rt=X.texture.format;ze=rt===nM||rt===tM||rt===PS}if(ze){const rt=X.texture.type,Tt=rt===fu||rt===xp||rt===Hy||rt===Gy||rt===QC||rt===eM,Nt=H.getClearColor(),Bt=H.getClearAlpha(),qt=Nt.r,Kt=Nt.g,Jt=Nt.b;Tt?($[0]=qt,$[1]=Kt,$[2]=Jt,$[3]=Bt,J.clearBufferuiv(J.COLOR,0,$)):(M[0]=qt,M[1]=Kt,M[2]=Jt,M[3]=Bt,J.clearBufferiv(J.COLOR,0,M))}else ke|=J.COLOR_BUFFER_BIT}Te&&(ke|=J.DEPTH_BUFFER_BIT),De&&(ke|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Pt,!1),n.removeEventListener("webglcontextrestored",Mt,!1),n.removeEventListener("webglcontextcreationerror",xt,!1),H.dispose(),yt.dispose(),bt.dispose(),Qe.dispose(),et.dispose(),_e.dispose(),Le.dispose(),lt.dispose(),Me.dispose(),Xe.dispose(),$t.dispose(),$t.removeEventListener("sessionstart",Nn),$t.removeEventListener("sessionend",gn),zn.stop()};function Pt(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function Mt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const le=dt.autoReset,Te=Ft.enabled,De=Ft.autoUpdate,ke=Ft.needsUpdate,ze=Ft.type;Ze(),dt.autoReset=le,Ft.enabled=Te,Ft.autoUpdate=De,Ft.needsUpdate=ke,Ft.type=ze}function xt(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function Xt(le){const Te=le.target;Te.removeEventListener("dispose",Xt),Yt(Te)}function Yt(le){Wt(le),Qe.remove(le)}function Wt(le){const Te=Qe.get(le).programs;Te!==void 0&&(Te.forEach(function(De){Xe.releaseProgram(De)}),le.isShaderMaterial&&Xe.releaseShaderCache(le))}this.renderBufferDirect=function(le,Te,De,ke,ze,rt){Te===null&&(Te=Ht);const Tt=ze.isMesh&&ze.matrixWorld.determinant()<0,Nt=Ue(le,Te,De,ke,ze);Ie.setMaterial(ke,Tt);let Bt=De.index,qt=1;if(ke.wireframe===!0){if(Bt=$e.getWireframeAttribute(De),Bt===void 0)return;qt=2}const Kt=De.drawRange,Jt=De.attributes.position;let vn=Kt.start*qt,Tn=(Kt.start+Kt.count)*qt;rt!==null&&(vn=Math.max(vn,rt.start*qt),Tn=Math.min(Tn,(rt.start+rt.count)*qt)),Bt!==null?(vn=Math.max(vn,0),Tn=Math.min(Tn,Bt.count)):Jt!=null&&(vn=Math.max(vn,0),Tn=Math.min(Tn,Jt.count));const ei=Tn-vn;if(ei<0||ei===1/0)return;lt.setup(ze,ke,Nt,De,Bt);let ln,Dn=ve;if(Bt!==null&&(ln=se.get(Bt),Dn=re,Dn.setIndex(ln)),ze.isMesh)ke.wireframe===!0?(Ie.setLineWidth(ke.wireframeLinewidth*Ye()),Dn.setMode(J.LINES)):Dn.setMode(J.TRIANGLES);else if(ze.isLine){let fn=ke.linewidth;fn===void 0&&(fn=1),Ie.setLineWidth(fn*Ye()),ze.isLineSegments?Dn.setMode(J.LINES):ze.isLineLoop?Dn.setMode(J.LINE_LOOP):Dn.setMode(J.LINE_STRIP)}else ze.isPoints?Dn.setMode(J.POINTS):ze.isSprite&&Dn.setMode(J.TRIANGLES);if(ze.isBatchedMesh)if(ze._multiDrawInstances!==null)Ry("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Dn.renderMultiDrawInstances(ze._multiDrawStarts,ze._multiDrawCounts,ze._multiDrawCount,ze._multiDrawInstances);else if(Ae.get("WEBGL_multi_draw"))Dn.renderMultiDraw(ze._multiDrawStarts,ze._multiDrawCounts,ze._multiDrawCount);else{const fn=ze._multiDrawStarts,yi=ze._multiDrawCounts,Hn=ze._multiDrawCount,Mn=Bt?se.get(Bt).bytesPerElement:1,Xn=Qe.get(ke).currentProgram.getUniforms();for(let Rn=0;Rn<Hn;Rn++)Xn.setValue(J,"_gl_DrawID",Rn),Dn.render(fn[Rn]/Mn,yi[Rn])}else if(ze.isInstancedMesh)Dn.renderInstances(vn,ei,ze.count);else if(De.isInstancedBufferGeometry){const fn=De._maxInstanceCount!==void 0?De._maxInstanceCount:1/0,yi=Math.min(De.instanceCount,fn);Dn.renderInstances(vn,ei,yi)}else Dn.render(vn,ei)};function xn(le,Te,De){le.transparent===!0&&le.side===Rh&&le.forceSinglePass===!1?(le.side=hu,le.needsUpdate=!0,Ri(le,Te,De),le.side=Ap,le.needsUpdate=!0,Ri(le,Te,De),le.side=Rh):Ri(le,Te,De)}this.compile=function(le,Te,De=null){De===null&&(De=le),E=bt.get(De),E.init(Te),I.push(E),De.traverseVisible(function(ze){ze.isLight&&ze.layers.test(Te.layers)&&(E.pushLight(ze),ze.castShadow&&E.pushShadow(ze))}),le!==De&&le.traverseVisible(function(ze){ze.isLight&&ze.layers.test(Te.layers)&&(E.pushLight(ze),ze.castShadow&&E.pushShadow(ze))}),E.setupLights();const ke=new Set;return le.traverse(function(ze){if(!(ze.isMesh||ze.isPoints||ze.isLine||ze.isSprite))return;const rt=ze.material;if(rt)if(Array.isArray(rt))for(let Tt=0;Tt<rt.length;Tt++){const Nt=rt[Tt];xn(Nt,De,ze),ke.add(Nt)}else xn(rt,De,ze),ke.add(rt)}),E=I.pop(),ke},this.compileAsync=function(le,Te,De=null){const ke=this.compile(le,Te,De);return new Promise(ze=>{function rt(){if(ke.forEach(function(Tt){Qe.get(Tt).currentProgram.isReady()&&ke.delete(Tt)}),ke.size===0){ze(le);return}setTimeout(rt,10)}Ae.get("KHR_parallel_shader_compile")!==null?rt():setTimeout(rt,10)})};let jt=null;function Zt(le){jt&&jt(le)}function Nn(){zn.stop()}function gn(){zn.start()}const zn=new kG;zn.setAnimationLoop(Zt),typeof self<"u"&&zn.setContext(self),this.setAnimationLoop=function(le){jt=le,$t.setAnimationLoop(le),le===null?zn.stop():zn.start()},$t.addEventListener("sessionstart",Nn),$t.addEventListener("sessionend",gn),this.render=function(le,Te){if(Te!==void 0&&Te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Te.parent===null&&Te.matrixWorldAutoUpdate===!0&&Te.updateMatrixWorld(),$t.enabled===!0&&$t.isPresenting===!0&&($t.cameraAutoUpdate===!0&&$t.updateCamera(Te),Te=$t.getCamera()),le.isScene===!0&&le.onBeforeRender(O,le,Te,X),E=bt.get(le,I.length),E.init(Te),I.push(E),ft.multiplyMatrices(Te.projectionMatrix,Te.matrixWorldInverse),Ee.setFromProjectionMatrix(ft),Fe=this.localClippingEnabled,We=At.init(this.clippingPlanes,Fe),C=yt.get(le,w.length),C.init(),w.push(C),$t.enabled===!0&&$t.isPresenting===!0){const rt=O.xr.getDepthSensingMesh();rt!==null&&is(rt,Te,-1/0,O.sortObjects)}is(le,Te,0,O.sortObjects),C.finish(),O.sortObjects===!0&&C.sort(pe,K),Re=$t.enabled===!1||$t.isPresenting===!1||$t.hasDepthSensing()===!1,Re&&H.addToRenderList(C,le),this.info.render.frame++,We===!0&&At.beginShadows();const De=E.state.shadowsArray;Ft.render(De,le,Te),We===!0&&At.endShadows(),this.info.autoReset===!0&&this.info.reset();const ke=C.opaque,ze=C.transmissive;if(E.setupLights(),Te.isArrayCamera){const rt=Te.cameras;if(ze.length>0)for(let Tt=0,Nt=rt.length;Tt<Nt;Tt++){const Bt=rt[Tt];Rs(ke,ze,le,Bt)}Re&&H.render(le);for(let Tt=0,Nt=rt.length;Tt<Nt;Tt++){const Bt=rt[Tt];lr(C,le,Bt,Bt.viewport)}}else ze.length>0&&Rs(ke,ze,le,Te),Re&&H.render(le),lr(C,le,Te);X!==null&&V===0&&(vt.updateMultisampleRenderTarget(X),vt.updateRenderTargetMipmap(X)),le.isScene===!0&&le.onAfterRender(O,le,Te),lt.resetDefaultState(),G=-1,D=null,I.pop(),I.length>0?(E=I[I.length-1],We===!0&&At.setGlobalState(O.clippingPlanes,E.state.camera)):E=null,w.pop(),w.length>0?C=w[w.length-1]:C=null};function is(le,Te,De,ke){if(le.visible===!1)return;if(le.layers.test(Te.layers)){if(le.isGroup)De=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(Te);else if(le.isLight)E.pushLight(le),le.castShadow&&E.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||Ee.intersectsSprite(le)){ke&&Ke.setFromMatrixPosition(le.matrixWorld).applyMatrix4(ft);const Tt=Le.update(le),Nt=le.material;Nt.visible&&C.push(le,Tt,Nt,De,Ke.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(!le.frustumCulled||Ee.intersectsObject(le))){const Tt=Le.update(le),Nt=le.material;if(ke&&(le.boundingSphere!==void 0?(le.boundingSphere===null&&le.computeBoundingSphere(),Ke.copy(le.boundingSphere.center)):(Tt.boundingSphere===null&&Tt.computeBoundingSphere(),Ke.copy(Tt.boundingSphere.center)),Ke.applyMatrix4(le.matrixWorld).applyMatrix4(ft)),Array.isArray(Nt)){const Bt=Tt.groups;for(let qt=0,Kt=Bt.length;qt<Kt;qt++){const Jt=Bt[qt],vn=Nt[Jt.materialIndex];vn&&vn.visible&&C.push(le,Tt,vn,De,Ke.z,Jt)}}else Nt.visible&&C.push(le,Tt,Nt,De,Ke.z,null)}}const rt=le.children;for(let Tt=0,Nt=rt.length;Tt<Nt;Tt++)is(rt[Tt],Te,De,ke)}function lr(le,Te,De,ke){const ze=le.opaque,rt=le.transmissive,Tt=le.transparent;E.setupLightsView(De),We===!0&&At.setGlobalState(O.clippingPlanes,De),ke&&Ie.viewport(Z.copy(ke)),ze.length>0&&Cn(ze,Te,De),rt.length>0&&Cn(rt,Te,De),Tt.length>0&&Cn(Tt,Te,De),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function Rs(le,Te,De,ke){if((De.isScene===!0?De.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[ke.id]===void 0&&(E.state.transmissionRenderTarget[ke.id]=new Gc(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")||Ae.has("EXT_color_buffer_float")?ea:fu,minFilter:Nh,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Yi.workingColorSpace}));const rt=E.state.transmissionRenderTarget[ke.id],Tt=ke.viewport||Z;rt.setSize(Tt.z*O.transmissionResolutionScale,Tt.w*O.transmissionResolutionScale);const Nt=O.getRenderTarget(),Bt=O.getActiveCubeFace(),qt=O.getActiveMipmapLevel();O.setRenderTarget(rt),O.getClearColor(ne),ee=O.getClearAlpha(),ee<1&&O.setClearColor(16777215,.5),O.clear(),Re&&H.render(De);const Kt=O.toneMapping;O.toneMapping=yp;const Jt=ke.viewport;if(ke.viewport!==void 0&&(ke.viewport=void 0),E.setupLightsView(ke),We===!0&&At.setGlobalState(O.clippingPlanes,ke),Cn(le,De,ke),vt.updateMultisampleRenderTarget(rt),vt.updateRenderTargetMipmap(rt),Ae.has("WEBGL_multisampled_render_to_texture")===!1){let vn=!1;for(let Tn=0,ei=Te.length;Tn<ei;Tn++){const ln=Te[Tn],Dn=ln.object,fn=ln.geometry,yi=ln.material,Hn=ln.group;if(yi.side===Rh&&Dn.layers.test(ke.layers)){const Mn=yi.side;yi.side=hu,yi.needsUpdate=!0,Ks(Dn,De,ke,fn,yi,Hn),yi.side=Mn,yi.needsUpdate=!0,vn=!0}}vn===!0&&(vt.updateMultisampleRenderTarget(rt),vt.updateRenderTargetMipmap(rt))}O.setRenderTarget(Nt,Bt,qt),O.setClearColor(ne,ee),Jt!==void 0&&(ke.viewport=Jt),O.toneMapping=Kt}function Cn(le,Te,De){const ke=Te.isScene===!0?Te.overrideMaterial:null;for(let ze=0,rt=le.length;ze<rt;ze++){const Tt=le[ze],Nt=Tt.object,Bt=Tt.geometry,qt=Tt.group;let Kt=Tt.material;Kt.allowOverride===!0&&ke!==null&&(Kt=ke),Nt.layers.test(De.layers)&&Ks(Nt,Te,De,Bt,Kt,qt)}}function Ks(le,Te,De,ke,ze,rt){le.onBeforeRender(O,Te,De,ke,ze,rt),le.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),ze.onBeforeRender(O,Te,De,ke,le,rt),ze.transparent===!0&&ze.side===Rh&&ze.forceSinglePass===!1?(ze.side=hu,ze.needsUpdate=!0,O.renderBufferDirect(De,Te,ke,ze,le,rt),ze.side=Ap,ze.needsUpdate=!0,O.renderBufferDirect(De,Te,ke,ze,le,rt),ze.side=Rh):O.renderBufferDirect(De,Te,ke,ze,le,rt),le.onAfterRender(O,Te,De,ke,ze,rt)}function Ri(le,Te,De){Te.isScene!==!0&&(Te=Ht);const ke=Qe.get(le),ze=E.state.lights,rt=E.state.shadowsArray,Tt=ze.state.version,Nt=Xe.getParameters(le,ze.state,rt,Te,De),Bt=Xe.getProgramCacheKey(Nt);let qt=ke.programs;ke.environment=le.isMeshStandardMaterial?Te.environment:null,ke.fog=Te.fog,ke.envMap=(le.isMeshStandardMaterial?_e:et).get(le.envMap||ke.environment),ke.envMapRotation=ke.environment!==null&&le.envMap===null?Te.environmentRotation:le.envMapRotation,qt===void 0&&(le.addEventListener("dispose",Xt),qt=new Map,ke.programs=qt);let Kt=qt.get(Bt);if(Kt!==void 0){if(ke.currentProgram===Kt&&ke.lightsStateVersion===Tt)return ge(le,Nt),Kt}else Nt.uniforms=Xe.getUniforms(le),le.onBeforeCompile(Nt,O),Kt=Xe.acquireProgram(Nt,Bt),qt.set(Bt,Kt),ke.uniforms=Nt.uniforms;const Jt=ke.uniforms;return(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(Jt.clippingPlanes=At.uniform),ge(le,Nt),ke.needsLights=ht(le),ke.lightsStateVersion=Tt,ke.needsLights&&(Jt.ambientLightColor.value=ze.state.ambient,Jt.lightProbe.value=ze.state.probe,Jt.directionalLights.value=ze.state.directional,Jt.directionalLightShadows.value=ze.state.directionalShadow,Jt.spotLights.value=ze.state.spot,Jt.spotLightShadows.value=ze.state.spotShadow,Jt.rectAreaLights.value=ze.state.rectArea,Jt.ltc_1.value=ze.state.rectAreaLTC1,Jt.ltc_2.value=ze.state.rectAreaLTC2,Jt.pointLights.value=ze.state.point,Jt.pointLightShadows.value=ze.state.pointShadow,Jt.hemisphereLights.value=ze.state.hemi,Jt.directionalShadowMap.value=ze.state.directionalShadowMap,Jt.directionalShadowMatrix.value=ze.state.directionalShadowMatrix,Jt.spotShadowMap.value=ze.state.spotShadowMap,Jt.spotLightMatrix.value=ze.state.spotLightMatrix,Jt.spotLightMap.value=ze.state.spotLightMap,Jt.pointShadowMap.value=ze.state.pointShadowMap,Jt.pointShadowMatrix.value=ze.state.pointShadowMatrix),ke.currentProgram=Kt,ke.uniformsList=null,Kt}function ae(le){if(le.uniformsList===null){const Te=le.currentProgram.getUniforms();le.uniformsList=ox.seqWithValue(Te.seq,le.uniforms)}return le.uniformsList}function ge(le,Te){const De=Qe.get(le);De.outputColorSpace=Te.outputColorSpace,De.batching=Te.batching,De.batchingColor=Te.batchingColor,De.instancing=Te.instancing,De.instancingColor=Te.instancingColor,De.instancingMorph=Te.instancingMorph,De.skinning=Te.skinning,De.morphTargets=Te.morphTargets,De.morphNormals=Te.morphNormals,De.morphColors=Te.morphColors,De.morphTargetsCount=Te.morphTargetsCount,De.numClippingPlanes=Te.numClippingPlanes,De.numIntersection=Te.numClipIntersection,De.vertexAlphas=Te.vertexAlphas,De.vertexTangents=Te.vertexTangents,De.toneMapping=Te.toneMapping}function Ue(le,Te,De,ke,ze){Te.isScene!==!0&&(Te=Ht),vt.resetTextureUnits();const rt=Te.fog,Tt=ke.isMeshStandardMaterial?Te.environment:null,Nt=X===null?O.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:sf,Bt=(ke.isMeshStandardMaterial?_e:et).get(ke.envMap||Tt),qt=ke.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,Kt=!!De.attributes.tangent&&(!!ke.normalMap||ke.anisotropy>0),Jt=!!De.morphAttributes.position,vn=!!De.morphAttributes.normal,Tn=!!De.morphAttributes.color;let ei=yp;ke.toneMapped&&(X===null||X.isXRRenderTarget===!0)&&(ei=O.toneMapping);const ln=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,Dn=ln!==void 0?ln.length:0,fn=Qe.get(ke),yi=E.state.lights;if(We===!0&&(Fe===!0||le!==D)){const ss=le===D&&ke.id===G;At.setState(ke,le,ss)}let Hn=!1;ke.version===fn.__version?(fn.needsLights&&fn.lightsStateVersion!==yi.state.version||fn.outputColorSpace!==Nt||ze.isBatchedMesh&&fn.batching===!1||!ze.isBatchedMesh&&fn.batching===!0||ze.isBatchedMesh&&fn.batchingColor===!0&&ze.colorTexture===null||ze.isBatchedMesh&&fn.batchingColor===!1&&ze.colorTexture!==null||ze.isInstancedMesh&&fn.instancing===!1||!ze.isInstancedMesh&&fn.instancing===!0||ze.isSkinnedMesh&&fn.skinning===!1||!ze.isSkinnedMesh&&fn.skinning===!0||ze.isInstancedMesh&&fn.instancingColor===!0&&ze.instanceColor===null||ze.isInstancedMesh&&fn.instancingColor===!1&&ze.instanceColor!==null||ze.isInstancedMesh&&fn.instancingMorph===!0&&ze.morphTexture===null||ze.isInstancedMesh&&fn.instancingMorph===!1&&ze.morphTexture!==null||fn.envMap!==Bt||ke.fog===!0&&fn.fog!==rt||fn.numClippingPlanes!==void 0&&(fn.numClippingPlanes!==At.numPlanes||fn.numIntersection!==At.numIntersection)||fn.vertexAlphas!==qt||fn.vertexTangents!==Kt||fn.morphTargets!==Jt||fn.morphNormals!==vn||fn.morphColors!==Tn||fn.toneMapping!==ei||fn.morphTargetsCount!==Dn)&&(Hn=!0):(Hn=!0,fn.__version=ke.version);let Mn=fn.currentProgram;Hn===!0&&(Mn=Ri(ke,Te,ze));let Xn=!1,Rn=!1,ti=!1;const Gn=Mn.getUniforms(),Ui=fn.uniforms;if(Ie.useProgram(Mn.program)&&(Xn=!0,Rn=!0,ti=!0),ke.id!==G&&(G=ke.id,Rn=!0),Xn||D!==le){Ie.buffers.depth.getReversed()?(gt.copy(le.projectionMatrix),cW(gt),hW(gt),Gn.setValue(J,"projectionMatrix",gt)):Gn.setValue(J,"projectionMatrix",le.projectionMatrix),Gn.setValue(J,"viewMatrix",le.matrixWorldInverse);const ur=Gn.map.cameraPosition;ur!==void 0&&ur.setValue(J,Ut.setFromMatrixPosition(le.matrixWorld)),we.logarithmicDepthBuffer&&Gn.setValue(J,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial)&&Gn.setValue(J,"isOrthographic",le.isOrthographicCamera===!0),D!==le&&(D=le,Rn=!0,ti=!0)}if(ze.isSkinnedMesh){Gn.setOptional(J,ze,"bindMatrix"),Gn.setOptional(J,ze,"bindMatrixInverse");const ss=ze.skeleton;ss&&(ss.boneTexture===null&&ss.computeBoneTexture(),Gn.setValue(J,"boneTexture",ss.boneTexture,vt))}ze.isBatchedMesh&&(Gn.setOptional(J,ze,"batchingTexture"),Gn.setValue(J,"batchingTexture",ze._matricesTexture,vt),Gn.setOptional(J,ze,"batchingIdTexture"),Gn.setValue(J,"batchingIdTexture",ze._indirectTexture,vt),Gn.setOptional(J,ze,"batchingColorTexture"),ze._colorsTexture!==null&&Gn.setValue(J,"batchingColorTexture",ze._colorsTexture,vt));const Ti=De.morphAttributes;if((Ti.position!==void 0||Ti.normal!==void 0||Ti.color!==void 0)&&oe.update(ze,De,Mn),(Rn||fn.receiveShadow!==ze.receiveShadow)&&(fn.receiveShadow=ze.receiveShadow,Gn.setValue(J,"receiveShadow",ze.receiveShadow)),ke.isMeshGouraudMaterial&&ke.envMap!==null&&(Ui.envMap.value=Bt,Ui.flipEnvMap.value=Bt.isCubeTexture&&Bt.isRenderTargetTexture===!1?-1:1),ke.isMeshStandardMaterial&&ke.envMap===null&&Te.environment!==null&&(Ui.envMapIntensity.value=Te.environmentIntensity),Rn&&(Gn.setValue(J,"toneMappingExposure",O.toneMappingExposure),fn.needsLights&&ot(Ui,ti),rt&&ke.fog===!0&&Ve.refreshFogUniforms(Ui,rt),Ve.refreshMaterialUniforms(Ui,ke,ce,te,E.state.transmissionRenderTarget[le.id]),ox.upload(J,ae(fn),Ui,vt)),ke.isShaderMaterial&&ke.uniformsNeedUpdate===!0&&(ox.upload(J,ae(fn),Ui,vt),ke.uniformsNeedUpdate=!1),ke.isSpriteMaterial&&Gn.setValue(J,"center",ze.center),Gn.setValue(J,"modelViewMatrix",ze.modelViewMatrix),Gn.setValue(J,"normalMatrix",ze.normalMatrix),Gn.setValue(J,"modelMatrix",ze.matrixWorld),ke.isShaderMaterial||ke.isRawShaderMaterial){const ss=ke.uniformsGroups;for(let ur=0,so=ss.length;ur<so;ur++){const Ol=ss[ur];Me.update(Ol,Mn),Me.bind(Ol,Mn)}}return Mn}function ot(le,Te){le.ambientLightColor.needsUpdate=Te,le.lightProbe.needsUpdate=Te,le.directionalLights.needsUpdate=Te,le.directionalLightShadows.needsUpdate=Te,le.pointLights.needsUpdate=Te,le.pointLightShadows.needsUpdate=Te,le.spotLights.needsUpdate=Te,le.spotLightShadows.needsUpdate=Te,le.rectAreaLights.needsUpdate=Te,le.hemisphereLights.needsUpdate=Te}function ht(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(le,Te,De){const ke=Qe.get(le);ke.__autoAllocateDepthBuffer=le.resolveDepthBuffer===!1,ke.__autoAllocateDepthBuffer===!1&&(ke.__useRenderToTexture=!1),Qe.get(le.texture).__webglTexture=Te,Qe.get(le.depthTexture).__webglTexture=ke.__autoAllocateDepthBuffer?void 0:De,ke.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(le,Te){const De=Qe.get(le);De.__webglFramebuffer=Te,De.__useDefaultFramebuffer=Te===void 0};const _t=J.createFramebuffer();this.setRenderTarget=function(le,Te=0,De=0){X=le,F=Te,V=De;let ke=!0,ze=null,rt=!1,Tt=!1;if(le){const Bt=Qe.get(le);if(Bt.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(J.FRAMEBUFFER,null),ke=!1;else if(Bt.__webglFramebuffer===void 0)vt.setupRenderTarget(le);else if(Bt.__hasExternalTextures)vt.rebindTextures(le,Qe.get(le.texture).__webglTexture,Qe.get(le.depthTexture).__webglTexture);else if(le.depthBuffer){const Jt=le.depthTexture;if(Bt.__boundDepthTexture!==Jt){if(Jt!==null&&Qe.has(Jt)&&(le.width!==Jt.image.width||le.height!==Jt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");vt.setupDepthRenderbuffer(le)}}const qt=le.texture;(qt.isData3DTexture||qt.isDataArrayTexture||qt.isCompressedArrayTexture)&&(Tt=!0);const Kt=Qe.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(Array.isArray(Kt[Te])?ze=Kt[Te][De]:ze=Kt[Te],rt=!0):le.samples>0&&vt.useMultisampledRTT(le)===!1?ze=Qe.get(le).__webglMultisampledFramebuffer:Array.isArray(Kt)?ze=Kt[De]:ze=Kt,Z.copy(le.viewport),Y.copy(le.scissor),j=le.scissorTest}else Z.copy(fe).multiplyScalar(ce).floor(),Y.copy(Ne).multiplyScalar(ce).floor(),j=Pe;if(De!==0&&(ze=_t),Ie.bindFramebuffer(J.FRAMEBUFFER,ze)&&ke&&Ie.drawBuffers(le,ze),Ie.viewport(Z),Ie.scissor(Y),Ie.setScissorTest(j),rt){const Bt=Qe.get(le.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Bt.__webglTexture,De)}else if(Tt){const Bt=Qe.get(le.texture),qt=Te;J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,Bt.__webglTexture,De,qt)}else if(le!==null&&De!==0){const Bt=Qe.get(le.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Bt.__webglTexture,De)}G=-1},this.readRenderTargetPixels=function(le,Te,De,ke,ze,rt,Tt,Nt=0){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Bt=Qe.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&Tt!==void 0&&(Bt=Bt[Tt]),Bt){Ie.bindFramebuffer(J.FRAMEBUFFER,Bt);try{const qt=le.textures[Nt],Kt=qt.format,Jt=qt.type;if(!we.textureFormatReadable(Kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!we.textureTypeReadable(Jt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Te>=0&&Te<=le.width-ke&&De>=0&&De<=le.height-ze&&(le.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+Nt),J.readPixels(Te,De,ke,ze,ye.convert(Kt),ye.convert(Jt),rt))}finally{const qt=X!==null?Qe.get(X).__webglFramebuffer:null;Ie.bindFramebuffer(J.FRAMEBUFFER,qt)}}},this.readRenderTargetPixelsAsync=async function(le,Te,De,ke,ze,rt,Tt,Nt=0){if(!(le&&le.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bt=Qe.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&Tt!==void 0&&(Bt=Bt[Tt]),Bt)if(Te>=0&&Te<=le.width-ke&&De>=0&&De<=le.height-ze){Ie.bindFramebuffer(J.FRAMEBUFFER,Bt);const qt=le.textures[Nt],Kt=qt.format,Jt=qt.type;if(!we.textureFormatReadable(Kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!we.textureTypeReadable(Jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const vn=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,vn),J.bufferData(J.PIXEL_PACK_BUFFER,rt.byteLength,J.STREAM_READ),le.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+Nt),J.readPixels(Te,De,ke,ze,ye.convert(Kt),ye.convert(Jt),0);const Tn=X!==null?Qe.get(X).__webglFramebuffer:null;Ie.bindFramebuffer(J.FRAMEBUFFER,Tn);const ei=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await uW(J,ei,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,vn),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,rt),J.deleteBuffer(vn),J.deleteSync(ei),rt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(le,Te=null,De=0){const ke=Math.pow(2,-De),ze=Math.floor(le.image.width*ke),rt=Math.floor(le.image.height*ke),Tt=Te!==null?Te.x:0,Nt=Te!==null?Te.y:0;vt.setTexture2D(le,0),J.copyTexSubImage2D(J.TEXTURE_2D,De,0,0,Tt,Nt,ze,rt),Ie.unbindTexture()};const Gt=J.createFramebuffer(),kt=J.createFramebuffer();this.copyTextureToTexture=function(le,Te,De=null,ke=null,ze=0,rt=null){rt===null&&(ze!==0?(Ry("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),rt=ze,ze=0):rt=0);let Tt,Nt,Bt,qt,Kt,Jt,vn,Tn,ei;const ln=le.isCompressedTexture?le.mipmaps[rt]:le.image;if(De!==null)Tt=De.max.x-De.min.x,Nt=De.max.y-De.min.y,Bt=De.isBox3?De.max.z-De.min.z:1,qt=De.min.x,Kt=De.min.y,Jt=De.isBox3?De.min.z:0;else{const Ti=Math.pow(2,-ze);Tt=Math.floor(ln.width*Ti),Nt=Math.floor(ln.height*Ti),le.isDataArrayTexture?Bt=ln.depth:le.isData3DTexture?Bt=Math.floor(ln.depth*Ti):Bt=1,qt=0,Kt=0,Jt=0}ke!==null?(vn=ke.x,Tn=ke.y,ei=ke.z):(vn=0,Tn=0,ei=0);const Dn=ye.convert(Te.format),fn=ye.convert(Te.type);let yi;Te.isData3DTexture?(vt.setTexture3D(Te,0),yi=J.TEXTURE_3D):Te.isDataArrayTexture||Te.isCompressedArrayTexture?(vt.setTexture2DArray(Te,0),yi=J.TEXTURE_2D_ARRAY):(vt.setTexture2D(Te,0),yi=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,Te.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,Te.unpackAlignment);const Hn=J.getParameter(J.UNPACK_ROW_LENGTH),Mn=J.getParameter(J.UNPACK_IMAGE_HEIGHT),Xn=J.getParameter(J.UNPACK_SKIP_PIXELS),Rn=J.getParameter(J.UNPACK_SKIP_ROWS),ti=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,ln.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,ln.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,qt),J.pixelStorei(J.UNPACK_SKIP_ROWS,Kt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Jt);const Gn=le.isDataArrayTexture||le.isData3DTexture,Ui=Te.isDataArrayTexture||Te.isData3DTexture;if(le.isDepthTexture){const Ti=Qe.get(le),ss=Qe.get(Te),ur=Qe.get(Ti.__renderTarget),so=Qe.get(ss.__renderTarget);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,ur.__webglFramebuffer),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,so.__webglFramebuffer);for(let Ol=0;Ol<Bt;Ol++)Gn&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Qe.get(le).__webglTexture,ze,Jt+Ol),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Qe.get(Te).__webglTexture,rt,ei+Ol)),J.blitFramebuffer(qt,Kt,Tt,Nt,vn,Tn,Tt,Nt,J.DEPTH_BUFFER_BIT,J.NEAREST);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(ze!==0||le.isRenderTargetTexture||Qe.has(le)){const Ti=Qe.get(le),ss=Qe.get(Te);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,Gt),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,kt);for(let ur=0;ur<Bt;ur++)Gn?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Ti.__webglTexture,ze,Jt+ur):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Ti.__webglTexture,ze),Ui?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,ss.__webglTexture,rt,ei+ur):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,ss.__webglTexture,rt),ze!==0?J.blitFramebuffer(qt,Kt,Tt,Nt,vn,Tn,Tt,Nt,J.COLOR_BUFFER_BIT,J.NEAREST):Ui?J.copyTexSubImage3D(yi,rt,vn,Tn,ei+ur,qt,Kt,Tt,Nt):J.copyTexSubImage2D(yi,rt,vn,Tn,qt,Kt,Tt,Nt);Ie.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else Ui?le.isDataTexture||le.isData3DTexture?J.texSubImage3D(yi,rt,vn,Tn,ei,Tt,Nt,Bt,Dn,fn,ln.data):Te.isCompressedArrayTexture?J.compressedTexSubImage3D(yi,rt,vn,Tn,ei,Tt,Nt,Bt,Dn,ln.data):J.texSubImage3D(yi,rt,vn,Tn,ei,Tt,Nt,Bt,Dn,fn,ln):le.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,rt,vn,Tn,Tt,Nt,Dn,fn,ln.data):le.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,rt,vn,Tn,ln.width,ln.height,Dn,ln.data):J.texSubImage2D(J.TEXTURE_2D,rt,vn,Tn,Tt,Nt,Dn,fn,ln);J.pixelStorei(J.UNPACK_ROW_LENGTH,Hn),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Mn),J.pixelStorei(J.UNPACK_SKIP_PIXELS,Xn),J.pixelStorei(J.UNPACK_SKIP_ROWS,Rn),J.pixelStorei(J.UNPACK_SKIP_IMAGES,ti),rt===0&&Te.generateMipmaps&&J.generateMipmap(yi),Ie.unbindTexture()},this.copyTextureToTexture3D=function(le,Te,De=null,ke=null,ze=0){return Ry('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(le,Te,De,ke,ze)},this.initRenderTarget=function(le){Qe.get(le).__webglFramebuffer===void 0&&vt.setupRenderTarget(le)},this.initTexture=function(le){le.isCubeTexture?vt.setTextureCube(le,0):le.isData3DTexture?vt.setTexture3D(le,0):le.isDataArrayTexture||le.isCompressedArrayTexture?vt.setTexture2DArray(le,0):vt.setTexture2D(le,0),Ie.unbindTexture()},this.resetState=function(){F=0,V=0,X=null,Ie.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Lh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Yi._getDrawingBufferColorSpace(e),n.unpackColorSpace=Yi._getUnpackColorSpace()}}const mq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:e2,AddEquation:$g,AddOperation:vH,AdditiveAnimationBlendMode:o2,AdditiveBlending:WI,AgXToneMapping:SH,AlphaFormat:n2,AlwaysCompare:UH,AlwaysDepth:Nx,AlwaysStencilFunc:qI,AmbientLight:$G,AnimationAction:LG,AnimationClip:Jy,AnimationLoader:B9,AnimationMixer:a7,AnimationObjectGroup:r7,AnimationUtils:O9,ArcCurve:QH,ArrayCamera:IG,ArrowHelper:x7,AttachedBindMode:YI,Audio:OG,AudioAnalyser:K9,AudioContext:P2,AudioListener:X9,AudioLoader:z9,AxesHelper:C7,BackSide:hu,BasicDepthPacking:wH,BasicShadowMap:ZF,BatchedMesh:KH,Bone:uM,BooleanKeyframeTrack:rb,Box2:f7,Box3:Ro,Box3Helper:A7,BoxGeometry:sb,BoxHelper:S7,BufferAttribute:ns,BufferGeometry:ui,BufferGeometryLoader:RG,ByteType:JC,Cache:mp,Camera:oM,CameraHelper:E7,CanvasTexture:JH,CapsuleGeometry:pM,CatmullRomCurve3:eG,CineonToneMapping:TH,CircleGeometry:mM,ClampToEdgeWrapping:co,Clock:U2,Color:on,ColorKeyframeTrack:I2,ColorManagement:Yi,CompressedArrayTexture:e9,CompressedCubeTexture:t9,CompressedTexture:dM,CompressedTextureLoader:k9,ConeGeometry:zS,ConstantAlphaFactor:mH,ConstantColorFactor:fH,Controls:R7,CubeCamera:WH,CubeReflectionMapping:$p,CubeRefractionMapping:kg,CubeTexture:US,CubeTextureLoader:EG,CubeUVReflectionMapping:pT,CubicBezierCurve:T2,CubicBezierCurve3:tG,CubicInterpolant:vG,CullFaceBack:VI,CullFaceFront:JF,CullFaceFrontBack:f8,CullFaceNone:qF,Curve:lf,CurvePath:iG,CustomBlending:QF,CustomToneMapping:EH,CylinderGeometry:GS,Cylindrical:d7,Data3DTexture:rM,DataArrayTexture:sM,DataTexture:Qd,DataTextureLoader:O2,DataUtils:wv,DecrementStencilOp:S8,DecrementWrapStencilOp:$8,DefaultLoadingManager:TG,DepthFormat:zy,DepthStencilFormat:Vy,DepthTexture:fM,DetachedBindMode:$H,DirectionalLight:B2,DirectionalLightHelper:T7,DiscreteInterpolant:bG,DodecahedronGeometry:gM,DoubleSide:Rh,DstAlphaFactor:lH,DstColorFactor:cH,DynamicCopyUsage:F8,DynamicDrawUsage:L8,DynamicReadUsage:k8,EdgesGeometry:ZH,EllipseCurve:_M,EqualCompare:DH,EqualDepth:Dx,EqualStencilFunc:R8,EquirectangularReflectionMapping:Uy,EquirectangularRefractionMapping:iS,Euler:zc,EventDispatcher:Rp,ExtrudeGeometry:vM,FileLoader:ja,Float16BufferAttribute:OW,Float32BufferAttribute:_n,FloatType:Rr,Fog:lM,FogExp2:aM,FramebufferTexture:QW,FrontSide:Ap,Frustum:gT,FrustumArray:cM,GLBufferAttribute:h7,GLSL1:G8,GLSL3:JI,GreaterCompare:BH,GreaterDepth:kx,GreaterEqualCompare:PH,GreaterEqualDepth:Bx,GreaterEqualStencilFunc:N8,GreaterStencilFunc:I8,GridHelper:b7,Group:Y0,HalfFloatType:ea,HemisphereLight:AG,HemisphereLightHelper:v7,IcosahedronGeometry:VS,ImageBitmapLoader:wG,ImageLoader:dS,ImageUtils:GH,IncrementStencilOp:E8,IncrementWrapStencilOp:A8,InstancedBufferAttribute:Xv,InstancedBufferGeometry:k2,InstancedInterleavedBuffer:_C,InstancedMesh:_2,Int16BufferAttribute:wW,Int32BufferAttribute:IW,Int8BufferAttribute:CW,IntType:BS,InterleavedBuffer:FS,InterleavedBufferAttribute:Ju,Interpolant:_T,InterpolateDiscrete:Wy,InterpolateLinear:Xy,InterpolateSmooth:sx,InterpolationSamplingMode:W8,InterpolationSamplingType:V8,InvertStencilOp:x8,KeepStencilOp:Tv,KeyframeTrack:zh,LOD:YH,LatheGeometry:bM,Layers:Yy,LessCompare:LH,LessDepth:Lx,LessEqualCompare:l2,LessEqualDepth:Wv,LessEqualStencilFunc:w8,LessStencilFunc:M8,Light:Yg,LightProbe:MG,Line:em,Line3:DG,LineBasicMaterial:Il,LineCurve:E2,LineCurve3:nG,LineDashedMaterial:mG,LineLoop:v2,LineSegments:af,LinearFilter:us,LinearInterpolant:w2,LinearMipMapLinearFilter:KI,LinearMipMapNearestFilter:g8,LinearMipmapLinearFilter:Nh,LinearMipmapNearestFilter:My,LinearSRGBColorSpace:sf,LinearToneMapping:bH,LinearTransfer:rS,Loader:Ya,LoaderUtils:Og,LoadingManager:xM,LoopOnce:xH,LoopPingPong:MH,LoopRepeat:CH,MOUSE:bv,Material:ta,MaterialLoader:CM,MathUtils:c2,Matrix2:V2,Matrix3:ci,Matrix4:Fn,MaxEquation:iH,Mesh:_r,MeshBasicMaterial:qu,MeshDepthMaterial:C2,MeshDistanceMaterial:M2,MeshLambertMaterial:fG,MeshMatcapMaterial:pG,MeshNormalMaterial:dG,MeshPhongMaterial:cG,MeshPhysicalMaterial:Gh,MeshStandardMaterial:jS,MeshToonMaterial:hG,MinEquation:nH,MirroredRepeatWrapping:Fy,MixOperation:_H,MultiplyBlending:jI,MultiplyOperation:DS,NearestFilter:Ta,NearestMipMapLinearFilter:m8,NearestMipMapNearestFilter:p8,NearestMipmapLinearFilter:Cv,NearestMipmapNearestFilter:qC,NeutralToneMapping:AH,NeverCompare:NH,NeverDepth:Ox,NeverStencilFunc:C8,NoBlending:bp,NoColorSpace:X0,NoToneMapping:yp,NormalAnimationBlendMode:iM,NormalBlending:Bv,NotEqualCompare:kH,NotEqualDepth:Px,NotEqualStencilFunc:O8,NumberKeyframeTrack:Yv,Object3D:zi,ObjectLoader:H9,ObjectSpaceNormalMap:OH,OctahedronGeometry:WS,OneFactor:rH,OneMinusConstantAlphaFactor:gH,OneMinusConstantColorFactor:pH,OneMinusDstAlphaFactor:uH,OneMinusDstColorFactor:hH,OneMinusSrcAlphaFactor:Ix,OneMinusSrcColorFactor:aH,OrthographicCamera:Tp,PCFShadowMap:KC,PCFSoftShadowMap:kE,PMREMGenerator:rO,Path:gC,PerspectiveCamera:io,Plane:G0,PlaneGeometry:jg,PlaneHelper:$7,PointLight:D2,PointLightHelper:g7,Points:b2,PointsMaterial:hM,PolarGridHelper:y7,PolyhedronGeometry:Xg,PositionalAudio:Y9,PropertyBinding:es,PropertyMixer:NG,QuadraticBezierCurve:S2,QuadraticBezierCurve3:A2,Quaternion:Mo,QuaternionKeyframeTrack:Kv,QuaternionLinearInterpolant:yG,RED_GREEN_RGTC2_Format:uC,RED_RGTC1_Format:r2,REVISION:LS,RGBADepthPacking:IH,RGBAFormat:ho,RGBAIntegerFormat:nM,RGBA_ASTC_10x10_Format:iC,RGBA_ASTC_10x5_Format:eC,RGBA_ASTC_10x6_Format:tC,RGBA_ASTC_10x8_Format:nC,RGBA_ASTC_12x10_Format:sC,RGBA_ASTC_12x12_Format:rC,RGBA_ASTC_4x4_Format:Xx,RGBA_ASTC_5x4_Format:jx,RGBA_ASTC_5x5_Format:Yx,RGBA_ASTC_6x5_Format:Kx,RGBA_ASTC_6x6_Format:qx,RGBA_ASTC_8x5_Format:Jx,RGBA_ASTC_8x6_Format:Zx,RGBA_ASTC_8x8_Format:Qx,RGBA_BPTC_Format:GE,RGBA_ETC2_EAC_Format:Wx,RGBA_PVRTC_2BPPV1_Format:Gx,RGBA_PVRTC_4BPPV1_Format:Hx,RGBA_S3TC_DXT1_Format:UE,RGBA_S3TC_DXT3_Format:FE,RGBA_S3TC_DXT5_Format:HE,RGBDepthPacking:v8,RGBFormat:i2,RGBIntegerFormat:_8,RGB_BPTC_SIGNED_Format:oC,RGB_BPTC_UNSIGNED_Format:aC,RGB_ETC1_Format:zx,RGB_ETC2_Format:Vx,RGB_PVRTC_2BPPV1_Format:Fx,RGB_PVRTC_4BPPV1_Format:Ux,RGB_S3TC_DXT1_Format:PE,RGDepthPacking:b8,RGFormat:s2,RGIntegerFormat:tM,RawShaderMaterial:uG,Ray:ib,Raycaster:z2,RectAreaLight:xG,RedFormat:kS,RedIntegerFormat:PS,ReinhardToneMapping:yH,RenderTarget:h2,RenderTarget3D:l7,RepeatWrapping:Pg,ReplaceStencilOp:T8,ReverseSubtractEquation:tH,RingGeometry:yM,SIGNED_RED_GREEN_RGTC2_Format:cC,SIGNED_RED_RGTC1_Format:lC,SRGBColorSpace:Wa,SRGBTransfer:Ls,Scene:mT,ShaderChunk:bi,ShaderLib:Yd,ShaderMaterial:pu,ShadowMaterial:lG,Shape:Ig,ShapeGeometry:TM,ShapePath:M7,ShapeUtils:qd,ShortType:ZC,Skeleton:HS,SkeletonHelper:m7,SkinnedMesh:g2,Source:Cg,Sphere:wo,SphereGeometry:XS,Spherical:iO,SphericalHarmonics3:CG,SplineCurve:$2,SpotLight:L2,SpotLightHelper:p7,Sprite:jH,SpriteMaterial:m2,SrcAlphaFactor:wx,SrcAlphaSaturateFactor:dH,SrcColorFactor:oH,StaticCopyUsage:U8,StaticDrawUsage:oS,StaticReadUsage:B8,StereoCamera:V9,StreamCopyUsage:H8,StreamDrawUsage:D8,StreamReadUsage:P8,StringKeyframeTrack:ob,SubtractEquation:eH,SubtractiveBlending:XI,TOUCH:yv,TangentSpaceNormalMap:Wg,TetrahedronGeometry:EM,Texture:Ms,TextureLoader:SG,TextureUtils:L7,TimestampQuery:z8,TorusGeometry:SM,TorusKnotGeometry:AM,Triangle:Ku,TriangleFanDrawMode:hC,TriangleStripDrawMode:a2,TrianglesDrawMode:RH,TubeGeometry:$M,UVMapping:Bg,Uint16BufferAttribute:d2,Uint32BufferAttribute:f2,Uint8BufferAttribute:MW,Uint8ClampedBufferAttribute:RW,Uniform:G2,UniformsGroup:c7,UniformsLib:sn,UniformsUtils:dC,UnsignedByteType:fu,UnsignedInt248Type:Gy,UnsignedInt5999Type:t2,UnsignedIntType:xp,UnsignedShort4444Type:QC,UnsignedShort5551Type:eM,UnsignedShortType:Hy,VSMShadowMap:jd,Vector2:It,Vector3:be,Vector4:Ei,VectorKeyframeTrack:qv,VideoFrameTexture:ZW,VideoTexture:qH,WebGL3DRenderTarget:gW,WebGLArrayRenderTarget:mW,WebGLCoordinateSystem:Lh,WebGLCubeRenderTarget:p2,WebGLRenderTarget:Gc,WebGLRenderer:X2,WebGLUtils:GG,WebGPUCoordinateSystem:aS,WebXRController:rx,WireframeGeometry:x2,WrapAroundEnding:sS,ZeroCurvatureEnding:Mv,ZeroFactor:sH,ZeroSlopeEnding:Rv,ZeroStencilOp:y8,createCanvasElement:HH},Symbol.toStringTag,{value:"Module"}));var FR={exports:{}},k0={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bk;function gq(){return Bk||(Bk=1,k0.ConcurrentRoot=1,k0.ContinuousEventPriority=8,k0.DefaultEventPriority=32,k0.DiscreteEventPriority=2,k0.IdleEventPriority=268435456,k0.LegacyRoot=0,k0.NoEventPriority=0),k0}var kk;function _q(){return kk||(kk=1,FR.exports=gq()),FR.exports}var ax=_q(),HR={exports:{}},GR={},zR={exports:{}},VR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk;function vq(){if(Pk)return VR;Pk=1;var s=uT();function e(T,y){return T===y&&(T!==0||1/T===1/y)||T!==T&&y!==y}var n=typeof Object.is=="function"?Object.is:e,i=s.useState,r=s.useEffect,a=s.useLayoutEffect,l=s.useDebugValue;function h(T,y){var S=y(),$=i({inst:{value:S,getSnapshot:y}}),M=$[0].inst,C=$[1];return a(function(){M.value=S,M.getSnapshot=y,f(M)&&C({inst:M})},[T,S,y]),r(function(){return f(M)&&C({inst:M}),T(function(){f(M)&&C({inst:M})})},[T]),l(S),S}function f(T){var y=T.getSnapshot;T=T.value;try{var S=y();return!n(T,S)}catch{return!0}}function p(T,y){return y()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return VR.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:v,VR}var Uk;function bq(){return Uk||(Uk=1,zR.exports=vq()),zR.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fk;function yq(){if(Fk)return GR;Fk=1;var s=uT(),e=bq();function n(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,a=s.useRef,l=s.useEffect,h=s.useMemo,f=s.useDebugValue;return GR.useSyncExternalStoreWithSelector=function(p,v,T,y,S){var $=a(null);if($.current===null){var M={hasValue:!1,value:null};$.current=M}else M=$.current;$=h(function(){function E(F){if(!w){if(w=!0,I=F,F=y(F),S!==void 0&&M.hasValue){var V=M.value;if(S(V,F))return O=V}return O=F}if(V=O,i(I,F))return V;var X=y(F);return S!==void 0&&S(V,X)?(I=F,V):(I=F,O=X)}var w=!1,I,O,P=T===void 0?null:T;return[function(){return E(v())},P===null?void 0:function(){return E(P())}]},[v,T,y,S]);var C=r(p,$[0],$[1]);return l(function(){M.hasValue=!0,M.value=C},[C]),f(C),C},GR}var Hk;function Tq(){return Hk||(Hk=1,HR.exports=yq()),HR.exports}var Eq=Tq();const Sq=Mp(Eq),Gk=s=>{let e;const n=new Set,i=(p,v)=>{const T=typeof p=="function"?p(e):p;if(!Object.is(T,e)){const y=e;e=v??(typeof T!="object"||T===null)?T:Object.assign({},e,T),n.forEach(S=>S(e,y))}},r=()=>e,h={setState:i,getState:r,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p))},f=e=s(i,r,h);return h},Aq=s=>s?Gk(s):Gk,{useSyncExternalStoreWithSelector:$q}=Sq,xq=s=>s;function Cq(s,e=xq,n){const i=$q(s.subscribe,s.getState,s.getInitialState,e,n);return Un.useDebugValue(i),i}const zk=(s,e)=>{const n=Aq(s),i=(r,a=e)=>Cq(n,r,a);return Object.assign(i,n),i},zG=(s,e)=>s?zk(s,e):zk;var WR={exports:{}},XR={exports:{}},jR={exports:{}},YR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk;function Mq(){return Vk||(Vk=1,function(s){function e(z,te){var ce=z.length;z.push(te);e:for(;0<ce;){var pe=ce-1>>>1,K=z[pe];if(0<r(K,te))z[pe]=te,z[ce]=K,ce=pe;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var te=z[0],ce=z.pop();if(ce!==te){z[0]=ce;e:for(var pe=0,K=z.length,fe=K>>>1;pe<fe;){var Ne=2*(pe+1)-1,Pe=z[Ne],Ee=Ne+1,We=z[Ee];if(0>r(Pe,ce))Ee<K&&0>r(We,Pe)?(z[pe]=We,z[Ee]=ce,pe=Ee):(z[pe]=Pe,z[Ne]=ce,pe=Ne);else if(Ee<K&&0>r(We,ce))z[pe]=We,z[Ee]=ce,pe=Ee;else break e}}return te}function r(z,te){var ce=z.sortIndex-te.sortIndex;return ce!==0?ce:z.id-te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();s.unstable_now=function(){return l.now()-h}}var f=[],p=[],v=1,T=null,y=3,S=!1,$=!1,M=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function I(z){for(var te=n(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=z)i(p),te.sortIndex=te.expirationTime,e(f,te);else break;te=n(p)}}function O(z){if(M=!1,I(z),!$)if(n(f)!==null)$=!0,ne();else{var te=n(p);te!==null&&ee(O,te.startTime-z)}}var P=!1,F=-1,V=5,X=-1;function G(){return!(s.unstable_now()-X<V)}function D(){if(P){var z=s.unstable_now();X=z;var te=!0;try{e:{$=!1,M&&(M=!1,E(F),F=-1),S=!0;var ce=y;try{t:{for(I(z),T=n(f);T!==null&&!(T.expirationTime>z&&G());){var pe=T.callback;if(typeof pe=="function"){T.callback=null,y=T.priorityLevel;var K=pe(T.expirationTime<=z);if(z=s.unstable_now(),typeof K=="function"){T.callback=K,I(z),te=!0;break t}T===n(f)&&i(f),I(z)}else i(f);T=n(f)}if(T!==null)te=!0;else{var fe=n(p);fe!==null&&ee(O,fe.startTime-z),te=!1}}break e}finally{T=null,y=ce,S=!1}te=void 0}}finally{te?Z():P=!1}}}var Z;if(typeof w=="function")Z=function(){w(D)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,j=Y.port2;Y.port1.onmessage=D,Z=function(){j.postMessage(null)}}else Z=function(){C(D,0)};function ne(){P||(P=!0,Z())}function ee(z,te){F=C(function(){z(s.unstable_now())},te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_continueExecution=function(){$||S||($=!0,ne())},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return n(f)},s.unstable_next=function(z){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ce=y;y=te;try{return z()}finally{y=ce}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(z,te){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=y;y=z;try{return te()}finally{y=ce}},s.unstable_scheduleCallback=function(z,te,ce){var pe=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?pe+ce:pe):ce=pe,z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ce+K,z={id:v++,callback:te,priorityLevel:z,startTime:ce,expirationTime:K,sortIndex:-1},ce>pe?(z.sortIndex=ce,e(p,z),n(f)===null&&z===n(p)&&(M?(E(F),F=-1):M=!0,ee(O,ce-pe))):(z.sortIndex=K,e(f,z),$||S||($=!0,ne())),z},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(z){var te=y;return function(){var ce=y;y=te;try{return z.apply(this,arguments)}finally{y=ce}}}}(YR)),YR}var Wk;function VG(){return Wk||(Wk=1,jR.exports=Mq()),jR.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk;function Rq(){return Xk||(Xk=1,function(s){s.exports=function(e){function n(m,_,x,L){return new Tm(m,_,x,L)}function i(){}function r(m){var _="https://react.dev/errors/"+m;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)_+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(m){return m===null||typeof m!="object"?null:(m=Ou&&m[Ou]||m["@@iterator"],typeof m=="function"?m:null)}function l(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===Mf?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case vc:return"Fragment";case wa:return"Portal";case ao:return"Profiler";case cn:return"StrictMode";case hn:return"Suspense";case ps:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case yr:return(m.displayName||"Context")+".Provider";case ws:return(m._context.displayName||"Context")+".Consumer";case Iu:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Kp:return _=m.displayName||null,_!==null?_:l(m.type)||"Memo";case Ia:_=m._payload,m=m._init;try{return l(m(_))}catch{}}return null}function h(m){if(ul===void 0)try{throw Error()}catch(x){var _=x.stack.trim().match(/\n( *(at )?)/);ul=_&&_[1]||"",Fl=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ul+m+Fl}function f(m,_){if(!m||bc)return"";bc=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var L={DetermineComponentFrameRoot:function(){try{if(_){var en=function(){throw Error()};if(Object.defineProperty(en.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(en,[])}catch(Zn){var nn=Zn}Reflect.construct(m,[],en)}else{try{en.call()}catch(Zn){nn=Zn}m.call(en.prototype)}}else{try{throw Error()}catch(Zn){nn=Zn}(en=m())&&typeof en.catch=="function"&&en.catch(function(){})}}catch(Zn){if(Zn&&nn&&typeof Zn.stack=="string")return[Zn.stack,nn.stack]}return[null,null]}};L.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(L.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(L.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=L.DetermineComponentFrameRoot(),me=W[0],Be=W[1];if(me&&Be){var je=me.split(`
`),Ct=Be.split(`
`);for(U=L=0;L<je.length&&!je[L].includes("DetermineComponentFrameRoot");)L++;for(;U<Ct.length&&!Ct[U].includes("DetermineComponentFrameRoot");)U++;if(L===je.length||U===Ct.length)for(L=je.length-1,U=Ct.length-1;1<=L&&0<=U&&je[L]!==Ct[U];)U--;for(;1<=L&&0<=U;L--,U--)if(je[L]!==Ct[U]){if(L!==1||U!==1)do if(L--,U--,0>U||je[L]!==Ct[U]){var zt=`
`+je[L].replace(" at new "," at ");return m.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",m.displayName)),zt}while(1<=L&&0<=U);break}}}finally{bc=!1,Error.prepareStackTrace=x}return(x=m?m.displayName||m.name:"")?h(x):""}function p(m){switch(m.tag){case 26:case 27:case 5:return h(m.type);case 16:return h("Lazy");case 13:return h("Suspense");case 19:return h("SuspenseList");case 0:case 15:return m=f(m.type,!1),m;case 11:return m=f(m.type.render,!1),m;case 1:return m=f(m.type,!0),m;default:return""}}function v(m){try{var _="";do _+=p(m),m=m.return;while(m);return _}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function T(m){var _=m,x=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,(_.flags&4098)!==0&&(x=_.return),m=_.return;while(m)}return _.tag===3?x:null}function y(m){if(T(m)!==m)throw Error(r(188))}function S(m){var _=m.alternate;if(!_){if(_=T(m),_===null)throw Error(r(188));return _!==m?null:m}for(var x=m,L=_;;){var U=x.return;if(U===null)break;var W=U.alternate;if(W===null){if(L=U.return,L!==null){x=L;continue}break}if(U.child===W.child){for(W=U.child;W;){if(W===x)return y(U),m;if(W===L)return y(U),_;W=W.sibling}throw Error(r(188))}if(x.return!==L.return)x=U,L=W;else{for(var me=!1,Be=U.child;Be;){if(Be===x){me=!0,x=U,L=W;break}if(Be===L){me=!0,L=U,x=W;break}Be=Be.sibling}if(!me){for(Be=W.child;Be;){if(Be===x){me=!0,x=W,L=U;break}if(Be===L){me=!0,L=W,x=U;break}Be=Be.sibling}if(!me)throw Error(r(189))}}if(x.alternate!==L)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?m:_}function $(m){var _=m.tag;if(_===5||_===26||_===27||_===6)return m;for(m=m.child;m!==null;){if(_=$(m),_!==null)return _;m=m.sibling}return null}function M(m){var _=m.tag;if(_===5||_===26||_===27||_===6)return m;for(m=m.child;m!==null;){if(m.tag!==4&&(_=M(m),_!==null))return _;m=m.sibling}return null}function C(m){return{current:m}}function E(m){0>zo||(m.current=ks[zo],ks[zo]=null,zo--)}function w(m,_){zo++,ks[zo]=m.current,m.current=_}function I(m){return m>>>=0,m===0?32:31-(Ym(m)/S_|0)|0}function O(m){var _=m&42;if(_!==0)return _;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function P(m,_){var x=m.pendingLanes;if(x===0)return 0;var L=0,U=m.suspendedLanes,W=m.pingedLanes,me=m.warmLanes;m=m.finishedLanes!==0;var Be=x&134217727;return Be!==0?(x=Be&~U,x!==0?L=O(x):(W&=Be,W!==0?L=O(W):m||(me=Be&~me,me!==0&&(L=O(me))))):(Be=x&~U,Be!==0?L=O(Be):W!==0?L=O(W):m||(me=x&~me,me!==0&&(L=O(me)))),L===0?0:_!==0&&_!==L&&(_&U)===0&&(U=L&-L,me=_&-_,U>=me||U===32&&(me&4194176)!==0)?_:L}function F(m,_){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&_)===0}function V(m,_){switch(m){case 1:case 2:case 4:case 8:return _+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X(){var m=jl;return jl<<=1,(jl&4194176)===0&&(jl=128),m}function G(){var m=uh;return uh<<=1,(uh&62914560)===0&&(uh=4194304),m}function D(m){for(var _=[],x=0;31>x;x++)_.push(m);return _}function Z(m,_){m.pendingLanes|=_,_!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function Y(m,_,x,L,U,W){var me=m.pendingLanes;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=x,m.entangledLanes&=x,m.errorRecoveryDisabledLanes&=x,m.shellSuspendCounter=0;var Be=m.entanglements,je=m.expirationTimes,Ct=m.hiddenUpdates;for(x=me&~x;0<x;){var zt=31-hr(x),en=1<<zt;Be[zt]=0,je[zt]=-1;var nn=Ct[zt];if(nn!==null)for(Ct[zt]=null,zt=0;zt<nn.length;zt++){var Zn=nn[zt];Zn!==null&&(Zn.lane&=-536870913)}x&=~en}L!==0&&j(m,L,0),W!==0&&U===0&&m.tag!==0&&(m.suspendedLanes|=W&~(me&~_))}function j(m,_,x){m.pendingLanes|=_,m.suspendedLanes&=~_;var L=31-hr(_);m.entangledLanes|=_,m.entanglements[L]=m.entanglements[L]|1073741824|x&4194218}function ne(m,_){var x=m.entangledLanes|=_;for(m=m.entanglements;x;){var L=31-hr(x),U=1<<L;U&_|m[L]&_&&(m[L]|=_),x&=~U}}function ee(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function z(m){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(tr,m,void 0,(m.current.flags&128)===128)}catch{}}function te(m){if(typeof qm=="function"&&dr(m),yo&&typeof yo.setStrictMode=="function")try{yo.setStrictMode(tr,m)}catch{}}function ce(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}function pe(m,_){if(typeof m=="object"&&m!==null){var x=A_.get(m);return x!==void 0?x:(_={value:m,source:_,stack:v(_)},A_.set(m,_),_)}return{value:m,source:_,stack:v(_)}}function K(m,_){hh[dh++]=tt,hh[dh++]=Wo,Wo=m,tt=_}function fe(m,_,x){ua[ca++]=Yl,ua[ca++]=La,ua[ca++]=Sc,Sc=m;var L=Yl;m=La;var U=32-hr(L)-1;L&=~(1<<U),x+=1;var W=32-hr(_)+U;if(30<W){var me=U-U%5;W=(L&(1<<me)-1).toString(32),L>>=me,U-=me,Yl=1<<32-hr(_)+U|x<<U|L,La=W+m}else Yl=1<<W|x<<U|L,La=m}function Ne(m){m.return!==null&&(K(m,1),fe(m,1,0))}function Pe(m){for(;m===Wo;)Wo=hh[--dh],hh[dh]=null,tt=hh[--dh],hh[dh]=null;for(;m===Sc;)Sc=ua[--ca],ua[ca]=null,La=ua[--ca],ua[ca]=null,Yl=ua[--ca],ua[ca]=null}function Ee(m,_){w(fl,_),w(Lu,m),w(Tr,null),m=xm(_),E(Tr),w(Tr,m)}function We(){E(Tr),E(Lu),E(fl)}function Fe(m){m.memoizedState!==null&&w(Ac,m);var _=Tr.current,x=md(_,m.type);_!==x&&(w(Lu,m),w(Tr,x))}function gt(m){Lu.current===m&&(E(Tr),E(Lu)),Ac.current===m&&(E(Ac),zr?hl._currentValue=cl:hl._currentValue2=cl)}function ft(m){var _=Error(r(418,""));throw Ye(pe(_,m)),Da}function Ut(m,_){if(!Vr)throw Error(r(175));Pf(m.stateNode,m.type,m.memoizedProps,_,m)||ft(m)}function Ke(m){for(Is=m.return;Is;)switch(Is.tag){case 3:case 27:qi=!0;return;case 5:case 13:qi=!1;return;default:Is=Is.return}}function Ht(m){if(!Vr||m!==Is)return!1;if(!hi)return Ke(m),hi=!0,!1;var _=!1;if(ri?m.tag!==3&&m.tag!==27&&(m.tag!==5||Uf(m.type)&&!jn(m.type,m.memoizedProps))&&(_=!0):m.tag!==3&&(m.tag!==5||Uf(m.type)&&!jn(m.type,m.memoizedProps))&&(_=!0),_&&Wr&&ft(m),Ke(m),m.tag===13){if(!Vr)throw Error(r(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));Wr=Vm(m)}else Wr=Is?l0(m.stateNode):null;return!0}function Re(){Vr&&(Wr=Is=null,hi=!1)}function Ye(m){fr===null?fr=[m]:fr.push(m)}function J(){for(var m=$c,_=Xo=$c=0;_<m;){var x=nr[_];nr[_++]=null;var L=nr[_];nr[_++]=null;var U=nr[_];nr[_++]=null;var W=nr[_];if(nr[_++]=null,L!==null&&U!==null){var me=L.pending;me===null?U.next=U:(U.next=me.next,me.next=U),L.pending=U}W!==0&&Ie(x,U,W)}}function Se(m,_,x,L){nr[$c++]=m,nr[$c++]=_,nr[$c++]=x,nr[$c++]=L,Xo|=L,m.lanes|=L,m=m.alternate,m!==null&&(m.lanes|=L)}function Ae(m,_,x,L){return Se(m,_,x,L),dt(m)}function we(m,_){return Se(m,null,null,_),dt(m)}function Ie(m,_,x){m.lanes|=x;var L=m.alternate;L!==null&&(L.lanes|=x);for(var U=!1,W=m.return;W!==null;)W.childLanes|=x,L=W.alternate,L!==null&&(L.childLanes|=x),W.tag===22&&(m=W.stateNode,m===null||m._visibility&1||(U=!0)),m=W,W=W.return;U&&_!==null&&m.tag===3&&(W=m.stateNode,U=31-hr(x),W=W.hiddenUpdates,m=W[U],m===null?W[U]=[_]:m.push(_),_.lane=x|536870912)}function dt(m){if(50<vs)throw vs=0,Rc=null,Error(r(185));for(var _=m.return;_!==null;)m=_,_=m.return;return m.tag===3?m.stateNode:null}function Qe(m){m!==$s&&m.next===null&&($s===null?ir=$s=m:$s=$s.next=m),ni=!0,Ad||(Ad=!0,Le(et))}function vt(m,_){if(!Jm&&ni){Jm=!0;do for(var x=!1,L=ir;L!==null;){if(m!==0){var U=L.pendingLanes;if(U===0)var W=0;else{var me=L.suspendedLanes,Be=L.pingedLanes;W=(1<<31-hr(42|m)+1)-1,W&=U&~(me&~Be),W=W&201326677?W&201326677|1:W?W|2:0}W!==0&&(x=!0,$e(L,W))}else W=di,W=P(L,L===Li?W:0),(W&3)===0||F(L,W)||(x=!0,$e(L,W));L=L.next}while(x);Jm=!1}}function et(){ni=Ad=!1;var m=0;Ii!==0&&(Rm()&&(m=Ii),Ii=0);for(var _=Na(),x=null,L=ir;L!==null;){var U=L.next,W=_e(L,_);W===0?(L.next=null,x===null?ir=U:x.next=U,U===null&&($s=x)):(x=L,(m!==0||(W&3)!==0)&&(ni=!0)),L=U}vt(m)}function _e(m,_){for(var x=m.suspendedLanes,L=m.pingedLanes,U=m.expirationTimes,W=m.pendingLanes&-62914561;0<W;){var me=31-hr(W),Be=1<<me,je=U[me];je===-1?((Be&x)===0||(Be&L)!==0)&&(U[me]=V(Be,_)):je<=_&&(m.expiredLanes|=Be),W&=~Be}if(_=Li,x=di,x=P(m,m===_?x:0),L=m.callbackNode,x===0||m===_&&Di===2||m.cancelPendingCommit!==null)return L!==null&&L!==null&&Sd(L),m.callbackNode=null,m.callbackPriority=0;if((x&3)===0||F(m,x)){if(_=x&-x,_===m.callbackPriority)return _;switch(L!==null&&Sd(L),ee(x)){case 2:case 8:x=db;break;case 32:x=_0;break;case 268435456:x=fb;break;default:x=_0}return L=se.bind(null,m),x=ch(x,L),m.callbackPriority=_,m.callbackNode=x,_}return L!==null&&L!==null&&Sd(L),m.callbackPriority=2,m.callbackNode=null,2}function se(m,_){var x=m.callbackNode;if(al()&&m.callbackNode!==x)return null;var L=di;return L=P(m,m===Li?L:0),L===0?null:(Mu(m,L,_),_e(m,Na()),m.callbackNode!=null&&m.callbackNode===x?se.bind(null,m):null)}function $e(m,_){if(al())return null;Mu(m,_,!0)}function Le(m){Of?dl(function(){(Ni&6)!==0?ch(g0,m):m()}):ch(g0,m)}function Xe(){return Ii===0&&(Ii=X()),Ii}function Ve(m,_){if(Du===null){var x=Du=[];fh=0,ha=Xe(),Kl={status:"pending",value:void 0,then:function(L){x.push(L)}}}return fh++,_.then(yt,yt),_}function yt(){if(--fh===0&&Du!==null){Kl!==null&&(Kl.status="fulfilled");var m=Du;Du=null,ha=0,Kl=null;for(var _=0;_<m.length;_++)(0,m[_])()}}function bt(m,_){var x=[],L={status:"pending",value:null,reason:null,then:function(U){x.push(U)}};return m.then(function(){L.status="fulfilled",L.value=_;for(var U=0;U<x.length;U++)(0,x[U])(_)},function(U){for(L.status="rejected",L.reason=U,U=0;U<x.length;U++)(0,x[U])(void 0)}),L}function At(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ft(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function H(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function oe(m,_,x){var L=m.updateQueue;if(L===null)return null;if(L=L.shared,(Ni&2)!==0){var U=L.pending;return U===null?_.next=_:(_.next=U.next,U.next=_),L.pending=_,_=dt(m),Ie(m,null,x),_}return Se(m,L,_,x),dt(m)}function ve(m,_,x){if(_=_.updateQueue,_!==null&&(_=_.shared,(x&4194176)!==0)){var L=_.lanes;L&=m.pendingLanes,x|=L,_.lanes=x,ne(m,x)}}function re(m,_){var x=m.updateQueue,L=m.alternate;if(L!==null&&(L=L.updateQueue,x===L)){var U=null,W=null;if(x=x.firstBaseUpdate,x!==null){do{var me={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};W===null?U=W=me:W=W.next=me,x=x.next}while(x!==null);W===null?U=W=_:W=W.next=_}else U=W=_;x={baseState:L.baseState,firstBaseUpdate:U,lastBaseUpdate:W,shared:L.shared,callbacks:L.callbacks},m.updateQueue=x;return}m=x.lastBaseUpdate,m===null?x.firstBaseUpdate=_:m.next=_,x.lastBaseUpdate=_}function ye(){if(Os){var m=Kl;if(m!==null)throw m}}function lt(m,_,x,L){Os=!1;var U=m.updateQueue;Bu=!1;var W=U.firstBaseUpdate,me=U.lastBaseUpdate,Be=U.shared.pending;if(Be!==null){U.shared.pending=null;var je=Be,Ct=je.next;je.next=null,me===null?W=Ct:me.next=Ct,me=je;var zt=m.alternate;zt!==null&&(zt=zt.updateQueue,Be=zt.lastBaseUpdate,Be!==me&&(Be===null?zt.firstBaseUpdate=Ct:Be.next=Ct,zt.lastBaseUpdate=je))}if(W!==null){var en=U.baseState;me=0,zt=Ct=je=null,Be=W;do{var nn=Be.lane&-536870913,Zn=nn!==Be.lane;if(Zn?(di&nn)===nn:(L&nn)===nn){nn!==0&&nn===ha&&(Os=!0),zt!==null&&(zt=zt.next={lane:0,tag:Be.tag,payload:Be.payload,callback:null,next:null});e:{var ga=m,Vu=Be;nn=_;var tu=x;switch(Vu.tag){case 1:if(ga=Vu.payload,typeof ga=="function"){en=ga.call(tu,en,nn);break e}en=ga;break e;case 3:ga.flags=ga.flags&-65537|128;case 0:if(ga=Vu.payload,nn=typeof ga=="function"?ga.call(tu,en,nn):ga,nn==null)break e;en=fd({},en,nn);break e;case 2:Bu=!0}}nn=Be.callback,nn!==null&&(m.flags|=64,Zn&&(m.flags|=8192),Zn=U.callbacks,Zn===null?U.callbacks=[nn]:Zn.push(nn))}else Zn={lane:nn,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},zt===null?(Ct=zt=Zn,je=en):zt=zt.next=Zn,me|=nn;if(Be=Be.next,Be===null){if(Be=U.shared.pending,Be===null)break;Zn=Be,Be=Zn.next,Zn.next=null,U.lastBaseUpdate=Zn,U.shared.pending=null}}while(!0);zt===null&&(je=en),U.baseState=je,U.firstBaseUpdate=Ct,U.lastBaseUpdate=zt,W===null&&(U.shared.lanes=0),pa|=me,m.lanes=me,m.memoizedState=en}}function Me(m,_){if(typeof m!="function")throw Error(r(191,m));m.call(_)}function Ze(m,_){var x=m.callbacks;if(x!==null)for(m.callbacks=null,m=0;m<x.length;m++)Me(x[m],_)}function $t(m,_){if(Vo(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var x=Object.keys(m),L=Object.keys(_);if(x.length!==L.length)return!1;for(L=0;L<x.length;L++){var U=x[L];if(!jo.call(_,U)||!Vo(m[U],_[U]))return!1}return!0}function Pt(m){return m=m.status,m==="fulfilled"||m==="rejected"}function Mt(){}function xt(m,_,x){switch(x=m[x],x===void 0?m.push(_):x!==_&&(_.then(Mt,Mt),_=x),_.status){case"fulfilled":return _.value;case"rejected":throw m=_.reason,m===Yo?Error(r(483)):m;default:if(typeof _.status=="string")_.then(Mt,Mt);else{if(m=Li,m!==null&&100<m.shellSuspendCounter)throw Error(r(482));m=_,m.status="pending",m.then(function(L){if(_.status==="pending"){var U=_;U.status="fulfilled",U.value=L}},function(L){if(_.status==="pending"){var U=_;U.status="rejected",U.reason=L}})}switch(_.status){case"fulfilled":return _.value;case"rejected":throw m=_.reason,m===Yo?Error(r(483)):m}throw xc=_,Yo}}function Xt(){if(xc===null)throw Error(r(459));var m=xc;return xc=null,m}function Yt(m){var _=Hi;return Hi+=1,To===null&&(To=[]),xt(To,m,_)}function Wt(m,_){_=_.props.ref,m.ref=_!==void 0?_:null}function xn(m,_){throw _.$$typeof===ub?Error(r(525)):(m=Object.prototype.toString.call(_),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m)))}function jt(m){var _=m._init;return _(m._payload)}function Zt(m){function _(ct,He){if(m){var pt=ct.deletions;pt===null?(ct.deletions=[He],ct.flags|=16):pt.push(He)}}function x(ct,He){if(!m)return null;for(;He!==null;)_(ct,He),He=He.sibling;return null}function L(ct){for(var He=new Map;ct!==null;)ct.key!==null?He.set(ct.key,ct):He.set(ct.index,ct),ct=ct.sibling;return He}function U(ct,He){return ct=Uo(ct,He),ct.index=0,ct.sibling=null,ct}function W(ct,He,pt){return ct.index=pt,m?(pt=ct.alternate,pt!==null?(pt=pt.index,pt<He?(ct.flags|=33554434,He):pt):(ct.flags|=33554434,He)):(ct.flags|=1048576,He)}function me(ct){return m&&ct.alternate===null&&(ct.flags|=33554434),ct}function Be(ct,He,pt,Vt){return He===null||He.tag!==6?(He=Yp(pt,ct.mode,Vt),He.return=ct,He):(He=U(He,pt),He.return=ct,He)}function je(ct,He,pt,Vt){var Qt=pt.type;return Qt===vc?zt(ct,He,pt.props.children,Vt,pt.key):He!==null&&(He.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Ia&&jt(Qt)===He.type)?(He=U(He,pt.props),Wt(He,pt),He.return=ct,He):(He=Ul(pt.type,pt.key,pt.props,null,ct.mode,Vt),Wt(He,pt),He.return=ct,He)}function Ct(ct,He,pt,Vt){return He===null||He.tag!==4||He.stateNode.containerInfo!==pt.containerInfo||He.stateNode.implementation!==pt.implementation?(He=Em(pt,ct.mode,Vt),He.return=ct,He):(He=U(He,pt.children||[]),He.return=ct,He)}function zt(ct,He,pt,Vt,Qt){return He===null||He.tag!==7?(He=Bs(pt,ct.mode,Vt,Qt),He.return=ct,He):(He=U(He,pt),He.return=ct,He)}function en(ct,He,pt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=Yp(""+He,ct.mode,pt),He.return=ct,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case Cf:return pt=Ul(He.type,He.key,He.props,null,ct.mode,pt),Wt(pt,He),pt.return=ct,pt;case wa:return He=Em(He,ct.mode,pt),He.return=ct,He;case Ia:var Vt=He._init;return He=Vt(He._payload),en(ct,He,pt)}if(Hl(He)||a(He))return He=Bs(He,ct.mode,pt,null),He.return=ct,He;if(typeof He.then=="function")return en(ct,Yt(He),pt);if(He.$$typeof===yr)return en(ct,ed(ct,He),pt);xn(ct,He)}return null}function nn(ct,He,pt,Vt){var Qt=He!==null?He.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Qt!==null?null:Be(ct,He,""+pt,Vt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case Cf:return pt.key===Qt?je(ct,He,pt,Vt):null;case wa:return pt.key===Qt?Ct(ct,He,pt,Vt):null;case Ia:return Qt=pt._init,pt=Qt(pt._payload),nn(ct,He,pt,Vt)}if(Hl(pt)||a(pt))return Qt!==null?null:zt(ct,He,pt,Vt,null);if(typeof pt.then=="function")return nn(ct,He,Yt(pt),Vt);if(pt.$$typeof===yr)return nn(ct,He,ed(ct,pt),Vt);xn(ct,pt)}return null}function Zn(ct,He,pt,Vt,Qt){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return ct=ct.get(pt)||null,Be(He,ct,""+Vt,Qt);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case Cf:return ct=ct.get(Vt.key===null?pt:Vt.key)||null,je(He,ct,Vt,Qt);case wa:return ct=ct.get(Vt.key===null?pt:Vt.key)||null,Ct(He,ct,Vt,Qt);case Ia:var os=Vt._init;return Vt=os(Vt._payload),Zn(ct,He,pt,Vt,Qt)}if(Hl(Vt)||a(Vt))return ct=ct.get(pt)||null,zt(He,ct,Vt,Qt,null);if(typeof Vt.then=="function")return Zn(ct,He,pt,Yt(Vt),Qt);if(Vt.$$typeof===yr)return Zn(ct,He,pt,ed(He,Vt),Qt);xn(He,Vt)}return null}function ga(ct,He,pt,Vt){for(var Qt=null,os=null,Bn=He,xi=He=0,hs=null;Bn!==null&&xi<pt.length;xi++){Bn.index>xi?(hs=Bn,Bn=null):hs=Bn.sibling;var fi=nn(ct,Bn,pt[xi],Vt);if(fi===null){Bn===null&&(Bn=hs);break}m&&Bn&&fi.alternate===null&&_(ct,Bn),He=W(fi,He,xi),os===null?Qt=fi:os.sibling=fi,os=fi,Bn=hs}if(xi===pt.length)return x(ct,Bn),hi&&K(ct,xi),Qt;if(Bn===null){for(;xi<pt.length;xi++)Bn=en(ct,pt[xi],Vt),Bn!==null&&(He=W(Bn,He,xi),os===null?Qt=Bn:os.sibling=Bn,os=Bn);return hi&&K(ct,xi),Qt}for(Bn=L(Bn);xi<pt.length;xi++)hs=Zn(Bn,ct,xi,pt[xi],Vt),hs!==null&&(m&&hs.alternate!==null&&Bn.delete(hs.key===null?xi:hs.key),He=W(hs,He,xi),os===null?Qt=hs:os.sibling=hs,os=hs);return m&&Bn.forEach(function(Pa){return _(ct,Pa)}),hi&&K(ct,xi),Qt}function Vu(ct,He,pt,Vt){if(pt==null)throw Error(r(151));for(var Qt=null,os=null,Bn=He,xi=He=0,hs=null,fi=pt.next();Bn!==null&&!fi.done;xi++,fi=pt.next()){Bn.index>xi?(hs=Bn,Bn=null):hs=Bn.sibling;var Pa=nn(ct,Bn,fi.value,Vt);if(Pa===null){Bn===null&&(Bn=hs);break}m&&Bn&&Pa.alternate===null&&_(ct,Bn),He=W(Pa,He,xi),os===null?Qt=Pa:os.sibling=Pa,os=Pa,Bn=hs}if(fi.done)return x(ct,Bn),hi&&K(ct,xi),Qt;if(Bn===null){for(;!fi.done;xi++,fi=pt.next())fi=en(ct,fi.value,Vt),fi!==null&&(He=W(fi,He,xi),os===null?Qt=fi:os.sibling=fi,os=fi);return hi&&K(ct,xi),Qt}for(Bn=L(Bn);!fi.done;xi++,fi=pt.next())fi=Zn(Bn,ct,xi,fi.value,Vt),fi!==null&&(m&&fi.alternate!==null&&Bn.delete(fi.key===null?xi:fi.key),He=W(fi,He,xi),os===null?Qt=fi:os.sibling=fi,os=fi);return m&&Bn.forEach(function(Rd){return _(ct,Rd)}),hi&&K(ct,xi),Qt}function tu(ct,He,pt,Vt){if(typeof pt=="object"&&pt!==null&&pt.type===vc&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case Cf:e:{for(var Qt=pt.key;He!==null;){if(He.key===Qt){if(Qt=pt.type,Qt===vc){if(He.tag===7){x(ct,He.sibling),Vt=U(He,pt.props.children),Vt.return=ct,ct=Vt;break e}}else if(He.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Ia&&jt(Qt)===He.type){x(ct,He.sibling),Vt=U(He,pt.props),Wt(Vt,pt),Vt.return=ct,ct=Vt;break e}x(ct,He);break}else _(ct,He);He=He.sibling}pt.type===vc?(Vt=Bs(pt.props.children,ct.mode,Vt,pt.key),Vt.return=ct,ct=Vt):(Vt=Ul(pt.type,pt.key,pt.props,null,ct.mode,Vt),Wt(Vt,pt),Vt.return=ct,ct=Vt)}return me(ct);case wa:e:{for(Qt=pt.key;He!==null;){if(He.key===Qt)if(He.tag===4&&He.stateNode.containerInfo===pt.containerInfo&&He.stateNode.implementation===pt.implementation){x(ct,He.sibling),Vt=U(He,pt.children||[]),Vt.return=ct,ct=Vt;break e}else{x(ct,He);break}else _(ct,He);He=He.sibling}Vt=Em(pt,ct.mode,Vt),Vt.return=ct,ct=Vt}return me(ct);case Ia:return Qt=pt._init,pt=Qt(pt._payload),tu(ct,He,pt,Vt)}if(Hl(pt))return ga(ct,He,pt,Vt);if(a(pt)){if(Qt=a(pt),typeof Qt!="function")throw Error(r(150));return pt=Qt.call(pt),Vu(ct,He,pt,Vt)}if(typeof pt.then=="function")return tu(ct,He,Yt(pt),Vt);if(pt.$$typeof===yr)return tu(ct,He,ed(ct,pt),Vt);xn(ct,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint"?(pt=""+pt,He!==null&&He.tag===6?(x(ct,He.sibling),Vt=U(He,pt),Vt.return=ct,ct=Vt):(x(ct,He),Vt=Yp(pt,ct.mode,Vt),Vt.return=ct,ct=Vt),me(ct)):x(ct,He)}return function(ct,He,pt,Vt){try{Hi=0;var Qt=tu(ct,He,pt,Vt);return To=null,Qt}catch(Bn){if(Bn===Yo)throw Bn;var os=n(29,Bn,null,ct.mode);return os.lanes=Vt,os.return=ct,os}finally{}}}function Nn(m,_){m=lo,w(Ot,m),w(cs,_),lo=m|_.baseLanes}function gn(){w(Ot,lo),w(cs,cs.current)}function zn(){lo=Ot.current,E(cs),E(Ot)}function is(m){var _=m.alternate;w(wn,wn.current&1),w(qe,m),pn===null&&(_===null||cs.current!==null||_.memoizedState!==null)&&(pn=m)}function lr(m){if(m.tag===22){if(w(wn,wn.current),w(qe,m),pn===null){var _=m.alternate;_!==null&&_.memoizedState!==null&&(pn=m)}}else Rs()}function Rs(){w(wn,wn.current),w(qe,qe.current)}function Cn(m){E(qe),pn===m&&(pn=null),E(wn)}function Ks(m){for(var _=m;_!==null;){if(_.tag===13){var x=_.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||o0(x)||a0(x)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}function Ri(){throw Error(r(321))}function ae(m,_){if(_===null)return!1;for(var x=0;x<_.length&&x<m.length;x++)if(!Vo(m[x],_[x]))return!1;return!0}function ge(m,_,x,L,U,W){return Pu=W,Yn=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Vn.H=m===null||m.memoizedState===null?mh:Er,rs=!1,W=x(L,U),rs=!1,Ba&&(W=ot(_,x,L,U)),Ue(m),W}function Ue(m){Vn.H=Gs;var _=kn!==null&&kn.next!==null;if(Pu=0,Ai=kn=Yn=null,ml=!1,Cc=0,pr=null,_)throw Error(r(300));m===null||$i||(m=m.dependencies,m!==null&&eh(m)&&($i=!0))}function ot(m,_,x,L){Yn=m;var U=0;do{if(Ba&&(pr=null),Cc=0,Ba=!1,25<=U)throw Error(r(301));if(U+=1,Ai=kn=null,m.updateQueue!=null){var W=m.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}Vn.H=qo,W=_(x,L)}while(Ba);return W}function ht(){var m=Vn.H,_=m.useState()[0];return _=typeof _.then=="function"?De(_):_,m=m.useState()[0],(kn!==null?kn.memoizedState:null)!==m&&(Yn.flags|=1024),_}function _t(){var m=Cd!==0;return Cd=0,m}function Gt(m,_,x){_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~x}function kt(m){if(ml){for(m=m.memoizedState;m!==null;){var _=m.queue;_!==null&&(_.pending=null),m=m.next}ml=!1}Pu=0,Ai=kn=Yn=null,Ba=!1,Cc=Cd=0,pr=null}function le(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Yn.memoizedState=Ai=m:Ai=Ai.next=m,Ai}function Te(){if(kn===null){var m=Yn.alternate;m=m!==null?m.memoizedState:null}else m=kn.next;var _=Ai===null?Yn.memoizedState:Ai.next;if(_!==null)Ai=_,kn=m;else{if(m===null)throw Yn.alternate===null?Error(r(467)):Error(r(310));kn=m,m={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Ai===null?Yn.memoizedState=Ai=m:Ai=Ai.next=m}return Ai}function De(m){var _=Cc;return Cc+=1,pr===null&&(pr=[]),m=xt(pr,m,_),_=Yn,(Ai===null?_.memoizedState:Ai.next)===null&&(_=_.alternate,Vn.H=_===null||_.memoizedState===null?mh:Er),m}function ke(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return De(m);if(m.$$typeof===yr)return Hr(m)}throw Error(r(438,String(m)))}function ze(m){var _=null,x=Yn.updateQueue;if(x!==null&&(_=x.memoCache),_==null){var L=Yn.alternate;L!==null&&(L=L.updateQueue,L!==null&&(L=L.memoCache,L!=null&&(_={data:L.data.map(function(U){return U.slice()}),index:0})))}if(_==null&&(_={data:[],index:0}),x===null&&(x=ph(),Yn.updateQueue=x),x.memoCache=_,x=_.data[_.index],x===void 0)for(x=_.data[_.index]=Array(m),L=0;L<m;L++)x[L]=Am;return _.index++,x}function rt(m,_){return typeof _=="function"?_(m):_}function Tt(m){var _=Te();return Nt(_,kn,m)}function Nt(m,_,x){var L=m.queue;if(L===null)throw Error(r(311));L.lastRenderedReducer=x;var U=m.baseQueue,W=L.pending;if(W!==null){if(U!==null){var me=U.next;U.next=W.next,W.next=me}_.baseQueue=U=W,L.pending=null}if(W=m.baseState,U===null)m.memoizedState=W;else{_=U.next;var Be=me=null,je=null,Ct=_,zt=!1;do{var en=Ct.lane&-536870913;if(en!==Ct.lane?(di&en)===en:(Pu&en)===en){var nn=Ct.revertLane;if(nn===0)je!==null&&(je=je.next={lane:0,revertLane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),en===ha&&(zt=!0);else if((Pu&nn)===nn){Ct=Ct.next,nn===ha&&(zt=!0);continue}else en={lane:0,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},je===null?(Be=je=en,me=W):je=je.next=en,Yn.lanes|=nn,pa|=nn;en=Ct.action,rs&&x(W,en),W=Ct.hasEagerState?Ct.eagerState:x(W,en)}else nn={lane:en,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},je===null?(Be=je=nn,me=W):je=je.next=nn,Yn.lanes|=en,pa|=en;Ct=Ct.next}while(Ct!==null&&Ct!==_);if(je===null?me=W:je.next=Be,!Vo(W,m.memoizedState)&&($i=!0,zt&&(x=Kl,x!==null)))throw x;m.memoizedState=W,m.baseState=me,m.baseQueue=je,L.lastRenderedState=W}return U===null&&(L.lanes=0),[m.memoizedState,L.dispatch]}function Bt(m){var _=Te(),x=_.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=m;var L=x.dispatch,U=x.pending,W=_.memoizedState;if(U!==null){x.pending=null;var me=U=U.next;do W=m(W,me.action),me=me.next;while(me!==U);Vo(W,_.memoizedState)||($i=!0),_.memoizedState=W,_.baseQueue===null&&(_.baseState=W),x.lastRenderedState=W}return[W,L]}function qt(m,_,x){var L=Yn,U=Te(),W=hi;if(W){if(x===void 0)throw Error(r(407));x=x()}else x=_();var me=!Vo((kn||U).memoizedState,x);if(me&&(U.memoizedState=x,$i=!0),U=U.queue,cf(vn.bind(null,L,U,m),[m]),U.getSnapshot!==_||me||Ai!==null&&Ai.memoizedState.tag&1){if(L.flags|=2048,so(9,Jt.bind(null,L,U,x,_),{destroy:void 0},null),Li===null)throw Error(r(349));W||(Pu&60)!==0||Kt(L,_,x)}return x}function Kt(m,_,x){m.flags|=16384,m={getSnapshot:_,value:x},_=Yn.updateQueue,_===null?(_=ph(),Yn.updateQueue=_,_.stores=[m]):(x=_.stores,x===null?_.stores=[m]:x.push(m))}function Jt(m,_,x,L){_.value=x,_.getSnapshot=L,Tn(_)&&ei(m)}function vn(m,_,x){return x(function(){Tn(_)&&ei(m)})}function Tn(m){var _=m.getSnapshot;m=m.value;try{var x=_();return!Vo(m,x)}catch{return!0}}function ei(m){var _=we(m,2);_!==null&&Nr(_,m,2)}function ln(m){var _=le();if(typeof m=="function"){var x=m;if(m=x(),rs){te(!0);try{x()}finally{te(!1)}}}return _.memoizedState=_.baseState=m,_.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rt,lastRenderedState:m},_}function Dn(m,_,x,L){return m.baseState=x,Nt(m,kn,typeof L=="function"?L:rt)}function fn(m,_,x,L,U){if(qc(m))throw Error(r(485));if(m=_.action,m!==null){var W={payload:U,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){W.listeners.push(me)}};Vn.T!==null?x(!0):W.isTransition=!1,L(W),x=_.pending,x===null?(W.next=_.pending=W,yi(_,W)):(W.next=x.next,_.pending=x.next=W)}}function yi(m,_){var x=_.action,L=_.payload,U=m.state;if(_.isTransition){var W=Vn.T,me={};Vn.T=me;try{var Be=x(U,L),je=Vn.S;je!==null&&je(me,Be),Hn(m,_,Be)}catch(Ct){Xn(m,_,Ct)}finally{Vn.T=W}}else try{W=x(U,L),Hn(m,_,W)}catch(Ct){Xn(m,_,Ct)}}function Hn(m,_,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(L){Mn(m,_,L)},function(L){return Xn(m,_,L)}):Mn(m,_,x)}function Mn(m,_,x){_.status="fulfilled",_.value=x,Rn(_),m.state=x,_=m.pending,_!==null&&(x=_.next,x===_?m.pending=null:(x=x.next,_.next=x,yi(m,x)))}function Xn(m,_,x){var L=m.pending;if(m.pending=null,L!==null){L=L.next;do _.status="rejected",_.reason=x,Rn(_),_=_.next;while(_!==L)}m.action=null}function Rn(m){m=m.listeners;for(var _=0;_<m.length;_++)(0,m[_])()}function ti(m,_){return _}function Gn(m,_){if(hi){var x=Li.formState;if(x!==null){e:{var L=Yn;if(hi){if(Wr){var U=Fm(Wr,qi);if(U){Wr=l0(U),L=Hm(U);break e}}ft(L)}L=!1}L&&(_=x[0])}}x=le(),x.memoizedState=x.baseState=_,L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:_},x.queue=L,x=am.bind(null,Yn,L),L.dispatch=x,L=ln(!1);var W=Qa.bind(null,Yn,!1,L.queue);return L=le(),U={state:_,dispatch:null,action:m,pending:null},L.queue=U,x=fn.bind(null,Yn,U,W,x),U.dispatch=x,L.memoizedState=m,[_,x,!1]}function Ui(m){var _=Te();return Ti(_,kn,m)}function Ti(m,_,x){_=Nt(m,_,ti)[0],m=Tt(rt)[0],_=typeof _=="object"&&_!==null&&typeof _.then=="function"?De(_):_;var L=Te(),U=L.queue,W=U.dispatch;return x!==L.memoizedState&&(Yn.flags|=2048,so(9,ss.bind(null,U,x),{destroy:void 0},null)),[_,W,m]}function ss(m,_){m.action=_}function ur(m){var _=Te(),x=kn;if(x!==null)return Ti(_,x,m);Te(),_=_.memoizedState,x=Te();var L=x.queue.dispatch;return x.memoizedState=m,[_,L,!1]}function so(m,_,x,L){return m={tag:m,create:_,inst:x,deps:L,next:null},_=Yn.updateQueue,_===null&&(_=ph(),Yn.updateQueue=_),x=_.lastEffect,x===null?_.lastEffect=m.next=m:(L=x.next,x.next=m,m.next=L,_.lastEffect=m),m}function Ol(){return Te().memoizedState}function jh(m,_,x,L){var U=le();Yn.flags|=m,U.memoizedState=so(1|_,x,{destroy:void 0},L===void 0?null:L)}function ic(m,_,x,L){var U=Te();L=L===void 0?null:L;var W=U.memoizedState.inst;kn!==null&&L!==null&&ae(L,kn.memoizedState.deps)?U.memoizedState=so(_,x,W,L):(Yn.flags|=m,U.memoizedState=so(1|_,x,W,L))}function Ip(m,_){jh(8390656,8,m,_)}function cf(m,_){ic(2048,8,m,_)}function Jg(m,_){return ic(4,2,m,_)}function Yc(m,_){return ic(4,4,m,_)}function Op(m,_){if(typeof _=="function"){m=m();var x=_(m);return function(){typeof x=="function"?x():_(null)}}if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function Np(m,_,x){x=x!=null?x.concat([m]):null,ic(4,4,Op.bind(null,_,m),x)}function sc(){}function Ja(m,_){var x=Te();_=_===void 0?null:_;var L=x.memoizedState;return _!==null&&ae(_,L[1])?L[0]:(x.memoizedState=[m,_],m)}function om(m,_){var x=Te();_=_===void 0?null:_;var L=x.memoizedState;if(_!==null&&ae(_,L[1]))return L[0];if(L=m(),rs){te(!0);try{m()}finally{te(!1)}}return x.memoizedState=[L,_],L}function Yh(m,_,x){return x===void 0||(Pu&1073741824)!==0?m.memoizedState=_:(m.memoizedState=x,m=bm(),Yn.lanes|=m,pa|=m,x)}function vr(m,_,x,L){return Vo(x,_)?x:cs.current!==null?(m=Yh(m,x,L),Vo(m,_)||($i=!0),m):(Pu&42)===0?($i=!0,m.memoizedState=x):(m=bm(),Yn.lanes|=m,pa|=m,_)}function rc(m,_,x,L,U){var W=zl();kr(W!==0&&8>W?W:8);var me=Vn.T,Be={};Vn.T=Be,Qa(m,!1,_,x);try{var je=U(),Ct=Vn.S;if(Ct!==null&&Ct(Be,je),je!==null&&typeof je=="object"&&typeof je.then=="function"){var zt=bt(je,L);Nl(m,_,zt,qs(m))}else Nl(m,_,L,qs(m))}catch(en){Nl(m,_,{then:function(){},status:"rejected",reason:en},qs())}finally{kr(W),Vn.T=me}}function Za(m){var _=m.memoizedState;if(_!==null)return _;_={memoizedState:cl,baseState:cl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rt,lastRenderedState:cl},next:null};var x={};return _.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rt,lastRenderedState:x},next:null},m.memoizedState=_,m=m.alternate,m!==null&&(m.memoizedState=_),_}function Kc(){return Hr(hl)}function oc(){return Te().memoizedState}function gu(){return Te().memoizedState}function Lp(m){for(var _=m.return;_!==null;){switch(_.tag){case 24:case 3:var x=qs();m=H(x);var L=oe(_,m,x);L!==null&&(Nr(L,_,x),ve(L,_,x)),_={cache:Tu()},m.payload=_;return}_=_.return}}function hf(m,_,x){var L=qs();x={lane:L,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},qc(m)?mo(_,x):(x=Ae(m,_,x,L),x!==null&&(Nr(x,m,L),_u(x,_,L)))}function am(m,_,x){var L=qs();Nl(m,_,x,L)}function Nl(m,_,x,L){var U={lane:L,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(qc(m))mo(_,U);else{var W=m.alternate;if(m.lanes===0&&(W===null||W.lanes===0)&&(W=_.lastRenderedReducer,W!==null))try{var me=_.lastRenderedState,Be=W(me,x);if(U.hasEagerState=!0,U.eagerState=Be,Vo(Be,me))return Se(m,_,U,0),Li===null&&J(),!1}catch{}finally{}if(x=Ae(m,_,U,L),x!==null)return Nr(x,m,L),_u(x,_,L),!0}return!1}function Qa(m,_,x,L){if(L={lane:2,revertLane:Xe(),action:L,hasEagerState:!1,eagerState:null,next:null},qc(m)){if(_)throw Error(r(479))}else _=Ae(m,x,L,2),_!==null&&Nr(_,m,2)}function qc(m){var _=m.alternate;return m===Yn||_!==null&&_===Yn}function mo(m,_){Ba=ml=!0;var x=m.pending;x===null?_.next=_:(_.next=x.next,x.next=_),m.pending=_}function _u(m,_,x){if((x&4194176)!==0){var L=_.lanes;L&=m.pendingLanes,x|=L,_.lanes=x,ne(m,x)}}function Jc(m,_,x,L){_=m.memoizedState,x=x(L,_),x=x==null?_:fd({},_,x),m.memoizedState=x,m.lanes===0&&(m.updateQueue.baseState=x)}function Kh(m,_,x,L,U,W,me){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(L,W,me):_.prototype&&_.prototype.isPureReactComponent?!$t(x,L)||!$t(U,W):!0}function Zg(m,_,x,L){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(x,L),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(x,L),_.state!==m&&ql.enqueueReplaceState(_,_.state,null)}function No(m,_){var x=_;if("ref"in _){x={};for(var L in _)L!=="ref"&&(x[L]=_[L])}if(m=m.defaultProps){x===_&&(x=fd({},x));for(var U in m)x[U]===void 0&&(x[U]=m[U])}return x}function qh(m,_){try{var x=m.onUncaughtError;x(_.value,{componentStack:_.stack})}catch(L){setTimeout(function(){throw L})}}function vu(m,_,x){try{var L=m.onCaughtError;L(x.value,{componentStack:x.stack,errorBoundary:_.tag===1?_.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function Ll(m,_,x){return x=H(x),x.tag=3,x.payload={element:null},x.callback=function(){qh(m,_)},x}function Zc(m){return m=H(m),m.tag=3,m}function Aa(m,_,x,L){var U=x.type.getDerivedStateFromError;if(typeof U=="function"){var W=L.value;m.payload=function(){return U(W)},m.callback=function(){vu(_,x,L)}}var me=x.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(m.callback=function(){vu(_,x,L),typeof U!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var Be=L.stack;this.componentDidCatch(L.value,{componentStack:Be!==null?Be:""})})}function lb(m,_,x,L,U){if(x.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){if(_=x.alternate,_!==null&&Qc(_,x,U,!0),x=qe.current,x!==null){switch(x.tag){case 13:return pn===null?ol():x.alternate===null&&ji===0&&(ji=3),x.flags&=-257,x.flags|=65536,x.lanes=U,L===xd?x.flags|=16384:(_=x.updateQueue,_===null?x.updateQueue=new Set([L]):_.add(L),rh(m,L,U)),!1;case 22:return x.flags|=65536,L===xd?x.flags|=16384:(_=x.updateQueue,_===null?(_={transitions:null,markerInstances:null,retryQueue:new Set([L])},x.updateQueue=_):(x=_.retryQueue,x===null?_.retryQueue=new Set([L]):x.add(L)),rh(m,L,U)),!1}throw Error(r(435,x.tag))}return rh(m,L,U),ol(),!1}if(hi)return _=qe.current,_!==null?((_.flags&65536)===0&&(_.flags|=256),_.flags|=65536,_.lanes=U,L!==Da&&(m=Error(r(422),{cause:L}),Ye(pe(m,x)))):(L!==Da&&(_=Error(r(423),{cause:L}),Ye(pe(_,x))),m=m.current.alternate,m.flags|=65536,U&=-U,m.lanes|=U,L=pe(L,x),U=Ll(m.stateNode,L,U),re(m,U),ji!==4&&(ji=2)),!1;var W=Error(r(520),{cause:L});if(W=pe(W,x),gh===null?gh=[W]:gh.push(W),ji!==4&&(ji=2),_===null)return!0;L=pe(L,x),x=_;do{switch(x.tag){case 3:return x.flags|=65536,m=U&-U,x.lanes|=m,m=Ll(x.stateNode,L,m),re(x,m),!1;case 1:if(_=x.type,W=x.stateNode,(x.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Ao===null||!Ao.has(W))))return x.flags|=65536,U&=-U,x.lanes|=U,U=Zc(U),Aa(U,m,x,L),re(x,U),!1}x=x.return}while(x!==null);return!1}function Fr(m,_,x,L){_.child=m===null?pl(_,null,x,L):ku(_,m.child,x,L)}function Dp(m,_,x,L,U){x=x.render;var W=_.ref;if("ref"in L){var me={};for(var Be in L)Be!=="ref"&&(me[Be]=L[Be])}else me=L;return yu(_),L=ge(m,_,x,me,W,U),Be=_t(),m!==null&&!$i?(Gt(m,_,U),bu(m,_,U)):(hi&&Be&&Ne(_),_.flags|=1,Fr(m,_,L,U),_.child)}function Qg(m,_,x,L,U){if(m===null){var W=x.type;return typeof W=="function"&&!Sf(W)&&W.defaultProps===void 0&&x.compare===null?(_.tag=15,_.type=W,e_(m,_,W,L,U)):(m=Ul(x.type,null,L,_,_.mode,U),m.ref=_.ref,m.return=_,_.child=m)}if(W=m.child,!ac(m,U)){var me=W.memoizedProps;if(x=x.compare,x=x!==null?x:$t,x(me,L)&&m.ref===_.ref)return bu(m,_,U)}return _.flags|=1,m=Uo(W,L),m.ref=_.ref,m.return=_,_.child=m}function e_(m,_,x,L,U){if(m!==null){var W=m.memoizedProps;if($t(W,L)&&m.ref===_.ref)if($i=!1,_.pendingProps=L=W,ac(m,U))(m.flags&131072)!==0&&($i=!0);else return _.lanes=m.lanes,bu(m,_,U)}return Dl(m,_,x,L,U)}function t_(m,_,x){var L=_.pendingProps,U=L.children,W=(_.stateNode._pendingVisibility&2)!==0,me=m!==null?m.memoizedState:null;if(Jh(m,_),L.mode==="hidden"||W){if((_.flags&128)!==0){if(L=me!==null?me.baseLanes|x:x,m!==null){for(U=_.child=m.child,W=0;U!==null;)W=W|U.lanes|U.childLanes,U=U.sibling;_.childLanes=W&~L}else _.childLanes=0,_.child=null;return n_(m,_,L,x)}if((x&536870912)!==0)_.memoizedState={baseLanes:0,cachePool:null},m!==null&&ff(_,me!==null?me.cachePool:null),me!==null?Nn(_,me):gn(),lr(_);else return _.lanes=_.childLanes=536870912,n_(m,_,me!==null?me.baseLanes|x:x,x)}else me!==null?(ff(_,me.cachePool),Nn(_,me),Rs(),_.memoizedState=null):(m!==null&&ff(_,null),gn(),Rs());return Fr(m,_,U,x),_.child}function n_(m,_,x,L){var U=Pp();return U=U===null?null:{parent:zr?ms._currentValue:ms._currentValue2,pool:U},_.memoizedState={baseLanes:x,cachePool:U},m!==null&&ff(_,null),gn(),lr(_),m!==null&&Qc(m,_,L,!0),null}function Jh(m,_){var x=_.ref;if(x===null)m!==null&&m.ref!==null&&(_.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(m===null||m.ref!==x)&&(_.flags|=2097664)}}function Dl(m,_,x,L,U){return yu(_),x=ge(m,_,x,L,void 0,U),L=_t(),m!==null&&!$i?(Gt(m,_,U),bu(m,_,U)):(hi&&L&&Ne(_),_.flags|=1,Fr(m,_,x,U),_.child)}function Zh(m,_,x,L,U,W){return yu(_),_.updateQueue=null,x=ot(_,L,x,U),Ue(m),L=_t(),m!==null&&!$i?(Gt(m,_,W),bu(m,_,W)):(hi&&L&&Ne(_),_.flags|=1,Fr(m,_,x,W),_.child)}function lm(m,_,x,L,U){if(yu(_),_.stateNode===null){var W=Xl,me=x.contextType;typeof me=="object"&&me!==null&&(W=Hr(me)),W=new x(L,W),_.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=ql,_.stateNode=W,W._reactInternals=_,W=_.stateNode,W.props=L,W.state=_.memoizedState,W.refs={},At(_),me=x.contextType,W.context=typeof me=="object"&&me!==null?Hr(me):Xl,W.state=_.memoizedState,me=x.getDerivedStateFromProps,typeof me=="function"&&(Jc(_,x,me,L),W.state=_.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(me=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),me!==W.state&&ql.enqueueReplaceState(W,W.state,null),lt(_,L,W,U),ye(),W.state=_.memoizedState),typeof W.componentDidMount=="function"&&(_.flags|=4194308),L=!0}else if(m===null){W=_.stateNode;var Be=_.memoizedProps,je=No(x,Be);W.props=je;var Ct=W.context,zt=x.contextType;me=Xl,typeof zt=="object"&&zt!==null&&(me=Hr(zt));var en=x.getDerivedStateFromProps;zt=typeof en=="function"||typeof W.getSnapshotBeforeUpdate=="function",Be=_.pendingProps!==Be,zt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Be||Ct!==me)&&Zg(_,W,L,me),Bu=!1;var nn=_.memoizedState;W.state=nn,lt(_,L,W,U),ye(),Ct=_.memoizedState,Be||nn!==Ct||Bu?(typeof en=="function"&&(Jc(_,x,en,L),Ct=_.memoizedState),(je=Bu||Kh(_,x,je,L,nn,Ct,me))?(zt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(_.flags|=4194308)):(typeof W.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=L,_.memoizedState=Ct),W.props=L,W.state=Ct,W.context=me,L=je):(typeof W.componentDidMount=="function"&&(_.flags|=4194308),L=!1)}else{W=_.stateNode,Ft(m,_),me=_.memoizedProps,zt=No(x,me),W.props=zt,en=_.pendingProps,nn=W.context,Ct=x.contextType,je=Xl,typeof Ct=="object"&&Ct!==null&&(je=Hr(Ct)),Be=x.getDerivedStateFromProps,(Ct=typeof Be=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(me!==en||nn!==je)&&Zg(_,W,L,je),Bu=!1,nn=_.memoizedState,W.state=nn,lt(_,L,W,U),ye();var Zn=_.memoizedState;me!==en||nn!==Zn||Bu||m!==null&&m.dependencies!==null&&eh(m.dependencies)?(typeof Be=="function"&&(Jc(_,x,Be,L),Zn=_.memoizedState),(zt=Bu||Kh(_,x,zt,L,nn,Zn,je)||m!==null&&m.dependencies!==null&&eh(m.dependencies))?(Ct||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(L,Zn,je),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(L,Zn,je)),typeof W.componentDidUpdate=="function"&&(_.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof W.componentDidUpdate!="function"||me===m.memoizedProps&&nn===m.memoizedState||(_.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||me===m.memoizedProps&&nn===m.memoizedState||(_.flags|=1024),_.memoizedProps=L,_.memoizedState=Zn),W.props=L,W.state=Zn,W.context=je,L=zt):(typeof W.componentDidUpdate!="function"||me===m.memoizedProps&&nn===m.memoizedState||(_.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||me===m.memoizedProps&&nn===m.memoizedState||(_.flags|=1024),L=!1)}return W=L,Jh(m,_),L=(_.flags&128)!==0,W||L?(W=_.stateNode,x=L&&typeof x.getDerivedStateFromError!="function"?null:W.render(),_.flags|=1,m!==null&&L?(_.child=ku(_,m.child,null,U),_.child=ku(_,null,x,U)):Fr(m,_,x,U),_.memoizedState=W.state,m=_.child):m=bu(m,_,U),m}function i_(m,_,x,L){return Re(),_.flags|=256,Fr(m,_,x,L),_.child}function um(m){return{baseLanes:m,cachePool:Up()}}function df(m,_,x){return m=m!==null?m.childLanes&~x:0,_&&(m|=ma),m}function s_(m,_,x){var L=_.pendingProps,U=!1,W=(_.flags&128)!==0,me;if((me=W)||(me=m!==null&&m.memoizedState===null?!1:(wn.current&2)!==0),me&&(U=!0,_.flags&=-129),me=(_.flags&32)!==0,_.flags&=-33,m===null){if(hi){if(U?is(_):Rs(),hi){var Be=Wr,je;(je=Be)&&(Be=c0(Be,qi),Be!==null?(_.memoizedState={dehydrated:Be,treeContext:Sc!==null?{id:Yl,overflow:La}:null,retryLane:536870912},je=n(18,null,null,0),je.stateNode=Be,je.return=_,_.child=je,Is=_,Wr=null,je=!0):je=!1),je||ft(_)}if(Be=_.memoizedState,Be!==null&&(Be=Be.dehydrated,Be!==null))return a0(Be)?_.lanes=16:_.lanes=536870912,null;Cn(_)}return Be=L.children,L=L.fallback,U?(Rs(),U=_.mode,Be=hm({mode:"hidden",children:Be},U),L=Bs(L,U,x,null),Be.return=_,L.return=_,Be.sibling=L,_.child=Be,U=_.child,U.memoizedState=um(x),U.childLanes=df(m,me,x),_.memoizedState=gl,L):(is(_),cm(_,Be))}if(je=m.memoizedState,je!==null&&(Be=je.dehydrated,Be!==null)){if(W)_.flags&256?(is(_),_.flags&=-257,_=Bp(m,_,x)):_.memoizedState!==null?(Rs(),_.child=m.child,_.flags|=128,_=null):(Rs(),U=L.fallback,Be=_.mode,L=hm({mode:"visible",children:L.children},Be),U=Bs(U,Be,x,null),U.flags|=2,L.return=_,U.return=_,L.sibling=U,_.child=L,ku(_,m.child,null,x),L=_.child,L.memoizedState=um(x),L.childLanes=df(m,me,x),_.memoizedState=gl,_=U);else if(is(_),a0(Be))me=g_(Be).digest,L=Error(r(419)),L.stack="",L.digest=me,Ye({value:L,source:null,stack:null}),_=Bp(m,_,x);else if($i||Qc(m,_,x,!1),me=(x&m.childLanes)!==0,$i||me){if(me=Li,me!==null){if(L=x&-x,(L&42)!==0)L=1;else switch(L){case 2:L=1;break;case 8:L=4;break;case 32:L=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:L=64;break;case 268435456:L=134217728;break;default:L=0}if(L=(L&(me.suspendedLanes|x))!==0?0:L,L!==0&&L!==je.retryLane)throw je.retryLane=L,we(m,L),Nr(me,m,L),v0}o0(Be)||ol(),_=Bp(m,_,x)}else o0(Be)?(_.flags|=128,_.child=m.child,_=wu.bind(null,m),__(Be,_),_=null):(m=je.treeContext,Vr&&(Wr=zm(Be),Is=_,hi=!0,fr=null,qi=!1,m!==null&&(ua[ca++]=Yl,ua[ca++]=La,ua[ca++]=Sc,Yl=m.id,La=m.overflow,Sc=_)),_=cm(_,L.children),_.flags|=4096);return _}return U?(Rs(),U=L.fallback,Be=_.mode,je=m.child,W=je.sibling,L=Uo(je,{mode:"hidden",children:L.children}),L.subtreeFlags=je.subtreeFlags&31457280,W!==null?U=Uo(W,U):(U=Bs(U,Be,x,null),U.flags|=2),U.return=_,L.return=_,L.sibling=U,_.child=L,L=U,U=_.child,Be=m.child.memoizedState,Be===null?Be=um(x):(je=Be.cachePool,je!==null?(W=zr?ms._currentValue:ms._currentValue2,je=je.parent!==W?{parent:W,pool:W}:je):je=Up(),Be={baseLanes:Be.baseLanes|x,cachePool:je}),U.memoizedState=Be,U.childLanes=df(m,me,x),_.memoizedState=gl,L):(is(_),x=m.child,m=x.sibling,x=Uo(x,{mode:"visible",children:L.children}),x.return=_,x.sibling=null,m!==null&&(me=_.deletions,me===null?(_.deletions=[m],_.flags|=16):me.push(m)),_.child=x,_.memoizedState=null,x)}function cm(m,_){return _=hm({mode:"visible",children:_},m.mode),_.return=m,m.child=_}function hm(m,_){return aa(m,_,0,null)}function Bp(m,_,x){return ku(_,m.child,null,x),m=cm(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function r_(m,_,x){m.lanes|=_;var L=m.alternate;L!==null&&(L.lanes|=_),Qh(m.return,_,x)}function dm(m,_,x,L,U){var W=m.memoizedState;W===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:L,tail:x,tailMode:U}:(W.isBackwards=_,W.rendering=null,W.renderingStartTime=0,W.last=L,W.tail=x,W.tailMode=U)}function fm(m,_,x){var L=_.pendingProps,U=L.revealOrder,W=L.tail;if(Fr(m,_,L.children,x),L=wn.current,(L&2)!==0)L=L&1|2,_.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&r_(m,x,_);else if(m.tag===19)r_(m,x,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}L&=1}switch(w(wn,L),U){case"forwards":for(x=_.child,U=null;x!==null;)m=x.alternate,m!==null&&Ks(m)===null&&(U=x),x=x.sibling;x=U,x===null?(U=_.child,_.child=null):(U=x.sibling,x.sibling=null),dm(_,!1,U,x,W);break;case"backwards":for(x=null,U=_.child,_.child=null;U!==null;){if(m=U.alternate,m!==null&&Ks(m)===null){_.child=U;break}m=U.sibling,U.sibling=x,x=U,U=m}dm(_,!0,x,null,W);break;case"together":dm(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function bu(m,_,x){if(m!==null&&(_.dependencies=m.dependencies),pa|=_.lanes,(x&_.childLanes)===0)if(m!==null){if(Qc(m,_,x,!1),(x&_.childLanes)===0)return null}else return null;if(m!==null&&_.child!==m.child)throw Error(r(153));if(_.child!==null){for(m=_.child,x=Uo(m,m.pendingProps),_.child=x,x.return=_;m.sibling!==null;)m=m.sibling,x=x.sibling=Uo(m,m.pendingProps),x.return=_;x.sibling=null}return _.child}function ac(m,_){return(m.lanes&_)!==0?!0:(m=m.dependencies,!!(m!==null&&eh(m)))}function pm(m,_,x){switch(_.tag){case 3:Ee(_,_.stateNode.containerInfo),$a(_,ms,m.memoizedState.cache),Re();break;case 27:case 5:Fe(_);break;case 4:Ee(_,_.stateNode.containerInfo);break;case 10:$a(_,_.type,_.memoizedProps.value);break;case 13:var L=_.memoizedState;if(L!==null)return L.dehydrated!==null?(is(_),_.flags|=128,null):(x&_.child.childLanes)!==0?s_(m,_,x):(is(_),m=bu(m,_,x),m!==null?m.sibling:null);is(_);break;case 19:var U=(m.flags&128)!==0;if(L=(x&_.childLanes)!==0,L||(Qc(m,_,x,!1),L=(x&_.childLanes)!==0),U){if(L)return fm(m,_,x);_.flags|=128}if(U=_.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),w(wn,wn.current),L)break;return null;case 22:case 23:return _.lanes=0,t_(m,_,x);case 24:$a(_,ms,m.memoizedState.cache)}return bu(m,_,x)}function o_(m,_,x){if(m!==null)if(m.memoizedProps!==_.pendingProps)$i=!0;else{if(!ac(m,x)&&(_.flags&128)===0)return $i=!1,pm(m,_,x);$i=(m.flags&131072)!==0}else $i=!1,hi&&(_.flags&1048576)!==0&&fe(_,tt,_.index);switch(_.lanes=0,_.tag){case 16:e:{m=_.pendingProps;var L=_.elementType,U=L._init;if(L=U(L._payload),_.type=L,typeof L=="function")Sf(L)?(m=No(L,m),_.tag=1,_=lm(null,_,L,m,x)):(_.tag=0,_=Dl(null,_,L,m,x));else{if(L!=null){if(U=L.$$typeof,U===Iu){_.tag=11,_=Dp(null,_,L,m,x);break e}else if(U===Kp){_.tag=14,_=Qg(null,_,L,m,x);break e}}throw _=l(L)||L,Error(r(306,_,""))}}return _;case 0:return Dl(m,_,_.type,_.pendingProps,x);case 1:return L=_.type,U=No(L,_.pendingProps),lm(m,_,L,U,x);case 3:e:{if(Ee(_,_.stateNode.containerInfo),m===null)throw Error(r(387));var W=_.pendingProps;U=_.memoizedState,L=U.element,Ft(m,_),lt(_,W,null,x);var me=_.memoizedState;if(W=me.cache,$a(_,ms,W),W!==U.cache&&lc(_,[ms],x,!0),ye(),W=me.element,Vr&&U.isDehydrated)if(U={element:W,isDehydrated:!1,cache:me.cache},_.updateQueue.baseState=U,_.memoizedState=U,_.flags&256){_=i_(m,_,W,x);break e}else if(W!==L){L=pe(Error(r(424)),_),Ye(L),_=i_(m,_,W,x);break e}else for(Vr&&(Wr=Gm(_.stateNode.containerInfo),Is=_,hi=!0,fr=null,qi=!0),x=pl(_,null,W,x),_.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Re(),W===L){_=bu(m,_,x);break e}Fr(m,_,W,x)}_=_.child}return _;case 26:if(Go)return Jh(m,_),m===null?(x=jm(_.type,null,_.pendingProps,null))?_.memoizedState=x:hi||(_.stateNode=f0(_.type,_.pendingProps,fl.current,_)):_.memoizedState=jm(_.type,m.memoizedProps,_.pendingProps,m.memoizedState),null;case 27:if(ri)return Fe(_),m===null&&ri&&hi&&(L=_.stateNode=Et(_.type,_.pendingProps,fl.current,Tr.current,!1),Is=_,qi=!0,Wr=kf(L)),L=_.pendingProps.children,m!==null||hi?Fr(m,_,L,x):_.child=ku(_,null,L,x),Jh(m,_),_.child;case 5:return m===null&&hi&&(Ff(_.type,_.pendingProps,Tr.current),(U=L=Wr)&&(L=v_(L,_.type,_.pendingProps,qi),L!==null?(_.stateNode=L,Is=_,Wr=kf(L),qi=!1,U=!0):U=!1),U||ft(_)),Fe(_),U=_.type,W=_.pendingProps,me=m!==null?m.memoizedProps:null,L=W.children,jn(U,W)?L=null:me!==null&&jn(U,me)&&(_.flags|=32),_.memoizedState!==null&&(U=ge(m,_,ht,null,null,x),zr?hl._currentValue=U:hl._currentValue2=U),Jh(m,_),Fr(m,_,L,x),_.child;case 6:return m===null&&hi&&(Xm(_.pendingProps,Tr.current),(m=x=Wr)&&(x=u0(x,_.pendingProps,qi),x!==null?(_.stateNode=x,Is=_,Wr=null,m=!0):m=!1),m||ft(_)),null;case 13:return s_(m,_,x);case 4:return Ee(_,_.stateNode.containerInfo),L=_.pendingProps,m===null?_.child=ku(_,null,L,x):Fr(m,_,L,x),_.child;case 11:return Dp(m,_,_.type,_.pendingProps,x);case 7:return Fr(m,_,_.pendingProps,x),_.child;case 8:return Fr(m,_,_.pendingProps.children,x),_.child;case 12:return Fr(m,_,_.pendingProps.children,x),_.child;case 10:return L=_.pendingProps,$a(_,_.type,L.value),Fr(m,_,L.children,x),_.child;case 9:return U=_.type._context,L=_.pendingProps.children,yu(_),U=Hr(U),L=L(U),_.flags|=1,Fr(m,_,L,x),_.child;case 14:return Qg(m,_,_.type,_.pendingProps,x);case 15:return e_(m,_,_.type,_.pendingProps,x);case 19:return fm(m,_,x);case 22:return t_(m,_,x);case 24:return yu(_),L=Hr(ms),m===null?(U=Pp(),U===null&&(U=Li,W=Tu(),U.pooledCache=W,W.refCount++,W!==null&&(U.pooledCacheLanes|=x),U=W),_.memoizedState={parent:L,cache:U},At(_),$a(_,ms,U)):((m.lanes&x)!==0&&(Ft(m,_),lt(_,null,null,x),ye()),U=m.memoizedState,W=_.memoizedState,U.parent!==L?(U={parent:L,cache:L},_.memoizedState=U,_.lanes===0&&(_.memoizedState=_.updateQueue.baseState=U),$a(_,ms,L)):(L=W.cache,$a(_,ms,L),L!==U.cache&&lc(_,[ms],x,!0))),Fr(m,_,_.pendingProps.children,x),_.child;case 29:throw _.pendingProps}throw Error(r(156,_.tag))}function $a(m,_,x){zr?(w(da,_._currentValue),_._currentValue=x):(w(da,_._currentValue2),_._currentValue2=x)}function el(m){var _=da.current;zr?m._currentValue=_:m._currentValue2=_,E(da)}function Qh(m,_,x){for(;m!==null;){var L=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,L!==null&&(L.childLanes|=_)):L!==null&&(L.childLanes&_)!==_&&(L.childLanes|=_),m===x)break;m=m.return}}function lc(m,_,x,L){var U=m.child;for(U!==null&&(U.return=m);U!==null;){var W=U.dependencies;if(W!==null){var me=U.child;W=W.firstContext;e:for(;W!==null;){var Be=W;W=U;for(var je=0;je<_.length;je++)if(Be.context===_[je]){W.lanes|=x,Be=W.alternate,Be!==null&&(Be.lanes|=x),Qh(W.return,x,m),L||(me=null);break e}W=Be.next}}else if(U.tag===18){if(me=U.return,me===null)throw Error(r(341));me.lanes|=x,W=me.alternate,W!==null&&(W.lanes|=x),Qh(me,x,m),me=null}else me=U.child;if(me!==null)me.return=U;else for(me=U;me!==null;){if(me===m){me=null;break}if(U=me.sibling,U!==null){U.return=me.return,me=U;break}me=me.return}U=me}}function Qc(m,_,x,L){m=null;for(var U=_,W=!1;U!==null;){if(!W){if((U.flags&524288)!==0)W=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var me=U.alternate;if(me===null)throw Error(r(387));if(me=me.memoizedProps,me!==null){var Be=U.type;Vo(U.pendingProps.value,me.value)||(m!==null?m.push(Be):m=[Be])}}else if(U===Ac.current){if(me=U.alternate,me===null)throw Error(r(387));me.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(m!==null?m.push(hl):m=[hl])}U=U.return}m!==null&&lc(_,m,x,L),_.flags|=262144}function eh(m){for(m=m.firstContext;m!==null;){var _=m.context;if(!Vo(zr?_._currentValue:_._currentValue2,m.memoizedValue))return!0;m=m.next}return!1}function yu(m){Xr=m,Pr=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function Hr(m){return kp(Xr,m)}function ed(m,_){return Xr===null&&yu(m),kp(m,_)}function kp(m,_){var x=zr?_._currentValue:_._currentValue2;if(_={context:_,memoizedValue:x,next:null},Pr===null){if(m===null)throw Error(r(308));Pr=_,m.dependencies={lanes:0,firstContext:_},m.flags|=524288}else Pr=Pr.next=_;return x}function Tu(){return{controller:new Sr,data:new Map,refCount:0}}function td(m){m.refCount--,m.refCount===0&&$_(x_,function(){m.controller.abort()})}function Pp(){var m=Jl.current;return m!==null?m:Li.pooledCache}function ff(m,_){_===null?w(Jl,Jl.current):w(Jl,_.pool)}function Up(){var m=Pp();return m===null?null:{parent:zr?ms._currentValue:ms._currentValue2,pool:m}}function Lo(m){m.flags|=4}function Eu(m,_){if(m!==null&&m.child===_.child)return!1;if((_.flags&16)!==0)return!0;for(m=_.child;m!==null;){if((m.flags&13878)!==0||(m.subtreeFlags&13878)!==0)return!0;m=m.sibling}return!1}function uc(m,_,x,L){if(Hs)for(x=_.child;x!==null;){if(x.tag===5||x.tag===6)Nu(m,x.stateNode);else if(!(x.tag===4||ri&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===_)break;for(;x.sibling===null;){if(x.return===null||x.return===_)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(la)for(var U=_.child;U!==null;){if(U.tag===5){var W=U.stateNode;x&&L&&(W=Pm(W,U.type,U.memoizedProps)),Nu(m,W)}else if(U.tag===6)W=U.stateNode,x&&L&&(W=Um(W,U.memoizedProps)),Nu(m,W);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)W=U.child,W!==null&&(W.return=U),uc(m,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===_)break;for(;U.sibling===null;){if(U.return===null||U.return===_)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function Fp(m,_,x,L){if(la)for(var U=_.child;U!==null;){if(U.tag===5){var W=U.stateNode;x&&L&&(W=Pm(W,U.type,U.memoizedProps)),r0(m,W)}else if(U.tag===6)W=U.stateNode,x&&L&&(W=Um(W,U.memoizedProps)),r0(m,W);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)W=U.child,W!==null&&(W.return=U),Fp(m,U,!(U.memoizedProps!==null&&U.memoizedProps.mode==="manual"),!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===_)break;for(;U.sibling===null;){if(U.return===null||U.return===_)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function th(m,_){if(la&&Eu(m,_)){m=_.stateNode;var x=m.containerInfo,L=_d();Fp(L,_,!1,!1),m.pendingChildren=L,Lo(_),Bf(x,L)}}function xa(m,_,x,L){if(Hs)m.memoizedProps!==L&&Lo(_);else if(la){var U=m.stateNode,W=m.memoizedProps;if((m=Eu(m,_))||W!==L){var me=Tr.current;W=ah(U,x,W,L,!m,null),W===U?_.stateNode=U:(Br(W,x,L,me)&&Lo(_),_.stateNode=W,m?uc(W,_,!1,!1):Lo(_))}else _.stateNode=U}}function pf(m,_,x){if(Zp(_,x)){if(m.flags|=16777216,!Qp(_,x))if(Ru())m.flags|=8192;else throw xc=xd,$d}else m.flags&=-16777217}function mf(m,_){if(Ec(_)){if(m.flags|=16777216,!Ed(_))if(Ru())m.flags|=8192;else throw xc=xd,$d}else m.flags&=-16777217}function Su(m,_){_!==null&&(m.flags|=4),m.flags&16384&&(_=m.tag!==22?G():536870912,m.lanes|=_,Ql|=_)}function nh(m,_){if(!hi)switch(m.tailMode){case"hidden":_=m.tail;for(var x=null;_!==null;)_.alternate!==null&&(x=_),_=_.sibling;x===null?m.tail=null:x.sibling=null;break;case"collapsed":x=m.tail;for(var L=null;x!==null;)x.alternate!==null&&(L=x),x=x.sibling;L===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:L.sibling=null}}function Ss(m){var _=m.alternate!==null&&m.alternate.child===m.child,x=0,L=0;if(_)for(var U=m.child;U!==null;)x|=U.lanes|U.childLanes,L|=U.subtreeFlags&31457280,L|=U.flags&31457280,U.return=m,U=U.sibling;else for(U=m.child;U!==null;)x|=U.lanes|U.childLanes,L|=U.subtreeFlags,L|=U.flags,U.return=m,U=U.sibling;return m.subtreeFlags|=L,m.childLanes=x,_}function a_(m,_,x){var L=_.pendingProps;switch(Pe(_),_.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(_),null;case 1:return Ss(_),null;case 3:return x=_.stateNode,L=null,m!==null&&(L=m.memoizedState.cache),_.memoizedState.cache!==L&&(_.flags|=2048),el(ms),We(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(m===null||m.child===null)&&(Ht(_)?Lo(_):m===null||m.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,fr!==null&&(yf(fr),fr=null))),th(m,_),Ss(_),null;case 26:if(Go){x=_.type;var U=_.memoizedState;return m===null?(Lo(_),U!==null?(Ss(_),mf(_,U)):(Ss(_),pf(_,x,L))):U?U!==m.memoizedState?(Lo(_),Ss(_),mf(_,U)):(Ss(_),_.flags&=-16777217):(Hs?m.memoizedProps!==L&&Lo(_):xa(m,_,x,L),Ss(_),pf(_,x,L)),null}case 27:if(ri){if(gt(_),x=fl.current,U=_.type,m!==null&&_.stateNode!=null)Hs?m.memoizedProps!==L&&Lo(_):xa(m,_,U,L);else{if(!L){if(_.stateNode===null)throw Error(r(166));return Ss(_),null}m=Tr.current,Ht(_)?Ut(_,m):(m=Et(U,L,x,m,!0),_.stateNode=m,Lo(_))}return Ss(_),null}case 5:if(gt(_),x=_.type,m!==null&&_.stateNode!=null)xa(m,_,x,L);else{if(!L){if(_.stateNode===null)throw Error(r(166));return Ss(_),null}m=Tr.current,Ht(_)?Ut(_,m):(U=qp(x,L,fl.current,m,_),uc(U,_,!1,!1),_.stateNode=U,Br(U,x,L,m)&&Lo(_))}return Ss(_),pf(_,_.type,_.pendingProps),null;case 6:if(m&&_.stateNode!=null)x=m.memoizedProps,Hs?x!==L&&Lo(_):la&&(x!==L?(_.stateNode=Xi(L,fl.current,Tr.current,_),Lo(_)):_.stateNode=m.stateNode);else{if(typeof L!="string"&&_.stateNode===null)throw Error(r(166));if(m=fl.current,x=Tr.current,Ht(_)){if(!Vr)throw Error(r(176));if(m=_.stateNode,x=_.memoizedProps,L=null,U=Is,U!==null)switch(U.tag){case 27:case 5:L=U.memoizedProps}h0(m,x,_,L)||ft(_)}else _.stateNode=Xi(L,m,x,_)}return Ss(_),null;case 13:if(L=_.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(U=Ht(_),L!==null&&L.dehydrated!==null){if(m===null){if(!U)throw Error(r(318));if(!Vr)throw Error(r(344));if(U=_.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(r(317));b_(U,_)}else Re(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;Ss(_),U=!1}else fr!==null&&(yf(fr),fr=null),U=!0;if(!U)return _.flags&256?(Cn(_),_):(Cn(_),null)}if(Cn(_),(_.flags&128)!==0)return _.lanes=x,_;if(x=L!==null,m=m!==null&&m.memoizedState!==null,x){L=_.child,U=null,L.alternate!==null&&L.alternate.memoizedState!==null&&L.alternate.memoizedState.cachePool!==null&&(U=L.alternate.memoizedState.cachePool.pool);var W=null;L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(W=L.memoizedState.cachePool.pool),W!==U&&(L.flags|=2048)}return x!==m&&x&&(_.child.flags|=8192),Su(_,_.updateQueue),Ss(_),null;case 4:return We(),th(m,_),m===null&&er(_.stateNode.containerInfo),Ss(_),null;case 10:return el(_.type),Ss(_),null;case 19:if(E(wn),U=_.memoizedState,U===null)return Ss(_),null;if(L=(_.flags&128)!==0,W=U.rendering,W===null)if(L)nh(U,!1);else{if(ji!==0||m!==null&&(m.flags&128)!==0)for(m=_.child;m!==null;){if(W=Ks(m),W!==null){for(_.flags|=128,nh(U,!1),m=W.updateQueue,_.updateQueue=m,Su(_,m),_.subtreeFlags=0,m=x,x=_.child;x!==null;)Af(x,m),x=x.sibling;return w(wn,wn.current&1|2),_.child}m=m.sibling}U.tail!==null&&Na()>Md&&(_.flags|=128,L=!0,nh(U,!1),_.lanes=4194304)}else{if(!L)if(m=Ks(W),m!==null){if(_.flags|=128,L=!0,m=m.updateQueue,_.updateQueue=m,Su(_,m),nh(U,!0),U.tail===null&&U.tailMode==="hidden"&&!W.alternate&&!hi)return Ss(_),null}else 2*Na()-U.renderingStartTime>Md&&x!==536870912&&(_.flags|=128,L=!0,nh(U,!1),_.lanes=4194304);U.isBackwards?(W.sibling=_.child,_.child=W):(m=U.last,m!==null?m.sibling=W:_.child=W,U.last=W)}return U.tail!==null?(_=U.tail,U.rendering=_,U.tail=_.sibling,U.renderingStartTime=Na(),_.sibling=null,m=wn.current,w(wn,L?m&1|2:m&1),_):(Ss(_),null);case 22:case 23:return Cn(_),zn(),L=_.memoizedState!==null,m!==null?m.memoizedState!==null!==L&&(_.flags|=8192):L&&(_.flags|=8192),L?(x&536870912)!==0&&(_.flags&128)===0&&(Ss(_),_.subtreeFlags&6&&(_.flags|=8192)):Ss(_),x=_.updateQueue,x!==null&&Su(_,x.retryQueue),x=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),L=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(L=_.memoizedState.cachePool.pool),L!==x&&(_.flags|=2048),m!==null&&E(Jl),null;case 24:return x=null,m!==null&&(x=m.memoizedState.cache),_.memoizedState.cache!==x&&(_.flags|=2048),el(ms),Ss(_),null;case 25:return null}throw Error(r(156,_.tag))}function mm(m,_){switch(Pe(_),_.tag){case 1:return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return el(ms),We(),m=_.flags,(m&65536)!==0&&(m&128)===0?(_.flags=m&-65537|128,_):null;case 26:case 27:case 5:return gt(_),null;case 13:if(Cn(_),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(r(340));Re()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return E(wn),null;case 4:return We(),null;case 10:return el(_.type),null;case 22:case 23:return Cn(_),zn(),m!==null&&E(Jl),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 24:return el(ms),null;case 25:return null;default:return null}}function gm(m,_){switch(Pe(_),_.tag){case 3:el(ms),We();break;case 26:case 27:case 5:gt(_);break;case 4:We();break;case 13:Cn(_);break;case 19:E(wn);break;case 10:el(_.type);break;case 22:case 23:Cn(_),zn(),m!==null&&E(Jl);break;case 24:el(ms)}}function gf(m,_){try{var x=_.updateQueue,L=x!==null?x.lastEffect:null;if(L!==null){var U=L.next;x=U;do{if((x.tag&m)===m){L=void 0;var W=x.create,me=x.inst;L=W(),me.destroy=L}x=x.next}while(x!==U)}}catch(Be){Fi(_,_.return,Be)}}function cc(m,_,x){try{var L=_.updateQueue,U=L!==null?L.lastEffect:null;if(U!==null){var W=U.next;L=W;do{if((L.tag&m)===m){var me=L.inst,Be=me.destroy;if(Be!==void 0){me.destroy=void 0,U=_;var je=x;try{Be()}catch(Ct){Fi(U,je,Ct)}}}L=L.next}while(L!==W)}}catch(Ct){Fi(_,_.return,Ct)}}function l_(m){var _=m.updateQueue;if(_!==null){var x=m.stateNode;try{Ze(_,x)}catch(L){Fi(m,m.return,L)}}}function Do(m,_,x){x.props=No(m.type,m.memoizedProps),x.state=m.memoizedState;try{x.componentWillUnmount()}catch(L){Fi(m,_,L)}}function tl(m,_){try{var x=m.ref;if(x!==null){var L=m.stateNode;switch(m.tag){case 26:case 27:case 5:var U=Gl(L);break;default:U=L}typeof x=="function"?m.refCleanup=x(U):x.current=U}}catch(W){Fi(m,_,W)}}function wr(m,_){var x=m.ref,L=m.refCleanup;if(x!==null)if(typeof L=="function")try{L()}catch(U){Fi(m,_,U)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(U){Fi(m,_,U)}else x.current=null}function Hp(m){var _=m.type,x=m.memoizedProps,L=m.stateNode;try{hb(L,_,x,m)}catch(U){Fi(m,m.return,U)}}function Gp(m,_,x){try{yc(m.stateNode,m.type,x,_,m)}catch(L){Fi(m,m.return,L)}}function nd(m){return m.tag===5||m.tag===3||(Go?m.tag===26:!1)||(ri?m.tag===27:!1)||m.tag===4}function id(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||nd(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&(!ri||m.tag!==27)&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function _m(m,_,x){var L=m.tag;if(L===5||L===6)m=m.stateNode,_?Lf(x,m,_):wm(x,m);else if(!(L===4||ri&&L===27)&&(m=m.child,m!==null))for(_m(m,_,x),m=m.sibling;m!==null;)_m(m,_,x),m=m.sibling}function Au(m,_,x){var L=m.tag;if(L===5||L===6)m=m.stateNode,_?Om(x,m,_):i0(x,m);else if(!(L===4||ri&&L===27)&&(m=m.child,m!==null))for(Au(m,_,x),m=m.sibling;m!==null;)Au(m,_,x),m=m.sibling}function _f(m,_,x){m=m.containerInfo;try{vd(m,x)}catch(L){Fi(_,_.return,L)}}function sd(m,_){for(gd(m.containerInfo),qn=_;qn!==null;)if(m=qn,_=m.child,(m.subtreeFlags&1028)!==0&&_!==null)_.return=m,qn=_;else for(;qn!==null;){m=qn;var x=m.alternate;switch(_=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((_&1024)!==0&&x!==null){_=void 0;var L=m,U=x.memoizedProps;x=x.memoizedState;var W=L.stateNode;try{var me=No(L.type,U,L.elementType===L.type);_=W.getSnapshotBeforeUpdate(me,x),W.__reactInternalSnapshotBeforeUpdate=_}catch(Be){Fi(L,L.return,Be)}}break;case 3:(_&1024)!==0&&Hs&&km(m.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((_&1024)!==0)throw Error(r(163))}if(_=m.sibling,_!==null){_.return=m.return,qn=_;break}qn=m.return}return me=ii,ii=!1,me}function nl(m,_,x){var L=x.flags;switch(x.tag){case 0:case 11:case 15:Bo(m,x),L&4&&gf(5,x);break;case 1:if(Bo(m,x),L&4)if(m=x.stateNode,_===null)try{m.componentDidMount()}catch(Be){Fi(x,x.return,Be)}else{var U=No(x.type,_.memoizedProps);_=_.memoizedState;try{m.componentDidUpdate(U,_,m.__reactInternalSnapshotBeforeUpdate)}catch(Be){Fi(x,x.return,Be)}}L&64&&l_(x),L&512&&tl(x,x.return);break;case 3:if(Bo(m,x),L&64&&(L=x.updateQueue,L!==null)){if(m=null,x.child!==null)switch(x.child.tag){case 27:case 5:m=Gl(x.child.stateNode);break;case 1:m=x.child.stateNode}try{Ze(L,m)}catch(Be){Fi(x,x.return,Be)}}break;case 26:if(Go){Bo(m,x),L&512&&tl(x,x.return);break}case 27:case 5:Bo(m,x),_===null&&L&4&&Hp(x),L&512&&tl(x,x.return);break;case 12:Bo(m,x);break;case 13:Bo(m,x),L&4&&Vp(m,x);break;case 22:if(U=x.memoizedState!==null||Uu,!U){_=_!==null&&_.memoizedState!==null||Ps;var W=Uu,me=Ps;Uu=U,(Ps=_)&&!me?il(m,x,(x.subtreeFlags&8772)!==0):Bo(m,x),Uu=W,Ps=me}L&512&&(x.memoizedProps.mode==="manual"?tl(x,x.return):wr(x,x.return));break;default:Bo(m,x)}}function zp(m){var _=m.alternate;_!==null&&(m.alternate=null,zp(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&cb(_)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Ir(m,_,x){for(x=x.child;x!==null;)hc(m,_,x),x=x.sibling}function hc(m,_,x){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(tr,x)}catch{}switch(x.tag){case 26:if(Go){Ps||wr(x,_),Ir(m,_,x),x.memoizedState?Tc(x.memoizedState):x.stateNode&&Td(x.stateNode);break}case 27:if(ri){Ps||wr(x,_);var L=On,U=si;On=x.stateNode,Ir(m,_,x),lh(x.stateNode),On=L,si=U;break}case 5:Ps||wr(x,_);case 6:if(Hs){if(L=On,U=si,On=null,Ir(m,_,x),On=L,si=U,On!==null)if(si)try{Nm(On,x.stateNode)}catch(W){Fi(x,_,W)}else try{s0(On,x.stateNode)}catch(W){Fi(x,_,W)}}else Ir(m,_,x);break;case 18:Hs&&On!==null&&(si?bd(On,x.stateNode):Wm(On,x.stateNode));break;case 4:Hs?(L=On,U=si,On=x.stateNode.containerInfo,si=!0,Ir(m,_,x),On=L,si=U):(la&&_f(x.stateNode,x,_d()),Ir(m,_,x));break;case 0:case 11:case 14:case 15:Ps||cc(2,x,_),Ps||cc(4,x,_),Ir(m,_,x);break;case 1:Ps||(wr(x,_),L=x.stateNode,typeof L.componentWillUnmount=="function"&&Do(x,_,L)),Ir(m,_,x);break;case 21:Ir(m,_,x);break;case 22:Ps||wr(x,_),Ps=(L=Ps)||x.memoizedState!==null,Ir(m,_,x),Ps=L;break;default:Ir(m,_,x)}}function Vp(m,_){if(Vr&&_.memoizedState===null&&(m=_.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{T_(m)}catch(x){Fi(_,_.return,x)}}function u_(m){switch(m.tag){case 13:case 19:var _=m.stateNode;return _===null&&(_=m.stateNode=new Oi),_;case 22:return m=m.stateNode,_=m._retryCache,_===null&&(_=m._retryCache=new Oi),_;default:throw Error(r(435,m.tag))}}function $u(m,_){var x=u_(m);_.forEach(function(L){var U=gc.bind(null,m,L);x.has(L)||(x.add(L),L.then(U,U))})}function ro(m,_){var x=_.deletions;if(x!==null)for(var L=0;L<x.length;L++){var U=x[L],W=m,me=_;if(Hs){var Be=me;e:for(;Be!==null;){switch(Be.tag){case 27:case 5:On=Be.stateNode,si=!1;break e;case 3:On=Be.stateNode.containerInfo,si=!0;break e;case 4:On=Be.stateNode.containerInfo,si=!0;break e}Be=Be.return}if(On===null)throw Error(r(160));hc(W,me,U),On=null,si=!1}else hc(W,me,U);W=U.alternate,W!==null&&(W.return=null),U.return=null}if(_.subtreeFlags&13878)for(_=_.child;_!==null;)vm(_,m),_=_.sibling}function vm(m,_){var x=m.alternate,L=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:ro(_,m),go(m),L&4&&(cc(3,m,m.return),gf(3,m),cc(5,m,m.return));break;case 1:ro(_,m),go(m),L&512&&(Ps||x===null||wr(x,x.return)),L&64&&Uu&&(m=m.updateQueue,m!==null&&(L=m.callbacks,L!==null&&(x=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=x===null?L:x.concat(L))));break;case 26:if(Go){var U=zs;ro(_,m),go(m),L&512&&(Ps||x===null||wr(x,x.return)),L&4&&(L=x!==null?x.memoizedState:null,_=m.memoizedState,x===null?_===null?m.stateNode===null?m.stateNode=Hf(U,m.type,m.memoizedProps,m):Gf(U,m.type,m.stateNode):m.stateNode=E_(U,_,m.memoizedProps):L!==_?(L===null?x.stateNode!==null&&Td(x.stateNode):Tc(L),_===null?Gf(U,m.type,m.stateNode):E_(U,_,m.memoizedProps)):_===null&&m.stateNode!==null&&Gp(m,m.memoizedProps,x.memoizedProps));break}case 27:if(ri&&L&4&&m.alternate===null){U=m.stateNode;var W=m.memoizedProps;try{bo(U),As(m.type,W,U,m)}catch(zt){Fi(m,m.return,zt)}}case 5:if(ro(_,m),go(m),L&512&&(Ps||x===null||wr(x,x.return)),Hs){if(m.flags&32){_=m.stateNode;try{Df(_)}catch(zt){Fi(m,m.return,zt)}}L&4&&m.stateNode!=null&&(_=m.memoizedProps,Gp(m,_,x!==null?x.memoizedProps:_)),L&1024&&(Qm=!0)}break;case 6:if(ro(_,m),go(m),L&4&&Hs){if(m.stateNode===null)throw Error(r(162));L=m.memoizedProps,x=x!==null?x.memoizedProps:L,_=m.stateNode;try{Im(_,x,L)}catch(zt){Fi(m,m.return,zt)}}break;case 3:if(Go?(ut(),U=zs,zs=d0(_.containerInfo),ro(_,m),zs=U):ro(_,m),go(m),L&4){if(Hs&&Vr&&x!==null&&x.memoizedState.isDehydrated)try{y_(_.containerInfo)}catch(zt){Fi(m,m.return,zt)}if(la){L=_.containerInfo,x=_.pendingChildren;try{vd(L,x)}catch(zt){Fi(m,m.return,zt)}}}Qm&&(Qm=!1,c_(m));break;case 4:Go?(x=zs,zs=d0(m.stateNode.containerInfo),ro(_,m),go(m),zs=x):(ro(_,m),go(m)),L&4&&la&&_f(m.stateNode,m,m.stateNode.pendingChildren);break;case 12:ro(_,m),go(m);break;case 13:ro(_,m),go(m),m.child.flags&8192&&m.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(So=Na()),L&4&&(L=m.updateQueue,L!==null&&(m.updateQueue=null,$u(m,L)));break;case 22:L&512&&(Ps||x===null||wr(x,x.return)),U=m.memoizedState!==null;var me=x!==null&&x.memoizedState!==null,Be=Uu,je=Ps;if(Uu=Be||U,Ps=je||me,ro(_,m),Ps=je,Uu=Be,go(m),_=m.stateNode,_._current=m,_._visibility&=-3,_._visibility|=_._pendingVisibility&2,L&8192&&(_._visibility=U?_._visibility&-2:_._visibility|1,U&&(_=Uu||Ps,x===null||me||_||xu(m)),Hs&&(m.memoizedProps===null||m.memoizedProps.mode!=="manual"))){e:if(x=null,Hs)for(_=m;;){if(_.tag===5||Go&&_.tag===26||ri&&_.tag===27){if(x===null){me=x=_;try{W=me.stateNode,U?Lm(W):Bm(me.stateNode,me.memoizedProps)}catch(zt){Fi(me,me.return,zt)}}}else if(_.tag===6){if(x===null){me=_;try{var Ct=me.stateNode;U?Dm(Ct):m_(Ct,me.memoizedProps)}catch(zt){Fi(me,me.return,zt)}}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===m)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break e;for(;_.sibling===null;){if(_.return===null||_.return===m)break e;x===_&&(x=null),_=_.return}x===_&&(x=null),_.sibling.return=_.return,_=_.sibling}}L&4&&(L=m.updateQueue,L!==null&&(x=L.retryQueue,x!==null&&(L.retryQueue=null,$u(m,x))));break;case 19:ro(_,m),go(m),L&4&&(L=m.updateQueue,L!==null&&(m.updateQueue=null,$u(m,L)));break;case 21:break;default:ro(_,m),go(m)}}function go(m){var _=m.flags;if(_&2){try{if(Hs&&(!ri||m.tag!==27)){e:{for(var x=m.return;x!==null;){if(nd(x)){var L=x;break e}x=x.return}throw Error(r(160))}switch(L.tag){case 27:if(ri){var U=L.stateNode,W=id(m);Au(m,W,U);break}case 5:var me=L.stateNode;L.flags&32&&(Df(me),L.flags&=-33);var Be=id(m);Au(m,Be,me);break;case 3:case 4:var je=L.stateNode.containerInfo,Ct=id(m);_m(m,Ct,je);break;default:throw Error(r(161))}}}catch(zt){Fi(m,m.return,zt)}m.flags&=-3}_&4096&&(m.flags&=-4097)}function c_(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var _=m;c_(_),_.tag===5&&_.flags&1024&&If(_.stateNode),m=m.sibling}}function Bo(m,_){if(_.subtreeFlags&8772)for(_=_.child;_!==null;)nl(m,_.alternate,_),_=_.sibling}function xu(m){for(m=m.child;m!==null;){var _=m;switch(_.tag){case 0:case 11:case 14:case 15:cc(4,_,_.return),xu(_);break;case 1:wr(_,_.return);var x=_.stateNode;typeof x.componentWillUnmount=="function"&&Do(_,_.return,x),xu(_);break;case 26:case 27:case 5:wr(_,_.return),xu(_);break;case 22:wr(_,_.return),_.memoizedState===null&&xu(_);break;default:xu(_)}m=m.sibling}}function il(m,_,x){for(x=x&&(_.subtreeFlags&8772)!==0,_=_.child;_!==null;){var L=_.alternate,U=m,W=_,me=W.flags;switch(W.tag){case 0:case 11:case 15:il(U,W,x),gf(4,W);break;case 1:if(il(U,W,x),L=W,U=L.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(Ct){Fi(L,L.return,Ct)}if(L=W,U=L.updateQueue,U!==null){var Be=L.stateNode;try{var je=U.shared.hiddenCallbacks;if(je!==null)for(U.shared.hiddenCallbacks=null,U=0;U<je.length;U++)Me(je[U],Be)}catch(Ct){Fi(L,L.return,Ct)}}x&&me&64&&l_(W),tl(W,W.return);break;case 26:case 27:case 5:il(U,W,x),x&&L===null&&me&4&&Hp(W),tl(W,W.return);break;case 12:il(U,W,x);break;case 13:il(U,W,x),x&&me&4&&Vp(U,W);break;case 22:W.memoizedState===null&&il(U,W,x),tl(W,W.return);break;default:il(U,W,x)}_=_.sibling}}function rd(m,_){var x=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),m=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(m=_.memoizedState.cachePool.pool),m!==x&&(m!=null&&m.refCount++,x!=null&&td(x))}function Bl(m,_){m=null,_.alternate!==null&&(m=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==m&&(_.refCount++,m!=null&&td(m))}function br(m,_,x,L){if(_.subtreeFlags&10256)for(_=_.child;_!==null;)vf(m,_,x,L),_=_.sibling}function vf(m,_,x,L){var U=_.flags;switch(_.tag){case 0:case 11:case 15:br(m,_,x,L),U&2048&&gf(9,_);break;case 3:br(m,_,x,L),U&2048&&(m=null,_.alternate!==null&&(m=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==m&&(_.refCount++,m!=null&&td(m)));break;case 12:if(U&2048){br(m,_,x,L),m=_.stateNode;try{var W=_.memoizedProps,me=W.id,Be=W.onPostCommit;typeof Be=="function"&&Be(me,_.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(je){Fi(_,_.return,je)}}else br(m,_,x,L);break;case 23:break;case 22:W=_.stateNode,_.memoizedState!==null?W._visibility&4?br(m,_,x,L):mi(m,_):W._visibility&4?br(m,_,x,L):(W._visibility|=4,Or(m,_,x,L,(_.subtreeFlags&10256)!==0)),U&2048&&rd(_.alternate,_);break;case 24:br(m,_,x,L),U&2048&&Bl(_.alternate,_);break;default:br(m,_,x,L)}}function Or(m,_,x,L,U){for(U=U&&(_.subtreeFlags&10256)!==0,_=_.child;_!==null;){var W=m,me=_,Be=x,je=L,Ct=me.flags;switch(me.tag){case 0:case 11:case 15:Or(W,me,Be,je,U),gf(8,me);break;case 23:break;case 22:var zt=me.stateNode;me.memoizedState!==null?zt._visibility&4?Or(W,me,Be,je,U):mi(W,me):(zt._visibility|=4,Or(W,me,Be,je,U)),U&&Ct&2048&&rd(me.alternate,me);break;case 24:Or(W,me,Be,je,U),U&&Ct&2048&&Bl(me.alternate,me);break;default:Or(W,me,Be,je,U)}_=_.sibling}}function mi(m,_){if(_.subtreeFlags&10256)for(_=_.child;_!==null;){var x=m,L=_,U=L.flags;switch(L.tag){case 22:mi(x,L),U&2048&&rd(L.alternate,L);break;case 24:mi(x,L),U&2048&&Bl(L.alternate,L);break;default:mi(x,L)}_=_.sibling}}function Ca(m){if(m.subtreeFlags&Ns)for(m=m.child;m!==null;)dc(m),m=m.sibling}function dc(m){switch(m.tag){case 26:Ca(m),m.flags&Ns&&(m.memoizedState!==null?p0(zs,m.memoizedState,m.memoizedProps):vo(m.type,m.memoizedProps));break;case 5:Ca(m),m.flags&Ns&&vo(m.type,m.memoizedProps);break;case 3:case 4:if(Go){var _=zs;zs=d0(m.stateNode.containerInfo),Ca(m),zs=_}else Ca(m);break;case 22:m.memoizedState===null&&(_=m.alternate,_!==null&&_.memoizedState!==null?(_=Ns,Ns=16777216,Ca(m),Ns=_):Ca(m));break;default:Ca(m)}}function Cu(m){var _=m.alternate;if(_!==null&&(m=_.child,m!==null)){_.child=null;do _=m.sibling,m.sibling=null,m=_;while(m!==null)}}function fc(m){var _=m.deletions;if((m.flags&16)!==0){if(_!==null)for(var x=0;x<_.length;x++){var L=_[x];qn=L,ih(L,m)}Cu(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)bf(m),m=m.sibling}function bf(m){switch(m.tag){case 0:case 11:case 15:fc(m),m.flags&2048&&cc(9,m,m.return);break;case 3:fc(m);break;case 12:fc(m);break;case 22:var _=m.stateNode;m.memoizedState!==null&&_._visibility&4&&(m.return===null||m.return.tag!==13)?(_._visibility&=-5,sl(m)):fc(m);break;default:fc(m)}}function sl(m){var _=m.deletions;if((m.flags&16)!==0){if(_!==null)for(var x=0;x<_.length;x++){var L=_[x];qn=L,ih(L,m)}Cu(m)}for(m=m.child;m!==null;){switch(_=m,_.tag){case 0:case 11:case 15:cc(8,_,_.return),sl(_);break;case 22:x=_.stateNode,x._visibility&4&&(x._visibility&=-5,sl(_));break;default:sl(_)}m=m.sibling}}function ih(m,_){for(;qn!==null;){var x=qn;switch(x.tag){case 0:case 11:case 15:cc(8,x,_);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var L=x.memoizedState.cachePool.pool;L!=null&&L.refCount++}break;case 24:td(x.memoizedState.cache)}if(L=x.child,L!==null)L.return=x,qn=L;else e:for(x=m;qn!==null;){L=qn;var U=L.sibling,W=L.return;if(zp(L),L===x){qn=null;break e}if(U!==null){U.return=W,qn=U;break e}qn=W}}}function sh(m){var _=Cm(m);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(r(364));return _}if(m=Nf(m),m===null)throw Error(r(362));return m.stateNode.current}function oa(m,_){var x=m.tag;switch(_.$$typeof){case Fu:if(m.type===_.value)return!0;break;case Jo:e:{for(_=_.value,m=[m,0],x=0;x<m.length;){var L=m[x++],U=L.tag,W=m[x++],me=_[W];if(U!==5&&U!==26&&U!==27||!oh(L)){for(;me!=null&&oa(L,me);)W++,me=_[W];if(W===_.length){_=!0;break e}else for(L=L.child;L!==null;)m.push(L,W),L=L.sibling}}_=!1}return _;case _s:if((x===5||x===26||x===27)&&t0(m.stateNode,_.value))return!0;break;case fa:if((x===5||x===6||x===26||x===27)&&(m=f_(m),m!==null&&0<=m.indexOf(_.value)))return!0;break;case _l:if((x===5||x===26||x===27)&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function od(m){switch(m.$$typeof){case Fu:return"<"+(l(m.value)||"Unknown")+">";case Jo:return":has("+(od(m)||"")+")";case _s:return'[role="'+m.value+'"]';case fa:return'"'+m.value+'"';case _l:return'[data-testname="'+m.value+'"]';default:throw Error(r(365))}}function _o(m,_){var x=[];m=[m,0];for(var L=0;L<m.length;){var U=m[L++],W=U.tag,me=m[L++],Be=_[me];if(W!==5&&W!==26&&W!==27||!oh(U)){for(;Be!=null&&oa(U,Be);)me++,Be=_[me];if(me===_.length)x.push(U);else for(U=U.child;U!==null;)m.push(U,me),U=U.sibling}}return x}function ad(m,_){if(!Vl)throw Error(r(363));m=sh(m),m=_o(m,_),_=[],m=Array.from(m);for(var x=0;x<m.length;){var L=m[x++],U=L.tag;if(U===5||U===26||U===27)oh(L)||_.push(L.stateNode);else for(L=L.child;L!==null;)m.push(L),L=L.sibling}return _}function qs(){if((Ni&2)!==0&&di!==0)return di&-di;if(Vn.T!==null){var m=ha;return m!==0?m:Xe()}return Mm()}function bm(){ma===0&&(ma=(di&536870912)===0||hi?X():536870912);var m=qe.current;return m!==null&&(m.flags|=32),ma}function Nr(m,_,x){(m===Li&&Di===2||m.cancelPendingCommit!==null)&&(Gr(m,0),ko(m,di,ma,!1)),Z(m,x),((Ni&2)===0||m!==Li)&&(m===Li&&((Ni&2)===0&&(Gu|=x),ji===4&&ko(m,di,ma,!1)),Qe(m))}function Mu(m,_,x){if((Ni&6)!==0)throw Error(r(327));var L=!x&&(_&60)===0&&(_&m.expiredLanes)===0||F(m,_),U=L?Xp(m,_):Wp(m,_,!0),W=L;do{if(U===0){Eo&&!L&&ko(m,_,0,!1);break}else if(U===6)ko(m,_,0,!ka);else{if(x=m.current.alternate,W&&!kl(x)){U=Wp(m,_,!1),W=!1;continue}if(U===2){if(W=_,m.errorRecoveryDisabledLanes&W)var me=0;else me=m.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){_=me;e:{var Be=m;U=gh;var je=Vr&&Be.current.memoizedState.isDehydrated;if(je&&(Gr(Be,me).flags|=256),me=Wp(Be,me,!1),me!==2){if(mr&&!je){Be.errorRecoveryDisabledLanes|=W,Gu|=W,U=4;break e}W=Ws,Ws=U,W!==null&&yf(W)}U=me}if(W=!1,U!==2)continue}}if(U===1){Gr(m,0),ko(m,_,0,!0);break}e:{switch(L=m,U){case 0:case 1:throw Error(r(345));case 4:if((_&4194176)===_){ko(L,_,ma,!ka);break e}break;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(r(329))}if(L.finishedWork=x,L.finishedLanes=_,(_&62914560)===_&&(W=So+300-Na(),10<W)){if(ko(L,_,ma,!ka),P(L,0)!==0)break e;L.timeoutHandle=Qs(Tf.bind(null,L,x,Ws,zf,b0,_,ma,Gu,Ql,ka,2,-0,0),W);break e}Tf(L,x,Ws,zf,b0,_,ma,Gu,Ql,ka,0,-0,0)}}break}while(!0);Qe(m)}function yf(m){Ws===null?Ws=m:Ws.push.apply(Ws,m)}function Tf(m,_,x,L,U,W,me,Be,je,Ct,zt,en,nn){var Zn=_.subtreeFlags;if((Zn&8192||(Zn&16785408)===16785408)&&(wf(),dc(_),_=cr(),_!==null)){m.cancelPendingCommit=_(pc.bind(null,m,x,L,U,me,Be,je,1,en,nn)),ko(m,W,me,!Ct);return}pc(m,x,L,U,me,Be,je,zt,en,nn)}function kl(m){for(var _=m;;){var x=_.tag;if((x===0||x===11||x===15)&&_.flags&16384&&(x=_.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var L=0;L<x.length;L++){var U=x[L],W=U.getSnapshot;U=U.value;try{if(!Vo(W(),U))return!1}catch{return!1}}if(x=_.child,_.subtreeFlags&16384&&x!==null)x.return=_,_=x;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function ko(m,_,x,L){_&=~Zl,_&=~Gu,m.suspendedLanes|=_,m.pingedLanes&=~_,L&&(m.warmLanes|=_),L=m.expirationTimes;for(var U=_;0<U;){var W=31-hr(U),me=1<<W;L[W]=-1,U&=~me}x!==0&&j(m,x,_)}function Ef(){return(Ni&6)===0?(vt(0),!1):!0}function ld(){if(Pn!==null){if(Di===0)var m=Pn.return;else m=Pn,Pr=Xr=null,kt(m),To=null,Hi=0,m=Pn;for(;m!==null;)gm(m.alternate,m),m=m.return;Pn=null}}function Gr(m,_){m.finishedWork=null,m.finishedLanes=0;var x=m.timeoutHandle;x!==Ho&&(m.timeoutHandle=Ho,Jp(x)),x=m.cancelPendingCommit,x!==null&&(m.cancelPendingCommit=null,x()),ld(),Li=m,Pn=x=Uo(m.current,null),di=_,Di=0,jr=null,ka=!1,Eo=F(m,_),mr=!1,Ql=ma=Zl=Gu=pa=ji=0,Ws=gh=null,b0=!1,(_&8)!==0&&(_|=_&32);var L=m.entangledLanes;if(L!==0)for(m=m.entanglements,L&=_;0<L;){var U=31-hr(L),W=1<<U;_|=m[U],L&=~W}return lo=_,J(),x}function oo(m,_){Yn=null,Vn.H=Gs,_===Yo?(_=Xt(),Di=3):_===$d?(_=Xt(),Di=4):Di=_===v0?8:_!==null&&typeof _=="object"&&typeof _.then=="function"?6:1,jr=_,Pn===null&&(ji=1,qh(m,pe(_,m.current)))}function Ru(){var m=qe.current;return m===null?!0:(di&4194176)===di?pn===null:(di&62914560)===di||(di&536870912)!==0?m===pn:!1}function rl(){var m=Vn.H;return Vn.H=Gs,m===null?Gs:m}function Ma(){var m=Vn.A;return Vn.A=gs,m}function ol(){ji=4,ka||(di&4194176)!==di&&qe.current!==null||(Eo=!0),(pa&134217727)===0&&(Gu&134217727)===0||Li===null||ko(Li,di,ma,!1)}function Wp(m,_,x){var L=Ni;Ni|=2;var U=rl(),W=Ma();(Li!==m||di!==_)&&(zf=null,Gr(m,_)),_=!1;var me=ji;e:do try{if(Di!==0&&Pn!==null){var Be=Pn,je=jr;switch(Di){case 8:ld(),me=6;break e;case 3:case 2:case 6:qe.current===null&&(_=!0);var Ct=Di;if(Di=0,jr=null,Dr(m,Be,je,Ct),x&&Eo){me=0;break e}break;default:Ct=Di,Di=0,jr=null,Dr(m,Be,je,Ct)}}ud(),me=ji;break}catch(zt){oo(m,zt)}while(!0);return _&&m.shellSuspendCounter++,Pr=Xr=null,Ni=L,Vn.H=U,Vn.A=W,Pn===null&&(Li=null,di=0,J()),me}function ud(){for(;Pn!==null;)Ds(Pn)}function Xp(m,_){var x=Ni;Ni|=2;var L=rl(),U=Ma();Li!==m||di!==_?(zf=null,Md=Na()+500,Gr(m,_)):Eo=F(m,_);e:do try{if(Di!==0&&Pn!==null){_=Pn;var W=jr;t:switch(Di){case 1:Di=0,jr=null,Dr(m,_,W,1);break;case 2:if(Pt(W)){Di=0,jr=null,wi(_);break}_=function(){Di===2&&Li===m&&(Di=7),Qe(m)},W.then(_,_);break e;case 3:Di=7;break e;case 4:Di=5;break e;case 7:Pt(W)?(Di=0,jr=null,wi(_)):(Di=0,jr=null,Dr(m,_,W,7));break;case 5:var me=null;switch(Pn.tag){case 26:me=Pn.memoizedState;case 5:case 27:var Be=Pn,je=Be.type,Ct=Be.pendingProps;if(me?Ed(me):Qp(je,Ct)){Di=0,jr=null;var zt=Be.sibling;if(zt!==null)Pn=zt;else{var en=Be.return;en!==null?(Pn=en,Po(en)):Pn=null}break t}}Di=0,jr=null,Dr(m,_,W,5);break;case 6:Di=0,jr=null,Dr(m,_,W,6);break;case 8:ld(),ji=6;break e;default:throw Error(r(462))}}Lr();break}catch(nn){oo(m,nn)}while(!0);return Pr=Xr=null,Vn.H=L,Vn.A=U,Ni=x,Pn!==null?0:(Li=null,di=0,J(),ji)}function Lr(){for(;Pn!==null&&!Km();)Ds(Pn)}function Ds(m){var _=o_(m.alternate,m,lo);m.memoizedProps=m.pendingProps,_===null?Po(m):Pn=_}function wi(m){var _=m,x=_.alternate;switch(_.tag){case 15:case 0:_=Zh(x,_,_.pendingProps,_.type,void 0,di);break;case 11:_=Zh(x,_,_.pendingProps,_.type.render,_.ref,di);break;case 5:kt(_);default:gm(x,_),_=Pn=Af(_,lo),_=o_(x,_,lo)}m.memoizedProps=m.pendingProps,_===null?Po(m):Pn=_}function Dr(m,_,x,L){Pr=Xr=null,kt(_),To=null,Hi=0;var U=_.return;try{if(lb(m,U,_,x,di)){ji=1,qh(m,pe(x,m.current)),Pn=null;return}}catch(W){if(U!==null)throw Pn=U,W;ji=1,qh(m,pe(x,m.current)),Pn=null;return}_.flags&32768?(hi||L===1?m=!0:Eo||(di&536870912)!==0?m=!1:(ka=m=!0,(L===2||L===3||L===6)&&(L=qe.current,L!==null&&L.tag===13&&(L.flags|=16384))),Ra(_,m)):Po(_)}function Po(m){var _=m;do{if((_.flags&32768)!==0){Ra(_,ka);return}m=_.return;var x=a_(_.alternate,_,lo);if(x!==null){Pn=x;return}if(_=_.sibling,_!==null){Pn=_;return}Pn=_=m}while(_!==null);ji===0&&(ji=5)}function Ra(m,_){do{var x=mm(m.alternate,m);if(x!==null){x.flags&=32767,Pn=x;return}if(x=m.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!_&&(m=m.sibling,m!==null)){Pn=m;return}Pn=m=x}while(m!==null);ji=6,Pn=null}function pc(m,_,x,L,U,W,me,Be,je,Ct){var zt=Vn.T,en=zl();try{kr(2),Vn.T=null,h_(m,_,x,L,en,U,W,me,Be,je,Ct)}finally{Vn.T=zt,kr(en)}}function h_(m,_,x,L,U,W,me,Be){do al();while(eu!==null);if((Ni&6)!==0)throw Error(r(327));var je=m.finishedWork;if(L=m.finishedLanes,je===null)return null;if(m.finishedWork=null,m.finishedLanes=0,je===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0,m.cancelPendingCommit=null;var Ct=je.lanes|je.childLanes;if(Ct|=Xo,Y(m,L,Ct,W,me,Be),m===Li&&(Pn=Li=null,di=0),(je.subtreeFlags&10256)===0&&(je.flags&10256)===0||vl||(vl=!0,zu=Ct,y0=x,Pl(_0,function(){return al(),null})),x=(je.flags&15990)!==0,(je.subtreeFlags&15990)!==0||x?(x=Vn.T,Vn.T=null,W=zl(),kr(2),me=Ni,Ni|=4,sd(m,je),vm(je,m),Oa(m.containerInfo),m.current=je,nl(m,je.alternate,je),m0(),Ni=me,kr(W),Vn.T=x):m.current=je,vl?(vl=!1,eu=m,Mc=L):jp(m,Ct),Ct=m.pendingLanes,Ct===0&&(Ao=null),z(je.stateNode),Qe(m),_!==null)for(U=m.onRecoverableError,je=0;je<_.length;je++)Ct=_[je],U(Ct.value,{componentStack:Ct.stack});return(Mc&3)!==0&&al(),Ct=m.pendingLanes,(L&4194218)!==0&&(Ct&42)!==0?m===Rc?vs++:(vs=0,Rc=m):vs=0,vt(0),null}function jp(m,_){(m.pooledCacheLanes&=_)===0&&(_=m.pooledCache,_!=null&&(m.pooledCache=null,td(_)))}function al(){if(eu!==null){var m=eu,_=zu;zu=0;var x=ee(Mc),L=32>x?32:x;x=Vn.T;var U=zl();try{if(kr(L),Vn.T=null,eu===null)var W=!1;else{L=y0,y0=null;var me=eu,Be=Mc;if(eu=null,Mc=0,(Ni&6)!==0)throw Error(r(331));var je=Ni;if(Ni|=4,bf(me.current),vf(me,me.current,Be,L),Ni=je,vt(0,!1),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(tr,me)}catch{}W=!0}return W}finally{kr(U),Vn.T=x,jp(m,_)}}return!1}function ll(m,_,x){_=pe(x,_),_=Ll(m.stateNode,_,2),m=oe(m,_,2),m!==null&&(Z(m,2),Qe(m))}function Fi(m,_,x){if(m.tag===3)ll(m,m,x);else for(;_!==null;){if(_.tag===3){ll(_,m,x);break}else if(_.tag===1){var L=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Ao===null||!Ao.has(L))){m=pe(x,m),x=Zc(2),L=oe(_,x,2),L!==null&&(Aa(x,L,_,m),Z(L,2),Qe(L));break}}_=_.return}}function rh(m,_,x){var L=m.pingCache;if(L===null){L=m.pingCache=new Vs;var U=new Set;L.set(_,U)}else U=L.get(_),U===void 0&&(U=new Set,L.set(_,U));U.has(x)||(mr=!0,U.add(x),m=ym.bind(null,m,_,x),_.then(m,m))}function ym(m,_,x){var L=m.pingCache;L!==null&&L.delete(_),m.pingedLanes|=m.suspendedLanes&x,m.warmLanes&=~x,Li===m&&(di&x)===x&&(ji===4||ji===3&&(di&62914560)===di&&300>Na()-So?(Ni&2)===0&&Gr(m,0):Zl|=x,Ql===di&&(Ql=0)),Qe(m)}function mc(m,_){_===0&&(_=G()),m=we(m,_),m!==null&&(Z(m,_),Qe(m))}function wu(m){var _=m.memoizedState,x=0;_!==null&&(x=_.retryLane),mc(m,x)}function gc(m,_){var x=0;switch(m.tag){case 13:var L=m.stateNode,U=m.memoizedState;U!==null&&(x=U.retryLane);break;case 19:L=m.stateNode;break;case 22:L=m.stateNode._retryCache;break;default:throw Error(r(314))}L!==null&&L.delete(_),mc(m,x)}function Pl(m,_){return ch(m,_)}function Tm(m,_,x,L){this.tag=m,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Uo(m,_){var x=m.alternate;return x===null?(x=n(m.tag,_,m.key,m.mode),x.elementType=m.elementType,x.type=m.type,x.stateNode=m.stateNode,x.alternate=m,m.alternate=x):(x.pendingProps=_,x.type=m.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=m.flags&31457280,x.childLanes=m.childLanes,x.lanes=m.lanes,x.child=m.child,x.memoizedProps=m.memoizedProps,x.memoizedState=m.memoizedState,x.updateQueue=m.updateQueue,_=m.dependencies,x.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},x.sibling=m.sibling,x.index=m.index,x.ref=m.ref,x.refCleanup=m.refCleanup,x}function Af(m,_){m.flags&=31457282;var x=m.alternate;return x===null?(m.childLanes=0,m.lanes=_,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,_=x.dependencies,m.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),m}function Ul(m,_,x,L,U,W){var me=0;if(L=m,typeof m=="function")Sf(m)&&(me=1);else if(typeof m=="string")me=Go&&ri?yd(m,x,Tr.current)?26:Wl(m)?27:5:Go?yd(m,x,Tr.current)?26:5:ri&&Wl(m)?27:5;else e:switch(m){case vc:return Bs(x.children,U,W,_);case cn:me=8,U|=24;break;case ao:return m=n(12,x,_,U|2),m.elementType=ao,m.lanes=W,m;case hn:return m=n(13,x,_,U),m.elementType=hn,m.lanes=W,m;case ps:return m=n(19,x,_,U),m.elementType=ps,m.lanes=W,m;case Sm:return aa(x,U,W,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case Zs:case yr:me=10;break e;case ws:me=9;break e;case Iu:me=11;break e;case Kp:me=14;break e;case Ia:me=16,L=null;break e}me=29,x=Error(r(130,m===null?"null":typeof m,"")),L=null}return _=n(me,x,_,U),_.elementType=m,_.type=L,_.lanes=W,_}function Bs(m,_,x,L){return m=n(7,m,L,_),m.lanes=x,m}function aa(m,_,x,L){m=n(22,m,L,_),m.elementType=Sm,m.lanes=x;var U={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var W=U._current;if(W===null)throw Error(r(456));if((U._pendingVisibility&2)===0){var me=we(W,2);me!==null&&(U._pendingVisibility|=2,Nr(me,W,2))}},attach:function(){var W=U._current;if(W===null)throw Error(r(456));if((U._pendingVisibility&2)!==0){var me=we(W,2);me!==null&&(U._pendingVisibility&=-3,Nr(me,W,2))}}};return m.stateNode=U,m}function Yp(m,_,x){return m=n(6,m,null,_),m.lanes=x,m}function Em(m,_,x){return _=n(4,m.children!==null?m.children:[],m.key,_),_.lanes=x,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function $f(m,_,x,L,U,W,me,Be){this.tag=1,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ho,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=D(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D(0),this.hiddenUpdates=D(null),this.identifierPrefix=L,this.onUncaughtError=U,this.onCaughtError=W,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function d_(m,_,x,L,U,W,me,Be,je,Ct,zt,en){return m=new $f(m,_,x,me,Be,je,Ct,en),_=1,W===!0&&(_|=24),W=n(3,null,null,_),m.current=W,W.stateNode=m,_=Tu(),_.refCount++,m.pooledCache=_,_.refCount++,W.memoizedState={element:L,isDehydrated:x,cache:_},At(W),m}function Js(m){return m?(m=Xl,m):Xl}function cd(m){var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=S(_),m=m!==null?$(m):null,m===null?null:Gl(m.stateNode)}function hd(m,_,x,L,U,W){U=Js(U),L.context===null?L.context=U:L.pendingContext=U,L=H(_),L.payload={element:x},W=W===void 0?null:W,W!==null&&(L.callback=W),x=oe(m,L,_),x!==null&&(Nr(x,m,_),ve(x,m,_))}function dd(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var x=m.retryLane;m.retryLane=x!==0&&x<_?x:_}}function xf(m,_){dd(m,_),(m=m.alternate)&&dd(m,_)}var Jn={},_c=uT(),Fo=VG(),fd=Object.assign,ub=Symbol.for("react.element"),Cf=Symbol.for("react.transitional.element"),wa=Symbol.for("react.portal"),vc=Symbol.for("react.fragment"),cn=Symbol.for("react.strict_mode"),ao=Symbol.for("react.profiler"),Zs=Symbol.for("react.provider"),ws=Symbol.for("react.consumer"),yr=Symbol.for("react.context"),Iu=Symbol.for("react.forward_ref"),hn=Symbol.for("react.suspense"),ps=Symbol.for("react.suspense_list"),Kp=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),Sm=Symbol.for("react.offscreen"),Am=Symbol.for("react.memo_cache_sentinel"),Ou=Symbol.iterator,Mf=Symbol.for("react.client.reference"),Vn=_c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ul,Fl,bc=!1,Hl=Array.isArray,$m=e.rendererVersion,Rf=e.rendererPackageName,pd=e.extraDevToolsConfig,Gl=e.getPublicInstance,xm=e.getRootHostContext,md=e.getChildHostContext,gd=e.prepareForCommit,Oa=e.resetAfterCommit,qp=e.createInstance,Nu=e.appendInitialChild,Br=e.finalizeInitialChildren,jn=e.shouldSetTextContent,Xi=e.createTextInstance,Qs=e.scheduleTimeout,Jp=e.cancelTimeout,Ho=e.noTimeout,zr=e.isPrimaryRenderer;e.warnsIfNotActing;var Hs=e.supportsMutation,la=e.supportsPersistence,Vr=e.supportsHydration,Cm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var er=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var kr=e.setCurrentUpdatePriority,zl=e.getCurrentUpdatePriority,Mm=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Rm=e.shouldAttemptEagerTransition,cb=e.detachDeletedInstance;e.requestPostPaintCallback;var Zp=e.maySuspendCommit,Qp=e.preloadInstance,wf=e.startSuspendingCommit,vo=e.suspendInstance,cr=e.waitForCommitToBeReady,cl=e.NotPendingTransition,hl=e.HostTransitionContext,If=e.resetFormInstance;e.bindToConsole;var Of=e.supportsMicrotasks,dl=e.scheduleMicrotask,Vl=e.supportsTestSelectors,Nf=e.findFiberRoot,e0=e.getBoundingRect,f_=e.getTextContent,oh=e.isHiddenSubtree,t0=e.matchAccessibilityRole,n0=e.setFocusIfFocusable,p_=e.setupIntersectionObserver,i0=e.appendChild,wm=e.appendChildToContainer,Im=e.commitTextUpdate,hb=e.commitMount,yc=e.commitUpdate,Om=e.insertBefore,Lf=e.insertInContainerBefore,s0=e.removeChild,Nm=e.removeChildFromContainer,Df=e.resetTextContent,Lm=e.hideInstance,Dm=e.hideTextInstance,Bm=e.unhideInstance,m_=e.unhideTextInstance,km=e.clearContainer,ah=e.cloneInstance,_d=e.createContainerChildSet,r0=e.appendChildToContainerChildSet,Bf=e.finalizeContainerChildren,vd=e.replaceContainerChildren,Pm=e.cloneHiddenInstance,Um=e.cloneHiddenTextInstance,o0=e.isSuspenseInstancePending,a0=e.isSuspenseInstanceFallback,g_=e.getSuspenseInstanceFallbackErrorDetails,__=e.registerSuspenseInstanceRetry,Fm=e.canHydrateFormStateMarker,Hm=e.isFormStateMarkerMatching,l0=e.getNextHydratableSibling,kf=e.getFirstHydratableChild,Gm=e.getFirstHydratableChildWithinContainer,zm=e.getFirstHydratableChildWithinSuspenseInstance,v_=e.canHydrateInstance,u0=e.canHydrateTextInstance,c0=e.canHydrateSuspenseInstance,Pf=e.hydrateInstance,h0=e.hydrateTextInstance,b_=e.hydrateSuspenseInstance,Vm=e.getNextHydratableInstanceAfterSuspenseInstance,y_=e.commitHydratedContainer,T_=e.commitHydratedSuspenseInstance,Wm=e.clearSuspenseBoundary,bd=e.clearSuspenseBoundaryFromContainer,Uf=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Ff=e.validateHydratableInstance,Xm=e.validateHydratableTextInstance,Go=e.supportsResources,yd=e.isHostHoistableType,d0=e.getHoistableRoot,jm=e.getResource,E_=e.acquireResource,Tc=e.releaseResource,Hf=e.hydrateHoistable,Gf=e.mountHoistable,Td=e.unmountHoistable,f0=e.createHoistableInstance,ut=e.prepareToCommitHoistables,Ec=e.mayResourceSuspendCommit,Ed=e.preloadResource,p0=e.suspendResource,ri=e.supportsSingletons,Et=e.resolveSingletonInstance,bo=e.clearSingleton,As=e.acquireSingletonInstance,lh=e.releaseSingletonInstance,Wl=e.isHostSingletonType,ks=[],zo=-1,Xl={},hr=Math.clz32?Math.clz32:I,Ym=Math.log,S_=Math.LN2,jl=128,uh=4194304,ch=Fo.unstable_scheduleCallback,Sd=Fo.unstable_cancelCallback,Km=Fo.unstable_shouldYield,m0=Fo.unstable_requestPaint,Na=Fo.unstable_now,g0=Fo.unstable_ImmediatePriority,db=Fo.unstable_UserBlockingPriority,_0=Fo.unstable_NormalPriority,fb=Fo.unstable_IdlePriority,qm=Fo.log,dr=Fo.unstable_setDisableYieldValue,tr=null,yo=null,Vo=typeof Object.is=="function"?Object.is:ce,A_=new WeakMap,hh=[],dh=0,Wo=null,tt=0,ua=[],ca=0,Sc=null,Yl=1,La="",Tr=C(null),Lu=C(null),fl=C(null),Ac=C(null),Is=null,Wr=null,hi=!1,fr=null,qi=!1,Da=Error(r(519)),nr=[],$c=0,Xo=0,ir=null,$s=null,Ad=!1,ni=!1,Jm=!1,Ii=0,Du=null,fh=0,ha=0,Kl=null,Bu=!1,Os=!1,jo=Object.prototype.hasOwnProperty,Yo=Error(r(460)),$d=Error(r(474)),xd={then:function(){}},xc=null,To=null,Hi=0,ku=Zt(!0),pl=Zt(!1),cs=C(null),Ot=C(0),qe=C(null),pn=null,wn=C(0),Pu=0,Yn=null,kn=null,Ai=null,ml=!1,Ba=!1,rs=!1,Cd=0,Cc=0,pr=null,Ko=0,ph=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Gs={readContext:Hr,use:ke,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useLayoutEffect:Ri,useInsertionEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useSyncExternalStore:Ri,useId:Ri};Gs.useCacheRefresh=Ri,Gs.useMemoCache=Ri,Gs.useHostTransitionStatus=Ri,Gs.useFormState=Ri,Gs.useActionState=Ri,Gs.useOptimistic=Ri;var mh={readContext:Hr,use:ke,useCallback:function(m,_){return le().memoizedState=[m,_===void 0?null:_],m},useContext:Hr,useEffect:Ip,useImperativeHandle:function(m,_,x){x=x!=null?x.concat([m]):null,jh(4194308,4,Op.bind(null,_,m),x)},useLayoutEffect:function(m,_){return jh(4194308,4,m,_)},useInsertionEffect:function(m,_){jh(4,2,m,_)},useMemo:function(m,_){var x=le();_=_===void 0?null:_;var L=m();if(rs){te(!0);try{m()}finally{te(!1)}}return x.memoizedState=[L,_],L},useReducer:function(m,_,x){var L=le();if(x!==void 0){var U=x(_);if(rs){te(!0);try{x(_)}finally{te(!1)}}}else U=_;return L.memoizedState=L.baseState=U,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:U},L.queue=m,m=m.dispatch=hf.bind(null,Yn,m),[L.memoizedState,m]},useRef:function(m){var _=le();return m={current:m},_.memoizedState=m},useState:function(m){m=ln(m);var _=m.queue,x=am.bind(null,Yn,_);return _.dispatch=x,[m.memoizedState,x]},useDebugValue:sc,useDeferredValue:function(m,_){var x=le();return Yh(x,m,_)},useTransition:function(){var m=ln(!1);return m=rc.bind(null,Yn,m.queue,!0,!1),le().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,_,x){var L=Yn,U=le();if(hi){if(x===void 0)throw Error(r(407));x=x()}else{if(x=_(),Li===null)throw Error(r(349));(di&60)!==0||Kt(L,_,x)}U.memoizedState=x;var W={value:x,getSnapshot:_};return U.queue=W,Ip(vn.bind(null,L,W,m),[m]),L.flags|=2048,so(9,Jt.bind(null,L,W,x,_),{destroy:void 0},null),x},useId:function(){var m=le(),_=Li.identifierPrefix;if(hi){var x=La,L=Yl;x=(L&~(1<<32-hr(L)-1)).toString(32)+x,_=":"+_+"R"+x,x=Cd++,0<x&&(_+="H"+x.toString(32)),_+=":"}else x=Ko++,_=":"+_+"r"+x.toString(32)+":";return m.memoizedState=_},useCacheRefresh:function(){return le().memoizedState=Lp.bind(null,Yn)}};mh.useMemoCache=ze,mh.useHostTransitionStatus=Kc,mh.useFormState=Gn,mh.useActionState=Gn,mh.useOptimistic=function(m){var _=le();_.memoizedState=_.baseState=m;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return _.queue=x,_=Qa.bind(null,Yn,!0,x),x.dispatch=_,[m,_]};var Er={readContext:Hr,use:ke,useCallback:Ja,useContext:Hr,useEffect:cf,useImperativeHandle:Np,useInsertionEffect:Jg,useLayoutEffect:Yc,useMemo:om,useReducer:Tt,useRef:Ol,useState:function(){return Tt(rt)},useDebugValue:sc,useDeferredValue:function(m,_){var x=Te();return vr(x,kn.memoizedState,m,_)},useTransition:function(){var m=Tt(rt)[0],_=Te().memoizedState;return[typeof m=="boolean"?m:De(m),_]},useSyncExternalStore:qt,useId:oc};Er.useCacheRefresh=gu,Er.useMemoCache=ze,Er.useHostTransitionStatus=Kc,Er.useFormState=Ui,Er.useActionState=Ui,Er.useOptimistic=function(m,_){var x=Te();return Dn(x,kn,m,_)};var qo={readContext:Hr,use:ke,useCallback:Ja,useContext:Hr,useEffect:cf,useImperativeHandle:Np,useInsertionEffect:Jg,useLayoutEffect:Yc,useMemo:om,useReducer:Bt,useRef:Ol,useState:function(){return Bt(rt)},useDebugValue:sc,useDeferredValue:function(m,_){var x=Te();return kn===null?Yh(x,m,_):vr(x,kn.memoizedState,m,_)},useTransition:function(){var m=Bt(rt)[0],_=Te().memoizedState;return[typeof m=="boolean"?m:De(m),_]},useSyncExternalStore:qt,useId:oc};qo.useCacheRefresh=gu,qo.useMemoCache=ze,qo.useHostTransitionStatus=Kc,qo.useFormState=ur,qo.useActionState=ur,qo.useOptimistic=function(m,_){var x=Te();return kn!==null?Dn(x,kn,m,_):(x.baseState=m,[m,x.queue.dispatch])};var ql={isMounted:function(m){return(m=m._reactInternals)?T(m)===m:!1},enqueueSetState:function(m,_,x){m=m._reactInternals;var L=qs(),U=H(L);U.payload=_,x!=null&&(U.callback=x),_=oe(m,U,L),_!==null&&(Nr(_,m,L),ve(_,m,L))},enqueueReplaceState:function(m,_,x){m=m._reactInternals;var L=qs(),U=H(L);U.tag=1,U.payload=_,x!=null&&(U.callback=x),_=oe(m,U,L),_!==null&&(Nr(_,m,L),ve(_,m,L))},enqueueForceUpdate:function(m,_){m=m._reactInternals;var x=qs(),L=H(x);L.tag=2,_!=null&&(L.callback=_),_=oe(m,L,x),_!==null&&(Nr(_,m,x),ve(_,m,x))}},Kn=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},v0=Error(r(461)),$i=!1,gl={dehydrated:null,treeContext:null,retryLane:0},da=C(null),Xr=null,Pr=null,Sr=typeof AbortController<"u"?AbortController:function(){var m=[],_=this.signal={aborted:!1,addEventListener:function(x,L){m.push(L)}};this.abort=function(){_.aborted=!0,m.forEach(function(x){return x()})}},$_=Fo.unstable_scheduleCallback,x_=Fo.unstable_NormalPriority,ms={$$typeof:yr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Zm=Vn.S;Vn.S=function(m,_){typeof _=="object"&&_!==null&&typeof _.then=="function"&&Ve(m,_),Zm!==null&&Zm(m,_)};var Jl=C(null),Uu=!1,Ps=!1,Qm=!1,Oi=typeof WeakSet=="function"?WeakSet:Set,qn=null,ii=!1,On=null,si=!1,zs=null,Ns=8192,gs={getCacheForType:function(m){var _=Hr(ms),x=_.data.get(m);return x===void 0&&(x=m(),_.data.set(m,x)),x}},Fu=0,Jo=1,_s=2,_l=3,fa=4;if(typeof Symbol=="function"&&Symbol.for){var Hu=Symbol.for;Fu=Hu("selector.component"),Jo=Hu("selector.has_pseudo_class"),_s=Hu("selector.role"),_l=Hu("selector.test_id"),fa=Hu("selector.text")}var Vs=typeof WeakMap=="function"?WeakMap:Map,Ni=0,Li=null,Pn=null,di=0,Di=0,jr=null,ka=!1,Eo=!1,mr=!1,lo=0,ji=0,pa=0,Gu=0,Zl=0,ma=0,Ql=0,gh=null,Ws=null,b0=!1,So=0,Md=1/0,zf=null,Ao=null,vl=!1,eu=null,Mc=0,zu=0,y0=null,vs=0,Rc=null;return Jn.attemptContinuousHydration=function(m){if(m.tag===13){var _=we(m,67108864);_!==null&&Nr(_,m,67108864),xf(m,67108864)}},Jn.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var _=qs(),x=we(m,_);x!==null&&Nr(x,m,_),xf(m,_)}},Jn.attemptSynchronousHydration=function(m){switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=O(m.pendingLanes);if(_!==0){for(m.pendingLanes|=2,m.entangledLanes|=2;_;){var x=1<<31-hr(_);m.entanglements[1]|=x,_&=~x}Qe(m),(Ni&6)===0&&(Md=Na()+500,vt(0))}}break;case 13:_=we(m,2),_!==null&&Nr(_,m,2),Ef(),xf(m,2)}},Jn.batchedUpdates=function(m,_){return m(_)},Jn.createComponentSelector=function(m){return{$$typeof:Fu,value:m}},Jn.createContainer=function(m,_,x,L,U,W,me,Be,je,Ct){return d_(m,_,!1,null,x,L,W,me,Be,je,Ct,null)},Jn.createHasPseudoClassSelector=function(m){return{$$typeof:Jo,value:m}},Jn.createHydrationContainer=function(m,_,x,L,U,W,me,Be,je,Ct,zt,en,nn){return m=d_(x,L,!0,m,U,W,Be,je,Ct,zt,en,nn),m.context=Js(null),x=m.current,L=qs(),U=H(L),U.callback=_??null,oe(x,U,L),m.current.lanes=L,Z(m,L),Qe(m),m},Jn.createPortal=function(m,_,x){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:L==null?null:""+L,children:m,containerInfo:_,implementation:x}},Jn.createRoleSelector=function(m){return{$$typeof:_s,value:m}},Jn.createTestNameSelector=function(m){return{$$typeof:_l,value:m}},Jn.createTextSelector=function(m){return{$$typeof:fa,value:m}},Jn.defaultOnCaughtError=function(m){console.error(m)},Jn.defaultOnRecoverableError=function(m){Kn(m)},Jn.defaultOnUncaughtError=function(m){Kn(m)},Jn.deferredUpdates=function(m){var _=Vn.T,x=zl();try{return kr(32),Vn.T=null,m()}finally{kr(x),Vn.T=_}},Jn.discreteUpdates=function(m,_,x,L,U){var W=Vn.T,me=zl();try{return kr(2),Vn.T=null,m(_,x,L,U)}finally{kr(me),Vn.T=W,Ni===0&&(Md=Na()+500)}},Jn.findAllNodes=ad,Jn.findBoundingRects=function(m,_){if(!Vl)throw Error(r(363));_=ad(m,_),m=[];for(var x=0;x<_.length;x++)m.push(e0(_[x]));for(_=m.length-1;0<_;_--){x=m[_];for(var L=x.x,U=L+x.width,W=x.y,me=W+x.height,Be=_-1;0<=Be;Be--)if(_!==Be){var je=m[Be],Ct=je.x,zt=Ct+je.width,en=je.y,nn=en+je.height;if(L>=Ct&&W>=en&&U<=zt&&me<=nn){m.splice(_,1);break}else if(L!==Ct||x.width!==je.width||nn<W||en>me){if(!(W!==en||x.height!==je.height||zt<L||Ct>U)){Ct>L&&(je.width+=Ct-L,je.x=L),zt<U&&(je.width=U-Ct),m.splice(_,1);break}}else{en>W&&(je.height+=en-W,je.y=W),nn<me&&(je.height=me-en),m.splice(_,1);break}}}return m},Jn.findHostInstance=cd,Jn.findHostInstanceWithNoPortals=function(m){return m=S(m),m=m!==null?M(m):null,m===null?null:Gl(m.stateNode)},Jn.findHostInstanceWithWarning=function(m){return cd(m)},Jn.flushPassiveEffects=al,Jn.flushSyncFromReconciler=function(m){var _=Ni;Ni|=1;var x=Vn.T,L=zl();try{if(kr(2),Vn.T=null,m)return m()}finally{kr(L),Vn.T=x,Ni=_,(Ni&6)===0&&vt(0)}},Jn.flushSyncWork=Ef,Jn.focusWithin=function(m,_){if(!Vl)throw Error(r(363));for(m=sh(m),_=_o(m,_),_=Array.from(_),m=0;m<_.length;){var x=_[m++],L=x.tag;if(!oh(x)){if((L===5||L===26||L===27)&&n0(x.stateNode))return!0;for(x=x.child;x!==null;)_.push(x),x=x.sibling}}return!1},Jn.getFindAllNodesFailureDescription=function(m,_){if(!Vl)throw Error(r(363));var x=0,L=[];m=[sh(m),0];for(var U=0;U<m.length;){var W=m[U++],me=W.tag,Be=m[U++],je=_[Be];if((me!==5&&me!==26&&me!==27||!oh(W))&&(oa(W,je)&&(L.push(od(je)),Be++,Be>x&&(x=Be)),Be<_.length))for(W=W.child;W!==null;)m.push(W,Be),W=W.sibling}if(x<_.length){for(m=[];x<_.length;x++)m.push(od(_[x]));return`findAllNodes was able to match part of the selector:
  `+(L.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},Jn.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 27:case 5:return Gl(m.child.stateNode);default:return m.child.stateNode}},Jn.injectIntoDevTools=function(){var m={bundleType:0,version:$m,rendererPackageName:Rf,currentDispatcherRef:Vn,findFiberByHostInstance:Cm,reconcilerVersion:"19.0.0"};if(pd!==null&&(m.rendererConfig=pd),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)m=!0;else{try{tr=_.inject(m),yo=_}catch{}m=!!_.checkDCE}}return m},Jn.isAlreadyRendering=function(){return!1},Jn.observeVisibleRects=function(m,_,x,L){if(!Vl)throw Error(r(363));m=ad(m,_);var U=p_(m,x,L).disconnect;return{disconnect:function(){U()}}},Jn.shouldError=function(){return null},Jn.shouldSuspend=function(){return!1},Jn.startHostTransition=function(m,_,x,L){if(m.tag!==5)throw Error(r(476));var U=Za(m).queue;rc(m,U,_,cl,x===null?i:function(){var W=Za(m).next.queue;return Nl(m,W,{},qs()),x(L)})},Jn.updateContainer=function(m,_,x,L){var U=_.current,W=qs();return hd(U,W,m,_,x,L),W},Jn.updateContainerSync=function(m,_,x,L){return _.tag===0&&al(),hd(_.current,2,m,_,x,L),2},Jn},s.exports.default=s.exports,Object.defineProperty(s.exports,"__esModule",{value:!0})}(XR)),XR.exports}var jk;function wq(){return jk||(jk=1,WR.exports=Rq()),WR.exports}var Iq=wq();const Oq=Mp(Iq);var Yk=VG();const Nq=s=>typeof s=="object"&&typeof s.then=="function",Ov=[];function WG(s,e,n=(i,r)=>i===r){if(s===e)return!0;if(!s||!e)return!1;const i=s.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(s[r],e[r]))return!1;return!0}function XG(s,e=null,n=!1,i={}){e===null&&(e=[s]);for(const a of Ov)if(WG(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=Ov.indexOf(r);a!==-1&&Ov.splice(a,1)},promise:(Nq(s)?s:s(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(Ov.push(r),!n)throw r.promise}const Lq=(s,e,n)=>XG(s,e,!1,n),Dq=(s,e,n)=>void XG(s,e,!0,n),Bq=s=>{if(s===void 0||s.length===0)Ov.splice(0,Ov.length);else{const e=Ov.find(n=>WG(s,n.keys,n.equal));e&&e.remove()}};function j2(s,e,n){if(!s)return;if(n(s)===!0)return s;let i=e?s.return:s.child;for(;i;){const r=j2(i,e,n);if(r)return r;i=e?null:i.sibling}}function jG(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const Y2=jG(Q.createContext(null));let YG=class extends Q.Component{render(){return Q.createElement(Y2.Provider,{value:this._reactInternals},this.props.children)}};function KG(){const s=Q.useContext(Y2);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Q.useId();return Q.useMemo(()=>{for(const n of[s,s?.alternate]){if(!n)continue;const i=j2(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[s,e])}const kq=Symbol.for("react.context"),Pq=s=>s!==null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===kq;function Uq(){const s=KG(),[e]=Q.useState(()=>new Map);e.clear();let n=s;for(;n;){const i=n.type;Pq(i)&&i!==Y2&&!e.has(i)&&e.set(i,Q.use(jG(i))),n=n.return}return e}function Fq(){const s=Uq();return Q.useMemo(()=>Array.from(s.keys()).reduce((e,n)=>i=>Q.createElement(e,null,Q.createElement(n.Provider,{...i,value:s.get(n)})),e=>Q.createElement(YG,{...e})),[s])}function qG(s){let e=s.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const JG=s=>s&&s.isOrthographicCamera,Hq=s=>s&&s.hasOwnProperty("current"),Gq=s=>s!=null&&(typeof s=="string"||typeof s=="number"||s.isColor),YS=((s,e)=>typeof window<"u"&&(((s=window.document)==null?void 0:s.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Q.useLayoutEffect:Q.useEffect;function K2(s){const e=Q.useRef(s);return YS(()=>void(e.current=s),[s]),e}function zq(){const s=KG(),e=Fq();return Q.useMemo(()=>({children:n})=>{const r=!!j2(s,!0,a=>a.type===Q.StrictMode)?Q.StrictMode:Q.Fragment;return he.jsx(r,{children:he.jsx(e,{children:n})})},[s,e])}function Vq({set:s}){return YS(()=>(s(new Promise(()=>null)),()=>s(!1)),[s]),null}const Wq=(s=>(s=class extends Q.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},s.getDerivedStateFromError=()=>({error:!0}),s))();function ZG(s){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(s)?Math.min(Math.max(s[0],n),s[1]):s}function sy(s){var e;return(e=s.__r3f)==null?void 0:e.root.getState()}const Mr={obj:s=>s===Object(s)&&!Mr.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",boo:s=>typeof s=="boolean",und:s=>s===void 0,nul:s=>s===null,arr:s=>Array.isArray(s),equ(s,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof s!=typeof e||!!s!=!!e)return!1;if(Mr.str(s)||Mr.num(s)||Mr.boo(s))return s===e;const a=Mr.obj(s);if(a&&i==="reference")return s===e;const l=Mr.arr(s);if(l&&n==="reference")return s===e;if((l||a)&&s===e)return!0;let h;for(h in s)if(!(h in e))return!1;if(a&&n==="shallow"&&i==="shallow"){for(h in r?e:s)if(!Mr.equ(s[h],e[h],{strict:r,objects:"reference"}))return!1}else for(h in r?e:s)if(s[h]!==e[h])return!1;if(Mr.und(h)){if(l&&s.length===0&&e.length===0||a&&Object.keys(s).length===0&&Object.keys(e).length===0)return!0;if(s!==e)return!1}return!0}};function Xq(s){const e={nodes:{},materials:{},meshes:{}};return s&&s.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material),n.isMesh&&!e.meshes[n.name]&&(e.meshes[n.name]=n)}),e}function jq(s){s.type!=="Scene"&&(s.dispose==null||s.dispose());for(const e in s){const n=s[e];n?.type!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const QG=["children","key","ref"];function Yq(s){const e={};for(const n in s)QG.includes(n)||(e[n]=s[n]);return e}function vC(s,e,n,i){const r=s;let a=r?.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:Yq(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function fS(s,e){let n=s[e];if(!e.includes("-"))return{root:s,key:e,target:n};n=s;for(const r of e.split("-")){var i;e=r,s=n,n=(i=n)==null?void 0:i[e]}return{root:s,key:e,target:n}}const Kk=/-\d+$/;function bC(s,e){if(Mr.str(e.props.attach)){if(Kk.test(e.props.attach)){const r=e.props.attach.replace(Kk,""),{root:a,key:l}=fS(s.object,r);Array.isArray(a[l])||(a[l]=[])}const{root:n,key:i}=fS(s.object,e.props.attach);e.previousAttach=n[i],n[i]=e.object}else Mr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(s.object,e.object))}function yC(s,e){if(Mr.str(e.props.attach)){const{root:n,key:i}=fS(s.object,e.props.attach),r=e.previousAttach;r===void 0?delete n[i]:n[i]=r}else e.previousAttach==null||e.previousAttach(s.object,e.object);delete e.previousAttach}const aO=[...QG,"args","dispose","attach","object","onUpdate","dispose"],qk=new Map;function Kq(s){let e=qk.get(s.constructor);try{e||(e=new s.constructor,qk.set(s.constructor,e))}catch{}return e}function qq(s,e){const n={};for(const i in e)if(!aO.includes(i)&&!Mr.equ(e[i],s.props[i])){n[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(n[r]=e[r])}for(const i in s.props){if(aO.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=fS(s.object,i);if(r.constructor&&r.constructor.length===0){const l=Kq(r);Mr.und(l)||(n[a]=l[a])}else n[a]=0}return n}const Jq=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Zq=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function cp(s,e){var n;const i=s.__r3f,r=i&&qG(i).getState(),a=i?.eventCount;for(const h in e){let f=e[h];if(aO.includes(h))continue;if(i&&Zq.test(h)){typeof f=="function"?i.handlers[h]=f:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;continue}if(f===void 0)continue;let{root:p,key:v,target:T}=fS(s,h);if(T instanceof Yy&&f instanceof Yy)T.mask=f.mask;else if(T instanceof on&&Gq(f))T.set(f);else if(T!==null&&typeof T=="object"&&typeof T.set=="function"&&typeof T.copy=="function"&&f!=null&&f.constructor&&T.constructor===f.constructor)T.copy(f);else if(T!==null&&typeof T=="object"&&typeof T.set=="function"&&Array.isArray(f))typeof T.fromArray=="function"?T.fromArray(f):T.set(...f);else if(T!==null&&typeof T=="object"&&typeof T.set=="function"&&typeof f=="number")typeof T.setScalar=="function"?T.setScalar(f):T.set(f);else{var l;p[v]=f,r&&!r.linear&&Jq.includes(v)&&(l=p[v])!=null&&l.isTexture&&p[v].format===ho&&p[v].type===fu&&(p[v].colorSpace=Wa)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(n=i.object)!=null&&n.isObject3D&&a!==i.eventCount){const h=i.object,f=r.internal.interaction.indexOf(h);f>-1&&r.internal.interaction.splice(f,1),i.eventCount&&h.raycast!==null&&r.internal.interaction.push(h)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&bT(i),s}function bT(s){var e;if(!s.parent)return;s.props.onUpdate==null||s.props.onUpdate(s.object);const n=(e=s.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function ez(s,e){s.manual||(JG(s)?(s.left=e.width/-2,s.right=e.width/2,s.top=e.height/2,s.bottom=e.height/-2):s.aspect=e.width/e.height,s.updateProjectionMatrix())}const uu=s=>s?.isObject3D;function M$(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function tz(s,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(s.delete(i),r.target.releasePointerCapture(i)))}function Qq(s,e){const{internal:n}=s.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{tz(n.capturedMap,e,i,r)})}function eJ(s){function e(f){const{internal:p}=s.getState(),v=f.offsetX-p.initialClick[0],T=f.offsetY-p.initialClick[1];return Math.round(Math.sqrt(v*v+T*T))}function n(f){return f.filter(p=>["Move","Over","Enter","Out","Leave"].some(v=>{var T;return(T=p.__r3f)==null?void 0:T.handlers["onPointer"+v]}))}function i(f,p){const v=s.getState(),T=new Set,y=[],S=p?p(v.internal.interaction):v.internal.interaction;for(let E=0;E<S.length;E++){const w=sy(S[E]);w&&(w.raycaster.camera=void 0)}v.previousRoot||v.events.compute==null||v.events.compute(f,v);function $(E){const w=sy(E);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var I;w.events.compute==null||w.events.compute(f,w,(I=w.previousRoot)==null?void 0:I.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(E,!0):[]}let M=S.flatMap($).sort((E,w)=>{const I=sy(E.object),O=sy(w.object);return!I||!O?E.distance-w.distance:O.events.priority-I.events.priority||E.distance-w.distance}).filter(E=>{const w=M$(E);return T.has(w)?!1:(T.add(w),!0)});v.events.filter&&(M=v.events.filter(M,v));for(const E of M){let w=E.object;for(;w;){var C;(C=w.__r3f)!=null&&C.eventCount&&y.push({...E,eventObject:w}),w=w.parent}}if("pointerId"in f&&v.internal.capturedMap.has(f.pointerId))for(let E of v.internal.capturedMap.get(f.pointerId).values())T.has(M$(E.intersection))||y.push(E.intersection);return y}function r(f,p,v,T){if(f.length){const y={stopped:!1};for(const S of f){let $=sy(S.object);if($||S.object.traverseAncestors(M=>{const C=sy(M);if(C)return $=C,!1}),$){const{raycaster:M,pointer:C,camera:E,internal:w}=$,I=new be(C.x,C.y,0).unproject(E),O=G=>{var D,Z;return(D=(Z=w.capturedMap.get(G))==null?void 0:Z.has(S.eventObject))!=null?D:!1},P=G=>{const D={intersection:S,target:p.target};w.capturedMap.has(G)?w.capturedMap.get(G).set(S.eventObject,D):w.capturedMap.set(G,new Map([[S.eventObject,D]])),p.target.setPointerCapture(G)},F=G=>{const D=w.capturedMap.get(G);D&&tz(w.capturedMap,S.eventObject,D,G)};let V={};for(let G in p){let D=p[G];typeof D!="function"&&(V[G]=D)}let X={...S,...V,pointer:C,intersections:f,stopped:y.stopped,delta:v,unprojectedPoint:I,ray:M.ray,camera:E,stopPropagation(){const G="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!G||G.has(S.eventObject))&&(X.stopped=y.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(D=>D.eventObject===S.eventObject))){const D=f.slice(0,f.indexOf(S));a([...D,S])}},target:{hasPointerCapture:O,setPointerCapture:P,releasePointerCapture:F},currentTarget:{hasPointerCapture:O,setPointerCapture:P,releasePointerCapture:F},nativeEvent:p};if(T(X),y.stopped===!0)break}}}return f}function a(f){const{internal:p}=s.getState();for(const v of p.hovered.values())if(!f.length||!f.find(T=>T.object===v.object&&T.index===v.index&&T.instanceId===v.instanceId)){const y=v.eventObject.__r3f;if(p.hovered.delete(M$(v)),y!=null&&y.eventCount){const S=y.handlers,$={...v,intersections:f};S.onPointerOut==null||S.onPointerOut($),S.onPointerLeave==null||S.onPointerLeave($)}}}function l(f,p){for(let v=0;v<p.length;v++){const T=p[v].__r3f;T==null||T.handlers.onPointerMissed==null||T.handlers.onPointerMissed(f)}}function h(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{const{internal:v}=s.getState();"pointerId"in p&&v.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{v.capturedMap.has(p.pointerId)&&(v.capturedMap.delete(p.pointerId),a([]))})}}return function(v){const{onPointerMissed:T,internal:y}=s.getState();y.lastEvent.current=v;const S=f==="onPointerMove",$=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",C=i(v,S?n:void 0),E=$?e(v):0;f==="onPointerDown"&&(y.initialClick=[v.offsetX,v.offsetY],y.initialHits=C.map(I=>I.eventObject)),$&&!C.length&&E<=2&&(l(v,y.interaction),T&&T(v)),S&&a(C);function w(I){const O=I.eventObject,P=O.__r3f;if(!(P!=null&&P.eventCount))return;const F=P.handlers;if(S){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const V=M$(I),X=y.hovered.get(V);X?X.stopped&&I.stopPropagation():(y.hovered.set(V,I),F.onPointerOver==null||F.onPointerOver(I),F.onPointerEnter==null||F.onPointerEnter(I))}F.onPointerMove==null||F.onPointerMove(I)}else{const V=F[f];V?(!$||y.initialHits.includes(O))&&(l(v,y.interaction.filter(X=>!y.initialHits.includes(X))),V(I)):$&&y.initialHits.includes(O)&&l(v,y.interaction.filter(X=>!y.initialHits.includes(X)))}}r(C,v,E,w)}}return{handlePointer:h}}const Jk=s=>!!(s!=null&&s.render),q2=Q.createContext(null),tJ=(s,e)=>{const n=zG((h,f)=>{const p=new be,v=new be,T=new be;function y(E=f().camera,w=v,I=f().size){const{width:O,height:P,top:F,left:V}=I,X=O/P;w.isVector3?T.copy(w):T.set(...w);const G=E.getWorldPosition(p).distanceTo(T);if(JG(E))return{width:O/E.zoom,height:P/E.zoom,top:F,left:V,factor:1,distance:G,aspect:X};{const D=E.fov*Math.PI/180,Z=2*Math.tan(D/2)*G,Y=Z*(O/P);return{width:Y,height:Z,top:F,left:V,factor:O/Y,distance:G,aspect:X}}}let S;const $=E=>h(w=>({performance:{...w.performance,current:E}})),M=new It;return{set:h,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>s(f(),E),advance:(E,w)=>e(E,w,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new U2,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=f();S&&clearTimeout(S),E.performance.current!==E.performance.min&&$(E.performance.min),S=setTimeout(()=>$(f().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:E=>h(w=>({...w,events:{...w.events,...E}})),setSize:(E,w,I=0,O=0)=>{const P=f().camera,F={width:E,height:w,top:I,left:O};h(V=>({size:F,viewport:{...V.viewport,...y(P,v,F)}}))},setDpr:E=>h(w=>{const I=ZG(E);return{viewport:{...w.viewport,dpr:I,initialDpr:w.viewport.initialDpr||I}}}),setFrameloop:(E="always")=>{const w=f().clock;w.stop(),w.elapsedTime=0,E!=="never"&&(w.start(),w.elapsedTime=0),h(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Q.createRef(),active:!1,frames:0,priority:0,subscribe:(E,w,I)=>{const O=f().internal;return O.priority=O.priority+(w>0?1:0),O.subscribers.push({ref:E,priority:w,store:I}),O.subscribers=O.subscribers.sort((P,F)=>P.priority-F.priority),()=>{const P=f().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(F=>F.ref!==E))}}}}}),i=n.getState();let r=i.size,a=i.viewport.dpr,l=i.camera;return n.subscribe(()=>{const{camera:h,size:f,viewport:p,gl:v,set:T}=n.getState();if(f.width!==r.width||f.height!==r.height||p.dpr!==a){r=f,a=p.dpr,ez(h,f),p.dpr>0&&v.setPixelRatio(p.dpr);const y=typeof HTMLCanvasElement<"u"&&v.domElement instanceof HTMLCanvasElement;v.setSize(f.width,f.height,y)}h!==l&&(l=h,T(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(h)}})))}),n.subscribe(h=>s(h)),n};function J2(){const s=Q.useContext(q2);if(!s)throw new Error("R3F: Hooks can only be used within the Canvas component!");return s}function or(s=n=>n,e){return J2()(s,e)}function KS(s,e=0){const n=J2(),i=n.getState().internal.subscribe,r=K2(s);return YS(()=>i(r,e,n),[e,i,n]),null}const Zk=new WeakMap,nJ=s=>{var e;return typeof s=="function"&&(s==null||(e=s.prototype)==null?void 0:e.constructor)===s};function nz(s,e){return function(n,...i){let r;return nJ(n)?(r=Zk.get(n),r||(r=new n,Zk.set(n,r))):r=n,s&&s(r),Promise.all(i.map(a=>new Promise((l,h)=>r.load(a,f=>{uu(f?.scene)&&Object.assign(f,Xq(f.scene)),l(f)},e,f=>h(new Error(`Could not load ${a}: ${f?.message}`))))))}}function tm(s,e,n,i){const r=Array.isArray(e)?e:[e],a=Lq(nz(n,i),[s,...r],{equal:Mr.equ});return Array.isArray(e)?a:a[0]}tm.preload=function(s,e,n){const i=Array.isArray(e)?e:[e];return Dq(nz(n),[s,...i])};tm.clear=function(s,e){const n=Array.isArray(e)?e:[e];return Bq([s,...n])};function iJ(s){const e=Oq(s);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Q.version}),e}const iz=0,Zy={},sJ=/^three(?=[A-Z])/,RM=s=>`${s[0].toUpperCase()}${s.slice(1)}`;let rJ=0;const oJ=s=>typeof s=="function";function sz(s){if(oJ(s)){const e=`${rJ++}`;return Zy[e]=s,e}else Object.assign(Zy,s)}function rz(s,e){const n=RM(s),i=Zy[n];if(s!=="primitive"&&!i)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(s==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function aJ(s,e,n){var i;return s=RM(s)in Zy?s:s.replace(sJ,""),rz(s,e),s==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,vC(e.object,n,s,e)}function lJ(s){if(!s.isHidden){var e;s.props.attach&&(e=s.parent)!=null&&e.object?yC(s.parent,s):uu(s.object)&&(s.object.visible=!1),s.isHidden=!0,bT(s)}}function oz(s){if(s.isHidden){var e;s.props.attach&&(e=s.parent)!=null&&e.object?bC(s.parent,s):uu(s.object)&&s.props.visible!==!1&&(s.object.visible=!0),s.isHidden=!1,bT(s)}}function Z2(s,e,n){const i=e.root.getState();if(!(!s.parent&&s.object!==i.scene)){if(!e.object){var r,a;const l=Zy[RM(e.type)];e.object=(r=e.props.object)!=null?r:new l(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(cp(e.object,e.props),e.props.attach)bC(s,e);else if(uu(e.object)&&uu(s.object)){const l=s.object.children.indexOf(n?.object);if(n&&l!==-1){const h=s.object.children.indexOf(e.object);if(h!==-1){s.object.children.splice(h,1);const f=h<l?l-1:l;s.object.children.splice(f,0,e.object)}else e.object.parent=s.object,s.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),s.object.dispatchEvent({type:"childadded",child:e.object})}else s.object.add(e.object)}for(const l of e.children)Z2(e,l);bT(e)}}function KR(s,e){e&&(e.parent=s,s.children.push(e),Z2(s,e))}function Qk(s,e,n){if(!e||!n)return;e.parent=s;const i=s.children.indexOf(n);i!==-1?s.children.splice(i,0,e):s.children.push(e),Z2(s,e,n)}function az(s){if(typeof s.dispose=="function"){const e=()=>{try{s.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():Yk.unstable_scheduleCallback(Yk.unstable_IdlePriority,e)}}function lO(s,e,n){if(!e)return;e.parent=null;const i=s.children.indexOf(e);i!==-1&&s.children.splice(i,1),e.props.attach?yC(s,e):uu(e.object)&&uu(s.object)&&(s.object.remove(e.object),Qq(qG(e),e.object));const r=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const l=e.children[a];lO(e,l,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&az(e.object),n===void 0&&bT(e)}function uJ(s,e){for(const n of[s,s.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const i=n.ref(e);typeof i=="function"&&(n.refCleanup=i)}else n.ref&&(n.ref.current=e)}const lx=[];function cJ(){for(const[n]of lx){const i=n.parent;if(i){n.props.attach?yC(i,n):uu(n.object)&&uu(i.object)&&i.object.remove(n.object);for(const r of n.children)r.props.attach?yC(n,r):uu(r.object)&&uu(n.object)&&n.object.remove(r.object)}n.isHidden&&oz(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&az(n.object)}for(const[n,i,r]of lx){n.props=i;const a=n.parent;if(a){var s,e;const l=Zy[RM(n.type)];n.object=(s=n.props.object)!=null?s:new l(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,uJ(r,n.object),cp(n.object,n.props),n.props.attach?bC(a,n):uu(n.object)&&uu(a.object)&&a.object.add(n.object);for(const h of n.children)h.props.attach?bC(n,h):uu(h.object)&&uu(n.object)&&n.object.add(h.object);bT(n)}}lx.length=0}const qR=()=>{},eP={};let R$=iz;const hJ=0,dJ=4,TC=iJ({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:aJ,removeChild:lO,appendChild:KR,appendInitialChild:KR,insertBefore:Qk,appendChildToContainer(s,e){const n=s.getState().scene.__r3f;!e||!n||KR(n,e)},removeChildFromContainer(s,e){const n=s.getState().scene.__r3f;!e||!n||lO(n,e)},insertInContainerBefore(s,e,n){const i=s.getState().scene.__r3f;!e||!n||!i||Qk(i,e,n)},getRootHostContext:()=>eP,getChildHostContext:()=>eP,commitUpdate(s,e,n,i,r){var a,l,h;rz(e,i);let f=!1;if((s.type==="primitive"&&n.object!==i.object||((a=i.args)==null?void 0:a.length)!==((l=n.args)==null?void 0:l.length)||(h=i.args)!=null&&h.some((v,T)=>{var y;return v!==((y=n.args)==null?void 0:y[T])}))&&(f=!0),f)lx.push([s,{...i},r]);else{const v=qq(s,i);Object.keys(v).length&&(Object.assign(s.props,v),cp(s.object,v))}(r.sibling===null||(r.flags&dJ)===hJ)&&cJ()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:s=>s?.object,prepareForCommit:()=>null,preparePortalMount:s=>vC(s.getState().scene,s,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:lJ,unhideInstance:oz,createTextInstance:qR,hideTextInstance:qR,unhideTextInstance:qR,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Q.createContext(null),setCurrentUpdatePriority(s){R$=s},getCurrentUpdatePriority(){return R$},resolveUpdatePriority(){var s;if(R$!==iz)return R$;switch(typeof window<"u"&&((s=window.event)==null?void 0:s.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ax.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ax.ContinuousEventPriority;default:return ax.DefaultEventPriority}},resetFormInstance(){}}),Jv=new Map,ry={objects:"shallow",strict:!1};function fJ(s,e){if(!e&&typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&s.parentElement){const{width:n,height:i,top:r,left:a}=s.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas)return{width:s.width,height:s.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function pJ(s){const e=Jv.get(s),n=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||tJ(hO,nP),l=n||TC.createContainer(a,ax.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Jv.set(s,{fiber:l,store:a});let h,f,p=!1,v=null;return{async configure(T={}){let y;v=new Promise(fe=>y=fe);let{gl:S,size:$,scene:M,events:C,onCreated:E,shadows:w=!1,linear:I=!1,flat:O=!1,legacy:P=!1,orthographic:F=!1,frameloop:V="always",dpr:X=[1,2],performance:G,raycaster:D,camera:Z,onPointerMissed:Y}=T,j=a.getState(),ne=j.gl;if(!j.gl){const fe={canvas:s,powerPreference:"high-performance",antialias:!0,alpha:!0},Ne=typeof S=="function"?await S(fe):S;Jk(Ne)?ne=Ne:ne=new X2({...fe,...S}),j.set({gl:ne})}let ee=j.raycaster;ee||j.set({raycaster:ee=new z2});const{params:z,...te}=D||{};if(Mr.equ(te,ee,ry)||cp(ee,{...te}),Mr.equ(z,ee.params,ry)||cp(ee,{params:{...ee.params,...z}}),!j.camera||j.camera===f&&!Mr.equ(f,Z,ry)){f=Z;const fe=Z?.isCamera,Ne=fe?Z:F?new Tp(0,0,0,0,.1,1e3):new io(75,0,.1,1e3);fe||(Ne.position.z=5,Z&&(cp(Ne,Z),Ne.manual||("aspect"in Z||"left"in Z||"right"in Z||"bottom"in Z||"top"in Z)&&(Ne.manual=!0,Ne.updateProjectionMatrix())),!j.camera&&!(Z!=null&&Z.rotation)&&Ne.lookAt(0,0,0)),j.set({camera:Ne}),ee.camera=Ne}if(!j.scene){let fe;M!=null&&M.isScene?(fe=M,vC(fe,a,"",{})):(fe=new mT,vC(fe,a,"",{}),M&&cp(fe,M)),j.set({scene:fe})}C&&!j.events.handlers&&j.set({events:C(a)});const ce=fJ(s,$);if(Mr.equ(ce,j.size,ry)||j.setSize(ce.width,ce.height,ce.top,ce.left),X&&j.viewport.dpr!==ZG(X)&&j.setDpr(X),j.frameloop!==V&&j.setFrameloop(V),j.onPointerMissed||j.set({onPointerMissed:Y}),G&&!Mr.equ(G,j.performance,ry)&&j.set(fe=>({performance:{...fe.performance,...G}})),!j.xr){var pe;const fe=(Ee,We)=>{const Fe=a.getState();Fe.frameloop!=="never"&&nP(Ee,!0,Fe,We)},Ne=()=>{const Ee=a.getState();Ee.gl.xr.enabled=Ee.gl.xr.isPresenting,Ee.gl.xr.setAnimationLoop(Ee.gl.xr.isPresenting?fe:null),Ee.gl.xr.isPresenting||hO(Ee)},Pe={connect(){const Ee=a.getState().gl;Ee.xr.addEventListener("sessionstart",Ne),Ee.xr.addEventListener("sessionend",Ne)},disconnect(){const Ee=a.getState().gl;Ee.xr.removeEventListener("sessionstart",Ne),Ee.xr.removeEventListener("sessionend",Ne)}};typeof((pe=ne.xr)==null?void 0:pe.addEventListener)=="function"&&Pe.connect(),j.set({xr:Pe})}if(ne.shadowMap){const fe=ne.shadowMap.enabled,Ne=ne.shadowMap.type;if(ne.shadowMap.enabled=!!w,Mr.boo(w))ne.shadowMap.type=kE;else if(Mr.str(w)){var K;const Pe={basic:ZF,percentage:KC,soft:kE,variance:jd};ne.shadowMap.type=(K=Pe[w])!=null?K:kE}else Mr.obj(w)&&Object.assign(ne.shadowMap,w);(fe!==ne.shadowMap.enabled||Ne!==ne.shadowMap.type)&&(ne.shadowMap.needsUpdate=!0)}return Yi.enabled=!P,p||(ne.outputColorSpace=I?sf:Wa,ne.toneMapping=O?yp:e2),j.legacy!==P&&j.set(()=>({legacy:P})),j.linear!==I&&j.set(()=>({linear:I})),j.flat!==O&&j.set(()=>({flat:O})),S&&!Mr.fun(S)&&!Jk(S)&&!Mr.equ(S,ne,ry)&&cp(ne,S),h=E,p=!0,y(),this},render(T){return!p&&!v&&this.configure(),v.then(()=>{TC.updateContainer(he.jsx(mJ,{store:a,children:T,onCreated:h,rootElement:s}),l,null,()=>{})}),a},unmount(){lz(s)}}}function mJ({store:s,children:e,onCreated:n,rootElement:i}){return YS(()=>{const r=s.getState();r.set(a=>({internal:{...a.internal,active:!0}})),n&&n(r),s.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),he.jsx(q2.Provider,{value:s,children:e})}function lz(s,e){const n=Jv.get(s),i=n?.fiber;if(i){const r=n?.store.getState();r&&(r.internal.active=!1),TC.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,l,h,f;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(l=a.renderLists)==null||l.dispose==null||l.dispose(),(h=r.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(f=r.gl)!=null&&f.xr&&r.xr.disconnect(),jq(r.scene),Jv.delete(s)}catch{}},500)})}}function uz(s,e,n){return he.jsx(gJ,{children:s,container:e,state:n})}function gJ({state:s={},children:e,container:n}){const{events:i,size:r,...a}=s,l=J2(),[h]=Q.useState(()=>new z2),[f]=Q.useState(()=>new It),p=K2((T,y)=>{let S;if(y.camera&&r){const $=y.camera;S=T.viewport.getCurrentViewport($,new be,r),$!==T.camera&&ez($,r)}return{...T,...y,scene:n,raycaster:h,pointer:f,mouse:f,previousRoot:l,events:{...T.events,...y.events,...i},size:{...T.size,...r},viewport:{...T.viewport,...S},setEvents:$=>y.set(M=>({...M,events:{...M.events,...$}}))}}),v=Q.useMemo(()=>{const T=zG((S,$)=>({...a,set:S,get:$})),y=S=>T.setState($=>p.current(S,$));return y(l.getState()),l.subscribe(y),T},[l,n]);return he.jsx(he.Fragment,{children:TC.createPortal(he.jsx(q2.Provider,{value:v,children:e}),v,null)})}const _J=new Set,vJ=new Set,bJ=new Set;function JR(s,e){if(s.size)for(const{callback:n}of s.values())n(e)}function XE(s,e){switch(s){case"before":return JR(_J,e);case"after":return JR(vJ,e);case"tail":return JR(bJ,e)}}let ZR,QR;function uO(s,e,n){let i=e.clock.getDelta();e.frameloop==="never"&&typeof s=="number"&&(i=s-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=s),ZR=e.internal.subscribers;for(let r=0;r<ZR.length;r++)QR=ZR[r],QR.ref.current(QR.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let EC=!1,cO=!1,ew,tP,oy;function cz(s){tP=requestAnimationFrame(cz),EC=!0,ew=0,XE("before",s),cO=!0;for(const n of Jv.values()){var e;oy=n.store.getState(),oy.internal.active&&(oy.frameloop==="always"||oy.internal.frames>0)&&!((e=oy.gl.xr)!=null&&e.isPresenting)&&(ew+=uO(s,oy))}if(cO=!1,XE("after",s),ew===0)return XE("tail",s),EC=!1,cancelAnimationFrame(tP)}function hO(s,e=1){var n;if(!s)return Jv.forEach(i=>hO(i.store.getState(),e));(n=s.gl.xr)!=null&&n.isPresenting||!s.internal.active||s.frameloop==="never"||(e>1?s.internal.frames=Math.min(60,s.internal.frames+e):cO?s.internal.frames=2:s.internal.frames=1,EC||(EC=!0,requestAnimationFrame(cz)))}function nP(s,e=!0,n,i){if(e&&XE("before",s),n)uO(s,n,i);else for(const r of Jv.values())uO(s,r.store.getState());e&&XE("after",s)}const tw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function yJ(s){const{handlePointer:e}=eJ(s);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(tw).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=s.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{const{set:i,events:r}=s.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:n}})),r.handlers)for(const a in r.handlers){const l=r.handlers[a],[h,f]=tw[a];n.addEventListener(h,l,{passive:f})}},disconnect:()=>{const{set:n,events:i}=s.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[l]=tw[r];i.connected.removeEventListener(l,a)}n(r=>({events:{...r.events,connected:void 0}}))}}}}function iP(s,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>s(...i),e)}}function TJ({debounce:s,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=Q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=Q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),f=s?typeof s=="number"?s:s.scroll:null,p=s?typeof s=="number"?s:s.resize:null,v=Q.useRef(!1);Q.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[T,y,S]=Q.useMemo(()=>{const E=()=>{if(!h.current.element)return;const{left:w,top:I,width:O,height:P,bottom:F,right:V,x:X,y:G}=h.current.element.getBoundingClientRect(),D={left:w,top:I,width:O,height:P,bottom:F,right:V,x:X,y:G};h.current.element instanceof HTMLElement&&i&&(D.height=h.current.element.offsetHeight,D.width=h.current.element.offsetWidth),Object.freeze(D),v.current&&!$J(h.current.lastBounds,D)&&l(h.current.lastBounds=D)};return[E,p?iP(E,p):E,f?iP(E,f):E]},[l,i,f,p]);function $(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",S,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function M(){h.current.element&&(h.current.resizeObserver=new r(S),h.current.resizeObserver.observe(h.current.element),e&&h.current.scrollContainers&&h.current.scrollContainers.forEach(E=>E.addEventListener("scroll",S,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{S()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const C=E=>{!E||E===h.current.element||($(),h.current.element=E,h.current.scrollContainers=hz(E),M())};return SJ(S,!!e),EJ(y),Q.useEffect(()=>{$(),M()},[e,S,y]),Q.useEffect(()=>$,[]),[C,a,T]}function EJ(s){Q.useEffect(()=>{const e=s;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[s])}function SJ(s,e){Q.useEffect(()=>{if(e){const n=s;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[s,e])}function hz(s){const e=[];if(!s||s===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(s);return[n,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(s),[...e,...hz(s.parentElement)]}const AJ=["x","y","top","bottom","left","right","width","height"],$J=(s,e)=>AJ.every(n=>s[n]===e[n]);function xJ({ref:s,children:e,fallback:n,resize:i,style:r,gl:a,events:l=yJ,eventSource:h,eventPrefix:f,shadows:p,linear:v,flat:T,legacy:y,orthographic:S,frameloop:$,dpr:M,performance:C,raycaster:E,camera:w,scene:I,onPointerMissed:O,onCreated:P,...F}){Q.useMemo(()=>sz(mq),[]);const V=zq(),[X,G]=TJ({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=Q.useRef(null),Z=Q.useRef(null);Q.useImperativeHandle(s,()=>D.current);const Y=K2(O),[j,ne]=Q.useState(!1),[ee,z]=Q.useState(!1);if(j)throw j;if(ee)throw ee;const te=Q.useRef(null);YS(()=>{const pe=D.current;if(G.width>0&&G.height>0&&pe){te.current||(te.current=pJ(pe));async function K(){await te.current.configure({gl:a,scene:I,events:l,shadows:p,linear:v,flat:T,legacy:y,orthographic:S,frameloop:$,dpr:M,performance:C,raycaster:E,camera:w,size:G,onPointerMissed:(...fe)=>Y.current==null?void 0:Y.current(...fe),onCreated:fe=>{fe.events.connect==null||fe.events.connect(h?Hq(h)?h.current:h:Z.current),f&&fe.setEvents({compute:(Ne,Pe)=>{const Ee=Ne[f+"X"],We=Ne[f+"Y"];Pe.pointer.set(Ee/Pe.size.width*2-1,-(We/Pe.size.height)*2+1),Pe.raycaster.setFromCamera(Pe.pointer,Pe.camera)}}),P?.(fe)}}),te.current.render(he.jsx(V,{children:he.jsx(Wq,{set:z,children:he.jsx(Q.Suspense,{fallback:he.jsx(Vq,{set:ne}),children:e??null})})}))}K()}}),Q.useEffect(()=>{const pe=D.current;if(pe)return()=>lz(pe)},[]);const ce=h?"none":"auto";return he.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ce,...r},...F,children:he.jsx("div",{ref:X,style:{width:"100%",height:"100%"},children:he.jsx("canvas",{ref:D,style:{display:"block"},children:n})})})}function CJ(s){return he.jsx(YG,{children:he.jsx(xJ,{...s})})}function ec(){return ec=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},ec.apply(null,arguments)}const qS=parseInt(LS.replace(/\D+/g,"")),dz=qS>=125?"uv1":"uv2";function sP(s,e){if(e===RH)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(e===hC||e===a2){let n=s.getIndex();if(n===null){const l=[],h=s.getAttribute("position");if(h!==void 0){for(let f=0;f<h.count;f++)l.push(f);s.setIndex(l),n=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const i=n.count-2,r=[];if(n)if(e===hC)for(let l=1;l<=i;l++)r.push(n.getX(0)),r.push(n.getX(l)),r.push(n.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(r.push(n.getX(l)),r.push(n.getX(l+1)),r.push(n.getX(l+2))):(r.push(n.getX(l+2)),r.push(n.getX(l+1)),r.push(n.getX(l)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=s.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),s}function MJ(s,e=Math.PI/3){const n=Math.cos(e),i=(1+1e-10)*100,r=[new be,new be,new be],a=new be,l=new be,h=new be,f=new be;function p(M){const C=~~(M.x*i),E=~~(M.y*i),w=~~(M.z*i);return`${C},${E},${w}`}const v=s.index?s.toNonIndexed():s,T=v.attributes.position,y={};for(let M=0,C=T.count/3;M<C;M++){const E=3*M,w=r[0].fromBufferAttribute(T,E+0),I=r[1].fromBufferAttribute(T,E+1),O=r[2].fromBufferAttribute(T,E+2);a.subVectors(O,I),l.subVectors(w,I);const P=new be().crossVectors(a,l).normalize();for(let F=0;F<3;F++){const V=r[F],X=p(V);X in y||(y[X]=[]),y[X].push(P)}}const S=new Float32Array(T.count*3),$=new ns(S,3,!1);for(let M=0,C=T.count/3;M<C;M++){const E=3*M,w=r[0].fromBufferAttribute(T,E+0),I=r[1].fromBufferAttribute(T,E+1),O=r[2].fromBufferAttribute(T,E+2);a.subVectors(O,I),l.subVectors(w,I),h.crossVectors(a,l).normalize();for(let P=0;P<3;P++){const F=r[P],V=p(F),X=y[V];f.set(0,0,0);for(let G=0,D=X.length;G<D;G++){const Z=X[G];h.dot(Z)>n&&f.add(Z)}f.normalize(),$.setXYZ(E+P,f.x,f.y,f.z)}}return v.setAttribute("normal",$),v}var wh=Uint8Array,Mg=Uint16Array,dO=Uint32Array,fz=new wh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pz=new wh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RJ=new wh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mz=function(s,e){for(var n=new Mg(31),i=0;i<31;++i)n[i]=e+=1<<s[i-1];for(var r=new dO(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return[n,r]},gz=mz(fz,2),_z=gz[0],wJ=gz[1];_z[28]=258,wJ[258]=28;var IJ=mz(pz,0),OJ=IJ[0],fO=new Mg(32768);for(var gr=0;gr<32768;++gr){var Eg=(gr&43690)>>>1|(gr&21845)<<1;Eg=(Eg&52428)>>>2|(Eg&13107)<<2,Eg=(Eg&61680)>>>4|(Eg&3855)<<4,fO[gr]=((Eg&65280)>>>8|(Eg&255)<<8)>>>1}var jE=function(s,e,n){for(var i=s.length,r=0,a=new Mg(e);r<i;++r)++a[s[r]-1];var l=new Mg(e);for(r=0;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;var h;if(n){h=new Mg(1<<e);var f=15-e;for(r=0;r<i;++r)if(s[r])for(var p=r<<4|s[r],v=e-s[r],T=l[s[r]-1]++<<v,y=T|(1<<v)-1;T<=y;++T)h[fO[T]>>>f]=p}else for(h=new Mg(i),r=0;r<i;++r)s[r]&&(h[r]=fO[l[s[r]-1]++]>>>15-s[r]);return h},JS=new wh(288);for(var gr=0;gr<144;++gr)JS[gr]=8;for(var gr=144;gr<256;++gr)JS[gr]=9;for(var gr=256;gr<280;++gr)JS[gr]=7;for(var gr=280;gr<288;++gr)JS[gr]=8;var vz=new wh(32);for(var gr=0;gr<32;++gr)vz[gr]=5;var NJ=jE(JS,9,1),LJ=jE(vz,5,1),nw=function(s){for(var e=s[0],n=1;n<s.length;++n)s[n]>e&&(e=s[n]);return e},Wd=function(s,e,n){var i=e/8|0;return(s[i]|s[i+1]<<8)>>(e&7)&n},iw=function(s,e){var n=e/8|0;return(s[n]|s[n+1]<<8|s[n+2]<<16)>>(e&7)},DJ=function(s){return(s/8|0)+(s&7&&1)},BJ=function(s,e,n){(n==null||n>s.length)&&(n=s.length);var i=new(s instanceof Mg?Mg:s instanceof dO?dO:wh)(n-e);return i.set(s.subarray(e,n)),i},kJ=function(s,e,n){var i=s.length;if(!i||n&&!n.l&&i<5)return e||new wh(0);var r=!e||n,a=!n||n.i;n||(n={}),e||(e=new wh(i*3));var l=function(Fe){var gt=e.length;if(Fe>gt){var ft=new wh(Math.max(gt*2,Fe));ft.set(e),e=ft}},h=n.f||0,f=n.p||0,p=n.b||0,v=n.l,T=n.d,y=n.m,S=n.n,$=i*8;do{if(!v){n.f=h=Wd(s,f,1);var M=Wd(s,f+1,3);if(f+=3,M)if(M==1)v=NJ,T=LJ,y=9,S=5;else if(M==2){var I=Wd(s,f,31)+257,O=Wd(s,f+10,15)+4,P=I+Wd(s,f+5,31)+1;f+=14;for(var F=new wh(P),V=new wh(19),X=0;X<O;++X)V[RJ[X]]=Wd(s,f+X*3,7);f+=O*3;for(var G=nw(V),D=(1<<G)-1,Z=jE(V,G,1),X=0;X<P;){var Y=Z[Wd(s,f,D)];f+=Y&15;var C=Y>>>4;if(C<16)F[X++]=C;else{var j=0,ne=0;for(C==16?(ne=3+Wd(s,f,3),f+=2,j=F[X-1]):C==17?(ne=3+Wd(s,f,7),f+=3):C==18&&(ne=11+Wd(s,f,127),f+=7);ne--;)F[X++]=j}}var ee=F.subarray(0,I),z=F.subarray(I);y=nw(ee),S=nw(z),v=jE(ee,y,1),T=jE(z,S,1)}else throw"invalid block type";else{var C=DJ(f)+4,E=s[C-4]|s[C-3]<<8,w=C+E;if(w>i){if(a)throw"unexpected EOF";break}r&&l(p+E),e.set(s.subarray(C,w),p),n.b=p+=E,n.p=f=w*8;continue}if(f>$){if(a)throw"unexpected EOF";break}}r&&l(p+131072);for(var te=(1<<y)-1,ce=(1<<S)-1,pe=f;;pe=f){var j=v[iw(s,f)&te],K=j>>>4;if(f+=j&15,f>$){if(a)throw"unexpected EOF";break}if(!j)throw"invalid length/literal";if(K<256)e[p++]=K;else if(K==256){pe=f,v=null;break}else{var fe=K-254;if(K>264){var X=K-257,Ne=fz[X];fe=Wd(s,f,(1<<Ne)-1)+_z[X],f+=Ne}var Pe=T[iw(s,f)&ce],Ee=Pe>>>4;if(!Pe)throw"invalid distance";f+=Pe&15;var z=OJ[Ee];if(Ee>3){var Ne=pz[Ee];z+=iw(s,f)&(1<<Ne)-1,f+=Ne}if(f>$){if(a)throw"unexpected EOF";break}r&&l(p+131072);for(var We=p+fe;p<We;p+=4)e[p]=e[p-z],e[p+1]=e[p+1-z],e[p+2]=e[p+2-z],e[p+3]=e[p+3-z];p=We}}n.l=v,n.p=pe,n.b=p,v&&(h=1,n.m=y,n.d=T,n.n=S)}while(!h);return p==e.length?e:BJ(e,0,p)},PJ=new wh(0),UJ=function(s){if((s[0]&15)!=8||s[0]>>>4>7||(s[0]<<8|s[1])%31)throw"invalid zlib data";if(s[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function w$(s,e){return kJ((UJ(s),s.subarray(2,-4)),e)}var FJ=typeof TextDecoder<"u"&&new TextDecoder,HJ=0;try{FJ.decode(PJ,{stream:!0}),HJ=1}catch{}const GJ=s=>s&&s.isCubeTexture;class zJ extends _r{constructor(e,n){var i,r;const a=GJ(e),h=((r=a?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,f=Math.floor(Math.log2(h)),p=Math.pow(2,f),v=3*Math.max(p,16*7),T=4*p,y=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/v}`,`#define CUBEUV_TEXEL_HEIGHT ${1/T}`,`#define CUBEUV_MAX_MIP ${f}.0`],S=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,$=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${qS>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:n?.height||15},radius:{value:n?.radius||100}},C=new VS(1,16),E=new pu({uniforms:M,fragmentShader:$,vertexShader:S,side:Rh});super(C,E)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var VJ=Object.defineProperty,WJ=(s,e,n)=>e in s?VJ(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,XJ=(s,e,n)=>(WJ(s,e+"",n),n);class jJ{constructor(){XJ(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,l=r.length;a<l;a++)r[a].call(this,e);e.target=null}}}var YJ=Object.defineProperty,KJ=(s,e,n)=>e in s?YJ(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Wn=(s,e,n)=>(KJ(s,typeof e!="symbol"?e+"":e,n),n);const I$=new ib,rP=new G0,qJ=Math.cos(70*(Math.PI/180)),oP=(s,e)=>(s%e+e)%e;let JJ=class extends jJ{constructor(e,n){super(),Wn(this,"object"),Wn(this,"domElement"),Wn(this,"enabled",!0),Wn(this,"target",new be),Wn(this,"minDistance",0),Wn(this,"maxDistance",1/0),Wn(this,"minZoom",0),Wn(this,"maxZoom",1/0),Wn(this,"minPolarAngle",0),Wn(this,"maxPolarAngle",Math.PI),Wn(this,"minAzimuthAngle",-1/0),Wn(this,"maxAzimuthAngle",1/0),Wn(this,"enableDamping",!1),Wn(this,"dampingFactor",.05),Wn(this,"enableZoom",!0),Wn(this,"zoomSpeed",1),Wn(this,"enableRotate",!0),Wn(this,"rotateSpeed",1),Wn(this,"enablePan",!0),Wn(this,"panSpeed",1),Wn(this,"screenSpacePanning",!0),Wn(this,"keyPanSpeed",7),Wn(this,"zoomToCursor",!1),Wn(this,"autoRotate",!1),Wn(this,"autoRotateSpeed",2),Wn(this,"reverseOrbit",!1),Wn(this,"reverseHorizontalOrbit",!1),Wn(this,"reverseVerticalOrbit",!1),Wn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Wn(this,"mouseButtons",{LEFT:bv.ROTATE,MIDDLE:bv.DOLLY,RIGHT:bv.PAN}),Wn(this,"touches",{ONE:yv.ROTATE,TWO:yv.DOLLY_PAN}),Wn(this,"target0"),Wn(this,"position0"),Wn(this,"zoom0"),Wn(this,"_domElementKeyEvents",null),Wn(this,"getPolarAngle"),Wn(this,"getAzimuthalAngle"),Wn(this,"setPolarAngle"),Wn(this,"setAzimuthalAngle"),Wn(this,"getDistance"),Wn(this,"getZoomScale"),Wn(this,"listenToKeyEvents"),Wn(this,"stopListenToKeyEvents"),Wn(this,"saveState"),Wn(this,"reset"),Wn(this,"update"),Wn(this,"connect"),Wn(this,"dispose"),Wn(this,"dollyIn"),Wn(this,"dollyOut"),Wn(this,"getScale"),Wn(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>v.phi,this.getAzimuthalAngle=()=>v.theta,this.setPolarAngle=re=>{let ye=oP(re,2*Math.PI),lt=v.phi;lt<0&&(lt+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Me=Math.abs(ye-lt);2*Math.PI-Me<Me&&(ye<lt?ye+=2*Math.PI:lt+=2*Math.PI),T.phi=ye-lt,i.update()},this.setAzimuthalAngle=re=>{let ye=oP(re,2*Math.PI),lt=v.theta;lt<0&&(lt+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Me=Math.abs(ye-lt);2*Math.PI-Me<Me&&(ye<lt?ye+=2*Math.PI:lt+=2*Math.PI),T.theta=ye-lt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Ve),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ve),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),f=h.NONE},this.update=(()=>{const re=new be,ye=new be(0,1,0),lt=new Mo().setFromUnitVectors(e.up,ye),Me=lt.clone().invert(),Ze=new be,$t=new Mo,Pt=2*Math.PI;return function(){const xt=i.object.position;lt.setFromUnitVectors(e.up,ye),Me.copy(lt).invert(),re.copy(xt).sub(i.target),re.applyQuaternion(lt),v.setFromVector3(re),i.autoRotate&&f===h.NONE&&ne(Y()),i.enableDamping?(v.theta+=T.theta*i.dampingFactor,v.phi+=T.phi*i.dampingFactor):(v.theta+=T.theta,v.phi+=T.phi);let Xt=i.minAzimuthAngle,Yt=i.maxAzimuthAngle;isFinite(Xt)&&isFinite(Yt)&&(Xt<-Math.PI?Xt+=Pt:Xt>Math.PI&&(Xt-=Pt),Yt<-Math.PI?Yt+=Pt:Yt>Math.PI&&(Yt-=Pt),Xt<=Yt?v.theta=Math.max(Xt,Math.min(Yt,v.theta)):v.theta=v.theta>(Xt+Yt)/2?Math.max(Xt,v.theta):Math.min(Yt,v.theta)),v.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,v.phi)),v.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(S,i.dampingFactor):i.target.add(S),i.zoomToCursor&&G||i.object.isOrthographicCamera?v.radius=Pe(v.radius):v.radius=Pe(v.radius*y),re.setFromSpherical(v),re.applyQuaternion(Me),xt.copy(i.target).add(re),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(T.theta*=1-i.dampingFactor,T.phi*=1-i.dampingFactor,S.multiplyScalar(1-i.dampingFactor)):(T.set(0,0,0),S.set(0,0,0));let Wt=!1;if(i.zoomToCursor&&G){let xn=null;if(i.object instanceof io&&i.object.isPerspectiveCamera){const jt=re.length();xn=Pe(jt*y);const Zt=jt-xn;i.object.position.addScaledVector(V,Zt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const jt=new be(X.x,X.y,0);jt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix(),Wt=!0;const Zt=new be(X.x,X.y,0);Zt.unproject(i.object),i.object.position.sub(Zt).add(jt),i.object.updateMatrixWorld(),xn=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;xn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(xn).add(i.object.position):(I$.origin.copy(i.object.position),I$.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(I$.direction))<qJ?e.lookAt(i.target):(rP.setFromNormalAndCoplanarPoint(i.object.up,i.target),I$.intersectPlane(rP,i.target))))}else i.object instanceof Tp&&i.object.isOrthographicCamera&&(Wt=y!==1,Wt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix()));return y=1,G=!1,Wt||Ze.distanceToSquared(i.object.position)>p||8*(1-$t.dot(i.object.quaternion))>p?(i.dispatchEvent(r),Ze.copy(i.object.position),$t.copy(i.object.quaternion),Wt=!1,!0):!1}})(),this.connect=re=>{i.domElement=re,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",At),i.domElement.addEventListener("pointerdown",et),i.domElement.addEventListener("pointercancel",se),i.domElement.addEventListener("wheel",Xe)},this.dispose=()=>{var re,ye,lt,Me,Ze,$t;i.domElement&&(i.domElement.style.touchAction="auto"),(re=i.domElement)==null||re.removeEventListener("contextmenu",At),(ye=i.domElement)==null||ye.removeEventListener("pointerdown",et),(lt=i.domElement)==null||lt.removeEventListener("pointercancel",se),(Me=i.domElement)==null||Me.removeEventListener("wheel",Xe),(Ze=i.domElement)==null||Ze.ownerDocument.removeEventListener("pointermove",_e),($t=i.domElement)==null||$t.ownerDocument.removeEventListener("pointerup",se),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Ve)};const i=this,r={type:"change"},a={type:"start"},l={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=h.NONE;const p=1e-6,v=new iO,T=new iO;let y=1;const S=new be,$=new It,M=new It,C=new It,E=new It,w=new It,I=new It,O=new It,P=new It,F=new It,V=new be,X=new It;let G=!1;const D=[],Z={};function Y(){return 2*Math.PI/60/60*i.autoRotateSpeed}function j(){return Math.pow(.95,i.zoomSpeed)}function ne(re){i.reverseOrbit||i.reverseHorizontalOrbit?T.theta+=re:T.theta-=re}function ee(re){i.reverseOrbit||i.reverseVerticalOrbit?T.phi+=re:T.phi-=re}const z=(()=>{const re=new be;return function(lt,Me){re.setFromMatrixColumn(Me,0),re.multiplyScalar(-lt),S.add(re)}})(),te=(()=>{const re=new be;return function(lt,Me){i.screenSpacePanning===!0?re.setFromMatrixColumn(Me,1):(re.setFromMatrixColumn(Me,0),re.crossVectors(i.object.up,re)),re.multiplyScalar(lt),S.add(re)}})(),ce=(()=>{const re=new be;return function(lt,Me){const Ze=i.domElement;if(Ze&&i.object instanceof io&&i.object.isPerspectiveCamera){const $t=i.object.position;re.copy($t).sub(i.target);let Pt=re.length();Pt*=Math.tan(i.object.fov/2*Math.PI/180),z(2*lt*Pt/Ze.clientHeight,i.object.matrix),te(2*Me*Pt/Ze.clientHeight,i.object.matrix)}else Ze&&i.object instanceof Tp&&i.object.isOrthographicCamera?(z(lt*(i.object.right-i.object.left)/i.object.zoom/Ze.clientWidth,i.object.matrix),te(Me*(i.object.top-i.object.bottom)/i.object.zoom/Ze.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function pe(re){i.object instanceof io&&i.object.isPerspectiveCamera||i.object instanceof Tp&&i.object.isOrthographicCamera?y=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(re){pe(y/re)}function fe(re){pe(y*re)}function Ne(re){if(!i.zoomToCursor||!i.domElement)return;G=!0;const ye=i.domElement.getBoundingClientRect(),lt=re.clientX-ye.left,Me=re.clientY-ye.top,Ze=ye.width,$t=ye.height;X.x=lt/Ze*2-1,X.y=-(Me/$t)*2+1,V.set(X.x,X.y,1).unproject(i.object).sub(i.object.position).normalize()}function Pe(re){return Math.max(i.minDistance,Math.min(i.maxDistance,re))}function Ee(re){$.set(re.clientX,re.clientY)}function We(re){Ne(re),O.set(re.clientX,re.clientY)}function Fe(re){E.set(re.clientX,re.clientY)}function gt(re){M.set(re.clientX,re.clientY),C.subVectors(M,$).multiplyScalar(i.rotateSpeed);const ye=i.domElement;ye&&(ne(2*Math.PI*C.x/ye.clientHeight),ee(2*Math.PI*C.y/ye.clientHeight)),$.copy(M),i.update()}function ft(re){P.set(re.clientX,re.clientY),F.subVectors(P,O),F.y>0?K(j()):F.y<0&&fe(j()),O.copy(P),i.update()}function Ut(re){w.set(re.clientX,re.clientY),I.subVectors(w,E).multiplyScalar(i.panSpeed),ce(I.x,I.y),E.copy(w),i.update()}function Ke(re){Ne(re),re.deltaY<0?fe(j()):re.deltaY>0&&K(j()),i.update()}function Ht(re){let ye=!1;switch(re.code){case i.keys.UP:ce(0,i.keyPanSpeed),ye=!0;break;case i.keys.BOTTOM:ce(0,-i.keyPanSpeed),ye=!0;break;case i.keys.LEFT:ce(i.keyPanSpeed,0),ye=!0;break;case i.keys.RIGHT:ce(-i.keyPanSpeed,0),ye=!0;break}ye&&(re.preventDefault(),i.update())}function Re(){if(D.length==1)$.set(D[0].pageX,D[0].pageY);else{const re=.5*(D[0].pageX+D[1].pageX),ye=.5*(D[0].pageY+D[1].pageY);$.set(re,ye)}}function Ye(){if(D.length==1)E.set(D[0].pageX,D[0].pageY);else{const re=.5*(D[0].pageX+D[1].pageX),ye=.5*(D[0].pageY+D[1].pageY);E.set(re,ye)}}function J(){const re=D[0].pageX-D[1].pageX,ye=D[0].pageY-D[1].pageY,lt=Math.sqrt(re*re+ye*ye);O.set(0,lt)}function Se(){i.enableZoom&&J(),i.enablePan&&Ye()}function Ae(){i.enableZoom&&J(),i.enableRotate&&Re()}function we(re){if(D.length==1)M.set(re.pageX,re.pageY);else{const lt=ve(re),Me=.5*(re.pageX+lt.x),Ze=.5*(re.pageY+lt.y);M.set(Me,Ze)}C.subVectors(M,$).multiplyScalar(i.rotateSpeed);const ye=i.domElement;ye&&(ne(2*Math.PI*C.x/ye.clientHeight),ee(2*Math.PI*C.y/ye.clientHeight)),$.copy(M)}function Ie(re){if(D.length==1)w.set(re.pageX,re.pageY);else{const ye=ve(re),lt=.5*(re.pageX+ye.x),Me=.5*(re.pageY+ye.y);w.set(lt,Me)}I.subVectors(w,E).multiplyScalar(i.panSpeed),ce(I.x,I.y),E.copy(w)}function dt(re){const ye=ve(re),lt=re.pageX-ye.x,Me=re.pageY-ye.y,Ze=Math.sqrt(lt*lt+Me*Me);P.set(0,Ze),F.set(0,Math.pow(P.y/O.y,i.zoomSpeed)),K(F.y),O.copy(P)}function Qe(re){i.enableZoom&&dt(re),i.enablePan&&Ie(re)}function vt(re){i.enableZoom&&dt(re),i.enableRotate&&we(re)}function et(re){var ye,lt;i.enabled!==!1&&(D.length===0&&((ye=i.domElement)==null||ye.ownerDocument.addEventListener("pointermove",_e),(lt=i.domElement)==null||lt.ownerDocument.addEventListener("pointerup",se)),Ft(re),re.pointerType==="touch"?yt(re):$e(re))}function _e(re){i.enabled!==!1&&(re.pointerType==="touch"?bt(re):Le(re))}function se(re){var ye,lt,Me;H(re),D.length===0&&((ye=i.domElement)==null||ye.releasePointerCapture(re.pointerId),(lt=i.domElement)==null||lt.ownerDocument.removeEventListener("pointermove",_e),(Me=i.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",se)),i.dispatchEvent(l),f=h.NONE}function $e(re){let ye;switch(re.button){case 0:ye=i.mouseButtons.LEFT;break;case 1:ye=i.mouseButtons.MIDDLE;break;case 2:ye=i.mouseButtons.RIGHT;break;default:ye=-1}switch(ye){case bv.DOLLY:if(i.enableZoom===!1)return;We(re),f=h.DOLLY;break;case bv.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enablePan===!1)return;Fe(re),f=h.PAN}else{if(i.enableRotate===!1)return;Ee(re),f=h.ROTATE}break;case bv.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enableRotate===!1)return;Ee(re),f=h.ROTATE}else{if(i.enablePan===!1)return;Fe(re),f=h.PAN}break;default:f=h.NONE}f!==h.NONE&&i.dispatchEvent(a)}function Le(re){if(i.enabled!==!1)switch(f){case h.ROTATE:if(i.enableRotate===!1)return;gt(re);break;case h.DOLLY:if(i.enableZoom===!1)return;ft(re);break;case h.PAN:if(i.enablePan===!1)return;Ut(re);break}}function Xe(re){i.enabled===!1||i.enableZoom===!1||f!==h.NONE&&f!==h.ROTATE||(re.preventDefault(),i.dispatchEvent(a),Ke(re),i.dispatchEvent(l))}function Ve(re){i.enabled===!1||i.enablePan===!1||Ht(re)}function yt(re){switch(oe(re),D.length){case 1:switch(i.touches.ONE){case yv.ROTATE:if(i.enableRotate===!1)return;Re(),f=h.TOUCH_ROTATE;break;case yv.PAN:if(i.enablePan===!1)return;Ye(),f=h.TOUCH_PAN;break;default:f=h.NONE}break;case 2:switch(i.touches.TWO){case yv.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Se(),f=h.TOUCH_DOLLY_PAN;break;case yv.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ae(),f=h.TOUCH_DOLLY_ROTATE;break;default:f=h.NONE}break;default:f=h.NONE}f!==h.NONE&&i.dispatchEvent(a)}function bt(re){switch(oe(re),f){case h.TOUCH_ROTATE:if(i.enableRotate===!1)return;we(re),i.update();break;case h.TOUCH_PAN:if(i.enablePan===!1)return;Ie(re),i.update();break;case h.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Qe(re),i.update();break;case h.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;vt(re),i.update();break;default:f=h.NONE}}function At(re){i.enabled!==!1&&re.preventDefault()}function Ft(re){D.push(re)}function H(re){delete Z[re.pointerId];for(let ye=0;ye<D.length;ye++)if(D[ye].pointerId==re.pointerId){D.splice(ye,1);return}}function oe(re){let ye=Z[re.pointerId];ye===void 0&&(ye=new It,Z[re.pointerId]=ye),ye.set(re.pageX,re.pageY)}function ve(re){const ye=re.pointerId===D[0].pointerId?D[1]:D[0];return Z[ye.pointerId]}this.dollyIn=(re=j())=>{fe(re),i.update()},this.dollyOut=(re=j())=>{K(re),i.update()},this.getScale=()=>y,this.setScale=re=>{pe(re),i.update()},this.getZoomScale=()=>j(),n!==void 0&&this.connect(n),this.update()}};function SC(s){if(typeof TextDecoder<"u")return new TextDecoder().decode(s);let e="";for(let n=0,i=s.length;n<i;n++)e+=String.fromCharCode(s[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Nv="srgb",Z0="srgb-linear",aP=3001,ZJ=3e3;class Q2 extends Ya{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new iZ(n)}),this.register(function(n){return new sZ(n)}),this.register(function(n){return new fZ(n)}),this.register(function(n){return new pZ(n)}),this.register(function(n){return new mZ(n)}),this.register(function(n){return new oZ(n)}),this.register(function(n){return new aZ(n)}),this.register(function(n){return new lZ(n)}),this.register(function(n){return new uZ(n)}),this.register(function(n){return new nZ(n)}),this.register(function(n){return new cZ(n)}),this.register(function(n){return new rZ(n)}),this.register(function(n){return new dZ(n)}),this.register(function(n){return new hZ(n)}),this.register(function(n){return new eZ(n)}),this.register(function(n){return new gZ(n)}),this.register(function(n){return new _Z(n)})}load(e,n,i,r){const a=this;let l;if(this.resourcePath!=="")l=this.resourcePath;else if(this.path!==""){const p=Og.extractUrlBase(e);l=Og.resolveURL(p,this.path)}else l=Og.extractUrlBase(e);this.manager.itemStart(e);const h=function(p){r?r(p):console.error(p),a.manager.itemError(e),a.manager.itemEnd(e)},f=new ja(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(p){try{a.parse(p,l,function(v){n(v),a.manager.itemEnd(e)},h)}catch(v){h(v)}},i,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let a;const l={},h={};if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(SC(new Uint8Array(e.slice(0,4)))===bz){try{l[ki.KHR_BINARY_GLTF]=new vZ(e)}catch(v){r&&r(v);return}a=JSON.parse(l[ki.KHR_BINARY_GLTF].content)}else a=JSON.parse(SC(new Uint8Array(e)));else a=e;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new IZ(a,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const v=this.pluginCallbacks[p](f);v.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),h[v.name]=v,l[v.name]=!0}if(a.extensionsUsed)for(let p=0;p<a.extensionsUsed.length;++p){const v=a.extensionsUsed[p],T=a.extensionsRequired||[];switch(v){case ki.KHR_MATERIALS_UNLIT:l[v]=new tZ;break;case ki.KHR_DRACO_MESH_COMPRESSION:l[v]=new bZ(a,this.dracoLoader);break;case ki.KHR_TEXTURE_TRANSFORM:l[v]=new yZ;break;case ki.KHR_MESH_QUANTIZATION:l[v]=new TZ;break;default:T.indexOf(v)>=0&&h[v]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}f.setExtensions(l),f.setPlugins(h),f.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,a){i.parse(e,n,r,a)})}}function QJ(){let s={};return{get:function(e){return s[e]},add:function(e,n){s[e]=n},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const ki={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class eZ{constructor(e){this.parser=e,this.name=ki.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const a=n[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const a=n.json,f=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let p;const v=new on(16777215);f.color!==void 0&&v.setRGB(f.color[0],f.color[1],f.color[2],Z0);const T=f.range!==void 0?f.range:0;switch(f.type){case"directional":p=new B2(v),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new D2(v),p.distance=T;break;case"spot":p=new L2(v),p.distance=T,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,p.angle=f.spot.outerConeAngle,p.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return p.position.set(0,0,0),p.decay=2,H0(p,f),f.intensity!==void 0&&(p.intensity=f.intensity),p.name=n.createUniqueName(f.name||"light_"+e),r=Promise.resolve(p),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,a=i.json.nodes[e],h=(a.extensions&&a.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(f){return i._getNodeRef(n.cache,h,f)})}}class tZ{constructor(){this.name=ki.KHR_MATERIALS_UNLIT}getMaterialType(){return qu}extendParams(e,n,i){const r=[];e.color=new on(1,1,1),e.opacity=1;const a=n.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const l=a.baseColorFactor;e.color.setRGB(l[0],l[1],l[2],Z0),e.opacity=l[3]}a.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",a.baseColorTexture,Nv))}return Promise.all(r)}}class nZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return a!==void 0&&(n.emissiveIntensity=a),Promise.resolve()}}class iZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];if(l.clearcoatFactor!==void 0&&(n.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&a.push(i.assignTexture(n,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(n,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(n,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const h=l.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new It(h,h)}return Promise.all(a)}}class sZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return n.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class rZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return l.iridescenceFactor!==void 0&&(n.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&a.push(i.assignTexture(n,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(n.iridescenceIOR=l.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(n,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}}class oZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];n.sheenColor=new on(0,0,0),n.sheenRoughness=0,n.sheen=1;const l=r.extensions[this.name];if(l.sheenColorFactor!==void 0){const h=l.sheenColorFactor;n.sheenColor.setRGB(h[0],h[1],h[2],Z0)}return l.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&a.push(i.assignTexture(n,"sheenColorMap",l.sheenColorTexture,Nv)),l.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(n,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}}class aZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return l.transmissionFactor!==void 0&&(n.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&a.push(i.assignTexture(n,"transmissionMap",l.transmissionTexture)),Promise.all(a)}}class lZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];n.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&a.push(i.assignTexture(n,"thicknessMap",l.thicknessTexture)),n.attenuationDistance=l.attenuationDistance||1/0;const h=l.attenuationColor||[1,1,1];return n.attenuationColor=new on().setRGB(h[0],h[1],h[2],Z0),Promise.all(a)}}class uZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return n.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class cZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];n.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&a.push(i.assignTexture(n,"specularIntensityMap",l.specularTexture));const h=l.specularColorFactor||[1,1,1];return n.specularColor=new on().setRGB(h[0],h[1],h[2],Z0),l.specularColorTexture!==void 0&&a.push(i.assignTexture(n,"specularColorMap",l.specularColorTexture,Nv)),Promise.all(a)}}class hZ{constructor(e){this.parser=e,this.name=ki.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return n.bumpScale=l.bumpFactor!==void 0?l.bumpFactor:1,l.bumpTexture!==void 0&&a.push(i.assignTexture(n,"bumpMap",l.bumpTexture)),Promise.all(a)}}class dZ{constructor(e){this.parser=e,this.name=ki.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Gh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],l=r.extensions[this.name];return l.anisotropyStrength!==void 0&&(n.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(n.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&a.push(i.assignTexture(n,"anisotropyMap",l.anisotropyTexture)),Promise.all(a)}}class fZ{constructor(e){this.parser=e,this.name=ki.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],l=n.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,a.source,l)}}class pZ{constructor(e){this.parser=e,this.name=ki.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[n])return null;const l=a.extensions[n],h=r.images[l.source];let f=i.textureLoader;if(h.uri){const p=i.options.manager.getHandler(h.uri);p!==null&&(f=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,f);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class mZ{constructor(e){this.parser=e,this.name=ki.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[n])return null;const l=a.extensions[n],h=r.images[l.source];let f=i.textureLoader;if(h.uri){const p=i.options.manager.getHandler(h.uri);p!==null&&(f=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,f);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class gZ{constructor(e){this.name=ki.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(h){const f=r.byteOffset||0,p=r.byteLength||0,v=r.count,T=r.byteStride,y=new Uint8Array(h,f,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(v,T,y,r.mode,r.filter).then(function(S){return S.buffer}):l.ready.then(function(){const S=new ArrayBuffer(v*T);return l.decodeGltfBuffer(new Uint8Array(S),v,T,y,r.mode,r.filter),S})})}else return null}}class _Z{constructor(e){this.name=ki.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const p of r.primitives)if(p.mode!==Sh.TRIANGLES&&p.mode!==Sh.TRIANGLE_STRIP&&p.mode!==Sh.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=i.extensions[this.name].attributes,h=[],f={};for(const p in l)h.push(this.parser.getDependency("accessor",l[p]).then(v=>(f[p]=v,f[p])));return h.length<1?null:(h.push(this.parser.createNodeMesh(e)),Promise.all(h).then(p=>{const v=p.pop(),T=v.isGroup?v.children:[v],y=p[0].count,S=[];for(const $ of T){const M=new Fn,C=new be,E=new Mo,w=new be(1,1,1),I=new _2($.geometry,$.material,y);for(let O=0;O<y;O++)f.TRANSLATION&&C.fromBufferAttribute(f.TRANSLATION,O),f.ROTATION&&E.fromBufferAttribute(f.ROTATION,O),f.SCALE&&w.fromBufferAttribute(f.SCALE,O),I.setMatrixAt(O,M.compose(C,E,w));for(const O in f)if(O==="_COLOR_0"){const P=f[O];I.instanceColor=new Xv(P.array,P.itemSize,P.normalized)}else O!=="TRANSLATION"&&O!=="ROTATION"&&O!=="SCALE"&&$.geometry.setAttribute(O,f[O]);zi.prototype.copy.call(I,$),this.parser.assignFinalMaterial(I),S.push(I)}return v.isGroup?(v.clear(),v.add(...S),v):S[0]}))}}const bz="glTF",fE=12,lP={JSON:1313821514,BIN:5130562};class vZ{constructor(e){this.name=ki.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,fE);if(this.header={magic:SC(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==bz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-fE,r=new DataView(e,fE);let a=0;for(;a<i;){const l=r.getUint32(a,!0);a+=4;const h=r.getUint32(a,!0);if(a+=4,h===lP.JSON){const f=new Uint8Array(e,fE+a,l);this.content=SC(f)}else if(h===lP.BIN){const f=fE+a;this.body=e.slice(f,f+l)}a+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class bZ{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ki.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,h={},f={},p={};for(const v in l){const T=pO[v]||v.toLowerCase();h[T]=l[v]}for(const v in e.attributes){const T=pO[v]||v.toLowerCase();if(l[v]!==void 0){const y=i.accessors[e.attributes[v]],S=Iy[y.componentType];p[T]=S.name,f[T]=y.normalized===!0}}return n.getDependency("bufferView",a).then(function(v){return new Promise(function(T,y){r.decodeDracoFile(v,function(S){for(const $ in S.attributes){const M=S.attributes[$],C=f[$];C!==void 0&&(M.normalized=C)}T(S)},h,p,Z0,y)})})}}class yZ{constructor(){this.name=ki.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class TZ{constructor(){this.name=ki.KHR_MESH_QUANTIZATION}}class yz extends _T{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r*3+r;for(let l=0;l!==r;l++)n[l]=i[a+l];return n}interpolate_(e,n,i,r){const a=this.resultBuffer,l=this.sampleValues,h=this.valueSize,f=h*2,p=h*3,v=r-n,T=(i-n)/v,y=T*T,S=y*T,$=e*p,M=$-p,C=-2*S+3*y,E=S-y,w=1-C,I=E-y+T;for(let O=0;O!==h;O++){const P=l[M+O+h],F=l[M+O+f]*v,V=l[$+O+h],X=l[$+O]*v;a[O]=w*P+I*F+C*V+E*X}return a}}const EZ=new Mo;class SZ extends yz{interpolate_(e,n,i,r){const a=super.interpolate_(e,n,i,r);return EZ.fromArray(a).normalize().toArray(a),a}}const Sh={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Iy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uP={9728:Ta,9729:us,9984:qC,9985:My,9986:Cv,9987:Nh},cP={33071:co,33648:Fy,10497:Pg},sw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pO={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...qS>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Sg={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},AZ={CUBICSPLINE:void 0,LINEAR:Xy,STEP:Wy},rw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function $Z(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new jS({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ap})),s.DefaultMaterial}function mv(s,e,n){for(const i in n.extensions)s[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function H0(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function xZ(s,e,n){let i=!1,r=!1,a=!1;for(let p=0,v=e.length;p<v;p++){const T=e[p];if(T.POSITION!==void 0&&(i=!0),T.NORMAL!==void 0&&(r=!0),T.COLOR_0!==void 0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(s);const l=[],h=[],f=[];for(let p=0,v=e.length;p<v;p++){const T=e[p];if(i){const y=T.POSITION!==void 0?n.getDependency("accessor",T.POSITION):s.attributes.position;l.push(y)}if(r){const y=T.NORMAL!==void 0?n.getDependency("accessor",T.NORMAL):s.attributes.normal;h.push(y)}if(a){const y=T.COLOR_0!==void 0?n.getDependency("accessor",T.COLOR_0):s.attributes.color;f.push(y)}}return Promise.all([Promise.all(l),Promise.all(h),Promise.all(f)]).then(function(p){const v=p[0],T=p[1],y=p[2];return i&&(s.morphAttributes.position=v),r&&(s.morphAttributes.normal=T),a&&(s.morphAttributes.color=y),s.morphTargetsRelative=!0,s})}function CZ(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)s.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(s.morphTargetInfluences.length===n.length){s.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)s.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function MZ(s){let e;const n=s.extensions&&s.extensions[ki.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+ow(n.attributes):e=s.indices+":"+ow(s.attributes)+":"+s.mode,s.targets!==void 0)for(let i=0,r=s.targets.length;i<r;i++)e+=":"+ow(s.targets[i]);return e}function ow(s){let e="";const n=Object.keys(s).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+s[n[i]]+";";return e}function mO(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function RZ(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const wZ=new Fn;class IZ{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new QJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&a<98?this.textureLoader=new SG(this.options.manager):this.textureLoader=new wG(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ja(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const h={scene:l[0][r.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:r.asset,parser:i,userData:{}};return mv(a,h,r),H0(h,r),Promise.all(i._invokeAll(function(f){return f.afterRoot&&f.afterRoot(h)})).then(function(){for(const f of h.scenes)f.updateMatrixWorld();e(h)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,a=n.length;r<a;r++){const l=n[r].joints;for(let h=0,f=l.length;h<f;h++)e[l[h]].isBone=!0}for(let r=0,a=e.length;r<a;r++){const l=e[r];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),a=(l,h)=>{const f=this.associations.get(l);f!=null&&this.associations.set(h,f);for(const[p,v]of l.children.entries())a(v,h.children[p])};return a(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const a=e(n[r]);a&&i.push(a)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(n)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(a,l){return i.getDependency(e,l)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[ki.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,l){i.load(Og.resolveURL(n.uri,r.path),a,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,a=n.byteOffset||0;return i.slice(a,a+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const l=sw[r.type],h=Iy[r.componentType],f=r.normalized===!0,p=new h(r.count*l);return Promise.resolve(new ns(p,l,f))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(l){const h=l[0],f=sw[r.type],p=Iy[r.componentType],v=p.BYTES_PER_ELEMENT,T=v*f,y=r.byteOffset||0,S=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,$=r.normalized===!0;let M,C;if(S&&S!==T){const E=Math.floor(y/S),w="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+E+":"+r.count;let I=n.cache.get(w);I||(M=new p(h,E*S,r.count*S/v),I=new FS(M,S/v),n.cache.add(w,I)),C=new Ju(I,f,y%S/v,$)}else h===null?M=new p(r.count*f):M=new p(h,y,r.count*f),C=new ns(M,f,$);if(r.sparse!==void 0){const E=sw.SCALAR,w=Iy[r.sparse.indices.componentType],I=r.sparse.indices.byteOffset||0,O=r.sparse.values.byteOffset||0,P=new w(l[1],I,r.sparse.count*E),F=new p(l[2],O,r.sparse.count*f);h!==null&&(C=new ns(C.array.slice(),C.itemSize,C.normalized));for(let V=0,X=P.length;V<X;V++){const G=P[V];if(C.setX(G,F[V*f]),f>=2&&C.setY(G,F[V*f+1]),f>=3&&C.setZ(G,F[V*f+2]),f>=4&&C.setW(G,F[V*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(e){const n=this.json,i=this.options,a=n.textures[e].source,l=n.images[a];let h=this.textureLoader;if(l.uri){const f=i.manager.getHandler(l.uri);f!==null&&(h=f)}return this.loadTextureImage(e,a,h)}loadTextureImage(e,n,i){const r=this,a=this.json,l=a.textures[e],h=a.images[n],f=(h.uri||h.bufferView)+":"+l.sampler;if(this.textureCache[f])return this.textureCache[f];const p=this.loadImageSource(n,i).then(function(v){v.flipY=!1,v.name=l.name||h.name||"",v.name===""&&typeof h.uri=="string"&&h.uri.startsWith("data:image/")===!1&&(v.name=h.uri);const y=(a.samplers||{})[l.sampler]||{};return v.magFilter=uP[y.magFilter]||us,v.minFilter=uP[y.minFilter]||Nh,v.wrapS=cP[y.wrapS]||Pg,v.wrapT=cP[y.wrapT]||Pg,r.associations.set(v,{textures:e}),v}).catch(function(){return null});return this.textureCache[f]=p,p}loadImageSource(e,n){const i=this,r=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(T=>T.clone());const l=r.images[e],h=self.URL||self.webkitURL;let f=l.uri||"",p=!1;if(l.bufferView!==void 0)f=i.getDependency("bufferView",l.bufferView).then(function(T){p=!0;const y=new Blob([T],{type:l.mimeType});return f=h.createObjectURL(y),f});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const v=Promise.resolve(f).then(function(T){return new Promise(function(y,S){let $=y;n.isImageBitmapLoader===!0&&($=function(M){const C=new Ms(M);C.needsUpdate=!0,y(C)}),n.load(Og.resolveURL(T,a.path),$,void 0,S)})}).then(function(T){return p===!0&&h.revokeObjectURL(f),H0(T,l),T.userData.mimeType=l.mimeType||RZ(l.uri),T}).catch(function(T){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),T});return this.sourceCache[e]=v,v}assignTexture(e,n,i,r){const a=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),a.extensions[ki.KHR_TEXTURE_TRANSFORM]){const h=i.extensions!==void 0?i.extensions[ki.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const f=a.associations.get(l);l=a.extensions[ki.KHR_TEXTURE_TRANSFORM].extendTexture(l,h),a.associations.set(l,f)}}return r!==void 0&&(typeof r=="number"&&(r=r===aP?Nv:Z0),"colorSpace"in l?l.colorSpace=r:l.encoding=r===Nv?aP:ZJ),e[n]=l,l})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,a=n.attributes.color!==void 0,l=n.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+i.uuid;let f=this.cache.get(h);f||(f=new hM,ta.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,f.sizeAttenuation=!1,this.cache.add(h,f)),i=f}else if(e.isLine){const h="LineBasicMaterial:"+i.uuid;let f=this.cache.get(h);f||(f=new Il,ta.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,this.cache.add(h,f)),i=f}if(r||a||l){let h="ClonedMaterial:"+i.uuid+":";r&&(h+="derivative-tangents:"),a&&(h+="vertex-colors:"),l&&(h+="flat-shading:");let f=this.cache.get(h);f||(f=i.clone(),a&&(f.vertexColors=!0),l&&(f.flatShading=!0),r&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(h,f),this.associations.set(f,this.associations.get(i))),i=f}e.material=i}getMaterialType(){return jS}loadMaterial(e){const n=this,i=this.json,r=this.extensions,a=i.materials[e];let l;const h={},f=a.extensions||{},p=[];if(f[ki.KHR_MATERIALS_UNLIT]){const T=r[ki.KHR_MATERIALS_UNLIT];l=T.getMaterialType(),p.push(T.extendParams(h,a,n))}else{const T=a.pbrMetallicRoughness||{};if(h.color=new on(1,1,1),h.opacity=1,Array.isArray(T.baseColorFactor)){const y=T.baseColorFactor;h.color.setRGB(y[0],y[1],y[2],Z0),h.opacity=y[3]}T.baseColorTexture!==void 0&&p.push(n.assignTexture(h,"map",T.baseColorTexture,Nv)),h.metalness=T.metallicFactor!==void 0?T.metallicFactor:1,h.roughness=T.roughnessFactor!==void 0?T.roughnessFactor:1,T.metallicRoughnessTexture!==void 0&&(p.push(n.assignTexture(h,"metalnessMap",T.metallicRoughnessTexture)),p.push(n.assignTexture(h,"roughnessMap",T.metallicRoughnessTexture))),l=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,h)})))}a.doubleSided===!0&&(h.side=Rh);const v=a.alphaMode||rw.OPAQUE;if(v===rw.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,v===rw.MASK&&(h.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&l!==qu&&(p.push(n.assignTexture(h,"normalMap",a.normalTexture)),h.normalScale=new It(1,1),a.normalTexture.scale!==void 0)){const T=a.normalTexture.scale;h.normalScale.set(T,T)}if(a.occlusionTexture!==void 0&&l!==qu&&(p.push(n.assignTexture(h,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&l!==qu){const T=a.emissiveFactor;h.emissive=new on().setRGB(T[0],T[1],T[2],Z0)}return a.emissiveTexture!==void 0&&l!==qu&&p.push(n.assignTexture(h,"emissiveMap",a.emissiveTexture,Nv)),Promise.all(p).then(function(){const T=new l(h);return a.name&&(T.name=a.name),H0(T,a),n.associations.set(T,{materials:e}),a.extensions&&mv(r,T,a),T})}createUniqueName(e){const n=es.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function a(h){return i[ki.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,n).then(function(f){return hP(f,h,n)})}const l=[];for(let h=0,f=e.length;h<f;h++){const p=e[h],v=MZ(p),T=r[v];if(T)l.push(T.promise);else{let y;p.extensions&&p.extensions[ki.KHR_DRACO_MESH_COMPRESSION]?y=a(p):y=hP(new ui,p,n),r[v]={primitive:p,promise:y},l.push(y)}}return Promise.all(l)}loadMesh(e){const n=this,i=this.json,r=this.extensions,a=i.meshes[e],l=a.primitives,h=[];for(let f=0,p=l.length;f<p;f++){const v=l[f].material===void 0?$Z(this.cache):this.getDependency("material",l[f].material);h.push(v)}return h.push(n.loadGeometries(l)),Promise.all(h).then(function(f){const p=f.slice(0,f.length-1),v=f[f.length-1],T=[];for(let S=0,$=v.length;S<$;S++){const M=v[S],C=l[S];let E;const w=p[S];if(C.mode===Sh.TRIANGLES||C.mode===Sh.TRIANGLE_STRIP||C.mode===Sh.TRIANGLE_FAN||C.mode===void 0)E=a.isSkinnedMesh===!0?new g2(M,w):new _r(M,w),E.isSkinnedMesh===!0&&E.normalizeSkinWeights(),C.mode===Sh.TRIANGLE_STRIP?E.geometry=sP(E.geometry,a2):C.mode===Sh.TRIANGLE_FAN&&(E.geometry=sP(E.geometry,hC));else if(C.mode===Sh.LINES)E=new af(M,w);else if(C.mode===Sh.LINE_STRIP)E=new em(M,w);else if(C.mode===Sh.LINE_LOOP)E=new v2(M,w);else if(C.mode===Sh.POINTS)E=new b2(M,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(E.geometry.morphAttributes).length>0&&CZ(E,a),E.name=n.createUniqueName(a.name||"mesh_"+e),H0(E,a),C.extensions&&mv(r,E,C),n.assignFinalMaterial(E),T.push(E)}for(let S=0,$=T.length;S<$;S++)n.associations.set(T[S],{meshes:e,primitives:S});if(T.length===1)return a.extensions&&mv(r,T[0],a),T[0];const y=new Y0;a.extensions&&mv(r,y,a),n.associations.set(y,{meshes:e});for(let S=0,$=T.length;S<$;S++)y.add(T[S]);return y})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new io(c2.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Tp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),H0(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,a=n.joints.length;r<a;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const a=r.pop(),l=r,h=[],f=[];for(let p=0,v=l.length;p<v;p++){const T=l[p];if(T){h.push(T);const y=new Fn;a!==null&&y.fromArray(a.array,p*16),f.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[p])}return new HS(h,f)})}loadAnimation(e){const n=this.json,i=this,r=n.animations[e],a=r.name?r.name:"animation_"+e,l=[],h=[],f=[],p=[],v=[];for(let T=0,y=r.channels.length;T<y;T++){const S=r.channels[T],$=r.samplers[S.sampler],M=S.target,C=M.node,E=r.parameters!==void 0?r.parameters[$.input]:$.input,w=r.parameters!==void 0?r.parameters[$.output]:$.output;M.node!==void 0&&(l.push(this.getDependency("node",C)),h.push(this.getDependency("accessor",E)),f.push(this.getDependency("accessor",w)),p.push($),v.push(M))}return Promise.all([Promise.all(l),Promise.all(h),Promise.all(f),Promise.all(p),Promise.all(v)]).then(function(T){const y=T[0],S=T[1],$=T[2],M=T[3],C=T[4],E=[];for(let w=0,I=y.length;w<I;w++){const O=y[w],P=S[w],F=$[w],V=M[w],X=C[w];if(O===void 0)continue;O.updateMatrix&&O.updateMatrix();const G=i._createAnimationTracks(O,P,F,V,X);if(G)for(let D=0;D<G.length;D++)E.push(G[D])}return new Jy(a,void 0,E)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(a){const l=i._getNodeRef(i.meshCache,r.mesh,a);return r.weights!==void 0&&l.traverse(function(h){if(h.isMesh)for(let f=0,p=r.weights.length;f<p;f++)h.morphTargetInfluences[f]=r.weights[f]}),l})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],a=i._loadNodeShallow(e),l=[],h=r.children||[];for(let p=0,v=h.length;p<v;p++)l.push(i.getDependency("node",h[p]));const f=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([a,Promise.all(l),f]).then(function(p){const v=p[0],T=p[1],y=p[2];y!==null&&v.traverse(function(S){S.isSkinnedMesh&&S.bind(y,wZ)});for(let S=0,$=T.length;S<$;S++)v.add(T[S]);return v})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=n.nodes[e],l=a.name?r.createUniqueName(a.name):"",h=[],f=r._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return f&&h.push(f),a.camera!==void 0&&h.push(r.getDependency("camera",a.camera).then(function(p){return r._getNodeRef(r.cameraCache,a.camera,p)})),r._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){h.push(p)}),this.nodeCache[e]=Promise.all(h).then(function(p){let v;if(a.isBone===!0?v=new uM:p.length>1?v=new Y0:p.length===1?v=p[0]:v=new zi,v!==p[0])for(let T=0,y=p.length;T<y;T++)v.add(p[T]);if(a.name&&(v.userData.name=a.name,v.name=l),H0(v,a),a.extensions&&mv(i,v,a),a.matrix!==void 0){const T=new Fn;T.fromArray(a.matrix),v.applyMatrix4(T)}else a.translation!==void 0&&v.position.fromArray(a.translation),a.rotation!==void 0&&v.quaternion.fromArray(a.rotation),a.scale!==void 0&&v.scale.fromArray(a.scale);return r.associations.has(v)||r.associations.set(v,{}),r.associations.get(v).nodes=e,v}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,a=new Y0;i.name&&(a.name=r.createUniqueName(i.name)),H0(a,i),i.extensions&&mv(n,a,i);const l=i.nodes||[],h=[];for(let f=0,p=l.length;f<p;f++)h.push(r.getDependency("node",l[f]));return Promise.all(h).then(function(f){for(let v=0,T=f.length;v<T;v++)a.add(f[v]);const p=v=>{const T=new Map;for(const[y,S]of r.associations)(y instanceof ta||y instanceof Ms)&&T.set(y,S);return v.traverse(y=>{const S=r.associations.get(y);S!=null&&T.set(y,S)}),T};return r.associations=p(a),a})}_createAnimationTracks(e,n,i,r,a){const l=[],h=e.name?e.name:e.uuid,f=[];Sg[a.path]===Sg.weights?e.traverse(function(y){y.morphTargetInfluences&&f.push(y.name?y.name:y.uuid)}):f.push(h);let p;switch(Sg[a.path]){case Sg.weights:p=Yv;break;case Sg.rotation:p=Kv;break;case Sg.position:case Sg.scale:p=qv;break;default:switch(i.itemSize){case 1:p=Yv;break;case 2:case 3:default:p=qv;break}break}const v=r.interpolation!==void 0?AZ[r.interpolation]:Xy,T=this._getArrayFromAccessor(i);for(let y=0,S=f.length;y<S;y++){const $=new p(f[y]+"."+Sg[a.path],n.array,T,v);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant($),l.push($)}return l}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const i=mO(n.constructor),r=new Float32Array(n.length);for(let a=0,l=n.length;a<l;a++)r[a]=n[a]*i;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Kv?SZ:yz;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function OZ(s,e,n){const i=e.attributes,r=new Ro;if(i.POSITION!==void 0){const h=n.json.accessors[i.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(r.set(new be(f[0],f[1],f[2]),new be(p[0],p[1],p[2])),h.normalized){const v=mO(Iy[h.componentType]);r.min.multiplyScalar(v),r.max.multiplyScalar(v)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const h=new be,f=new be;for(let p=0,v=a.length;p<v;p++){const T=a[p];if(T.POSITION!==void 0){const y=n.json.accessors[T.POSITION],S=y.min,$=y.max;if(S!==void 0&&$!==void 0){if(f.setX(Math.max(Math.abs(S[0]),Math.abs($[0]))),f.setY(Math.max(Math.abs(S[1]),Math.abs($[1]))),f.setZ(Math.max(Math.abs(S[2]),Math.abs($[2]))),y.normalized){const M=mO(Iy[y.componentType]);f.multiplyScalar(M)}h.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(h)}s.boundingBox=r;const l=new wo;r.getCenter(l.center),l.radius=r.min.distanceTo(r.max)/2,s.boundingSphere=l}function hP(s,e,n){const i=e.attributes,r=[];function a(l,h){return n.getDependency("accessor",l).then(function(f){s.setAttribute(h,f)})}for(const l in i){const h=pO[l]||l.toLowerCase();h in s.attributes||r.push(a(i[l],h))}if(e.indices!==void 0&&!s.index){const l=n.getDependency("accessor",e.indices).then(function(h){s.setIndex(h)});r.push(l)}return H0(s,e),OZ(s,e,n),Promise.all(r).then(function(){return e.targets!==void 0?xZ(s,e.targets,n):s})}class NZ extends O2{constructor(e){super(e),this.type=ea}parse(e){const l=function(X,G){switch(X){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(G||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(G||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(G||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(G||""))}},v=`
`,T=function(X,G,D){G=G||1024;let Y=X.pos,j=-1,ne=0,ee="",z=String.fromCharCode.apply(null,new Uint16Array(X.subarray(Y,Y+128)));for(;0>(j=z.indexOf(v))&&ne<G&&Y<X.byteLength;)ee+=z,ne+=z.length,Y+=128,z+=String.fromCharCode.apply(null,new Uint16Array(X.subarray(Y,Y+128)));return-1<j?(X.pos+=ne+j+1,ee+z.slice(0,j)):!1},y=function(X){const G=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*FORMAT=(\S+)\s*$/,j=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ne={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ee,z;for((X.pos>=X.byteLength||!(ee=T(X)))&&l(1,"no header found"),(z=ee.match(G))||l(3,"bad initial token"),ne.valid|=1,ne.programtype=z[1],ne.string+=ee+`
`;ee=T(X),ee!==!1;){if(ne.string+=ee+`
`,ee.charAt(0)==="#"){ne.comments+=ee+`
`;continue}if((z=ee.match(D))&&(ne.gamma=parseFloat(z[1])),(z=ee.match(Z))&&(ne.exposure=parseFloat(z[1])),(z=ee.match(Y))&&(ne.valid|=2,ne.format=z[1]),(z=ee.match(j))&&(ne.valid|=4,ne.height=parseInt(z[1],10),ne.width=parseInt(z[2],10)),ne.valid&2&&ne.valid&4)break}return ne.valid&2||l(3,"missing format specifier"),ne.valid&4||l(3,"missing image size specifier"),ne},S=function(X,G,D){const Z=G;if(Z<8||Z>32767||X[0]!==2||X[1]!==2||X[2]&128)return new Uint8Array(X);Z!==(X[2]<<8|X[3])&&l(3,"wrong scanline width");const Y=new Uint8Array(4*G*D);Y.length||l(4,"unable to allocate buffer space");let j=0,ne=0;const ee=4*Z,z=new Uint8Array(4),te=new Uint8Array(ee);let ce=D;for(;ce>0&&ne<X.byteLength;){ne+4>X.byteLength&&l(1),z[0]=X[ne++],z[1]=X[ne++],z[2]=X[ne++],z[3]=X[ne++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=Z)&&l(3,"bad rgbe scanline format");let pe=0,K;for(;pe<ee&&ne<X.byteLength;){K=X[ne++];const Ne=K>128;if(Ne&&(K-=128),(K===0||pe+K>ee)&&l(3,"bad scanline data"),Ne){const Pe=X[ne++];for(let Ee=0;Ee<K;Ee++)te[pe++]=Pe}else te.set(X.subarray(ne,ne+K),pe),pe+=K,ne+=K}const fe=Z;for(let Ne=0;Ne<fe;Ne++){let Pe=0;Y[j]=te[Ne+Pe],Pe+=Z,Y[j+1]=te[Ne+Pe],Pe+=Z,Y[j+2]=te[Ne+Pe],Pe+=Z,Y[j+3]=te[Ne+Pe],j+=4}ce--}return Y},$=function(X,G,D,Z){const Y=X[G+3],j=Math.pow(2,Y-128)/255;D[Z+0]=X[G+0]*j,D[Z+1]=X[G+1]*j,D[Z+2]=X[G+2]*j,D[Z+3]=1},M=function(X,G,D,Z){const Y=X[G+3],j=Math.pow(2,Y-128)/255;D[Z+0]=wv.toHalfFloat(Math.min(X[G+0]*j,65504)),D[Z+1]=wv.toHalfFloat(Math.min(X[G+1]*j,65504)),D[Z+2]=wv.toHalfFloat(Math.min(X[G+2]*j,65504)),D[Z+3]=wv.toHalfFloat(1)},C=new Uint8Array(e);C.pos=0;const E=y(C),w=E.width,I=E.height,O=S(C.subarray(C.pos),w,I);let P,F,V;switch(this.type){case Rr:V=O.length/4;const X=new Float32Array(V*4);for(let D=0;D<V;D++)$(O,D*4,X,D*4);P=X,F=Rr;break;case ea:V=O.length/4;const G=new Uint16Array(V*4);for(let D=0;D<V;D++)M(O,D*4,G,D*4);P=G,F=ea;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:I,data:P,header:E.string,gamma:E.gamma,exposure:E.exposure,type:F}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(l,h){switch(l.type){case Rr:case ea:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=us,l.magFilter=us,l.generateMipmaps=!1,l.flipY=!0;break}n&&n(l,h)}return super.load(e,a,i,r)}}const pE=qS>=152;class LZ extends O2{constructor(e){super(e),this.type=ea}parse(e){const G=Math.pow(2.7182818,2.2);function D(ae,ge){for(var Ue=0,ot=0;ot<65536;++ot)(ot==0||ae[ot>>3]&1<<(ot&7))&&(ge[Ue++]=ot);for(var ht=Ue-1;Ue<65536;)ge[Ue++]=0;return ht}function Z(ae){for(var ge=0;ge<16384;ge++)ae[ge]={},ae[ge].len=0,ae[ge].lit=0,ae[ge].p=null}const Y={l:0,c:0,lc:0};function j(ae,ge,Ue,ot,ht){for(;Ue<ae;)ge=ge<<8|ve(ot,ht),Ue+=8;Ue-=ae,Y.l=ge>>Ue&(1<<ae)-1,Y.c=ge,Y.lc=Ue}const ne=new Array(59);function ee(ae){for(var ge=0;ge<=58;++ge)ne[ge]=0;for(var ge=0;ge<65537;++ge)ne[ae[ge]]+=1;for(var Ue=0,ge=58;ge>0;--ge){var ot=Ue+ne[ge]>>1;ne[ge]=Ue,Ue=ot}for(var ge=0;ge<65537;++ge){var ht=ae[ge];ht>0&&(ae[ge]=ht|ne[ht]++<<6)}}function z(ae,ge,Ue,ot,ht,_t,Gt){for(var kt=Ue,le=0,Te=0;ht<=_t;ht++){if(kt.value-Ue.value>ot)return!1;j(6,le,Te,ae,kt);var De=Y.l;if(le=Y.c,Te=Y.lc,Gt[ht]=De,De==63){if(kt.value-Ue.value>ot)throw"Something wrong with hufUnpackEncTable";j(8,le,Te,ae,kt);var ke=Y.l+6;if(le=Y.c,Te=Y.lc,ht+ke>_t+1)throw"Something wrong with hufUnpackEncTable";for(;ke--;)Gt[ht++]=0;ht--}else if(De>=59){var ke=De-59+2;if(ht+ke>_t+1)throw"Something wrong with hufUnpackEncTable";for(;ke--;)Gt[ht++]=0;ht--}}ee(Gt)}function te(ae){return ae&63}function ce(ae){return ae>>6}function pe(ae,ge,Ue,ot){for(;ge<=Ue;ge++){var ht=ce(ae[ge]),_t=te(ae[ge]);if(ht>>_t)throw"Invalid table entry";if(_t>14){var Gt=ot[ht>>_t-14];if(Gt.len)throw"Invalid table entry";if(Gt.lit++,Gt.p){var kt=Gt.p;Gt.p=new Array(Gt.lit);for(var le=0;le<Gt.lit-1;++le)Gt.p[le]=kt[le]}else Gt.p=new Array(1);Gt.p[Gt.lit-1]=ge}else if(_t)for(var Te=0,le=1<<14-_t;le>0;le--){var Gt=ot[(ht<<14-_t)+Te];if(Gt.len||Gt.p)throw"Invalid table entry";Gt.len=_t,Gt.lit=ge,Te++}}return!0}const K={c:0,lc:0};function fe(ae,ge,Ue,ot){ae=ae<<8|ve(Ue,ot),ge+=8,K.c=ae,K.lc=ge}const Ne={c:0,lc:0};function Pe(ae,ge,Ue,ot,ht,_t,Gt,kt,le,Te){if(ae==ge){ot<8&&(fe(Ue,ot,ht,Gt),Ue=K.c,ot=K.lc),ot-=8;var De=Ue>>ot,De=new Uint8Array([De])[0];if(le.value+De>Te)return!1;for(var ke=kt[le.value-1];De-- >0;)kt[le.value++]=ke}else if(le.value<Te)kt[le.value++]=ae;else return!1;Ne.c=Ue,Ne.lc=ot}function Ee(ae){return ae&65535}function We(ae){var ge=Ee(ae);return ge>32767?ge-65536:ge}const Fe={a:0,b:0};function gt(ae,ge){var Ue=We(ae),ot=We(ge),ht=ot,_t=Ue+(ht&1)+(ht>>1),Gt=_t,kt=_t-ht;Fe.a=Gt,Fe.b=kt}function ft(ae,ge){var Ue=Ee(ae),ot=Ee(ge),ht=Ue-(ot>>1)&65535,_t=ot+ht-32768&65535;Fe.a=_t,Fe.b=ht}function Ut(ae,ge,Ue,ot,ht,_t,Gt){for(var kt=Gt<16384,le=Ue>ht?ht:Ue,Te=1,De;Te<=le;)Te<<=1;for(Te>>=1,De=Te,Te>>=1;Te>=1;){for(var ke=0,ze=ke+_t*(ht-De),rt=_t*Te,Tt=_t*De,Nt=ot*Te,Bt=ot*De,qt,Kt,Jt,vn;ke<=ze;ke+=Tt){for(var Tn=ke,ei=ke+ot*(Ue-De);Tn<=ei;Tn+=Bt){var ln=Tn+Nt,Dn=Tn+rt,fn=Dn+Nt;kt?(gt(ae[Tn+ge],ae[Dn+ge]),qt=Fe.a,Jt=Fe.b,gt(ae[ln+ge],ae[fn+ge]),Kt=Fe.a,vn=Fe.b,gt(qt,Kt),ae[Tn+ge]=Fe.a,ae[ln+ge]=Fe.b,gt(Jt,vn),ae[Dn+ge]=Fe.a,ae[fn+ge]=Fe.b):(ft(ae[Tn+ge],ae[Dn+ge]),qt=Fe.a,Jt=Fe.b,ft(ae[ln+ge],ae[fn+ge]),Kt=Fe.a,vn=Fe.b,ft(qt,Kt),ae[Tn+ge]=Fe.a,ae[ln+ge]=Fe.b,ft(Jt,vn),ae[Dn+ge]=Fe.a,ae[fn+ge]=Fe.b)}if(Ue&Te){var Dn=Tn+rt;kt?gt(ae[Tn+ge],ae[Dn+ge]):ft(ae[Tn+ge],ae[Dn+ge]),qt=Fe.a,ae[Dn+ge]=Fe.b,ae[Tn+ge]=qt}}if(ht&Te)for(var Tn=ke,ei=ke+ot*(Ue-De);Tn<=ei;Tn+=Bt){var ln=Tn+Nt;kt?gt(ae[Tn+ge],ae[ln+ge]):ft(ae[Tn+ge],ae[ln+ge]),qt=Fe.a,ae[ln+ge]=Fe.b,ae[Tn+ge]=qt}De=Te,Te>>=1}return ke}function Ke(ae,ge,Ue,ot,ht,_t,Gt,kt,le,Te){for(var De=0,ke=0,ze=kt,rt=Math.trunc(ht.value+(_t+7)/8);ht.value<rt;)for(fe(De,ke,Ue,ht),De=K.c,ke=K.lc;ke>=14;){var Tt=De>>ke-14&16383,Nt=ge[Tt];if(Nt.len)ke-=Nt.len,Pe(Nt.lit,Gt,De,ke,Ue,ot,ht,le,Te,ze),De=Ne.c,ke=Ne.lc;else{if(!Nt.p)throw"hufDecode issues";var Bt;for(Bt=0;Bt<Nt.lit;Bt++){for(var qt=te(ae[Nt.p[Bt]]);ke<qt&&ht.value<rt;)fe(De,ke,Ue,ht),De=K.c,ke=K.lc;if(ke>=qt&&ce(ae[Nt.p[Bt]])==(De>>ke-qt&(1<<qt)-1)){ke-=qt,Pe(Nt.p[Bt],Gt,De,ke,Ue,ot,ht,le,Te,ze),De=Ne.c,ke=Ne.lc;break}}if(Bt==Nt.lit)throw"hufDecode issues"}}var Kt=8-_t&7;for(De>>=Kt,ke-=Kt;ke>0;){var Nt=ge[De<<14-ke&16383];if(Nt.len)ke-=Nt.len,Pe(Nt.lit,Gt,De,ke,Ue,ot,ht,le,Te,ze),De=Ne.c,ke=Ne.lc;else throw"hufDecode issues"}return!0}function Ht(ae,ge,Ue,ot,ht,_t){var Gt={value:0},kt=Ue.value,le=oe(ge,Ue),Te=oe(ge,Ue);Ue.value+=4;var De=oe(ge,Ue);if(Ue.value+=4,le<0||le>=65537||Te<0||Te>=65537)throw"Something wrong with HUF_ENCSIZE";var ke=new Array(65537),ze=new Array(16384);Z(ze);var rt=ot-(Ue.value-kt);if(z(ae,ge,Ue,rt,le,Te,ke),De>8*(ot-(Ue.value-kt)))throw"Something wrong with hufUncompress";pe(ke,le,Te,ze),Ke(ke,ze,ae,ge,Ue,De,Te,_t,ht,Gt)}function Re(ae,ge,Ue){for(var ot=0;ot<Ue;++ot)ge[ot]=ae[ge[ot]]}function Ye(ae){for(var ge=1;ge<ae.length;ge++){var Ue=ae[ge-1]+ae[ge]-128;ae[ge]=Ue}}function J(ae,ge){for(var Ue=0,ot=Math.floor((ae.length+1)/2),ht=0,_t=ae.length-1;!(ht>_t||(ge[ht++]=ae[Ue++],ht>_t));)ge[ht++]=ae[ot++]}function Se(ae){for(var ge=ae.byteLength,Ue=new Array,ot=0,ht=new DataView(ae);ge>0;){var _t=ht.getInt8(ot++);if(_t<0){var Gt=-_t;ge-=Gt+1;for(var kt=0;kt<Gt;kt++)Ue.push(ht.getUint8(ot++))}else{var Gt=_t;ge-=2;for(var le=ht.getUint8(ot++),kt=0;kt<Gt+1;kt++)Ue.push(le)}}return Ue}function Ae(ae,ge,Ue,ot,ht,_t){var ln=new DataView(_t.buffer),Gt=Ue[ae.idx[0]].width,kt=Ue[ae.idx[0]].height,le=3,Te=Math.floor(Gt/8),De=Math.ceil(Gt/8),ke=Math.ceil(kt/8),ze=Gt-(De-1)*8,rt=kt-(ke-1)*8,Tt={value:0},Nt=new Array(le),Bt=new Array(le),qt=new Array(le),Kt=new Array(le),Jt=new Array(le);for(let Mn=0;Mn<le;++Mn)Jt[Mn]=ge[ae.idx[Mn]],Nt[Mn]=Mn<1?0:Nt[Mn-1]+De*ke,Bt[Mn]=new Float32Array(64),qt[Mn]=new Uint16Array(64),Kt[Mn]=new Uint16Array(De*64);for(let Mn=0;Mn<ke;++Mn){var vn=8;Mn==ke-1&&(vn=rt);var Tn=8;for(let Rn=0;Rn<De;++Rn){Rn==De-1&&(Tn=ze);for(let ti=0;ti<le;++ti)qt[ti].fill(0),qt[ti][0]=ht[Nt[ti]++],we(Tt,ot,qt[ti]),Ie(qt[ti],Bt[ti]),dt(Bt[ti]);Qe(Bt);for(let ti=0;ti<le;++ti)vt(Bt[ti],Kt[ti],Rn*64)}let Xn=0;for(let Rn=0;Rn<le;++Rn){const ti=Ue[ae.idx[Rn]].type;for(let Gn=8*Mn;Gn<8*Mn+vn;++Gn){Xn=Jt[Rn][Gn];for(let Ui=0;Ui<Te;++Ui){const Ti=Ui*64+(Gn&7)*8;ln.setUint16(Xn+0*2*ti,Kt[Rn][Ti+0],!0),ln.setUint16(Xn+1*2*ti,Kt[Rn][Ti+1],!0),ln.setUint16(Xn+2*2*ti,Kt[Rn][Ti+2],!0),ln.setUint16(Xn+3*2*ti,Kt[Rn][Ti+3],!0),ln.setUint16(Xn+4*2*ti,Kt[Rn][Ti+4],!0),ln.setUint16(Xn+5*2*ti,Kt[Rn][Ti+5],!0),ln.setUint16(Xn+6*2*ti,Kt[Rn][Ti+6],!0),ln.setUint16(Xn+7*2*ti,Kt[Rn][Ti+7],!0),Xn+=8*2*ti}}if(Te!=De)for(let Gn=8*Mn;Gn<8*Mn+vn;++Gn){const Ui=Jt[Rn][Gn]+8*Te*2*ti,Ti=Te*64+(Gn&7)*8;for(let ss=0;ss<Tn;++ss)ln.setUint16(Ui+ss*2*ti,Kt[Rn][Ti+ss],!0)}}}for(var ei=new Uint16Array(Gt),ln=new DataView(_t.buffer),Dn=0;Dn<le;++Dn){Ue[ae.idx[Dn]].decoded=!0;var fn=Ue[ae.idx[Dn]].type;if(Ue[Dn].type==2)for(var yi=0;yi<kt;++yi){const Mn=Jt[Dn][yi];for(var Hn=0;Hn<Gt;++Hn)ei[Hn]=ln.getUint16(Mn+Hn*2*fn,!0);for(var Hn=0;Hn<Gt;++Hn)ln.setFloat32(Mn+Hn*2*fn,Ze(ei[Hn]),!0)}}}function we(ae,ge,Ue){for(var ot,ht=1;ht<64;)ot=ge[ae.value],ot==65280?ht=64:ot>>8==255?ht+=ot&255:(Ue[ht]=ot,ht++),ae.value++}function Ie(ae,ge){ge[0]=Ze(ae[0]),ge[1]=Ze(ae[1]),ge[2]=Ze(ae[5]),ge[3]=Ze(ae[6]),ge[4]=Ze(ae[14]),ge[5]=Ze(ae[15]),ge[6]=Ze(ae[27]),ge[7]=Ze(ae[28]),ge[8]=Ze(ae[2]),ge[9]=Ze(ae[4]),ge[10]=Ze(ae[7]),ge[11]=Ze(ae[13]),ge[12]=Ze(ae[16]),ge[13]=Ze(ae[26]),ge[14]=Ze(ae[29]),ge[15]=Ze(ae[42]),ge[16]=Ze(ae[3]),ge[17]=Ze(ae[8]),ge[18]=Ze(ae[12]),ge[19]=Ze(ae[17]),ge[20]=Ze(ae[25]),ge[21]=Ze(ae[30]),ge[22]=Ze(ae[41]),ge[23]=Ze(ae[43]),ge[24]=Ze(ae[9]),ge[25]=Ze(ae[11]),ge[26]=Ze(ae[18]),ge[27]=Ze(ae[24]),ge[28]=Ze(ae[31]),ge[29]=Ze(ae[40]),ge[30]=Ze(ae[44]),ge[31]=Ze(ae[53]),ge[32]=Ze(ae[10]),ge[33]=Ze(ae[19]),ge[34]=Ze(ae[23]),ge[35]=Ze(ae[32]),ge[36]=Ze(ae[39]),ge[37]=Ze(ae[45]),ge[38]=Ze(ae[52]),ge[39]=Ze(ae[54]),ge[40]=Ze(ae[20]),ge[41]=Ze(ae[22]),ge[42]=Ze(ae[33]),ge[43]=Ze(ae[38]),ge[44]=Ze(ae[46]),ge[45]=Ze(ae[51]),ge[46]=Ze(ae[55]),ge[47]=Ze(ae[60]),ge[48]=Ze(ae[21]),ge[49]=Ze(ae[34]),ge[50]=Ze(ae[37]),ge[51]=Ze(ae[47]),ge[52]=Ze(ae[50]),ge[53]=Ze(ae[56]),ge[54]=Ze(ae[59]),ge[55]=Ze(ae[61]),ge[56]=Ze(ae[35]),ge[57]=Ze(ae[36]),ge[58]=Ze(ae[48]),ge[59]=Ze(ae[49]),ge[60]=Ze(ae[57]),ge[61]=Ze(ae[58]),ge[62]=Ze(ae[62]),ge[63]=Ze(ae[63])}function dt(ae){const ge=.5*Math.cos(.7853975),Ue=.5*Math.cos(3.14159/16),ot=.5*Math.cos(3.14159/8),ht=.5*Math.cos(3*3.14159/16),_t=.5*Math.cos(5*3.14159/16),Gt=.5*Math.cos(3*3.14159/8),kt=.5*Math.cos(7*3.14159/16);for(var le=new Array(4),Te=new Array(4),De=new Array(4),ke=new Array(4),ze=0;ze<8;++ze){var rt=ze*8;le[0]=ot*ae[rt+2],le[1]=Gt*ae[rt+2],le[2]=ot*ae[rt+6],le[3]=Gt*ae[rt+6],Te[0]=Ue*ae[rt+1]+ht*ae[rt+3]+_t*ae[rt+5]+kt*ae[rt+7],Te[1]=ht*ae[rt+1]-kt*ae[rt+3]-Ue*ae[rt+5]-_t*ae[rt+7],Te[2]=_t*ae[rt+1]-Ue*ae[rt+3]+kt*ae[rt+5]+ht*ae[rt+7],Te[3]=kt*ae[rt+1]-_t*ae[rt+3]+ht*ae[rt+5]-Ue*ae[rt+7],De[0]=ge*(ae[rt+0]+ae[rt+4]),De[3]=ge*(ae[rt+0]-ae[rt+4]),De[1]=le[0]+le[3],De[2]=le[1]-le[2],ke[0]=De[0]+De[1],ke[1]=De[3]+De[2],ke[2]=De[3]-De[2],ke[3]=De[0]-De[1],ae[rt+0]=ke[0]+Te[0],ae[rt+1]=ke[1]+Te[1],ae[rt+2]=ke[2]+Te[2],ae[rt+3]=ke[3]+Te[3],ae[rt+4]=ke[3]-Te[3],ae[rt+5]=ke[2]-Te[2],ae[rt+6]=ke[1]-Te[1],ae[rt+7]=ke[0]-Te[0]}for(var Tt=0;Tt<8;++Tt)le[0]=ot*ae[16+Tt],le[1]=Gt*ae[16+Tt],le[2]=ot*ae[48+Tt],le[3]=Gt*ae[48+Tt],Te[0]=Ue*ae[8+Tt]+ht*ae[24+Tt]+_t*ae[40+Tt]+kt*ae[56+Tt],Te[1]=ht*ae[8+Tt]-kt*ae[24+Tt]-Ue*ae[40+Tt]-_t*ae[56+Tt],Te[2]=_t*ae[8+Tt]-Ue*ae[24+Tt]+kt*ae[40+Tt]+ht*ae[56+Tt],Te[3]=kt*ae[8+Tt]-_t*ae[24+Tt]+ht*ae[40+Tt]-Ue*ae[56+Tt],De[0]=ge*(ae[Tt]+ae[32+Tt]),De[3]=ge*(ae[Tt]-ae[32+Tt]),De[1]=le[0]+le[3],De[2]=le[1]-le[2],ke[0]=De[0]+De[1],ke[1]=De[3]+De[2],ke[2]=De[3]-De[2],ke[3]=De[0]-De[1],ae[0+Tt]=ke[0]+Te[0],ae[8+Tt]=ke[1]+Te[1],ae[16+Tt]=ke[2]+Te[2],ae[24+Tt]=ke[3]+Te[3],ae[32+Tt]=ke[3]-Te[3],ae[40+Tt]=ke[2]-Te[2],ae[48+Tt]=ke[1]-Te[1],ae[56+Tt]=ke[0]-Te[0]}function Qe(ae){for(var ge=0;ge<64;++ge){var Ue=ae[0][ge],ot=ae[1][ge],ht=ae[2][ge];ae[0][ge]=Ue+1.5747*ht,ae[1][ge]=Ue-.1873*ot-.4682*ht,ae[2][ge]=Ue+1.8556*ot}}function vt(ae,ge,Ue){for(var ot=0;ot<64;++ot)ge[Ue+ot]=wv.toHalfFloat(et(ae[ot]))}function et(ae){return ae<=1?Math.sign(ae)*Math.pow(Math.abs(ae),2.2):Math.sign(ae)*Math.pow(G,Math.abs(ae)-1)}function _e(ae){return new DataView(ae.array.buffer,ae.offset.value,ae.size)}function se(ae){var ge=ae.viewer.buffer.slice(ae.offset.value,ae.offset.value+ae.size),Ue=new Uint8Array(Se(ge)),ot=new Uint8Array(Ue.length);return Ye(Ue),J(Ue,ot),new DataView(ot.buffer)}function $e(ae){var ge=ae.array.slice(ae.offset.value,ae.offset.value+ae.size),Ue=w$(ge),ot=new Uint8Array(Ue.length);return Ye(Ue),J(Ue,ot),new DataView(ot.buffer)}function Le(ae){for(var ge=ae.viewer,Ue={value:ae.offset.value},ot=new Uint16Array(ae.width*ae.scanlineBlockSize*(ae.channels*ae.type)),ht=new Uint8Array(8192),_t=0,Gt=new Array(ae.channels),kt=0;kt<ae.channels;kt++)Gt[kt]={},Gt[kt].start=_t,Gt[kt].end=Gt[kt].start,Gt[kt].nx=ae.width,Gt[kt].ny=ae.lines,Gt[kt].size=ae.type,_t+=Gt[kt].nx*Gt[kt].ny*Gt[kt].size;var le=$t(ge,Ue),Te=$t(ge,Ue);if(Te>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(le<=Te)for(var kt=0;kt<Te-le+1;kt++)ht[kt+le]=re(ge,Ue);var De=new Uint16Array(65536),ke=D(ht,De),ze=oe(ge,Ue);Ht(ae.array,ge,Ue,ze,ot,_t);for(var kt=0;kt<ae.channels;++kt)for(var rt=Gt[kt],Tt=0;Tt<Gt[kt].size;++Tt)Ut(ot,rt.start+Tt,rt.nx,rt.size,rt.ny,rt.nx*rt.size,ke);Re(De,ot,_t);for(var Nt=0,Bt=new Uint8Array(ot.buffer.byteLength),qt=0;qt<ae.lines;qt++)for(var Kt=0;Kt<ae.channels;Kt++){var rt=Gt[Kt],Jt=rt.nx*rt.size,vn=new Uint8Array(ot.buffer,rt.end*2,Jt*2);Bt.set(vn,Nt),Nt+=Jt*2,rt.end+=Jt}return new DataView(Bt.buffer)}function Xe(ae){var ge=ae.array.slice(ae.offset.value,ae.offset.value+ae.size),Ue=w$(ge);const ot=ae.lines*ae.channels*ae.width,ht=ae.type==1?new Uint16Array(ot):new Uint32Array(ot);let _t=0,Gt=0;const kt=new Array(4);for(let le=0;le<ae.lines;le++)for(let Te=0;Te<ae.channels;Te++){let De=0;switch(ae.type){case 1:kt[0]=_t,kt[1]=kt[0]+ae.width,_t=kt[1]+ae.width;for(let ke=0;ke<ae.width;++ke){const ze=Ue[kt[0]++]<<8|Ue[kt[1]++];De+=ze,ht[Gt]=De,Gt++}break;case 2:kt[0]=_t,kt[1]=kt[0]+ae.width,kt[2]=kt[1]+ae.width,_t=kt[2]+ae.width;for(let ke=0;ke<ae.width;++ke){const ze=Ue[kt[0]++]<<24|Ue[kt[1]++]<<16|Ue[kt[2]++]<<8;De+=ze,ht[Gt]=De,Gt++}break}}return new DataView(ht.buffer)}function Ve(ae){var ge=ae.viewer,Ue={value:ae.offset.value},ot=new Uint8Array(ae.width*ae.lines*(ae.channels*ae.type*2)),ht={version:ye(ge,Ue),unknownUncompressedSize:ye(ge,Ue),unknownCompressedSize:ye(ge,Ue),acCompressedSize:ye(ge,Ue),dcCompressedSize:ye(ge,Ue),rleCompressedSize:ye(ge,Ue),rleUncompressedSize:ye(ge,Ue),rleRawSize:ye(ge,Ue),totalAcUncompressedCount:ye(ge,Ue),totalDcUncompressedCount:ye(ge,Ue),acCompression:ye(ge,Ue)};if(ht.version<2)throw"EXRLoader.parse: "+Rs.compression+" version "+ht.version+" is unsupported";for(var _t=new Array,Gt=$t(ge,Ue)-2;Gt>0;){var kt=yt(ge.buffer,Ue),le=re(ge,Ue),Te=le>>2&3,De=(le>>4)-1,ke=new Int8Array([De])[0],ze=re(ge,Ue);_t.push({name:kt,index:ke,type:ze,compression:Te}),Gt-=kt.length+3}for(var rt=Rs.channels,Tt=new Array(ae.channels),Nt=0;Nt<ae.channels;++Nt){var Bt=Tt[Nt]={},qt=rt[Nt];Bt.name=qt.name,Bt.compression=0,Bt.decoded=!1,Bt.type=qt.pixelType,Bt.pLinear=qt.pLinear,Bt.width=ae.width,Bt.height=ae.lines}for(var Kt={idx:new Array(3)},Jt=0;Jt<ae.channels;++Jt)for(var Bt=Tt[Jt],Nt=0;Nt<_t.length;++Nt){var vn=_t[Nt];Bt.name==vn.name&&(Bt.compression=vn.compression,vn.index>=0&&(Kt.idx[vn.index]=Jt),Bt.offset=Jt)}if(ht.acCompressedSize>0)switch(ht.acCompression){case 0:var ln=new Uint16Array(ht.totalAcUncompressedCount);Ht(ae.array,ge,Ue,ht.acCompressedSize,ln,ht.totalAcUncompressedCount);break;case 1:var Tn=ae.array.slice(Ue.value,Ue.value+ht.totalAcUncompressedCount),ei=w$(Tn),ln=new Uint16Array(ei.buffer);Ue.value+=ht.totalAcUncompressedCount;break}if(ht.dcCompressedSize>0){var Dn={array:ae.array,offset:Ue,size:ht.dcCompressedSize},fn=new Uint16Array($e(Dn).buffer);Ue.value+=ht.dcCompressedSize}if(ht.rleRawSize>0){var Tn=ae.array.slice(Ue.value,Ue.value+ht.rleCompressedSize),ei=w$(Tn),yi=Se(ei.buffer);Ue.value+=ht.rleCompressedSize}for(var Hn=0,Mn=new Array(Tt.length),Nt=0;Nt<Mn.length;++Nt)Mn[Nt]=new Array;for(var Xn=0;Xn<ae.lines;++Xn)for(var Rn=0;Rn<Tt.length;++Rn)Mn[Rn].push(Hn),Hn+=Tt[Rn].width*ae.type*2;Ae(Kt,Mn,Tt,ln,fn,ot);for(var Nt=0;Nt<Tt.length;++Nt){var Bt=Tt[Nt];if(!Bt.decoded)switch(Bt.compression){case 2:for(var ti=0,Gn=0,Xn=0;Xn<ae.lines;++Xn){for(var Ui=Mn[Nt][ti],Ti=0;Ti<Bt.width;++Ti){for(var ss=0;ss<2*Bt.type;++ss)ot[Ui++]=yi[Gn+ss*Bt.width*Bt.height];Gn++}ti++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ot.buffer)}function yt(ae,ge){for(var Ue=new Uint8Array(ae),ot=0;Ue[ge.value+ot]!=0;)ot+=1;var ht=new TextDecoder().decode(Ue.slice(ge.value,ge.value+ot));return ge.value=ge.value+ot+1,ht}function bt(ae,ge,Ue){var ot=new TextDecoder().decode(new Uint8Array(ae).slice(ge.value,ge.value+Ue));return ge.value=ge.value+Ue,ot}function At(ae,ge){var Ue=H(ae,ge),ot=oe(ae,ge);return[Ue,ot]}function Ft(ae,ge){var Ue=oe(ae,ge),ot=oe(ae,ge);return[Ue,ot]}function H(ae,ge){var Ue=ae.getInt32(ge.value,!0);return ge.value=ge.value+4,Ue}function oe(ae,ge){var Ue=ae.getUint32(ge.value,!0);return ge.value=ge.value+4,Ue}function ve(ae,ge){var Ue=ae[ge.value];return ge.value=ge.value+1,Ue}function re(ae,ge){var Ue=ae.getUint8(ge.value);return ge.value=ge.value+1,Ue}const ye=function(ae,ge){let Ue;return"getBigInt64"in DataView.prototype?Ue=Number(ae.getBigInt64(ge.value,!0)):Ue=ae.getUint32(ge.value+4,!0)+Number(ae.getUint32(ge.value,!0)<<32),ge.value+=8,Ue};function lt(ae,ge){var Ue=ae.getFloat32(ge.value,!0);return ge.value+=4,Ue}function Me(ae,ge){return wv.toHalfFloat(lt(ae,ge))}function Ze(ae){var ge=(ae&31744)>>10,Ue=ae&1023;return(ae>>15?-1:1)*(ge?ge===31?Ue?NaN:1/0:Math.pow(2,ge-15)*(1+Ue/1024):6103515625e-14*(Ue/1024))}function $t(ae,ge){var Ue=ae.getUint16(ge.value,!0);return ge.value+=2,Ue}function Pt(ae,ge){return Ze($t(ae,ge))}function Mt(ae,ge,Ue,ot){for(var ht=Ue.value,_t=[];Ue.value<ht+ot-1;){var Gt=yt(ge,Ue),kt=H(ae,Ue),le=re(ae,Ue);Ue.value+=3;var Te=H(ae,Ue),De=H(ae,Ue);_t.push({name:Gt,pixelType:kt,pLinear:le,xSampling:Te,ySampling:De})}return Ue.value+=1,_t}function xt(ae,ge){var Ue=lt(ae,ge),ot=lt(ae,ge),ht=lt(ae,ge),_t=lt(ae,ge),Gt=lt(ae,ge),kt=lt(ae,ge),le=lt(ae,ge),Te=lt(ae,ge);return{redX:Ue,redY:ot,greenX:ht,greenY:_t,blueX:Gt,blueY:kt,whiteX:le,whiteY:Te}}function Xt(ae,ge){var Ue=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ot=re(ae,ge);return Ue[ot]}function Yt(ae,ge){var Ue=oe(ae,ge),ot=oe(ae,ge),ht=oe(ae,ge),_t=oe(ae,ge);return{xMin:Ue,yMin:ot,xMax:ht,yMax:_t}}function Wt(ae,ge){var Ue=["INCREASING_Y"],ot=re(ae,ge);return Ue[ot]}function xn(ae,ge){var Ue=lt(ae,ge),ot=lt(ae,ge);return[Ue,ot]}function jt(ae,ge){var Ue=lt(ae,ge),ot=lt(ae,ge),ht=lt(ae,ge);return[Ue,ot,ht]}function Zt(ae,ge,Ue,ot,ht){if(ot==="string"||ot==="stringvector"||ot==="iccProfile")return bt(ge,Ue,ht);if(ot==="chlist")return Mt(ae,ge,Ue,ht);if(ot==="chromaticities")return xt(ae,Ue);if(ot==="compression")return Xt(ae,Ue);if(ot==="box2i")return Yt(ae,Ue);if(ot==="lineOrder")return Wt(ae,Ue);if(ot==="float")return lt(ae,Ue);if(ot==="v2f")return xn(ae,Ue);if(ot==="v3f")return jt(ae,Ue);if(ot==="int")return H(ae,Ue);if(ot==="rational")return At(ae,Ue);if(ot==="timecode")return Ft(ae,Ue);if(ot==="preview")return Ue.value+=ht,"skipped";Ue.value+=ht}function Nn(ae,ge,Ue){const ot={};if(ae.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ot.version=ae.getUint8(4);const ht=ae.getUint8(5);ot.spec={singleTile:!!(ht&2),longName:!!(ht&4),deepFormat:!!(ht&8),multiPart:!!(ht&16)},Ue.value=8;for(var _t=!0;_t;){var Gt=yt(ge,Ue);if(Gt==0)_t=!1;else{var kt=yt(ge,Ue),le=oe(ae,Ue),Te=Zt(ae,ge,Ue,kt,le);Te===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${kt}'.`):ot[Gt]=Te}}if((ht&-5)!=0)throw console.error("EXRHeader:",ot),"THREE.EXRLoader: provided file is currently unsupported.";return ot}function gn(ae,ge,Ue,ot,ht){const _t={size:0,viewer:ge,array:Ue,offset:ot,width:ae.dataWindow.xMax-ae.dataWindow.xMin+1,height:ae.dataWindow.yMax-ae.dataWindow.yMin+1,channels:ae.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ae.channels[0].pixelType,uncompress:null,getter:null,format:null,[pE?"colorSpace":"encoding"]:null};switch(ae.compression){case"NO_COMPRESSION":_t.lines=1,_t.uncompress=_e;break;case"RLE_COMPRESSION":_t.lines=1,_t.uncompress=se;break;case"ZIPS_COMPRESSION":_t.lines=1,_t.uncompress=$e;break;case"ZIP_COMPRESSION":_t.lines=16,_t.uncompress=$e;break;case"PIZ_COMPRESSION":_t.lines=32,_t.uncompress=Le;break;case"PXR24_COMPRESSION":_t.lines=16,_t.uncompress=Xe;break;case"DWAA_COMPRESSION":_t.lines=32,_t.uncompress=Ve;break;case"DWAB_COMPRESSION":_t.lines=256,_t.uncompress=Ve;break;default:throw"EXRLoader.parse: "+ae.compression+" is unsupported"}if(_t.scanlineBlockSize=_t.lines,_t.type==1)switch(ht){case Rr:_t.getter=Pt,_t.inputSize=2;break;case ea:_t.getter=$t,_t.inputSize=2;break}else if(_t.type==2)switch(ht){case Rr:_t.getter=lt,_t.inputSize=4;break;case ea:_t.getter=Me,_t.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+_t.type+" for "+ae.compression+".";_t.blockCount=(ae.dataWindow.yMax+1)/_t.scanlineBlockSize;for(var Gt=0;Gt<_t.blockCount;Gt++)ye(ge,ot);_t.outputChannels=_t.channels==3?4:_t.channels;const kt=_t.width*_t.height*_t.outputChannels;switch(ht){case Rr:_t.byteArray=new Float32Array(kt),_t.channels<_t.outputChannels&&_t.byteArray.fill(1,0,kt);break;case ea:_t.byteArray=new Uint16Array(kt),_t.channels<_t.outputChannels&&_t.byteArray.fill(15360,0,kt);break;default:console.error("THREE.EXRLoader: unsupported type: ",ht);break}return _t.bytesPerLine=_t.width*_t.inputSize*_t.channels,_t.outputChannels==4?_t.format=ho:_t.format=kS,pE?_t.colorSpace="srgb-linear":_t.encoding=3e3,_t}const zn=new DataView(e),is=new Uint8Array(e),lr={value:0},Rs=Nn(zn,e,lr),Cn=gn(Rs,zn,is,lr,this.type),Ks={value:0},Ri={R:0,G:1,B:2,A:3,Y:0};for(let ae=0;ae<Cn.height/Cn.scanlineBlockSize;ae++){const ge=oe(zn,lr);Cn.size=oe(zn,lr),Cn.lines=ge+Cn.scanlineBlockSize>Cn.height?Cn.height-ge:Cn.scanlineBlockSize;const ot=Cn.size<Cn.lines*Cn.bytesPerLine?Cn.uncompress(Cn):_e(Cn);lr.value+=Cn.size;for(let ht=0;ht<Cn.scanlineBlockSize;ht++){const _t=ht+ae*Cn.scanlineBlockSize;if(_t>=Cn.height)break;for(let Gt=0;Gt<Cn.channels;Gt++){const kt=Ri[Rs.channels[Gt].name];for(let le=0;le<Cn.width;le++){Ks.value=(ht*(Cn.channels*Cn.width)+Gt*Cn.width+le)*Cn.inputSize;const Te=(Cn.height-1-_t)*(Cn.width*Cn.outputChannels)+le*Cn.outputChannels+kt;Cn.byteArray[Te]=Cn.getter(ot,Ks)}}}}return{header:Rs,width:Cn.width,height:Cn.height,data:Cn.byteArray,format:Cn.format,[pE?"colorSpace":"encoding"]:Cn[pE?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(l,h){pE?l.colorSpace=h.colorSpace:l.encoding=h.encoding,l.minFilter=us,l.magFilter=us,l.generateMipmaps=!1,l.flipY=!1,n&&n(l,h)}return super.load(e,a,i,r)}}const aw=new WeakMap;class DZ extends Ya{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const a=new ja(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,l=>{const h={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,h).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,a).then(n)}decodeGeometry(e,n){for(const f in n.attributeTypes){const p=n.attributeTypes[f];p.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[f]=p.name)}const i=JSON.stringify(n);if(aw.has(e)){const f=aw.get(e);if(f.key===i)return f.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const a=this.workerNextTaskID++,l=e.byteLength,h=this._getWorker(a,l).then(f=>(r=f,new Promise((p,v)=>{r._callbacks[a]={resolve:p,reject:v},r.postMessage({type:"decode",id:a,taskConfig:n,buffer:e},[e])}))).then(f=>this._createGeometry(f.geometry));return h.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),aw.set(e,{key:i,promise:h}),h}_createGeometry(e){const n=new ui;e.index&&n.setIndex(new ns(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],a=r.name,l=r.array,h=r.itemSize;n.setAttribute(a,new ns(l,h))}return n}_loadLibrary(e,n){const i=new ja(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,a)=>{i.load(e,r,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const a=BZ.toString(),l=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){const l=a.data;switch(l.type){case"decode":r._callbacks[l.id].resolve(l);break;case"error":r._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,a){return r._taskLoad>a._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function BZ(){let s,e;onmessage=function(l){const h=l.data;switch(h.type){case"init":s=h.decoderConfig,e=new Promise(function(v){s.onModuleLoaded=function(T){v({draco:T})},DracoDecoderModule(s)});break;case"decode":const f=h.buffer,p=h.taskConfig;e.then(v=>{const T=v.draco,y=new T.Decoder,S=new T.DecoderBuffer;S.Init(new Int8Array(f),f.byteLength);try{const $=n(T,y,S,p),M=$.attributes.map(C=>C.array.buffer);$.index&&M.push($.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:$},M)}catch($){console.error($),self.postMessage({type:"error",id:h.id,error:$.message})}finally{T.destroy(S),T.destroy(y)}});break}};function n(l,h,f,p){const v=p.attributeIDs,T=p.attributeTypes;let y,S;const $=h.GetEncodedGeometryType(f);if($===l.TRIANGULAR_MESH)y=new l.Mesh,S=h.DecodeBufferToMesh(f,y);else if($===l.POINT_CLOUD)y=new l.PointCloud,S=h.DecodeBufferToPointCloud(f,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!S.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+S.error_msg());const M={index:null,attributes:[]};for(const C in v){const E=self[T[C]];let w,I;if(p.useUniqueIDs)I=v[C],w=h.GetAttributeByUniqueId(y,I);else{if(I=h.GetAttributeId(y,l[v[C]]),I===-1)continue;w=h.GetAttribute(y,I)}M.attributes.push(r(l,h,y,C,E,w))}return $===l.TRIANGULAR_MESH&&(M.index=i(l,h,y)),l.destroy(y),M}function i(l,h,f){const v=f.num_faces()*3,T=v*4,y=l._malloc(T);h.GetTrianglesUInt32Array(f,T,y);const S=new Uint32Array(l.HEAPF32.buffer,y,v).slice();return l._free(y),{array:S,itemSize:1}}function r(l,h,f,p,v,T){const y=T.num_components(),$=f.num_points()*y,M=$*v.BYTES_PER_ELEMENT,C=a(l,v),E=l._malloc(M);h.GetAttributeDataArrayForAllPoints(f,T,C,M,E);const w=new v(l.HEAPF32.buffer,E,$).slice();return l._free(E),{name:p,array:w,itemSize:y}}function a(l,h){switch(h){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}const dP=new Ro,O$=new be;class eN extends k2{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new _n(e,3)),this.setAttribute("uv",new _n(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,i=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),i.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new _C(n,6,1);return this.setAttribute("instanceStart",new Ju(i,3,0)),this.setAttribute("instanceEnd",new Ju(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new _C(i,n*2,1);return this.setAttribute("instanceColorStart",new Ju(r,n,0)),this.setAttribute("instanceColorEnd",new Ju(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new x2(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ro);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),dP.setFromBufferAttribute(n),this.boundingBox.union(dP))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wo),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let a=0,l=e.count;a<l;a++)O$.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(O$)),O$.fromBufferAttribute(n,a),r=Math.max(r,i.distanceToSquared(O$));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Tz extends eN{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,n=3){const i=e.length-n,r=new Float32Array(2*i);if(n===3)for(let a=0;a<i;a+=n)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5];else for(let a=0;a<i;a+=n)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5],r[2*a+6]=e[a+6],r[2*a+7]=e[a+7];return super.setColors(r,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class tN extends pu{constructor(e){super({type:"LineMaterial",uniforms:dC.clone(dC.merge([sn.common,sn.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new It(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${qS>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const lw=new Ei,fP=new be,pP=new be,Ga=new Ei,za=new Ei,ip=new Ei,uw=new be,cw=new Fn,Va=new DG,mP=new be,N$=new Ro,L$=new wo,sp=new Ei;let hp,Pv;function gP(s,e,n){return sp.set(0,0,-e,1).applyMatrix4(s.projectionMatrix),sp.multiplyScalar(1/sp.w),sp.x=Pv/n.width,sp.y=Pv/n.height,sp.applyMatrix4(s.projectionMatrixInverse),sp.multiplyScalar(1/sp.w),Math.abs(Math.max(sp.x,sp.y))}function kZ(s,e){const n=s.matrixWorld,i=s.geometry,r=i.attributes.instanceStart,a=i.attributes.instanceEnd,l=Math.min(i.instanceCount,r.count);for(let h=0,f=l;h<f;h++){Va.start.fromBufferAttribute(r,h),Va.end.fromBufferAttribute(a,h),Va.applyMatrix4(n);const p=new be,v=new be;hp.distanceSqToSegment(Va.start,Va.end,v,p),v.distanceTo(p)<Pv*.5&&e.push({point:v,pointOnLine:p,distance:hp.origin.distanceTo(v),object:s,face:null,faceIndex:h,uv:null,[dz]:null})}}function PZ(s,e,n){const i=e.projectionMatrix,a=s.material.resolution,l=s.matrixWorld,h=s.geometry,f=h.attributes.instanceStart,p=h.attributes.instanceEnd,v=Math.min(h.instanceCount,f.count),T=-e.near;hp.at(1,ip),ip.w=1,ip.applyMatrix4(e.matrixWorldInverse),ip.applyMatrix4(i),ip.multiplyScalar(1/ip.w),ip.x*=a.x/2,ip.y*=a.y/2,ip.z=0,uw.copy(ip),cw.multiplyMatrices(e.matrixWorldInverse,l);for(let y=0,S=v;y<S;y++){if(Ga.fromBufferAttribute(f,y),za.fromBufferAttribute(p,y),Ga.w=1,za.w=1,Ga.applyMatrix4(cw),za.applyMatrix4(cw),Ga.z>T&&za.z>T)continue;if(Ga.z>T){const I=Ga.z-za.z,O=(Ga.z-T)/I;Ga.lerp(za,O)}else if(za.z>T){const I=za.z-Ga.z,O=(za.z-T)/I;za.lerp(Ga,O)}Ga.applyMatrix4(i),za.applyMatrix4(i),Ga.multiplyScalar(1/Ga.w),za.multiplyScalar(1/za.w),Ga.x*=a.x/2,Ga.y*=a.y/2,za.x*=a.x/2,za.y*=a.y/2,Va.start.copy(Ga),Va.start.z=0,Va.end.copy(za),Va.end.z=0;const M=Va.closestPointToPointParameter(uw,!0);Va.at(M,mP);const C=c2.lerp(Ga.z,za.z,M),E=C>=-1&&C<=1,w=uw.distanceTo(mP)<Pv*.5;if(E&&w){Va.start.fromBufferAttribute(f,y),Va.end.fromBufferAttribute(p,y),Va.start.applyMatrix4(l),Va.end.applyMatrix4(l);const I=new be,O=new be;hp.distanceSqToSegment(Va.start,Va.end,O,I),n.push({point:O,pointOnLine:I,distance:hp.origin.distanceTo(O),object:s,face:null,faceIndex:y,uv:null,[dz]:null})}}}class Ez extends _r{constructor(e=new eN,n=new tN({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.count);for(let l=0,h=0,f=n.count;l<f;l++,h+=2)fP.fromBufferAttribute(n,l),pP.fromBufferAttribute(i,l),r[h]=h===0?0:r[h-1],r[h+1]=r[h]+fP.distanceTo(pP);const a=new _C(r,2,1);return e.setAttribute("instanceDistanceStart",new Ju(a,1,0)),e.setAttribute("instanceDistanceEnd",new Ju(a,1,1)),this}raycast(e,n){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;hp=e.ray;const l=this.matrixWorld,h=this.geometry,f=this.material;Pv=f.linewidth+a,h.boundingSphere===null&&h.computeBoundingSphere(),L$.copy(h.boundingSphere).applyMatrix4(l);let p;if(i)p=Pv*.5;else{const T=Math.max(r.near,L$.distanceToPoint(hp.origin));p=gP(r,T,f.resolution)}if(L$.radius+=p,hp.intersectsSphere(L$)===!1)return;h.boundingBox===null&&h.computeBoundingBox(),N$.copy(h.boundingBox).applyMatrix4(l);let v;if(i)v=Pv*.5;else{const T=Math.max(r.near,N$.distanceToPoint(hp.origin));v=gP(r,T,f.resolution)}N$.expandByScalar(v),hp.intersectsBox(N$)!==!1&&(i?kZ(this,n):PZ(this,r,n))}onBeforeRender(e){const n=this.material.uniforms;n&&n.resolution&&(e.getViewport(lw),this.material.uniforms.resolution.value.set(lw.z,lw.w))}}class UZ extends Ez{constructor(e=new Tz,n=new tN({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let D$;const hw=()=>{if(D$)return D$;const s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=s;WebAssembly.validate(n)&&(r=e);let a;const l=WebAssembly.instantiate(h(r),{}).then(T=>{a=T.instance,a.exports.__wasm_call_ctors()});function h(T){const y=new Uint8Array(T.length);for(let $=0;$<T.length;++$){const M=T.charCodeAt($);y[$]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let S=0;for(let $=0;$<T.length;++$)y[S++]=y[$]<60?i[y[$]]:(y[$]-60)*64+y[++$];return y.buffer.slice(0,S)}function f(T,y,S,$,M,C){const E=a.exports.sbrk,w=S+3&-4,I=E(w*$),O=E(M.length),P=new Uint8Array(a.exports.memory.buffer);P.set(M,O);const F=T(I,S,$,O,M.length);if(F===0&&C&&C(I,w,$),y.set(P.subarray(I,I+S*$)),E(I-E(0)),F!==0)throw new Error(`Malformed buffer data: ${F}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},v={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return D$={ready:l,supported:!0,decodeVertexBuffer(T,y,S,$,M){f(a.exports.meshopt_decodeVertexBuffer,T,y,S,$,a.exports[p[M]])},decodeIndexBuffer(T,y,S,$){f(a.exports.meshopt_decodeIndexBuffer,T,y,S,$)},decodeIndexSequence(T,y,S,$){f(a.exports.meshopt_decodeIndexSequence,T,y,S,$)},decodeGltfBuffer(T,y,S,$,M,C){f(a.exports[v[M]],T,y,S,$,a.exports[p[C]])}},D$},FZ=Q.forwardRef(function({points:e,color:n=16777215,vertexColors:i,linewidth:r,lineWidth:a,segments:l,dashed:h,...f},p){var v,T;const y=or(E=>E.size),S=Q.useMemo(()=>l?new Ez:new UZ,[l]),[$]=Q.useState(()=>new tN),M=(i==null||(v=i[0])==null?void 0:v.length)===4?4:3,C=Q.useMemo(()=>{const E=l?new eN:new Tz,w=e.map(I=>{const O=Array.isArray(I);return I instanceof be||I instanceof Ei?[I.x,I.y,I.z]:I instanceof It?[I.x,I.y,0]:O&&I.length===3?[I[0],I[1],I[2]]:O&&I.length===2?[I[0],I[1],0]:I});if(E.setPositions(w.flat()),i){n=16777215;const I=i.map(O=>O instanceof on?O.toArray():O);E.setColors(I.flat(),M)}return E},[e,l,i,M]);return Q.useLayoutEffect(()=>{S.computeLineDistances()},[e,S]),Q.useLayoutEffect(()=>{h?$.defines.USE_DASH="":delete $.defines.USE_DASH,$.needsUpdate=!0},[h,$]),Q.useEffect(()=>()=>{C.dispose(),$.dispose()},[C]),Q.createElement("primitive",ec({object:S,ref:p},f),Q.createElement("primitive",{object:C,attach:"geometry"}),Q.createElement("primitive",ec({object:$,attach:"material",color:n,vertexColors:!!i,resolution:[y.width,y.height],linewidth:(T=r??a)!==null&&T!==void 0?T:1,dashed:h,transparent:M===4},f)))});let B$=null,Sz="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Az(s=!0,e=!0,n){return i=>{n&&n(i),s&&(B$||(B$=new DZ),B$.setDecoderPath(typeof s=="string"?s:Sz),i.setDRACOLoader(B$)),e&&i.setMeshoptDecoder(typeof hw=="function"?hw():hw)}}const jc=(s,e,n,i)=>tm(Q2,s,Az(e,n,i));jc.preload=(s,e,n,i)=>tm.preload(Q2,s,Az(e,n,i));jc.clear=s=>tm.clear(Q2,s);jc.setDecoderPath=s=>{Sz=s};function HZ(s,e,n){const i=or(S=>S.size),r=or(S=>S.viewport),a=typeof s=="number"?s:i.width*r.dpr,l=i.height*r.dpr,h=(typeof s=="number"?n:s)||{},{samples:f=0,depth:p,...v}=h,T=p??h.depthBuffer,y=Q.useMemo(()=>{const S=new Gc(a,l,{minFilter:us,magFilter:us,type:ea,...v});return T&&(S.depthTexture=new fM(a,l,Rr)),S.samples=f,S},[]);return Q.useLayoutEffect(()=>{y.setSize(a,l),f&&(y.samples=f)},[f,y,a,l]),Q.useEffect(()=>()=>y.dispose(),[]),y}const GZ=s=>typeof s=="function",$z=Q.forwardRef(({envMap:s,resolution:e=256,frames:n=1/0,children:i,makeDefault:r,...a},l)=>{const h=or(({set:C})=>C),f=or(({camera:C})=>C),p=or(({size:C})=>C),v=Q.useRef(null);Q.useImperativeHandle(l,()=>v.current,[]);const T=Q.useRef(null),y=HZ(e);Q.useLayoutEffect(()=>{a.manual||v.current.updateProjectionMatrix()},[p,a]),Q.useLayoutEffect(()=>{v.current.updateProjectionMatrix()}),Q.useLayoutEffect(()=>{if(r){const C=f;return h(()=>({camera:v.current})),()=>h(()=>({camera:C}))}},[v,r,h]);let S=0,$=null;const M=GZ(i);return KS(C=>{M&&(n===1/0||S<n)&&(T.current.visible=!1,C.gl.setRenderTarget(y),$=C.scene.background,s&&(C.scene.background=s),C.gl.render(C.scene,v.current),C.scene.background=$,C.gl.setRenderTarget(null),T.current.visible=!0,S++)}),Q.createElement(Q.Fragment,null,Q.createElement("orthographicCamera",ec({left:p.width/-2,right:p.width/2,top:p.height/2,bottom:p.height/-2,ref:v},a),!M&&i),Q.createElement("group",{ref:T},M&&i(y.texture)))}),zZ=Q.forwardRef(({makeDefault:s,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:l,onStart:h,onEnd:f,...p},v)=>{const T=or(F=>F.invalidate),y=or(F=>F.camera),S=or(F=>F.gl),$=or(F=>F.events),M=or(F=>F.setEvents),C=or(F=>F.set),E=or(F=>F.get),w=or(F=>F.performance),I=e||y,O=i||$.connected||S.domElement,P=Q.useMemo(()=>new JJ(I),[I]);return KS(()=>{P.enabled&&P.update()},-1),Q.useEffect(()=>(a&&P.connect(a===!0?O:a),P.connect(O),()=>void P.dispose()),[a,O,n,P,T]),Q.useEffect(()=>{const F=G=>{T(),n&&w.regress(),l&&l(G)},V=G=>{h&&h(G)},X=G=>{f&&f(G)};return P.addEventListener("change",F),P.addEventListener("start",V),P.addEventListener("end",X),()=>{P.removeEventListener("start",V),P.removeEventListener("end",X),P.removeEventListener("change",F)}},[l,h,f,P,T,M]),Q.useEffect(()=>{if(s){const F=E().controls;return C({controls:P}),()=>C({controls:F})}},[s,P]),Q.createElement("primitive",ec({ref:v,object:P,enableDamping:r},p))});function VZ({defaultScene:s,defaultCamera:e,renderPriority:n=1}){const{gl:i,scene:r,camera:a}=or();let l;return KS(()=>{l=i.autoClear,n===1&&(i.autoClear=!0,i.render(s,e)),i.autoClear=!1,i.clearDepth(),i.render(r,a),i.autoClear=l},n),Q.createElement("group",{onPointerOver:()=>null})}function WZ({children:s,renderPriority:e=1}){const{scene:n,camera:i}=or(),[r]=Q.useState(()=>new mT);return Q.createElement(Q.Fragment,null,uz(Q.createElement(Q.Fragment,null,s,Q.createElement(VZ,{defaultScene:n,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const xz=Q.createContext({}),Cz=()=>Q.useContext(xz),XZ=2*Math.PI,dw=new zi,_P=new Fn,[ay,fw]=[new Mo,new Mo],vP=new be,bP=new be,jZ=s=>"minPolarAngle"in s,yP=s=>"getTarget"in s,YZ=({alignment:s="bottom-right",margin:e=[80,80],renderPriority:n=1,onUpdate:i,onTarget:r,children:a})=>{const l=or(F=>F.size),h=or(F=>F.camera),f=or(F=>F.controls),p=or(F=>F.invalidate),v=Q.useRef(null),T=Q.useRef(null),y=Q.useRef(!1),S=Q.useRef(0),$=Q.useRef(new be(0,0,0)),M=Q.useRef(new be(0,0,0));Q.useEffect(()=>{M.current.copy(h.up),dw.up.copy(h.up)},[h]);const C=Q.useCallback(F=>{y.current=!0,(f||r)&&($.current=r?.()||(yP(f)?f.getTarget($.current):f?.target)),S.current=h.position.distanceTo(vP),ay.copy(h.quaternion),bP.copy(F).multiplyScalar(S.current).add(vP),dw.lookAt(bP),fw.copy(dw.quaternion),p()},[f,h,r,p]);KS((F,V)=>{if(T.current&&v.current){var X;if(y.current)if(ay.angleTo(fw)<.01)y.current=!1,jZ(f)&&h.up.copy(M.current);else{const G=V*XZ;ay.rotateTowards(fw,G),h.position.set(0,0,1).applyQuaternion(ay).multiplyScalar(S.current).add($.current),h.up.set(0,1,0).applyQuaternion(ay).normalize(),h.quaternion.copy(ay),yP(f)&&f.setPosition(h.position.x,h.position.y,h.position.z),i?i():f&&f.update(V),p()}_P.copy(h.matrix).invert(),(X=v.current)==null||X.quaternion.setFromRotationMatrix(_P)}});const E=Q.useMemo(()=>({tweenCamera:C}),[C]),[w,I]=e,O=s.endsWith("-center")?0:s.endsWith("-left")?-l.width/2+w:l.width/2-w,P=s.startsWith("center-")?0:s.startsWith("top-")?l.height/2-I:-l.height/2+I;return Q.createElement(WZ,{renderPriority:n},Q.createElement(xz.Provider,{value:E},Q.createElement($z,{makeDefault:!0,ref:T,position:[0,0,200]}),Q.createElement("group",{ref:v,position:[O,P,0]},a)))},ME={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},KZ=["Right","Left","Top","Bottom","Front","Back"],Mz=s=>new be(...s).multiplyScalar(.38),qZ=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(Mz),JZ=[.25,.25,.25],Rz=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(Mz),ZZ=Rz.map(s=>s.toArray().map(e=>e==0?.5:.25)),QZ=({hover:s,index:e,font:n="20px Inter var, Arial, sans-serif",faces:i=KZ,color:r=ME.bg,hoverColor:a=ME.hover,textColor:l=ME.text,strokeColor:h=ME.stroke,opacity:f=1})=>{const p=or(T=>T.gl),v=Q.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const y=T.getContext("2d");return y.fillStyle=r,y.fillRect(0,0,T.width,T.height),y.strokeStyle=h,y.strokeRect(0,0,T.width,T.height),y.font=n,y.textAlign="center",y.fillStyle=l,y.fillText(i[e].toUpperCase(),64,76),new JH(T)},[e,i,n,r,l,h]);return Q.createElement("meshBasicMaterial",{map:v,"map-anisotropy":p.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:s?a:"white",transparent:!0,opacity:f})},eQ=s=>{const{tweenCamera:e}=Cz(),[n,i]=Q.useState(null),r=h=>{h.stopPropagation(),i(null)},a=h=>{h.stopPropagation(),e(h.face.normal)},l=h=>{h.stopPropagation(),i(Math.floor(h.faceIndex/2))};return Q.createElement("mesh",{onPointerOut:r,onPointerMove:l,onClick:s.onClick||a},[...Array(6)].map((h,f)=>Q.createElement(QZ,ec({key:f,index:f,hover:n===f},s))),Q.createElement("boxGeometry",null))},TP=({onClick:s,dimensions:e,position:n,hoverColor:i=ME.hover})=>{const{tweenCamera:r}=Cz(),[a,l]=Q.useState(!1),h=v=>{v.stopPropagation(),l(!1)},f=v=>{v.stopPropagation(),l(!0)},p=v=>{v.stopPropagation(),r(n)};return Q.createElement("mesh",{scale:1.01,position:n,onPointerOver:f,onPointerOut:h,onClick:s||p},Q.createElement("meshBasicMaterial",{color:a?i:"white",transparent:!0,opacity:.6,visible:a}),Q.createElement("boxGeometry",{args:e}))},tQ=s=>Q.createElement("group",{scale:[60,60,60]},Q.createElement(eQ,s),Rz.map((e,n)=>Q.createElement(TP,ec({key:n,position:e,dimensions:ZZ[n]},s))),qZ.map((e,n)=>Q.createElement(TP,ec({key:n,position:e,dimensions:JZ},s))));function nQ(s,e){const n=s+"Geometry";return Q.forwardRef(({args:i,children:r,...a},l)=>{const h=Q.useRef(null);return Q.useImperativeHandle(l,()=>h.current),Q.useLayoutEffect(()=>void e?.(h.current)),Q.createElement("mesh",ec({ref:h},a),Q.createElement(n,{attach:"geometry",args:i}),r)})}const EP=nQ("plane"),ap=1e-5;function iQ(s,e,n){const i=new Ig,r=n-ap;return i.absarc(ap,ap,ap,-Math.PI/2,-Math.PI,!0),i.absarc(ap,e-r*2,ap,Math.PI,Math.PI/2,!0),i.absarc(s-r*2,e-r*2,ap,Math.PI/2,0,!0),i.absarc(s-r*2,ap,ap,0,-Math.PI/2,!0),i}const sQ=Q.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:a=1,smoothness:l=4,bevelSegments:h=4,creaseAngle:f=.4,children:p,...v},T){return Q.createElement("mesh",ec({ref:T},v),Q.createElement(rQ,{args:[e,n,i],radius:r,steps:a,smoothness:l,bevelSegments:h,creaseAngle:f}),p)}),rQ=Q.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:a=1,smoothness:l=4,bevelSegments:h=4,creaseAngle:f=.4,...p},v){const T=Q.useMemo(()=>iQ(e,n,r),[e,n,r]),y=Q.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:h*2,steps:a,bevelSize:r-ap,bevelThickness:r,curveSegments:l}),[i,r,l,h,a]),S=Q.useRef(null);return Q.useLayoutEffect(()=>{S.current&&(S.current.center(),MJ(S.current,f))},[T,y,f]),Q.useImperativeHandle(v,()=>S.current),Q.createElement("extrudeGeometry",ec({ref:S,args:[T,y]},p))}),wz=(s,e,n)=>{let i;switch(s){case fu:i=new Uint8ClampedArray(e*n*4);break;case ea:i=new Uint16Array(e*n*4);break;case xp:i=new Uint32Array(e*n*4);break;case JC:i=new Int8Array(e*n*4);break;case ZC:i=new Int16Array(e*n*4);break;case BS:i=new Int32Array(e*n*4);break;case Rr:i=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return i};let k$;const oQ=(s,e,n,i)=>{if(k$!==void 0)return k$;const r=new Gc(1,1,i);e.setRenderTarget(r);const a=new _r(new jg,new qu({color:16777215}));e.render(a,n),e.setRenderTarget(null);const l=wz(s,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,l),r.dispose(),a.geometry.dispose(),a.material.dispose(),k$=l[0]!==0,k$};class nN{constructor(e){var n,i,r,a,l,h,f,p,v,T,y,S,$,M,C,E;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(I){throw this._renderer.setRenderTarget(null),I}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:ho,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps:!1,magFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.magFilter:us,minFilter:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:us,samples:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.samples)!==void 0?(T=e.renderTargetOptions)===null||T===void 0?void 0:T.samples:void 0,wrapS:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.wrapS:co,wrapT:(($=e.renderTargetOptions)===null||$===void 0?void 0:$.wrapT)!==void 0?(M=e.renderTargetOptions)===null||M===void 0?void 0:M.wrapT:co};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=nN.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new mT,this._camera=new Tp,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!oQ(this._type,this._renderer,this._camera,w)){let I;switch(this._type){case ea:I=this._renderer.extensions.has("EXT_color_buffer_float")?Rr:void 0;break}I!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Rr}`),this._type=I):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new _r(new jg,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Gc(this.width,this.height,w),this._renderTarget.texture.mapping=((C=e.renderTargetOptions)===null||C===void 0?void 0:C.mapping)!==void 0?(E=e.renderTargetOptions)===null||E===void 0?void 0:E.mapping:Bg}static instantiateRenderer(){const e=new X2;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=wz(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new Qd(this.toArray(),this.width,this.height,ho,this._type,e?.mapping||Bg,e?.wrapS||co,e?.wrapT||co,e?.magFilter||us,e?.minFilter||us,e?.anisotropy||1,sf);return n.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof pu&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof Ms&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof Ms&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const aQ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,lQ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class uQ extends pu{constructor({gamma:e,offsetHdr:n,offsetSdr:i,gainMapMin:r,gainMapMax:a,maxDisplayBoost:l,hdrCapacityMin:h,hdrCapacityMax:f,sdr:p,gainMap:v}){super({name:"GainMapDecoderMaterial",vertexShader:aQ,fragmentShader:lQ,uniforms:{sdr:{value:p},gainMap:{value:v},gamma:{value:new be(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new be().fromArray(n)},offsetSdr:{value:new be().fromArray(i)},gainMapMin:{value:new be().fromArray(r)},gainMapMax:{value:new be().fromArray(a)},weightFactor:{value:(Math.log2(l)-h)/(f-h)}},blending:bp,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=l,this._hdrCapacityMin=h,this._hdrCapacityMax=f,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Iz extends Error{}class Oz extends Error{}const mE=(s,e,n)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(s);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(s);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(l=>l.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},cQ=s=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(s):e=s.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const i=e.indexOf("x:xmpmeta>",n),r=e.slice(n,i+10);try{const a=mE(r,"hdrgm:GainMapMin","0"),l=mE(r,"hdrgm:GainMapMax"),h=mE(r,"hdrgm:Gamma","1"),f=mE(r,"hdrgm:OffsetSDR","0.015625"),p=mE(r,"hdrgm:OffsetHDR","0.015625"),v=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),T=v?v[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!y)throw new Error("Incomplete gainmap metadata");const S=y[1];return{gainMapMin:Array.isArray(a)?a.map($=>parseFloat($)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(l)?l.map($=>parseFloat($)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(h)?h.map($=>parseFloat($)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(f)?f.map($=>parseFloat($)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(p)?p.map($=>parseFloat($)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(T),hdrCapacityMax:parseFloat(S)}}catch{}n=e.indexOf("<x:xmpmeta",i)}};class hQ{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,i)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const l=a.byteLength;let h=2,f=0,p;for(;h<l;){if(++f>250){i(new Error(`Found no marker after ${f} loops 😵`));return}if(a.getUint8(h)!==255){i(new Error(`Not a valid marker at offset 0x${h.toString(16)}, found: 0x${a.getUint8(h).toString(16)}`));return}if(p=a.getUint8(h+1),r&&console.log(`Marker: ${p.toString(16)}`),p===226){r&&console.log("Found APP2 marker (0xffe2)");const v=h+4;if(a.getUint32(v)===1297106432){const T=v+4;let y;if(a.getUint16(T)===18761)y=!1;else if(a.getUint16(T)===19789)y=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(T+2,!y)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const S=a.getUint32(T+4,!y);if(S<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const $=T+S,M=a.getUint16($,!y),C=$+2;let E=0;for(let P=C;P<C+12*M;P+=12)a.getUint16(P,!y)===45057&&(E=a.getUint32(P+8,!y));const I=$+2+M*12+4,O=[];for(let P=I;P<I+E*16;P+=16){const F={MPType:a.getUint32(P,!y),size:a.getUint32(P+4,!y),dataOffset:a.getUint32(P+8,!y),dependantImages:a.getUint32(P+12,!y),start:-1,end:-1,isFII:!1};F.dataOffset?(F.start=T+F.dataOffset,F.isFII=!1):(F.start=0,F.isFII=!0),F.end=F.start+F.size,O.push(F)}if(this.options.extractNonFII&&O.length){const P=new Blob([a]),F=[];for(const V of O){if(V.isFII&&!this.options.extractFII)continue;const X=P.slice(V.start,V.end+1,"image/jpeg");F.push(X)}n(F)}}}h+=2+a.getUint16(h+2)}})}}const dQ=async s=>{const e=cQ(s);if(!e)throw new Oz("Gain map XMP metadata not found");const i=await new hQ({extractFII:!0,extractNonFII:!0}).extract(s);if(i.length!==2)throw new Iz("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},SP=s=>new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{n(r)},i.src=URL.createObjectURL(s)});class Nz extends Ya{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new xM}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new uQ({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ms,sdr:new Ms});return new nN({width:16,height:16,type:ea,colorSpace:sf,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,i,r){const a=r?new Blob([r],{type:"image/jpeg"}):void 0,l=new Blob([i],{type:"image/jpeg"});let h,f,p=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([a?SP(a):Promise.resolve(void 0),SP(l)]);f=y[0],h=y[1],p=!0}else{const y=await Promise.all([a?createImageBitmap(a,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:"flipY"})]);f=y[0],h=y[1]}const v=new Ms(f||new ImageData(2,2),Bg,co,co,us,KI,ho,fu,1,sf);v.flipY=p,v.needsUpdate=!0;const T=new Ms(h,Bg,co,co,us,KI,ho,fu,1,Wa);T.flipY=p,T.needsUpdate=!0,e.width=h.width,e.height=h.height,e.material.gainMap=v,e.material.sdr=T,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class fQ extends Nz{load([e,n,i],r,a,l){const h=this.prepareQuadRenderer();let f,p,v;const T=async()=>{if(f&&p&&v){try{await this.render(h,v,f,p)}catch(G){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(i),typeof l=="function"&&l(G),h.disposeOnDemandRenderer();return}typeof r=="function"&&r(h),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(i),h.disposeOnDemandRenderer()}};let y=!0,S=0,$=0,M=!0,C=0,E=0,w=!0,I=0,O=0;const P=()=>{if(typeof a=="function"){const G=S+C+I,D=$+E+O,Z=y&&M&&w;a(new ProgressEvent("progress",{lengthComputable:Z,loaded:D,total:G}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(i);const F=new ja(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(e,async G=>{if(typeof G=="string")throw new Error("Invalid sdr buffer");f=G,await T()},G=>{y=G.lengthComputable,$=G.loaded,S=G.total,P()},G=>{this.manager.itemError(e),typeof l=="function"&&l(G)});const V=new ja(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(n,async G=>{if(typeof G=="string")throw new Error("Invalid gainmap buffer");p=G,await T()},G=>{M=G.lengthComputable,E=G.loaded,C=G.total,P()},G=>{this.manager.itemError(n),typeof l=="function"&&l(G)});const X=new ja(this._internalLoadingManager);return X.setRequestHeader(this.requestHeader),X.setPath(this.path),X.setWithCredentials(this.withCredentials),X.load(i,async G=>{if(typeof G!="string")throw new Error("Invalid metadata string");v=JSON.parse(G),await T()},G=>{w=G.lengthComputable,O=G.loaded,I=G.total,P()},G=>{this.manager.itemError(i),typeof l=="function"&&l(G)}),h}}class pQ extends Nz{load(e,n,i,r){const a=this.prepareQuadRenderer(),l=new ja(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(e),l.load(e,async h=>{if(typeof h=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const f=new Uint8Array(h);let p,v,T;try{const y=await dQ(f);p=y.sdr,v=y.gainMap,T=y.metadata}catch(y){if(y instanceof Oz||y instanceof Iz)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),T={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=f;else throw y}try{await this.render(a,T,p,v)}catch(y){this.manager.itemError(e),typeof r=="function"&&r(y),a.disposeOnDemandRenderer();return}typeof n=="function"&&n(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},i,h=>{this.manager.itemError(e),typeof r=="function"&&r(h)}),a}}const pS={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Lz="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Oy=s=>Array.isArray(s),iN=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function wM({files:s=iN,path:e="",preset:n=void 0,colorSpace:i=void 0,extensions:r}={}){n&&(sN(n),s=pS[n],e=Lz);const a=Oy(s),{extension:l,isCubemap:h}=rN(s),f=oN(l);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+s);const p=or(S=>S.gl);Q.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function S(){tm.clear(f,a?[s]:s)}p.domElement.addEventListener("webglcontextlost",S,{once:!0})},[s,p.domElement]);const v=tm(f,a?[s]:s,S=>{(l==="webp"||l==="jpg"||l==="jpeg")&&S.setRenderer(p),S.setPath==null||S.setPath(e),r&&r(S)});let T=a?v[0]:v;if(l==="jpg"||l==="jpeg"||l==="webp"){var y;T=(y=T.renderTarget)==null?void 0:y.texture}return T.mapping=h?$p:Uy,T.colorSpace=i??(h?"srgb":"srgb-linear"),T}const mQ={files:iN,path:"",preset:void 0,extensions:void 0};wM.preload=s=>{const e={...mQ,...s};let{files:n,path:i=""}=e;const{preset:r,extensions:a}=e;r&&(sN(r),n=pS[r],i=Lz);const{extension:l}=rN(n);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const h=oN(l);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+n);tm.preload(h,Oy(n)?[n]:n,f=>{f.setPath==null||f.setPath(i),a&&a(f)})};const gQ={files:iN,preset:void 0};wM.clear=s=>{const e={...gQ,...s};let{files:n}=e;const{preset:i}=e;i&&(sN(i),n=pS[i]);const{extension:r}=rN(n),a=oN(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);tm.clear(a,Oy(n)?[n]:n)};function sN(s){if(!(s in pS))throw new Error("Preset must be one of: "+Object.keys(pS).join(", "))}function rN(s){var e;const n=Oy(s)&&s.length===6,i=Oy(s)&&s.length===3&&s.some(l=>l.endsWith("json")),r=Oy(s)?s[0]:s;return{extension:n?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:i}}function oN(s){return s==="cube"?EG:s==="hdr"?NZ:s==="exr"?LZ:s==="jpg"||s==="jpeg"?pQ:s==="webp"?fQ:null}const _Q=s=>s.current&&s.current.isScene,vQ=s=>_Q(s)?s.current:s;function aN(s,e,n,i,r={}){var a,l,h,f;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const p=vQ(e||n),v=p.background,T=p.environment,y={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(a=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(h=(f=p.environmentRotation)==null||f.clone==null?void 0:f.clone())!==null&&h!==void 0?h:[0,0,0]};return s!=="only"&&(p.environment=i),s&&(p.background=i),cp(p,r),()=>{s!=="only"&&(p.environment=T),s&&(p.background=v),cp(p,y)}}function lN({scene:s,background:e=!1,map:n,...i}){const r=or(a=>a.scene);return Q.useLayoutEffect(()=>{if(n)return aN(e,s,r,n,i)}),null}function Dz({background:s=!1,scene:e,blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:l,environmentRotation:h,...f}){const p=wM(f),v=or(T=>T.scene);return Q.useLayoutEffect(()=>aN(s,e,v,p,{backgroundBlurriness:n??i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:l,environmentRotation:h})),Q.useEffect(()=>()=>{p.dispose()},[p]),null}function bQ({children:s,near:e=.1,far:n=1e3,resolution:i=256,frames:r=1,map:a,background:l=!1,blur:h,backgroundBlurriness:f,backgroundIntensity:p,backgroundRotation:v,environmentIntensity:T,environmentRotation:y,scene:S,files:$,path:M,preset:C=void 0,extensions:E}){const w=or(X=>X.gl),I=or(X=>X.scene),O=Q.useRef(null),[P]=Q.useState(()=>new mT),F=Q.useMemo(()=>{const X=new p2(i);return X.texture.type=ea,X},[i]);Q.useEffect(()=>()=>{F.dispose()},[F]),Q.useLayoutEffect(()=>{if(r===1){const X=w.autoClear;w.autoClear=!0,O.current.update(w,P),w.autoClear=X}return aN(l,S,I,F.texture,{backgroundBlurriness:h??f,backgroundIntensity:p,backgroundRotation:v,environmentIntensity:T,environmentRotation:y})},[s,P,F.texture,S,I,l,r,w]);let V=1;return KS(()=>{if(r===1/0||V<r){const X=w.autoClear;w.autoClear=!0,O.current.update(w,P),w.autoClear=X,V++}}),Q.createElement(Q.Fragment,null,uz(Q.createElement(Q.Fragment,null,s,Q.createElement("cubeCamera",{ref:O,args:[e,n,F]}),$||C?Q.createElement(Dz,{background:!0,files:$,preset:C,path:M,extensions:E}):a?Q.createElement(lN,{background:!0,map:a,extensions:E}):null),P))}function yQ(s){var e,n,i,r;const a=wM(s),l=s.map||a;Q.useMemo(()=>sz({GroundProjectedEnvImpl:zJ}),[]),Q.useEffect(()=>()=>{a.dispose()},[a]);const h=Q.useMemo(()=>[l],[l]),f=(e=s.ground)==null?void 0:e.height,p=(n=s.ground)==null?void 0:n.radius,v=(i=(r=s.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return Q.createElement(Q.Fragment,null,Q.createElement(lN,ec({},s,{map:l})),Q.createElement("groundProjectedEnvImpl",{args:h,scale:v,height:f,radius:p}))}function TQ(s){return s.ground?Q.createElement(yQ,s):s.map?Q.createElement(lN,s):s.children?Q.createElement(bQ,s):Q.createElement(Dz,s)}function EQ(s){return he.jsx(sQ,{position:[s.position[0]+.5,s.position[1]+.5*s.heightUnits,s.position[2]+.5],scale:[1,s.heightUnits,1],radius:.15,children:[...Array(6)].map((e,n)=>he.jsx("meshStandardMaterial",{attach:`material-${n}`,map:s.texture,color:s.color??"white",opacity:s.opacity??1,roughness:.1,metalness:.5},n))})}const Sv=rm(EQ);function pw(s,e,...n){s==null&&Bz(e,2,...n)}function Bz(s,e,...n){if(s===void 0)throw new Error("invariant requires an error message argument");let i;if(s===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;i=new Error(s.replace(/%s/g,function(){return n[r++]})),i.name="Invariant Violation"}throw i.framesToPop=e,i}function gO(s,e,...n){s||Bz(e,2,...n)}var SQ=Object.defineProperty,ZS=(s,e,n,i)=>{for(var r=void 0,a=s.length-1,l;a>=0;a--)(l=s[a])&&(r=l(e,n,r)||r);return r&&SQ(e,n,r),r};class kz{constructor(e,n){dT(this),this.x=e,this.z=n}x=0;z=0}ZS([li],kz.prototype,"x");ZS([li],kz.prototype,"z");class Q0{x;y;z;constructor(e=0,n=0,i=0){dT(this),this.x=e,this.y=n,this.z=i}}ZS([li],Q0.prototype,"x");ZS([li],Q0.prototype,"y");ZS([li],Q0.prototype,"z");var Bi=(s=>(s[s.empty=0]="empty",s[s.karol=1]="karol",s[s.wall=2]="wall",s[s.brick_first=3]="brick_first",s[s.brick_red=3]="brick_red",s[s.brick_yellow=4]="brick_yellow",s[s.brick_blue=5]="brick_blue",s[s.brick_green=6]="brick_green",s[s.brick_black=7]="brick_black",s))(Bi||{}),Zv=(s=>(s.red="rot",s.yellow="gelb",s.blue="blau",s.green="grün",s.black="schwarz",s))(Zv||{});const AQ=["rot","gelb","blau","grün","schwarz"];function Pz(s){const e=AQ.indexOf(s);return gO(e>=0,"Internal Error: Color index not found in colorToBrickIndex"),e+3}function $Q(s){return`${s.x}_${s.y}_${s.z}`}function mw(s){return`${s.x}_y_${s.z}`}function xQ(s){const e=s.split("_");e.splice(1,1);const[n,i]=e.map(r=>parseInt(r));return{x:n,z:i}}const Uz=new Map;Object.entries(Zv).forEach(([s,e])=>Uz.set(e,s));const CQ=rm(s=>{const e=s.model.markers;return he.jsx(he.Fragment,{children:e.map(n=>he.jsx(Sv,{position:[n.position.x,n.position.y/2,n.position.z],heightUnits:.1,color:Uz.get(n.color)},$Q(n.position)))})}),MQ=[{rotation:Math.PI,dx:.5,dy:.3,dz:.7},{rotation:Math.PI/2,dx:.3,dy:.3,dz:.5},{rotation:0,dx:.5,dy:.3,dz:.3},{rotation:-Math.PI/2,dx:.8,dy:.3,dz:.5}];function RQ(s){const e=Q.useRef(null),{nodes:n,materials:i}=jc("Robot3D.glb");return he.jsx("group",{ref:e,...s,dispose:null,children:he.jsx("mesh",{geometry:n.node_id52.geometry,position:[0,-.26,.24],scale:[.03,.05,.05],children:he.jsx("meshStandardMaterial",{color:"#606060",roughness:.4,metalness:.6})})})}jc.preload("Robot3D.glb");const wQ=li([{rotation:Math.PI,dx:.5,dy:0,dz:.8},{rotation:Math.PI/2,dx:.3,dy:0,dz:.8},{rotation:0,dx:.3,dy:0,dz:.4},{rotation:-Math.PI/2,dx:.9,dy:0,dz:.6}]);function IQ({...s}){const e=Q.useRef(null),{nodes:n,materials:i}=jc("Dracula3D.glb");return he.jsx("group",{ref:e,...s,dispose:null,children:he.jsx("mesh",{geometry:n.node_id30.geometry,material:i[107],position:[0,0,0],scale:.4})})}jc.preload("Dracula3D.glb");const OQ=[{rotation:Math.PI,dx:.2,dy:0,dz:.8},{rotation:Math.PI/2,dx:.1,dy:0,dz:.3},{rotation:0,dx:.7,dy:0,dz:.2},{rotation:-Math.PI/2,dx:.8,dy:0,dz:.8}];function NQ({...s}){const e=Q.useRef(null),{nodes:n,materials:i}=jc("Weltraumwesen3D.glb");return he.jsx("group",{ref:e,...s,dispose:null,children:he.jsx("mesh",{geometry:n.node_id30.geometry,material:i[78],position:[-.25,0,.25],scale:.14})})}jc.preload("Weltraumwesen3D.glb");const LQ=[{rotation:Math.PI,dx:.2,dy:0,dz:.8},{rotation:Math.PI/2,dx:.1,dy:0,dz:.2},{rotation:0,dx:.7,dy:0,dz:.2},{rotation:-Math.PI/2,dx:.8,dy:0,dz:.8}];function DQ({...s}){const e=Q.useRef(null),{nodes:n,materials:i}=jc("Saxophonist3D.glb");return he.jsx("group",{ref:e,...s,dispose:null,children:he.jsx("mesh",{geometry:n.node_id30.geometry,material:i[49],position:[-.2,0,.26],scale:.13})})}jc.preload("Saxophonist3D.glb");const BQ=[{rotation:Math.PI,dx:.2,dy:1.5,dz:.8},{rotation:Math.PI/2,dx:.1,dy:1.5,dz:.2},{rotation:0,dx:.7,dy:1.5,dz:.2},{rotation:-Math.PI/2,dx:.8,dy:1.5,dz:.8}];function kQ(s){const e=Q.useRef(null),{nodes:n,materials:i}=jc("Puppet3D.glb");return he.jsx("group",{ref:e,...s,dispose:null,scale:10,children:he.jsx("mesh",{geometry:n.mesh_id37.geometry,material:i[72],position:[-.03,.01,.03],scale:.02})})}jc.preload("Puppet3D.glb");const PQ=[[RQ,MQ],[IQ,wQ],[NQ,OQ],[DQ,LQ],[kQ,BQ]],UQ=rm(s=>{const[e,n]=PQ[s.karol.figureIndex],i=n[s.karol.direction];return he.jsx(Q.Suspense,{fallback:null,children:he.jsx(e,{position:[s.position[0]+i.dx,s.position[1]+i.dy,s.position[2]+i.dz],rotation:[0,i.rotation,0]},"karol")})}),FQ=rm(s=>{let e;const n=`${s.position[0]}_${s.position[1]}_${s.position[2]}`;switch(s.content){case Bi.brick_red:e=he.jsx(Sv,{position:s.position,color:"red",heightUnits:.5},n);break;case Bi.brick_yellow:e=he.jsx(Sv,{position:s.position,color:"#faf32a",heightUnits:.5},n);break;case Bi.brick_blue:e=he.jsx(Sv,{position:s.position,color:"#0464c4",heightUnits:.5},n);break;case Bi.brick_green:e=he.jsx(Sv,{position:s.position,color:"#03a81c",heightUnits:.5},n);break;case Bi.brick_black:e=he.jsx(Sv,{position:s.position,color:"#676973",heightUnits:.5},n);break;case Bi.karol:e=he.jsx(UQ,{position:s.position,karol:s.karol},n);break;case Bi.wall:e=he.jsx(Sv,{position:s.position,color:"gray",heightUnits:1},n);break;case Bi.empty:e=null;break;default:e=null;break}return e}),HQ=rm(s=>{const{fields:e,x:n,y:i,karol:r}=s;return he.jsx(he.Fragment,{children:e.map((a,l)=>he.jsx(FQ,{content:a,karol:r,position:[n,i/2,l]},l))})}),GQ=rm(s=>he.jsx(he.Fragment,{children:s.fields.map((e,n)=>e.map((i,r)=>he.jsx(HQ,{fields:i,karol:s.karol,y:r,x:n})))})),gw=rm(s=>he.jsx(FZ,{points:[s.from,s.to],color:s.color,lineWidth:1,dashed:!0,dashSize:1,dashScale:10,dashOffset:1})),zQ=rm(s=>{const e=Q.useRef(null),n=[],i=s.world.dimensions;for(let a=0;a<i.x+1;a++)n.push(a);const r=[];for(let a=0;a<i.z+1;a++)r.push(a);return Q.useEffect(()=>{e.current?.updateProjectionMatrix()},[s.world.dimensions.x,s.world.dimensions.y,s.world.dimensions.z]),he.jsx("div",{style:{width:"700px",height:"600px",borderTop:"solid black 1px"},children:he.jsxs(CJ,{shadows:!0,gl:{antialias:!0},children:[he.jsx($z,{zoom:920/(i.x+i.z),position:[i.x,i.y,i.z],makeDefault:!0,ref:e}),he.jsx(TQ,{preset:"studio"}),he.jsxs("group",{position:[-5,-3,-5],children:[he.jsx("ambientLight",{intensity:1.2},"l1"),he.jsx("pointLight",{castShadow:!0,intensity:.9,position:[60,15,25]},"l2"),he.jsx("pointLight",{castShadow:!0,intensity:.9,position:[-60,15,25]},"l3"),r.map(a=>he.jsx(gw,{from:[0,0,a],to:[i.x,0,a],color:"green"},"gridz"+a)),n.map(a=>he.jsx(gw,{from:[a,0,0],to:[a,0,i.z],color:"green"},"gridx"+a)),he.jsx(gw,{from:[0,0,0],to:[0,i.y/2,0],color:"blue"},"gridy"),he.jsx(EP,{args:[i.z,i.y/2],position:[0,i.y/4,i.z/2],rotation:[0,Math.PI/2,0],children:he.jsx("meshPhongMaterial",{attach:"material",color:"#a0e6e6",transparent:!0,opacity:.4})},"p1"),he.jsx(EP,{args:[i.x,i.y/2],position:[i.x/2,i.y/4,0],rotation:[0,0,0],children:he.jsx("meshPhongMaterial",{attach:"material",color:"#a0e6e6",transparent:!0,opacity:.4})},"p2"),he.jsx(GQ,{fields:s.world.fields,karol:s.karol}),he.jsx(CQ,{model:s.world}),he.jsx(zZ,{enablePan:!0,enableZoom:!0,enableRotate:!0}),he.jsx(YZ,{alignment:"bottom-right",margin:[50,50],children:he.jsx(tQ,{})})]},"all")]})})});var VQ=Object.defineProperty,WQ=Object.getOwnPropertyDescriptor,uf=(s,e,n,i)=>{for(var r=i>1?void 0:i?WQ(e,n):e,a=s.length-1,l;a>=0;a--)(l=s[a])&&(r=(i?l(e,n,r):l(r))||r);return i&&r&&VQ(e,n,r),r};function XQ(s,e,n){return li(Array(s).fill(Bi.empty).map(()=>Array(e).fill(Bi.empty).map(()=>Array(n).fill(Bi.empty))))}class Vh{fields=[];dimensions=new Q0(10,10,10);marker=new Map;constructor(e=10,n=10,i=10){dT(this),this.init(e,n,i)}init(e=10,n=10,i=10){this.dimensions=new Q0(e,n,i),this.fields=XQ(e,n,i),this.marker.clear()}reset(){this.init(this.dimensions.x,this.dimensions.y,this.dimensions.z)}getFieldByCoord(e){const{x:n,y:i,z:r}=e;return this.getField(n,i,r)}getField(e,n,i){return this.isValid({x:e,y:n,z:i})?this.fields[e][n][i]:Bi.wall}setFieldByCoord(e,n){const{x:i,y:r,z:a}=e;this.setField(i,r,a,n)}setField(e,n,i,r){if(!this.isValid({x:e,y:n,z:i}))throw Error("The position x: $x y: $y z: $z is not valid");this.fields[e][n][i]=r}asArray(){return BE(this.fields)}get markers(){return Array.from(this.marker.keys()).map(e=>{const{x:n,z:i}=xQ(e),r=this.getFirstFreeY(n,i);return{position:{x:n,y:r,z:i},color:this.marker.get(e)}})}getFirstFreeY(e,n){let i=0;for(;this.isValid({x:e,y:i,z:n})&&this.getField(e,i,n)!==Bi.empty&&this.getField(e,i,n)!==Bi.karol;)i++;return i}getBrickHeight(e,n){let i=0;for(;this.isValid({x:e,y:i,z:n})&&this.getField(e,i,n)>=Bi.brick_red;)i++;return i}isValid(e){return e.x>=0&&e.y>=0&&e.z>=0&&e.x<this.dimensions.x&&e.y<this.dimensions.y&&e.z<this.dimensions.z}setMarker(e,n){if(this.isValid({...e,y:0}))this.marker.set(mw(e),n);else throw Error("Die Marker Position ist ungültig")}getMarker(e){return this.marker.get(mw(e))}deleteMarker(e){if(this.isValid({...e,y:0})){if(!this.marker.delete(mw(e)))throw Error("Da ist keine Marke zum Entfernen")}else throw Error("Die Marker Position ist ungültig")}hasBrick(e,n,i){let r=0,a=!1;const l=Pz(e);for(;this.isValid({x:n,y:r,z:i})&&this.getField(n,r,i)>=Bi.brick_red;)this.getField(n,r,i)===l&&(a=!0),r++;return a}deserialize(e){this.dimensions=new Q0(e.dimensions.x,e.dimensions.y,e.dimensions.y),this.fields=li(e.fields),this.marker=li(new Map(e.marker))}serialize(){const e=BE(this.dimensions),n=BE(this.fields),i=Array.from(this.marker.entries());return{fields:n,dimensions:e,marker:i}}}uf([li],Vh.prototype,"fields",2);uf([li],Vh.prototype,"dimensions",2);uf([li],Vh.prototype,"marker",2);uf([Si],Vh.prototype,"init",1);uf([Si],Vh.prototype,"reset",1);uf([Si],Vh.prototype,"setFieldByCoord",1);uf([Si],Vh.prototype,"setField",1);uf([MS.struct],Vh.prototype,"markers",1);uf([Si],Vh.prototype,"setMarker",1);uf([Si],Vh.prototype,"deleteMarker",1);uf([Si],Vh.prototype,"deserialize",1);const mS={black:"#000",white:"#fff"},ly={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},uy={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},cy={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},hy={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},dy={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},gE={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},jQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function nm(s,...e){const n=new URL(`https://mui.com/production-error/?code=${s}`);return e.forEach(i=>n.searchParams.append("args[]",i)),`Minified MUI error #${s}; visit ${n} for the full message.`}const uN="$$material";function YQ(s){if(s.sheet)return s.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===s)return document.styleSheets[e]}function KQ(s){var e=document.createElement("style");return e.setAttribute("data-emotion",s.key),s.nonce!==void 0&&e.setAttribute("nonce",s.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var qQ=function(){function s(n){var i=this;this._insertTag=function(r){var a;i.tags.length===0?i.insertionPoint?a=i.insertionPoint.nextSibling:i.prepend?a=i.container.firstChild:a=i.before:a=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,a),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=s.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(KQ(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var a=YQ(r);try{a.insertRule(i,a.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},s}(),Ml="-ms-",AC="-moz-",ys="-webkit-",Fz="comm",cN="rule",hN="decl",JQ="@import",Hz="@keyframes",ZQ="@layer",QQ=Math.abs,IM=String.fromCharCode,eee=Object.assign;function tee(s,e){return Xa(s,0)^45?(((e<<2^Xa(s,0))<<2^Xa(s,1))<<2^Xa(s,2))<<2^Xa(s,3):0}function Gz(s){return s.trim()}function nee(s,e){return(s=e.exec(s))?s[0]:s}function Ts(s,e,n){return s.replace(e,n)}function _O(s,e){return s.indexOf(e)}function Xa(s,e){return s.charCodeAt(e)|0}function gS(s,e,n){return s.slice(e,n)}function lp(s){return s.length}function dN(s){return s.length}function P$(s,e){return e.push(s),s}function iee(s,e){return s.map(e).join("")}var OM=1,Qy=1,zz=0,tc=0,Co=0,yT="";function NM(s,e,n,i,r,a,l){return{value:s,root:e,parent:n,type:i,props:r,children:a,line:OM,column:Qy,length:l,return:""}}function _E(s,e){return eee(NM("",null,null,"",null,null,0),s,{length:-s.length},e)}function see(){return Co}function ree(){return Co=tc>0?Xa(yT,--tc):0,Qy--,Co===10&&(Qy=1,OM--),Co}function Hc(){return Co=tc<zz?Xa(yT,tc++):0,Qy++,Co===10&&(Qy=1,OM++),Co}function Ep(){return Xa(yT,tc)}function ux(){return tc}function QS(s,e){return gS(yT,s,e)}function _S(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Vz(s){return OM=Qy=1,zz=lp(yT=s),tc=0,[]}function Wz(s){return yT="",s}function cx(s){return Gz(QS(tc-1,vO(s===91?s+2:s===40?s+1:s)))}function oee(s){for(;(Co=Ep())&&Co<33;)Hc();return _S(s)>2||_S(Co)>3?"":" "}function aee(s,e){for(;--e&&Hc()&&!(Co<48||Co>102||Co>57&&Co<65||Co>70&&Co<97););return QS(s,ux()+(e<6&&Ep()==32&&Hc()==32))}function vO(s){for(;Hc();)switch(Co){case s:return tc;case 34:case 39:s!==34&&s!==39&&vO(Co);break;case 40:s===41&&vO(s);break;case 92:Hc();break}return tc}function lee(s,e){for(;Hc()&&s+Co!==57;)if(s+Co===84&&Ep()===47)break;return"/*"+QS(e,tc-1)+"*"+IM(s===47?s:Hc())}function uee(s){for(;!_S(Ep());)Hc();return QS(s,tc)}function cee(s){return Wz(hx("",null,null,null,[""],s=Vz(s),0,[0],s))}function hx(s,e,n,i,r,a,l,h,f){for(var p=0,v=0,T=l,y=0,S=0,$=0,M=1,C=1,E=1,w=0,I="",O=r,P=a,F=i,V=I;C;)switch($=w,w=Hc()){case 40:if($!=108&&Xa(V,T-1)==58){_O(V+=Ts(cx(w),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:V+=cx(w);break;case 9:case 10:case 13:case 32:V+=oee($);break;case 92:V+=aee(ux()-1,7);continue;case 47:switch(Ep()){case 42:case 47:P$(hee(lee(Hc(),ux()),e,n),f);break;default:V+="/"}break;case 123*M:h[p++]=lp(V)*E;case 125*M:case 59:case 0:switch(w){case 0:case 125:C=0;case 59+v:E==-1&&(V=Ts(V,/\f/g,"")),S>0&&lp(V)-T&&P$(S>32?$P(V+";",i,n,T-1):$P(Ts(V," ","")+";",i,n,T-2),f);break;case 59:V+=";";default:if(P$(F=AP(V,e,n,p,v,r,h,I,O=[],P=[],T),a),w===123)if(v===0)hx(V,e,F,F,O,a,T,h,P);else switch(y===99&&Xa(V,3)===110?100:y){case 100:case 108:case 109:case 115:hx(s,F,F,i&&P$(AP(s,F,F,0,0,r,h,I,r,O=[],T),P),r,P,T,h,i?O:P);break;default:hx(V,F,F,F,[""],P,0,h,P)}}p=v=S=0,M=E=1,I=V="",T=l;break;case 58:T=1+lp(V),S=$;default:if(M<1){if(w==123)--M;else if(w==125&&M++==0&&ree()==125)continue}switch(V+=IM(w),w*M){case 38:E=v>0?1:(V+="\f",-1);break;case 44:h[p++]=(lp(V)-1)*E,E=1;break;case 64:Ep()===45&&(V+=cx(Hc())),y=Ep(),v=T=lp(I=V+=uee(ux())),w++;break;case 45:$===45&&lp(V)==2&&(M=0)}}return a}function AP(s,e,n,i,r,a,l,h,f,p,v){for(var T=r-1,y=r===0?a:[""],S=dN(y),$=0,M=0,C=0;$<i;++$)for(var E=0,w=gS(s,T+1,T=QQ(M=l[$])),I=s;E<S;++E)(I=Gz(M>0?y[E]+" "+w:Ts(w,/&\f/g,y[E])))&&(f[C++]=I);return NM(s,e,n,r===0?cN:h,f,p,v)}function hee(s,e,n){return NM(s,e,n,Fz,IM(see()),gS(s,2,-2),0)}function $P(s,e,n,i){return NM(s,e,n,hN,gS(s,0,i),gS(s,i+1,-1),i)}function Ny(s,e){for(var n="",i=dN(s),r=0;r<i;r++)n+=e(s[r],r,s,e)||"";return n}function dee(s,e,n,i){switch(s.type){case ZQ:if(s.children.length)break;case JQ:case hN:return s.return=s.return||s.value;case Fz:return"";case Hz:return s.return=s.value+"{"+Ny(s.children,i)+"}";case cN:s.value=s.props.join(",")}return lp(n=Ny(s.children,i))?s.return=s.value+"{"+n+"}":""}function fee(s){var e=dN(s);return function(n,i,r,a){for(var l="",h=0;h<e;h++)l+=s[h](n,i,r,a)||"";return l}}function pee(s){return function(e){e.root||(e=e.return)&&s(e)}}function Xz(s){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=s(n)),e[n]}}var mee=function(e,n,i){for(var r=0,a=0;r=a,a=Ep(),r===38&&a===12&&(n[i]=1),!_S(a);)Hc();return QS(e,tc)},gee=function(e,n){var i=-1,r=44;do switch(_S(r)){case 0:r===38&&Ep()===12&&(n[i]=1),e[i]+=mee(tc-1,n,i);break;case 2:e[i]+=cx(r);break;case 4:if(r===44){e[++i]=Ep()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=IM(r)}while(r=Hc());return e},_ee=function(e,n){return Wz(gee(Vz(e),n))},xP=new WeakMap,vee=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!xP.get(i))&&!r){xP.set(e,!0);for(var a=[],l=_ee(n,a),h=i.props,f=0,p=0;f<l.length;f++)for(var v=0;v<h.length;v++,p++)e.props[p]=a[f]?l[f].replace(/&\f/g,h[v]):h[v]+" "+l[f]}}},bee=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function jz(s,e){switch(tee(s,e)){case 5103:return ys+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ys+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return ys+s+AC+s+Ml+s+s;case 6828:case 4268:return ys+s+Ml+s+s;case 6165:return ys+s+Ml+"flex-"+s+s;case 5187:return ys+s+Ts(s,/(\w+).+(:[^]+)/,ys+"box-$1$2"+Ml+"flex-$1$2")+s;case 5443:return ys+s+Ml+"flex-item-"+Ts(s,/flex-|-self/,"")+s;case 4675:return ys+s+Ml+"flex-line-pack"+Ts(s,/align-content|flex-|-self/,"")+s;case 5548:return ys+s+Ml+Ts(s,"shrink","negative")+s;case 5292:return ys+s+Ml+Ts(s,"basis","preferred-size")+s;case 6060:return ys+"box-"+Ts(s,"-grow","")+ys+s+Ml+Ts(s,"grow","positive")+s;case 4554:return ys+Ts(s,/([^-])(transform)/g,"$1"+ys+"$2")+s;case 6187:return Ts(Ts(Ts(s,/(zoom-|grab)/,ys+"$1"),/(image-set)/,ys+"$1"),s,"")+s;case 5495:case 3959:return Ts(s,/(image-set\([^]*)/,ys+"$1$`$1");case 4968:return Ts(Ts(s,/(.+:)(flex-)?(.*)/,ys+"box-pack:$3"+Ml+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ys+s+s;case 4095:case 3583:case 4068:case 2532:return Ts(s,/(.+)-inline(.+)/,ys+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lp(s)-1-e>6)switch(Xa(s,e+1)){case 109:if(Xa(s,e+4)!==45)break;case 102:return Ts(s,/(.+:)(.+)-([^]+)/,"$1"+ys+"$2-$3$1"+AC+(Xa(s,e+3)==108?"$3":"$2-$3"))+s;case 115:return~_O(s,"stretch")?jz(Ts(s,"stretch","fill-available"),e)+s:s}break;case 4949:if(Xa(s,e+1)!==115)break;case 6444:switch(Xa(s,lp(s)-3-(~_O(s,"!important")&&10))){case 107:return Ts(s,":",":"+ys)+s;case 101:return Ts(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ys+(Xa(s,14)===45?"inline-":"")+"box$3$1"+ys+"$2$3$1"+Ml+"$2box$3")+s}break;case 5936:switch(Xa(s,e+11)){case 114:return ys+s+Ml+Ts(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return ys+s+Ml+Ts(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return ys+s+Ml+Ts(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return ys+s+Ml+s+s}return s}var yee=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case hN:e.return=jz(e.value,e.length);break;case Hz:return Ny([_E(e,{value:Ts(e.value,"@","@"+ys)})],r);case cN:if(e.length)return iee(e.props,function(a){switch(nee(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ny([_E(e,{props:[Ts(a,/:(read-\w+)/,":"+AC+"$1")]})],r);case"::placeholder":return Ny([_E(e,{props:[Ts(a,/:(plac\w+)/,":"+ys+"input-$1")]}),_E(e,{props:[Ts(a,/:(plac\w+)/,":"+AC+"$1")]}),_E(e,{props:[Ts(a,/:(plac\w+)/,Ml+"input-$1")]})],r)}return""})}},Tee=[yee],Eee=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(M){var C=M.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var r=e.stylisPlugins||Tee,a={},l,h=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(M){for(var C=M.getAttribute("data-emotion").split(" "),E=1;E<C.length;E++)a[C[E]]=!0;h.push(M)});var f,p=[vee,bee];{var v,T=[dee,pee(function(M){v.insert(M)})],y=fee(p.concat(r,T)),S=function(C){return Ny(cee(C),y)};f=function(C,E,w,I){v=w,S(C?C+"{"+E.styles+"}":E.styles),I&&($.inserted[E.name]=!0)}}var $={key:n,sheet:new qQ({key:n,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return $.sheet.hydrate(h),$},_w={exports:{}},Cs={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP;function See(){if(CP)return Cs;CP=1;var s=typeof Symbol=="function"&&Symbol.for,e=s?Symbol.for("react.element"):60103,n=s?Symbol.for("react.portal"):60106,i=s?Symbol.for("react.fragment"):60107,r=s?Symbol.for("react.strict_mode"):60108,a=s?Symbol.for("react.profiler"):60114,l=s?Symbol.for("react.provider"):60109,h=s?Symbol.for("react.context"):60110,f=s?Symbol.for("react.async_mode"):60111,p=s?Symbol.for("react.concurrent_mode"):60111,v=s?Symbol.for("react.forward_ref"):60112,T=s?Symbol.for("react.suspense"):60113,y=s?Symbol.for("react.suspense_list"):60120,S=s?Symbol.for("react.memo"):60115,$=s?Symbol.for("react.lazy"):60116,M=s?Symbol.for("react.block"):60121,C=s?Symbol.for("react.fundamental"):60117,E=s?Symbol.for("react.responder"):60118,w=s?Symbol.for("react.scope"):60119;function I(P){if(typeof P=="object"&&P!==null){var F=P.$$typeof;switch(F){case e:switch(P=P.type,P){case f:case p:case i:case a:case r:case T:return P;default:switch(P=P&&P.$$typeof,P){case h:case v:case $:case S:case l:return P;default:return F}}case n:return F}}}function O(P){return I(P)===p}return Cs.AsyncMode=f,Cs.ConcurrentMode=p,Cs.ContextConsumer=h,Cs.ContextProvider=l,Cs.Element=e,Cs.ForwardRef=v,Cs.Fragment=i,Cs.Lazy=$,Cs.Memo=S,Cs.Portal=n,Cs.Profiler=a,Cs.StrictMode=r,Cs.Suspense=T,Cs.isAsyncMode=function(P){return O(P)||I(P)===f},Cs.isConcurrentMode=O,Cs.isContextConsumer=function(P){return I(P)===h},Cs.isContextProvider=function(P){return I(P)===l},Cs.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Cs.isForwardRef=function(P){return I(P)===v},Cs.isFragment=function(P){return I(P)===i},Cs.isLazy=function(P){return I(P)===$},Cs.isMemo=function(P){return I(P)===S},Cs.isPortal=function(P){return I(P)===n},Cs.isProfiler=function(P){return I(P)===a},Cs.isStrictMode=function(P){return I(P)===r},Cs.isSuspense=function(P){return I(P)===T},Cs.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===i||P===p||P===a||P===r||P===T||P===y||typeof P=="object"&&P!==null&&(P.$$typeof===$||P.$$typeof===S||P.$$typeof===l||P.$$typeof===h||P.$$typeof===v||P.$$typeof===C||P.$$typeof===E||P.$$typeof===w||P.$$typeof===M)},Cs.typeOf=I,Cs}var MP;function Aee(){return MP||(MP=1,_w.exports=See()),_w.exports}var vw,RP;function $ee(){if(RP)return vw;RP=1;var s=Aee(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[s.ForwardRef]=i,a[s.Memo]=r;function l($){return s.isMemo($)?r:a[$.$$typeof]||e}var h=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,T=Object.getPrototypeOf,y=Object.prototype;function S($,M,C){if(typeof M!="string"){if(y){var E=T(M);E&&E!==y&&S($,E,C)}var w=f(M);p&&(w=w.concat(p(M)));for(var I=l($),O=l(M),P=0;P<w.length;++P){var F=w[P];if(!n[F]&&!(C&&C[F])&&!(O&&O[F])&&!(I&&I[F])){var V=v(M,F);try{h($,F,V)}catch{}}}}return $}return vw=S,vw}$ee();var xee=!0;function Yz(s,e,n){var i="";return n.split(" ").forEach(function(r){s[r]!==void 0?e.push(s[r]+";"):r&&(i+=r+" ")}),i}var fN=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||xee===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},pN=function(e,n,i){fN(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+r:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function Cee(s){for(var e=0,n,i=0,r=s.length;r>=4;++i,r-=4)n=s.charCodeAt(i)&255|(s.charCodeAt(++i)&255)<<8|(s.charCodeAt(++i)&255)<<16|(s.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(s.charCodeAt(i+2)&255)<<16;case 2:e^=(s.charCodeAt(i+1)&255)<<8;case 1:e^=s.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Mee={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ree=/[A-Z]|^ms/g,wee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Kz=function(e){return e.charCodeAt(1)===45},wP=function(e){return e!=null&&typeof e!="boolean"},bw=Xz(function(s){return Kz(s)?s:s.replace(Ree,"-$&").toLowerCase()}),IP=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(wee,function(i,r,a){return up={name:r,styles:a,next:up},r})}return Mee[e]!==1&&!Kz(e)&&typeof n=="number"&&n!==0?n+"px":n};function vS(s,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return up={name:r.name,styles:r.styles,next:up},r.name;var a=n;if(a.styles!==void 0){var l=a.next;if(l!==void 0)for(;l!==void 0;)up={name:l.name,styles:l.styles,next:up},l=l.next;var h=a.styles+";";return h}return Iee(s,e,n)}case"function":{if(s!==void 0){var f=up,p=n(s);return up=f,vS(s,e,p)}break}}var v=n;if(e==null)return v;var T=e[v];return T!==void 0?T:v}function Iee(s,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=vS(s,e,n[r])+";";else for(var a in n){var l=n[a];if(typeof l!="object"){var h=l;e!=null&&e[h]!==void 0?i+=a+"{"+e[h]+"}":wP(h)&&(i+=bw(a)+":"+IP(a,h)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var f=0;f<l.length;f++)wP(l[f])&&(i+=bw(a)+":"+IP(a,l[f])+";");else{var p=vS(s,e,l);switch(a){case"animation":case"animationName":{i+=bw(a)+":"+p+";";break}default:i+=a+"{"+p+"}"}}}return i}var OP=/label:\s*([^\s;{]+)\s*(;|$)/g,up;function eA(s,e,n){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var i=!0,r="";up=void 0;var a=s[0];if(a==null||a.raw===void 0)i=!1,r+=vS(n,e,a);else{var l=a;r+=l[0]}for(var h=1;h<s.length;h++)if(r+=vS(n,e,s[h]),i){var f=a;r+=f[h]}OP.lastIndex=0;for(var p="",v;(v=OP.exec(r))!==null;)p+="-"+v[1];var T=Cee(r)+p;return{name:T,styles:r,next:up}}var Oee=function(e){return e()},qz=wI.useInsertionEffect?wI.useInsertionEffect:!1,Jz=qz||Oee,NP=qz||Q.useLayoutEffect,Zz=Q.createContext(typeof HTMLElement<"u"?Eee({key:"css"}):null);Zz.Provider;var mN=function(e){return Q.forwardRef(function(n,i){var r=Q.useContext(Zz);return e(n,r,i)})},LM=Q.createContext({}),gN={}.hasOwnProperty,bO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Nee=function(e,n){var i={};for(var r in n)gN.call(n,r)&&(i[r]=n[r]);return i[bO]=e,i},Lee=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return fN(n,i,r),Jz(function(){return pN(n,i,r)}),null},Dee=mN(function(s,e,n){var i=s.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=s[bO],a=[i],l="";typeof s.className=="string"?l=Yz(e.registered,a,s.className):s.className!=null&&(l=s.className+" ");var h=eA(a,void 0,Q.useContext(LM));l+=e.key+"-"+h.name;var f={};for(var p in s)gN.call(s,p)&&p!=="css"&&p!==bO&&(f[p]=s[p]);return f.className=l,n&&(f.ref=n),Q.createElement(Q.Fragment,null,Q.createElement(Lee,{cache:e,serialized:h,isStringTag:typeof r=="string"}),Q.createElement(r,f))}),Bee=Dee,LP=function(e,n){var i=arguments;if(n==null||!gN.call(n,"css"))return Q.createElement.apply(void 0,i);var r=i.length,a=new Array(r);a[0]=Bee,a[1]=Nee(e,n);for(var l=2;l<r;l++)a[l]=i[l];return Q.createElement.apply(null,a)};(function(s){var e;e||(e=s.JSX||(s.JSX={}))})(LP||(LP={}));var kee=mN(function(s,e){var n=s.styles,i=eA([n],void 0,Q.useContext(LM)),r=Q.useRef();return NP(function(){var a=e.key+"-global",l=new e.sheet.constructor({key:a,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),h=!1,f=document.querySelector('style[data-emotion="'+a+" "+i.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),f!==null&&(h=!0,f.setAttribute("data-emotion",a),l.hydrate([f])),r.current=[l,h],function(){l.flush()}},[e]),NP(function(){var a=r.current,l=a[0],h=a[1];if(h){a[1]=!1;return}if(i.next!==void 0&&pN(e,i.next,!0),l.tags.length){var f=l.tags[l.tags.length-1].nextElementSibling;l.before=f,l.flush()}e.insert("",i,l,!1)},[e,i.name]),null});function _N(){for(var s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];return eA(e)}function tA(){var s=_N.apply(void 0,arguments),e="animation-"+s.name;return{name:e,styles:"@keyframes "+e+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Pee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Uee=Xz(function(s){return Pee.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),Fee=Uee,Hee=function(e){return e!=="theme"},DP=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Fee:Hee},BP=function(e,n,i){var r;if(n){var a=n.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(l){return e.__emotion_forwardProp(l)&&a(l)}:a}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},Gee=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return fN(n,i,r),Jz(function(){return pN(n,i,r)}),null},zee=function s(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,a,l;n!==void 0&&(a=n.label,l=n.target);var h=BP(e,n,i),f=h||DP(r),p=!f("as");return function(){var v=arguments,T=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&T.push("label:"+a+";"),v[0]==null||v[0].raw===void 0)T.push.apply(T,v);else{var y=v[0];T.push(y[0]);for(var S=v.length,$=1;$<S;$++)T.push(v[$],y[$])}var M=mN(function(C,E,w){var I=p&&C.as||r,O="",P=[],F=C;if(C.theme==null){F={};for(var V in C)F[V]=C[V];F.theme=Q.useContext(LM)}typeof C.className=="string"?O=Yz(E.registered,P,C.className):C.className!=null&&(O=C.className+" ");var X=eA(T.concat(P),E.registered,F);O+=E.key+"-"+X.name,l!==void 0&&(O+=" "+l);var G=p&&h===void 0?DP(I):f,D={};for(var Z in C)p&&Z==="as"||G(Z)&&(D[Z]=C[Z]);return D.className=O,w&&(D.ref=w),Q.createElement(Q.Fragment,null,Q.createElement(Gee,{cache:E,serialized:X,isStringTag:typeof I=="string"}),Q.createElement(I,D))});return M.displayName=a!==void 0?a:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",M.defaultProps=e.defaultProps,M.__emotion_real=M,M.__emotion_base=r,M.__emotion_styles=T,M.__emotion_forwardProp=h,Object.defineProperty(M,"toString",{value:function(){return"."+l}}),M.withComponent=function(C,E){var w=s(C,ec({},n,E,{shouldForwardProp:BP(M,E,!0)}));return w.apply(void 0,T)},M}},Vee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],yO=zee.bind(null);Vee.forEach(function(s){yO[s]=yO(s)});var yw={exports:{}},Tw,kP;function Wee(){if(kP)return Tw;kP=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tw=s,Tw}var Ew,PP;function Xee(){if(PP)return Ew;PP=1;var s=Wee();function e(){}function n(){}return n.resetWarningCache=e,Ew=function(){function i(l,h,f,p,v,T){if(T!==s){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},Ew}var UP;function jee(){return UP||(UP=1,yw.exports=Xee()()),yw.exports}var Yee=jee();const An=Mp(Yee);function Kee(s){return s==null||Object.keys(s).length===0}function qee(s){const{styles:e,defaultTheme:n={}}=s,i=typeof e=="function"?r=>e(Kee(r)?n:r):e;return he.jsx(kee,{styles:i})}function Jee(s,e){return yO(s,e)}function Zee(s,e){Array.isArray(s.__emotion_styles)&&(s.__emotion_styles=e(s.__emotion_styles))}const FP=[];function Ng(s){return FP[0]=s,eA(FP)}var Sw={exports:{}},Fs={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP;function Qee(){if(HP)return Fs;HP=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),S=Symbol.for("react.client.reference");function $(M){if(typeof M=="object"&&M!==null){var C=M.$$typeof;switch(C){case s:switch(M=M.type,M){case n:case r:case i:case f:case p:case y:return M;default:switch(M=M&&M.$$typeof,M){case l:case h:case T:case v:return M;case a:return M;default:return C}}case e:return C}}}return Fs.ContextConsumer=a,Fs.ContextProvider=l,Fs.Element=s,Fs.ForwardRef=h,Fs.Fragment=n,Fs.Lazy=T,Fs.Memo=v,Fs.Portal=e,Fs.Profiler=r,Fs.StrictMode=i,Fs.Suspense=f,Fs.SuspenseList=p,Fs.isContextConsumer=function(M){return $(M)===a},Fs.isContextProvider=function(M){return $(M)===l},Fs.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===s},Fs.isForwardRef=function(M){return $(M)===h},Fs.isFragment=function(M){return $(M)===n},Fs.isLazy=function(M){return $(M)===T},Fs.isMemo=function(M){return $(M)===v},Fs.isPortal=function(M){return $(M)===e},Fs.isProfiler=function(M){return $(M)===r},Fs.isStrictMode=function(M){return $(M)===i},Fs.isSuspense=function(M){return $(M)===f},Fs.isSuspenseList=function(M){return $(M)===p},Fs.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===r||M===i||M===f||M===p||typeof M=="object"&&M!==null&&(M.$$typeof===T||M.$$typeof===v||M.$$typeof===l||M.$$typeof===a||M.$$typeof===h||M.$$typeof===S||M.getModuleId!==void 0)},Fs.typeOf=$,Fs}var GP;function ete(){return GP||(GP=1,Sw.exports=Qee()),Sw.exports}var Qz=ete();function dp(s){if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)}function e4(s){if(Q.isValidElement(s)||Qz.isValidElementType(s)||!dp(s))return s;const e={};return Object.keys(s).forEach(n=>{e[n]=e4(s[n])}),e}function wl(s,e,n={clone:!0}){const i=n.clone?{...s}:s;return dp(s)&&dp(e)&&Object.keys(e).forEach(r=>{Q.isValidElement(e[r])||Qz.isValidElementType(e[r])?i[r]=e[r]:dp(e[r])&&Object.prototype.hasOwnProperty.call(s,r)&&dp(s[r])?i[r]=wl(s[r],e[r],n):n.clone?i[r]=dp(e[r])?e4(e[r]):e[r]:i[r]=e[r]}),i}const tte=s=>{const e=Object.keys(s).map(n=>({key:n,val:s[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>({...n,[i.key]:i.val}),{})};function nte(s){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5,...r}=s,a=tte(e),l=Object.keys(a);function h(y){return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n})`}function f(y){return`@media (max-width:${(typeof e[y]=="number"?e[y]:y)-i/100}${n})`}function p(y,S){const $=l.indexOf(S);return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n}) and (max-width:${($!==-1&&typeof e[l[$]]=="number"?e[l[$]]:S)-i/100}${n})`}function v(y){return l.indexOf(y)+1<l.length?p(y,l[l.indexOf(y)+1]):h(y)}function T(y){const S=l.indexOf(y);return S===0?h(l[1]):S===l.length-1?f(l[S]):p(y,l[l.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:l,values:a,up:h,down:f,between:p,only:v,not:T,unit:n,...r}}function zP(s,e){if(!s.containerQueries)return e;const n=Object.keys(e).filter(i=>i.startsWith("@container")).sort((i,r)=>{const a=/min-width:\s*([0-9.]+)/;return+(i.match(a)?.[1]||0)-+(r.match(a)?.[1]||0)});return n.length?n.reduce((i,r)=>{const a=e[r];return delete i[r],i[r]=a,i},{...e}):e}function ite(s,e){return e==="@"||e.startsWith("@")&&(s.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function ste(s,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,i,r]=n,a=Number.isNaN(+i)?i||0:+i;return s.containerQueries(r).up(a)}function rte(s){const e=(a,l)=>a.replace("@media",l?`@container ${l}`:"@container");function n(a,l){a.up=(...h)=>e(s.breakpoints.up(...h),l),a.down=(...h)=>e(s.breakpoints.down(...h),l),a.between=(...h)=>e(s.breakpoints.between(...h),l),a.only=(...h)=>e(s.breakpoints.only(...h),l),a.not=(...h)=>{const f=e(s.breakpoints.not(...h),l);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const i={},r=a=>(n(i,a),i);return n(r),{...s,containerQueries:r}}const ote={borderRadius:4};function YE(s,e){return e?wl(s,e,{clone:!1}):s}const DM={xs:0,sm:600,md:900,lg:1200,xl:1536},VP={keys:["xs","sm","md","lg","xl"],up:s=>`@media (min-width:${DM[s]}px)`},ate={containerQueries:s=>({up:e=>{let n=typeof e=="number"?e:DM[e]||e;return typeof n=="number"&&(n=`${n}px`),s?`@container ${s} (min-width:${n})`:`@container (min-width:${n})`}})};function im(s,e,n){const i=s.theme||{};if(Array.isArray(e)){const a=i.breakpoints||VP;return e.reduce((l,h,f)=>(l[a.up(a.keys[f])]=n(e[f]),l),{})}if(typeof e=="object"){const a=i.breakpoints||VP;return Object.keys(e).reduce((l,h)=>{if(ite(a.keys,h)){const f=ste(i.containerQueries?i:ate,h);f&&(l[f]=n(e[h],h))}else if(Object.keys(a.values||DM).includes(h)){const f=a.up(h);l[f]=n(e[h],h)}else{const f=h;l[f]=e[f]}return l},{})}return n(e)}function lte(s={}){return s.keys?.reduce((n,i)=>{const r=s.up(i);return n[r]={},n},{})||{}}function WP(s,e){return s.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function En(s){if(typeof s!="string")throw new Error(nm(7));return s.charAt(0).toUpperCase()+s.slice(1)}function BM(s,e,n=!0){if(!e||typeof e!="string")return null;if(s&&s.vars&&n){const i=`vars.${e}`.split(".").reduce((r,a)=>r&&r[a]?r[a]:null,s);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,s)}function $C(s,e,n,i=n){let r;return typeof s=="function"?r=s(n):Array.isArray(s)?r=s[n]||i:r=BM(s,n)||i,e&&(r=e(r,i,s)),r}function fo(s){const{prop:e,cssProperty:n=s.prop,themeKey:i,transform:r}=s,a=l=>{if(l[e]==null)return null;const h=l[e],f=l.theme,p=BM(f,i)||{};return im(l,h,T=>{let y=$C(p,r,T);return T===y&&typeof T=="string"&&(y=$C(p,r,`${e}${T==="default"?"":En(T)}`,T)),n===!1?y:{[n]:y}})};return a.propTypes={},a.filterProps=[e],a}function ute(s){const e={};return n=>(e[n]===void 0&&(e[n]=s(n)),e[n])}const cte={m:"margin",p:"padding"},hte={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},XP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},dte=ute(s=>{if(s.length>2)if(XP[s])s=XP[s];else return[s];const[e,n]=s.split(""),i=cte[e],r=hte[n]||"";return Array.isArray(r)?r.map(a=>i+a):[i+r]}),vN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],bN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...vN,...bN];function nA(s,e,n,i){const r=BM(s,e,!0)??n;return typeof r=="number"||typeof r=="string"?a=>typeof a=="string"?a:typeof r=="string"?r.startsWith("var(")&&a===0?0:r.startsWith("var(")&&a===1?r:`calc(${a} * ${r})`:r*a:Array.isArray(r)?a=>{if(typeof a=="string")return a;const l=Math.abs(a),h=r[l];return a>=0?h:typeof h=="number"?-h:typeof h=="string"&&h.startsWith("var(")?`calc(-1 * ${h})`:`-${h}`}:typeof r=="function"?r:()=>{}}function yN(s){return nA(s,"spacing",8)}function iA(s,e){return typeof e=="string"||e==null?e:s(e)}function fte(s,e){return n=>s.reduce((i,r)=>(i[r]=iA(e,n),i),{})}function pte(s,e,n,i){if(!e.includes(n))return null;const r=dte(n),a=fte(r,i),l=s[n];return im(s,l,a)}function t4(s,e){const n=yN(s.theme);return Object.keys(s).map(i=>pte(s,e,i,n)).reduce(YE,{})}function Zr(s){return t4(s,vN)}Zr.propTypes={};Zr.filterProps=vN;function Qr(s){return t4(s,bN)}Qr.propTypes={};Qr.filterProps=bN;function n4(s=8,e=yN({spacing:s})){if(s.mui)return s;const n=(...i)=>(i.length===0?[1]:i).map(a=>{const l=e(a);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function kM(...s){const e=s.reduce((i,r)=>(r.filterProps.forEach(a=>{i[a]=r}),i),{}),n=i=>Object.keys(i).reduce((r,a)=>e[a]?YE(r,e[a](i)):r,{});return n.propTypes={},n.filterProps=s.reduce((i,r)=>i.concat(r.filterProps),[]),n}function $h(s){return typeof s!="number"?s:`${s}px solid`}function Wh(s,e){return fo({prop:s,themeKey:"borders",transform:e})}const mte=Wh("border",$h),gte=Wh("borderTop",$h),_te=Wh("borderRight",$h),vte=Wh("borderBottom",$h),bte=Wh("borderLeft",$h),yte=Wh("borderColor"),Tte=Wh("borderTopColor"),Ete=Wh("borderRightColor"),Ste=Wh("borderBottomColor"),Ate=Wh("borderLeftColor"),$te=Wh("outline",$h),xte=Wh("outlineColor"),PM=s=>{if(s.borderRadius!==void 0&&s.borderRadius!==null){const e=nA(s.theme,"shape.borderRadius",4),n=i=>({borderRadius:iA(e,i)});return im(s,s.borderRadius,n)}return null};PM.propTypes={};PM.filterProps=["borderRadius"];kM(mte,gte,_te,vte,bte,yte,Tte,Ete,Ste,Ate,PM,$te,xte);const UM=s=>{if(s.gap!==void 0&&s.gap!==null){const e=nA(s.theme,"spacing",8),n=i=>({gap:iA(e,i)});return im(s,s.gap,n)}return null};UM.propTypes={};UM.filterProps=["gap"];const FM=s=>{if(s.columnGap!==void 0&&s.columnGap!==null){const e=nA(s.theme,"spacing",8),n=i=>({columnGap:iA(e,i)});return im(s,s.columnGap,n)}return null};FM.propTypes={};FM.filterProps=["columnGap"];const HM=s=>{if(s.rowGap!==void 0&&s.rowGap!==null){const e=nA(s.theme,"spacing",8),n=i=>({rowGap:iA(e,i)});return im(s,s.rowGap,n)}return null};HM.propTypes={};HM.filterProps=["rowGap"];const Cte=fo({prop:"gridColumn"}),Mte=fo({prop:"gridRow"}),Rte=fo({prop:"gridAutoFlow"}),wte=fo({prop:"gridAutoColumns"}),Ite=fo({prop:"gridAutoRows"}),Ote=fo({prop:"gridTemplateColumns"}),Nte=fo({prop:"gridTemplateRows"}),Lte=fo({prop:"gridTemplateAreas"}),Dte=fo({prop:"gridArea"});kM(UM,FM,HM,Cte,Mte,Rte,wte,Ite,Ote,Nte,Lte,Dte);function Ly(s,e){return e==="grey"?e:s}const Bte=fo({prop:"color",themeKey:"palette",transform:Ly}),kte=fo({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ly}),Pte=fo({prop:"backgroundColor",themeKey:"palette",transform:Ly});kM(Bte,kte,Pte);function Uc(s){return s<=1&&s!==0?`${s*100}%`:s}const Ute=fo({prop:"width",transform:Uc}),TN=s=>{if(s.maxWidth!==void 0&&s.maxWidth!==null){const e=n=>{const i=s.theme?.breakpoints?.values?.[n]||DM[n];return i?s.theme?.breakpoints?.unit!=="px"?{maxWidth:`${i}${s.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Uc(n)}};return im(s,s.maxWidth,e)}return null};TN.filterProps=["maxWidth"];const Fte=fo({prop:"minWidth",transform:Uc}),Hte=fo({prop:"height",transform:Uc}),Gte=fo({prop:"maxHeight",transform:Uc}),zte=fo({prop:"minHeight",transform:Uc});fo({prop:"size",cssProperty:"width",transform:Uc});fo({prop:"size",cssProperty:"height",transform:Uc});const Vte=fo({prop:"boxSizing"});kM(Ute,TN,Fte,Hte,Gte,zte,Vte);const sA={border:{themeKey:"borders",transform:$h},borderTop:{themeKey:"borders",transform:$h},borderRight:{themeKey:"borders",transform:$h},borderBottom:{themeKey:"borders",transform:$h},borderLeft:{themeKey:"borders",transform:$h},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:$h},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:PM},color:{themeKey:"palette",transform:Ly},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ly},backgroundColor:{themeKey:"palette",transform:Ly},p:{style:Qr},pt:{style:Qr},pr:{style:Qr},pb:{style:Qr},pl:{style:Qr},px:{style:Qr},py:{style:Qr},padding:{style:Qr},paddingTop:{style:Qr},paddingRight:{style:Qr},paddingBottom:{style:Qr},paddingLeft:{style:Qr},paddingX:{style:Qr},paddingY:{style:Qr},paddingInline:{style:Qr},paddingInlineStart:{style:Qr},paddingInlineEnd:{style:Qr},paddingBlock:{style:Qr},paddingBlockStart:{style:Qr},paddingBlockEnd:{style:Qr},m:{style:Zr},mt:{style:Zr},mr:{style:Zr},mb:{style:Zr},ml:{style:Zr},mx:{style:Zr},my:{style:Zr},margin:{style:Zr},marginTop:{style:Zr},marginRight:{style:Zr},marginBottom:{style:Zr},marginLeft:{style:Zr},marginX:{style:Zr},marginY:{style:Zr},marginInline:{style:Zr},marginInlineStart:{style:Zr},marginInlineEnd:{style:Zr},marginBlock:{style:Zr},marginBlockStart:{style:Zr},marginBlockEnd:{style:Zr},displayPrint:{cssProperty:!1,transform:s=>({"@media print":{display:s}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:UM},rowGap:{style:HM},columnGap:{style:FM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uc},maxWidth:{style:TN},minWidth:{transform:Uc},height:{transform:Uc},maxHeight:{transform:Uc},minHeight:{transform:Uc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Wte(...s){const e=s.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return s.every(i=>n.size===Object.keys(i).length)}function Xte(s,e){return typeof s=="function"?s(e):s}function jte(){function s(n,i,r,a){const l={[n]:i,theme:r},h=a[n];if(!h)return{[n]:i};const{cssProperty:f=n,themeKey:p,transform:v,style:T}=h;if(i==null)return null;if(p==="typography"&&i==="inherit")return{[n]:i};const y=BM(r,p)||{};return T?T(l):im(l,i,$=>{let M=$C(y,v,$);return $===M&&typeof $=="string"&&(M=$C(y,v,`${n}${$==="default"?"":En($)}`,$)),f===!1?M:{[f]:M}})}function e(n){const{sx:i,theme:r={},nested:a}=n||{};if(!i)return null;const l=r.unstable_sxConfig??sA;function h(f){let p=f;if(typeof f=="function")p=f(r);else if(typeof f!="object")return f;if(!p)return null;const v=lte(r.breakpoints),T=Object.keys(v);let y=v;return Object.keys(p).forEach(S=>{const $=Xte(p[S],r);if($!=null)if(typeof $=="object")if(l[S])y=YE(y,s(S,$,r,l));else{const M=im({theme:r},$,C=>({[S]:C}));Wte(M,$)?y[S]=e({sx:$,theme:r,nested:!0}):y=YE(y,M)}else y=YE(y,s(S,$,r,l))}),!a&&r.modularCssLayers?{"@layer sx":zP(r,WP(T,y))}:zP(r,WP(T,y))}return Array.isArray(i)?i.map(h):h(i)}return e}const eT=jte();eT.filterProps=["sx"];function Yte(s,e){const n=this;if(n.vars){if(!n.colorSchemes?.[s]||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(s);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===s?e:{}}function GM(s={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:a={},...l}=s,h=nte(n),f=n4(r);let p=wl({breakpoints:h,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:f,shape:{...ote,...a}},l);return p=rte(p),p.applyStyles=Yte,p=e.reduce((v,T)=>wl(v,T),p),p.unstable_sxConfig={...sA,...l?.unstable_sxConfig},p.unstable_sx=function(T){return eT({sx:T,theme:this})},p}function Kte(s){return Object.keys(s).length===0}function qte(s=null){const e=Q.useContext(LM);return!e||Kte(e)?s:e}const Jte=GM();function zM(s=Jte){return qte(s)}function Aw(s){const e=Ng(s);return s!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):s}function Zte({styles:s,themeId:e,defaultTheme:n={}}){const i=zM(n),r=e&&i[e]||i;let a=typeof s=="function"?s(r):s;return r.modularCssLayers&&(Array.isArray(a)?a=a.map(l=>Aw(typeof l=="function"?l(r):l)):a=Aw(a)),he.jsx(qee,{styles:a})}const Qte=s=>{const e={systemProps:{},otherProps:{}},n=s?.theme?.unstable_sxConfig??sA;return Object.keys(s).forEach(i=>{n[i]?e.systemProps[i]=s[i]:e.otherProps[i]=s[i]}),e};function i4(s){const{sx:e,...n}=s,{systemProps:i,otherProps:r}=Qte(n);let a;return Array.isArray(e)?a=[i,...e]:typeof e=="function"?a=(...l)=>{const h=e(...l);return dp(h)?{...i,...h}:i}:a={...i,...e},{...r,sx:a}}const jP=s=>s,ene=()=>{let s=jP;return{configure(e){s=e},generate(e){return s(e)},reset(){s=jP}}},tne=ene();function s4(s){var e,n,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(e=0;e<r;e++)s[e]&&(n=s4(s[e]))&&(i&&(i+=" "),i+=n)}else for(n in s)s[n]&&(i&&(i+=" "),i+=n);return i}function $n(){for(var s,e,n=0,i="",r=arguments.length;n<r;n++)(s=arguments[n])&&(e=s4(s))&&(i&&(i+=" "),i+=e);return i}const nne={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Vi(s,e,n="Mui"){const i=nne[e];return i?`${n}-${i}`:`${tne.generate(s)}-${e}`}function Mi(s,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=Vi(s,r,n)}),i}function r4(s){const{variants:e,...n}=s,i={variants:e,style:Ng(n),isProcessed:!0};return i.style===n||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=Ng(r.style))}),i}const ine=GM();function $w(s){return s!=="ownerState"&&s!=="theme"&&s!=="sx"&&s!=="as"}function Lv(s,e){return e&&s&&typeof s=="object"&&s.styles&&!s.styles.startsWith("@layer")&&(s.styles=`@layer ${e}{${String(s.styles)}}`),s}function sne(s){return s?(e,n)=>n[s]:null}function rne(s,e,n){s.theme=ane(s.theme)?n:s.theme[e]||s.theme}function dx(s,e,n){const i=typeof e=="function"?e(s):e;if(Array.isArray(i))return i.flatMap(r=>dx(s,r,n));if(Array.isArray(i?.variants)){let r;if(i.isProcessed)r=n?Lv(i.style,n):i.style;else{const{variants:a,...l}=i;r=n?Lv(Ng(l),n):l}return o4(s,i.variants,[r],n)}return i?.isProcessed?n?Lv(Ng(i.style),n):i.style:n?Lv(Ng(i),n):i}function o4(s,e,n=[],i=void 0){let r;e:for(let a=0;a<e.length;a+=1){const l=e[a];if(typeof l.props=="function"){if(r??={...s,...s.ownerState,ownerState:s.ownerState},!l.props(r))continue}else for(const h in l.props)if(s[h]!==l.props[h]&&s.ownerState?.[h]!==l.props[h])continue e;typeof l.style=="function"?(r??={...s,...s.ownerState,ownerState:s.ownerState},n.push(i?Lv(Ng(l.style(r)),i):l.style(r))):n.push(i?Lv(Ng(l.style),i):l.style)}return n}function a4(s={}){const{themeId:e,defaultTheme:n=ine,rootShouldForwardProp:i=$w,slotShouldForwardProp:r=$w}=s;function a(h){rne(h,e,n)}return(h,f={})=>{Zee(h,F=>F.filter(V=>V!==eT));const{name:p,slot:v,skipVariantsResolver:T,skipSx:y,overridesResolver:S=sne(une(v)),...$}=f,M=p&&p.startsWith("Mui")||v?"components":"custom",C=T!==void 0?T:v&&v!=="Root"&&v!=="root"||!1,E=y||!1;let w=$w;v==="Root"||v==="root"?w=i:v?w=r:lne(h)&&(w=void 0);const I=Jee(h,{shouldForwardProp:w,label:one(),...$}),O=F=>{if(F.__emotion_real===F)return F;if(typeof F=="function")return function(X){return dx(X,F,X.theme.modularCssLayers?M:void 0)};if(dp(F)){const V=r4(F);return function(G){return V.variants?dx(G,V,G.theme.modularCssLayers?M:void 0):G.theme.modularCssLayers?Lv(V.style,M):V.style}}return F},P=(...F)=>{const V=[],X=F.map(O),G=[];if(V.push(a),p&&S&&G.push(function(j){const ee=j.theme.components?.[p]?.styleOverrides;if(!ee)return null;const z={};for(const te in ee)z[te]=dx(j,ee[te],j.theme.modularCssLayers?"theme":void 0);return S(j,z)}),p&&!C&&G.push(function(j){const ee=j.theme?.components?.[p]?.variants;return ee?o4(j,ee,[],j.theme.modularCssLayers?"theme":void 0):null}),E||G.push(eT),Array.isArray(X[0])){const Y=X.shift(),j=new Array(V.length).fill(""),ne=new Array(G.length).fill("");let ee;ee=[...j,...Y,...ne],ee.raw=[...j,...Y.raw,...ne],V.unshift(ee)}const D=[...V,...X,...G],Z=I(...D);return h.muiName&&(Z.muiName=h.muiName),Z};return I.withConfig&&(P.withConfig=I.withConfig),P}}function one(s,e){return void 0}function ane(s){for(const e in s)return!1;return!0}function lne(s){return typeof s=="string"&&s.charCodeAt(0)>96}function une(s){return s&&s.charAt(0).toLowerCase()+s.slice(1)}const cne=a4();function bS(s,e,n=!1){const i={...e};for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)){const a=r;if(a==="components"||a==="slots")i[a]={...s[a],...i[a]};else if(a==="componentsProps"||a==="slotProps"){const l=s[a],h=e[a];if(!h)i[a]=l||{};else if(!l)i[a]=h;else{i[a]={...h};for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const p=f;i[a][p]=bS(l[p],h[p],n)}}}else a==="className"&&n&&e.className?i.className=$n(s?.className,e?.className):a==="style"&&n&&e.style?i.style={...s?.style,...e?.style}:i[a]===void 0&&(i[a]=s[a])}return i}function hne(s){const{theme:e,name:n,props:i}=s;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?i:bS(e.components[n].defaultProps,i)}function dne({props:s,name:e,defaultTheme:n,themeId:i}){let r=zM(n);return i&&(r=r[i]||r),hne({theme:r,name:e,props:s})}const Ph=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function vy(s,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(s,n))}function EN(s,e=0,n=1){return vy(s,e,n)}function fne(s){s=s.slice(1);const e=new RegExp(`.{1,${s.length>=6?2:1}}`,"g");let n=s.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Ug(s){if(s.type)return s;if(s.charAt(0)==="#")return Ug(fne(s));const e=s.indexOf("("),n=s.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(nm(9,s));let i=s.substring(e+1,s.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(nm(10,r))}else i=i.split(",");return i=i.map(a=>parseFloat(a)),{type:n,values:i,colorSpace:r}}const pne=s=>{const e=Ug(s);return e.values.slice(0,3).map((n,i)=>e.type.includes("hsl")&&i!==0?`${n}%`:n).join(" ")},RE=(s,e)=>{try{return pne(s)}catch{return s}};function VM(s){const{type:e,colorSpace:n}=s;let{values:i}=s;return e.includes("rgb")?i=i.map((r,a)=>a<3?parseInt(r,10):r):e.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.includes("color")?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function l4(s){s=Ug(s);const{values:e}=s,n=e[0],i=e[1]/100,r=e[2]/100,a=i*Math.min(r,1-r),l=(p,v=(p+n/30)%12)=>r-a*Math.max(Math.min(v-3,9-v,1),-1);let h="rgb";const f=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return s.type==="hsla"&&(h+="a",f.push(e[3])),VM({type:h,values:f})}function TO(s){s=Ug(s);let e=s.type==="hsl"||s.type==="hsla"?Ug(l4(s)).values:s.values;return e=e.map(n=>(s.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function mne(s,e){const n=TO(s),i=TO(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function ya(s,e){return s=Ug(s),e=EN(e),(s.type==="rgb"||s.type==="hsl")&&(s.type+="a"),s.type==="color"?s.values[3]=`/${e}`:s.values[3]=e,VM(s)}function U$(s,e,n){try{return ya(s,e)}catch{return s}}function yS(s,e){if(s=Ug(s),e=EN(e),s.type.includes("hsl"))s.values[2]*=1-e;else if(s.type.includes("rgb")||s.type.includes("color"))for(let n=0;n<3;n+=1)s.values[n]*=1-e;return VM(s)}function js(s,e,n){try{return yS(s,e)}catch{return s}}function TS(s,e){if(s=Ug(s),e=EN(e),s.type.includes("hsl"))s.values[2]+=(100-s.values[2])*e;else if(s.type.includes("rgb"))for(let n=0;n<3;n+=1)s.values[n]+=(255-s.values[n])*e;else if(s.type.includes("color"))for(let n=0;n<3;n+=1)s.values[n]+=(1-s.values[n])*e;return VM(s)}function Ys(s,e,n){try{return TS(s,e)}catch{return s}}function gne(s,e=.15){return TO(s)>.5?yS(s,e):TS(s,e)}function F$(s,e,n){try{return gne(s,e)}catch{return s}}const _ne=Q.createContext(),TT=()=>Q.useContext(_ne)??!1,vne=Q.createContext(void 0);function bne(s){const{theme:e,name:n,props:i}=s;if(!e||!e.components||!e.components[n])return i;const r=e.components[n];return r.defaultProps?bS(r.defaultProps,i,e.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?bS(r,i,e.components.mergeClassNameAndStyle):i}function yne({props:s,name:e}){const n=Q.useContext(vne);return bne({props:s,name:e,theme:{components:n}})}let YP=0;function Tne(s){const[e,n]=Q.useState(s),i=s||e;return Q.useEffect(()=>{e==null&&(YP+=1,n(`mui-${YP}`))},[e]),i}const Ene={...wI},KP=Ene.useId;function ET(s){if(KP!==void 0){const e=KP();return s??e}return Tne(s)}const qP={theme:void 0};function Sne(s){let e,n;return function(r){let a=e;return(a===void 0||r.theme!==n)&&(qP.theme=r.theme,a=r4(s(qP)),e=a,n=r.theme),a}}function Ane(s=""){function e(...i){if(!i.length)return"";const r=i[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${s?`${s}-`:""}${r}${e(...i.slice(1))})`:`, ${r}`}return(i,...r)=>`var(--${s?`${s}-`:""}${i}${e(...r)})`}const JP=(s,e,n,i=[])=>{let r=s;e.forEach((a,l)=>{l===e.length-1?Array.isArray(r)?r[Number(a)]=n:r&&typeof r=="object"&&(r[a]=n):r&&typeof r=="object"&&(r[a]||(r[a]=i.includes(a)?[]:{}),r=r[a])})},$ne=(s,e,n)=>{function i(r,a=[],l=[]){Object.entries(r).forEach(([h,f])=>{(!n||n&&!n([...a,h]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?i(f,[...a,h],Array.isArray(f)?[...l,h]:l):e([...a,h],f,l))})}i(s)},xne=(s,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>s.includes(i))||s[s.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function xw(s,e){const{prefix:n,shouldSkipGeneratingVar:i}=e||{},r={},a={},l={};return $ne(s,(h,f,p)=>{if((typeof f=="string"||typeof f=="number")&&(!i||!i(h,f))){const v=`--${n?`${n}-`:""}${h.join("-")}`,T=xne(h,f);Object.assign(r,{[v]:T}),JP(a,h,`var(${v})`,p),JP(l,h,`var(${v}, ${T})`,p)}},h=>h[0]==="vars"),{css:r,vars:a,varsWithDefaults:l}}function Cne(s,e={}){const{getSelector:n=C,disableCssColorScheme:i,colorSchemeSelector:r}=e,{colorSchemes:a={},components:l,defaultColorScheme:h="light",...f}=s,{vars:p,css:v,varsWithDefaults:T}=xw(f,e);let y=T;const S={},{[h]:$,...M}=a;if(Object.entries(M||{}).forEach(([I,O])=>{const{vars:P,css:F,varsWithDefaults:V}=xw(O,e);y=wl(y,V),S[I]={css:F,vars:P}}),$){const{css:I,vars:O,varsWithDefaults:P}=xw($,e);y=wl(y,P),S[h]={css:I,vars:O}}function C(I,O){let P=r;if(r==="class"&&(P=".%s"),r==="data"&&(P="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(P=`[${r}="%s"]`),I){if(P==="media")return s.defaultColorScheme===I?":root":{[`@media (prefers-color-scheme: ${a[I]?.palette?.mode||I})`]:{":root":O}};if(P)return s.defaultColorScheme===I?`:root, ${P.replace("%s",String(I))}`:P.replace("%s",String(I))}return":root"}return{vars:y,generateThemeVars:()=>{let I={...p};return Object.entries(S).forEach(([,{vars:O}])=>{I=wl(I,O)}),I},generateStyleSheets:()=>{const I=[],O=s.defaultColorScheme||"light";function P(X,G){Object.keys(G).length&&I.push(typeof X=="string"?{[X]:{...G}}:X)}P(n(void 0,{...v}),v);const{[O]:F,...V}=S;if(F){const{css:X}=F,G=a[O]?.palette?.mode,D=!i&&G?{colorScheme:G,...X}:{...X};P(n(O,{...D}),D)}return Object.entries(V).forEach(([X,{css:G}])=>{const D=a[X]?.palette?.mode,Z=!i&&D?{colorScheme:D,...G}:{...G};P(n(X,{...Z}),Z)}),I}}}function Mne(s){return function(n){return s==="media"?`@media (prefers-color-scheme: ${n})`:s?s.startsWith("data-")&&!s.includes("%s")?`[${s}="${n}"] &`:s==="class"?`.${n} &`:s==="data"?`[data-${n}] &`:`${s.replace("%s",n)} &`:"&"}}function Wi(s,e,n=void 0){const i={};for(const r in s){const a=s[r];let l="",h=!0;for(let f=0;f<a.length;f+=1){const p=a[f];p&&(l+=(h===!0?"":" ")+e(p),h=!1,n&&n[p]&&(l+=" "+n[p]))}i[r]=l}return i}function fx(s,e){return Q.isValidElement(s)&&e.indexOf(s.type.muiName??s.type?._payload?.value?.muiName)!==-1}const Rne=(s,e)=>s.filter(n=>e.includes(n)),ST=(s,e,n)=>{const i=s.keys[0];Array.isArray(e)?e.forEach((r,a)=>{n((l,h)=>{a<=s.keys.length-1&&(a===0?Object.assign(l,h):l[s.up(s.keys[a])]=h)},r)}):e&&typeof e=="object"?(Object.keys(e).length>s.keys.length?s.keys:Rne(s.keys,Object.keys(e))).forEach(a=>{if(s.keys.includes(a)){const l=e[a];l!==void 0&&n((h,f)=>{i===a?Object.assign(h,f):h[s.up(a)]=f},l)}}):(typeof e=="number"||typeof e=="string")&&n((r,a)=>{Object.assign(r,a)},e)};function xC(s){return`--Grid-${s}Spacing`}function WM(s){return`--Grid-parent-${s}Spacing`}const ZP="--Grid-columns",Dy="--Grid-parent-columns",wne=({theme:s,ownerState:e})=>{const n={};return ST(s.breakpoints,e.size,(i,r)=>{let a={};r==="grow"&&(a={flexBasis:0,flexGrow:1,maxWidth:"100%"}),r==="auto"&&(a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof r=="number"&&(a={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${Dy}) - (var(${Dy}) - ${r}) * (var(${WM("column")}) / var(${Dy})))`}),i(n,a)}),n},Ine=({theme:s,ownerState:e})=>{const n={};return ST(s.breakpoints,e.offset,(i,r)=>{let a={};r==="auto"&&(a={marginLeft:"auto"}),typeof r=="number"&&(a={marginLeft:r===0?"0px":`calc(100% * ${r} / var(${Dy}) + var(${WM("column")}) * ${r} / var(${Dy}))`}),i(n,a)}),n},One=({theme:s,ownerState:e})=>{if(!e.container)return{};const n={[ZP]:12};return ST(s.breakpoints,e.columns,(i,r)=>{const a=r??12;i(n,{[ZP]:a,"> *":{[Dy]:a}})}),n},Nne=({theme:s,ownerState:e})=>{if(!e.container)return{};const n={};return ST(s.breakpoints,e.rowSpacing,(i,r)=>{const a=typeof r=="string"?r:s.spacing?.(r);i(n,{[xC("row")]:a,"> *":{[WM("row")]:a}})}),n},Lne=({theme:s,ownerState:e})=>{if(!e.container)return{};const n={};return ST(s.breakpoints,e.columnSpacing,(i,r)=>{const a=typeof r=="string"?r:s.spacing?.(r);i(n,{[xC("column")]:a,"> *":{[WM("column")]:a}})}),n},Dne=({theme:s,ownerState:e})=>{if(!e.container)return{};const n={};return ST(s.breakpoints,e.direction,(i,r)=>{i(n,{flexDirection:r})}),n},Bne=({ownerState:s})=>({minWidth:0,boxSizing:"border-box",...s.container&&{display:"flex",flexWrap:"wrap",...s.wrap&&s.wrap!=="wrap"&&{flexWrap:s.wrap},gap:`var(${xC("row")}) var(${xC("column")})`}}),kne=s=>{const e=[];return Object.entries(s).forEach(([n,i])=>{i!==!1&&i!==void 0&&e.push(`grid-${n}-${String(i)}`)}),e},Pne=(s,e="xs")=>{function n(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(n(s))return[`spacing-${e}-${String(s)}`];if(typeof s=="object"&&!Array.isArray(s)){const i=[];return Object.entries(s).forEach(([r,a])=>{n(a)&&i.push(`spacing-${r}-${String(a)}`)}),i}return[]},Une=s=>s===void 0?[]:typeof s=="object"?Object.entries(s).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(s)}`];function Fne(s,e){s.item!==void 0&&delete s.item,s.zeroMinWidth!==void 0&&delete s.zeroMinWidth,e.keys.forEach(n=>{s[n]!==void 0&&delete s[n]})}const Hne=GM(),Gne=cne("div",{name:"MuiGrid",slot:"Root"});function zne(s){return dne({props:s,name:"MuiGrid",defaultTheme:Hne})}function Vne(s={}){const{createStyledComponent:e=Gne,useThemeProps:n=zne,useTheme:i=zM,componentName:r="MuiGrid"}=s,a=(p,v)=>{const{container:T,direction:y,spacing:S,wrap:$,size:M}=p,C={root:["root",T&&"container",$!=="wrap"&&`wrap-xs-${String($)}`,...Une(y),...kne(M),...T?Pne(S,v.breakpoints.keys[0]):[]]};return Wi(C,E=>Vi(r,E),{})};function l(p,v,T=()=>!0){const y={};return p===null||(Array.isArray(p)?p.forEach((S,$)=>{S!==null&&T(S)&&v.keys[$]&&(y[v.keys[$]]=S)}):typeof p=="object"?Object.keys(p).forEach(S=>{const $=p[S];$!=null&&T($)&&(y[S]=$)}):y[v.keys[0]]=p),y}const h=e(One,Lne,Nne,wne,Dne,Bne,Ine),f=Q.forwardRef(function(v,T){const y=i(),S=n(v),$=i4(S);Fne($,y.breakpoints);const{className:M,children:C,columns:E=12,container:w=!1,component:I="div",direction:O="row",wrap:P="wrap",size:F={},offset:V={},spacing:X=0,rowSpacing:G=X,columnSpacing:D=X,unstable_level:Z=0,...Y}=$,j=l(F,y.breakpoints,fe=>fe!==!1),ne=l(V,y.breakpoints),ee=v.columns??(Z?void 0:E),z=v.spacing??(Z?void 0:X),te=v.rowSpacing??v.spacing??(Z?void 0:G),ce=v.columnSpacing??v.spacing??(Z?void 0:D),pe={...$,level:Z,columns:ee,container:w,direction:O,wrap:P,spacing:z,rowSpacing:te,columnSpacing:ce,size:j,offset:ne},K=a(pe,y);return he.jsx(h,{ref:T,as:I,ownerState:pe,className:$n(K.root,M),...Y,children:Q.Children.map(C,fe=>Q.isValidElement(fe)&&fx(fe,["Grid"])&&w&&fe.props.container?Q.cloneElement(fe,{unstable_level:fe.props?.unstable_level??Z+1}):fe)})});return f.muiName="Grid",f}function u4(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:mS.white,default:mS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Wne=u4();function c4(){return{text:{primary:mS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:mS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const QP=c4();function e3(s,e,n,i){const r=i.light||i,a=i.dark||i*1.5;s[e]||(s.hasOwnProperty(n)?s[e]=s[n]:e==="light"?s.light=TS(s.main,r):e==="dark"&&(s.dark=yS(s.main,a)))}function Xne(s="light"){return s==="dark"?{main:cy[200],light:cy[50],dark:cy[400]}:{main:cy[700],light:cy[400],dark:cy[800]}}function jne(s="light"){return s==="dark"?{main:uy[200],light:uy[50],dark:uy[400]}:{main:uy[500],light:uy[300],dark:uy[700]}}function Yne(s="light"){return s==="dark"?{main:ly[500],light:ly[300],dark:ly[700]}:{main:ly[700],light:ly[400],dark:ly[800]}}function Kne(s="light"){return s==="dark"?{main:hy[400],light:hy[300],dark:hy[700]}:{main:hy[700],light:hy[500],dark:hy[900]}}function qne(s="light"){return s==="dark"?{main:dy[400],light:dy[300],dark:dy[700]}:{main:dy[800],light:dy[500],dark:dy[900]}}function Jne(s="light"){return s==="dark"?{main:gE[400],light:gE[300],dark:gE[700]}:{main:"#ed6c02",light:gE[500],dark:gE[900]}}function SN(s){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2,...r}=s,a=s.primary||Xne(e),l=s.secondary||jne(e),h=s.error||Yne(e),f=s.info||Kne(e),p=s.success||qne(e),v=s.warning||Jne(e);function T(M){return mne(M,QP.text.primary)>=n?QP.text.primary:Wne.text.primary}const y=({color:M,name:C,mainShade:E=500,lightShade:w=300,darkShade:I=700})=>{if(M={...M},!M.main&&M[E]&&(M.main=M[E]),!M.hasOwnProperty("main"))throw new Error(nm(11,C?` (${C})`:"",E));if(typeof M.main!="string")throw new Error(nm(12,C?` (${C})`:"",JSON.stringify(M.main)));return e3(M,"light",w,i),e3(M,"dark",I,i),M.contrastText||(M.contrastText=T(M.main)),M};let S;return e==="light"?S=u4():e==="dark"&&(S=c4()),wl({common:{...mS},mode:e,primary:y({color:a,name:"primary"}),secondary:y({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:h,name:"error"}),warning:y({color:v,name:"warning"}),info:y({color:f,name:"info"}),success:y({color:p,name:"success"}),grey:jQ,contrastThreshold:n,getContrastText:T,augmentColor:y,tonalOffset:i,...S},r)}function Zne(s){const e={};return Object.entries(s).forEach(i=>{const[r,a]=i;typeof a=="object"&&(e[r]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function Qne(s,e){return{toolbar:{minHeight:56,[s.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[s.up("sm")]:{minHeight:64}},...e}}function eie(s){return Math.round(s*1e5)/1e5}const t3={textTransform:"uppercase"},n3='"Roboto", "Helvetica", "Arial", sans-serif';function tie(s,e){const{fontFamily:n=n3,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:a=400,fontWeightMedium:l=500,fontWeightBold:h=700,htmlFontSize:f=16,allVariants:p,pxToRem:v,...T}=typeof e=="function"?e(s):e,y=i/14,S=v||(C=>`${C/f*y}rem`),$=(C,E,w,I,O)=>({fontFamily:n,fontWeight:C,fontSize:S(E),lineHeight:w,...n===n3?{letterSpacing:`${eie(I/E)}em`}:{},...O,...p}),M={h1:$(r,96,1.167,-1.5),h2:$(r,60,1.2,-.5),h3:$(a,48,1.167,0),h4:$(a,34,1.235,.25),h5:$(a,24,1.334,0),h6:$(l,20,1.6,.15),subtitle1:$(a,16,1.75,.15),subtitle2:$(l,14,1.57,.1),body1:$(a,16,1.5,.15),body2:$(a,14,1.43,.15),button:$(l,14,1.75,.4,t3),caption:$(a,12,1.66,.4),overline:$(a,12,2.66,1,t3),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return wl({htmlFontSize:f,pxToRem:S,fontFamily:n,fontSize:i,fontWeightLight:r,fontWeightRegular:a,fontWeightMedium:l,fontWeightBold:h,...M},T,{clone:!1})}const nie=.2,iie=.14,sie=.12;function Cr(...s){return[`${s[0]}px ${s[1]}px ${s[2]}px ${s[3]}px rgba(0,0,0,${nie})`,`${s[4]}px ${s[5]}px ${s[6]}px ${s[7]}px rgba(0,0,0,${iie})`,`${s[8]}px ${s[9]}px ${s[10]}px ${s[11]}px rgba(0,0,0,${sie})`].join(",")}const rie=["none",Cr(0,2,1,-1,0,1,1,0,0,1,3,0),Cr(0,3,1,-2,0,2,2,0,0,1,5,0),Cr(0,3,3,-2,0,3,4,0,0,1,8,0),Cr(0,2,4,-1,0,4,5,0,0,1,10,0),Cr(0,3,5,-1,0,5,8,0,0,1,14,0),Cr(0,3,5,-1,0,6,10,0,0,1,18,0),Cr(0,4,5,-2,0,7,10,1,0,2,16,1),Cr(0,5,5,-3,0,8,10,1,0,3,14,2),Cr(0,5,6,-3,0,9,12,1,0,3,16,2),Cr(0,6,6,-3,0,10,14,1,0,4,18,3),Cr(0,6,7,-4,0,11,15,1,0,4,20,3),Cr(0,7,8,-4,0,12,17,2,0,5,22,4),Cr(0,7,8,-4,0,13,19,2,0,5,24,4),Cr(0,7,9,-4,0,14,21,2,0,5,26,4),Cr(0,8,9,-5,0,15,22,2,0,6,28,5),Cr(0,8,10,-5,0,16,24,2,0,6,30,5),Cr(0,8,11,-5,0,17,26,2,0,6,32,5),Cr(0,9,11,-5,0,18,28,2,0,7,34,6),Cr(0,9,12,-6,0,19,29,2,0,7,36,6),Cr(0,10,13,-6,0,20,31,3,0,8,38,7),Cr(0,10,13,-6,0,21,33,3,0,8,40,7),Cr(0,10,14,-6,0,22,35,3,0,8,42,7),Cr(0,11,14,-7,0,23,36,3,0,9,44,8),Cr(0,11,15,-7,0,24,38,3,0,9,46,8)],oie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},aie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function i3(s){return`${Math.round(s)}ms`}function lie(s){if(!s)return 0;const e=s/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function uie(s){const e={...oie,...s.easing},n={...aie,...s.duration};return{getAutoHeightDuration:lie,create:(r=["all"],a={})=>{const{duration:l=n.standard,easing:h=e.easeInOut,delay:f=0,...p}=a;return(Array.isArray(r)?r:[r]).map(v=>`${v} ${typeof l=="string"?l:i3(l)} ${h} ${typeof f=="string"?f:i3(f)}`).join(",")},...s,easing:e,duration:n}}const cie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function hie(s){return dp(s)||typeof s>"u"||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||Array.isArray(s)}function h4(s={}){const e={...s};function n(i){const r=Object.entries(i);for(let a=0;a<r.length;a++){const[l,h]=r[a];!hie(h)||l.startsWith("unstable_")?delete i[l]:dp(h)&&(i[l]={...h},n(i[l]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function EO(s={},...e){const{breakpoints:n,mixins:i={},spacing:r,palette:a={},transitions:l={},typography:h={},shape:f,...p}=s;if(s.vars&&s.generateThemeVars===void 0)throw new Error(nm(20));const v=SN(a),T=GM(s);let y=wl(T,{mixins:Qne(T.breakpoints,i),palette:v,shadows:rie.slice(),typography:tie(v,h),transitions:uie(l),zIndex:{...cie}});return y=wl(y,p),y=e.reduce((S,$)=>wl(S,$),y),y.unstable_sxConfig={...sA,...p?.unstable_sxConfig},y.unstable_sx=function($){return eT({sx:$,theme:this})},y.toRuntimeSource=h4,y}function SO(s){let e;return s<1?e=5.11916*s**2:e=4.5*Math.log(s+1)+2,Math.round(e*10)/1e3}const die=[...Array(25)].map((s,e)=>{if(e===0)return"none";const n=SO(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function d4(s){return{inputPlaceholder:s==="dark"?.5:.42,inputUnderline:s==="dark"?.7:.42,switchTrackDisabled:s==="dark"?.2:.12,switchTrack:s==="dark"?.3:.38}}function f4(s){return s==="dark"?die:[]}function fie(s){const{palette:e={mode:"light"},opacity:n,overlays:i,...r}=s,a=SN(e);return{palette:a,opacity:{...d4(a.mode),...n},overlays:i||f4(a.mode),...r}}function pie(s){return!!s[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!s[0].match(/sxConfig$/)||s[0]==="palette"&&!!s[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const mie=s=>[...[...Array(25)].map((e,n)=>`--${s?`${s}-`:""}overlays-${n}`),`--${s?`${s}-`:""}palette-AppBar-darkBg`,`--${s?`${s}-`:""}palette-AppBar-darkColor`],gie=s=>(e,n)=>{const i=s.rootSelector||":root",r=s.colorSchemeSelector;let a=r;if(r==="class"&&(a=".%s"),r==="data"&&(a="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(a=`[${r}="%s"]`),s.defaultColorScheme===e){if(e==="dark"){const l={};return mie(s.cssVarPrefix).forEach(h=>{l[h]=n[h],delete n[h]}),a==="media"?{[i]:n,"@media (prefers-color-scheme: dark)":{[i]:l}}:a?{[a.replace("%s",e)]:l,[`${i}, ${a.replace("%s",e)}`]:n}:{[i]:{...n,...l}}}if(a&&a!=="media")return`${i}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[i]:n}};if(a)return a.replace("%s",String(e))}return i};function _ie(s,e){e.forEach(n=>{s[n]||(s[n]={})})}function Rt(s,e,n){!s[e]&&n&&(s[e]=n)}function wE(s){return typeof s!="string"||!s.startsWith("hsl")?s:l4(s)}function P0(s,e){`${e}Channel`in s||(s[`${e}Channel`]=RE(wE(s[e])))}function vie(s){return typeof s=="number"?`${s}px`:typeof s=="string"||typeof s=="function"||Array.isArray(s)?s:"8px"}const rp=s=>{try{return s()}catch{}},bie=(s="mui")=>Ane(s);function Cw(s,e,n,i){if(!e)return;e=e===!0?{}:e;const r=i==="dark"?"dark":"light";if(!n){s[i]=fie({...e,palette:{mode:r,...e?.palette}});return}const{palette:a,...l}=EO({...n,palette:{mode:r,...e?.palette}});return s[i]={...e,palette:a,opacity:{...d4(r),...e?.opacity},overlays:e?.overlays||f4(r)},l}function yie(s={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:i,disableCssColorScheme:r=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:l=pie,colorSchemeSelector:h=n.light&&n.dark?"media":void 0,rootSelector:f=":root",...p}=s,v=Object.keys(n)[0],T=i||(n.light&&v!=="light"?"light":v),y=bie(a),{[T]:S,light:$,dark:M,...C}=n,E={...C};let w=S;if((T==="dark"&&!("dark"in n)||T==="light"&&!("light"in n))&&(w=!0),!w)throw new Error(nm(21,T));const I=Cw(E,w,p,T);$&&!E.light&&Cw(E,$,void 0,"light"),M&&!E.dark&&Cw(E,M,void 0,"dark");let O={defaultColorScheme:T,...I,cssVarPrefix:a,colorSchemeSelector:h,rootSelector:f,getCssVar:y,colorSchemes:E,font:{...Zne(I.typography),...I.font},spacing:vie(p.spacing)};Object.keys(O.colorSchemes).forEach(G=>{const D=O.colorSchemes[G].palette,Z=Y=>{const j=Y.split("-"),ne=j[1],ee=j[2];return y(Y,D[ne][ee])};if(D.mode==="light"&&(Rt(D.common,"background","#fff"),Rt(D.common,"onBackground","#000")),D.mode==="dark"&&(Rt(D.common,"background","#000"),Rt(D.common,"onBackground","#fff")),_ie(D,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),D.mode==="light"){Rt(D.Alert,"errorColor",js(D.error.light,.6)),Rt(D.Alert,"infoColor",js(D.info.light,.6)),Rt(D.Alert,"successColor",js(D.success.light,.6)),Rt(D.Alert,"warningColor",js(D.warning.light,.6)),Rt(D.Alert,"errorFilledBg",Z("palette-error-main")),Rt(D.Alert,"infoFilledBg",Z("palette-info-main")),Rt(D.Alert,"successFilledBg",Z("palette-success-main")),Rt(D.Alert,"warningFilledBg",Z("palette-warning-main")),Rt(D.Alert,"errorFilledColor",rp(()=>D.getContrastText(D.error.main))),Rt(D.Alert,"infoFilledColor",rp(()=>D.getContrastText(D.info.main))),Rt(D.Alert,"successFilledColor",rp(()=>D.getContrastText(D.success.main))),Rt(D.Alert,"warningFilledColor",rp(()=>D.getContrastText(D.warning.main))),Rt(D.Alert,"errorStandardBg",Ys(D.error.light,.9)),Rt(D.Alert,"infoStandardBg",Ys(D.info.light,.9)),Rt(D.Alert,"successStandardBg",Ys(D.success.light,.9)),Rt(D.Alert,"warningStandardBg",Ys(D.warning.light,.9)),Rt(D.Alert,"errorIconColor",Z("palette-error-main")),Rt(D.Alert,"infoIconColor",Z("palette-info-main")),Rt(D.Alert,"successIconColor",Z("palette-success-main")),Rt(D.Alert,"warningIconColor",Z("palette-warning-main")),Rt(D.AppBar,"defaultBg",Z("palette-grey-100")),Rt(D.Avatar,"defaultBg",Z("palette-grey-400")),Rt(D.Button,"inheritContainedBg",Z("palette-grey-300")),Rt(D.Button,"inheritContainedHoverBg",Z("palette-grey-A100")),Rt(D.Chip,"defaultBorder",Z("palette-grey-400")),Rt(D.Chip,"defaultAvatarColor",Z("palette-grey-700")),Rt(D.Chip,"defaultIconColor",Z("palette-grey-700")),Rt(D.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Rt(D.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Rt(D.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Rt(D.LinearProgress,"primaryBg",Ys(D.primary.main,.62)),Rt(D.LinearProgress,"secondaryBg",Ys(D.secondary.main,.62)),Rt(D.LinearProgress,"errorBg",Ys(D.error.main,.62)),Rt(D.LinearProgress,"infoBg",Ys(D.info.main,.62)),Rt(D.LinearProgress,"successBg",Ys(D.success.main,.62)),Rt(D.LinearProgress,"warningBg",Ys(D.warning.main,.62)),Rt(D.Skeleton,"bg",`rgba(${Z("palette-text-primaryChannel")} / 0.11)`),Rt(D.Slider,"primaryTrack",Ys(D.primary.main,.62)),Rt(D.Slider,"secondaryTrack",Ys(D.secondary.main,.62)),Rt(D.Slider,"errorTrack",Ys(D.error.main,.62)),Rt(D.Slider,"infoTrack",Ys(D.info.main,.62)),Rt(D.Slider,"successTrack",Ys(D.success.main,.62)),Rt(D.Slider,"warningTrack",Ys(D.warning.main,.62));const Y=F$(D.background.default,.8);Rt(D.SnackbarContent,"bg",Y),Rt(D.SnackbarContent,"color",rp(()=>D.getContrastText(Y))),Rt(D.SpeedDialAction,"fabHoverBg",F$(D.background.paper,.15)),Rt(D.StepConnector,"border",Z("palette-grey-400")),Rt(D.StepContent,"border",Z("palette-grey-400")),Rt(D.Switch,"defaultColor",Z("palette-common-white")),Rt(D.Switch,"defaultDisabledColor",Z("palette-grey-100")),Rt(D.Switch,"primaryDisabledColor",Ys(D.primary.main,.62)),Rt(D.Switch,"secondaryDisabledColor",Ys(D.secondary.main,.62)),Rt(D.Switch,"errorDisabledColor",Ys(D.error.main,.62)),Rt(D.Switch,"infoDisabledColor",Ys(D.info.main,.62)),Rt(D.Switch,"successDisabledColor",Ys(D.success.main,.62)),Rt(D.Switch,"warningDisabledColor",Ys(D.warning.main,.62)),Rt(D.TableCell,"border",Ys(U$(D.divider,1),.88)),Rt(D.Tooltip,"bg",U$(D.grey[700],.92))}if(D.mode==="dark"){Rt(D.Alert,"errorColor",Ys(D.error.light,.6)),Rt(D.Alert,"infoColor",Ys(D.info.light,.6)),Rt(D.Alert,"successColor",Ys(D.success.light,.6)),Rt(D.Alert,"warningColor",Ys(D.warning.light,.6)),Rt(D.Alert,"errorFilledBg",Z("palette-error-dark")),Rt(D.Alert,"infoFilledBg",Z("palette-info-dark")),Rt(D.Alert,"successFilledBg",Z("palette-success-dark")),Rt(D.Alert,"warningFilledBg",Z("palette-warning-dark")),Rt(D.Alert,"errorFilledColor",rp(()=>D.getContrastText(D.error.dark))),Rt(D.Alert,"infoFilledColor",rp(()=>D.getContrastText(D.info.dark))),Rt(D.Alert,"successFilledColor",rp(()=>D.getContrastText(D.success.dark))),Rt(D.Alert,"warningFilledColor",rp(()=>D.getContrastText(D.warning.dark))),Rt(D.Alert,"errorStandardBg",js(D.error.light,.9)),Rt(D.Alert,"infoStandardBg",js(D.info.light,.9)),Rt(D.Alert,"successStandardBg",js(D.success.light,.9)),Rt(D.Alert,"warningStandardBg",js(D.warning.light,.9)),Rt(D.Alert,"errorIconColor",Z("palette-error-main")),Rt(D.Alert,"infoIconColor",Z("palette-info-main")),Rt(D.Alert,"successIconColor",Z("palette-success-main")),Rt(D.Alert,"warningIconColor",Z("palette-warning-main")),Rt(D.AppBar,"defaultBg",Z("palette-grey-900")),Rt(D.AppBar,"darkBg",Z("palette-background-paper")),Rt(D.AppBar,"darkColor",Z("palette-text-primary")),Rt(D.Avatar,"defaultBg",Z("palette-grey-600")),Rt(D.Button,"inheritContainedBg",Z("palette-grey-800")),Rt(D.Button,"inheritContainedHoverBg",Z("palette-grey-700")),Rt(D.Chip,"defaultBorder",Z("palette-grey-700")),Rt(D.Chip,"defaultAvatarColor",Z("palette-grey-300")),Rt(D.Chip,"defaultIconColor",Z("palette-grey-300")),Rt(D.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Rt(D.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Rt(D.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Rt(D.LinearProgress,"primaryBg",js(D.primary.main,.5)),Rt(D.LinearProgress,"secondaryBg",js(D.secondary.main,.5)),Rt(D.LinearProgress,"errorBg",js(D.error.main,.5)),Rt(D.LinearProgress,"infoBg",js(D.info.main,.5)),Rt(D.LinearProgress,"successBg",js(D.success.main,.5)),Rt(D.LinearProgress,"warningBg",js(D.warning.main,.5)),Rt(D.Skeleton,"bg",`rgba(${Z("palette-text-primaryChannel")} / 0.13)`),Rt(D.Slider,"primaryTrack",js(D.primary.main,.5)),Rt(D.Slider,"secondaryTrack",js(D.secondary.main,.5)),Rt(D.Slider,"errorTrack",js(D.error.main,.5)),Rt(D.Slider,"infoTrack",js(D.info.main,.5)),Rt(D.Slider,"successTrack",js(D.success.main,.5)),Rt(D.Slider,"warningTrack",js(D.warning.main,.5));const Y=F$(D.background.default,.98);Rt(D.SnackbarContent,"bg",Y),Rt(D.SnackbarContent,"color",rp(()=>D.getContrastText(Y))),Rt(D.SpeedDialAction,"fabHoverBg",F$(D.background.paper,.15)),Rt(D.StepConnector,"border",Z("palette-grey-600")),Rt(D.StepContent,"border",Z("palette-grey-600")),Rt(D.Switch,"defaultColor",Z("palette-grey-300")),Rt(D.Switch,"defaultDisabledColor",Z("palette-grey-600")),Rt(D.Switch,"primaryDisabledColor",js(D.primary.main,.55)),Rt(D.Switch,"secondaryDisabledColor",js(D.secondary.main,.55)),Rt(D.Switch,"errorDisabledColor",js(D.error.main,.55)),Rt(D.Switch,"infoDisabledColor",js(D.info.main,.55)),Rt(D.Switch,"successDisabledColor",js(D.success.main,.55)),Rt(D.Switch,"warningDisabledColor",js(D.warning.main,.55)),Rt(D.TableCell,"border",js(U$(D.divider,1),.68)),Rt(D.Tooltip,"bg",U$(D.grey[700],.92))}P0(D.background,"default"),P0(D.background,"paper"),P0(D.common,"background"),P0(D.common,"onBackground"),P0(D,"divider"),Object.keys(D).forEach(Y=>{const j=D[Y];Y!=="tonalOffset"&&j&&typeof j=="object"&&(j.main&&Rt(D[Y],"mainChannel",RE(wE(j.main))),j.light&&Rt(D[Y],"lightChannel",RE(wE(j.light))),j.dark&&Rt(D[Y],"darkChannel",RE(wE(j.dark))),j.contrastText&&Rt(D[Y],"contrastTextChannel",RE(wE(j.contrastText))),Y==="text"&&(P0(D[Y],"primary"),P0(D[Y],"secondary")),Y==="action"&&(j.active&&P0(D[Y],"active"),j.selected&&P0(D[Y],"selected")))})}),O=e.reduce((G,D)=>wl(G,D),O);const P={prefix:a,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:gie(O)},{vars:F,generateThemeVars:V,generateStyleSheets:X}=Cne(O,P);return O.vars=F,Object.entries(O.colorSchemes[O.defaultColorScheme]).forEach(([G,D])=>{O[G]=D}),O.generateThemeVars=V,O.generateStyleSheets=X,O.generateSpacing=function(){return n4(p.spacing,yN(this))},O.getColorSchemeSelector=Mne(h),O.spacing=O.generateSpacing(),O.shouldSkipGeneratingVar=l,O.unstable_sxConfig={...sA,...p?.unstable_sxConfig},O.unstable_sx=function(D){return eT({sx:D,theme:this})},O.toRuntimeSource=h4,O}function s3(s,e,n){s.colorSchemes&&n&&(s.colorSchemes[e]={...n!==!0&&n,palette:SN({...n===!0?{}:n.palette,mode:e})})}function Tie(s={},...e){const{palette:n,cssVariables:i=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:a=n?.mode,...l}=s,h=a||"light",f=r?.[h],p={...r,...n?{[h]:{...typeof f!="boolean"&&f,palette:n}}:void 0};if(i===!1){if(!("colorSchemes"in s))return EO(s,...e);let v=n;"palette"in s||p[h]&&(p[h]!==!0?v=p[h].palette:h==="dark"&&(v={mode:"dark"}));const T=EO({...s,palette:v},...e);return T.defaultColorScheme=h,T.colorSchemes=p,T.palette.mode==="light"&&(T.colorSchemes.light={...p.light!==!0&&p.light,palette:T.palette},s3(T,"dark",p.dark)),T.palette.mode==="dark"&&(T.colorSchemes.dark={...p.dark!==!0&&p.dark,palette:T.palette},s3(T,"light",p.light)),T}return!n&&!("light"in p)&&h==="light"&&(p.light=!0),yie({...l,colorSchemes:p,defaultColorScheme:h,...typeof i!="boolean"&&i},...e)}const AN=Tie();function ab(){const s=zM(AN);return s[uN]||s}function XM(s){return s!=="ownerState"&&s!=="theme"&&s!=="sx"&&s!=="as"}const Xh=s=>XM(s)&&s!=="classes",tn=a4({themeId:uN,defaultTheme:AN,rootShouldForwardProp:Xh});function r3(...s){return s.reduce((e,n)=>n==null?e:function(...r){e.apply(this,r),n.apply(this,r)},()=>{})}function Eie(s){return he.jsx(Zte,{...s,defaultTheme:AN,themeId:uN})}function Sie(s){return function(n){return he.jsx(Eie,{styles:typeof s=="function"?i=>s({theme:i,...n}):s})}}function Aie(){return i4}const Pi=Sne;function Ki(s){return yne(s)}function $ie(s){return Vi("MuiSvgIcon",s)}Mi("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const xie=s=>{const{color:e,fontSize:n,classes:i}=s,r={root:["root",e!=="inherit"&&`color${En(e)}`,`fontSize${En(n)}`]};return Wi(r,$ie,i)},Cie=tn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.color!=="inherit"&&e[`color${En(n.color)}`],e[`fontSize${En(n.fontSize)}`]]}})(Pi(({theme:s})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:s.transitions?.create?.("fill",{duration:(s.vars??s).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:s.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:s.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:s.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((s.vars??s).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(s.vars??s).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(s.vars??s).palette?.action?.active}},{props:{color:"disabled"},style:{color:(s.vars??s).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),AO=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiSvgIcon"}),{children:r,className:a,color:l="inherit",component:h="svg",fontSize:f="medium",htmlColor:p,inheritViewBox:v=!1,titleAccess:T,viewBox:y="0 0 24 24",...S}=i,$=Q.isValidElement(r)&&r.type==="svg",M={...i,color:l,component:h,fontSize:f,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:y,hasSvgAsChild:$},C={};v||(C.viewBox=y);const E=xie(M);return he.jsxs(Cie,{as:h,className:$n(E.root,a),focusable:"false",color:p,"aria-hidden":T?void 0:!0,role:T?"img":void 0,ref:n,...C,...S,...$&&r.props,ownerState:M,children:[$?r.props.children:r,T?he.jsx("title",{children:T}):null]})});AO.muiName="SvgIcon";function Io(s,e){function n(i,r){return he.jsx(AO,{"data-testid":void 0,ref:r,...i,children:s})}return n.muiName=AO.muiName,Q.memo(Q.forwardRef(n))}function jM(s,e=166){let n;function i(...r){const a=()=>{s.apply(this,r)};clearTimeout(n),n=setTimeout(a,e)}return i.clear=()=>{clearTimeout(n)},i}function Ea(s){return s&&s.ownerDocument||document}function rf(s){return Ea(s).defaultView||window}function o3(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function CC(s){const{controlled:e,default:n,name:i,state:r="value"}=s,{current:a}=Q.useRef(e!==void 0),[l,h]=Q.useState(n),f=a?e:l,p=Q.useCallback(v=>{a||h(v)},[]);return[f,p]}function du(s){const e=Q.useRef(s);return Ph(()=>{e.current=s}),Q.useRef((...n)=>(0,e.current)(...n)).current}function sa(...s){const e=Q.useRef(void 0),n=Q.useCallback(i=>{const r=s.map(a=>{if(a==null)return null;if(typeof a=="function"){const l=a,h=l(i);return typeof h=="function"?h:()=>{l(null)}}return a.current=i,()=>{a.current=null}});return()=>{r.forEach(a=>a?.())}},s);return Q.useMemo(()=>s.every(i=>i==null)?null:i=>{e.current&&(e.current(),e.current=void 0),i!=null&&(e.current=n(i))},s)}function Mie(s,e){const n=s.charCodeAt(2);return s[0]==="o"&&s[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function Rie(s,e){if(!s)return e;function n(l,h){const f={};return Object.keys(h).forEach(p=>{Mie(p,h[p])&&typeof l[p]=="function"&&(f[p]=(...v)=>{l[p](...v),h[p](...v)})}),f}if(typeof s=="function"||typeof e=="function")return l=>{const h=typeof e=="function"?e(l):e,f=typeof s=="function"?s({...l,...h}):s,p=$n(l?.className,h?.className,f?.className),v=n(f,h);return{...h,...f,...v,...!!p&&{className:p},...h?.style&&f?.style&&{style:{...h.style,...f.style}},...h?.sx&&f?.sx&&{sx:[...Array.isArray(h.sx)?h.sx:[h.sx],...Array.isArray(f.sx)?f.sx:[f.sx]]}}};const i=e,r=n(s,i),a=$n(i?.className,s?.className);return{...e,...s,...r,...!!a&&{className:a},...i?.style&&s?.style&&{style:{...i.style,...s.style}},...i?.sx&&s?.sx&&{sx:[...Array.isArray(i.sx)?i.sx:[i.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}}function $O(){return $O=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},$O.apply(this,arguments)}function p4(s,e){if(s==null)return{};var n={},i=Object.keys(s),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=s[r]);return n}function xO(s,e){return xO=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},xO(s,e)}function m4(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,xO(s,e)}const a3={disabled:!1},MC=Un.createContext(null);var wie=function(e){return e.scrollTop},IE="unmounted",Av="exited",$v="entering",by="entered",CO="exiting",wp=function(s){m4(e,s);function e(i,r){var a;a=s.call(this,i,r)||this;var l=r,h=l&&!l.isMounting?i.enter:i.appear,f;return a.appearStatus=null,i.in?h?(f=Av,a.appearStatus=$v):f=by:i.unmountOnExit||i.mountOnEnter?f=IE:f=Av,a.state={status:f},a.nextCallback=null,a}e.getDerivedStateFromProps=function(r,a){var l=r.in;return l&&a.status===IE?{status:Av}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var a=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==$v&&l!==by&&(a=$v):(l===$v||l===by)&&(a=CO)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,a,l,h;return a=l=h=r,r!=null&&typeof r!="number"&&(a=r.exit,l=r.enter,h=r.appear!==void 0?r.appear:l),{exit:a,enter:l,appear:h}},n.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===$v){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:BA.findDOMNode(this);l&&wie(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Av&&this.setState({status:IE})},n.performEnter=function(r){var a=this,l=this.props.enter,h=this.context?this.context.isMounting:r,f=this.props.nodeRef?[h]:[BA.findDOMNode(this),h],p=f[0],v=f[1],T=this.getTimeouts(),y=h?T.appear:T.enter;if(!r&&!l||a3.disabled){this.safeSetState({status:by},function(){a.props.onEntered(p)});return}this.props.onEnter(p,v),this.safeSetState({status:$v},function(){a.props.onEntering(p,v),a.onTransitionEnd(y,function(){a.safeSetState({status:by},function(){a.props.onEntered(p,v)})})})},n.performExit=function(){var r=this,a=this.props.exit,l=this.getTimeouts(),h=this.props.nodeRef?void 0:BA.findDOMNode(this);if(!a||a3.disabled){this.safeSetState({status:Av},function(){r.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:CO},function(){r.props.onExiting(h),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:Av},function(){r.props.onExited(h)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},n.setNextCallback=function(r){var a=this,l=!0;return this.nextCallback=function(h){l&&(l=!1,a.nextCallback=null,r(h))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(r,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:BA.findDOMNode(this),h=r==null&&!this.props.addEndListener;if(!l||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=f[0],v=f[1];this.props.addEndListener(p,v)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===IE)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var h=p4(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Un.createElement(MC.Provider,{value:null},typeof l=="function"?l(r,h):Un.cloneElement(Un.Children.only(l),h))},e}(Un.Component);wp.contextType=MC;wp.propTypes={};function fy(){}wp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fy,onEntering:fy,onEntered:fy,onExit:fy,onExiting:fy,onExited:fy};wp.UNMOUNTED=IE;wp.EXITED=Av;wp.ENTERING=$v;wp.ENTERED=by;wp.EXITING=CO;function Iie(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function $N(s,e){var n=function(a){return e&&Q.isValidElement(a)?e(a):a},i=Object.create(null);return s&&Q.Children.map(s,function(r){return r}).forEach(function(r){i[r.key]=n(r)}),i}function Oie(s,e){s=s||{},e=e||{};function n(v){return v in e?e[v]:s[v]}var i=Object.create(null),r=[];for(var a in s)a in e?r.length&&(i[a]=r,r=[]):r.push(a);var l,h={};for(var f in e){if(i[f])for(l=0;l<i[f].length;l++){var p=i[f][l];h[i[f][l]]=n(p)}h[f]=n(f)}for(l=0;l<r.length;l++)h[r[l]]=n(r[l]);return h}function Dv(s,e,n){return n[e]!=null?n[e]:s.props[e]}function Nie(s,e){return $N(s.children,function(n){return Q.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Dv(n,"appear",s),enter:Dv(n,"enter",s),exit:Dv(n,"exit",s)})})}function Lie(s,e,n){var i=$N(s.children),r=Oie(e,i);return Object.keys(r).forEach(function(a){var l=r[a];if(Q.isValidElement(l)){var h=a in e,f=a in i,p=e[a],v=Q.isValidElement(p)&&!p.props.in;f&&(!h||v)?r[a]=Q.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Dv(l,"exit",s),enter:Dv(l,"enter",s)}):!f&&h&&!v?r[a]=Q.cloneElement(l,{in:!1}):f&&h&&Q.isValidElement(p)&&(r[a]=Q.cloneElement(l,{onExited:n.bind(null,l),in:p.props.in,exit:Dv(l,"exit",s),enter:Dv(l,"enter",s)}))}}),r}var Die=Object.values||function(s){return Object.keys(s).map(function(e){return s[e]})},Bie={component:"div",childFactory:function(e){return e}},xN=function(s){m4(e,s);function e(i,r){var a;a=s.call(this,i,r)||this;var l=a.handleExited.bind(Iie(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,a){var l=a.children,h=a.handleExited,f=a.firstRender;return{children:f?Nie(r,h):Lie(r,l,h),firstRender:!1}},n.handleExited=function(r,a){var l=$N(this.props.children);r.key in l||(r.props.onExited&&r.props.onExited(a),this.mounted&&this.setState(function(h){var f=$O({},h.children);return delete f[r.key],{children:f}}))},n.render=function(){var r=this.props,a=r.component,l=r.childFactory,h=p4(r,["component","childFactory"]),f=this.state.contextValue,p=Die(this.state.children).map(l);return delete h.appear,delete h.enter,delete h.exit,a===null?Un.createElement(MC.Provider,{value:f},p):Un.createElement(MC.Provider,{value:f},Un.createElement(a,h,p))},e}(Un.Component);xN.propTypes={};xN.defaultProps=Bie;const l3={};function g4(s,e){const n=Q.useRef(l3);return n.current===l3&&(n.current=s(e)),n}const kie=[];function Pie(s){Q.useEffect(s,kie)}class YM{static create(){return new YM}currentId=null;start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Ay(){const s=g4(YM.create).current;return Pie(s.disposeEffect),s}const _4=s=>s.scrollTop;function RC(s,e){const{timeout:n,easing:i,style:r={}}=s;return{duration:r.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:r.transitionTimingFunction??(typeof i=="object"?i[e.mode]:i),delay:r.transitionDelay}}function Uie(s){return Vi("MuiPaper",s)}Mi("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Fie=s=>{const{square:e,elevation:n,variant:i,classes:r}=s,a={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${n}`]};return Wi(a,Uie,r)},Hie=tn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(Pi(({theme:s})=>({backgroundColor:(s.vars||s).palette.background.paper,color:(s.vars||s).palette.text.primary,transition:s.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:s.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(s.vars||s).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),CN=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiPaper"}),r=ab(),{className:a,component:l="div",elevation:h=1,square:f=!1,variant:p="elevation",...v}=i,T={...i,component:l,elevation:h,square:f,variant:p},y=Fie(T);return he.jsx(Hie,{as:l,ownerState:T,className:$n(y.root,a),ref:n,...v,style:{...p==="elevation"&&{"--Paper-shadow":(r.vars||r).shadows[h],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[h]},...!r.vars&&r.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ya("#fff",SO(h))}, ${ya("#fff",SO(h))})`}},...v.style}})});function Gie(s){return typeof s=="string"}function v4(s,e,n){return s===void 0||Gie(s)?e:{...e,ownerState:{...e.ownerState,...n}}}function b4(s,e,n){return typeof s=="function"?s(e,n):s}function KE(s,e=[]){if(s===void 0)return{};const n={};return Object.keys(s).filter(i=>i.match(/^on[A-Z]/)&&typeof s[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=s[i]}),n}function u3(s){if(s===void 0)return{};const e={};return Object.keys(s).filter(n=>!(n.match(/^on[A-Z]/)&&typeof s[n]=="function")).forEach(n=>{e[n]=s[n]}),e}function y4(s){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:a}=s;if(!e){const S=$n(n?.className,a,r?.className,i?.className),$={...n?.style,...r?.style,...i?.style},M={...n,...r,...i};return S.length>0&&(M.className=S),Object.keys($).length>0&&(M.style=$),{props:M,internalRef:void 0}}const l=KE({...r,...i}),h=u3(i),f=u3(r),p=e(l),v=$n(p?.className,n?.className,a,r?.className,i?.className),T={...p?.style,...n?.style,...r?.style,...i?.style},y={...p,...n,...f,...h};return v.length>0&&(y.className=v),Object.keys(T).length>0&&(y.style=T),{props:y,internalRef:p.ref}}function Es(s,e){const{className:n,elementType:i,ownerState:r,externalForwardedProps:a,internalForwardedProps:l,shouldForwardComponentProp:h=!1,...f}=e,{component:p,slots:v={[s]:void 0},slotProps:T={[s]:void 0},...y}=a,S=v[s]||i,$=b4(T[s],r),{props:{component:M,...C},internalRef:E}=y4({className:n,...f,externalForwardedProps:s==="root"?y:void 0,externalSlotProps:$}),w=sa(E,$?.ref,e.ref),I=s==="root"?M||p:M,O=v4(S,{...s==="root"&&!p&&!v[s]&&l,...s!=="root"&&!v[s]&&l,...C,...I&&!h&&{as:I},...I&&h&&{component:I},ref:w},r);return[S,O]}function tT(s){try{return s.matches(":focus-visible")}catch{}return!1}class wC{static create(){return new wC}static use(){const e=g4(wC.create).current,[n,i]=Q.useState(!1);return e.shouldMount=n,e.setShouldMount=i,Q.useEffect(e.mountEffect,[n]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Vie(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function zie(){return wC.use()}function Vie(){let s,e;const n=new Promise((i,r)=>{s=i,e=r});return n.resolve=s,n.reject=e,n}function Wie(s){const{className:e,classes:n,pulsate:i=!1,rippleX:r,rippleY:a,rippleSize:l,in:h,onExited:f,timeout:p}=s,[v,T]=Q.useState(!1),y=$n(e,n.ripple,n.rippleVisible,i&&n.ripplePulsate),S={width:l,height:l,top:-(l/2)+a,left:-(l/2)+r},$=$n(n.child,v&&n.childLeaving,i&&n.childPulsate);return!h&&!v&&T(!0),Q.useEffect(()=>{if(!h&&f!=null){const M=setTimeout(f,p);return()=>{clearTimeout(M)}}},[f,h,p]),he.jsx("span",{className:y,style:S,children:he.jsx("span",{className:$})})}const Ah=Mi("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),MO=550,Xie=80,jie=tA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Yie=tA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Kie=tA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,qie=tn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Jie=tn(Wie,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ah.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${jie};
    animation-duration: ${MO}ms;
    animation-timing-function: ${({theme:s})=>s.transitions.easing.easeInOut};
  }

  &.${Ah.ripplePulsate} {
    animation-duration: ${({theme:s})=>s.transitions.duration.shorter}ms;
  }

  & .${Ah.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ah.childLeaving} {
    opacity: 0;
    animation-name: ${Yie};
    animation-duration: ${MO}ms;
    animation-timing-function: ${({theme:s})=>s.transitions.easing.easeInOut};
  }

  & .${Ah.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Kie};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:s})=>s.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Zie=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:a={},className:l,...h}=i,[f,p]=Q.useState([]),v=Q.useRef(0),T=Q.useRef(null);Q.useEffect(()=>{T.current&&(T.current(),T.current=null)},[f]);const y=Q.useRef(!1),S=Ay(),$=Q.useRef(null),M=Q.useRef(null),C=Q.useCallback(O=>{const{pulsate:P,rippleX:F,rippleY:V,rippleSize:X,cb:G}=O;p(D=>[...D,he.jsx(Jie,{classes:{ripple:$n(a.ripple,Ah.ripple),rippleVisible:$n(a.rippleVisible,Ah.rippleVisible),ripplePulsate:$n(a.ripplePulsate,Ah.ripplePulsate),child:$n(a.child,Ah.child),childLeaving:$n(a.childLeaving,Ah.childLeaving),childPulsate:$n(a.childPulsate,Ah.childPulsate)},timeout:MO,pulsate:P,rippleX:F,rippleY:V,rippleSize:X},v.current)]),v.current+=1,T.current=G},[a]),E=Q.useCallback((O={},P={},F=()=>{})=>{const{pulsate:V=!1,center:X=r||P.pulsate,fakeElement:G=!1}=P;if(O?.type==="mousedown"&&y.current){y.current=!1;return}O?.type==="touchstart"&&(y.current=!0);const D=G?null:M.current,Z=D?D.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Y,j,ne;if(X||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)Y=Math.round(Z.width/2),j=Math.round(Z.height/2);else{const{clientX:ee,clientY:z}=O.touches&&O.touches.length>0?O.touches[0]:O;Y=Math.round(ee-Z.left),j=Math.round(z-Z.top)}if(X)ne=Math.sqrt((2*Z.width**2+Z.height**2)/3),ne%2===0&&(ne+=1);else{const ee=Math.max(Math.abs((D?D.clientWidth:0)-Y),Y)*2+2,z=Math.max(Math.abs((D?D.clientHeight:0)-j),j)*2+2;ne=Math.sqrt(ee**2+z**2)}O?.touches?$.current===null&&($.current=()=>{C({pulsate:V,rippleX:Y,rippleY:j,rippleSize:ne,cb:F})},S.start(Xie,()=>{$.current&&($.current(),$.current=null)})):C({pulsate:V,rippleX:Y,rippleY:j,rippleSize:ne,cb:F})},[r,C,S]),w=Q.useCallback(()=>{E({},{pulsate:!0})},[E]),I=Q.useCallback((O,P)=>{if(S.clear(),O?.type==="touchend"&&$.current){$.current(),$.current=null,S.start(0,()=>{I(O,P)});return}$.current=null,p(F=>F.length>0?F.slice(1):F),T.current=P},[S]);return Q.useImperativeHandle(n,()=>({pulsate:w,start:E,stop:I}),[w,E,I]),he.jsx(qie,{className:$n(Ah.root,a.root,l),ref:M,...h,children:he.jsx(xN,{component:null,exit:!0,children:f})})});function Qie(s){return Vi("MuiButtonBase",s)}const ese=Mi("MuiButtonBase",["root","disabled","focusVisible"]),tse=s=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=s,l=Wi({root:["root",e&&"disabled",n&&"focusVisible"]},Qie,r);return n&&i&&(l.root+=` ${i}`),l},nse=tn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ese.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),rA=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:a=!1,children:l,className:h,component:f="button",disabled:p=!1,disableRipple:v=!1,disableTouchRipple:T=!1,focusRipple:y=!1,focusVisibleClassName:S,LinkComponent:$="a",onBlur:M,onClick:C,onContextMenu:E,onDragLeave:w,onFocus:I,onFocusVisible:O,onKeyDown:P,onKeyUp:F,onMouseDown:V,onMouseLeave:X,onMouseUp:G,onTouchEnd:D,onTouchMove:Z,onTouchStart:Y,tabIndex:j=0,TouchRippleProps:ne,touchRippleRef:ee,type:z,...te}=i,ce=Q.useRef(null),pe=zie(),K=sa(pe.ref,ee),[fe,Ne]=Q.useState(!1);p&&fe&&Ne(!1),Q.useImperativeHandle(r,()=>({focusVisible:()=>{Ne(!0),ce.current.focus()}}),[]);const Pe=pe.shouldMount&&!v&&!p;Q.useEffect(()=>{fe&&y&&!v&&pe.pulsate()},[v,y,fe,pe]);const Ee=U0(pe,"start",V,T),We=U0(pe,"stop",E,T),Fe=U0(pe,"stop",w,T),gt=U0(pe,"stop",G,T),ft=U0(pe,"stop",et=>{fe&&et.preventDefault(),X&&X(et)},T),Ut=U0(pe,"start",Y,T),Ke=U0(pe,"stop",D,T),Ht=U0(pe,"stop",Z,T),Re=U0(pe,"stop",et=>{tT(et.target)||Ne(!1),M&&M(et)},!1),Ye=du(et=>{ce.current||(ce.current=et.currentTarget),tT(et.target)&&(Ne(!0),O&&O(et)),I&&I(et)}),J=()=>{const et=ce.current;return f&&f!=="button"&&!(et.tagName==="A"&&et.href)},Se=du(et=>{y&&!et.repeat&&fe&&et.key===" "&&pe.stop(et,()=>{pe.start(et)}),et.target===et.currentTarget&&J()&&et.key===" "&&et.preventDefault(),P&&P(et),et.target===et.currentTarget&&J()&&et.key==="Enter"&&!p&&(et.preventDefault(),C&&C(et))}),Ae=du(et=>{y&&et.key===" "&&fe&&!et.defaultPrevented&&pe.stop(et,()=>{pe.pulsate(et)}),F&&F(et),C&&et.target===et.currentTarget&&J()&&et.key===" "&&!et.defaultPrevented&&C(et)});let we=f;we==="button"&&(te.href||te.to)&&(we=$);const Ie={};we==="button"?(Ie.type=z===void 0?"button":z,Ie.disabled=p):(!te.href&&!te.to&&(Ie.role="button"),p&&(Ie["aria-disabled"]=p));const dt=sa(n,ce),Qe={...i,centerRipple:a,component:f,disabled:p,disableRipple:v,disableTouchRipple:T,focusRipple:y,tabIndex:j,focusVisible:fe},vt=tse(Qe);return he.jsxs(nse,{as:we,className:$n(vt.root,h),ownerState:Qe,onBlur:Re,onClick:C,onContextMenu:We,onFocus:Ye,onKeyDown:Se,onKeyUp:Ae,onMouseDown:Ee,onMouseLeave:ft,onMouseUp:gt,onDragLeave:Fe,onTouchEnd:Ke,onTouchMove:Ht,onTouchStart:Ut,ref:dt,tabIndex:p?-1:j,type:z,...Ie,...te,children:[l,Pe?he.jsx(Zie,{ref:K,center:a,...ne}):null]})});function U0(s,e,n,i=!1){return du(r=>(n&&n(r),i||s[e](r),!0))}function ise(s){return typeof s.main=="string"}function sse(s,e=[]){if(!ise(s))return!1;for(const n of e)if(!s.hasOwnProperty(n)||typeof s[n]!="string")return!1;return!0}function Uh(s=[]){return([,e])=>e&&sse(e,s)}function rse(s){return Vi("MuiCircularProgress",s)}Mi("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ag=44,RO=tA`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,wO=tA`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,ose=typeof RO!="string"?_N`
        animation: ${RO} 1.4s linear infinite;
      `:null,ase=typeof wO!="string"?_N`
        animation: ${wO} 1.4s ease-in-out infinite;
      `:null,lse=s=>{const{classes:e,variant:n,color:i,disableShrink:r}=s,a={root:["root",n,`color${En(i)}`],svg:["svg"],circle:["circle",`circle${En(n)}`,r&&"circleDisableShrink"]};return Wi(a,rse,e)},use=tn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,e[n.variant],e[`color${En(n.color)}`]]}})(Pi(({theme:s})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:s.transitions.create("transform")}},{props:{variant:"indeterminate"},style:ose||{animation:`${RO} 1.4s linear infinite`}},...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{color:(s.vars||s).palette[e].main}}))]}))),cse=tn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),hse=tn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.circle,e[`circle${En(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(Pi(({theme:s})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:s.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:ase||{animation:`${wO} 1.4s ease-in-out infinite`}}]}))),T4=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiCircularProgress"}),{className:r,color:a="primary",disableShrink:l=!1,size:h=40,style:f,thickness:p=3.6,value:v=0,variant:T="indeterminate",...y}=i,S={...i,color:a,disableShrink:l,size:h,thickness:p,value:v,variant:T},$=lse(S),M={},C={},E={};if(T==="determinate"){const w=2*Math.PI*((Ag-p)/2);M.strokeDasharray=w.toFixed(3),E["aria-valuenow"]=Math.round(v),M.strokeDashoffset=`${((100-v)/100*w).toFixed(3)}px`,C.transform="rotate(-90deg)"}return he.jsx(use,{className:$n($.root,r),style:{width:h,height:h,...C,...f},ownerState:S,ref:n,role:"progressbar",...E,...y,children:he.jsx(cse,{className:$.svg,ownerState:S,viewBox:`${Ag/2} ${Ag/2} ${Ag} ${Ag}`,children:he.jsx(hse,{className:$.circle,style:M,ownerState:S,cx:Ag,cy:Ag,r:(Ag-p)/2,fill:"none",strokeWidth:p})})})});function dse(s){return Vi("MuiIconButton",s)}const c3=Mi("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),fse=s=>{const{classes:e,disabled:n,color:i,edge:r,size:a,loading:l}=s,h={root:["root",l&&"loading",n&&"disabled",i!=="default"&&`color${En(i)}`,r&&`edge${En(r)}`,`size${En(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Wi(h,dse,e)},pse=tn(rA,{name:"MuiIconButton",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${En(n.color)}`],n.edge&&e[`edge${En(n.edge)}`],e[`size${En(n.size)}`]]}})(Pi(({theme:s})=>({textAlign:"center",flex:"0 0 auto",fontSize:s.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(s.vars||s).palette.action.active,transition:s.transitions.create("background-color",{duration:s.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":s.vars?`rgba(${s.vars.palette.action.activeChannel} / ${s.vars.palette.action.hoverOpacity})`:ya(s.palette.action.active,s.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Pi(({theme:s})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{color:(s.vars||s).palette[e].main}})),...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":s.vars?`rgba(${(s.vars||s).palette[e].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:ya((s.vars||s).palette[e].main,s.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:s.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:s.typography.pxToRem(28)}}],[`&.${c3.disabled}`]:{backgroundColor:"transparent",color:(s.vars||s).palette.action.disabled},[`&.${c3.loading}`]:{color:"transparent"}}))),mse=tn("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:s})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(s.vars||s).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),to=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiIconButton"}),{edge:r=!1,children:a,className:l,color:h="default",disabled:f=!1,disableFocusRipple:p=!1,size:v="medium",id:T,loading:y=null,loadingIndicator:S,...$}=i,M=ET(T),C=S??he.jsx(T4,{"aria-labelledby":M,color:"inherit",size:16}),E={...i,edge:r,color:h,disabled:f,disableFocusRipple:p,loading:y,loadingIndicator:C,size:v},w=fse(E);return he.jsxs(pse,{id:y?M:T,className:$n(w.root,l),centerRipple:!0,focusRipple:!p,disabled:f||y,ref:n,...$,ownerState:E,children:[typeof y=="boolean"&&he.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:he.jsx(mse,{className:w.loadingIndicator,ownerState:E,children:y&&C})}),a]})});function gse(s){return Vi("MuiTypography",s)}Mi("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _se={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},vse=Aie(),bse=s=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:a,classes:l}=s,h={root:["root",a,s.align!=="inherit"&&`align${En(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return Wi(h,gse,l)},yse=tn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${En(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Pi(({theme:s})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(s.typography).filter(([e,n])=>e!=="inherit"&&n&&typeof n=="object").map(([e,n])=>({props:{variant:e},style:n})),...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{color:(s.vars||s).palette[e].main}})),...Object.entries(s.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${En(e)}`},style:{color:(s.vars||s).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),h3={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},IO=Q.forwardRef(function(e,n){const{color:i,...r}=Ki({props:e,name:"MuiTypography"}),a=!_se[i],l=vse({...r,...a&&{color:i}}),{align:h="inherit",className:f,component:p,gutterBottom:v=!1,noWrap:T=!1,paragraph:y=!1,variant:S="body1",variantMapping:$=h3,...M}=l,C={...l,align:h,color:i,className:f,component:p,gutterBottom:v,noWrap:T,paragraph:y,variant:S,variantMapping:$},E=p||(y?"p":$[S]||h3[S])||"span",w=bse(C);return he.jsx(yse,{as:E,ref:n,className:$n(w.root,f),...M,ownerState:C,style:{...h!=="inherit"&&{"--Typography-textAlign":h},...M.style}})});var Zu="top",Fh="bottom",Hh="right",Qu="left",MN="auto",oA=[Zu,Fh,Hh,Qu],nT="start",ES="end",Tse="clippingParents",E4="viewport",vE="popper",Ese="reference",d3=oA.reduce(function(s,e){return s.concat([e+"-"+nT,e+"-"+ES])},[]),S4=[].concat(oA,[MN]).reduce(function(s,e){return s.concat([e,e+"-"+nT,e+"-"+ES])},[]),Sse="beforeRead",Ase="read",$se="afterRead",xse="beforeMain",Cse="main",Mse="afterMain",Rse="beforeWrite",wse="write",Ise="afterWrite",Ose=[Sse,Ase,$se,xse,Cse,Mse,Rse,wse,Ise];function Cp(s){return s?(s.nodeName||"").toLowerCase():null}function Vc(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function Qv(s){var e=Vc(s).Element;return s instanceof e||s instanceof Element}function Bh(s){var e=Vc(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function RN(s){if(typeof ShadowRoot>"u")return!1;var e=Vc(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function Nse(s){var e=s.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},a=e.elements[n];!Bh(a)||!Cp(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(l){var h=r[l];h===!1?a.removeAttribute(l):a.setAttribute(l,h===!0?"":h)}))})}function Lse(s){var e=s.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],a=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),h=l.reduce(function(f,p){return f[p]="",f},{});!Bh(r)||!Cp(r)||(Object.assign(r.style,h),Object.keys(a).forEach(function(f){r.removeAttribute(f)}))})}}const Dse={name:"applyStyles",enabled:!0,phase:"write",fn:Nse,effect:Lse,requires:["computeStyles"]};function Sp(s){return s.split("-")[0]}var Uv=Math.max,IC=Math.min,iT=Math.round;function OO(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function A4(){return!/^((?!chrome|android).)*safari/i.test(OO())}function sT(s,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=s.getBoundingClientRect(),r=1,a=1;e&&Bh(s)&&(r=s.offsetWidth>0&&iT(i.width)/s.offsetWidth||1,a=s.offsetHeight>0&&iT(i.height)/s.offsetHeight||1);var l=Qv(s)?Vc(s):window,h=l.visualViewport,f=!A4()&&n,p=(i.left+(f&&h?h.offsetLeft:0))/r,v=(i.top+(f&&h?h.offsetTop:0))/a,T=i.width/r,y=i.height/a;return{width:T,height:y,top:v,right:p+T,bottom:v+y,left:p,x:p,y:v}}function wN(s){var e=sT(s),n=s.offsetWidth,i=s.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:s.offsetLeft,y:s.offsetTop,width:n,height:i}}function $4(s,e){var n=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(n&&RN(n)){var i=e;do{if(i&&s.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function sm(s){return Vc(s).getComputedStyle(s)}function Bse(s){return["table","td","th"].indexOf(Cp(s))>=0}function Kg(s){return((Qv(s)?s.ownerDocument:s.document)||window.document).documentElement}function KM(s){return Cp(s)==="html"?s:s.assignedSlot||s.parentNode||(RN(s)?s.host:null)||Kg(s)}function f3(s){return!Bh(s)||sm(s).position==="fixed"?null:s.offsetParent}function kse(s){var e=/firefox/i.test(OO()),n=/Trident/i.test(OO());if(n&&Bh(s)){var i=sm(s);if(i.position==="fixed")return null}var r=KM(s);for(RN(r)&&(r=r.host);Bh(r)&&["html","body"].indexOf(Cp(r))<0;){var a=sm(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function aA(s){for(var e=Vc(s),n=f3(s);n&&Bse(n)&&sm(n).position==="static";)n=f3(n);return n&&(Cp(n)==="html"||Cp(n)==="body"&&sm(n).position==="static")?e:n||kse(s)||e}function IN(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function qE(s,e,n){return Uv(s,IC(e,n))}function Pse(s,e,n){var i=qE(s,e,n);return i>n?n:i}function x4(){return{top:0,right:0,bottom:0,left:0}}function C4(s){return Object.assign({},x4(),s)}function M4(s,e){return e.reduce(function(n,i){return n[i]=s,n},{})}var Use=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,C4(typeof e!="number"?e:M4(e,oA))};function Fse(s){var e,n=s.state,i=s.name,r=s.options,a=n.elements.arrow,l=n.modifiersData.popperOffsets,h=Sp(n.placement),f=IN(h),p=[Qu,Hh].indexOf(h)>=0,v=p?"height":"width";if(!(!a||!l)){var T=Use(r.padding,n),y=wN(a),S=f==="y"?Zu:Qu,$=f==="y"?Fh:Hh,M=n.rects.reference[v]+n.rects.reference[f]-l[f]-n.rects.popper[v],C=l[f]-n.rects.reference[f],E=aA(a),w=E?f==="y"?E.clientHeight||0:E.clientWidth||0:0,I=M/2-C/2,O=T[S],P=w-y[v]-T[$],F=w/2-y[v]/2+I,V=qE(O,F,P),X=f;n.modifiersData[i]=(e={},e[X]=V,e.centerOffset=V-F,e)}}function Hse(s){var e=s.state,n=s.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||$4(e.elements.popper,r)&&(e.elements.arrow=r))}const Gse={name:"arrow",enabled:!0,phase:"main",fn:Fse,effect:Hse,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function rT(s){return s.split("-")[1]}var zse={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vse(s,e){var n=s.x,i=s.y,r=e.devicePixelRatio||1;return{x:iT(n*r)/r||0,y:iT(i*r)/r||0}}function p3(s){var e,n=s.popper,i=s.popperRect,r=s.placement,a=s.variation,l=s.offsets,h=s.position,f=s.gpuAcceleration,p=s.adaptive,v=s.roundOffsets,T=s.isFixed,y=l.x,S=y===void 0?0:y,$=l.y,M=$===void 0?0:$,C=typeof v=="function"?v({x:S,y:M}):{x:S,y:M};S=C.x,M=C.y;var E=l.hasOwnProperty("x"),w=l.hasOwnProperty("y"),I=Qu,O=Zu,P=window;if(p){var F=aA(n),V="clientHeight",X="clientWidth";if(F===Vc(n)&&(F=Kg(n),sm(F).position!=="static"&&h==="absolute"&&(V="scrollHeight",X="scrollWidth")),F=F,r===Zu||(r===Qu||r===Hh)&&a===ES){O=Fh;var G=T&&F===P&&P.visualViewport?P.visualViewport.height:F[V];M-=G-i.height,M*=f?1:-1}if(r===Qu||(r===Zu||r===Fh)&&a===ES){I=Hh;var D=T&&F===P&&P.visualViewport?P.visualViewport.width:F[X];S-=D-i.width,S*=f?1:-1}}var Z=Object.assign({position:h},p&&zse),Y=v===!0?Vse({x:S,y:M},Vc(n)):{x:S,y:M};if(S=Y.x,M=Y.y,f){var j;return Object.assign({},Z,(j={},j[O]=w?"0":"",j[I]=E?"0":"",j.transform=(P.devicePixelRatio||1)<=1?"translate("+S+"px, "+M+"px)":"translate3d("+S+"px, "+M+"px, 0)",j))}return Object.assign({},Z,(e={},e[O]=w?M+"px":"",e[I]=E?S+"px":"",e.transform="",e))}function Wse(s){var e=s.state,n=s.options,i=n.gpuAcceleration,r=i===void 0?!0:i,a=n.adaptive,l=a===void 0?!0:a,h=n.roundOffsets,f=h===void 0?!0:h,p={placement:Sp(e.placement),variation:rT(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,p3(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,p3(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Xse={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wse,data:{}};var H$={passive:!0};function jse(s){var e=s.state,n=s.instance,i=s.options,r=i.scroll,a=r===void 0?!0:r,l=i.resize,h=l===void 0?!0:l,f=Vc(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&p.forEach(function(v){v.addEventListener("scroll",n.update,H$)}),h&&f.addEventListener("resize",n.update,H$),function(){a&&p.forEach(function(v){v.removeEventListener("scroll",n.update,H$)}),h&&f.removeEventListener("resize",n.update,H$)}}const Yse={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jse,data:{}};var Kse={left:"right",right:"left",bottom:"top",top:"bottom"};function px(s){return s.replace(/left|right|bottom|top/g,function(e){return Kse[e]})}var qse={start:"end",end:"start"};function m3(s){return s.replace(/start|end/g,function(e){return qse[e]})}function ON(s){var e=Vc(s),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function NN(s){return sT(Kg(s)).left+ON(s).scrollLeft}function Jse(s,e){var n=Vc(s),i=Kg(s),r=n.visualViewport,a=i.clientWidth,l=i.clientHeight,h=0,f=0;if(r){a=r.width,l=r.height;var p=A4();(p||!p&&e==="fixed")&&(h=r.offsetLeft,f=r.offsetTop)}return{width:a,height:l,x:h+NN(s),y:f}}function Zse(s){var e,n=Kg(s),i=ON(s),r=(e=s.ownerDocument)==null?void 0:e.body,a=Uv(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Uv(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),h=-i.scrollLeft+NN(s),f=-i.scrollTop;return sm(r||n).direction==="rtl"&&(h+=Uv(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:l,x:h,y:f}}function LN(s){var e=sm(s),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function R4(s){return["html","body","#document"].indexOf(Cp(s))>=0?s.ownerDocument.body:Bh(s)&&LN(s)?s:R4(KM(s))}function JE(s,e){var n;e===void 0&&(e=[]);var i=R4(s),r=i===((n=s.ownerDocument)==null?void 0:n.body),a=Vc(i),l=r?[a].concat(a.visualViewport||[],LN(i)?i:[]):i,h=e.concat(l);return r?h:h.concat(JE(KM(l)))}function NO(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function Qse(s,e){var n=sT(s,!1,e==="fixed");return n.top=n.top+s.clientTop,n.left=n.left+s.clientLeft,n.bottom=n.top+s.clientHeight,n.right=n.left+s.clientWidth,n.width=s.clientWidth,n.height=s.clientHeight,n.x=n.left,n.y=n.top,n}function g3(s,e,n){return e===E4?NO(Jse(s,n)):Qv(e)?Qse(e,n):NO(Zse(Kg(s)))}function ere(s){var e=JE(KM(s)),n=["absolute","fixed"].indexOf(sm(s).position)>=0,i=n&&Bh(s)?aA(s):s;return Qv(i)?e.filter(function(r){return Qv(r)&&$4(r,i)&&Cp(r)!=="body"}):[]}function tre(s,e,n,i){var r=e==="clippingParents"?ere(s):[].concat(e),a=[].concat(r,[n]),l=a[0],h=a.reduce(function(f,p){var v=g3(s,p,i);return f.top=Uv(v.top,f.top),f.right=IC(v.right,f.right),f.bottom=IC(v.bottom,f.bottom),f.left=Uv(v.left,f.left),f},g3(s,l,i));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}function w4(s){var e=s.reference,n=s.element,i=s.placement,r=i?Sp(i):null,a=i?rT(i):null,l=e.x+e.width/2-n.width/2,h=e.y+e.height/2-n.height/2,f;switch(r){case Zu:f={x:l,y:e.y-n.height};break;case Fh:f={x:l,y:e.y+e.height};break;case Hh:f={x:e.x+e.width,y:h};break;case Qu:f={x:e.x-n.width,y:h};break;default:f={x:e.x,y:e.y}}var p=r?IN(r):null;if(p!=null){var v=p==="y"?"height":"width";switch(a){case nT:f[p]=f[p]-(e[v]/2-n[v]/2);break;case ES:f[p]=f[p]+(e[v]/2-n[v]/2);break}}return f}function SS(s,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?s.placement:i,a=n.strategy,l=a===void 0?s.strategy:a,h=n.boundary,f=h===void 0?Tse:h,p=n.rootBoundary,v=p===void 0?E4:p,T=n.elementContext,y=T===void 0?vE:T,S=n.altBoundary,$=S===void 0?!1:S,M=n.padding,C=M===void 0?0:M,E=C4(typeof C!="number"?C:M4(C,oA)),w=y===vE?Ese:vE,I=s.rects.popper,O=s.elements[$?w:y],P=tre(Qv(O)?O:O.contextElement||Kg(s.elements.popper),f,v,l),F=sT(s.elements.reference),V=w4({reference:F,element:I,placement:r}),X=NO(Object.assign({},I,V)),G=y===vE?X:F,D={top:P.top-G.top+E.top,bottom:G.bottom-P.bottom+E.bottom,left:P.left-G.left+E.left,right:G.right-P.right+E.right},Z=s.modifiersData.offset;if(y===vE&&Z){var Y=Z[r];Object.keys(D).forEach(function(j){var ne=[Hh,Fh].indexOf(j)>=0?1:-1,ee=[Zu,Fh].indexOf(j)>=0?"y":"x";D[j]+=Y[ee]*ne})}return D}function nre(s,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,a=n.rootBoundary,l=n.padding,h=n.flipVariations,f=n.allowedAutoPlacements,p=f===void 0?S4:f,v=rT(i),T=v?h?d3:d3.filter(function($){return rT($)===v}):oA,y=T.filter(function($){return p.indexOf($)>=0});y.length===0&&(y=T);var S=y.reduce(function($,M){return $[M]=SS(s,{placement:M,boundary:r,rootBoundary:a,padding:l})[Sp(M)],$},{});return Object.keys(S).sort(function($,M){return S[$]-S[M]})}function ire(s){if(Sp(s)===MN)return[];var e=px(s);return[m3(s),e,m3(e)]}function sre(s){var e=s.state,n=s.options,i=s.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,l=n.altAxis,h=l===void 0?!0:l,f=n.fallbackPlacements,p=n.padding,v=n.boundary,T=n.rootBoundary,y=n.altBoundary,S=n.flipVariations,$=S===void 0?!0:S,M=n.allowedAutoPlacements,C=e.options.placement,E=Sp(C),w=E===C,I=f||(w||!$?[px(C)]:ire(C)),O=[C].concat(I).reduce(function(Ee,We){return Ee.concat(Sp(We)===MN?nre(e,{placement:We,boundary:v,rootBoundary:T,padding:p,flipVariations:$,allowedAutoPlacements:M}):We)},[]),P=e.rects.reference,F=e.rects.popper,V=new Map,X=!0,G=O[0],D=0;D<O.length;D++){var Z=O[D],Y=Sp(Z),j=rT(Z)===nT,ne=[Zu,Fh].indexOf(Y)>=0,ee=ne?"width":"height",z=SS(e,{placement:Z,boundary:v,rootBoundary:T,altBoundary:y,padding:p}),te=ne?j?Hh:Qu:j?Fh:Zu;P[ee]>F[ee]&&(te=px(te));var ce=px(te),pe=[];if(a&&pe.push(z[Y]<=0),h&&pe.push(z[te]<=0,z[ce]<=0),pe.every(function(Ee){return Ee})){G=Z,X=!1;break}V.set(Z,pe)}if(X)for(var K=$?3:1,fe=function(We){var Fe=O.find(function(gt){var ft=V.get(gt);if(ft)return ft.slice(0,We).every(function(Ut){return Ut})});if(Fe)return G=Fe,"break"},Ne=K;Ne>0;Ne--){var Pe=fe(Ne);if(Pe==="break")break}e.placement!==G&&(e.modifiersData[i]._skip=!0,e.placement=G,e.reset=!0)}}const rre={name:"flip",enabled:!0,phase:"main",fn:sre,requiresIfExists:["offset"],data:{_skip:!1}};function _3(s,e,n){return n===void 0&&(n={x:0,y:0}),{top:s.top-e.height-n.y,right:s.right-e.width+n.x,bottom:s.bottom-e.height+n.y,left:s.left-e.width-n.x}}function v3(s){return[Zu,Hh,Fh,Qu].some(function(e){return s[e]>=0})}function ore(s){var e=s.state,n=s.name,i=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,l=SS(e,{elementContext:"reference"}),h=SS(e,{altBoundary:!0}),f=_3(l,i),p=_3(h,r,a),v=v3(f),T=v3(p);e.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:p,isReferenceHidden:v,hasPopperEscaped:T},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":v,"data-popper-escaped":T})}const are={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ore};function lre(s,e,n){var i=Sp(s),r=[Qu,Zu].indexOf(i)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:s})):n,l=a[0],h=a[1];return l=l||0,h=(h||0)*r,[Qu,Hh].indexOf(i)>=0?{x:h,y:l}:{x:l,y:h}}function ure(s){var e=s.state,n=s.options,i=s.name,r=n.offset,a=r===void 0?[0,0]:r,l=S4.reduce(function(v,T){return v[T]=lre(T,e.rects,a),v},{}),h=l[e.placement],f=h.x,p=h.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=p),e.modifiersData[i]=l}const cre={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ure};function hre(s){var e=s.state,n=s.name;e.modifiersData[n]=w4({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const dre={name:"popperOffsets",enabled:!0,phase:"read",fn:hre,data:{}};function fre(s){return s==="x"?"y":"x"}function pre(s){var e=s.state,n=s.options,i=s.name,r=n.mainAxis,a=r===void 0?!0:r,l=n.altAxis,h=l===void 0?!1:l,f=n.boundary,p=n.rootBoundary,v=n.altBoundary,T=n.padding,y=n.tether,S=y===void 0?!0:y,$=n.tetherOffset,M=$===void 0?0:$,C=SS(e,{boundary:f,rootBoundary:p,padding:T,altBoundary:v}),E=Sp(e.placement),w=rT(e.placement),I=!w,O=IN(E),P=fre(O),F=e.modifiersData.popperOffsets,V=e.rects.reference,X=e.rects.popper,G=typeof M=="function"?M(Object.assign({},e.rects,{placement:e.placement})):M,D=typeof G=="number"?{mainAxis:G,altAxis:G}:Object.assign({mainAxis:0,altAxis:0},G),Z=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Y={x:0,y:0};if(F){if(a){var j,ne=O==="y"?Zu:Qu,ee=O==="y"?Fh:Hh,z=O==="y"?"height":"width",te=F[O],ce=te+C[ne],pe=te-C[ee],K=S?-X[z]/2:0,fe=w===nT?V[z]:X[z],Ne=w===nT?-X[z]:-V[z],Pe=e.elements.arrow,Ee=S&&Pe?wN(Pe):{width:0,height:0},We=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:x4(),Fe=We[ne],gt=We[ee],ft=qE(0,V[z],Ee[z]),Ut=I?V[z]/2-K-ft-Fe-D.mainAxis:fe-ft-Fe-D.mainAxis,Ke=I?-V[z]/2+K+ft+gt+D.mainAxis:Ne+ft+gt+D.mainAxis,Ht=e.elements.arrow&&aA(e.elements.arrow),Re=Ht?O==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,Ye=(j=Z?.[O])!=null?j:0,J=te+Ut-Ye-Re,Se=te+Ke-Ye,Ae=qE(S?IC(ce,J):ce,te,S?Uv(pe,Se):pe);F[O]=Ae,Y[O]=Ae-te}if(h){var we,Ie=O==="x"?Zu:Qu,dt=O==="x"?Fh:Hh,Qe=F[P],vt=P==="y"?"height":"width",et=Qe+C[Ie],_e=Qe-C[dt],se=[Zu,Qu].indexOf(E)!==-1,$e=(we=Z?.[P])!=null?we:0,Le=se?et:Qe-V[vt]-X[vt]-$e+D.altAxis,Xe=se?Qe+V[vt]+X[vt]-$e-D.altAxis:_e,Ve=S&&se?Pse(Le,Qe,Xe):qE(S?Le:et,Qe,S?Xe:_e);F[P]=Ve,Y[P]=Ve-Qe}e.modifiersData[i]=Y}}const mre={name:"preventOverflow",enabled:!0,phase:"main",fn:pre,requiresIfExists:["offset"]};function gre(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function _re(s){return s===Vc(s)||!Bh(s)?ON(s):gre(s)}function vre(s){var e=s.getBoundingClientRect(),n=iT(e.width)/s.offsetWidth||1,i=iT(e.height)/s.offsetHeight||1;return n!==1||i!==1}function bre(s,e,n){n===void 0&&(n=!1);var i=Bh(e),r=Bh(e)&&vre(e),a=Kg(e),l=sT(s,r,n),h={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(i||!i&&!n)&&((Cp(e)!=="body"||LN(a))&&(h=_re(e)),Bh(e)?(f=sT(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):a&&(f.x=NN(a))),{x:l.left+h.scrollLeft-f.x,y:l.top+h.scrollTop-f.y,width:l.width,height:l.height}}function yre(s){var e=new Map,n=new Set,i=[];s.forEach(function(a){e.set(a.name,a)});function r(a){n.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(h){if(!n.has(h)){var f=e.get(h);f&&r(f)}}),i.push(a)}return s.forEach(function(a){n.has(a.name)||r(a)}),i}function Tre(s){var e=yre(s);return Ose.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Ere(s){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(s())})})),e}}function Sre(s){var e=s.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var b3={placement:"bottom",modifiers:[],strategy:"absolute"};function y3(){for(var s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Are(s){s===void 0&&(s={});var e=s,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,a=r===void 0?b3:r;return function(h,f,p){p===void 0&&(p=a);var v={placement:"bottom",orderedModifiers:[],options:Object.assign({},b3,a),modifiersData:{},elements:{reference:h,popper:f},attributes:{},styles:{}},T=[],y=!1,S={state:v,setOptions:function(E){var w=typeof E=="function"?E(v.options):E;M(),v.options=Object.assign({},a,v.options,w),v.scrollParents={reference:Qv(h)?JE(h):h.contextElement?JE(h.contextElement):[],popper:JE(f)};var I=Tre(Sre([].concat(i,v.options.modifiers)));return v.orderedModifiers=I.filter(function(O){return O.enabled}),$(),S.update()},forceUpdate:function(){if(!y){var E=v.elements,w=E.reference,I=E.popper;if(y3(w,I)){v.rects={reference:bre(w,aA(I),v.options.strategy==="fixed"),popper:wN(I)},v.reset=!1,v.placement=v.options.placement,v.orderedModifiers.forEach(function(D){return v.modifiersData[D.name]=Object.assign({},D.data)});for(var O=0;O<v.orderedModifiers.length;O++){if(v.reset===!0){v.reset=!1,O=-1;continue}var P=v.orderedModifiers[O],F=P.fn,V=P.options,X=V===void 0?{}:V,G=P.name;typeof F=="function"&&(v=F({state:v,options:X,name:G,instance:S})||v)}}}},update:Ere(function(){return new Promise(function(C){S.forceUpdate(),C(v)})}),destroy:function(){M(),y=!0}};if(!y3(h,f))return S;S.setOptions(p).then(function(C){!y&&p.onFirstUpdate&&p.onFirstUpdate(C)});function $(){v.orderedModifiers.forEach(function(C){var E=C.name,w=C.options,I=w===void 0?{}:w,O=C.effect;if(typeof O=="function"){var P=O({state:v,name:E,instance:S,options:I}),F=function(){};T.push(P||F)}})}function M(){T.forEach(function(C){return C()}),T=[]}return S}}var $re=[Yse,dre,Xse,Dse,cre,rre,mre,Gse,are],xre=Are({defaultModifiers:$re});function Yu(s){const{elementType:e,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:r=!1,...a}=s,l=r?{}:b4(n,i),{props:h,internalRef:f}=y4({...a,externalSlotProps:l}),p=sa(f,l?.ref,s.additionalProps?.ref);return v4(e,{...h,ref:p},i)}function AT(s){return parseInt(Q.version,10)>=19?s?.props?.ref||null:s?.ref||null}function Cre(s){return typeof s=="function"?s():s}const I4=Q.forwardRef(function(e,n){const{children:i,container:r,disablePortal:a=!1}=e,[l,h]=Q.useState(null),f=sa(Q.isValidElement(i)?AT(i):null,n);if(Ph(()=>{a||h(Cre(r)||document.body)},[r,a]),Ph(()=>{if(l&&!a)return o3(n,l),()=>{o3(n,null)}},[n,l,a]),a){if(Q.isValidElement(i)){const p={ref:f};return Q.cloneElement(i,p)}return i}return l&&QO.createPortal(i,l)});function Mre(s){return Vi("MuiPopper",s)}Mi("MuiPopper",["root"]);function Rre(s,e){if(e==="ltr")return s;switch(s){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return s}}function LO(s){return typeof s=="function"?s():s}function wre(s){return s.nodeType!==void 0}const Ire=s=>{const{classes:e}=s;return Wi({root:["root"]},Mre,e)},Ore={},Nre=Q.forwardRef(function(e,n){const{anchorEl:i,children:r,direction:a,disablePortal:l,modifiers:h,open:f,placement:p,popperOptions:v,popperRef:T,slotProps:y={},slots:S={},TransitionProps:$,ownerState:M,...C}=e,E=Q.useRef(null),w=sa(E,n),I=Q.useRef(null),O=sa(I,T),P=Q.useRef(O);Ph(()=>{P.current=O},[O]),Q.useImperativeHandle(T,()=>I.current,[]);const F=Rre(p,a),[V,X]=Q.useState(F),[G,D]=Q.useState(LO(i));Q.useEffect(()=>{I.current&&I.current.forceUpdate()}),Q.useEffect(()=>{i&&D(LO(i))},[i]),Ph(()=>{if(!G||!f)return;const ee=ce=>{X(ce.placement)};let z=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ce})=>{ee(ce)}}];h!=null&&(z=z.concat(h)),v&&v.modifiers!=null&&(z=z.concat(v.modifiers));const te=xre(G,E.current,{placement:F,...v,modifiers:z});return P.current(te),()=>{te.destroy(),P.current(null)}},[G,l,h,f,v,F]);const Z={placement:V};$!==null&&(Z.TransitionProps=$);const Y=Ire(e),j=S.root??"div",ne=Yu({elementType:j,externalSlotProps:y.root,externalForwardedProps:C,additionalProps:{role:"tooltip",ref:w},ownerState:e,className:Y.root});return he.jsx(j,{...ne,children:typeof r=="function"?r(Z):r})}),Lre=Q.forwardRef(function(e,n){const{anchorEl:i,children:r,container:a,direction:l="ltr",disablePortal:h=!1,keepMounted:f=!1,modifiers:p,open:v,placement:T="bottom",popperOptions:y=Ore,popperRef:S,style:$,transition:M=!1,slotProps:C={},slots:E={},...w}=e,[I,O]=Q.useState(!0),P=()=>{O(!1)},F=()=>{O(!0)};if(!f&&!v&&(!M||I))return null;let V;if(a)V=a;else if(i){const D=LO(i);V=D&&wre(D)?Ea(D).body:Ea(null).body}const X=!v&&f&&(!M||I)?"none":void 0,G=M?{in:v,onEnter:P,onExited:F}:void 0;return he.jsx(I4,{disablePortal:h,container:V,children:he.jsx(Nre,{anchorEl:i,direction:l,disablePortal:h,modifiers:p,ref:n,open:M?!I:v,placement:T,popperOptions:y,popperRef:S,slotProps:C,slots:E,...w,style:{position:"fixed",top:0,left:0,display:X,...$},TransitionProps:G,children:r})})}),Dre=tn(Lre,{name:"MuiPopper",slot:"Root"})({}),O4=Q.forwardRef(function(e,n){const i=TT(),r=Ki({props:e,name:"MuiPopper"}),{anchorEl:a,component:l,components:h,componentsProps:f,container:p,disablePortal:v,keepMounted:T,modifiers:y,open:S,placement:$,popperOptions:M,popperRef:C,transition:E,slots:w,slotProps:I,...O}=r,P=w?.root??h?.Root,F={anchorEl:a,container:p,disablePortal:v,keepMounted:T,modifiers:y,open:S,placement:$,popperOptions:M,popperRef:C,transition:E,...O};return he.jsx(Dre,{as:l,direction:i?"rtl":"ltr",slots:{root:P},slotProps:I??f,...F,ref:n})});function G$(s){return parseInt(s,10)||0}const Bre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function kre(s){for(const e in s)return!1;return!0}function T3(s){return kre(s)||s.outerHeightStyle===0&&!s.overflowing}const Pre=Q.forwardRef(function(e,n){const{onChange:i,maxRows:r,minRows:a=1,style:l,value:h,...f}=e,{current:p}=Q.useRef(h!=null),v=Q.useRef(null),T=sa(n,v),y=Q.useRef(null),S=Q.useRef(null),$=Q.useCallback(()=>{const I=v.current,O=S.current;if(!I||!O)return;const F=rf(I).getComputedStyle(I);if(F.width==="0px")return{outerHeightStyle:0,overflowing:!1};O.style.width=F.width,O.value=I.value||e.placeholder||"x",O.value.slice(-1)===`
`&&(O.value+=" ");const V=F.boxSizing,X=G$(F.paddingBottom)+G$(F.paddingTop),G=G$(F.borderBottomWidth)+G$(F.borderTopWidth),D=O.scrollHeight;O.value="x";const Z=O.scrollHeight;let Y=D;a&&(Y=Math.max(Number(a)*Z,Y)),r&&(Y=Math.min(Number(r)*Z,Y)),Y=Math.max(Y,Z);const j=Y+(V==="border-box"?X+G:0),ne=Math.abs(Y-D)<=1;return{outerHeightStyle:j,overflowing:ne}},[r,a,e.placeholder]),M=du(()=>{const I=v.current,O=$();if(!I||!O||T3(O))return!1;const P=O.outerHeightStyle;return y.current!=null&&y.current!==P}),C=Q.useCallback(()=>{const I=v.current,O=$();if(!I||!O||T3(O))return;const P=O.outerHeightStyle;y.current!==P&&(y.current=P,I.style.height=`${P}px`),I.style.overflow=O.overflowing?"hidden":""},[$]),E=Q.useRef(-1);Ph(()=>{const I=jM(C),O=v?.current;if(!O)return;const P=rf(O);P.addEventListener("resize",I);let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(()=>{M()&&(F.unobserve(O),cancelAnimationFrame(E.current),C(),E.current=requestAnimationFrame(()=>{F.observe(O)}))}),F.observe(O)),()=>{I.clear(),cancelAnimationFrame(E.current),P.removeEventListener("resize",I),F&&F.disconnect()}},[$,C,M]),Ph(()=>{C()});const w=I=>{p||C();const O=I.target,P=O.value.length,F=O.value.endsWith(`
`),V=O.selectionStart===P;F&&V&&O.setSelectionRange(P,P),i&&i(I)};return he.jsxs(Q.Fragment,{children:[he.jsx("textarea",{value:h,onChange:w,ref:T,rows:a,style:l,...f}),he.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:S,tabIndex:-1,style:{...Bre.shadow,...l,paddingTop:0,paddingBottom:0}})]})});function Fv(s){return typeof s=="string"}function $T({props:s,states:e,muiFormControl:n}){return e.reduce((i,r)=>(i[r]=s[r],n&&typeof s[r]>"u"&&(i[r]=n[r]),i),{})}const DN=Q.createContext(void 0);function xT(){return Q.useContext(DN)}function E3(s){return s!=null&&!(Array.isArray(s)&&s.length===0)}function OC(s,e=!1){return s&&(E3(s.value)&&s.value!==""||e&&E3(s.defaultValue)&&s.defaultValue!=="")}function Ure(s){return s.startAdornment}function Fre(s){return Vi("MuiInputBase",s)}const oT=Mi("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var S3;const qM=(s,e)=>{const{ownerState:n}=s;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${En(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},JM=(s,e)=>{const{ownerState:n}=s;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Hre=s=>{const{classes:e,color:n,disabled:i,error:r,endAdornment:a,focused:l,formControl:h,fullWidth:f,hiddenLabel:p,multiline:v,readOnly:T,size:y,startAdornment:S,type:$}=s,M={root:["root",`color${En(n)}`,i&&"disabled",r&&"error",f&&"fullWidth",l&&"focused",h&&"formControl",y&&y!=="medium"&&`size${En(y)}`,v&&"multiline",S&&"adornedStart",a&&"adornedEnd",p&&"hiddenLabel",T&&"readOnly"],input:["input",i&&"disabled",$==="search"&&"inputTypeSearch",v&&"inputMultiline",y==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",S&&"inputAdornedStart",a&&"inputAdornedEnd",T&&"readOnly"]};return Wi(M,Fre,e)},ZM=tn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:qM})(Pi(({theme:s})=>({...s.typography.body1,color:(s.vars||s).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${oT.disabled}`]:{color:(s.vars||s).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),QM=tn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:JM})(Pi(({theme:s})=>{const e=s.palette.mode==="light",n={color:"currentColor",...s.vars?{opacity:s.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:s.transitions.create("opacity",{duration:s.transitions.duration.shorter})},i={opacity:"0 !important"},r=s.vars?{opacity:s.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${oT.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":r,"&:focus::-moz-placeholder":r,"&:focus::-ms-input-placeholder":r},[`&.${oT.disabled}`]:{opacity:1,WebkitTextFillColor:(s.vars||s).palette.text.disabled},variants:[{props:({ownerState:a})=>!a.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:a})=>a.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),A3=Sie({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),BN=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiInputBase"}),{"aria-describedby":r,autoComplete:a,autoFocus:l,className:h,color:f,components:p={},componentsProps:v={},defaultValue:T,disabled:y,disableInjectingGlobalStyles:S,endAdornment:$,error:M,fullWidth:C=!1,id:E,inputComponent:w="input",inputProps:I={},inputRef:O,margin:P,maxRows:F,minRows:V,multiline:X=!1,name:G,onBlur:D,onChange:Z,onClick:Y,onFocus:j,onKeyDown:ne,onKeyUp:ee,placeholder:z,readOnly:te,renderSuffix:ce,rows:pe,size:K,slotProps:fe={},slots:Ne={},startAdornment:Pe,type:Ee="text",value:We,...Fe}=i,gt=I.value!=null?I.value:We,{current:ft}=Q.useRef(gt!=null),Ut=Q.useRef(),Ke=Q.useCallback(At=>{},[]),Ht=sa(Ut,O,I.ref,Ke),[Re,Ye]=Q.useState(!1),J=xT(),Se=$T({props:i,muiFormControl:J,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Se.focused=J?J.focused:Re,Q.useEffect(()=>{!J&&y&&Re&&(Ye(!1),D&&D())},[J,y,Re,D]);const Ae=J&&J.onFilled,we=J&&J.onEmpty,Ie=Q.useCallback(At=>{OC(At)?Ae&&Ae():we&&we()},[Ae,we]);Ph(()=>{ft&&Ie({value:gt})},[gt,Ie,ft]);const dt=At=>{j&&j(At),I.onFocus&&I.onFocus(At),J&&J.onFocus?J.onFocus(At):Ye(!0)},Qe=At=>{D&&D(At),I.onBlur&&I.onBlur(At),J&&J.onBlur?J.onBlur(At):Ye(!1)},vt=(At,...Ft)=>{if(!ft){const H=At.target||Ut.current;if(H==null)throw new Error(nm(1));Ie({value:H.value})}I.onChange&&I.onChange(At,...Ft),Z&&Z(At,...Ft)};Q.useEffect(()=>{Ie(Ut.current)},[]);const et=At=>{Ut.current&&At.currentTarget===At.target&&Ut.current.focus(),Y&&Y(At)};let _e=w,se=I;X&&_e==="input"&&(pe?se={type:void 0,minRows:pe,maxRows:pe,...se}:se={type:void 0,maxRows:F,minRows:V,...se},_e=Pre);const $e=At=>{Ie(At.animationName==="mui-auto-fill-cancel"?Ut.current:{value:"x"})};Q.useEffect(()=>{J&&J.setAdornedStart(!!Pe)},[J,Pe]);const Le={...i,color:Se.color||"primary",disabled:Se.disabled,endAdornment:$,error:Se.error,focused:Se.focused,formControl:J,fullWidth:C,hiddenLabel:Se.hiddenLabel,multiline:X,size:Se.size,startAdornment:Pe,type:Ee},Xe=Hre(Le),Ve=Ne.root||p.Root||ZM,yt=fe.root||v.root||{},bt=Ne.input||p.Input||QM;return se={...se,...fe.input??v.input},he.jsxs(Q.Fragment,{children:[!S&&typeof A3=="function"&&(S3||(S3=he.jsx(A3,{}))),he.jsxs(Ve,{...yt,ref:n,onClick:et,...Fe,...!Fv(Ve)&&{ownerState:{...Le,...yt.ownerState}},className:$n(Xe.root,yt.className,h,te&&"MuiInputBase-readOnly"),children:[Pe,he.jsx(DN.Provider,{value:null,children:he.jsx(bt,{"aria-invalid":Se.error,"aria-describedby":r,autoComplete:a,autoFocus:l,defaultValue:T,disabled:Se.disabled,id:E,onAnimationStart:$e,name:G,placeholder:z,readOnly:te,required:Se.required,rows:pe,value:gt,onKeyDown:ne,onKeyUp:ee,type:Ee,...se,...!Fv(bt)&&{as:_e,ownerState:{...Le,...se.ownerState}},ref:Ht,className:$n(Xe.input,se.className,te&&"MuiInputBase-readOnly"),onBlur:Qe,onChange:vt,onFocus:dt})}),$,ce?ce({...Se,startAdornment:Pe}):null]})]})});function Gre(s){return Vi("MuiInput",s)}const bE={...oT,...Mi("MuiInput",["root","underline","input"])};function zre(s){return Vi("MuiOutlinedInput",s)}const op={...oT,...Mi("MuiOutlinedInput",["root","notchedOutline","input"])};function Vre(s){return Vi("MuiFilledInput",s)}const gv={...oT,...Mi("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Wre=Io(he.jsx("path",{d:"M7 10l5 5 5-5z"})),Xre={entering:{opacity:1},entered:{opacity:1}},DO=Q.forwardRef(function(e,n){const i=ab(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:a,appear:l=!0,children:h,easing:f,in:p,onEnter:v,onEntered:T,onEntering:y,onExit:S,onExited:$,onExiting:M,style:C,timeout:E=r,TransitionComponent:w=wp,...I}=e,O=Q.useRef(null),P=sa(O,AT(h),n),F=ne=>ee=>{if(ne){const z=O.current;ee===void 0?ne(z):ne(z,ee)}},V=F(y),X=F((ne,ee)=>{_4(ne);const z=RC({style:C,timeout:E,easing:f},{mode:"enter"});ne.style.webkitTransition=i.transitions.create("opacity",z),ne.style.transition=i.transitions.create("opacity",z),v&&v(ne,ee)}),G=F(T),D=F(M),Z=F(ne=>{const ee=RC({style:C,timeout:E,easing:f},{mode:"exit"});ne.style.webkitTransition=i.transitions.create("opacity",ee),ne.style.transition=i.transitions.create("opacity",ee),S&&S(ne)}),Y=F($),j=ne=>{a&&a(O.current,ne)};return he.jsx(w,{appear:l,in:p,nodeRef:O,onEnter:X,onEntered:G,onEntering:V,onExit:Z,onExited:Y,onExiting:D,addEndListener:j,timeout:E,...I,children:(ne,{ownerState:ee,...z})=>Q.cloneElement(h,{style:{opacity:0,visibility:ne==="exited"&&!p?"hidden":void 0,...Xre[ne],...C,...h.props.style},ref:P,...z})})});function jre(s){return Vi("MuiBackdrop",s)}Mi("MuiBackdrop",["root","invisible"]);const Yre=s=>{const{classes:e,invisible:n}=s;return Wi({root:["root",n&&"invisible"]},jre,e)},Kre=tn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),N4=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiBackdrop"}),{children:r,className:a,component:l="div",invisible:h=!1,open:f,components:p={},componentsProps:v={},slotProps:T={},slots:y={},TransitionComponent:S,transitionDuration:$,...M}=i,C={...i,component:l,invisible:h},E=Yre(C),w={transition:S,root:p.Root,...y},I={...v,...T},O={component:l,slots:w,slotProps:I},[P,F]=Es("root",{elementType:Kre,externalForwardedProps:O,className:$n(E.root,a),ownerState:C}),[V,X]=Es("transition",{elementType:DO,externalForwardedProps:O,ownerState:C});return he.jsx(V,{in:f,timeout:$,...M,...X,children:he.jsx(P,{"aria-hidden":!0,...F,classes:E,ref:n,children:r})})});function qre(s){return Vi("MuiButton",s)}const _v=Mi("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Jre=Q.createContext({}),Zre=Q.createContext(void 0),Qre=s=>{const{color:e,disableElevation:n,fullWidth:i,size:r,variant:a,loading:l,loadingPosition:h,classes:f}=s,p={root:["root",l&&"loading",a,`${a}${En(e)}`,`size${En(r)}`,`${a}Size${En(r)}`,`color${En(e)}`,n&&"disableElevation",i&&"fullWidth",l&&`loadingPosition${En(h)}`],startIcon:["icon","startIcon",`iconSize${En(r)}`],endIcon:["icon","endIcon",`iconSize${En(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},v=Wi(p,qre,f);return{...f,...v}},L4=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],eoe=tn(rA,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiButton",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,e[n.variant],e[`${n.variant}${En(n.color)}`],e[`size${En(n.size)}`],e[`${n.variant}Size${En(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(Pi(({theme:s})=>{const e=s.palette.mode==="light"?s.palette.grey[300]:s.palette.grey[800],n=s.palette.mode==="light"?s.palette.grey.A100:s.palette.grey[700];return{...s.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(s.vars||s).shape.borderRadius,transition:s.transitions.create(["background-color","box-shadow","border-color","color"],{duration:s.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${_v.disabled}`]:{color:(s.vars||s).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(s.vars||s).shadows[2],"&:hover":{boxShadow:(s.vars||s).shadows[4],"@media (hover: none)":{boxShadow:(s.vars||s).shadows[2]}},"&:active":{boxShadow:(s.vars||s).shadows[8]},[`&.${_v.focusVisible}`]:{boxShadow:(s.vars||s).shadows[6]},[`&.${_v.disabled}`]:{color:(s.vars||s).palette.action.disabled,boxShadow:(s.vars||s).shadows[0],backgroundColor:(s.vars||s).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${_v.disabled}`]:{border:`1px solid ${(s.vars||s).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(s.palette).filter(Uh()).map(([i])=>({props:{color:i},style:{"--variant-textColor":(s.vars||s).palette[i].main,"--variant-outlinedColor":(s.vars||s).palette[i].main,"--variant-outlinedBorder":s.vars?`rgba(${s.vars.palette[i].mainChannel} / 0.5)`:ya(s.palette[i].main,.5),"--variant-containedColor":(s.vars||s).palette[i].contrastText,"--variant-containedBg":(s.vars||s).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(s.vars||s).palette[i].dark,"--variant-textBg":s.vars?`rgba(${s.vars.palette[i].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:ya(s.palette[i].main,s.palette.action.hoverOpacity),"--variant-outlinedBorder":(s.vars||s).palette[i].main,"--variant-outlinedBg":s.vars?`rgba(${s.vars.palette[i].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:ya(s.palette[i].main,s.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":s.vars?s.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":s.vars?s.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":s.vars?`rgba(${s.vars.palette.text.primaryChannel} / ${s.vars.palette.action.hoverOpacity})`:ya(s.palette.text.primary,s.palette.action.hoverOpacity),"--variant-outlinedBg":s.vars?`rgba(${s.vars.palette.text.primaryChannel} / ${s.vars.palette.action.hoverOpacity})`:ya(s.palette.text.primary,s.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:s.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:s.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:s.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:s.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:s.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:s.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${_v.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${_v.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:s.transitions.create(["background-color","box-shadow","border-color"],{duration:s.transitions.duration.short}),[`&.${_v.loading}`]:{color:"transparent"}}}]}})),toe=tn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${En(n.size)}`]]}})(({theme:s})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:s.transitions.create(["opacity"],{duration:s.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...L4]})),noe=tn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${En(n.size)}`]]}})(({theme:s})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:s.transitions.create(["opacity"],{duration:s.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...L4]})),ioe=tn("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:s})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(s.vars||s).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),$3=tn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),NC=Q.forwardRef(function(e,n){const i=Q.useContext(Jre),r=Q.useContext(Zre),a=bS(i,e),l=Ki({props:a,name:"MuiButton"}),{children:h,color:f="primary",component:p="button",className:v,disabled:T=!1,disableElevation:y=!1,disableFocusRipple:S=!1,endIcon:$,focusVisibleClassName:M,fullWidth:C=!1,id:E,loading:w=null,loadingIndicator:I,loadingPosition:O="center",size:P="medium",startIcon:F,type:V,variant:X="text",...G}=l,D=ET(E),Z=I??he.jsx(T4,{"aria-labelledby":D,color:"inherit",size:16}),Y={...l,color:f,component:p,disabled:T,disableElevation:y,disableFocusRipple:S,fullWidth:C,loading:w,loadingIndicator:Z,loadingPosition:O,size:P,type:V,variant:X},j=Qre(Y),ne=(F||w&&O==="start")&&he.jsx(toe,{className:j.startIcon,ownerState:Y,children:F||he.jsx($3,{className:j.loadingIconPlaceholder,ownerState:Y})}),ee=($||w&&O==="end")&&he.jsx(noe,{className:j.endIcon,ownerState:Y,children:$||he.jsx($3,{className:j.loadingIconPlaceholder,ownerState:Y})}),z=r||"",te=typeof w=="boolean"?he.jsx("span",{className:j.loadingWrapper,style:{display:"contents"},children:w&&he.jsx(ioe,{className:j.loadingIndicator,ownerState:Y,children:Z})}):null;return he.jsxs(eoe,{ownerState:Y,className:$n(i.className,j.root,v,z),component:p,disabled:T||w,focusRipple:!S,focusVisibleClassName:$n(j.focusVisible,M),ref:n,type:V,id:w?D:E,...G,classes:j,children:[ne,O!=="end"&&te,h,O==="end"&&te,ee]})});function D4(s=window){const e=s.document.documentElement.clientWidth;return s.innerWidth-e}function soe(s){const e=Ea(s);return e.body===s?rf(s).innerWidth>e.documentElement.clientWidth:s.scrollHeight>s.clientHeight}function ZE(s,e){e?s.setAttribute("aria-hidden","true"):s.removeAttribute("aria-hidden")}function x3(s){return parseInt(rf(s).getComputedStyle(s).paddingRight,10)||0}function roe(s){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(s.tagName),i=s.tagName==="INPUT"&&s.getAttribute("type")==="hidden";return n||i}function C3(s,e,n,i,r){const a=[e,n,...i];[].forEach.call(s.children,l=>{const h=!a.includes(l),f=!roe(l);h&&f&&ZE(l,r)})}function Mw(s,e){let n=-1;return s.some((i,r)=>e(i)?(n=r,!0):!1),n}function ooe(s,e){const n=[],i=s.container;if(!e.disableScrollLock){if(soe(i)){const l=D4(rf(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${x3(i)+l}px`;const h=Ea(i).querySelectorAll(".mui-fixed");[].forEach.call(h,f=>{n.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${x3(f)+l}px`})}let a;if(i.parentNode instanceof DocumentFragment)a=Ea(i).body;else{const l=i.parentElement,h=rf(i);a=l?.nodeName==="HTML"&&h.getComputedStyle(l).overflowY==="scroll"?l:i}n.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{n.forEach(({value:a,el:l,property:h})=>{a?l.style.setProperty(h,a):l.style.removeProperty(h)})}}function aoe(s){const e=[];return[].forEach.call(s.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class loe{constructor(){this.modals=[],this.containers=[]}add(e,n){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&ZE(e.modalRef,!1);const r=aoe(n);C3(n,e.mount,e.modalRef,r,!0);const a=Mw(this.containers,l=>l.container===n);return a!==-1?(this.containers[a].modals.push(e),i):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:r}),i)}mount(e,n){const i=Mw(this.containers,a=>a.modals.includes(e)),r=this.containers[i];r.restore||(r.restore=ooe(r,n))}remove(e,n=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const r=Mw(this.containers,l=>l.modals.includes(e)),a=this.containers[r];if(a.modals.splice(a.modals.indexOf(e),1),this.modals.splice(i,1),a.modals.length===0)a.restore&&a.restore(),e.modalRef&&ZE(e.modalRef,n),C3(a.container,e.mount,e.modalRef,a.hiddenSiblings,!1),this.containers.splice(r,1);else{const l=a.modals[a.modals.length-1];l.modalRef&&ZE(l.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const uoe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function coe(s){const e=parseInt(s.getAttribute("tabindex")||"",10);return Number.isNaN(e)?s.contentEditable==="true"||(s.nodeName==="AUDIO"||s.nodeName==="VIDEO"||s.nodeName==="DETAILS")&&s.getAttribute("tabindex")===null?0:s.tabIndex:e}function hoe(s){if(s.tagName!=="INPUT"||s.type!=="radio"||!s.name)return!1;const e=i=>s.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=e(`[name="${s.name}"]:checked`);return n||(n=e(`[name="${s.name}"]`)),n!==s}function doe(s){return!(s.disabled||s.tagName==="INPUT"&&s.type==="hidden"||hoe(s))}function foe(s){const e=[],n=[];return Array.from(s.querySelectorAll(uoe)).forEach((i,r)=>{const a=coe(i);a===-1||!doe(i)||(a===0?e.push(i):n.push({documentOrder:r,tabIndex:a,node:i}))}),n.sort((i,r)=>i.tabIndex===r.tabIndex?i.documentOrder-r.documentOrder:i.tabIndex-r.tabIndex).map(i=>i.node).concat(e)}function poe(){return!0}function moe(s){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:r=!1,getTabbable:a=foe,isEnabled:l=poe,open:h}=s,f=Q.useRef(!1),p=Q.useRef(null),v=Q.useRef(null),T=Q.useRef(null),y=Q.useRef(null),S=Q.useRef(!1),$=Q.useRef(null),M=sa(AT(e),$),C=Q.useRef(null);Q.useEffect(()=>{!h||!$.current||(S.current=!n)},[n,h]),Q.useEffect(()=>{if(!h||!$.current)return;const I=Ea($.current);return $.current.contains(I.activeElement)||($.current.hasAttribute("tabIndex")||$.current.setAttribute("tabIndex","-1"),S.current&&$.current.focus()),()=>{r||(T.current&&T.current.focus&&(f.current=!0,T.current.focus()),T.current=null)}},[h]),Q.useEffect(()=>{if(!h||!$.current)return;const I=Ea($.current),O=V=>{C.current=V,!(i||!l()||V.key!=="Tab")&&I.activeElement===$.current&&V.shiftKey&&(f.current=!0,v.current&&v.current.focus())},P=()=>{const V=$.current;if(V===null)return;if(!I.hasFocus()||!l()||f.current){f.current=!1;return}if(V.contains(I.activeElement)||i&&I.activeElement!==p.current&&I.activeElement!==v.current)return;if(I.activeElement!==y.current)y.current=null;else if(y.current!==null)return;if(!S.current)return;let X=[];if((I.activeElement===p.current||I.activeElement===v.current)&&(X=a($.current)),X.length>0){const G=!!(C.current?.shiftKey&&C.current?.key==="Tab"),D=X[0],Z=X[X.length-1];typeof D!="string"&&typeof Z!="string"&&(G?Z.focus():D.focus())}else V.focus()};I.addEventListener("focusin",P),I.addEventListener("keydown",O,!0);const F=setInterval(()=>{I.activeElement&&I.activeElement.tagName==="BODY"&&P()},50);return()=>{clearInterval(F),I.removeEventListener("focusin",P),I.removeEventListener("keydown",O,!0)}},[n,i,r,l,h,a]);const E=I=>{T.current===null&&(T.current=I.relatedTarget),S.current=!0,y.current=I.target;const O=e.props.onFocus;O&&O(I)},w=I=>{T.current===null&&(T.current=I.relatedTarget),S.current=!0};return he.jsxs(Q.Fragment,{children:[he.jsx("div",{tabIndex:h?0:-1,onFocus:w,ref:p,"data-testid":"sentinelStart"}),Q.cloneElement(e,{ref:M,onFocus:E}),he.jsx("div",{tabIndex:h?0:-1,onFocus:w,ref:v,"data-testid":"sentinelEnd"})]})}function goe(s){return typeof s=="function"?s():s}function _oe(s){return s?s.props.hasOwnProperty("in"):!1}const M3=()=>{},z$=new loe;function voe(s){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,closeAfterTransition:r=!1,onTransitionEnter:a,onTransitionExited:l,children:h,onClose:f,open:p,rootRef:v}=s,T=Q.useRef({}),y=Q.useRef(null),S=Q.useRef(null),$=sa(S,v),[M,C]=Q.useState(!p),E=_oe(h);let w=!0;(s["aria-hidden"]==="false"||s["aria-hidden"]===!1)&&(w=!1);const I=()=>Ea(y.current),O=()=>(T.current.modalRef=S.current,T.current.mount=y.current,T.current),P=()=>{z$.mount(O(),{disableScrollLock:i}),S.current&&(S.current.scrollTop=0)},F=du(()=>{const ee=goe(e)||I().body;z$.add(O(),ee),S.current&&P()}),V=()=>z$.isTopModal(O()),X=du(ee=>{y.current=ee,ee&&(p&&V()?P():S.current&&ZE(S.current,w))}),G=Q.useCallback(()=>{z$.remove(O(),w)},[w]);Q.useEffect(()=>()=>{G()},[G]),Q.useEffect(()=>{p?F():(!E||!r)&&G()},[p,G,E,r,F]);const D=ee=>z=>{ee.onKeyDown?.(z),!(z.key!=="Escape"||z.which===229||!V())&&(n||(z.stopPropagation(),f&&f(z,"escapeKeyDown")))},Z=ee=>z=>{ee.onClick?.(z),z.target===z.currentTarget&&f&&f(z,"backdropClick")};return{getRootProps:(ee={})=>{const z=KE(s);delete z.onTransitionEnter,delete z.onTransitionExited;const te={...z,...ee};return{role:"presentation",...te,onKeyDown:D(te),ref:$}},getBackdropProps:(ee={})=>{const z=ee;return{"aria-hidden":!0,...z,onClick:Z(z),open:p}},getTransitionProps:()=>{const ee=()=>{C(!1),a&&a()},z=()=>{C(!0),l&&l(),r&&G()};return{onEnter:r3(ee,h?.props.onEnter??M3),onExited:r3(z,h?.props.onExited??M3)}},rootRef:$,portalRef:X,isTopModal:V,exited:M,hasTransition:E}}function boe(s){return Vi("MuiModal",s)}Mi("MuiModal",["root","hidden","backdrop"]);const yoe=s=>{const{open:e,exited:n,classes:i}=s;return Wi({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},boe,i)},Toe=tn("div",{name:"MuiModal",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,!n.open&&n.exited&&e.hidden]}})(Pi(({theme:s})=>({position:"fixed",zIndex:(s.vars||s).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Eoe=tn(N4,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),B4=Q.forwardRef(function(e,n){const i=Ki({name:"MuiModal",props:e}),{BackdropComponent:r=Eoe,BackdropProps:a,classes:l,className:h,closeAfterTransition:f=!1,children:p,container:v,component:T,components:y={},componentsProps:S={},disableAutoFocus:$=!1,disableEnforceFocus:M=!1,disableEscapeKeyDown:C=!1,disablePortal:E=!1,disableRestoreFocus:w=!1,disableScrollLock:I=!1,hideBackdrop:O=!1,keepMounted:P=!1,onClose:F,onTransitionEnter:V,onTransitionExited:X,open:G,slotProps:D={},slots:Z={},theme:Y,...j}=i,ne={...i,closeAfterTransition:f,disableAutoFocus:$,disableEnforceFocus:M,disableEscapeKeyDown:C,disablePortal:E,disableRestoreFocus:w,disableScrollLock:I,hideBackdrop:O,keepMounted:P},{getRootProps:ee,getBackdropProps:z,getTransitionProps:te,portalRef:ce,isTopModal:pe,exited:K,hasTransition:fe}=voe({...ne,rootRef:n}),Ne={...ne,exited:K},Pe=yoe(Ne),Ee={};if(p.props.tabIndex===void 0&&(Ee.tabIndex="-1"),fe){const{onEnter:Ke,onExited:Ht}=te();Ee.onEnter=Ke,Ee.onExited=Ht}const We={slots:{root:y.Root,backdrop:y.Backdrop,...Z},slotProps:{...S,...D}},[Fe,gt]=Es("root",{ref:n,elementType:Toe,externalForwardedProps:{...We,...j,component:T},getSlotProps:ee,ownerState:Ne,className:$n(h,Pe?.root,!Ne.open&&Ne.exited&&Pe?.hidden)}),[ft,Ut]=Es("backdrop",{ref:a?.ref,elementType:r,externalForwardedProps:We,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:Ke=>z({...Ke,onClick:Ht=>{Ke?.onClick&&Ke.onClick(Ht)}}),className:$n(a?.className,Pe?.backdrop),ownerState:Ne});return!P&&!G&&(!fe||K)?null:he.jsx(I4,{ref:ce,container:v,disablePortal:E,children:he.jsxs(Fe,{...gt,children:[!O&&r?he.jsx(ft,{...Ut}):null,he.jsx(moe,{disableEnforceFocus:M,disableAutoFocus:$,disableRestoreFocus:w,isEnabled:pe,open:G,children:Q.cloneElement(p,Ee)})]})})});function Soe(s){return Vi("MuiDialog",s)}const Rw=Mi("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),k4=Q.createContext({}),Aoe=tn(N4,{name:"MuiDialog",slot:"Backdrop",overrides:(s,e)=>e.backdrop})({zIndex:-1}),$oe=s=>{const{classes:e,scroll:n,maxWidth:i,fullWidth:r,fullScreen:a}=s,l={root:["root"],container:["container",`scroll${En(n)}`],paper:["paper",`paperScroll${En(n)}`,`paperWidth${En(String(i))}`,r&&"paperFullWidth",a&&"paperFullScreen"]};return Wi(l,Soe,e)},xoe=tn(B4,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Coe=tn("div",{name:"MuiDialog",slot:"Container",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.container,e[`scroll${En(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Moe=tn(CN,{name:"MuiDialog",slot:"Paper",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.paper,e[`scrollPaper${En(n.scroll)}`],e[`paperWidth${En(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(Pi(({theme:s})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:s.breakpoints.unit==="px"?Math.max(s.breakpoints.values.xs,444):`max(${s.breakpoints.values.xs}${s.breakpoints.unit}, 444px)`,[`&.${Rw.paperScrollBody}`]:{[s.breakpoints.down(Math.max(s.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(s.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${s.breakpoints.values[e]}${s.breakpoints.unit}`,[`&.${Rw.paperScrollBody}`]:{[s.breakpoints.down(s.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Rw.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),P4=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiDialog"}),r=ab(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":h,"aria-modal":f=!0,BackdropComponent:p,BackdropProps:v,children:T,className:y,disableEscapeKeyDown:S=!1,fullScreen:$=!1,fullWidth:M=!1,maxWidth:C="sm",onClick:E,onClose:w,open:I,PaperComponent:O=CN,PaperProps:P={},scroll:F="paper",slots:V={},slotProps:X={},TransitionComponent:G=DO,transitionDuration:D=a,TransitionProps:Z,...Y}=i,j={...i,disableEscapeKeyDown:S,fullScreen:$,fullWidth:M,maxWidth:C,scroll:F},ne=$oe(j),ee=Q.useRef(),z=Ye=>{ee.current=Ye.target===Ye.currentTarget},te=Ye=>{E&&E(Ye),ee.current&&(ee.current=null,w&&w(Ye,"backdropClick"))},ce=ET(h),pe=Q.useMemo(()=>({titleId:ce}),[ce]),K={transition:G,...V},fe={transition:Z,paper:P,backdrop:v,...X},Ne={slots:K,slotProps:fe},[Pe,Ee]=Es("root",{elementType:xoe,shouldForwardComponentProp:!0,externalForwardedProps:Ne,ownerState:j,className:$n(ne.root,y),ref:n}),[We,Fe]=Es("backdrop",{elementType:Aoe,shouldForwardComponentProp:!0,externalForwardedProps:Ne,ownerState:j}),[gt,ft]=Es("paper",{elementType:Moe,shouldForwardComponentProp:!0,externalForwardedProps:Ne,ownerState:j,className:$n(ne.paper,P.className)}),[Ut,Ke]=Es("container",{elementType:Coe,externalForwardedProps:Ne,ownerState:j,className:ne.container}),[Ht,Re]=Es("transition",{elementType:DO,externalForwardedProps:Ne,ownerState:j,additionalProps:{appear:!0,in:I,timeout:D,role:"presentation"}});return he.jsx(Pe,{closeAfterTransition:!0,slots:{backdrop:We},slotProps:{backdrop:{transitionDuration:D,as:p,...Fe}},disableEscapeKeyDown:S,onClose:w,open:I,onClick:te,...Ee,...Y,children:he.jsx(Ht,{...Re,children:he.jsx(Ut,{onMouseDown:z,...Ke,children:he.jsx(gt,{as:O,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ce,"aria-modal":f,...ft,children:he.jsx(k4.Provider,{value:pe,children:T})})})})})});function Roe(s){return Vi("MuiDialogActions",s)}Mi("MuiDialogActions",["root","spacing"]);const woe=s=>{const{classes:e,disableSpacing:n}=s;return Wi({root:["root",!n&&"spacing"]},Roe,e)},Ioe=tn("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:s})=>!s.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),U4=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:a=!1,...l}=i,h={...i,disableSpacing:a},f=woe(h);return he.jsx(Ioe,{className:$n(f.root,r),ownerState:h,ref:n,...l})});function Ooe(s){return Vi("MuiDialogContent",s)}Mi("MuiDialogContent",["root","dividers"]);function Noe(s){return Vi("MuiDialogTitle",s)}const Loe=Mi("MuiDialogTitle",["root"]),Doe=s=>{const{classes:e,dividers:n}=s;return Wi({root:["root",n&&"dividers"]},Ooe,e)},Boe=tn("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.dividers&&e.dividers]}})(Pi(({theme:s})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(s.vars||s).palette.divider}`,borderBottom:`1px solid ${(s.vars||s).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Loe.root} + &`]:{paddingTop:0}}}]}))),F4=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiDialogContent"}),{className:r,dividers:a=!1,...l}=i,h={...i,dividers:a},f=Doe(h);return he.jsx(Boe,{className:$n(f.root,r),ownerState:h,ref:n,...l})}),koe=s=>{const{classes:e}=s;return Wi({root:["root"]},Noe,e)},Poe=tn(IO,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),H4=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiDialogTitle"}),{className:r,id:a,...l}=i,h=i,f=koe(h),{titleId:p=a}=Q.useContext(k4);return he.jsx(Poe,{component:"h2",className:$n(f.root,r),ownerState:h,ref:n,variant:"h6",id:a??p,...l})}),R3=Mi("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Uoe=s=>{const{classes:e,disableUnderline:n,startAdornment:i,endAdornment:r,size:a,hiddenLabel:l,multiline:h}=s,f={root:["root",!n&&"underline",i&&"adornedStart",r&&"adornedEnd",a==="small"&&`size${En(a)}`,l&&"hiddenLabel",h&&"multiline"],input:["input"]},p=Wi(f,Vre,e);return{...e,...p}},Foe=tn(ZM,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[...qM(s,e),!n.disableUnderline&&e.underline]}})(Pi(({theme:s})=>{const e=s.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",r=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:s.vars?s.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(s.vars||s).shape.borderRadius,borderTopRightRadius:(s.vars||s).shape.borderRadius,transition:s.transitions.create("background-color",{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut}),"&:hover":{backgroundColor:s.vars?s.vars.palette.FilledInput.hoverBg:r,"@media (hover: none)":{backgroundColor:s.vars?s.vars.palette.FilledInput.bg:i}},[`&.${gv.focused}`]:{backgroundColor:s.vars?s.vars.palette.FilledInput.bg:i},[`&.${gv.disabled}`]:{backgroundColor:s.vars?s.vars.palette.FilledInput.disabledBg:a},variants:[{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${gv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${gv.error}`]:{"&::before, &::after":{borderBottomColor:(s.vars||s).palette.error.main}},"&::before":{borderBottom:`1px solid ${s.vars?`rgba(${s.vars.palette.common.onBackgroundChannel} / ${s.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:s.transitions.create("border-bottom-color",{duration:s.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${gv.disabled}, .${gv.error}):before`]:{borderBottom:`1px solid ${(s.vars||s).palette.text.primary}`},[`&.${gv.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(s.palette).filter(Uh()).map(([l])=>({props:{disableUnderline:!1,color:l},style:{"&::after":{borderBottom:`2px solid ${(s.vars||s).palette[l]?.main}`}}})),{props:({ownerState:l})=>l.startAdornment,style:{paddingLeft:12}},{props:({ownerState:l})=>l.endAdornment,style:{paddingRight:12}},{props:({ownerState:l})=>l.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:l,size:h})=>l.multiline&&h==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel&&l.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Hoe=tn(QM,{name:"MuiFilledInput",slot:"Input",overridesResolver:JM})(Pi(({theme:s})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!s.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:s.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:s.palette.mode==="light"?null:"#fff",caretColor:s.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...s.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[s.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),kN=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:a={},componentsProps:l,fullWidth:h=!1,hiddenLabel:f,inputComponent:p="input",multiline:v=!1,slotProps:T,slots:y={},type:S="text",...$}=i,M={...i,disableUnderline:r,fullWidth:h,inputComponent:p,multiline:v,type:S},C=Uoe(i),E={root:{ownerState:M},input:{ownerState:M}},w=T??l?wl(E,T??l):E,I=y.root??a.Root??Foe,O=y.input??a.Input??Hoe;return he.jsx(BN,{slots:{root:I,input:O},slotProps:w,fullWidth:h,inputComponent:p,multiline:v,ref:n,type:S,...$,classes:C})});kN.muiName="Input";function Goe(s){return Vi("MuiFormControl",s)}Mi("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const zoe=s=>{const{classes:e,margin:n,fullWidth:i}=s,r={root:["root",n!=="none"&&`margin${En(n)}`,i&&"fullWidth"]};return Wi(r,Goe,e)},Voe=tn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,e[`margin${En(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),OE=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiFormControl"}),{children:r,className:a,color:l="primary",component:h="div",disabled:f=!1,error:p=!1,focused:v,fullWidth:T=!1,hiddenLabel:y=!1,margin:S="none",required:$=!1,size:M="medium",variant:C="outlined",...E}=i,w={...i,color:l,component:h,disabled:f,error:p,fullWidth:T,hiddenLabel:y,margin:S,required:$,size:M,variant:C},I=zoe(w),[O,P]=Q.useState(()=>{let ee=!1;return r&&Q.Children.forEach(r,z=>{if(!fx(z,["Input","Select"]))return;const te=fx(z,["Select"])?z.props.input:z;te&&Ure(te.props)&&(ee=!0)}),ee}),[F,V]=Q.useState(()=>{let ee=!1;return r&&Q.Children.forEach(r,z=>{fx(z,["Input","Select"])&&(OC(z.props,!0)||OC(z.props.inputProps,!0))&&(ee=!0)}),ee}),[X,G]=Q.useState(!1);f&&X&&G(!1);const D=v!==void 0&&!f?v:X;let Z;Q.useRef(!1);const Y=Q.useCallback(()=>{V(!0)},[]),j=Q.useCallback(()=>{V(!1)},[]),ne=Q.useMemo(()=>({adornedStart:O,setAdornedStart:P,color:l,disabled:f,error:p,filled:F,focused:D,fullWidth:T,hiddenLabel:y,size:M,onBlur:()=>{G(!1)},onFocus:()=>{G(!0)},onEmpty:j,onFilled:Y,registerEffect:Z,required:$,variant:C}),[O,l,f,p,F,D,T,y,Z,j,Y,$,M,C]);return he.jsx(DN.Provider,{value:ne,children:he.jsx(Voe,{as:h,ownerState:w,className:$n(I.root,a),ref:n,...E,children:r})})});function Woe(s){return Vi("MuiFormHelperText",s)}const w3=Mi("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var I3;const Xoe=s=>{const{classes:e,contained:n,size:i,disabled:r,error:a,filled:l,focused:h,required:f}=s,p={root:["root",r&&"disabled",a&&"error",i&&`size${En(i)}`,n&&"contained",h&&"focused",l&&"filled",f&&"required"]};return Wi(p,Woe,e)},joe=tn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.size&&e[`size${En(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(Pi(({theme:s})=>({color:(s.vars||s).palette.text.secondary,...s.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${w3.disabled}`]:{color:(s.vars||s).palette.text.disabled},[`&.${w3.error}`]:{color:(s.vars||s).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),Yoe=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiFormHelperText"}),{children:r,className:a,component:l="p",disabled:h,error:f,filled:p,focused:v,margin:T,required:y,variant:S,...$}=i,M=xT(),C=$T({props:i,muiFormControl:M,states:["variant","size","disabled","error","filled","focused","required"]}),E={...i,component:l,contained:C.variant==="filled"||C.variant==="outlined",variant:C.variant,size:C.size,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required};delete E.ownerState;const w=Xoe(E);return he.jsx(joe,{as:l,className:$n(w.root,a),ref:n,...$,ownerState:E,children:r===" "?I3||(I3=he.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):r})});function Koe(s){return Vi("MuiFormLabel",s)}const QE=Mi("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),qoe=s=>{const{classes:e,color:n,focused:i,disabled:r,error:a,filled:l,required:h}=s,f={root:["root",`color${En(n)}`,r&&"disabled",a&&"error",l&&"filled",i&&"focused",h&&"required"],asterisk:["asterisk",a&&"error"]};return Wi(f,Koe,e)},Joe=tn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(Pi(({theme:s})=>({color:(s.vars||s).palette.text.secondary,...s.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{[`&.${QE.focused}`]:{color:(s.vars||s).palette[e].main}}})),{props:{},style:{[`&.${QE.disabled}`]:{color:(s.vars||s).palette.text.disabled},[`&.${QE.error}`]:{color:(s.vars||s).palette.error.main}}}]}))),Zoe=tn("span",{name:"MuiFormLabel",slot:"Asterisk"})(Pi(({theme:s})=>({[`&.${QE.error}`]:{color:(s.vars||s).palette.error.main}}))),Qoe=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiFormLabel"}),{children:r,className:a,color:l,component:h="label",disabled:f,error:p,filled:v,focused:T,required:y,...S}=i,$=xT(),M=$T({props:i,muiFormControl:$,states:["color","required","focused","disabled","error","filled"]}),C={...i,color:M.color||"primary",component:h,disabled:M.disabled,error:M.error,filled:M.filled,focused:M.focused,required:M.required},E=qoe(C);return he.jsxs(Joe,{as:h,ownerState:C,className:$n(E.root,a),ref:n,...S,children:[r,M.required&&he.jsxs(Zoe,{ownerState:C,"aria-hidden":!0,className:E.asterisk,children:[" ","*"]})]})}),BO=Vne({createStyledComponent:tn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:s=>Ki({props:s,name:"MuiGrid"}),useTheme:ab});function kO(s){return`scale(${s}, ${s**2})`}const eae={entering:{opacity:1,transform:kO(1)},entered:{opacity:1,transform:"none"}},ww=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),LC=Q.forwardRef(function(e,n){const{addEndListener:i,appear:r=!0,children:a,easing:l,in:h,onEnter:f,onEntered:p,onEntering:v,onExit:T,onExited:y,onExiting:S,style:$,timeout:M="auto",TransitionComponent:C=wp,...E}=e,w=Ay(),I=Q.useRef(),O=ab(),P=Q.useRef(null),F=sa(P,AT(a),n),V=ee=>z=>{if(ee){const te=P.current;z===void 0?ee(te):ee(te,z)}},X=V(v),G=V((ee,z)=>{_4(ee);const{duration:te,delay:ce,easing:pe}=RC({style:$,timeout:M,easing:l},{mode:"enter"});let K;M==="auto"?(K=O.transitions.getAutoHeightDuration(ee.clientHeight),I.current=K):K=te,ee.style.transition=[O.transitions.create("opacity",{duration:K,delay:ce}),O.transitions.create("transform",{duration:ww?K:K*.666,delay:ce,easing:pe})].join(","),f&&f(ee,z)}),D=V(p),Z=V(S),Y=V(ee=>{const{duration:z,delay:te,easing:ce}=RC({style:$,timeout:M,easing:l},{mode:"exit"});let pe;M==="auto"?(pe=O.transitions.getAutoHeightDuration(ee.clientHeight),I.current=pe):pe=z,ee.style.transition=[O.transitions.create("opacity",{duration:pe,delay:te}),O.transitions.create("transform",{duration:ww?pe:pe*.666,delay:ww?te:te||pe*.333,easing:ce})].join(","),ee.style.opacity=0,ee.style.transform=kO(.75),T&&T(ee)}),j=V(y),ne=ee=>{M==="auto"&&w.start(I.current||0,ee),i&&i(P.current,ee)};return he.jsx(C,{appear:r,in:h,nodeRef:P,onEnter:G,onEntered:D,onEntering:X,onExit:Y,onExited:j,onExiting:Z,addEndListener:ne,timeout:M==="auto"?null:M,...E,children:(ee,{ownerState:z,...te})=>Q.cloneElement(a,{style:{opacity:0,transform:kO(.75),visibility:ee==="exited"&&!h?"hidden":void 0,...eae[ee],...$,...a.props.style},ref:F,...te})})});LC&&(LC.muiSupportAuto=!0);const tae=s=>{const{classes:e,disableUnderline:n}=s,r=Wi({root:["root",!n&&"underline"],input:["input"]},Gre,e);return{...e,...r}},nae=tn(ZM,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiInput",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[...qM(s,e),!n.disableUnderline&&e.underline]}})(Pi(({theme:s})=>{let n=s.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return s.vars&&(n=`rgba(${s.vars.palette.common.onBackgroundChannel} / ${s.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:i})=>i.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bE.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bE.error}`]:{"&::before, &::after":{borderBottomColor:(s.vars||s).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:s.transitions.create("border-bottom-color",{duration:s.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bE.disabled}, .${bE.error}):before`]:{borderBottom:`2px solid ${(s.vars||s).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${bE.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(s.palette).filter(Uh()).map(([i])=>({props:{color:i,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(s.vars||s).palette[i].main}`}}}))]}})),iae=tn(QM,{name:"MuiInput",slot:"Input",overridesResolver:JM})({}),PN=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiInput"}),{disableUnderline:r=!1,components:a={},componentsProps:l,fullWidth:h=!1,inputComponent:f="input",multiline:p=!1,slotProps:v,slots:T={},type:y="text",...S}=i,$=tae(i),C={root:{ownerState:{disableUnderline:r}}},E=v??l?wl(v??l,C):C,w=T.root??a.Root??nae,I=T.input??a.Input??iae;return he.jsx(BN,{slots:{root:w,input:I},slotProps:E,fullWidth:h,inputComponent:f,multiline:p,ref:n,type:y,...S,classes:$})});PN.muiName="Input";function sae(s){return Vi("MuiInputLabel",s)}Mi("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const rae=s=>{const{classes:e,formControl:n,size:i,shrink:r,disableAnimation:a,variant:l,required:h}=s,f={root:["root",n&&"formControl",!a&&"animated",r&&"shrink",i&&i!=="medium"&&`size${En(i)}`,l],asterisk:[h&&"asterisk"]},p=Wi(f,sae,e);return{...e,...p}},oae=tn(Qoe,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[{[`& .${QE.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(Pi(({theme:s})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:s.transitions.create(["color","transform","max-width"],{duration:s.transitions.duration.shorter,easing:s.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:i})=>e==="filled"&&n.shrink&&i==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),G4=Q.forwardRef(function(e,n){const i=Ki({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:a,shrink:l,variant:h,className:f,...p}=i,v=xT();let T=l;typeof T>"u"&&v&&(T=v.filled||v.focused||v.adornedStart);const y=$T({props:i,muiFormControl:v,states:["size","variant","required","focused"]}),S={...i,disableAnimation:r,formControl:v,shrink:T,size:y.size,variant:y.variant,required:y.required,focused:y.focused},$=rae(S);return he.jsx(oae,{"data-shrink":T,ref:n,className:$n($.root,f),...p,ownerState:S,classes:$})}),PO=Q.createContext({});function aae(s){return Vi("MuiList",s)}Mi("MuiList",["root","padding","dense","subheader"]);const lae=s=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=s;return Wi({root:["root",!n&&"padding",i&&"dense",r&&"subheader"]},aae,e)},uae=tn("ul",{name:"MuiList",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:s})=>!s.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:s})=>s.subheader,style:{paddingTop:0}}]}),cae=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiList"}),{children:r,className:a,component:l="ul",dense:h=!1,disablePadding:f=!1,subheader:p,...v}=i,T=Q.useMemo(()=>({dense:h}),[h]),y={...i,component:l,dense:h,disablePadding:f},S=lae(y);return he.jsx(PO.Provider,{value:T,children:he.jsxs(uae,{as:l,className:$n(S.root,a),ref:n,ownerState:y,...v,children:[p,r]})})}),O3=Mi("MuiListItemIcon",["root","alignItemsFlexStart"]),N3=Mi("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Iw(s,e,n){return s===e?s.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:s.firstChild}function L3(s,e,n){return s===e?n?s.firstChild:s.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:s.lastChild}function z4(s,e){if(e===void 0)return!0;let n=s.innerText;return n===void 0&&(n=s.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function yE(s,e,n,i,r,a){let l=!1,h=r(s,e,e?n:!1);for(;h;){if(h===s.firstChild){if(l)return!1;l=!0}const f=i?!1:h.disabled||h.getAttribute("aria-disabled")==="true";if(!h.hasAttribute("tabindex")||!z4(h,a)||f)h=r(s,h,n);else return h.focus(),!0}return!1}const hae=Q.forwardRef(function(e,n){const{actions:i,autoFocus:r=!1,autoFocusItem:a=!1,children:l,className:h,disabledItemsFocusable:f=!1,disableListWrap:p=!1,onKeyDown:v,variant:T="selectedMenu",...y}=e,S=Q.useRef(null),$=Q.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ph(()=>{r&&S.current.focus()},[r]),Q.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(I,{direction:O})=>{const P=!S.current.style.width;if(I.clientHeight<S.current.clientHeight&&P){const F=`${D4(rf(I))}px`;S.current.style[O==="rtl"?"paddingLeft":"paddingRight"]=F,S.current.style.width=`calc(100% + ${F})`}return S.current}}),[]);const M=I=>{const O=S.current,P=I.key;if(I.ctrlKey||I.metaKey||I.altKey){v&&v(I);return}const V=Ea(O).activeElement;if(P==="ArrowDown")I.preventDefault(),yE(O,V,p,f,Iw);else if(P==="ArrowUp")I.preventDefault(),yE(O,V,p,f,L3);else if(P==="Home")I.preventDefault(),yE(O,null,p,f,Iw);else if(P==="End")I.preventDefault(),yE(O,null,p,f,L3);else if(P.length===1){const X=$.current,G=P.toLowerCase(),D=performance.now();X.keys.length>0&&(D-X.lastTime>500?(X.keys=[],X.repeating=!0,X.previousKeyMatched=!0):X.repeating&&G!==X.keys[0]&&(X.repeating=!1)),X.lastTime=D,X.keys.push(G);const Z=V&&!X.repeating&&z4(V,X);X.previousKeyMatched&&(Z||yE(O,V,!1,f,Iw,X))?I.preventDefault():X.previousKeyMatched=!1}v&&v(I)},C=sa(S,n);let E=-1;Q.Children.forEach(l,(I,O)=>{if(!Q.isValidElement(I)){E===O&&(E+=1,E>=l.length&&(E=-1));return}I.props.disabled||(T==="selectedMenu"&&I.props.selected||E===-1)&&(E=O),E===O&&(I.props.disabled||I.props.muiSkipListHighlight||I.type.muiSkipListHighlight)&&(E+=1,E>=l.length&&(E=-1))});const w=Q.Children.map(l,(I,O)=>{if(O===E){const P={};return a&&(P.autoFocus=!0),I.props.tabIndex===void 0&&T==="selectedMenu"&&(P.tabIndex=0),Q.cloneElement(I,P)}return I});return he.jsx(cae,{role:"menu",ref:C,className:h,onKeyDown:M,tabIndex:r?0:-1,...y,children:w})});function dae(s){return Vi("MuiPopover",s)}Mi("MuiPopover",["root","paper"]);function D3(s,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=s.height/2:e==="bottom"&&(n=s.height),n}function B3(s,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=s.width/2:e==="right"&&(n=s.width),n}function k3(s){return[s.horizontal,s.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function V$(s){return typeof s=="function"?s():s}const fae=s=>{const{classes:e}=s;return Wi({root:["root"],paper:["paper"]},dae,e)},pae=tn(B4,{name:"MuiPopover",slot:"Root"})({}),V4=tn(CN,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),mae=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiPopover"}),{action:r,anchorEl:a,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:h,anchorReference:f="anchorEl",children:p,className:v,container:T,elevation:y=8,marginThreshold:S=16,open:$,PaperProps:M={},slots:C={},slotProps:E={},transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:I,transitionDuration:O="auto",TransitionProps:P={},disableScrollLock:F=!1,...V}=i,X=Q.useRef(),G={...i,anchorOrigin:l,anchorReference:f,elevation:y,marginThreshold:S,transformOrigin:w,TransitionComponent:I,transitionDuration:O,TransitionProps:P},D=fae(G),Z=Q.useCallback(()=>{if(f==="anchorPosition")return h;const Ke=V$(a),Re=(Ke&&Ke.nodeType===1?Ke:Ea(X.current).body).getBoundingClientRect();return{top:Re.top+D3(Re,l.vertical),left:Re.left+B3(Re,l.horizontal)}},[a,l.horizontal,l.vertical,h,f]),Y=Q.useCallback(Ke=>({vertical:D3(Ke,w.vertical),horizontal:B3(Ke,w.horizontal)}),[w.horizontal,w.vertical]),j=Q.useCallback(Ke=>{const Ht={width:Ke.offsetWidth,height:Ke.offsetHeight},Re=Y(Ht);if(f==="none")return{top:null,left:null,transformOrigin:k3(Re)};const Ye=Z();let J=Ye.top-Re.vertical,Se=Ye.left-Re.horizontal;const Ae=J+Ht.height,we=Se+Ht.width,Ie=rf(V$(a)),dt=Ie.innerHeight-S,Qe=Ie.innerWidth-S;if(S!==null&&J<S){const vt=J-S;J-=vt,Re.vertical+=vt}else if(S!==null&&Ae>dt){const vt=Ae-dt;J-=vt,Re.vertical+=vt}if(S!==null&&Se<S){const vt=Se-S;Se-=vt,Re.horizontal+=vt}else if(we>Qe){const vt=we-Qe;Se-=vt,Re.horizontal+=vt}return{top:`${Math.round(J)}px`,left:`${Math.round(Se)}px`,transformOrigin:k3(Re)}},[a,f,Z,Y,S]),[ne,ee]=Q.useState($),z=Q.useCallback(()=>{const Ke=X.current;if(!Ke)return;const Ht=j(Ke);Ht.top!==null&&Ke.style.setProperty("top",Ht.top),Ht.left!==null&&(Ke.style.left=Ht.left),Ke.style.transformOrigin=Ht.transformOrigin,ee(!0)},[j]);Q.useEffect(()=>(F&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)),[a,F,z]);const te=()=>{z()},ce=()=>{ee(!1)};Q.useEffect(()=>{$&&z()}),Q.useImperativeHandle(r,()=>$?{updatePosition:()=>{z()}}:null,[$,z]),Q.useEffect(()=>{if(!$)return;const Ke=jM(()=>{z()}),Ht=rf(V$(a));return Ht.addEventListener("resize",Ke),()=>{Ke.clear(),Ht.removeEventListener("resize",Ke)}},[a,$,z]);let pe=O;const K={slots:{transition:I,...C},slotProps:{transition:P,paper:M,...E}},[fe,Ne]=Es("transition",{elementType:LC,externalForwardedProps:K,ownerState:G,getSlotProps:Ke=>({...Ke,onEntering:(Ht,Re)=>{Ke.onEntering?.(Ht,Re),te()},onExited:Ht=>{Ke.onExited?.(Ht),ce()}}),additionalProps:{appear:!0,in:$}});O==="auto"&&!fe.muiSupportAuto&&(pe=void 0);const Pe=T||(a?Ea(V$(a)).body:void 0),[Ee,{slots:We,slotProps:Fe,...gt}]=Es("root",{ref:n,elementType:pae,externalForwardedProps:{...K,...V},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:C.backdrop},slotProps:{backdrop:Rie(typeof E.backdrop=="function"?E.backdrop(G):E.backdrop,{invisible:!0})},container:Pe,open:$},ownerState:G,className:$n(D.root,v)}),[ft,Ut]=Es("paper",{ref:X,className:D.paper,elementType:V4,externalForwardedProps:K,shouldForwardComponentProp:!0,additionalProps:{elevation:y,style:ne?void 0:{opacity:0}},ownerState:G});return he.jsx(Ee,{...gt,...!Fv(Ee)&&{slots:We,slotProps:Fe,disableScrollLock:F},children:he.jsx(fe,{...Ne,timeout:pe,children:he.jsx(ft,{...Ut,children:p})})})});function gae(s){return Vi("MuiMenu",s)}Mi("MuiMenu",["root","paper","list"]);const _ae={vertical:"top",horizontal:"right"},vae={vertical:"top",horizontal:"left"},bae=s=>{const{classes:e}=s;return Wi({root:["root"],paper:["paper"],list:["list"]},gae,e)},yae=tn(mae,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiMenu",slot:"Root"})({}),Tae=tn(V4,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Eae=tn(hae,{name:"MuiMenu",slot:"List"})({outline:0}),Sae=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:a,className:l,disableAutoFocusItem:h=!1,MenuListProps:f={},onClose:p,open:v,PaperProps:T={},PopoverClasses:y,transitionDuration:S="auto",TransitionProps:{onEntering:$,...M}={},variant:C="selectedMenu",slots:E={},slotProps:w={},...I}=i,O=TT(),P={...i,autoFocus:r,disableAutoFocusItem:h,MenuListProps:f,onEntering:$,PaperProps:T,transitionDuration:S,TransitionProps:M,variant:C},F=bae(P),V=r&&!h&&v,X=Q.useRef(null),G=(pe,K)=>{X.current&&X.current.adjustStyleForScrollbar(pe,{direction:O?"rtl":"ltr"}),$&&$(pe,K)},D=pe=>{pe.key==="Tab"&&(pe.preventDefault(),p&&p(pe,"tabKeyDown"))};let Z=-1;Q.Children.map(a,(pe,K)=>{Q.isValidElement(pe)&&(pe.props.disabled||(C==="selectedMenu"&&pe.props.selected||Z===-1)&&(Z=K))});const Y={slots:E,slotProps:{list:f,transition:M,paper:T,...w}},j=Yu({elementType:E.root,externalSlotProps:w.root,ownerState:P,className:[F.root,l]}),[ne,ee]=Es("paper",{className:F.paper,elementType:Tae,externalForwardedProps:Y,shouldForwardComponentProp:!0,ownerState:P}),[z,te]=Es("list",{className:$n(F.list,f.className),elementType:Eae,shouldForwardComponentProp:!0,externalForwardedProps:Y,getSlotProps:pe=>({...pe,onKeyDown:K=>{D(K),pe.onKeyDown?.(K)}}),ownerState:P}),ce=typeof Y.slotProps.transition=="function"?Y.slotProps.transition(P):Y.slotProps.transition;return he.jsx(yae,{onClose:p,anchorOrigin:{vertical:"bottom",horizontal:O?"right":"left"},transformOrigin:O?_ae:vae,slots:{root:E.root,paper:ne,backdrop:E.backdrop,...E.transition&&{transition:E.transition}},slotProps:{root:j,paper:ee,backdrop:typeof w.backdrop=="function"?w.backdrop(P):w.backdrop,transition:{...ce,onEntering:(...pe)=>{G(...pe),ce?.onEntering?.(...pe)}}},open:v,ref:n,transitionDuration:S,ownerState:P,...I,classes:y,children:he.jsx(z,{actions:X,autoFocus:r&&(Z===-1||h),autoFocusItem:V,variant:C,...te,children:a})})});function Aae(s){return Vi("MuiMenuItem",s)}const TE=Mi("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),$ae=(s,e)=>{const{ownerState:n}=s;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},xae=s=>{const{disabled:e,dense:n,divider:i,disableGutters:r,selected:a,classes:l}=s,f=Wi({root:["root",n&&"dense",e&&"disabled",!r&&"gutters",i&&"divider",a&&"selected"]},Aae,l);return{...l,...f}},Cae=tn(rA,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:$ae})(Pi(({theme:s})=>({...s.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${TE.selected}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:ya(s.palette.primary.main,s.palette.action.selectedOpacity),[`&.${TE.focusVisible}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.focusOpacity}))`:ya(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.focusOpacity)}},[`&.${TE.selected}:hover`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:ya(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:ya(s.palette.primary.main,s.palette.action.selectedOpacity)}},[`&.${TE.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${TE.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},[`& + .${R3.root}`]:{marginTop:s.spacing(1),marginBottom:s.spacing(1)},[`& + .${R3.inset}`]:{marginLeft:52},[`& .${N3.root}`]:{marginTop:0,marginBottom:0},[`& .${N3.inset}`]:{paddingLeft:36},[`& .${O3.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(s.vars||s).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[s.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...s.typography.body2,[`& .${O3.root} svg`]:{fontSize:"1.25rem"}}}]}))),EE=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:a="li",dense:l=!1,divider:h=!1,disableGutters:f=!1,focusVisibleClassName:p,role:v="menuitem",tabIndex:T,className:y,...S}=i,$=Q.useContext(PO),M=Q.useMemo(()=>({dense:l||$.dense||!1,disableGutters:f}),[$.dense,l,f]),C=Q.useRef(null);Ph(()=>{r&&C.current&&C.current.focus()},[r]);const E={...i,dense:M.dense,divider:h,disableGutters:f},w=xae(i),I=sa(C,n);let O;return i.disabled||(O=T!==void 0?T:-1),he.jsx(PO.Provider,{value:M,children:he.jsx(Cae,{ref:I,role:v,tabIndex:O,component:a,focusVisibleClassName:$n(w.focusVisible,p),className:$n(w.root,y),...S,ownerState:E,classes:w})})});function Mae(s){return Vi("MuiNativeSelect",s)}const UN=Mi("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Rae=s=>{const{classes:e,variant:n,disabled:i,multiple:r,open:a,error:l}=s,h={select:["select",n,i&&"disabled",r&&"multiple",l&&"error"],icon:["icon",`icon${En(n)}`,a&&"iconOpen",i&&"disabled"]};return Wi(h,Mae,e)},W4=tn("select",{name:"MuiNativeSelect"})(({theme:s})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${UN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(s.vars||s).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(s.vars||s).shape.borderRadius,"&:focus":{borderRadius:(s.vars||s).shape.borderRadius},"&&&":{paddingRight:32}}}]})),wae=tn(W4,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Xh,overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.select,e[n.variant],n.error&&e.error,{[`&.${UN.multiple}`]:e.multiple}]}})({}),X4=tn("svg",{name:"MuiNativeSelect"})(({theme:s})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(s.vars||s).palette.action.active,[`&.${UN.disabled}`]:{color:(s.vars||s).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Iae=tn(X4,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.icon,n.variant&&e[`icon${En(n.variant)}`],n.open&&e.iconOpen]}})({}),Oae=Q.forwardRef(function(e,n){const{className:i,disabled:r,error:a,IconComponent:l,inputRef:h,variant:f="standard",...p}=e,v={...e,disabled:r,variant:f,error:a},T=Rae(v);return he.jsxs(Q.Fragment,{children:[he.jsx(wae,{ownerState:v,className:$n(T.select,i),disabled:r,ref:h||n,...p}),e.multiple?null:he.jsx(Iae,{as:l,ownerState:v,className:T.icon})]})});var P3;const Nae=tn("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Xh})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Lae=tn("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Xh})(Pi(({theme:s})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:s.transitions.create("width",{duration:150,easing:s.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:s.transitions.create("max-width",{duration:50,easing:s.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:s.transitions.create("max-width",{duration:100,easing:s.transitions.easing.easeOut,delay:50})}}]})));function Dae(s){const{children:e,classes:n,className:i,label:r,notched:a,...l}=s,h=r!=null&&r!=="",f={...s,notched:a,withLabel:h};return he.jsx(Nae,{"aria-hidden":!0,className:i,ownerState:f,...l,children:he.jsx(Lae,{ownerState:f,children:h?he.jsx("span",{children:r}):P3||(P3=he.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const Bae=s=>{const{classes:e}=s,i=Wi({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},zre,e);return{...e,...i}},kae=tn(ZM,{shouldForwardProp:s=>Xh(s)||s==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:qM})(Pi(({theme:s})=>{const e=s.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(s.vars||s).shape.borderRadius,[`&:hover .${op.notchedOutline}`]:{borderColor:(s.vars||s).palette.text.primary},"@media (hover: none)":{[`&:hover .${op.notchedOutline}`]:{borderColor:s.vars?`rgba(${s.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${op.focused} .${op.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(s.palette).filter(Uh()).map(([n])=>({props:{color:n},style:{[`&.${op.focused} .${op.notchedOutline}`]:{borderColor:(s.vars||s).palette[n].main}}})),{props:{},style:{[`&.${op.error} .${op.notchedOutline}`]:{borderColor:(s.vars||s).palette.error.main},[`&.${op.disabled} .${op.notchedOutline}`]:{borderColor:(s.vars||s).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:i})=>n.multiline&&i==="small",style:{padding:"8.5px 14px"}}]}})),Pae=tn(Dae,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Pi(({theme:s})=>{const e=s.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:s.vars?`rgba(${s.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),Uae=tn(QM,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:JM})(Pi(({theme:s})=>({padding:"16.5px 14px",...!s.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:s.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:s.palette.mode==="light"?null:"#fff",caretColor:s.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...s.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[s.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),FN=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiOutlinedInput"}),{components:r={},fullWidth:a=!1,inputComponent:l="input",label:h,multiline:f=!1,notched:p,slots:v={},slotProps:T={},type:y="text",...S}=i,$=Bae(i),M=xT(),C=$T({props:i,muiFormControl:M,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),E={...i,color:C.color||"primary",disabled:C.disabled,error:C.error,focused:C.focused,formControl:M,fullWidth:a,hiddenLabel:C.hiddenLabel,multiline:f,size:C.size,type:y},w=v.root??r.Root??kae,I=v.input??r.Input??Uae,[O,P]=Es("notchedOutline",{elementType:Pae,className:$.notchedOutline,shouldForwardComponentProp:!0,ownerState:E,externalForwardedProps:{slots:v,slotProps:T},additionalProps:{label:h!=null&&h!==""&&C.required?he.jsxs(Q.Fragment,{children:[h," ","*"]}):h}});return he.jsx(BN,{slots:{root:w,input:I},slotProps:T,renderSuffix:F=>he.jsx(O,{...P,notched:typeof p<"u"?p:!!(F.startAdornment||F.filled||F.focused)}),fullWidth:a,inputComponent:l,multiline:f,ref:n,type:y,...S,classes:{...$,notchedOutline:null}})});FN.muiName="Input";const Fae={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function j4(s){return Vi("MuiSelect",s)}const SE=Mi("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var U3;const Hae=tn(W4,{name:"MuiSelect",slot:"Select",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[{[`&.${SE.select}`]:e.select},{[`&.${SE.select}`]:e[n.variant]},{[`&.${SE.error}`]:e.error},{[`&.${SE.multiple}`]:e.multiple}]}})({[`&.${SE.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Gae=tn(X4,{name:"MuiSelect",slot:"Icon",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.icon,n.variant&&e[`icon${En(n.variant)}`],n.open&&e.iconOpen]}})({}),zae=tn("input",{shouldForwardProp:s=>XM(s)&&s!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function F3(s,e){return typeof e=="object"&&e!==null?s===e:String(s)===String(e)}function Vae(s){return s==null||typeof s=="string"&&!s.trim()}const Wae=s=>{const{classes:e,variant:n,disabled:i,multiple:r,open:a,error:l}=s,h={select:["select",n,i&&"disabled",r&&"multiple",l&&"error"],icon:["icon",`icon${En(n)}`,a&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Wi(h,j4,e)},Xae=Q.forwardRef(function(e,n){const{"aria-describedby":i,"aria-label":r,autoFocus:a,autoWidth:l,children:h,className:f,defaultOpen:p,defaultValue:v,disabled:T,displayEmpty:y,error:S=!1,IconComponent:$,inputRef:M,labelId:C,MenuProps:E={},multiple:w,name:I,onBlur:O,onChange:P,onClose:F,onFocus:V,onOpen:X,open:G,readOnly:D,renderValue:Z,required:Y,SelectDisplayProps:j={},tabIndex:ne,type:ee,value:z,variant:te="standard",...ce}=e,[pe,K]=CC({controlled:z,default:v,name:"Select"}),[fe,Ne]=CC({controlled:G,default:p,name:"Select"}),Pe=Q.useRef(null),Ee=Q.useRef(null),[We,Fe]=Q.useState(null),{current:gt}=Q.useRef(G!=null),[ft,Ut]=Q.useState(),Ke=sa(n,M),Ht=Q.useCallback(ve=>{Ee.current=ve,ve&&Fe(ve)},[]),Re=We?.parentNode;Q.useImperativeHandle(Ke,()=>({focus:()=>{Ee.current.focus()},node:Pe.current,value:pe}),[pe]),Q.useEffect(()=>{p&&fe&&We&&!gt&&(Ut(l?null:Re.clientWidth),Ee.current.focus())},[We,l]),Q.useEffect(()=>{a&&Ee.current.focus()},[a]),Q.useEffect(()=>{if(!C)return;const ve=Ea(Ee.current).getElementById(C);if(ve){const re=()=>{getSelection().isCollapsed&&Ee.current.focus()};return ve.addEventListener("click",re),()=>{ve.removeEventListener("click",re)}}},[C]);const Ye=(ve,re)=>{ve?X&&X(re):F&&F(re),gt||(Ut(l?null:Re.clientWidth),Ne(ve))},J=ve=>{ve.button===0&&(ve.preventDefault(),Ee.current.focus(),Ye(!0,ve))},Se=ve=>{Ye(!1,ve)},Ae=Q.Children.toArray(h),we=ve=>{const re=Ae.find(ye=>ye.props.value===ve.target.value);re!==void 0&&(K(re.props.value),P&&P(ve,re))},Ie=ve=>re=>{let ye;if(re.currentTarget.hasAttribute("tabindex")){if(w){ye=Array.isArray(pe)?pe.slice():[];const lt=pe.indexOf(ve.props.value);lt===-1?ye.push(ve.props.value):ye.splice(lt,1)}else ye=ve.props.value;if(ve.props.onClick&&ve.props.onClick(re),pe!==ye&&(K(ye),P)){const lt=re.nativeEvent||re,Me=new lt.constructor(lt.type,lt);Object.defineProperty(Me,"target",{writable:!0,value:{value:ye,name:I}}),P(Me,ve)}w||Ye(!1,re)}},dt=ve=>{D||[" ","ArrowUp","ArrowDown","Enter"].includes(ve.key)&&(ve.preventDefault(),Ye(!0,ve))},Qe=We!==null&&fe,vt=ve=>{!Qe&&O&&(Object.defineProperty(ve,"target",{writable:!0,value:{value:pe,name:I}}),O(ve))};delete ce["aria-invalid"];let et,_e;const se=[];let $e=!1;(OC({value:pe})||y)&&(Z?et=Z(pe):$e=!0);const Le=Ae.map(ve=>{if(!Q.isValidElement(ve))return null;let re;if(w){if(!Array.isArray(pe))throw new Error(nm(2));re=pe.some(ye=>F3(ye,ve.props.value)),re&&$e&&se.push(ve.props.children)}else re=F3(pe,ve.props.value),re&&$e&&(_e=ve.props.children);return Q.cloneElement(ve,{"aria-selected":re?"true":"false",onClick:Ie(ve),onKeyUp:ye=>{ye.key===" "&&ye.preventDefault(),ve.props.onKeyUp&&ve.props.onKeyUp(ye)},role:"option",selected:re,value:void 0,"data-value":ve.props.value})});$e&&(w?se.length===0?et=null:et=se.reduce((ve,re,ye)=>(ve.push(re),ye<se.length-1&&ve.push(", "),ve),[]):et=_e);let Xe=ft;!l&&gt&&We&&(Xe=Re.clientWidth);let Ve;typeof ne<"u"?Ve=ne:Ve=T?null:0;const yt=j.id||(I?`mui-component-select-${I}`:void 0),bt={...e,variant:te,value:pe,open:Qe,error:S},At=Wae(bt),Ft={...E.PaperProps,...E.slotProps?.paper},H={...E.MenuListProps,...E.slotProps?.list},oe=ET();return he.jsxs(Q.Fragment,{children:[he.jsx(Hae,{as:"div",ref:Ht,tabIndex:Ve,role:"combobox","aria-controls":Qe?oe:void 0,"aria-disabled":T?"true":void 0,"aria-expanded":Qe?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[C,yt].filter(Boolean).join(" ")||void 0,"aria-describedby":i,"aria-required":Y?"true":void 0,"aria-invalid":S?"true":void 0,onKeyDown:dt,onMouseDown:T||D?null:J,onBlur:vt,onFocus:V,...j,ownerState:bt,className:$n(j.className,At.select,f),id:yt,children:Vae(et)?U3||(U3=he.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):et}),he.jsx(zae,{"aria-invalid":S,value:Array.isArray(pe)?pe.join(","):pe,name:I,ref:Pe,"aria-hidden":!0,onChange:we,tabIndex:-1,disabled:T,className:At.nativeInput,autoFocus:a,required:Y,...ce,ownerState:bt}),he.jsx(Gae,{as:$,className:At.icon,ownerState:bt}),he.jsx(Sae,{id:`menu-${I||""}`,anchorEl:Re,open:Qe,onClose:Se,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...E,slotProps:{...E.slotProps,list:{"aria-labelledby":C,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:oe,...H},paper:{...Ft,style:{minWidth:Xe,...Ft!=null?Ft.style:null}}},children:Le})]})}),jae=s=>{const{classes:e}=s,i=Wi({root:["root"]},j4,e);return{...e,...i}},HN={name:"MuiSelect",slot:"Root",shouldForwardProp:s=>Xh(s)&&s!=="variant"},Yae=tn(PN,HN)(""),Kae=tn(FN,HN)(""),qae=tn(kN,HN)(""),GN=Q.forwardRef(function(e,n){const i=Ki({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:a,classes:l={},className:h,defaultOpen:f=!1,displayEmpty:p=!1,IconComponent:v=Wre,id:T,input:y,inputProps:S,label:$,labelId:M,MenuProps:C,multiple:E=!1,native:w=!1,onClose:I,onOpen:O,open:P,renderValue:F,SelectDisplayProps:V,variant:X="outlined",...G}=i,D=w?Oae:Xae,Z=xT(),Y=$T({props:i,muiFormControl:Z,states:["variant","error"]}),j=Y.variant||X,ne={...i,variant:j,classes:l},ee=jae(ne),{root:z,...te}=ee,ce=y||{standard:he.jsx(Yae,{ownerState:ne}),outlined:he.jsx(Kae,{label:$,ownerState:ne}),filled:he.jsx(qae,{ownerState:ne})}[j],pe=sa(n,AT(ce));return he.jsx(Q.Fragment,{children:Q.cloneElement(ce,{inputComponent:D,inputProps:{children:a,error:Y.error,IconComponent:v,variant:j,type:void 0,multiple:E,...w?{id:T}:{autoWidth:r,defaultOpen:f,displayEmpty:p,labelId:M,MenuProps:C,onClose:I,onOpen:O,open:P,renderValue:F,SelectDisplayProps:{id:T,...V}},...S,classes:S?wl(te,S.classes):te,...y?y.props.inputProps:{}},...(E&&w||p)&&j==="outlined"?{notched:!0}:{},ref:pe,className:$n(ce.props.className,h,ee.root),...!y&&{variant:j},...G})})});GN.muiName="Select";function Jae(s,e,n=(i,r)=>i===r){return s.length===e.length&&s.every((i,r)=>n(i,e[r]))}const Zae=2;function py(s,e,n,i,r){return n===1?Math.min(s+e,r):Math.max(s-e,i)}function Y4(s,e){return s-e}function H3(s,e){const{index:n}=s.reduce((i,r,a)=>{const l=Math.abs(e-r);return i===null||l<i.distance||l===i.distance?{distance:l,index:a}:i},null)??{};return n}function W$(s,e){if(e.current!==void 0&&s.changedTouches){const n=s;for(let i=0;i<n.changedTouches.length;i+=1){const r=n.changedTouches[i];if(r.identifier===e.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:s.clientX,y:s.clientY}}function DC(s,e,n){return(s-e)*100/(n-e)}function Qae(s,e,n){return(n-e)*s+e}function ele(s){if(Math.abs(s)<1){const n=s.toExponential().split("e-"),i=n[0].split(".")[1];return(i?i.length:0)+parseInt(n[1],10)}const e=s.toString().split(".")[1];return e?e.length:0}function tle(s,e,n){const i=Math.round((s-n)/e)*e+n;return Number(i.toFixed(ele(e)))}function G3({values:s,newValue:e,index:n}){const i=s.slice();return i[n]=e,i.sort(Y4)}function X$({sliderRef:s,activeIndex:e,setActive:n}){const i=Ea(s.current);(!s.current?.contains(i.activeElement)||Number(i?.activeElement?.getAttribute("data-index"))!==e)&&s.current?.querySelector(`[type="range"][data-index="${e}"]`).focus(),n&&n(e)}function j$(s,e){return typeof s=="number"&&typeof e=="number"?s===e:typeof s=="object"&&typeof e=="object"?Jae(s,e):!1}const nle={horizontal:{offset:s=>({left:`${s}%`}),leap:s=>({width:`${s}%`})},"horizontal-reverse":{offset:s=>({right:`${s}%`}),leap:s=>({width:`${s}%`})},vertical:{offset:s=>({bottom:`${s}%`}),leap:s=>({height:`${s}%`})}},ile=s=>s;let Y$;function z3(){return Y$===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Y$=CSS.supports("touch-action","none"):Y$=!0),Y$}function sle(s){const{"aria-labelledby":e,defaultValue:n,disabled:i=!1,disableSwap:r=!1,isRtl:a=!1,marks:l=!1,max:h=100,min:f=0,name:p,onChange:v,onChangeCommitted:T,orientation:y="horizontal",rootRef:S,scale:$=ile,step:M=1,shiftStep:C=10,tabIndex:E,value:w}=s,I=Q.useRef(void 0),[O,P]=Q.useState(-1),[F,V]=Q.useState(-1),[X,G]=Q.useState(!1),D=Q.useRef(0),Z=Q.useRef(null),[Y,j]=CC({controlled:w,default:n??f,name:"Slider"}),ne=v&&(($e,Le,Xe)=>{const Ve=$e.nativeEvent||$e,yt=new Ve.constructor(Ve.type,Ve);Object.defineProperty(yt,"target",{writable:!0,value:{value:Le,name:p}}),Z.current=Le,v(yt,Le,Xe)}),ee=Array.isArray(Y);let z=ee?Y.slice().sort(Y4):[Y];z=z.map($e=>$e==null?f:vy($e,f,h));const te=l===!0&&M!==null?[...Array(Math.floor((h-f)/M)+1)].map(($e,Le)=>({value:f+M*Le})):l||[],ce=te.map($e=>$e.value),[pe,K]=Q.useState(-1),fe=Q.useRef(null),Ne=sa(S,fe),Pe=$e=>Le=>{const Xe=Number(Le.currentTarget.getAttribute("data-index"));tT(Le.target)&&K(Xe),V(Xe),$e?.onFocus?.(Le)},Ee=$e=>Le=>{tT(Le.target)||K(-1),V(-1),$e?.onBlur?.(Le)},We=($e,Le)=>{const Xe=Number($e.currentTarget.getAttribute("data-index")),Ve=z[Xe],yt=ce.indexOf(Ve);let bt=Le;if(te&&M==null){const At=ce[ce.length-1];bt>=At?bt=At:bt<=ce[0]?bt=ce[0]:bt=bt<Ve?ce[yt-1]:ce[yt+1]}if(bt=vy(bt,f,h),ee){r&&(bt=vy(bt,z[Xe-1]||-1/0,z[Xe+1]||1/0));const At=bt;bt=G3({values:z,newValue:bt,index:Xe});let Ft=Xe;r||(Ft=bt.indexOf(At)),X$({sliderRef:fe,activeIndex:Ft})}j(bt),K(Xe),ne&&!j$(bt,Y)&&ne($e,bt,Xe),T&&T($e,Z.current??bt)},Fe=$e=>Le=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(Le.key)){Le.preventDefault();const Xe=Number(Le.currentTarget.getAttribute("data-index")),Ve=z[Xe];let yt=null;if(M!=null){const bt=Le.shiftKey?C:M;switch(Le.key){case"ArrowUp":yt=py(Ve,bt,1,f,h);break;case"ArrowRight":yt=py(Ve,bt,a?-1:1,f,h);break;case"ArrowDown":yt=py(Ve,bt,-1,f,h);break;case"ArrowLeft":yt=py(Ve,bt,a?1:-1,f,h);break;case"PageUp":yt=py(Ve,C,1,f,h);break;case"PageDown":yt=py(Ve,C,-1,f,h);break;case"Home":yt=f;break;case"End":yt=h;break}}else if(te){const bt=ce[ce.length-1],At=ce.indexOf(Ve),Ft=[a?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],H=[a?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Ft.includes(Le.key)?At===0?yt=ce[0]:yt=ce[At-1]:H.includes(Le.key)&&(At===ce.length-1?yt=bt:yt=ce[At+1])}yt!=null&&We(Le,yt)}$e?.onKeyDown?.(Le)};Ph(()=>{i&&fe.current.contains(document.activeElement)&&document.activeElement?.blur()},[i]),i&&O!==-1&&P(-1),i&&pe!==-1&&K(-1);const gt=$e=>Le=>{$e.onChange?.(Le),We(Le,Le.target.valueAsNumber)},ft=Q.useRef(void 0);let Ut=y;a&&y==="horizontal"&&(Ut+="-reverse");const Ke=({finger:$e,move:Le=!1})=>{const{current:Xe}=fe,{width:Ve,height:yt,bottom:bt,left:At}=Xe.getBoundingClientRect();let Ft;Ut.startsWith("vertical")?Ft=(bt-$e.y)/yt:Ft=($e.x-At)/Ve,Ut.includes("-reverse")&&(Ft=1-Ft);let H;if(H=Qae(Ft,f,h),M)H=tle(H,M,f);else{const ve=H3(ce,H);H=ce[ve]}H=vy(H,f,h);let oe=0;if(ee){Le?oe=ft.current:oe=H3(z,H),r&&(H=vy(H,z[oe-1]||-1/0,z[oe+1]||1/0));const ve=H;H=G3({values:z,newValue:H,index:oe}),r&&Le||(oe=H.indexOf(ve),ft.current=oe)}return{newValue:H,activeIndex:oe}},Ht=du($e=>{const Le=W$($e,I);if(!Le)return;if(D.current+=1,$e.type==="mousemove"&&$e.buttons===0){Re($e);return}const{newValue:Xe,activeIndex:Ve}=Ke({finger:Le,move:!0});X$({sliderRef:fe,activeIndex:Ve,setActive:P}),j(Xe),!X&&D.current>Zae&&G(!0),ne&&!j$(Xe,Y)&&ne($e,Xe,Ve)}),Re=du($e=>{const Le=W$($e,I);if(G(!1),!Le)return;const{newValue:Xe}=Ke({finger:Le,move:!0});P(-1),$e.type==="touchend"&&V(-1),T&&T($e,Z.current??Xe),I.current=void 0,J()}),Ye=du($e=>{if(i)return;z3()||$e.preventDefault();const Le=$e.changedTouches[0];Le!=null&&(I.current=Le.identifier);const Xe=W$($e,I);if(Xe!==!1){const{newValue:yt,activeIndex:bt}=Ke({finger:Xe});X$({sliderRef:fe,activeIndex:bt,setActive:P}),j(yt),ne&&!j$(yt,Y)&&ne($e,yt,bt)}D.current=0;const Ve=Ea(fe.current);Ve.addEventListener("touchmove",Ht,{passive:!0}),Ve.addEventListener("touchend",Re,{passive:!0})}),J=Q.useCallback(()=>{const $e=Ea(fe.current);$e.removeEventListener("mousemove",Ht),$e.removeEventListener("mouseup",Re),$e.removeEventListener("touchmove",Ht),$e.removeEventListener("touchend",Re)},[Re,Ht]);Q.useEffect(()=>{const{current:$e}=fe;return $e.addEventListener("touchstart",Ye,{passive:z3()}),()=>{$e.removeEventListener("touchstart",Ye),J()}},[J,Ye]),Q.useEffect(()=>{i&&J()},[i,J]);const Se=$e=>Le=>{if($e.onMouseDown?.(Le),i||Le.defaultPrevented||Le.button!==0)return;Le.preventDefault();const Xe=W$(Le,I);if(Xe!==!1){const{newValue:yt,activeIndex:bt}=Ke({finger:Xe});X$({sliderRef:fe,activeIndex:bt,setActive:P}),j(yt),ne&&!j$(yt,Y)&&ne(Le,yt,bt)}D.current=0;const Ve=Ea(fe.current);Ve.addEventListener("mousemove",Ht,{passive:!0}),Ve.addEventListener("mouseup",Re)},Ae=DC(ee?z[0]:f,f,h),we=DC(z[z.length-1],f,h)-Ae,Ie=($e={})=>{const Le=KE($e),Xe={onMouseDown:Se(Le||{})},Ve={...Le,...Xe};return{...$e,ref:Ne,...Ve}},dt=$e=>Le=>{$e.onMouseOver?.(Le);const Xe=Number(Le.currentTarget.getAttribute("data-index"));V(Xe)},Qe=$e=>Le=>{$e.onMouseLeave?.(Le),V(-1)},vt=($e={})=>{const Le=KE($e),Xe={onMouseOver:dt(Le||{}),onMouseLeave:Qe(Le||{})};return{...$e,...Le,...Xe}},et=$e=>({pointerEvents:O!==-1&&O!==$e?"none":void 0});let _e;return y==="vertical"&&(_e=a?"vertical-rl":"vertical-lr"),{active:O,axis:Ut,axisProps:nle,dragging:X,focusedThumbIndex:pe,getHiddenInputProps:($e={})=>{const Le=KE($e),Xe={onChange:gt(Le||{}),onFocus:Pe(Le||{}),onBlur:Ee(Le||{}),onKeyDown:Fe(Le||{})},Ve={...Le,...Xe};return{tabIndex:E,"aria-labelledby":e,"aria-orientation":y,"aria-valuemax":$(h),"aria-valuemin":$(f),name:p,type:"range",min:s.min,max:s.max,step:s.step===null&&s.marks?"any":s.step??void 0,disabled:i,...$e,...Ve,style:{...Fae,direction:a?"rtl":"ltr",width:"100%",height:"100%",writingMode:_e}}},getRootProps:Ie,getThumbProps:vt,marks:te,open:F,range:ee,rootRef:Ne,trackLeap:we,trackOffset:Ae,values:z,getThumbStyle:et}}const rle=s=>!s||!Fv(s);function ole(s){return Vi("MuiSlider",s)}const Dh=Mi("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),ale=s=>{const{open:e}=s;return{offset:$n(e&&Dh.valueLabelOpen),circle:Dh.valueLabelCircle,label:Dh.valueLabelLabel}};function lle(s){const{children:e,className:n,value:i}=s,r=ale(s);return e?Q.cloneElement(e,{className:e.props.className},he.jsxs(Q.Fragment,{children:[e.props.children,he.jsx("span",{className:$n(r.offset,n),"aria-hidden":!0,children:he.jsx("span",{className:r.circle,children:he.jsx("span",{className:r.label,children:i})})})]})):null}function V3(s){return s}const ule=tn("span",{name:"MuiSlider",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,e[`color${En(n.color)}`],n.size!=="medium"&&e[`size${En(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Pi(({theme:s})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Dh.disabled}`]:{pointerEvents:"none",cursor:"default",color:(s.vars||s).palette.grey[400]},[`&.${Dh.dragging}`]:{[`& .${Dh.thumb}, & .${Dh.track}`]:{transition:"none"}},variants:[...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{color:(s.vars||s).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),cle=tn("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),hle=tn("span",{name:"MuiSlider",slot:"Track"})(Pi(({theme:s})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:s.transitions.create(["left","width","bottom","height"],{duration:s.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e,track:"inverted"},style:{...s.vars?{backgroundColor:s.vars.palette.Slider[`${e}Track`],borderColor:s.vars.palette.Slider[`${e}Track`]}:{backgroundColor:TS(s.palette[e].main,.62),borderColor:TS(s.palette[e].main,.62),...s.applyStyles("dark",{backgroundColor:yS(s.palette[e].main,.5)}),...s.applyStyles("dark",{borderColor:yS(s.palette[e].main,.5)})}}}))]}))),dle=tn("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.thumb,e[`thumbColor${En(n.color)}`],n.size!=="medium"&&e[`thumbSize${En(n.size)}`]]}})(Pi(({theme:s})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:s.transitions.create(["box-shadow","left","bottom"],{duration:s.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(s.vars||s).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Dh.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(s.palette).filter(Uh()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Dh.focusVisible}`]:{...s.vars?{boxShadow:`0px 0px 0px 8px rgba(${s.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${ya(s.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Dh.active}`]:{...s.vars?{boxShadow:`0px 0px 0px 14px rgba(${s.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${ya(s.palette[e].main,.16)}`}}}}))]}))),fle=tn(lle,{name:"MuiSlider",slot:"ValueLabel"})(Pi(({theme:s})=>({zIndex:1,whiteSpace:"nowrap",...s.typography.body2,fontWeight:500,transition:s.transitions.create(["transform"],{duration:s.transitions.duration.shortest}),position:"absolute",backgroundColor:(s.vars||s).palette.grey[600],borderRadius:2,color:(s.vars||s).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Dh.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Dh.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:s.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),ple=tn("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:s=>XM(s)&&s!=="markActive",overridesResolver:(s,e)=>{const{markActive:n}=s;return[e.mark,n&&e.markActive]}})(Pi(({theme:s})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(s.vars||s).palette.background.paper,opacity:.8}}]}))),mle=tn("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:s=>XM(s)&&s!=="markLabelActive"})(Pi(({theme:s})=>({...s.typography.body2,color:(s.vars||s).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(s.vars||s).palette.text.primary}}]}))),gle=s=>{const{disabled:e,dragging:n,marked:i,orientation:r,track:a,classes:l,color:h,size:f}=s,p={root:["root",e&&"disabled",n&&"dragging",i&&"marked",r==="vertical"&&"vertical",a==="inverted"&&"trackInverted",a===!1&&"trackFalse",h&&`color${En(h)}`,f&&`size${En(f)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",f&&`thumbSize${En(f)}`,h&&`thumbColor${En(h)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Wi(p,ole,l)},_le=({children:s})=>s,vle=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiSlider"}),r=TT(),{"aria-label":a,"aria-valuetext":l,"aria-labelledby":h,component:f="span",components:p={},componentsProps:v={},color:T="primary",classes:y,className:S,disableSwap:$=!1,disabled:M=!1,getAriaLabel:C,getAriaValueText:E,marks:w=!1,max:I=100,min:O=0,name:P,onChange:F,onChangeCommitted:V,orientation:X="horizontal",shiftStep:G=10,size:D="medium",step:Z=1,scale:Y=V3,slotProps:j,slots:ne,tabIndex:ee,track:z="normal",value:te,valueLabelDisplay:ce="off",valueLabelFormat:pe=V3,...K}=i,fe={...i,isRtl:r,max:I,min:O,classes:y,disabled:M,disableSwap:$,orientation:X,marks:w,color:T,size:D,step:Z,shiftStep:G,scale:Y,track:z,valueLabelDisplay:ce,valueLabelFormat:pe},{axisProps:Ne,getRootProps:Pe,getHiddenInputProps:Ee,getThumbProps:We,open:Fe,active:gt,axis:ft,focusedThumbIndex:Ut,range:Ke,dragging:Ht,marks:Re,values:Ye,trackOffset:J,trackLeap:Se,getThumbStyle:Ae}=sle({...fe,rootRef:n});fe.marked=Re.length>0&&Re.some(Pt=>Pt.label),fe.dragging=Ht,fe.focusedThumbIndex=Ut;const we=gle(fe),Ie=ne?.root??p.Root??ule,dt=ne?.rail??p.Rail??cle,Qe=ne?.track??p.Track??hle,vt=ne?.thumb??p.Thumb??dle,et=ne?.valueLabel??p.ValueLabel??fle,_e=ne?.mark??p.Mark??ple,se=ne?.markLabel??p.MarkLabel??mle,$e=ne?.input??p.Input??"input",Le=j?.root??v.root,Xe=j?.rail??v.rail,Ve=j?.track??v.track,yt=j?.thumb??v.thumb,bt=j?.valueLabel??v.valueLabel,At=j?.mark??v.mark,Ft=j?.markLabel??v.markLabel,H=j?.input??v.input,oe=Yu({elementType:Ie,getSlotProps:Pe,externalSlotProps:Le,externalForwardedProps:K,additionalProps:{...rle(Ie)&&{as:f}},ownerState:{...fe,...Le?.ownerState},className:[we.root,S]}),ve=Yu({elementType:dt,externalSlotProps:Xe,ownerState:fe,className:we.rail}),re=Yu({elementType:Qe,externalSlotProps:Ve,additionalProps:{style:{...Ne[ft].offset(J),...Ne[ft].leap(Se)}},ownerState:{...fe,...Ve?.ownerState},className:we.track}),ye=Yu({elementType:vt,getSlotProps:We,externalSlotProps:yt,ownerState:{...fe,...yt?.ownerState},className:we.thumb}),lt=Yu({elementType:et,externalSlotProps:bt,ownerState:{...fe,...bt?.ownerState},className:we.valueLabel}),Me=Yu({elementType:_e,externalSlotProps:At,ownerState:fe,className:we.mark}),Ze=Yu({elementType:se,externalSlotProps:Ft,ownerState:fe,className:we.markLabel}),$t=Yu({elementType:$e,getSlotProps:Ee,externalSlotProps:H,ownerState:fe});return he.jsxs(Ie,{...oe,children:[he.jsx(dt,{...ve}),he.jsx(Qe,{...re}),Re.filter(Pt=>Pt.value>=O&&Pt.value<=I).map((Pt,Mt)=>{const xt=DC(Pt.value,O,I),Xt=Ne[ft].offset(xt);let Yt;return z===!1?Yt=Ye.includes(Pt.value):Yt=z==="normal"&&(Ke?Pt.value>=Ye[0]&&Pt.value<=Ye[Ye.length-1]:Pt.value<=Ye[0])||z==="inverted"&&(Ke?Pt.value<=Ye[0]||Pt.value>=Ye[Ye.length-1]:Pt.value>=Ye[0]),he.jsxs(Q.Fragment,{children:[he.jsx(_e,{"data-index":Mt,...Me,...!Fv(_e)&&{markActive:Yt},style:{...Xt,...Me.style},className:$n(Me.className,Yt&&we.markActive)}),Pt.label!=null?he.jsx(se,{"aria-hidden":!0,"data-index":Mt,...Ze,...!Fv(se)&&{markLabelActive:Yt},style:{...Xt,...Ze.style},className:$n(we.markLabel,Ze.className,Yt&&we.markLabelActive),children:Pt.label}):null]},Mt)}),Ye.map((Pt,Mt)=>{const xt=DC(Pt,O,I),Xt=Ne[ft].offset(xt),Yt=ce==="off"?_le:et;return he.jsx(Yt,{...!Fv(Yt)&&{valueLabelFormat:pe,valueLabelDisplay:ce,value:typeof pe=="function"?pe(Y(Pt),Mt):pe,index:Mt,open:Fe===Mt||gt===Mt||ce==="on",disabled:M},...lt,children:he.jsx(vt,{"data-index":Mt,...ye,className:$n(we.thumb,ye.className,gt===Mt&&we.active,Ut===Mt&&we.focusVisible),style:{...Xt,...Ae(Mt),...ye.style},children:he.jsx($e,{"data-index":Mt,"aria-label":C?C(Mt):a,"aria-valuenow":Y(Pt),"aria-labelledby":h,"aria-valuetext":E?E(Y(Pt),Mt):l,value:Ye[Mt],...$t})})},Mt)})]})});function ble(s){return Vi("MuiTooltip",s)}const eo=Mi("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function yle(s){return Math.round(s*1e5)/1e5}const Tle=s=>{const{classes:e,disableInteractive:n,arrow:i,touch:r,placement:a}=s,l={popper:["popper",!n&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",r&&"touch",`tooltipPlacement${En(a.split("-")[0])}`],arrow:["arrow"]};return Wi(l,ble,e)},Ele=tn(O4,{name:"MuiTooltip",slot:"Popper",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(Pi(({theme:s})=>({zIndex:(s.vars||s).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${eo.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${eo.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${eo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${eo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${eo.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${eo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${eo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${eo.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Sle=tn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${En(n.placement.split("-")[0])}`]]}})(Pi(({theme:s})=>({backgroundColor:s.vars?s.vars.palette.Tooltip.bg:ya(s.palette.grey[700],.92),borderRadius:(s.vars||s).shape.borderRadius,color:(s.vars||s).palette.common.white,fontFamily:s.typography.fontFamily,padding:"4px 8px",fontSize:s.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:s.typography.fontWeightMedium,[`.${eo.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${eo.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${eo.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${eo.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:s.typography.pxToRem(14),lineHeight:`${yle(16/14)}em`,fontWeight:s.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${eo.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${eo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${eo.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${eo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${eo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${eo.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${eo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${eo.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${eo.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${eo.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Ale=tn("span",{name:"MuiTooltip",slot:"Arrow"})(Pi(({theme:s})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:s.vars?s.vars.palette.Tooltip.bg:ya(s.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let K$=!1;const W3=new YM;let AE={x:0,y:0};function q$(s,e){return(n,...i)=>{e&&e(n,...i),s(n,...i)}}const no=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiTooltip"}),{arrow:r=!1,children:a,classes:l,components:h={},componentsProps:f={},describeChild:p=!1,disableFocusListener:v=!1,disableHoverListener:T=!1,disableInteractive:y=!1,disableTouchListener:S=!1,enterDelay:$=100,enterNextDelay:M=0,enterTouchDelay:C=700,followCursor:E=!1,id:w,leaveDelay:I=0,leaveTouchDelay:O=1500,onClose:P,onOpen:F,open:V,placement:X="bottom",PopperComponent:G,PopperProps:D={},slotProps:Z={},slots:Y={},title:j,TransitionComponent:ne,TransitionProps:ee,...z}=i,te=Q.isValidElement(a)?a:he.jsx("span",{children:a}),ce=ab(),pe=TT(),[K,fe]=Q.useState(),[Ne,Pe]=Q.useState(null),Ee=Q.useRef(!1),We=y||E,Fe=Ay(),gt=Ay(),ft=Ay(),Ut=Ay(),[Ke,Ht]=CC({controlled:V,default:!1,name:"Tooltip",state:"open"});let Re=Ke;const Ye=ET(w),J=Q.useRef(),Se=du(()=>{J.current!==void 0&&(document.body.style.WebkitUserSelect=J.current,J.current=void 0),Ut.clear()});Q.useEffect(()=>Se,[Se]);const Ae=Wt=>{W3.clear(),K$=!0,Ht(!0),F&&!Re&&F(Wt)},we=du(Wt=>{W3.start(800+I,()=>{K$=!1}),Ht(!1),P&&Re&&P(Wt),Fe.start(ce.transitions.duration.shortest,()=>{Ee.current=!1})}),Ie=Wt=>{Ee.current&&Wt.type!=="touchstart"||(K&&K.removeAttribute("title"),gt.clear(),ft.clear(),$||K$&&M?gt.start(K$?M:$,()=>{Ae(Wt)}):Ae(Wt))},dt=Wt=>{gt.clear(),ft.start(I,()=>{we(Wt)})},[,Qe]=Q.useState(!1),vt=Wt=>{tT(Wt.target)||(Qe(!1),dt(Wt))},et=Wt=>{K||fe(Wt.currentTarget),tT(Wt.target)&&(Qe(!0),Ie(Wt))},_e=Wt=>{Ee.current=!0;const xn=te.props;xn.onTouchStart&&xn.onTouchStart(Wt)},se=Wt=>{_e(Wt),ft.clear(),Fe.clear(),Se(),J.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ut.start(C,()=>{document.body.style.WebkitUserSelect=J.current,Ie(Wt)})},$e=Wt=>{te.props.onTouchEnd&&te.props.onTouchEnd(Wt),Se(),ft.start(O,()=>{we(Wt)})};Q.useEffect(()=>{if(!Re)return;function Wt(xn){xn.key==="Escape"&&we(xn)}return document.addEventListener("keydown",Wt),()=>{document.removeEventListener("keydown",Wt)}},[we,Re]);const Le=sa(AT(te),fe,n);!j&&j!==0&&(Re=!1);const Xe=Q.useRef(),Ve=Wt=>{const xn=te.props;xn.onMouseMove&&xn.onMouseMove(Wt),AE={x:Wt.clientX,y:Wt.clientY},Xe.current&&Xe.current.update()},yt={},bt=typeof j=="string";p?(yt.title=!Re&&bt&&!T?j:null,yt["aria-describedby"]=Re?Ye:null):(yt["aria-label"]=bt?j:null,yt["aria-labelledby"]=Re&&!bt?Ye:null);const At={...yt,...z,...te.props,className:$n(z.className,te.props.className),onTouchStart:_e,ref:Le,...E?{onMouseMove:Ve}:{}},Ft={};S||(At.onTouchStart=se,At.onTouchEnd=$e),T||(At.onMouseOver=q$(Ie,At.onMouseOver),At.onMouseLeave=q$(dt,At.onMouseLeave),We||(Ft.onMouseOver=Ie,Ft.onMouseLeave=dt)),v||(At.onFocus=q$(et,At.onFocus),At.onBlur=q$(vt,At.onBlur),We||(Ft.onFocus=et,Ft.onBlur=vt));const H={...i,isRtl:pe,arrow:r,disableInteractive:We,placement:X,PopperComponentProp:G,touch:Ee.current},oe=typeof Z.popper=="function"?Z.popper(H):Z.popper,ve=Q.useMemo(()=>{let Wt=[{name:"arrow",enabled:!!Ne,options:{element:Ne,padding:4}}];return D.popperOptions?.modifiers&&(Wt=Wt.concat(D.popperOptions.modifiers)),oe?.popperOptions?.modifiers&&(Wt=Wt.concat(oe.popperOptions.modifiers)),{...D.popperOptions,...oe?.popperOptions,modifiers:Wt}},[Ne,D.popperOptions,oe?.popperOptions]),re=Tle(H),ye=typeof Z.transition=="function"?Z.transition(H):Z.transition,lt={slots:{popper:h.Popper,transition:h.Transition??ne,tooltip:h.Tooltip,arrow:h.Arrow,...Y},slotProps:{arrow:Z.arrow??f.arrow,popper:{...D,...oe??f.popper},tooltip:Z.tooltip??f.tooltip,transition:{...ee,...ye??f.transition}}},[Me,Ze]=Es("popper",{elementType:Ele,externalForwardedProps:lt,ownerState:H,className:$n(re.popper,D?.className)}),[$t,Pt]=Es("transition",{elementType:LC,externalForwardedProps:lt,ownerState:H}),[Mt,xt]=Es("tooltip",{elementType:Sle,className:re.tooltip,externalForwardedProps:lt,ownerState:H}),[Xt,Yt]=Es("arrow",{elementType:Ale,className:re.arrow,externalForwardedProps:lt,ownerState:H,ref:Pe});return he.jsxs(Q.Fragment,{children:[Q.cloneElement(te,At),he.jsx(Me,{as:G??O4,placement:X,anchorEl:E?{getBoundingClientRect:()=>({top:AE.y,left:AE.x,right:AE.x,bottom:AE.y,width:0,height:0})}:K,popperRef:Xe,open:K?Re:!1,id:Ye,transition:!0,...Ft,...Ze,popperOptions:ve,children:({TransitionProps:Wt})=>he.jsx($t,{timeout:ce.transitions.duration.shorter,...Wt,...Pt,children:he.jsxs(Mt,{...xt,children:[j,r?he.jsx(Xt,{...Yt}):null]})})})]})});function $le(s){return Vi("MuiTab",s)}const Eh=Mi("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),xle=s=>{const{classes:e,textColor:n,fullWidth:i,wrapped:r,icon:a,label:l,selected:h,disabled:f}=s,p={root:["root",a&&l&&"labelIcon",`textColor${En(n)}`,i&&"fullWidth",r&&"wrapped",h&&"selected",f&&"disabled"],icon:["iconWrapper","icon"]};return Wi(p,$le,e)},Cle=tn(rA,{name:"MuiTab",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${En(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped,{[`& .${Eh.iconWrapper}`]:e.iconWrapper},{[`& .${Eh.icon}`]:e.icon}]}})(Pi(({theme:s})=>({...s.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="top",style:{[`& > .${Eh.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="bottom",style:{[`& > .${Eh.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="start",style:{[`& > .${Eh.icon}`]:{marginRight:s.spacing(1)}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="end",style:{[`& > .${Eh.icon}`]:{marginLeft:s.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Eh.selected}`]:{opacity:1},[`&.${Eh.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(s.vars||s).palette.text.secondary,[`&.${Eh.selected}`]:{color:(s.vars||s).palette.primary.main},[`&.${Eh.disabled}`]:{color:(s.vars||s).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(s.vars||s).palette.text.secondary,[`&.${Eh.selected}`]:{color:(s.vars||s).palette.secondary.main},[`&.${Eh.disabled}`]:{color:(s.vars||s).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:s.typography.pxToRem(12)}}]}))),X3=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiTab"}),{className:r,disabled:a=!1,disableFocusRipple:l=!1,fullWidth:h,icon:f,iconPosition:p="top",indicator:v,label:T,onChange:y,onClick:S,onFocus:$,selected:M,selectionFollowsFocus:C,textColor:E="inherit",value:w,wrapped:I=!1,...O}=i,P={...i,disabled:a,disableFocusRipple:l,selected:M,icon:!!f,iconPosition:p,label:!!T,fullWidth:h,textColor:E,wrapped:I},F=xle(P),V=f&&T&&Q.isValidElement(f)?Q.cloneElement(f,{className:$n(F.icon,f.props.className)}):f,X=D=>{!M&&y&&y(D,w),S&&S(D)},G=D=>{C&&!M&&y&&y(D,w),$&&$(D)};return he.jsxs(Cle,{focusRipple:!l,className:$n(F.root,r),ref:n,role:"tab","aria-selected":M,disabled:a,onClick:X,onFocus:G,ownerState:P,tabIndex:M?0:-1,...O,children:[p==="top"||p==="start"?he.jsxs(Q.Fragment,{children:[V,T]}):he.jsxs(Q.Fragment,{children:[T,V]}),v]})}),Mle=Io(he.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),Rle=Io(he.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function wle(s){return(1+Math.sin(Math.PI*s-Math.PI/2))/2}function Ile(s,e,n,i={},r=()=>{}){const{ease:a=wle,duration:l=300}=i;let h=null;const f=e[s];let p=!1;const v=()=>{p=!0},T=y=>{if(p){r(new Error("Animation cancelled"));return}h===null&&(h=y);const S=Math.min(1,(y-h)/l);if(e[s]=a(S)*(n-f)+f,S>=1){requestAnimationFrame(()=>{r(null)});return}requestAnimationFrame(T)};return f===n?(r(new Error("Element already at target position")),v):(requestAnimationFrame(T),v)}const Ole={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Nle(s){const{onChange:e,...n}=s,i=Q.useRef(),r=Q.useRef(null),a=()=>{i.current=r.current.offsetHeight-r.current.clientHeight};return Ph(()=>{const l=jM(()=>{const f=i.current;a(),f!==i.current&&e(i.current)}),h=rf(r.current);return h.addEventListener("resize",l),()=>{l.clear(),h.removeEventListener("resize",l)}},[e]),Q.useEffect(()=>{a(),e(i.current)},[e]),he.jsx("div",{style:Ole,...n,ref:r})}function Lle(s){return Vi("MuiTabScrollButton",s)}const Dle=Mi("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Ble=s=>{const{classes:e,orientation:n,disabled:i}=s;return Wi({root:["root",n,i&&"disabled"]},Lle,e)},kle=tn(rA,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.root,n.orientation&&e[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Dle.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Ple=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiTabScrollButton"}),{className:r,slots:a={},slotProps:l={},direction:h,orientation:f,disabled:p,...v}=i,T=TT(),y={isRtl:T,...i},S=Ble(y),$=a.StartScrollButtonIcon??Mle,M=a.EndScrollButtonIcon??Rle,C=Yu({elementType:$,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y}),E=Yu({elementType:M,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y});return he.jsx(kle,{component:"div",className:$n(S.root,r),ref:n,role:null,ownerState:y,tabIndex:null,...v,style:{...v.style,...f==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${T?-90:90}deg)`}},children:h==="left"?he.jsx($,{...C}):he.jsx(M,{...E})})});function Ule(s){return Vi("MuiTabs",s)}const Ow=Mi("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),j3=(s,e)=>s===e?s.firstChild:e&&e.nextElementSibling?e.nextElementSibling:s.firstChild,Y3=(s,e)=>s===e?s.lastChild:e&&e.previousElementSibling?e.previousElementSibling:s.lastChild,J$=(s,e,n)=>{let i=!1,r=n(s,e);for(;r;){if(r===s.firstChild){if(i)return;i=!0}const a=r.disabled||r.getAttribute("aria-disabled")==="true";if(!r.hasAttribute("tabindex")||a)r=n(s,r);else{r.focus();return}}},Fle=s=>{const{vertical:e,fixed:n,hideScrollbar:i,scrollableX:r,scrollableY:a,centered:l,scrollButtonsHideMobile:h,classes:f}=s;return Wi({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",i&&"hideScrollbar",r&&"scrollableX",a&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",h&&"scrollButtonsHideMobile"],scrollableX:[r&&"scrollableX"],hideScrollbar:[i&&"hideScrollbar"]},Ule,f)},Hle=tn("div",{name:"MuiTabs",slot:"Root",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[{[`& .${Ow.scrollButtons}`]:e.scrollButtons},{[`& .${Ow.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(Pi(({theme:s})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${Ow.scrollButtons}`]:{[s.breakpoints.down("sm")]:{display:"none"}}}}]}))),Gle=tn("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:s})=>s.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:s})=>s.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:s})=>s.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:s})=>s.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),zle=tn("div",{name:"MuiTabs",slot:"List",overridesResolver:(s,e)=>{const{ownerState:n}=s;return[e.list,e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:s})=>s.vertical,style:{flexDirection:"column"}},{props:({ownerState:s})=>s.centered,style:{justifyContent:"center"}}]}),Vle=tn("span",{name:"MuiTabs",slot:"Indicator"})(Pi(({theme:s})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:s.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(s.vars||s).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(s.vars||s).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),Wle=tn(Nle)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),K3={},Xle=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiTabs"}),r=ab(),a=TT(),{"aria-label":l,"aria-labelledby":h,action:f,centered:p=!1,children:v,className:T,component:y="div",allowScrollButtonsMobile:S=!1,indicatorColor:$="primary",onChange:M,orientation:C="horizontal",ScrollButtonComponent:E,scrollButtons:w="auto",selectionFollowsFocus:I,slots:O={},slotProps:P={},TabIndicatorProps:F={},TabScrollButtonProps:V={},textColor:X="primary",value:G,variant:D="standard",visibleScrollbar:Z=!1,...Y}=i,j=D==="scrollable",ne=C==="vertical",ee=ne?"scrollTop":"scrollLeft",z=ne?"top":"left",te=ne?"bottom":"right",ce=ne?"clientHeight":"clientWidth",pe=ne?"height":"width",K={...i,component:y,allowScrollButtonsMobile:S,indicatorColor:$,orientation:C,vertical:ne,scrollButtons:w,textColor:X,variant:D,visibleScrollbar:Z,fixed:!j,hideScrollbar:j&&!Z,scrollableX:j&&!ne,scrollableY:j&&ne,centered:p&&!j,scrollButtonsHideMobile:!S},fe=Fle(K),Ne=Yu({elementType:O.StartScrollButtonIcon,externalSlotProps:P.startScrollButtonIcon,ownerState:K}),Pe=Yu({elementType:O.EndScrollButtonIcon,externalSlotProps:P.endScrollButtonIcon,ownerState:K}),[Ee,We]=Q.useState(!1),[Fe,gt]=Q.useState(K3),[ft,Ut]=Q.useState(!1),[Ke,Ht]=Q.useState(!1),[Re,Ye]=Q.useState(!1),[J,Se]=Q.useState({overflow:"hidden",scrollbarWidth:0}),Ae=new Map,we=Q.useRef(null),Ie=Q.useRef(null),dt={slots:O,slotProps:{indicator:F,scrollButton:V,...P}},Qe=()=>{const jt=we.current;let Zt;if(jt){const gn=jt.getBoundingClientRect();Zt={clientWidth:jt.clientWidth,scrollLeft:jt.scrollLeft,scrollTop:jt.scrollTop,scrollWidth:jt.scrollWidth,top:gn.top,bottom:gn.bottom,left:gn.left,right:gn.right}}let Nn;if(jt&&G!==!1){const gn=Ie.current.children;if(gn.length>0){const zn=gn[Ae.get(G)];Nn=zn?zn.getBoundingClientRect():null}}return{tabsMeta:Zt,tabMeta:Nn}},vt=du(()=>{const{tabsMeta:jt,tabMeta:Zt}=Qe();let Nn=0,gn;ne?(gn="top",Zt&&jt&&(Nn=Zt.top-jt.top+jt.scrollTop)):(gn=a?"right":"left",Zt&&jt&&(Nn=(a?-1:1)*(Zt[gn]-jt[gn]+jt.scrollLeft)));const zn={[gn]:Nn,[pe]:Zt?Zt[pe]:0};if(typeof Fe[gn]!="number"||typeof Fe[pe]!="number")gt(zn);else{const is=Math.abs(Fe[gn]-zn[gn]),lr=Math.abs(Fe[pe]-zn[pe]);(is>=1||lr>=1)&&gt(zn)}}),et=(jt,{animation:Zt=!0}={})=>{Zt?Ile(ee,we.current,jt,{duration:r.transitions.duration.standard}):we.current[ee]=jt},_e=jt=>{let Zt=we.current[ee];ne?Zt+=jt:Zt+=jt*(a?-1:1),et(Zt)},se=()=>{const jt=we.current[ce];let Zt=0;const Nn=Array.from(Ie.current.children);for(let gn=0;gn<Nn.length;gn+=1){const zn=Nn[gn];if(Zt+zn[ce]>jt){gn===0&&(Zt=jt);break}Zt+=zn[ce]}return Zt},$e=()=>{_e(-1*se())},Le=()=>{_e(se())},[Xe,{onChange:Ve,...yt}]=Es("scrollbar",{className:$n(fe.scrollableX,fe.hideScrollbar),elementType:Wle,shouldForwardComponentProp:!0,externalForwardedProps:dt,ownerState:K}),bt=Q.useCallback(jt=>{Ve?.(jt),Se({overflow:null,scrollbarWidth:jt})},[Ve]),[At,Ft]=Es("scrollButtons",{className:$n(fe.scrollButtons,V.className),elementType:Ple,externalForwardedProps:dt,ownerState:K,additionalProps:{orientation:C,slots:{StartScrollButtonIcon:O.startScrollButtonIcon||O.StartScrollButtonIcon,EndScrollButtonIcon:O.endScrollButtonIcon||O.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Ne,endScrollButtonIcon:Pe}}}),H=()=>{const jt={};jt.scrollbarSizeListener=j?he.jsx(Xe,{...yt,onChange:bt}):null;const Nn=j&&(w==="auto"&&(ft||Ke)||w===!0);return jt.scrollButtonStart=Nn?he.jsx(At,{direction:a?"right":"left",onClick:$e,disabled:!ft,...Ft}):null,jt.scrollButtonEnd=Nn?he.jsx(At,{direction:a?"left":"right",onClick:Le,disabled:!Ke,...Ft}):null,jt},oe=du(jt=>{const{tabsMeta:Zt,tabMeta:Nn}=Qe();if(!(!Nn||!Zt)){if(Nn[z]<Zt[z]){const gn=Zt[ee]+(Nn[z]-Zt[z]);et(gn,{animation:jt})}else if(Nn[te]>Zt[te]){const gn=Zt[ee]+(Nn[te]-Zt[te]);et(gn,{animation:jt})}}}),ve=du(()=>{j&&w!==!1&&Ye(!Re)});Q.useEffect(()=>{const jt=jM(()=>{we.current&&vt()});let Zt;const Nn=is=>{is.forEach(lr=>{lr.removedNodes.forEach(Rs=>{Zt?.unobserve(Rs)}),lr.addedNodes.forEach(Rs=>{Zt?.observe(Rs)})}),jt(),ve()},gn=rf(we.current);gn.addEventListener("resize",jt);let zn;return typeof ResizeObserver<"u"&&(Zt=new ResizeObserver(jt),Array.from(Ie.current.children).forEach(is=>{Zt.observe(is)})),typeof MutationObserver<"u"&&(zn=new MutationObserver(Nn),zn.observe(Ie.current,{childList:!0})),()=>{jt.clear(),gn.removeEventListener("resize",jt),zn?.disconnect(),Zt?.disconnect()}},[vt,ve]),Q.useEffect(()=>{const jt=Array.from(Ie.current.children),Zt=jt.length;if(typeof IntersectionObserver<"u"&&Zt>0&&j&&w!==!1){const Nn=jt[0],gn=jt[Zt-1],zn={root:we.current,threshold:.99},is=Ks=>{Ut(!Ks[0].isIntersecting)},lr=new IntersectionObserver(is,zn);lr.observe(Nn);const Rs=Ks=>{Ht(!Ks[0].isIntersecting)},Cn=new IntersectionObserver(Rs,zn);return Cn.observe(gn),()=>{lr.disconnect(),Cn.disconnect()}}},[j,w,Re,v?.length]),Q.useEffect(()=>{We(!0)},[]),Q.useEffect(()=>{vt()}),Q.useEffect(()=>{oe(K3!==Fe)},[oe,Fe]),Q.useImperativeHandle(f,()=>({updateIndicator:vt,updateScrollButtons:ve}),[vt,ve]);const[re,ye]=Es("indicator",{className:$n(fe.indicator,F.className),elementType:Vle,externalForwardedProps:dt,ownerState:K,additionalProps:{style:Fe}}),lt=he.jsx(re,{...ye});let Me=0;const Ze=Q.Children.map(v,jt=>{if(!Q.isValidElement(jt))return null;const Zt=jt.props.value===void 0?Me:jt.props.value;Ae.set(Zt,Me);const Nn=Zt===G;return Me+=1,Q.cloneElement(jt,{fullWidth:D==="fullWidth",indicator:Nn&&!Ee&&lt,selected:Nn,selectionFollowsFocus:I,onChange:M,textColor:X,value:Zt,...Me===1&&G===!1&&!jt.props.tabIndex?{tabIndex:0}:{}})}),$t=jt=>{if(jt.altKey||jt.shiftKey||jt.ctrlKey||jt.metaKey)return;const Zt=Ie.current,Nn=Ea(Zt).activeElement;if(Nn.getAttribute("role")!=="tab")return;let zn=C==="horizontal"?"ArrowLeft":"ArrowUp",is=C==="horizontal"?"ArrowRight":"ArrowDown";switch(C==="horizontal"&&a&&(zn="ArrowRight",is="ArrowLeft"),jt.key){case zn:jt.preventDefault(),J$(Zt,Nn,Y3);break;case is:jt.preventDefault(),J$(Zt,Nn,j3);break;case"Home":jt.preventDefault(),J$(Zt,null,j3);break;case"End":jt.preventDefault(),J$(Zt,null,Y3);break}},Pt=H(),[Mt,xt]=Es("root",{ref:n,className:$n(fe.root,T),elementType:Hle,externalForwardedProps:{...dt,...Y,component:y},ownerState:K}),[Xt,Yt]=Es("scroller",{ref:we,className:fe.scroller,elementType:Gle,externalForwardedProps:dt,ownerState:K,additionalProps:{style:{overflow:J.overflow,[ne?`margin${a?"Left":"Right"}`:"marginBottom"]:Z?void 0:-J.scrollbarWidth}}}),[Wt,xn]=Es("list",{ref:Ie,className:$n(fe.list,fe.flexContainer),elementType:zle,externalForwardedProps:dt,ownerState:K,getSlotProps:jt=>({...jt,onKeyDown:Zt=>{$t(Zt),jt.onKeyDown?.(Zt)}})});return he.jsxs(Mt,{...xt,children:[Pt.scrollButtonStart,Pt.scrollbarSizeListener,he.jsxs(Xt,{...Yt,children:[he.jsx(Wt,{"aria-label":l,"aria-labelledby":h,"aria-orientation":C==="vertical"?"vertical":null,role:"tablist",...xn,children:Ze}),Ee&&lt]}),Pt.scrollButtonEnd]})});function jle(s){return Vi("MuiTextField",s)}Mi("MuiTextField",["root"]);const Yle={standard:PN,filled:kN,outlined:FN},Kle=s=>{const{classes:e}=s;return Wi({root:["root"]},jle,e)},qle=tn(OE,{name:"MuiTextField",slot:"Root"})({}),Nw=Q.forwardRef(function(e,n){const i=Ki({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:a=!1,children:l,className:h,color:f="primary",defaultValue:p,disabled:v=!1,error:T=!1,FormHelperTextProps:y,fullWidth:S=!1,helperText:$,id:M,InputLabelProps:C,inputProps:E,InputProps:w,inputRef:I,label:O,maxRows:P,minRows:F,multiline:V=!1,name:X,onBlur:G,onChange:D,onFocus:Z,placeholder:Y,required:j=!1,rows:ne,select:ee=!1,SelectProps:z,slots:te={},slotProps:ce={},type:pe,value:K,variant:fe="outlined",...Ne}=i,Pe={...i,autoFocus:a,color:f,disabled:v,error:T,fullWidth:S,multiline:V,required:j,select:ee,variant:fe},Ee=Kle(Pe),We=ET(M),Fe=$&&We?`${We}-helper-text`:void 0,gt=O&&We?`${We}-label`:void 0,ft=Yle[fe],Ut={slots:te,slotProps:{input:w,inputLabel:C,htmlInput:E,formHelperText:y,select:z,...ce}},Ke={},Ht=Ut.slotProps.inputLabel;fe==="outlined"&&(Ht&&typeof Ht.shrink<"u"&&(Ke.notched=Ht.shrink),Ke.label=O),ee&&((!z||!z.native)&&(Ke.id=void 0),Ke["aria-describedby"]=void 0);const[Re,Ye]=Es("root",{elementType:qle,shouldForwardComponentProp:!0,externalForwardedProps:{...Ut,...Ne},ownerState:Pe,className:$n(Ee.root,h),ref:n,additionalProps:{disabled:v,error:T,fullWidth:S,required:j,color:f,variant:fe}}),[J,Se]=Es("input",{elementType:ft,externalForwardedProps:Ut,additionalProps:Ke,ownerState:Pe}),[Ae,we]=Es("inputLabel",{elementType:G4,externalForwardedProps:Ut,ownerState:Pe}),[Ie,dt]=Es("htmlInput",{elementType:"input",externalForwardedProps:Ut,ownerState:Pe}),[Qe,vt]=Es("formHelperText",{elementType:Yoe,externalForwardedProps:Ut,ownerState:Pe}),[et,_e]=Es("select",{elementType:GN,externalForwardedProps:Ut,ownerState:Pe}),se=he.jsx(J,{"aria-describedby":Fe,autoComplete:r,autoFocus:a,defaultValue:p,fullWidth:S,multiline:V,name:X,rows:ne,maxRows:P,minRows:F,type:pe,value:K,id:We,inputRef:I,onBlur:G,onChange:D,onFocus:Z,placeholder:Y,inputProps:dt,slots:{input:te.htmlInput?Ie:void 0},...Se});return he.jsxs(Re,{...Ye,children:[O!=null&&O!==""&&he.jsx(Ae,{htmlFor:We,id:gt,...we,children:O}),ee?he.jsx(et,{"aria-describedby":Fe,id:We,labelId:gt,value:K,input:se,..._e,children:l}):se,$&&he.jsx(Qe,{id:Fe,...vt,children:$})]})});function Lw(s){return he.jsxs(he.Fragment,{children:[he.jsx(BO,{size:3,alignItems:"center",children:s.label}),he.jsx(BO,{size:9,children:he.jsx(vle,{style:{width:300,margin:30},defaultValue:10,value:s.value,onChange:(e,n)=>s.onChange(n),step:1,marks:[0,5,10,15,20,25,30,35,40,45,50].map(e=>({value:e})),size:"medium",min:5,max:50,valueLabelDisplay:"on"})})]})}function Jle(s){const[e,n]=Q.useState(s.dimensions.x),[i,r]=Q.useState(s.dimensions.y),[a,l]=Q.useState(s.dimensions.z);return he.jsxs(P4,{open:s.open,children:[he.jsx(H4,{children:"Einstellungen für die Welt"}),he.jsx(F4,{children:he.jsxs(BO,{container:!0,children:[he.jsx(Lw,{label:"Größe x:",value:e,onChange:n},"x"),he.jsx(Lw,{label:"Größe y:",value:i,onChange:r},"y"),he.jsx(Lw,{label:"Größe z:",value:a,onChange:l},"z")]})}),he.jsxs(U4,{children:[he.jsx(NC,{onClick:()=>s.onClose(new Q0(e,i,a)),children:"Ok"}),he.jsx(NC,{onClick:s.onCancel,children:"Abbruch"})]})]})}const Zle=Io(he.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),Qle=Io(he.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"})),eue=Io(he.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),tue=Io(he.jsx("path",{d:"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5m0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5m5.8-10 2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5m0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5"})),nue=Io(he.jsx("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2z"})),iue=Io(he.jsx("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6z"})),sue=Io(he.jsx("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6.5 7V23h-1V12.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5v1h-1v-.69c-1.46-.38-2.7-1.29-3.51-2.52-.31.87-.49 1.78-.49 2.71 0 .23.02.46.03.69L15 16.5V23h-2v-5l-1.78-2.54L11 19l-3 4-1.6-1.2L9 18.33V13c0-1.15.18-2.29.5-3.39l-1.5.85V14H6V9.3l5.4-3.07v.01c.59-.31 1.32-.33 1.94.03.36.21.63.51.8.85l.79 1.67C15.58 10.1 16.94 11 18.5 11c.83 0 1.5.67 1.5 1.5"})),rue=Io(he.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),oue=Io(he.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),aue=Io(he.jsx("path",{d:"M2 4h20v16H2z"})),lue=Io(he.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"})),K4=Io(he.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),q4=Io(he.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),uue=Io(he.jsx("path",{d:"M6 6h12v12H6z"})),cue=Io(he.jsx("path",{d:"m6.83 11 1.59 1.59L7 14l-4-4 4-4 1.41 1.41L6.83 9H15c1.1 0 2 .9 2 2v9h-2v-9z"})),hue=Io(he.jsx("path",{d:"m17.17 11-1.59 1.59L17 14l4-4-4-4-1.41 1.41L17.17 9H9c-1.1 0-2 .9-2 2v9h2v-9z"})),J4=Io(he.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),zN=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),due=zN?Promise.resolve().then(function(){return gue}):Promise.resolve().then(function(){return Eue});async function Z4(...s){return(await due).default(...s)}zN?Promise.resolve().then(function(){return vue}):Promise.resolve().then(function(){return Aue});const fue=zN?Promise.resolve().then(function(){return yue}):Promise.resolve().then(function(){return xue});async function Q4(...s){return(await fue).default(...s)}const pue=async s=>{const e=await s.getFile();return e.handle=s,e};var mue=async(s=[{}])=>{Array.isArray(s)||(s=[s]);const e=[];s.forEach((r,a)=>{e[a]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(l=>{e[a].accept[l]=r.extensions||[]}):e[a].accept["*/*"]=r.extensions||[]});const n=await window.showOpenFilePicker({id:s[0].id,startIn:s[0].startIn,types:e,multiple:s[0].multiple||!1,excludeAcceptAllOption:s[0].excludeAcceptAllOption||!1}),i=await Promise.all(n.map(pue));return s[0].multiple?i:i[0]},gue={__proto__:null,default:mue};function mx(s){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return mx=function(n){this.s=n,this.n=n.next},mx.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var i=this.s.return;return i===void 0?Promise.resolve({value:n,done:!0}):e(i.apply(this.s,arguments))},throw:function(n){var i=this.s.return;return i===void 0?Promise.reject(n):e(i.apply(this.s,arguments))}},new mx(s)}const eV=async(s,e,n=s.name,i)=>{const r=[],a=[];var l,h=!1,f=!1;try{for(var p,v=function(T){var y,S,$,M=2;for(typeof Symbol<"u"&&(S=Symbol.asyncIterator,$=Symbol.iterator);M--;){if(S&&(y=T[S])!=null)return y.call(T);if($&&(y=T[$])!=null)return new mx(y.call(T));S="@@asyncIterator",$="@@iterator"}throw new TypeError("Object is not async iterable")}(s.values());h=!(p=await v.next()).done;h=!1){const T=p.value,y=`${n}/${T.name}`;T.kind==="file"?a.push(T.getFile().then(S=>(S.directoryHandle=s,S.handle=T,Object.defineProperty(S,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>y})))):T.kind!=="directory"||!e||i&&i(T)||r.push(eV(T,e,y,i))}}catch(T){f=!0,l=T}finally{try{h&&v.return!=null&&await v.return()}finally{if(f)throw l}}return[...(await Promise.all(r)).flat(),...await Promise.all(a)]};var _ue=async(s={})=>{s.recursive=s.recursive||!1,s.mode=s.mode||"read";const e=await window.showDirectoryPicker({id:s.id,startIn:s.startIn,mode:s.mode});return(await(await e.values()).next()).done?[e]:eV(e,s.recursive,void 0,s.skipDirectory)},vue={__proto__:null,default:_ue},bue=async(s,e=[{}],n=null,i=!1,r=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const a=[];let l=null;if(s instanceof Blob&&s.type?l=s.type:s.headers&&s.headers.get("content-type")&&(l=s.headers.get("content-type")),e.forEach((p,v)=>{a[v]={description:p.description||"Files",accept:{}},p.mimeTypes?(v===0&&l&&p.mimeTypes.push(l),p.mimeTypes.map(T=>{a[v].accept[T]=p.extensions||[]})):l?a[v].accept[l]=p.extensions||[]:a[v].accept["*/*"]=p.extensions||[]}),n)try{await n.getFile()}catch(p){if(n=null,i)throw p}const h=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:a,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&r&&r(h);const f=await h.createWritable();return"stream"in s?(await s.stream().pipeTo(f),h):"body"in s?(await s.body.pipeTo(f),h):(await f.write(await s),await f.close(),h)},yue={__proto__:null,default:bue},Tue=async(s=[{}])=>(Array.isArray(s)||(s=[s]),new Promise((e,n)=>{const i=document.createElement("input");i.type="file";const r=[...s.map(a=>a.mimeTypes||[]),...s.map(a=>a.extensions||[])].join();i.multiple=s[0].multiple||!1,i.accept=r||"",i.style.display="none",document.body.append(i),i.addEventListener("cancel",()=>{i.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),i.addEventListener("change",()=>{i.remove(),e(i.multiple?Array.from(i.files):i.files[0])}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),Eue={__proto__:null,default:Tue},Sue=async(s=[{}])=>(Array.isArray(s)||(s=[s]),s[0].recursive=s[0].recursive||!1,new Promise((e,n)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0,i.style.display="none",document.body.append(i),i.addEventListener("cancel",()=>{i.remove(),n(new DOMException("The user aborted a request.","AbortError"))}),i.addEventListener("change",()=>{i.remove();let r=Array.from(i.files);s[0].recursive?s[0].recursive&&s[0].skipDirectory&&(r=r.filter(a=>a.webkitRelativePath.split("/").every(l=>!s[0].skipDirectory({name:l,kind:"directory"})))):r=r.filter(a=>a.webkitRelativePath.split("/").length===2),e(r)}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),Aue={__proto__:null,default:Sue},$ue=async(s,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let i=s;"body"in s&&(i=await async function(l,h){const f=l.getReader(),p=new ReadableStream({start:y=>async function S(){return f.read().then(({done:$,value:M})=>{if(!$)return y.enqueue(M),S();y.close()})}()}),v=new Response(p),T=await v.blob();return f.releaseLock(),new Blob([T],{type:h})}(s.body,s.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await i);const r=()=>{typeof a=="function"&&a()},a=e.legacySetup&&e.legacySetup(r,()=>a(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null},xue={__proto__:null,default:$ue};function F0(s){return()=>{try{s()}catch(e){alert("Error"+e)}}}function Cue(s){const[e,n]=Q.useState(!1),[i,r]=Q.useState("Untitled.kworld");function a(){s.world.reset(),s.karol.reset()}function l(){const S=s.karol.position;s.world.getMarker(S)?s.world.deleteMarker(S):s.world.setMarker(S,Zv.yellow)}function h(){n(!0)}function f(S){s.world.init(S.x,S.y,S.z),s.karol.reset(),n(!1)}function p(){const S=s.karol.nextPosition;S.y=0,s.world.getFieldByCoord(S)===Bi.empty&&s.world.setFieldByCoord(S,Bi.wall)}function v(){const S=s.karol.nextPosition;S.y=0,s.world.isValid(S)&&s.world.getFieldByCoord(S)===Bi.wall&&s.world.setFieldByCoord(S,Bi.empty)}async function T(){const S=await Z4({mimeTypes:["application/karol-world"],extensions:[".kworld"],description:"Karol World"});r(S.name);const $=await S.text(),M=JSON.parse($);s.world.deserialize(M.world),s.karol.deserialize(M.karol)}async function y(){const S=s.world.serialize(),$=s.karol.serialize(),C=JSON.stringify({world:S,karol:$}),E=new Blob([C],{type:"application/karol-world"}),w=await Q4(E,{fileName:i,extensions:[".kworld"]});w!==null&&r(w.name)}return he.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[he.jsx(Jle,{onClose:f,dimensions:s.world.dimensions,open:e,onCancel:()=>n(!1)}),he.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[he.jsx(no,{title:"Welt laden",children:he.jsx(to,{onClick:T,children:he.jsx(J4,{})})}),he.jsx(no,{title:"Welt speichern",children:he.jsx(to,{onClick:y,children:he.jsx(K4,{})})}),he.jsx(no,{title:"Links drehen",children:he.jsx(to,{onClick:F0(()=>s.karol.turnLeft()),children:he.jsx(cue,{})})}),he.jsx(no,{title:"Vorwärts",children:he.jsx(to,{onClick:F0(()=>s.karol.move()),children:he.jsx(Zle,{})})}),he.jsx(no,{title:"Rechts drehen",children:he.jsx(to,{onClick:F0(()=>s.karol.turnRight()),children:he.jsx(hue,{})})}),he.jsx(no,{title:"Hinlegen",children:he.jsx(to,{onClick:F0(()=>s.karol.layBrick()),children:"H"})}),he.jsx(no,{title:"Aufnehmen",children:he.jsx(to,{onClick:F0(()=>s.karol.pickupBrick()),children:"A"})}),he.jsx(no,{title:"Marker setzen/entfernen",children:he.jsx(to,{onClick:F0(Si(l)),children:he.jsx(Qle,{})})}),he.jsx(no,{title:"Quader setzen",children:he.jsx(to,{onClick:F0(Si(p)),children:he.jsx(aue,{})})}),he.jsx(no,{title:"Quader entfernen",children:he.jsx(to,{onClick:F0(Si(v)),children:he.jsx(rue,{})})}),he.jsx(no,{title:"Einstellungen Welt",children:he.jsx(to,{onClick:h,children:he.jsx(q4,{})})}),he.jsx(no,{title:"Welt zurücksetzen",children:he.jsx(to,{onClick:F0(a),children:he.jsx(lue,{})})})]})]})}var Dw={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var q3;function Mue(){return q3||(q3=1,function(s){(function(){var e={}.hasOwnProperty;function n(){for(var i=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var l=typeof a;if(l==="string"||l==="number")i.push(a);else if(Array.isArray(a)){if(a.length){var h=n.apply(null,a);h&&i.push(h)}}else if(l==="object")if(a.toString===Object.prototype.toString)for(var f in a)e.call(a,f)&&a[f]&&i.push(f);else i.push(a.toString())}}return i.join(" ")}s.exports?(n.default=n,s.exports=n):window.classNames=n})()}(Dw)),Dw.exports}var Rue=Mue();const xh=Mp(Rue);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Bw,J3;function wue(){if(J3)return Bw;J3=1;var s=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function i(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function r(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var l={},h=0;h<10;h++)l["_"+String.fromCharCode(h)]=h;var f=Object.getOwnPropertyNames(l).map(function(v){return l[v]});if(f.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(v){p[v]=v}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Bw=r()?Object.assign:function(a,l){for(var h,f=i(a),p,v=1;v<arguments.length;v++){h=Object(arguments[v]);for(var T in h)e.call(h,T)&&(f[T]=h[T]);if(s){p=s(h);for(var y=0;y<p.length;y++)n.call(h,p[y])&&(f[p[y]]=h[p[y]])}}return f},Bw}var Iue=wue();const kh=Mp(Iue);function Bc(s){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return typeof s=="function"&&s.apply(void 0,n)}function $y(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Oue(){return Math.random().toString(36).substring(7)}var Rl={menu:"react-contextmenu",menuVisible:"react-contextmenu--visible",menuWrapper:"react-contextmenu-wrapper",menuItem:"react-contextmenu-item",menuItemActive:"react-contextmenu-item--active",menuItemDisabled:"react-contextmenu-item--disabled",menuItemDivider:"react-contextmenu-item--divider",menuItemSelected:"react-contextmenu-item--selected",subMenu:"react-contextmenu-submenu"},eb={},Nue=!!(typeof window<"u"&&window.document&&window.document.createElement),UO="REACT_CONTEXTMENU_SHOW",FO="REACT_CONTEXTMENU_HIDE";function tV(s,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window,i=void 0;typeof window.CustomEvent=="function"?i=new window.CustomEvent(s,{detail:e}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(s,!1,!0,e)),n&&(n.dispatchEvent(i),kh(eb,e))}function Z3(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments[1];tV(UO,kh({},s,{type:UO}),e)}function By(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments[1];tV(FO,kh({},s,{type:FO}),e)}function Lue(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}var Due=function s(){var e=this;Lue(this,s),this.handleShowEvent=function(n){for(var i in e.callbacks)$y(e.callbacks,i)&&e.callbacks[i].show(n)},this.handleHideEvent=function(n){for(var i in e.callbacks)$y(e.callbacks,i)&&e.callbacks[i].hide(n)},this.register=function(n,i){var r=Oue();return e.callbacks[r]={show:n,hide:i},r},this.unregister=function(n){n&&e.callbacks[n]&&delete e.callbacks[n]},this.callbacks={},Nue&&(window.addEventListener(UO,this.handleShowEvent),window.addEventListener(FO,this.handleHideEvent))};const BC=new Due;var Bue=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},kue=function(){function s(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&s(e.prototype,n),i&&s(e,i),e}}();function kw(s,e,n){return e in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function Pue(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Q3(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:s}function Uue(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}var aT=function(s){Uue(e,s);function e(){var n,i,r,a;Pue(this,e);for(var l=arguments.length,h=Array(l),f=0;f<l;f++)h[f]=arguments[f];return a=(i=(r=Q3(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(h))),r),r.handleClick=function(p){p.button!==0&&p.button!==1&&p.preventDefault(),!(r.props.disabled||r.props.divider)&&(Bc(r.props.onClick,p,kh({},r.props.data,eb.data),eb.target),!r.props.preventClose&&By())},i),Q3(r,a)}return kue(e,[{key:"render",value:function(){var i,r=this,a=this.props,l=a.attributes,h=a.children,f=a.className,p=a.disabled,v=a.divider,T=a.selected,y=xh(f,Rl.menuItem,l.className,(i={},kw(i,xh(Rl.menuItemDisabled,l.disabledClassName),p),kw(i,xh(Rl.menuItemDivider,l.dividerClassName),v),kw(i,xh(Rl.menuItemSelected,l.selectedClassName),T),i));return Un.createElement("div",Bue({},l,{className:y,role:"menuitem",tabIndex:"-1","aria-disabled":p?"true":"false","aria-orientation":v?"horizontal":null,ref:function($){r.ref=$},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,onTouchEnd:this.handleClick,onClick:this.handleClick}),v?null:h)}}]),e}(Q.Component);aT.propTypes={attributes:An.object,children:An.node,className:An.string,data:An.object,disabled:An.bool,divider:An.bool,onClick:An.func,onMouseLeave:An.func,onMouseMove:An.func,preventClose:An.bool,selected:An.bool};aT.defaultProps={attributes:{},children:null,className:"",data:{},disabled:!1,divider:!1,onClick:function(){return null},onMouseMove:function(){return null},onMouseLeave:function(){return null},preventClose:!1,selected:!1};function Fue(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Hue(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:s}function Gue(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}var VN=function(s){Gue(e,s);function e(n){Fue(this,e);var i=Hue(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return zue.call(i),i.seletedItemRef=null,i.state={selectedItem:null,forceSubMenuOpen:!1},i}return e}(Q.Component);VN.propTypes={children:An.node.isRequired};var zue=function(){var e=this;this.handleKeyNavigation=function(n){if(e.state.isVisible!==!1)switch(n.keyCode){case 37:case 27:n.preventDefault(),e.hideMenu(n);break;case 38:n.preventDefault(),e.selectChildren(!0);break;case 40:n.preventDefault(),e.selectChildren(!1);break;case 39:e.tryToOpenSubMenu(n);break;case 13:n.preventDefault(),e.tryToOpenSubMenu(n);{var i=e.seletedItemRef&&e.seletedItemRef.props&&e.seletedItemRef.props.disabled;e.seletedItemRef&&e.seletedItemRef.ref instanceof HTMLElement&&!i?e.seletedItemRef.ref.click():e.hideMenu(n)}break}},this.handleForceClose=function(){e.setState({forceSubMenuOpen:!1})},this.tryToOpenSubMenu=function(n){e.state.selectedItem&&e.state.selectedItem.type===e.getSubMenuType()&&(n.preventDefault(),e.setState({forceSubMenuOpen:!0}))},this.selectChildren=function(n){var i=e.state.selectedItem,r=[],a=0,l={},h=function T(y,S){y&&([aT,e.getSubMenuType()].indexOf(y.type)<0?Un.Children.forEach(y.props.children,T):y.props.divider||(y.props.disabled&&(++a,l[S]=!0),r.push(y)))};if(Un.Children.forEach(e.props.children,h),a===r.length)return;function f(T){var y=T,S=function(){n?--y:++y,y<0?y=r.length-1:y>=r.length&&(y=0)};do S();while(y!==T&&l[y]);return y===T?null:y}var p=r.indexOf(i),v=f(p);v!==null&&e.setState({selectedItem:r[v],forceSubMenuOpen:!1})},this.onChildMouseMove=function(n){e.state.selectedItem!==n&&e.setState({selectedItem:n,forceSubMenuOpen:!1})},this.onChildMouseLeave=function(){e.setState({selectedItem:null,forceSubMenuOpen:!1})},this.renderChildren=function(n){return Un.Children.map(n,function(i){var r={};return Un.isValidElement(i)?[aT,e.getSubMenuType()].indexOf(i.type)<0?(r.children=e.renderChildren(i.props.children),Un.cloneElement(i,r)):(r.onMouseLeave=e.onChildMouseLeave.bind(e),i.type===e.getSubMenuType()&&(r.forceOpen=e.state.forceSubMenuOpen&&e.state.selectedItem===i,r.forceClose=e.handleForceClose,r.parentKeyNavigationHandler=e.handleKeyNavigation),!i.props.divider&&e.state.selectedItem===i?(r.selected=!0,r.ref=function(a){e.seletedItemRef=a},Un.cloneElement(i,r)):(r.onMouseMove=function(){return e.onChildMouseMove(i)},Un.cloneElement(i,r))):i})}},Pw=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Vue=function(){function s(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&s(e.prototype,n),i&&s(e,i),e}}();function Uw(s,e,n){return e in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function Wue(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Xue(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:s}function jue(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}var ky=function(s){jue(e,s);function e(n){Wue(this,e);var i=Xue(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.getMenuPosition=function(){var r=window,a=r.innerWidth,l=r.innerHeight,h=i.subMenu.getBoundingClientRect(),f={};return h.bottom>l?f.bottom=0:f.top=0,h.right<a?f.left="100%":f.right="100%",f},i.getRTLMenuPosition=function(){var r=window,a=r.innerHeight,l=i.subMenu.getBoundingClientRect(),h={};return l.bottom>a?h.bottom=0:h.top=0,l.left<0?h.left="100%":h.right="100%",h},i.hideSubMenu=function(r){r.detail&&r.detail.id&&i.menu&&r.detail.id!==i.menu.id||(i.props.forceOpen&&i.props.forceClose(),i.setState({visible:!1,selectedItem:null}),i.unregisterHandlers())},i.handleClick=function(r){r.preventDefault(),!i.props.disabled&&(Bc(i.props.onClick,r,kh({},i.props.data,eb.data),eb.target),!(!i.props.onClick||i.props.preventCloseOnClick)&&By())},i.handleMouseEnter=function(){i.closetimer&&clearTimeout(i.closetimer),!(i.props.disabled||i.state.visible)&&(i.opentimer=setTimeout(function(){return i.setState({visible:!0,selectedItem:null})},i.props.hoverDelay))},i.handleMouseLeave=function(){i.opentimer&&clearTimeout(i.opentimer),i.state.visible&&(i.closetimer=setTimeout(function(){return i.setState({visible:!1,selectedItem:null})},i.props.hoverDelay))},i.menuRef=function(r){i.menu=r},i.subMenuRef=function(r){i.subMenu=r},i.registerHandlers=function(){document.removeEventListener("keydown",i.props.parentKeyNavigationHandler),document.addEventListener("keydown",i.handleKeyNavigation)},i.unregisterHandlers=function(r){document.removeEventListener("keydown",i.handleKeyNavigation),r||document.addEventListener("keydown",i.props.parentKeyNavigationHandler)},i.state=kh({},i.state,{visible:!1}),i}return Vue(e,[{key:"componentDidMount",value:function(){this.listenId=BC.register(function(){},this.hideSubMenu)}},{key:"getSubMenuType",value:function(){return e}},{key:"shouldComponentUpdate",value:function(i,r){return this.isVisibilityChange=(this.state.visible!==r.visible||this.props.forceOpen!==i.forceOpen)&&!(this.state.visible&&i.forceOpen)&&!(this.props.forceOpen&&r.visible),!0}},{key:"componentDidUpdate",value:function(){var i=this;if(this.isVisibilityChange)if(this.props.forceOpen||this.state.visible){var r=window.requestAnimationFrame||setTimeout;r(function(){var l=i.props.rtl?i.getRTLMenuPosition():i.getMenuPosition();i.subMenu.style.removeProperty("top"),i.subMenu.style.removeProperty("bottom"),i.subMenu.style.removeProperty("left"),i.subMenu.style.removeProperty("right"),$y(l,"top")&&(i.subMenu.style.top=l.top),$y(l,"left")&&(i.subMenu.style.left=l.left),$y(l,"bottom")&&(i.subMenu.style.bottom=l.bottom),$y(l,"right")&&(i.subMenu.style.right=l.right),i.subMenu.classList.add(Rl.menuVisible),i.registerHandlers(),i.setState({selectedItem:null})})}else{var a=function l(){i.subMenu.removeEventListener("transitionend",l),i.subMenu.style.removeProperty("bottom"),i.subMenu.style.removeProperty("right"),i.subMenu.style.top=0,i.subMenu.style.left="100%",i.unregisterHandlers()};this.subMenu.addEventListener("transitionend",a),this.subMenu.classList.remove(Rl.menuVisible)}}},{key:"componentWillUnmount",value:function(){this.listenId&&BC.unregister(this.listenId),this.opentimer&&clearTimeout(this.opentimer),this.closetimer&&clearTimeout(this.closetimer),this.unregisterHandlers(!0)}},{key:"render",value:function(){var i,r=this.props,a=r.children,l=r.attributes,h=r.disabled,f=r.title,p=r.selected,v=this.state.visible,T={ref:this.menuRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:xh(Rl.menuItem,Rl.subMenu,l.listClassName),style:{position:"relative"}},y={className:xh(Rl.menuItem,l.className,(i={},Uw(i,xh(Rl.menuItemDisabled,l.disabledClassName),h),Uw(i,xh(Rl.menuItemActive,l.visibleClassName),v),Uw(i,xh(Rl.menuItemSelected,l.selectedClassName),p),i)),onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut,onClick:this.handleClick},S={ref:this.subMenuRef,style:{position:"absolute",transition:"opacity 1ms",top:0,left:"100%"},className:xh(Rl.menu,this.props.className)};return Un.createElement("nav",Pw({},T,{role:"menuitem",tabIndex:"-1","aria-haspopup":"true"}),Un.createElement("div",Pw({},l,y),f),Un.createElement("nav",Pw({},S,{role:"menu",tabIndex:"-1"}),this.renderChildren(a)))}}]),e}(VN);ky.propTypes={children:An.node.isRequired,attributes:An.object,title:An.node.isRequired,className:An.string,disabled:An.bool,hoverDelay:An.number,rtl:An.bool,selected:An.bool,onMouseMove:An.func,onMouseOut:An.func,forceOpen:An.bool,forceClose:An.func,parentKeyNavigationHandler:An.func};ky.defaultProps={disabled:!1,hoverDelay:500,attributes:{},className:"",rtl:!1,selected:!1,onMouseMove:function(){return null},onMouseOut:function(){return null},forceOpen:!1,forceClose:function(){return null},parentKeyNavigationHandler:function(){return null}};var Yue=function(){function s(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&s(e.prototype,n),i&&s(e,i),e}}();function Kue(s,e,n){return e in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function que(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function Jue(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:s}function Zue(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}var WN=function(s){Zue(e,s);function e(n){que(this,e);var i=Jue(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.registerHandlers=function(){document.addEventListener("mousedown",i.handleOutsideClick),document.addEventListener("touchstart",i.handleOutsideClick),i.props.preventHideOnScroll||document.addEventListener("scroll",i.handleHide),i.props.preventHideOnContextMenu||document.addEventListener("contextmenu",i.handleHide),document.addEventListener("keydown",i.handleKeyNavigation),i.props.preventHideOnResize||window.addEventListener("resize",i.handleHide)},i.unregisterHandlers=function(){document.removeEventListener("mousedown",i.handleOutsideClick),document.removeEventListener("touchstart",i.handleOutsideClick),document.removeEventListener("scroll",i.handleHide),document.removeEventListener("contextmenu",i.handleHide),document.removeEventListener("keydown",i.handleKeyNavigation),window.removeEventListener("resize",i.handleHide)},i.handleShow=function(r){if(!(r.detail.id!==i.props.id||i.state.isVisible)){var a=r.detail.position,l=a.x,h=a.y;i.setState({isVisible:!0,x:l,y:h}),i.registerHandlers(),Bc(i.props.onShow,r)}},i.handleHide=function(r){i.state.isVisible&&(!r.detail||!r.detail.id||r.detail.id===i.props.id)&&(i.unregisterHandlers(),i.setState({isVisible:!1,selectedItem:null,forceSubMenuOpen:!1}),Bc(i.props.onHide,r))},i.handleOutsideClick=function(r){i.menu.contains(r.target)||By()},i.handleMouseLeave=function(r){r.preventDefault(),Bc(i.props.onMouseLeave,r,kh({},i.props.data,eb.data),eb.target),i.props.hideOnLeave&&By()},i.handleContextMenu=function(r){r.preventDefault(),i.handleHide(r)},i.hideMenu=function(r){(r.keyCode===27||r.keyCode===13)&&By()},i.getMenuPosition=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l={top:a,left:r};if(!i.menu)return l;var h=window,f=h.innerWidth,p=h.innerHeight,v=i.menu.getBoundingClientRect();return a+v.height>p&&(l.top-=v.height),r+v.width>f&&(l.left-=v.width),l.top<0&&(l.top=v.height<p?(p-v.height)/2:0),l.left<0&&(l.left=v.width<f?(f-v.width)/2:0),l},i.getRTLMenuPosition=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l={top:a,left:r};if(!i.menu)return l;var h=window,f=h.innerWidth,p=h.innerHeight,v=i.menu.getBoundingClientRect();return l.left=r-v.width,a+v.height>p&&(l.top-=v.height),l.left<0&&(l.left+=v.width),l.top<0&&(l.top=v.height<p?(p-v.height)/2:0),l.left+v.width>f&&(l.left=v.width<f?(f-v.width)/2:0),l},i.menuRef=function(r){i.menu=r},i.state=kh({},i.state,{x:0,y:0,isVisible:!1}),i}return Yue(e,[{key:"getSubMenuType",value:function(){return ky}},{key:"componentDidMount",value:function(){this.listenId=BC.register(this.handleShow,this.handleHide)}},{key:"componentDidUpdate",value:function(){var i=this,r=window.requestAnimationFrame||setTimeout;this.state.isVisible?r(function(){var a=i.state,l=a.x,h=a.y,f=i.props.rtl?i.getRTLMenuPosition(l,h):i.getMenuPosition(l,h),p=f.top,v=f.left;r(function(){i.menu&&(i.menu.style.top=p+"px",i.menu.style.left=v+"px",i.menu.style.opacity=1,i.menu.style.pointerEvents="auto")})}):r(function(){i.menu&&(i.menu.style.opacity=0,i.menu.style.pointerEvents="none")})}},{key:"componentWillUnmount",value:function(){this.listenId&&BC.unregister(this.listenId),this.unregisterHandlers()}},{key:"render",value:function(){var i=this.props,r=i.children,a=i.className,l=i.style,h=this.state.isVisible,f=kh({},l,{position:"fixed",opacity:0,pointerEvents:"none"}),p=xh(Rl.menu,a,Kue({},Rl.menuVisible,h));return Un.createElement("nav",{role:"menu",tabIndex:"-1",ref:this.menuRef,style:f,className:p,onContextMenu:this.handleContextMenu,onMouseLeave:this.handleMouseLeave},this.renderChildren(r))}}]),e}(VN);WN.propTypes={id:An.string.isRequired,children:An.node.isRequired,data:An.object,className:An.string,hideOnLeave:An.bool,rtl:An.bool,onHide:An.func,onMouseLeave:An.func,onShow:An.func,preventHideOnContextMenu:An.bool,preventHideOnResize:An.bool,preventHideOnScroll:An.bool,style:An.object};WN.defaultProps={className:"",data:{},hideOnLeave:!1,rtl:!1,onHide:function(){return null},onMouseLeave:function(){return null},onShow:function(){return null},preventHideOnContextMenu:!1,preventHideOnResize:!1,preventHideOnScroll:!1,style:{}};var Que=function(){function s(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&s(e.prototype,n),i&&s(e,i),e}}();function ece(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function eU(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:s}function tce(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}var e1=function(s){tce(e,s);function e(){var n,i,r,a;ece(this,e);for(var l=arguments.length,h=Array(l),f=0;f<l;f++)h[f]=arguments[f];return a=(i=(r=eU(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(h))),r),r.touchHandled=!1,r.handleMouseDown=function(p){r.props.holdToDisplay>=0&&p.button===0&&(p.persist(),p.stopPropagation(),r.mouseDownTimeoutId=setTimeout(function(){return r.handleContextClick(p)},r.props.holdToDisplay)),Bc(r.props.attributes.onMouseDown,p)},r.handleMouseUp=function(p){p.button===0&&clearTimeout(r.mouseDownTimeoutId),Bc(r.props.attributes.onMouseUp,p)},r.handleMouseOut=function(p){p.button===0&&clearTimeout(r.mouseDownTimeoutId),Bc(r.props.attributes.onMouseOut,p)},r.handleTouchstart=function(p){r.touchHandled=!1,r.props.holdToDisplay>=0&&(p.persist(),p.stopPropagation(),r.touchstartTimeoutId=setTimeout(function(){r.handleContextClick(p),r.touchHandled=!0},r.props.holdToDisplay)),Bc(r.props.attributes.onTouchStart,p)},r.handleTouchEnd=function(p){r.touchHandled&&p.preventDefault(),clearTimeout(r.touchstartTimeoutId),Bc(r.props.attributes.onTouchEnd,p)},r.handleContextMenu=function(p){p.button===r.props.mouseButton&&r.handleContextClick(p),Bc(r.props.attributes.onContextMenu,p)},r.handleMouseClick=function(p){p.button===r.props.mouseButton&&r.handleContextClick(p),Bc(r.props.attributes.onClick,p)},r.handleContextClick=function(p){if(!r.props.disable&&!(r.props.disableIfShiftIsPressed&&p.shiftKey)){p.preventDefault(),p.stopPropagation();var v=p.clientX||p.touches&&p.touches[0].pageX,T=p.clientY||p.touches&&p.touches[0].pageY;r.props.posX&&(v-=r.props.posX),r.props.posY&&(T-=r.props.posY),By();var y=Bc(r.props.collect,r.props),S={position:{x:v,y:T},target:r.elem,id:r.props.id};y&&typeof y.then=="function"?y.then(function($){S.data=kh({},$,{target:p.target}),Z3(S)}):(S.data=kh({},y,{target:p.target}),Z3(S))}},r.elemRef=function(p){r.elem=p},i),eU(r,a)}return Que(e,[{key:"render",value:function(){var i=this.props,r=i.renderTag,a=i.attributes,l=i.children,h=kh({},a,{className:xh(Rl.menuWrapper,a.className),onContextMenu:this.handleContextMenu,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchstart,onTouchEnd:this.handleTouchEnd,onMouseOut:this.handleMouseOut,ref:this.elemRef});return Un.createElement(r,h,l)}}]),e}(Q.Component);e1.propTypes={id:An.string.isRequired,children:An.node.isRequired,attributes:An.object,collect:An.func,disable:An.bool,holdToDisplay:An.number,posX:An.number,posY:An.number,renderTag:An.elementType,mouseButton:An.number,disableIfShiftIsPressed:An.bool};e1.defaultProps={attributes:{},collect:function(){return null},disable:!1,holdToDisplay:1e3,renderTag:"div",posX:0,posY:0,mouseButton:2,disableIfShiftIsPressed:!1};function nce(s){if(Array.isArray(s)){for(var e=0,n=Array(s.length);e<s.length;e++)n[e]=s[e];return n}else return Array.from(s)}[].concat(nce(Object.keys(e1.propTypes)),["children"]);const ice=["Schritt","LinksDrehen","RechtsDrehen",void 0,"Hinlegen","Aufheben",void 0,"MarkeSetzen","MarkeLöschen",void 0,"Ton"],sce=["IstWand","NichtIstWand",void 0,"IstZiegel","NichtIstZiegel",void 0,"IstMarke","NichtIstMarke",void 0,"IstNorden","IstOsten","IstSüden","IstWesten"],rce=["wiederhole n mal ANW endewiederhole","wiederhole solange BED endewiederhole","wiederhole ANW endewiederhole bis BED","wiederhole ANW endewiederhole solange BED",void 0,"wenn BED dann ANW endewenn","wenn BED dann ANW sonst ANW endewenn"];function Fw(s,e,n){if(s===""||s==="Infinity")return[n,void 0];let i=parseInt(s),r;return i<=0&&(r=e+" ist keine Zahl > 0."),[r?n:i,r]}function oce(s){function e(){let v="";const[T,y]=Fw(n,"Maximale Sprunghöhe",1);y&&(v+=y);const[S,$]=Fw(r,"Maximale Anzahl Steine",1/0);$&&(v+=`
`+$);const[M,C]=Fw(l,"Anzahl Steine bei Start",1/0);C&&(v+=`
`+C),y||$||C?alert(v):s.onClose({jumpHeight:T,initialBrickCount:M,maxBrickCount:S,figureIndex:Number.parseInt(f)})}const[n,i]=Q.useState(""+s.karol.jumpHeight),[r,a]=Q.useState(""+s.karol.maxBrickCount),[l,h]=Q.useState(""+s.karol.initialBrickCount),[f,p]=Q.useState(""+s.karol.figureIndex);return he.jsxs(P4,{open:s.open,children:[he.jsx(H4,{children:"Einstellungen für Karol"}),he.jsxs(F4,{children:[he.jsx(OE,{fullWidth:!0,sx:{m:1,minWidth:120},children:he.jsx(Nw,{id:"jumpHeight",type:"number",label:"Maximale Sprunghöhe",variant:"outlined",value:n,onChange:v=>i(v.target.value)})}),he.jsx(OE,{fullWidth:!0,sx:{m:1,minWidth:120},children:he.jsx(Nw,{id:"maxBricks",type:"number",label:"Maximale Anzahl Steine",variant:"outlined",value:r,onChange:v=>a(v.target.value??1/0)})}),he.jsx(OE,{fullWidth:!0,sx:{m:1,minWidth:120},children:he.jsx(Nw,{id:"initialBricks",type:"number",label:"Anzahl Steine bei Start",variant:"outlined",value:l,onChange:v=>h(v.target.value??1/0)})}),he.jsx("div",{children:he.jsxs(OE,{fullWidth:!0,sx:{m:1,minWidth:120},children:[he.jsx(G4,{id:"karolFigureLabel",children:"Karol Figure"}),he.jsxs(GN,{id:"karolFigure",labelId:"karolFigureLabel",value:f,label:"Karol Figur",onChange:v=>p(v.target.value),children:[he.jsx(EE,{value:0,children:"Roboter"}),he.jsx(EE,{value:1,children:"Dracula"}),he.jsx(EE,{value:2,children:"Weltraumwesen"}),he.jsx(EE,{value:3,children:"Saxophonist"}),he.jsx(EE,{value:4,children:"Crash Test Dummy"})]})]})})]}),he.jsxs(U4,{children:[he.jsx(NC,{onClick:e,children:"Ok"}),he.jsx(NC,{onClick:s.onCancel,children:"Abbruch"})]})]})}const ace=JSON.parse(`[{"type":"step","message0":"Schritt %1","args0":[{"type":"field_number","name":"COUNT","value":1,"min":0}],"colour":260,"tooltip":"Gehe Anzahl Schritte geradeaus","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"turnleft","message0":"LinksDrehen","colour":260,"tooltip":"Drehe dich 90 Grad nach links","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"turnright","message0":"RechtsDrehen","colour":260,"tooltip":"Drehe dich 90 Grad nach rechts","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"laydown","message0":"Hinlegen %1","args0":[{"type":"field_number","name":"COUNT","value":1,"min":0}],"colour":260,"tooltip":"Lege Anzahl Ziegel vor dich hin","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"laydown_color","lastDummyAlign0":"RIGHT","message0":"Hinlegen %1","args0":[{"type":"field_dropdown","name":"COLOR","options":[["rot","rot"],["gelb","gelb"],["blau","blau"],["grün","grün"],["schwarz","schwarz"]]}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":260,"tooltip":"Lege einen farbigen Ziegel vor dich hin","helpUrl":""},{"type":"pickup","message0":"Aufheben %1","args0":[{"type":"field_number","name":"COUNT","value":1,"min":0}],"colour":260,"tooltip":"Hebe Anzahl Ziegel vor dir auf","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"setmarker_color","lastDummyAlign0":"RIGHT","message0":"MarkeSetzen %1","args0":[{"type":"field_dropdown","name":"COLOR","default":"yellow","options":[["rot","rot"],["gelb","gelb"],["blau","blau"],["grün","grün"],["schwarz","schwarz"]]}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":260,"tooltip":"Setze eine farbige Marke unter dir","helpUrl":""},{"type":"deletemarker","message0":"MarkeLöschen","colour":260,"tooltip":"Lösche die Marke unter dir","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"wait","message0":"Warten %1","args0":[{"type":"field_number","name":"COUNT","value":1000,"min":0}],"colour":260,"tooltip":"Warte Anzahl Millisekunden","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"beep","message0":"Ton","colour":260,"tooltip":"Mach einen Ton","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"stop","message0":"Beenden","colour":260,"tooltip":"Beende das Programm","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"repeat_times","message0":"wiederhole %1 mal %2 %3","args0":[{"type":"field_number","name":"COUNT","value":10,"min":0},{"type":"input_dummy"},{"type":"input_statement","name":"STATEMENTS"}],"colour":120,"tooltip":"wiederhole n mal Anweisung","helpUrl":"","previousStatement":null,"nextStatement":null},{"type":"while_do","message0":"wiederhole solange %1 %2","args0":[{"type":"input_value","name":"CONDITION"},{"type":"input_statement","name":"STATEMENTS"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":120,"tooltip":"wiederhole die Anweisungen solange die Bedingung wahr ist","helpUrl":""},{"type":"repeat_until","message0":"wiederhole %1 %2 bis %3","args0":[{"type":"input_dummy"},{"type":"input_statement","name":"STATEMENTS"},{"type":"input_value","name":"CONDITION"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":120,"tooltip":"wiederhole Anweisung bis Bedingung erfüllt","helpUrl":""},{"type":"repeat_while","message0":"wiederhole %1 %2 solange %3","args0":[{"type":"input_dummy"},{"type":"input_statement","name":"STATEMENTS"},{"type":"input_value","name":"CONDITION"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":120,"tooltip":"wiederhole Anweisung solange Bedingung erfüllt","helpUrl":""},{"type":"repeat_forever","message0":"wiederhole immer %1 %2","args0":[{"type":"input_dummy"},{"type":"input_statement","name":"STATEMENTS"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":120,"tooltip":"wiederhole bis programmabruch","helpUrl":""},{"type":"if_then","message0":"wenn %1 dann %2 %3","args0":[{"type":"input_value","name":"CONDITION"},{"type":"input_statement","name":"STATEMENTS"},{"type":"input_dummy"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":120,"tooltip":"Wenn Bedingung wahr dann führe Anweisung aus","helpUrl":""},{"type":"if_then_else","message0":"wenn %1 dann %2 sonst %3","args0":[{"type":"input_value","name":"CONDITION"},{"type":"input_statement","name":"STATEMENTS"},{"type":"input_statement","name":"STATEMENTS_2"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":120,"tooltip":"Wenn Bedingung wahr dann führe Anweisung aus sonst führe andere Anweisung aus","helpUrl":""},{"type":"is_wall","message0":"IstWand","output":"Boolean","colour":210,"tooltip":"Wenn er vor der Wand oder vor einem Quader steht und in diese\\nRichtung schaut","helpUrl":""},{"type":"isn't_wall","message0":"NichtIstWand","output":null,"colour":210,"tooltip":"Wenn IstWand nicht zutrifft","helpUrl":""},{"type":"is_brick","message0":"IstZiegel","output":null,"colour":210,"tooltip":"Wenn er vor mindestens einem Ziegel beliebiger Farbe steht und zu diesem schaut","helpUrl":""},{"type":"is_brick_count","message0":"IstZiegel(Anzahl) %1","args0":[{"type":"field_input","name":"COUNT","text":"1"}],"output":null,"colour":210,"tooltip":"wenn er vor einem Ziegelstapel beliebiger Farbe mit n(=Anzahl) vielen Ziegeln steht und zu diesem schaut","helpUrl":""},{"type":"is_brick_color","message0":"IstZiegel(Farbe) %1","args0":[{"type":"field_dropdown","name":"COLOR","options":[["rot","rot"],["gelb","gelb"],["blau","blau"],["grün","grün"],["schwarz","schwarz"]]}],"output":null,"colour":210,"tooltip":"","helpUrl":""},{"type":"isn't_brick","message0":"NichtIstZiegel","output":null,"colour":210,"tooltip":"Wenn IstZiegel nicht zutrifft","helpUrl":""},{"type":"isn't_brick_count","message0":"NichtIstZiegel(Anzahl) %1","args0":[{"type":"field_input","name":"COUNT","text":"1"}],"output":null,"colour":210,"tooltip":"Wenn IstZiegel(Anzahl) nicht zutrifft","helpUrl":""},{"type":"isn't_brick_color","message0":"NichtIstZiegel(Farbe) %1","args0":[{"type":"field_dropdown","name":"COLOR","options":[["rot","rot"],["gelb","gelb"],["blau","blau"],["grün","grün"],["schwarz","schwarz"]]}],"output":null,"colour":210,"tooltip":"Wenn IstZiegel(Anzahl) nicht zutrifft","helpUrl":""},{"type":"is_marker","message0":"IstMarke","output":null,"colour":210,"tooltip":"Wenn Karol auf einer Marke steht","helpUrl":""},{"type":"is_marker_color","message0":"IstMarke(Farbe) %1","args0":[{"type":"field_dropdown","name":"COLOR","options":[["rot","rot"],["gelb","gelb"],["blau","blau"],["grün","grün"],["schwarz","schwarz"]]}],"output":null,"colour":210,"tooltip":"Wenn Karol auf einer Marke der angegebenen Farbe steht","helpUrl":""},{"type":"isn't_marker","message0":"NichtIstMarke","output":null,"colour":210,"tooltip":"Wenn IstMarke nicht zutrifft","helpUrl":""},{"type":"isn't_marker_color","message0":"NichtIstMarke(Farbe) %1","args0":[{"type":"field_dropdown","name":"COLOR","options":[["rot","rot"],["gelb","gelb"],["blau","blau"],["grün","grün"],["schwarz","schwarz"]]}],"output":null,"colour":210,"tooltip":"Wenn IstMarke(Farbe) nicht zutrifft","helpUrl":""},{"type":"is_south","message0":"IstSüden","output":null,"colour":210,"tooltip":"Wenn Karol nach Süden schaut","helpUrl":""},{"type":"is_north","message0":"IstNorden","output":null,"colour":210,"tooltip":"Wenn Karol nach Norden schaut","helpUrl":""},{"type":"is_west","message0":"IstWesten","output":null,"colour":210,"tooltip":"Wenn Karol nach Westen schaut","helpUrl":""},{"type":"is_east","message0":"IstOsten","output":null,"colour":210,"tooltip":"Wenn Karol nach Osten schaut","helpUrl":""},{"type":"is_full","message0":"IstVoll","output":null,"colour":210,"tooltip":"Wenn Karol seine maximale Tragfähigkeit erreicht hat","helpUrl":""},{"type":"isn't_full","message0":"NichtIstVoll","output":null,"colour":210,"tooltip":"Wenn IstVoll nicht zutrifft","helpUrl":""},{"type":"is_empty","message0":"IstLeer","output":null,"colour":210,"tooltip":"Wenn Karol keinen Ziegel mit sich trägt","helpUrl":""},{"type":"isn't_empty","message0":"NichtIstLeer","output":null,"colour":210,"tooltip":"Wenn IstLeer nicht zutrifft","helpUrl":""},{"type":"has_bricks","message0":"HatZiegel","output":null,"colour":210,"tooltip":"Wenn Karol mindestens einen Ziegel mit sich trägt","helpUrl":""},{"type":"has_bricks_count","message0":"HatZiegel(Anzahl) %1","args0":[{"type":"field_input","name":"COUNT","text":"1"}],"output":null,"colour":210,"tooltip":"Wenn Karol genau n(=Anzahl) viele Ziegel mit sich trägt","helpUrl":""}]`);var gx={exports:{}},_x={exports:{}},lce=_x.exports,tU;function XN(){return tU||(tU=1,function(s,e){(function(n,i){s.exports=i()})(lce,function(){var n={},i,r,a,l,h,f,p,v,T,y,S,$,M,C,E,w,I,O,P,F,V,X,G,D,Z,Y,j,ne,ee,z,te,ce,pe,K,fe,Ne,Pe,Ee,We,Fe,gt,ft,Ut,Ke,Ht,Re,Ye,J,Se,Ae,we,Ie,dt,Qe,vt,et,_e,se,$e,Le,Xe,Ve,yt,bt,At,Ft,H,oe,ve,re,ye,lt,Me,Ze,$t,Pt,Mt,xt,Xt,Yt,Wt,xn,jt,Zt,Nn,gn,zn,is,lr,Rs,Cn,Ks,Ri,ae,ge,Ue,ot,ht,_t,Gt,kt,le,Te,De,ke,ze,rt,Tt,Nt,Bt,qt,Kt,Jt,vn,Tn,ei,ln,Dn,fn,yi,Hn,Mn,Xn,Rn,ti,Gn,Ui,Ti,ss,ur,so,Ol,jh,ic,Ip,cf,Jg,Yc,Op,Np,sc,Ja,om,Yh,vr,rc,Za,Kc,oc,gu,Lp,hf,am,Nl,Qa,qc,mo,_u,Jc,Kh,Zg,No,qh,vu,Ll,Zc,Aa,lb,Fr,Dp,Qg,e_,t_,n_,Jh,Dl,Zh,lm,i_,um,df,s_,cm,hm,Bp,r_,dm,fm,bu,ac,pm,o_,$a,el,Qh,lc,Qc,eh,yu,Hr,ed,kp,Tu,td,Pp,ff,Up,Lo,Eu,uc,Fp,th,xa,pf,mf,Su,nh,Ss,a_,mm,gm,gf,cc,l_,Do,tl,wr,Hp,Gp,nd,id,_m,Au,_f,sd,nl,zp,Ir,hc,Vp,u_,$u,ro,vm,go,c_,Bo,xu,il,rd,Bl,br,vf,Or,mi,Ca,dc,Cu,fc,bf,sl,ih,sh,oa,od,_o,ad,qs,bm,Nr,Mu,yf,Tf,kl,ko,Ef,ld,Gr,oo,Ru,rl,Ma,ol,Wp,ud,Xp,Lr,Ds,wi,Dr,Po,Ra,pc,h_,jp,al,ll,Fi,rh,ym,mc,wu,gc,Pl,Tm,Sf,Uo,Af,Ul,Bs,aa,Yp,Em,$f,d_,Js,cd,hd,dd,xf,Jn,_c,Fo,fd,ub,Cf,wa,vc,cn,ao,Zs,ws,yr,Iu,hn,ps,Kp,Ia,Sm,Am,Ou,Mf,Vn,ul,Fl,bc,Hl,$m,Rf,pd,Gl,xm,md,gd,Oa,qp,Nu,Br,jn,Xi,Qs,Jp,Ho,zr,Hs,la,Vr,Cm,er,kr,zl,Mm,Rm,cb,Zp,Qp,wf,vo,cr,cl,hl,If,Of,dl,Vl,Nf,e0,f_,oh,t0,n0,p_,i0,wm,Im,hb,yc,Om,Lf,s0,Nm,Df,Lm,Dm,Bm,m_,km,ah,_d,r0,Bf,vd,Pm,Um,o0,a0,g_,__,Fm,Hm,l0,kf,Gm,zm,v_,u0,c0,Pf,h0,b_,Vm,y_,T_,Wm,bd,Uf,Ff,Xm,Go,yd,d0,jm,E_,Tc,Hf,Gf,Td,f0,ut;i=function(t,o,u,g){if(!(t instanceof Et)&&typeof t!="string"||`${t}`.trim()==="")throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=`${t}`.toLowerCase(),typeof o!="string"||o.trim()==="")throw Error('Invalid name "'+o+'". The name must be a non-empty string.');const R=o.toLowerCase();if(!u)throw Error("Can not register a null value");let k=Ec[t],ue=p0[t];if(k||(k=Ec[t]=Object.create(null),ue=p0[t]=Object.create(null)),r(t,u),!g&&k[R]&&k[R]!==u)throw Error('Name "'+R+'" with type "'+t+'" already registered.');k[R]=u,ue[R]=o},r=function(t,o){switch(t){case String(Et.FIELD):if(typeof o.fromJson!="function")throw Error('Type "'+t+'" must have a fromJson function')}},a=function(t,o){t=`${t}`.toLowerCase(),o=o.toLowerCase();const u=Ec[t];u&&u[o]?(delete Ec[t][o],delete p0[t][o]):console.warn("Unable to unregister ["+o+"]["+t+"] from the registry.")},l=function(t,o,u){t=`${t}`.toLowerCase(),o=o.toLowerCase();const g=Ec[t];if(!g||!g[o]){if(o="Unable to find ["+o+"]["+t+"] in the registry.",u)throw Error(o+" You must require or register a "+t+" plugin.");return console.warn(o),null}return g[o]},h=function(t,o){return t=`${t}`.toLowerCase(),o=o.toLowerCase(),(t=Ec[t])?!!t[o]:!1},f=function(t,o,u){return l(t,o,u)},p=function(t,o,u){return l(t,o,u)},v=function(t,o,u){t=`${t}`.toLowerCase();var g=Ec[t];if(!g){if(g=`Unable to find [${t}] in the registry.`,u)throw Error(`${g} You must require or register a ${t} plugin.`);return console.warn(g),null}if(!o)return g;t=p0[t],u=Object.create(null);for(const R of Object.keys(g))u[t[R]]=g[R];return u},T=function(t,o,u){return o=o.plugins[String(t)]||ri,typeof o=="function"?o:f(t,o,u)},y=function(t,o){S(),Xl=setTimeout(function(){o&&o.handleRightClick(t)},lh)},S=function(){Xl&&(clearTimeout(Xl),Xl=0)},$=function(){ks=null},M=function(t){return!t.type.startsWith("pointer")||t instanceof PointerEvent&&E(t)},C=function(t){return`${t.pointerId}`},E=function(t){const o=C(t);return ks?ks===o:t.type==="pointerdown"?(ks=o,!0):!1},w=function(t,o,u,g,R){function k(xe){(R||M(xe))&&(u?g.call(u,xe):g(xe))}const ue=[];if(o in zo)for(let xe=0;xe<zo[o].length;xe++){const St=zo[o][xe];t.addEventListener(St,k,!1),ue.push([t,St,k])}else t.addEventListener(o,k,!1),ue.push([t,o,k]);return ue},I=function(t,o,u,g){function R(ue){u?g.call(u,ue):g(ue)}const k=[];if(o in zo)for(let ue=0;ue<zo[o].length;ue++){const xe=zo[o][ue];t.addEventListener(xe,R,!1),k.push([t,xe,R])}else t.addEventListener(o,R,!1),k.push([t,o,R]);return k},O=function(t){const o=t[t.length-1][2];for(;t.length;){const[u,g,R]=t.pop();u.removeEventListener(g,R,!1)}return o},P=function(t){if(t.target instanceof HTMLElement){if(t.target.isContentEditable||t.target.getAttribute("data-is-text-input")==="true")return!0;if(t.target instanceof HTMLInputElement)return t=t.target,t.type==="text"||t.type==="number"||t.type==="email"||t.type==="password"||t.type==="search"||t.type==="tel"||t.type==="url";if(t.target instanceof HTMLTextAreaElement)return!0}return!1},F=function(t){return t.ctrlKey&&yo?!0:t.button===2},V=function(t,o,u){const g=o.createSVGPoint();return g.x=t.clientX,g.y=t.clientY,u||(u=o.getScreenCTM().inverse()),g.matrixTransform(u)},X=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*hh,y:t.deltaY*hh};case 2:return{x:t.deltaX*dh,y:t.deltaY*dh}}},G=function(){return"blockly-"+(Yl++).toString(36)},D=function(){return Sc.genUid()},Z=function(t){return t.type===tt.BLOCK_CREATE},Y=function(t){return t.type===tt.BLOCK_DELETE},j=function(t){return t.type===tt.BLOCK_CHANGE},ne=function(t){return t.type===tt.BLOCK_FIELD_INTERMEDIATE_CHANGE},ee=function(t){return t.type===tt.BLOCK_MOVE},z=function(t){return t.type===tt.CLICK},te=function(t){return t.type===tt.BUBBLE_OPEN},ce=function(t){return t.type===tt.VIEWPORT_CHANGE},n.setRecordUndo$$module$build$src$core$events$utils=function(t){Lu=t},pe=function(){return Lu},K=function(t){Wr.fireInternal(t)},fe=function(t){if(Fe()){if(!Is.length)try{requestAnimationFrame(()=>{setTimeout(Ne,0)})}catch{setTimeout(Ne,0)}Pe(t)}},Ne=function(){const t=Ee(Is);Is.length=0;for(const o of t){if(!o.workspaceId)continue;let u;(u=yt(o.workspaceId))==null||u.fireChangeListener(o)}},Pe=function(t){if(j(t)&&t.element==="mutation"){let o;for(o=Is.length;o>0;o--){const u=Is[o-1];if(u.group!==t.group||u.workspaceId!==t.workspaceId||!ee(u)||u.newParentId!==t.blockId)break}Is.splice(o,0,t)}else Is.push(t)},Ee=function(t){const o=[];for(const u of t)if(t=o[o.length-1],!u.isNull())if(t&&t.workspaceId===u.workspaceId&&t.group===u.group)if(ee(u)&&ee(t)&&u.blockId===t.blockId){if(t.newParentId=u.newParentId,t.newInputName=u.newInputName,t.newCoordinate=u.newCoordinate,t.reason||u.reason){let g,R;t.reason=Array.from(new Set(((g=t.reason)!=null?g:[]).concat((R=u.reason)!=null?R:[])))}}else j(u)&&j(t)&&u.blockId===t.blockId&&u.element===t.element&&u.name===t.name?t.newValue=u.newValue:ce(u)&&ce(t)?(t.viewTop=u.viewTop,t.viewLeft=u.viewLeft,t.scale=u.scale,t.oldScale=u.oldScale):z(u)&&te(t)||o.push(u);else o.push(u);return t=o.filter(u=>!u.isNull())},We=function(){for(let t=0,o;o=Is[t];t++)o.recordUndo=!1},n.disable$$module$build$src$core$events$utils=function(){fl++},n.enable$$module$build$src$core$events$utils=function(){fl--},Fe=function(){return fl===0},n.getGroup$$module$build$src$core$events$utils=function(){return Tr},n.setGroup$$module$build$src$core$events$utils=function(t){Wr.setGroupInternal(t)},gt=function(t){Tr=typeof t=="boolean"?t?D():"":t},ft=function(t){const o=[];t=t.getDescendants(!1);for(let u=0,g;g=t[u];u++)o[u]=g.id;return o},Ut=function(t,o){const u=Ke(t.type);if(!u)throw Error("Unknown event type.");return u.fromJson(t,o)},Ke=function(t){const o=f(Et.EVENT,t);if(!o)throw Error(`Event type ${t} not found in registry.`);return o},Ht=function(t){if((ee(t)||Z(t))&&t.workspaceId){var o=yt(t.workspaceId);if(!t.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(t=o.getBlockById(t.blockId)){const u=Lu;try{Lu=!1;const g=t.getParent();if(g&&!g.hasDisabledReason(Ac)){const R=t.getDescendants(!1);for(let k=0,ue;ue=R[k];k++)ue.setDisabledReason(!1,Ac)}else if((t.outputConnection||t.previousConnection)&&!o.isDragging())do t.setDisabledReason(!0,Ac),t=t.getNextBlock();while(t)}finally{Lu=u}}}},Re=function(t,o,u){t=document.createElementNS(hi,`${t}`);for(const g in o)t.setAttribute(g,`${o[g]}`);return u&&u.appendChild(t),t},Ye=function(t,o){return o=o.split(" "),o.every(u=>t.classList.contains(u))?!1:(t.classList.add(...o),!0)},J=function(t,o){t.classList.remove(...o.split(" "))},Se=function(t,o){return o=o.split(" "),o.every(u=>!t.classList.contains(u))?!1:(t.classList.remove(...o),!0)},Ae=function(t,o){return t.classList.contains(o)},we=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},Ie=function(t,o){const u=o.nextSibling;if(o=o.parentNode,!o)throw Error("Reference node has no parent.");u?o.insertBefore(t,u):o.appendChild(t)},dt=function(t,o){t.style.transform=o,t.style["-webkit-transform"]=o},Qe=function(){$c++,nr||(nr=Object.create(null))},vt=function(){$c--,$c||(nr=null)},et=function(t){const o=t.textContent+`
`+t.className.baseVal;var u;return nr&&(u=nr[o])||(u=window.getComputedStyle(t),u=se(t,u.fontSize,u.fontWeight,u.fontFamily),nr&&(nr[o]=u)),u},_e=function(t,o,u,g){return se(t,o+"pt",u,g)},se=function(t,o,u,g){const R=t.textContent;t=R+`
`+t.className.baseVal;var k;return nr&&(k=nr[t])||(Xo||(k=document.createElement("canvas"),k.className="blocklyComputeCanvas",document.body.appendChild(k),Xo=k.getContext("2d")),R&&Xo?(Xo.font=u+" "+o+" "+g,k=Xo.measureText(R).width):k=0,nr&&(nr[t]=k)),k},$e=function(t,o,u,g){const R=document.createElement("span");R.style.font=u+" "+o+" "+g,R.textContent=t,t=document.createElement("div"),t.style.width="1px",t.style.height="0",o=document.createElement("div"),o.style.display="flex",o.style.position="fixed",o.style.top="0",o.style.left="0",o.appendChild(R),o.appendChild(t),document.body.appendChild(o),u={height:0,baseline:0};try{o.style.alignItems="baseline",u.baseline=t.offsetTop-R.offsetTop,o.style.alignItems="flex-end",u.height=t.offsetTop-R.offsetTop}finally{document.body.removeChild(o)}return u},n.getFocusManager$$module$build$src$core$focus_manager=function(){return ni.getFocusManager()},Le=function(t){return t&&typeof t.getFocusableElement=="function"&&typeof t.getFocusableTree=="function"&&typeof t.onNodeFocus=="function"&&typeof t.onNodeBlur=="function"&&typeof t.canBeFocused=="function"},Xe=function(t){return Le(t)&&typeof t.id=="string"&&typeof t.workspace=="object"&&typeof t.select=="function"&&typeof t.unselect=="function"},Ve=function(t,o){for(const u in o)o[u]!==null&&Array.isArray(o[u])?t[u]=Ve(t[u]||[],o[u]):t[u]=o[u]!==null&&typeof o[u]=="object"?Ve(t[u]||Object.create(null),o[u]):o[u];return t},yt=function(t){return Du[t]||null},bt=function(){const t=[];for(const o in Du)t.push(Du[o]);return t},At=function(t){Du[t.id]=t},Ft=function(t){delete Du[t.id]},H=function(){return fh},oe=function(t){fh=t},ve=function(){const t=n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();return t&&Xe(t)?t:null},re=function(t){n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)},ye=function(t){const o=ve();let u,g,R,k;const ue=new(Ke(tt.SELECTED))((u=o?.id)!=null?u:null,(g=t?.id)!=null?g:null,(k=(R=t?.workspace.id)!=null?R:o?.workspace.id)!=null?k:"");K(ue)},lt=function(){return ha},Me=function(t){ha=t},Ze=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;const o=t.getParentSvg(),u=t.getCachedParentSvgSize();var g=o.parentElement;if(g instanceof HTMLElement){var R=g.offsetWidth;g=g.offsetHeight,u.width!==R&&(o.setAttribute("width",R+"px"),t.setCachedParentSvgSize(R,null)),u.height!==g&&(o.setAttribute("height",g+"px"),t.setCachedParentSvgSize(null,g)),t.resize()}},$t=function(t,o){const u=Object.create(null),g=t.getDescendants(!0);o&&(t=t.getNextBlock())&&(t=g.indexOf(t),g.splice(t,g.length-t));for(let R=0,k;k=g[R];R++)u[k.type]?u[k.type]++:u[k.type]=1;return u},Pt=function(t){return function(){this.jsonInit(t)}},Mt=function(t){Bu.defineBlocksWithJsonArrayInternal(t)},xt=function(t){n.defineBlocks$$module$build$src$core$common(n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(t))},n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(t){const o={};for(let u=0;u<t.length;u++){const g=t[u];if(!g){console.warn(`Block definition #${u} in JSON array is ${g}. Skipping`);continue}const R=g.type;R?o[R]={init:Pt(g)}:console.warn(`Block definition #${u} in JSON array is missing a type attribute. Skipping.`)}return o},n.defineBlocks$$module$build$src$core$common=function(t){for(const o of Object.keys(t)){const u=t[o];o in As&&console.warn(`Block definition "${o}" overwrites previous definition.`),As[o]=u}},Xt=function(t){let o=H();const u=n.getFocusManager$$module$build$src$core$focus_manager().getFocusedTree();for(const g of bt())if(u===g){o=g;break}!P(t)&&o&&(!o.rendered||o.isFlyout||o.isVisible())&&Ii.registry.onKeyDown(o,t)},Yt=function(t,o){return o=t.indexOf(o),o===-1?!1:(t.splice(o,1),!0)},Wt=function(t){if(ku)throw Error("CSS already injected");pl+=`
`+t},xn=function(t,o){ku||(ku=!0,t&&(t=o.replace(/[\\/]$/,""),o=pl.replace(/<<<PATH>>>/g,t),pl="",t=document.createElement("style"),t.id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild)))},jt=function(t){return Pu.getSizeInternal(t)},Zt=function(t){if(gn(t,"display")!=="none")return Nn(t);const o=t.style,u=o.display,g=o.visibility,R=o.position;o.visibility="hidden",o.position="absolute",o.display="inline";const k=t.offsetWidth;return t=t.offsetHeight,o.display=u,o.position=R,o.visibility=g,new wn(k,t)},Nn=function(t){return new wn(t.offsetWidth,t.offsetHeight)},gn=function(t,o){return t=window.getComputedStyle(t),t[o]||t.getPropertyValue(o)},zn=function(t){const o=new Ot(0,0);t=t.getBoundingClientRect();var u=document.documentElement;return u=new Ot(window.pageXOffset||u.scrollLeft,window.pageYOffset||u.scrollTop),o.x=t.left+u.x,o.y=t.top+u.y,o},is=function(){const t=document.body,o=document.documentElement;return new Ot(t.scrollLeft||o.scrollLeft,t.scrollTop||o.scrollTop)},lr=function(t){const o=parseFloat(gn(t,"borderLeftWidth")),u=parseFloat(gn(t,"borderRightWidth")),g=parseFloat(gn(t,"borderTopWidth"));return t=parseFloat(gn(t,"borderBottomWidth")),new pn(g,t,o,u)},Rs=function(t,o,u){t=Cn(t,o,u),o.scrollLeft=t.x,o.scrollTop=t.y},Cn=function(t,o,u){var g=zn(t),R=zn(o),k=lr(o);const ue=g.x-R.x-k.left;return g=g.y-R.y-k.top,R=Nn(t),t=o.clientWidth-R.width,R=o.clientHeight-R.height,k=o.scrollLeft,o=o.scrollTop,u?(k+=ue-t/2,o+=g-R/2):(k+=Math.min(ue,Math.max(ue-t,0)),o+=Math.min(g,Math.max(g-R,0))),new Ot(k,o)},Ks=function(t){const o=new Ot(0,0);var u=t.x&&t.getAttribute("x");const g=t.y&&t.getAttribute("y");return u&&(o.x=parseInt(u)),g&&(o.y=parseInt(g)),(u=(u=t.getAttribute("transform"))&&u.match(kn))&&(o.x+=Number(u[1]),u[3]&&(o.y+=Number(u[3]))),(t=t.getAttribute("style"))&&t.includes("translate")&&(t=t.match(Ai))&&(o.x+=Number(t[1]),t[3]&&(o.y+=Number(t[3]))),o},Ri=function(t){let o=0,u=0;for(;t;){const g=Ks(t);if(o+=g.x,u+=g.y,(" "+(t.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;t=t.parentNode}return new Ot(o,u)},ae=function(){const t=is();return new pn(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},ge=function(){const t=document.documentElement,o=window;return new Ot(o.pageXOffset||t.scrollLeft,o.pageYOffset||t.scrollTop)},Ue=function(t,o){var u=o.x;o=o.y;const g=t.getInjectionDiv().getBoundingClientRect();return u=new Ot(u-g.left,o-g.top),o=t.getOriginOffsetInPixels(),Ot.difference(u,o).scale(1/t.scale)},ot=function(t,o){var u=o.scale(t.scale);o=u.x,u=u.y;const g=t.getInjectionDiv().getBoundingClientRect();return t=t.getOriginOffsetInPixels(),new Ot(o+g.left+t.x,u+g.top+t.y)},ht=function(t){({document:pr=pr,DOMParser:Ko=Ko,XMLSerializer:ph=ph}=t),Cd=new Ko,Cc=new ph},n.createElement$$module$build$src$core$utils$xml=function(t){return pr.createElementNS(Gs,t)},n.createTextNode$$module$build$src$core$utils$xml=function(t){return pr.createTextNode(t)},n.textToDom$$module$build$src$core$utils$xml=function(t){let o=Cd.parseFromString(t,"text/xml");if(o&&o.documentElement&&!o.getElementsByTagName("parsererror").length)return o.documentElement;if((o=Cd.parseFromString(t,"text/html"))&&o.body.firstChild&&o.body.firstChild.nodeName.toLowerCase()==="xml")return o.body.firstChild;throw Error(`DOMParser was unable to parse: ${t}`)},_t=function(t){return Gt(Cc.serializeToString(t))},Gt=function(t){return t.replace(mh,o=>`&#${o.charCodeAt(0)};`)},kt=function(t){return t?((t instanceof Element||typeof t=="string")&&(t=Bt(t),t=rt(t)),le(t),t):null},le=function(t){const o=t.kind;if(t=t.contents,o&&o!==ql&&o!==qo)throw Error("Invalid toolbox kind "+o+". Please supply either "+ql+" or "+qo);if(!t)throw Error("Toolbox must have a contents attribute.")},Te=function(t){return t?t.contents?t.contents:Array.isArray(t)&&t.length>0&&!t[0].nodeType?t:Tt(t):[]},De=function(t){return v0.hasCategoriesInternal(t)},ke=function(t){if(!t)return!1;const o=t.kind;return o?o===qo:!!t.contents.filter(u=>u.kind.toUpperCase()==="CATEGORY").length},ze=function(t){return t&&t.contents?!!t.contents.filter(function(o){return o.kind.toUpperCase()==="CATEGORY"}).length:!1},rt=function(t){const o={contents:Tt(t)};return t instanceof Node&&Nt(t,o),o},Tt=function(t){const o=[];let u=t.childNodes;u||(u=t);for(let g=0,R;R=u[g];g++){if(!R.tagName)continue;t={};const k=R.tagName.toUpperCase();t.kind=k,k==="BLOCK"?t.blockxml=R:R.childNodes&&R.childNodes.length>0&&(t.contents=Tt(R)),Nt(R,t),o.push(t)}return o},Nt=function(t,o){for(let u=0;u<t.attributes.length;u++){const g=t.attributes[u];g.nodeName.includes("css-")?(o.cssconfig=o.cssconfig||{},o.cssconfig[g.nodeName.replace("css-","")]=g.value):o[g.nodeName]=g.value}},Bt=function(t){let o=null;if(t)if(typeof t=="string"){if(o=n.textToDom$$module$build$src$core$utils$xml(t),o.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else t instanceof Element&&(o=t);return o},qt=function(t,o,u,g,R,k){const ue=k.scrollbar&&k.scrollbar.canScrollVertically();return t.horizontal===da.LEFT?(u=R.absoluteMetrics.left+u,ue&&k.RTL&&(u+=rs.scrollbarThickness)):(u=R.absoluteMetrics.left+R.viewMetrics.width-o.width-u,ue&&!k.RTL&&(u-=rs.scrollbarThickness)),t.vertical===gl.TOP?t=R.absoluteMetrics.top+g:(t=R.absoluteMetrics.top+R.viewMetrics.height-o.height-g,k.scrollbar&&k.scrollbar.canScrollHorizontally()&&(t-=rs.scrollbarThickness)),new pn(t,t+o.height,u,u+o.width)},Kt=function(t,o){return{horizontal:o.toolboxMetrics.position===Kn.LEFT||t.horizontalLayout&&!t.RTL?da.RIGHT:da.LEFT,vertical:o.toolboxMetrics.position===Kn.BOTTOM?gl.TOP:gl.BOTTOM}},Jt=function(t,o,u,g){const R=t.left,k=t.right-t.left,ue=t.bottom-t.top;for(let xe=0;xe<g.length;xe++){const St=g[xe];t.intersects(St)&&(t=u===Xr.UP?St.top-ue-o:St.bottom+o,t=new pn(t,t+ue,R,R+k),xe=-1)}return t},vn=function(t,o){i(Et.SERIALIZER,t,o)},Tn=function(t){a(Et.SERIALIZER,t)},ei=function(t,{addCoordinates:o=!1,saveIds:u=!0}={}){const g=t.workspace,R=Object.create(null);return R.height=t.getSize().height,R.width=t.getSize().width,u&&(R.id=t.id),o&&(o=t.getRelativeToSurfaceXY(),R.x=g.RTL?g.getWidth()-o.x:o.x,R.y=o.y),t.getText()&&(R.text=t.getText()),t.isCollapsed()&&(R.collapsed=!0),t.isOwnEditable()||(R.editable=!1),t.isOwnMovable()||(R.movable=!1),t.isOwnDeletable()||(R.deletable=!1),R},ln=function(t,o,{recordUndo:u=!1}={}){const g=pe();if(n.setRecordUndo$$module$build$src$core$events$utils(u),u=o.newComment(t.id),t.text!==void 0&&u.setText(t.text),t.x!==void 0||t.y!==void 0){const k=u.getRelativeToSurfaceXY();let ue,xe=(ue=t.x)!=null?ue:k.x;xe=o.RTL?o.getWidth()-xe:xe;var R;o=(R=t.y)!=null?R:k.y,u.moveTo(new Ot(xe,o))}if(t.width!==void 0||t.height){R=u.getSize();let k,ue;u.setSize(new wn((k=t.width)!=null?k:R.width,(ue=t.height)!=null?ue:R.height))}return t.collapsed!==void 0&&u.setCollapsed(t.collapsed),t.editable!==void 0&&u.setEditable(t.editable),t.movable!==void 0&&u.setMovable(t.movable),t.deletable!==void 0&&u.setDeletable(t.deletable),n.setRecordUndo$$module$build$src$core$events$utils(g),u},Dn=function(t,o){i(Et.PASTER,t,o)},fn=function(t){a(Et.PASTER,t)},yi=function(t){const o=t.workspace,u=t.getRelativeToSurfaceXY(),g=new Ot(0,0),R=o.getTopComments(!1).filter(k=>k.id!==t.id).map(k=>k.getRelativeToSurfaceXY());for(;Hn(Ot.sum(u,g),R);)g.translate(o.RTL?-30:30,30);t.moveTo(Ot.sum(u,g))},Hn=function(t,o){return o.some(u=>Math.abs(u.x-t.x)<=1&&Math.abs(u.y-t.y)<=1)},Mn=function(t,o){t.setAttribute(zs,o)},Xn=function(t,o,u){Array.isArray(u)&&(u=u.join(" ")),t.setAttribute(si+o,`${u}`)},Rn=function(t){return t&&typeof t.saveState=="function"&&typeof t.loadState=="function"},ti=function(t){return ss(t),Ti()?(ur(),Promise.resolve()):(Di||(Di=new Promise(o=>{jr=o,ka=window.requestAnimationFrame(()=>{ur(),o()})})),Di)},Gn=function(){return Di||Promise.resolve()},Ui=function(t){t||window.cancelAnimationFrame(ka),ur(t),!t&&jr&&jr()},Ti=function(){return _0},ss=function(t){Pn.add(t),di.set(t,n.getGroup$$module$build$src$core$events$utils());const o=t.getParent();o?ss(o):Li.add(t)},ur=function(t){const o=t?new Set([t]):new Set([...Li].map(k=>k.workspace)),u=[...Li].filter(Ol).filter(k=>o.has(k.workspace));for(var g of u)jh(g);for(const k of o)k.resizeContents();for(var R of u)g=R.getRelativeToSurfaceXY(),R.updateComponentLocations(g);for(const k of u)R=n.getGroup$$module$build$src$core$events$utils(),(g=di.get(k))&&n.setGroup$$module$build$src$core$events$utils(g),k.bumpNeighbours(),n.setGroup$$module$build$src$core$events$utils(R);for(const k of u)so(k);t||(Di=null)},so=function(t){Li.delete(t),Pn.delete(t),di.delete(t);for(const o of t.getChildren(!1))so(o)},Ol=function(t){return!t.isDisposed()&&!t.getParent()},jh=function(t){if(Pn.has(t)&&t.initialized){for(const o of t.getChildren(!1))jh(o);t.renderEfficiently()}},ic=function(t,o){Ql(t,o)},Ip=function(t=ma){Ql=t},cf=function(t,o){Ws(t,o)},Jg=function(t=gh){Ws=t},Yc=function(t,o,u){So(t,o,u)},Op=function(t=b0){So=t},Np=function(t,o){zf(t,o)},sc=function(t=Md){zf=t},Ja=function(t){return t&&typeof t.getProcedureDef=="function"},om=function(t){return t&&typeof t.getProcedureCall=="function"&&typeof t.renameProcedure=="function"},Yh=function(t){return t.getVariableModel!==void 0},vr=function(t,o,u,g){t=t+" was deprecated in "+o+" and will be deleted in "+u+".",g&&(t+=`
Use `+g+" instead."),vl.has(t)||(vl.add(t),console.warn(t))},n.allUsedVarModels$$module$build$src$core$variables=function(t){t=t.getAllBlocks(!1);const o=new Set;for(let u=0;u<t.length;u++){const g=t[u].getVarModels();if(g)for(let R=0;R<g.length;R++){const k=g[R];k.getId()&&o.add(k)}}return Array.from(o.values())},n.allDeveloperVariables$$module$build$src$core$variables=function(t){t=t.getAllBlocks(!1);const o=new Set;for(let g=0,R;R=t[g];g++){var u=R.getDeveloperVariables;if(u){u=u();for(let k=0;k<u.length;k++)o.add(u[k])}}return Array.from(o.values())},rc=function(t){return Za(t,!1)},Za=function(t,o=!0){return As.variables_set||As.variables_get||console.warn("There are no variable blocks, but there is a variable category."),o?(vr("The XML return value of Blockly.Variables.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),gu(t)):(t.registerButtonCallback("CREATE_VARIABLE",function(u){Qa(u.getTargetWorkspace())}),[{kind:"button",text:"%{BKY_NEW_VARIABLE}",callbackkey:"CREATE_VARIABLE"},...oc(t,t.getVariableMap().getVariablesOfType(""),!0)])},Kc=function(t){return{VAR:{name:t.getName(),type:t.getType()}}},oc=function(t,o,u,g="variables_get",R="variables_set"){u&&(u=As.math_change),t=[];const k=o.slice(-1)[0];return k&&(As[R]&&t.push({kind:"block",type:R,gap:u?8:24,fields:Kc(k)}),u&&t.push({kind:"block",type:"math_change",gap:As[g]?20:8,fields:Kc(k),inputs:{DELTA:{shadow:{type:"math_number",fields:{NUM:1}}}}})),As[g]&&t.push(...o.sort(Ll).map(ue=>({kind:"block",type:g,gap:8,fields:Kc(ue)}))),t},gu=function(t){let o=[];const u=document.createElement("button");return u.setAttribute("text","%{BKY_NEW_VARIABLE}"),u.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(g){Qa(g.getTargetWorkspace())}),o.push(u),t=Lp(t),o=o.concat(t)},Lp=function(t){t=t.getVariableMap().getVariablesOfType("");const o=[];if(t.length>0){var u=t[t.length-1];if(As.variables_set){var g=n.createElement$$module$build$src$core$utils$xml("block");g.setAttribute("type","variables_set"),g.setAttribute("gap",As.math_change?"8":"24"),g.appendChild(No(u)),o.push(g)}if(As.math_change&&(g=n.createElement$$module$build$src$core$utils$xml("block"),g.setAttribute("type","math_change"),g.setAttribute("gap",As.variables_get?"20":"8"),g.appendChild(No(u)),u=n.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),g.appendChild(u),o.push(g)),As.variables_get){t.sort(Ll);for(let R=0,k;k=t[R];R++)u=n.createElement$$module$build$src$core$utils$xml("block"),u.setAttribute("type","variables_get"),u.setAttribute("gap","8"),u.appendChild(No(k)),o.push(u)}}return o},hf=function(t){return y0.generateUniqueNameInternal(t)},am=function(t){return Nl(zu.charAt(0),t.getVariableMap().getAllVariables().map(o=>o.getName()))},Nl=function(t,o){if(!o.length)return t;const u=zu;let g="",R=u.indexOf(t);for(;;){let k=!1;for(let ue=0;ue<o.length;ue++)if(o[ue].toLowerCase()===t){k=!0;break}if(!k)break;R++,R===u.length&&(R=0,g=`${Number(g)+1}`),t=u.charAt(R)+g}return t},Qa=function(t,o,u){function g(k){qc(n.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,k,function(ue){if(ue){var xe=_u(ue,t);if(xe){if(xe.getType()===R)var St=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",xe.getName());else St=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,St=St.replace("%1",xe.getName()).replace("%2",xe.getType());ic(St,function(){g(ue)})}else t.getVariableMap().createVariable(ue,R),o&&o(ue)}else o&&o(null)})}const R=u||"";g("")},n.renameVariable$$module$build$src$core$variables=function(t,o,u){function g(R){const k=n.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",o.getName());qc(k,R,function(ue){if(ue){var xe=mo(ue,o.getType(),t),St=Jc(o.getName(),ue,t);if(xe||St){var bn="";xe?bn=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",xe.getName()).replace("%2",xe.getType()):St&&(bn=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",ue).replace("%2",St)),ic(bn,function(){g(ue)})}else t.getVariableMap().renameVariable(o,ue),u&&u(ue)}else u&&u(null)})}g("")},qc=function(t,o,u){Yc(t,o,function(g){g&&(g=g.replace(/[\s\xa0]+/g," ").trim(),g===n.Msg$$module$build$src$core$msg.RENAME_VARIABLE||g===n.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(g=null),u(g)})},mo=function(t,o,u){u=u.getVariableMap().getAllVariables(),t=t.toLowerCase();for(let g=0,R;R=u[g];g++)if(R.getName().toLowerCase()===t&&R.getType()!==o)return R;return null},_u=function(t,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(let u=0,g;g=o[u];u++)if(g.getName().toLowerCase()===t)return g;return null},Jc=function(t,o,u){return u.getProcedureMap().getProcedures().length?Kh(t,o,u):Zg(t,o,u)},Kh=function(t,o,u){t=t.toLowerCase(),o=o.toLowerCase(),u=u.getProcedureMap().getProcedures();for(const R of u){var g=R.getParameters().filter(Yh).map(k=>k.getVariableModel().getName());if(g&&(u=g.some(k=>k.toLowerCase()===t),g=g.some(k=>k.toLowerCase()===o),u&&g))return R.getName()}return null},Zg=function(t,o,u){t=t.toLowerCase(),o=o.toLowerCase(),u=u.getAllBlocks(!1);for(const R of u){if(!Ja(R))continue;u=R.getProcedureDef();var g=u[1];const k=g.some(ue=>ue.toLowerCase()===t);if(g=g.some(ue=>ue.toLowerCase()===o),k&&g)return u[0]}return null},No=function(t){const o=n.createElement$$module$build$src$core$utils$xml("field");return o.setAttribute("name","VAR"),o.setAttribute("id",t.getId()),o.setAttribute("variabletype",t.getType()),t=n.createTextNode$$module$build$src$core$utils$xml(t.getName()),o.appendChild(t),o},n.getOrCreateVariablePackage$$module$build$src$core$variables=function(t,o,u,g){let R=n.getVariable$$module$build$src$core$variables(t,o,u,g);return R||(R=qh(t,o,u,g)),R},n.getVariable$$module$build$src$core$variables=function(t,o,u,g){const R=t.getPotentialVariableMap();let k=null;if(o&&(k=t.getVariableById(o),!k&&R&&(k=R.getVariableById(o)),k))return k;if(u){if(g===void 0)throw Error("Tried to look up a variable by name without a type");k=t.getVariable(u,g),!k&&R&&(k=R.getVariable(u,g))}return k},qh=function(t,o,u,g){const R=t.getVariableMap(),k=t.getPotentialVariableMap();return u||(u=hf(t.isFlyout?t.targetWorkspace:t)),k?k.createVariable(u,g,o??void 0):R.createVariable(u,g,o)},vu=function(t,o){t=t.getAllVariables();const u=[];if(o.length!==t.length)for(let g=0;g<t.length;g++){const R=t[g];o.includes(R)||u.push(R)}return u},Ll=function(t,o){return t.getName().localeCompare(o.getName(),void 0,{sensitivity:"base"})},Zc=function(t,o){const u=[];t=t.getAllBlocks(!1);for(let g=0;g<t.length;g++){const R=t[g].getVarModels();if(R)for(let k=0;k<R.length;k++)R[k].getId()===o&&u.push(t[g])}return u},n.deleteVariable$$module$build$src$core$variables=function(t,o,u){var g=o.getName();const R=Zc(t,o.getId());for(let k=R.length-1;k>=0;k--){const ue=R[k];if(ue.type==="procedures_defnoreturn"||ue.type==="procedures_defreturn"){u=String(ue.getFieldValue("NAME")),g=n.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",g).replace("%2",u),ic(g);return}ue===u&&R.splice(k,1)}u&&R.length||R.length>1?(g=n.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(R.length+(u&&!u.workspace.isFlyout?1:0))).replace("%2",g),cf(g,k=>{k&&o&&t.getVariableMap().deleteVariable(o)})):t.getVariableMap().deleteVariable(o)},Aa=function(t,{addCoordinates:o=!1,addInputBlocks:u=!0,addNextBlocks:g=!0,doFullSerialization:R=!0,saveIds:k=!0}={}){if(t.isInsertionMarker())return null;const ue={type:t.type,id:k?t.id:void 0};return o&&Fr(t,ue),lb(t,ue),Dp(t,ue,R),Qg(t,ue,R),e_(t,ue,R),u&&t_(t,ue,R,k),g&&n_(t,ue,R,k),ue},lb=function(t,o){t.isCollapsed()&&(o.collapsed=!0),t.isEnabled()||(o.disabledReasons=Array.from(t.getDisabledReasons())),t.isOwnDeletable()||(o.deletable=!1),t.isOwnMovable()||(o.movable=!1),t.isOwnEditable()||(o.editable=!1),t.inputsInline!==void 0&&t.inputsInline!==t.inputsInlineDefault&&(o.inline=t.inputsInline),t.data&&(o.data=t.data)},Fr=function(t,o){const u=t.workspace;t=t.getRelativeToSurfaceXY(),o.x=Math.round(u.RTL?u.getWidth()-t.x:t.x),o.y=Math.round(t.y)},Dp=function(t,o,u){t.saveExtraState?(t=t.saveExtraState(u),t!==null&&(o.extraState=t)):t.mutationToDom&&(t=t.mutationToDom(),t!==null&&(o.extraState=Ra(t).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Qg=function(t,o,u){const g=Object.create(null);for(const R of t.getIcons())Rn(R)&&(t=R.saveState(u))&&(g[R.getType().toString()]=t);Object.keys(g).length&&(o.icons=g)},e_=function(t,o,u){const g=Object.create(null);for(const R of t.getFields())R.isSerializable()&&(g[R.name]=R.saveState(u));Object.keys(g).length&&(o.fields=g)},t_=function(t,o,u,g){const R=Object.create(null);for(let k=0;k<t.inputList.length;k++){const ue=t.inputList[k];if(!ue.connection)continue;const xe=Jh(ue.connection,u,g);xe&&(R[ue.name]=xe)}Object.keys(R).length&&(o.inputs=R)},n_=function(t,o,u,g){t.nextConnection&&(t=Jh(t.nextConnection,u,g))&&(o.next=t)},Jh=function(t,o,u){const g=t.getShadowState(!0);if(t=t.targetBlock(),!g&&!t)return null;const R=Object.create(null);return g&&(R.shadow=g),t&&!t.isShadow()&&(R.block=Aa(t,{doFullSerialization:o,saveIds:u})),R},Dl=function(t,o,{recordUndo:u=!1}={}){return t=Zh(t,o,{recordUndo:u}),o.rendered&&Ui(),t},Zh=function(t,o,{parentConnection:u,isShadow:g=!1,recordUndo:R=!1}={}){const k=pe();n.setRecordUndo$$module$build$src$core$events$utils(R),(R=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),n.disable$$module$build$src$core$events$utils();const ue=o.getAllVariables();let xe;try{xe=lm(t,o,{parentConnection:u,isShadow:g})}finally{n.enable$$module$build$src$core$events$utils()}if(i_(o,ue),Fe()&&K(new(Ke(tt.BLOCK_CREATE))(xe)),n.setGroup$$module$build$src$core$events$utils(R),n.setRecordUndo$$module$build$src$core$events$utils(k),o.rendered){const St=xe;setTimeout(()=>{St.disposed||St.setConnectionTracking(!0)},1)}return xe},lm=function(t,o,{parentConnection:u,isShadow:g=!1}={}){if(!t.type)throw new m(t);const R=o.newBlock(t.type,t.id);return R.setShadow(g),um(R,t),df(R,t),s_(R,t),cm(u,R,t),hm(R,t),Bp(R,t),r_(R,t),dm(R,t),bu(R,o.rendered),R},i_=function(t,o){if(Fe())for(t=vu(t,o),o=0;o<t.length;o++){const u=t[o];K(new(Ke(tt.VAR_CREATE))(u))}},um=function(t,o){let u=o.x===void 0?0:o.x;o=o.y===void 0?0:o.y;const g=t.workspace;u=g.RTL?g.getWidth()-u:u,t.moveBy(u,o)},df=function(t,o){if(o.collapsed&&t.setCollapsed(!0),o.deletable===!1&&t.setDeletable(!1),o.movable===!1&&t.setMovable(!1),o.editable===!1&&t.setEditable(!1),o.enabled===!1&&t.setDisabledReason(!0,Vs),Array.isArray(o.disabledReasons))for(const u of o.disabledReasons)t.setDisabledReason(!0,u);o.inline!==void 0&&t.setInputsInline(o.inline),o.data!==void 0&&(t.data=o.data)},s_=function(t,o){o.extraState&&(t.loadExtraState?t.loadExtraState(o.extraState):t.domToMutation&&t.domToMutation(n.textToDom$$module$build$src$core$utils$xml(o.extraState)))},cm=function(t,o,u){if(t){if(t.getSourceBlock().isShadow()&&!o.isShadow())throw new L(u);if(t.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var g=o.outputConnection;if(!g)throw new _("output",o,u)}else if(g=o.previousConnection,!g)throw new _("previous",o,u);if(!t.connect(g)){const R=o.workspace.connectionChecker;throw new x(R.getErrorMessage(R.canConnectWithReason(g,t,!1),g,t),t.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",o,u)}}},hm=function(t,o){if(o.icons){var u=Object.keys(o.icons);for(const R of u){u=o.icons[R];var g=t.getIcon(R);if(!g){if(g=f(Et.ICON,R,!1),!g)throw new U(R,t,o);g=new g(t),t.addIcon(g)}Rn(g)&&g.loadState(u)}}},Bp=function(t,o){if(o.fields){var u=Object.keys(o.fields);for(let g=0;g<u.length;g++){const R=u[g],k=o.fields[R],ue=t.getField(R);ue?ue.loadState(k):console.warn(`Ignoring non-existant field ${R} in block ${t.type}`)}}},r_=function(t,o){if(o.inputs){var u=Object.keys(o.inputs);for(let g=0;g<u.length;g++){const R=u[g],k=t.getInput(R);if(!k||!k.connection)throw new _(R,t,o);fm(k.connection,o.inputs[R])}}},dm=function(t,o){if(o.next){if(!t.nextConnection)throw new _("next",t,o);fm(t.nextConnection,o.next)}},fm=function(t,o){o.shadow&&t.setShadowState(o.shadow),o.block&&lm(o.block,t.getSourceBlock().workspace,{parentConnection:t})},bu=function(t,o){if(o){t.setConnectionTracking(!1),t.initSvg(),t.queueRender();for(const u of t.getIcons())u.onLocationChange(t.getRelativeToSurfaceXY())}else t.initModel()},ac=function(t){return typeof t.bubbleIsVisible=="function"&&typeof t.setBubbleVisible=="function"&&typeof t.getBubble=="function"},pm=function(t){return t*Math.PI/180},o_=function(t){return t*180/Math.PI},$a=function(t,o,u){if(u<t){const g=u;u=t,t=g}return Math.max(t,Math.min(o,u))},el=function(){document.querySelector(".blocklyDropDownDiv")||(Qt=document.createElement("div"),Qt.className="blocklyDropDownDiv",Qt.tabIndex=-1,(lt()||document.body).appendChild(Qt),os=document.createElement("div"),os.className="blocklyDropDownContent",Qt.appendChild(os),Rd=w(os,"keydown",null,Xt),Bn=document.createElement("div"),Bn.className="blocklyDropDownArrow",Qt.appendChild(Bn),Qt.style.opacity="0",Qt.style.transition="transform "+tu+"s, opacity "+tu+"s")},Qh=function(t){xi=t},lc=function(){return hs},Qc=function(){return os},eh=function(){Rd&&(O(Rd),Rd=null),Qt.remove(),el()},yu=function(t,o){Qt.style.backgroundColor=t,Qt.style.borderColor=o},Hr=function(t,o,u,g,R=!0){return td(kp(o),t,R,u,g)},ed=function(t,o,u,g=!0){return fi=!0,td(Tu(t),t,g,o,u)},kp=function(t){var o=t.getSvgRoot();const u=t.workspace.scale,g=t.height*u;return t=t.width*u,o=zn(o),new pn(o.y,o.y+g,o.x,o.x+t)},Tu=function(t){return t=t.getScaledBBox(),new pn(t.top,t.bottom,t.left,t.right)},td=function(t,o,u,g,R){const k=t.left+(t.right-t.left)/2,ue=t.bottom;t=t.top,R&&(t+=R),R=o.getSourceBlock();let xe=R.workspace;for(;xe.options.parentWorkspace;)xe=xe.options.parentWorkspace;return Qh(xe.getParentSvg().parentNode),Pp(o,R.RTL,k,ue,k,t,u,g)},Pp=function(t,o,u,g,R,k,ue,xe){return hs=t,He=xe||null,Qt.style.direction=o?"rtl":"ltr",t=H(),pt=t.getRenderer().getClassName(),Vt=t.getTheme().getClassName(),Ye(Qt,pt),Ye(Qt,Vt),u=pf(u,g,R,k),ue&&(Pa=n.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(Qt)),u},ff=function(t,o,u,g){return t=Eu(t,u.left,u.right,g.width),{initialX:t.divX,initialY:o,finalX:t.divX,finalY:o+Vu,arrowX:t.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Up=function(t,o,u,g){return t=Eu(t,u.left,u.right,g.width),{initialX:t.divX,initialY:o-g.height,finalX:t.divX,finalY:o-g.height-Vu,arrowX:t.arrowX,arrowY:g.height-Zn*2-nn/2,arrowAtTop:!1,arrowVisible:!0}},Lo=function(t,o,u){return t=Eu(t,o.left,o.right,u.width),{initialX:t.divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Eu=function(t,o,u,g){return o=$a(o,t-g/2,u-g),t=t-nn/2-o,u=ga,t=$a(u,t,g-u-nn),{arrowX:t,divX:o}},uc=function(){return!!hs},Fp=function(t,o){return hs===t?(o?xa():th(),!0):!1},th=function(){Qt.style.transform="translate(0, 0)",Qt.style.opacity="0",ct=setTimeout(function(){xa()},tu*1e3),He&&(He(),He=null)},xa=function(){uc()&&(ct&&clearTimeout(ct),He&&(He(),He=null),eh(),hs=null,H().markFocused(),Pa&&(Pa(),Pa=null))},pf=function(t,o,u,g){t=C_.getPositionMetrics(t,o,u,g),t.arrowVisible?(o=t.arrowX,u=t.arrowY,g=t.arrowAtTop?45:225,Bn.style.display="",Bn.style.transform=`translate(${o}px, ${u}px) rotate(${g}deg)`,Bn.setAttribute("class","blocklyDropDownArrow")):Bn.style.display="none",o=Math.floor(t.initialX),u=Math.floor(t.initialY),g=Math.floor(t.finalX);const R=Math.floor(t.finalY);return Qt.style.left=o+"px",Qt.style.top=u+"px",Qt.style.display="block",Qt.style.opacity="1",Qt.style.transform="translate("+(g-o)+"px,"+(R-u)+"px)",!!t.arrowAtTop},mf=function(){if(hs){var t=hs.getSourceBlock();t=fi?Tu(hs):kp(t);const o=t.left+(t.right-t.left)/2;pf(o,t.bottom,o,t.top)}else th()},Su=function(t){return t.length?t.reduce(function(o,u){return o.length<u.length?o:u}).length:0},nh=function(t,o){if(!t.length)return 0;if(t.length===1)return t[0].length;let u=0;o=o||Su(t);let g;for(g=0;g<o;g++){for(var R=t[0][g],k=1;k<t.length;k++)if(R!==t[k][g])return u;R===" "&&(u=g+1)}for(R=1;R<t.length;R++)if((k=t[R][g])&&k!==" ")return u;return o},Ss=function(t,o){if(!t.length)return 0;if(t.length===1)return t[0].length;let u=0;o=o||Su(t);let g;for(g=0;g<o;g++){for(var R=t[0].substr(-g-1,1),k=1;k<t.length;k++)if(R!==t[k].substr(-g-1,1))return u;R===" "&&(u=g+1)}for(R=1;R<t.length;R++)if((k=t[R].charAt(t[R].length-g-1))&&k!==" ")return u;return o},n.wrap$$module$build$src$core$utils$string=function(t,o){t=t.split(`
`);for(let u=0;u<t.length;u++)t[u]=a_(t[u],o);return t.join(`
`)},a_=function(t,o){if(t.length<=o)return t;const u=t.trim().split(/\s+/);for(var g=0;g<u.length;g++)u[g].length>o&&(o=u[g].length);var R=-1/0;let k,ue=1;do{g=R,k=t,t=[],R=u.length/ue;let xe=1;for(let St=0;St<u.length-1;St++)xe<(St+1.5)/R?(xe++,t[St]=!0):t[St]=!1;t=gm(u,t,o),R=mm(u,t,o),t=gf(u,t),ue++}while(R>g);return k},mm=function(t,o,u){const g=[0],R=[];for(var k=0;k<t.length;k++)g[g.length-1]+=t[k].length,o[k]===!0?(g.push(0),R.push(t[k].charAt(t[k].length-1))):o[k]===!1&&g[g.length-1]++;for(t=Math.max(...g),o=0,k=0;k<g.length;k++)o-=Math.pow(Math.abs(u-g[k]),1.5)*2,o-=Math.pow(t-g[k],1.5),".?!".includes(R[k])?o+=u/3:",;)]}".includes(R[k])&&(o+=u/4);return g.length>1&&g[g.length-1]<=g[g.length-2]&&(o+=.5),o},gm=function(t,o,u){let g=mm(t,o,u),R;for(let k=0;k<o.length-1;k++){if(o[k]===o[k+1])continue;const ue=[].concat(o);ue[k]=!ue[k],ue[k+1]=!ue[k+1];const xe=mm(t,ue,u);xe>g&&(g=xe,R=ue)}return R?gm(t,R,u):o},gf=function(t,o){const u=[];for(let g=0;g<t.length;g++)u.push(t[g]),o[g]!==void 0&&u.push(o[g]?`
`:" ");return u.join("")},n.isNumber$$module$build$src$core$utils$string=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},cc=function(t){Vf=t},l_=function(){return Vf},Do=function(){return M_},tl=function(){return sr},wr=function(t){if(t=Hp(t)){for(t=t.tooltip;typeof t=="function";)t=t();if(typeof t!="string")throw Error("Tooltip function must return a string.");return t}return""},Hp=function(t){for(;t&&t.tooltip;){if(typeof t.tooltip=="string"||typeof t.tooltip=="function")return t;t=t.tooltip}return null},Gp=function(){document.querySelector(".blocklyTooltipDiv")||(sr=document.createElement("div"),sr.className="blocklyTooltipDiv",(lt()||document.body).appendChild(sr))},nd=function(t){t.mouseOverWrapper_=I(t,"pointerover",null,_m),t.mouseOutWrapper_=I(t,"pointerout",null,Au),t.addEventListener("pointermove",_f,!1)},id=function(t){t&&(O(t.mouseOverWrapper_),O(t.mouseOutWrapper_),t.removeEventListener("pointermove",_f))},_m=function(t){T0||(t=Hp(t.currentTarget),nu!==t&&(nl(),eg=null,nu=t),clearTimeout(wT))},Au=function(t){T0||(wT=setTimeout(function(){eg=nu=null,nl()},1),clearTimeout(Wf),Wf=0)},_f=function(t){if(nu&&nu.tooltip&&!T0)if(M_){const o=IT-t.pageX;t=R_-t.pageY,Math.sqrt(o*o+t*t)>pb&&nl()}else eg!==nu&&(clearTimeout(Wf),IT=t.pageX,R_=t.pageY,Wf=setTimeout($u,dA))},sd=function(){eg=nu=null,nl()},nl=function(){M_&&(M_=!1,sr&&(sr.style.display="none")),Wf&&(clearTimeout(Wf),Wf=0)},zp=function(){nl(),T0=!0},Ir=function(){T0=!1},hc=function(){sr&&nu&&(typeof Vf=="function"?Vf(sr,nu):Vp())},Vp=function(){var t=wr(nu);t=n.wrap$$module$build$src$core$utils$string(t,RT),t=t.split(`
`);for(let o=0;o<t.length;o++){const u=document.createElement("div");u.appendChild(document.createTextNode(t[o])),sr.appendChild(u)}},u_=function(t){const o=document.documentElement.clientWidth,u=document.documentElement.clientHeight;let g=IT;g=t?g-(OT+sr.offsetWidth):g+OT;let R=R_+w_;return R+sr.offsetHeight>u+window.scrollY&&(R-=sr.offsetHeight+2*w_),t?g=Math.max(mb-window.scrollX,g):g+sr.offsetWidth>o+window.scrollX-2*mb&&(g=o-sr.offsetWidth-2*mb),{x:g,y:R}},$u=function(){if(!T0&&(eg=nu,sr)){sr.textContent="",hc();var t=nu.RTL;sr.style.direction=t?"rtl":"ltr",sr.style.display="block",M_=!0;var{x:o,y:u}=u_(t);sr.style.left=o+"px",sr.style.top=u+"px"}},ro=function(){return gb},vm=function(t){gb=t},go=function(){return gi},c_=function(t){gi=t},Bo=function(t){t=`${t}`.toLowerCase().trim();var o=_b[t];if(o||(o=t.substring(0,2)==="0x"?"#"+t.substring(2):t,o=o[0]==="#"?o:"#"+o,/^#[0-9a-f]{6}$/.test(o)))return o;if(/^#[0-9a-f]{3}$/.test(o))return["#",o[1],o[1],o[2],o[2],o[3],o[3]].join("");var u=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return u&&(t=Number(u[1]),o=Number(u[2]),u=Number(u[3]),t>=0&&t<256&&o>=0&&o<256&&u>=0&&u<256)?xu(t,o,u):null},xu=function(t,o,u){return o=t<<16|o<<8|u,t<16?"#"+(16777216|o).toString(16).substr(1):"#"+o.toString(16)},il=function(t){return t=Bo(t),t?(t=parseInt(t.substr(1),16),[t>>16,t>>8&255,t&255]):[0,0,0]},rd=function(t,o,u){let g=0,R=0,k=0;if(o===0)k=R=g=u;else{const ue=Math.floor(t/60),xe=t/60-ue;t=u*(1-o);const St=u*(1-o*xe);switch(o=u*(1-o*(1-xe)),ue){case 1:g=St,R=u,k=t;break;case 2:g=t,R=u,k=o;break;case 3:g=t,R=St,k=u;break;case 4:g=o,R=t,k=u;break;case 5:g=u,R=t,k=St;break;case 6:case 0:g=u,R=o,k=t}}return xu(Math.floor(g),Math.floor(R),Math.floor(k))},Bl=function(t,o,u){return t=Bo(t),!t||(o=Bo(o),!o)?null:(t=il(t),o=il(o),xu(Math.round(o[0]+u*(t[0]-o[0])),Math.round(o[1]+u*(t[1]-o[1])),Math.round(o[2]+u*(t[2]-o[2]))))},br=function(t){return rd(t,gb,gi*255)},vf=function(t,o,u){const g=[];var R=t.split("");R.push("");var k=0;t=[];let ue=null;for(let bn=0;bn<R.length;bn++){var xe=R[bn];if(k===0)if(xe==="%")(k=t.join(""))&&g.push(k),t.length=0,k=1;else if(u&&xe===`
`){const xr=t.join("");xr&&g.push(xr),t.length=0,g.push(xe)}else t.push(xe);else if(k===1)xe==="%"?(t.push(xe),k=0):o&&"0"<=xe&&xe<="9"?(k=2,ue=xe,(xe=t.join(""))&&g.push(xe),t.length=0):xe==="{"?k=3:(t.push("%",xe),k=0);else if(k===2)if("0"<=xe&&xe<="9")ue+=xe;else{var St=void 0;g.push(parseInt((St=ue)!=null?St:"",10)),bn--,k=0}else k===3&&(xe===""?(t.splice(0,0,"%{"),bn--,k=0):xe!=="}"?t.push(xe):(k=t.join(""),/[A-Z]\w*/i.test(k)?(xe=k.toUpperCase(),(xe=xe.startsWith("BKY_")?xe.substring(4):null)&&xe in n.Msg$$module$build$src$core$msg?(k=n.Msg$$module$build$src$core$msg[xe],typeof k=="string"?Array.prototype.push.apply(g,vf(k,o,u)):o?g.push(`${k}`):g.push(k)):g.push("%{"+k+"}")):g.push("%{"+k+"}"),k=t.length=0))}for((o=t.join(""))&&g.push(o),St=[],t.length=0,R=0;R<g.length;R++)typeof g[R]!="string"||u&&g[R]===`
`?((o=t.join(""))&&St.push(o),t.length=0,St.push(g[R])):t.push(g[R]);return(o=t.join(""))&&St.push(o),t.length=0,St},Or=function(t){return vf(t,!0,!0)},mi=function(t){return typeof t!="string"?t:(t=vf(t,!1,!1),t.length?String(t[0]):"")},Ca=function(t){let o=!0;const u=n.Msg$$module$build$src$core$msg,g=t.match(/%{BKY_[A-Z]\w*}/gi);if(g)for(let R=0;R<g.length;R++){const k=g[R].toUpperCase();u[k.slice(6,-1)]===void 0&&(console.warn("No message string for "+g[R]+" in "+t),o=!1)}return o},dc=function(t){const o=typeof t=="string"?mi(t):t;var u=Number(o);if(!isNaN(u)&&0<=u&&u<=360)return{hue:u,hex:rd(u,ro(),go()*255)};if(u=Bo(o))return{hue:null,hex:u};throw u='Invalid colour: "'+o+'"',t!==o&&(u+=' (from "'+t+'")'),Error(u)},Cu=function(){return bl},fc=function(t){if(bl=t,t===null){let o;(o=document.querySelector("."+vb))==null||o.remove()}},bf=function(){const t=lt()||document.body,o=document.querySelector("div."+vb);o?bl=o:(bl=document.createElement("div"),bl.className=vb,bl.tabIndex=-1),w(bl,"keydown",null,Xt),t.appendChild(bl)},sl=function(t,o,u,g,R=!0){if(ih(),_h=t,wd=u,u=bl){if(u.style.direction=o?"rtl":"ltr",u.style.display="block",!g&&t instanceof Ji){let xe;g=(xe=t.getSourceBlock())==null?void 0:xe.workspace}var k;I_=(k=g)!=null?k:null;var ue;t=(ue=g)!=null?ue:H(),tg=t.getRenderer().getClassName(),ng=t.getTheme().getClassName(),tg&&Ye(u,tg),ng&&Ye(u,ng),R&&(O_=n.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(u))}},ih=function(){if(sh()){_h=null;var t=bl;t&&(t.style.display="none",t.style.left="",t.style.top="",wd&&(wd(),wd=null),t.textContent="",tg&&(Se(t,tg),tg=""),ng&&(Se(t,ng),ng=""),H().markFocused(),O_&&(O_(),O_=null))}},sh=function(){return!!_h},oa=function(t){_h===t&&ih()},od=function(t){let o=I_===null,u=t;for(;!o&&u;){if(u===t){o=!0;break}u=t.options.parentWorkspace}o&&ih()},_o=function(t,o,u){bl.style.left=t+"px",bl.style.top=o+"px",bl.style.height=u+"px"},ad=function(t,o,u,g){const R=bm(t,o,u);t=qs(t,o,u,g),R<0?_o(t,0,u.height+R):_o(t,R,u.height)},qs=function(t,o,u,g){return g?Math.min(Math.max(o.right-u.width,t.left),t.right-u.width):Math.max(Math.min(o.left,t.right-u.width),t.left)},bm=function(t,o,u){return o.bottom+u.height>=t.bottom?o.top-u.height:o.bottom},Nr=function(t){return!(t==null||!t.repositionForWindowResize)},Mu=function(){Nr(_h)&&_h.repositionForWindowResize()||ih()},yf=function(){return as},Tf=function(t){as=t},kl=function(t,o,u,g,R){if(sl(bb,u,Ru,g),o.length){R||(t instanceof PointerEvent?R=new Ot(t.clientX,t.clientY):(console.warn("Context menu opened with keyboard but no location given"),R=new Ot(0,0)));var k=ko(o,u,t,R);Yr=k,Ef(k,u,R),setTimeout(function(){k.focus()},1),as=null}else oo()},ko=function(t,o,u,g){const R=new _s;R.setRole(Ns.MENU);for(let k=0;k<t.length;k++){const ue=t[k];if(ue.separator){R.addChild(new _l);continue}const xe=new Jo(ue.text);xe.setRightToLeft(o),xe.setRole(Ns.MENUITEM),R.addChild(xe),xe.setEnabled(ue.enabled),ue.enabled&&xe.onAction(function(St,bn){oo(),requestAnimationFrame(()=>{setTimeout(()=>{ue.callback(ue.scope,u,bn,g)},0)})},{})}return R},Ef=function(t,o,u){const g=ae();u=new pn(u.y+g.top,u.y+g.top,u.x+g.left,u.x+g.left),ld(t);const R=t.getSize();o&&(u.left+=R.width,u.right+=R.width,g.left+=R.width,g.right+=R.width),ad(g,u,R,o),t.focus()},ld=function(t){var o=Cu();if(!o)throw Error("Attempting to create a context menu when widget div is null");o=t.render(o),Ye(o,"blocklyContextMenu"),w(o,"contextmenu",null,Gr),t.focus()},Gr=function(t){t.preventDefault(),t.stopPropagation()},oo=function(){oa(bb),as=null},Ru=function(){Yr&&(Yr.dispose(),Yr=null)},n.callbackFactory$$module$build$src$core$contextmenu=function(t,o){return()=>{n.disable$$module$build$src$core$events$utils();let u;try{u=o instanceof Element?ll(o,t.workspace):Zh(o,t.workspace);const g=t.getRelativeToSurfaceXY();g.x=t.RTL?g.x-n.config$$module$build$src$core$config.snapRadius:g.x+n.config$$module$build$src$core$config.snapRadius,g.y+=n.config$$module$build$src$core$config.snapRadius*2,u.moveBy(g.x,g.y)}finally{n.enable$$module$build$src$core$events$utils()}return Fe()&&!u.isShadow()&&K(new(Ke(tt.BLOCK_CREATE))(u)),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(u),u}},rl=function(t,o){return o=V(o,t.getParentSvg(),t.getInverseScreenCTM()),o.x/=t.scale,o.y/=t.scale,o},Ma=function(t,o,u){o=rl(t,o),Tb.set(t,Ot.difference(u,o))},ol=function(t,o){if(o=rl(t,o),t=Tb.get(t),!t)throw Error("Drag not initialized");return Ot.sum(t,o)},Wp=function(t,o=!1){const u=n.createElement$$module$build$src$core$utils$xml("xml");var g=Xp(n.allUsedVarModels$$module$build$src$core$variables(t));g.hasChildNodes()&&u.appendChild(g);for(const R of t.getTopComments())u.appendChild(ud(R,o));for(t=t.getTopBlocks(!0),g=0;g<t.length;g++)u.appendChild(Lr(t[g],o));return u},ud=function(t,o=!1){const u=n.createElement$$module$build$src$core$utils$xml("comment");o||u.setAttribute("id",t.id),o=t.workspace;const g=t.getRelativeToSurfaceXY();return g.x=o.RTL?o.getWidth()-g.x:g.x,u.setAttribute("x",`${g.x}`),u.setAttribute("y",`${g.y}`),u.setAttribute("w",`${t.getSize().width}`),u.setAttribute("h",`${t.getSize().height}`),t.getText()&&(u.textContent=t.getText()),t.isCollapsed()&&u.setAttribute("collapsed","true"),t.isOwnEditable()||u.setAttribute("editable","false"),t.isOwnMovable()||u.setAttribute("movable","false"),t.isOwnDeletable()||u.setAttribute("deletable","false"),u},Xp=function(t){const o=n.createElement$$module$build$src$core$utils$xml("variables");for(let u=0;u<t.length;u++){const g=t[u],R=n.createElement$$module$build$src$core$utils$xml("variable");R.appendChild(n.createTextNode$$module$build$src$core$utils$xml(g.getName())),g.getType()&&R.setAttribute("type",g.getType()),R.id=g.getId(),o.appendChild(R)}return o},Lr=function(t,o){if(t.isInsertionMarker()&&(t=t.getChildren(!1)[0],!t))return new DocumentFragment;let u=0;if(t.workspace.RTL&&(u=t.workspace.getWidth()),o=Dr(t,o),Bs(o)){const g=t.getRelativeToSurfaceXY();o.setAttribute("x",String(Math.round(t.workspace.RTL?u-g.x:g.x))),o.setAttribute("y",String(Math.round(g.y)))}return o},Ds=function(t){if(t.isSerializable()){const o=n.createElement$$module$build$src$core$utils$xml("field");return o.setAttribute("name",t.name||""),t.toXml(o)}return null},wi=function(t,o){for(const u of t.getFields())(t=Ds(u))&&o.appendChild(t)},Dr=function(t,o){if(t.isInsertionMarker())return(o=t.getChildren(!1)[0])?Dr(o):new DocumentFragment;const u=n.createElement$$module$build$src$core$utils$xml(t.isShadow()?"shadow":"block");if(u.setAttribute("type",t.type),o||(u.id=t.id),t.mutationToDom){var g=t.mutationToDom();g&&(g.hasChildNodes()||g.hasAttributes())&&u.appendChild(g)}if(wi(t,u),g=t.getCommentText()){var R=t.getIcon(je.COMMENT),k=R.getBubbleSize(),ue=R.bubbleIsVisible();R=R.getBubbleLocation();var xe=n.createElement$$module$build$src$core$utils$xml("comment");xe.appendChild(n.createTextNode$$module$build$src$core$utils$xml(g)),xe.setAttribute("pinned",`${ue}`),xe.setAttribute("h",`${k.height}`),xe.setAttribute("w",`${k.width}`),R&&(xe.setAttribute("x",`${t.workspace.RTL?t.workspace.getWidth()-(R.x+k.width):R.x}`),xe.setAttribute("y",`${R.y}`)),u.appendChild(xe)}for(t.data&&(g=n.createElement$$module$build$src$core$utils$xml("data"),g.appendChild(n.createTextNode$$module$build$src$core$utils$xml(t.data)),u.appendChild(g)),g=0;g<t.inputList.length;g++){k=t.inputList[g];var St=void 0;ue=!0,k.type!==n.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&k.type!==n.inputTypes$$module$build$src$core$inputs$input_types.END_ROW&&(R=k.connection.targetBlock(),k.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE?St=n.createElement$$module$build$src$core$utils$xml("value"):k.type===n.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(St=n.createElement$$module$build$src$core$utils$xml("statement")),xe=k.connection.getShadowDom(),!xe||R&&R.isShadow()||St.appendChild(Po(xe,o)),R&&(R=Dr(R,o),R.nodeType===Da.ELEMENT_NODE&&(St.appendChild(R),ue=!1)),St.setAttribute("name",k.name),ue||u.appendChild(St))}t.inputsInline!==void 0&&t.inputsInline!==t.inputsInlineDefault&&u.setAttribute("inline",String(t.inputsInline)),t.isCollapsed()&&u.setAttribute("collapsed","true"),t.isEnabled()||u.setAttribute("disabled-reasons",Array.from(t.getDisabledReasons()).map(encodeURIComponent).join(",")),t.isOwnDeletable()||u.setAttribute("deletable","false"),t.isOwnMovable()||u.setAttribute("movable","false"),t.isOwnEditable()||u.setAttribute("editable","false"),St=t.getNextBlock();let bn;return St&&(g=Dr(St,o),g.nodeType===Da.ELEMENT_NODE&&(bn=n.createElement$$module$build$src$core$utils$xml("next"),bn.appendChild(g),u.appendChild(bn))),t=t.nextConnection&&t.nextConnection.getShadowDom(),!t||St&&St.isShadow()||bn.appendChild(Po(t,o)),u},Po=function(t,o){let u=t=t.cloneNode(!0),g;for(;u;)if(o&&u.nodeName==="shadow"&&u.removeAttribute("id"),u.firstChild)u=u.firstChild;else{for(;u&&!u.nextSibling;){g=u,u=u.parentNode;let R;g.nodeType===Da.TEXT_NODE&&g.data.trim()===""&&((R=u)==null?void 0:R.firstChild)!==g&&we(g)}u&&(g=u,u=u.nextSibling,g.nodeType===Da.TEXT_NODE&&g.data.trim()===""&&we(g))}return t},Ra=function(t){return _t(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},pc=function(t){t=Ra(t).split("<");let o="";for(let u=1;u<t.length;u++){const g=t[u];g[0]==="/"&&(o=o.substring(2)),t[u]=o+"<"+g,g[0]!=="/"&&g.slice(-2)!=="/>"&&(o+="  ")}return t=t.join(`
`),t=t.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),t.replace(/^\n/,"")},h_=function(t,o){return o.setResizesEnabled(!1),o.clear(),t=n.domToWorkspace$$module$build$src$core$xml(t,o),o.setResizesEnabled(!0),t},n.domToWorkspace$$module$build$src$core$xml=function(t,o){let u=0;o.RTL&&(u=o.getWidth());const g=[];Qe();const R=n.getGroup$$module$build$src$core$events$utils();R||n.setGroup$$module$build$src$core$events$utils(!0),o.setResizesEnabled&&o.setResizesEnabled(!1);let k=!0;try{for(let ue=0,xe;xe=t.childNodes[ue];ue++){const St=xe.nodeName.toLowerCase(),bn=xe;if(St==="block"||St==="shadow"&&!pe()){const xr=ll(bn,o);g.push(xr.id);let Us;const Ha=parseInt((Us=bn.getAttribute("x"))!=null?Us:"10",10);let w0;const ep=parseInt((w0=bn.getAttribute("y"))!=null?w0:"10",10);isNaN(Ha)||isNaN(ep)||xr.moveBy(o.RTL?u-Ha:Ha,ep,["create"]),k=!1}else{if(St==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(St==="comment")jp(bn,o);else if(St==="variables"){if(k)Fi(bn,o);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");k=!1}}}}finally{n.setGroup$$module$build$src$core$events$utils(R),o.setResizesEnabled&&o.setResizesEnabled(!0),o.rendered&&Ui(),vt()}return K(new(Ke(tt.FINISHED_LOADING))(o)),g},jp=function(t,o){var u;const g=(u=t.getAttribute("id"))!=null?u:void 0;u=o.rendered?new vh(o,g):new sg(o,g);var R;u.setText((R=t.textContent)!=null?R:"");var k;R=parseInt((k=t.getAttribute("x"))!=null?k:"",10);let ue;k=parseInt((ue=t.getAttribute("y"))!=null?ue:"",10),isNaN(R)||isNaN(k)||(R=o.RTL?o.getWidth()-R:R,u.moveTo(new Ot(R,k)));var xe;o=parseInt((xe=t.getAttribute("w"))!=null?xe:"",10);let St;return xe=parseInt((St=t.getAttribute("h"))!=null?St:"",10),isNaN(o)||isNaN(xe)||u.setSize(new wn(o,xe)),t.getAttribute("collapsed")==="true"&&u.setCollapsed(!0),t.getAttribute("editable")==="false"&&u.setEditable(!1),t.getAttribute("movable")==="false"&&u.setMovable(!1),t.getAttribute("deletable")==="false"&&u.setDeletable(!1),u},al=function(t,o){if(!o.getBlocksBoundingBox)return n.domToWorkspace$$module$build$src$core$xml(t,o);var u=o.getBlocksBoundingBox();if(t=n.domToWorkspace$$module$build$src$core$xml(t,o),u&&u.top!==u.bottom){var g=u.bottom;u=o.RTL?u.right:u.left;var R=1/0;let k=-1/0,ue=1/0;for(let xe=0;xe<t.length;xe++){const St=o.getBlockById(t[xe]).getRelativeToSurfaceXY();St.y<ue&&(ue=St.y),St.x<R&&(R=St.x),St.x>k&&(k=St.x)}for(g=g-ue+10,u=o.RTL?u-k:u-R,R=0;R<t.length;R++)o.getBlockById(t[R]).moveBy(u,g,["create"])}return t},n.domToBlock$$module$build$src$core$xml=function(t,o){return t=ll(t,o),o.rendered&&Ui(),t},ll=function(t,o){n.disable$$module$build$src$core$events$utils();var u=o.getAllVariables();let g;try{if(g=Uo(t,o),o.rendered){const R=g,k=g.getDescendants(!1);R.setConnectionTracking(!1);for(let ue=k.length-1;ue>=0;ue--)k[ue].initSvg();for(let ue=k.length-1;ue>=0;ue--)k[ue].queueRender();setTimeout(function(){R.disposed||R.setConnectionTracking(!0)},1),o.resizeContents()}else{const R=g.getDescendants(!1);for(let k=R.length-1;k>=0;k--)R[k].initModel()}}finally{n.enable$$module$build$src$core$events$utils()}if(Fe()){for(t=vu(o,u),o=0;o<t.length;o++)u=t[o],K(new(Ke(tt.VAR_CREATE))(u));K(new(Ke(tt.BLOCK_CREATE))(g))}return g},Fi=function(t,o){for(let g=0;g<t.children.length;g++){var u=t.children[g];const R=u.getAttribute("type"),k=u.getAttribute("id");if(u=u.textContent,!u)break;let ue;o.getVariableMap().createVariable(u,(ue=R)!=null?ue:void 0,k)}},rh=function(t){const o={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let u=0;u<t.children.length;u++){const g=t.children[u];if(g.nodeType!==Da.TEXT_NODE)switch(g.nodeName.toLowerCase()){case"mutation":o.mutation.push(g);break;case"comment":o.comment.push(g);break;case"data":o.data.push(g);break;case"title":case"field":o.field.push(g);break;case"value":case"statement":o.input.push(g);break;case"next":o.next.push(g);break;default:console.warn("Ignoring unknown tag: "+g.nodeName)}}return o},ym=function(t,o){let u=!1;for(let g=0;g<t.length;g++){const R=t[g];o.domToMutation&&(o.domToMutation(R),o.initSvg&&(u=!0))}return u},mc=function(t,o){for(let u=0;u<t.length;u++){const g=t[u],R=g.textContent,k=g.getAttribute("pinned")==="true";let ue;const xe=parseInt((ue=g.getAttribute("w"))!=null?ue:"50",10);let St;const bn=parseInt((St=g.getAttribute("h"))!=null?St:"50",10);let xr,Us=parseInt((xr=g.getAttribute("x"))!=null?xr:"",10),Ha;const w0=parseInt((Ha=g.getAttribute("y"))!=null?Ha:"",10);o.setCommentText(R);const ep=o.getIcon(je.COMMENT);isNaN(xe)||isNaN(bn)||ep.setBubbleSize(new wn(xe,bn)),ep.setBubbleVisible(k),setTimeout(()=>{isNaN(Us)||isNaN(w0)||(Us=o.workspace.RTL?o.workspace.getWidth()-(Us+xe):Us,ep.setBubbleLocation(new Ot(Us,w0))),ep.setBubbleVisible(k)},1)}},wu=function(t,o){for(let u=0;u<t.length;u++)o.data=t[u].textContent},gc=function(t,o){for(let u=0;u<t.length;u++){const g=t[u],R=g.getAttribute("name");R?Af(o,R,g):console.warn(`Ignoring unnamed field in block ${o.type}`)}},Pl=function(t){let o=null,u=null;for(let g=0;g<t.childNodes.length;g++){const R=t.childNodes[g];Bs(R)&&(R.nodeName.toLowerCase()==="block"?o=R:R.nodeName.toLowerCase()==="shadow"&&(u=R))}return{childBlockElement:o,childShadowElement:u}},Tm=function(t,o,u,g){for(let k=0;k<t.length;k++){var R=t[k];const ue=R.getAttribute("name"),xe=ue?u.getInput(ue):null;if(!xe){console.warn("Ignoring non-existent input "+ue+" in block "+g);break}if(R=Pl(R),R.childBlockElement){if(!xe.connection)throw TypeError("Input connection does not exist.");Uo(R.childBlockElement,o,xe.connection,!1)}if(R.childShadowElement){let St;(St=xe.connection)==null||St.setShadowDom(R.childShadowElement)}}},Sf=function(t,o,u){for(let g=0;g<t.length;g++){const R=Pl(t[g]);if(R.childBlockElement){if(!u.nextConnection)throw TypeError("Next statement does not exist.");if(u.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Uo(R.childBlockElement,o,u.nextConnection,!0)}R.childShadowElement&&u.nextConnection&&u.nextConnection.setShadowDom(R.childShadowElement)}},Uo=function(t,o,u,g){var R;const k=t.getAttribute("type");if(!k)throw TypeError("Block type unspecified: "+t.outerHTML);var ue=(R=t.getAttribute("id"))!=null?R:void 0;R=o.newBlock(k,ue),ue=rh(t);const xe=ym(ue.mutation,R);if(mc(ue.comment,R),wu(ue.data,R),u)if(g)if(R.previousConnection)u.connect(R.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(R.outputConnection)u.connect(R.outputConnection);else if(R.previousConnection)u.connect(R.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(gc(ue.field,R),Tm(ue.input,o,R,k),Sf(ue.next,o,R),xe&&R.initSvg(),(o=t.getAttribute("inline"))&&R.setInputsInline(o==="true"),(o=t.getAttribute("disabled"))&&R.setDisabledReason(o==="true"||o==="disabled",Vs),o=t.getAttribute("disabled-reasons"),o!==null)for(var St of o.split(","))R.setDisabledReason(!0,decodeURIComponent(St));if((St=t.getAttribute("deletable"))&&R.setDeletable(St==="true"),(St=t.getAttribute("movable"))&&R.setMovable(St==="true"),(St=t.getAttribute("editable"))&&R.setEditable(St==="true"),(St=t.getAttribute("collapsed"))&&R.setCollapsed(St==="true"),t.nodeName.toLowerCase()==="shadow"){for(t=R.getChildren(!1),St=0;St<t.length;St++)if(!t[St].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");R.setShadow(!0)}return R},Af=function(t,o,u){const g=t.getField(o);g?g.fromXml(u):console.warn("Ignoring non-existent field "+o+" in block "+t.type)},Ul=function(t){for(let o=0;o<t.childNodes.length;o++){const u=t.childNodes[o];if(u.nodeName.toLowerCase()==="next"){t.removeChild(u);break}}},Bs=function(t){return t.nodeType===Da.ELEMENT_NODE},aa=function(t,o){i(Et.FIELD,t,o)},Yp=function(t){a(Et.FIELD,t)},n.fromJson$$module$build$src$core$field_registry=function(t){return LT.fromJsonInternal(t)},Em=function(t){const o=p(Et.FIELD,t.type);return o?o.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},$f=function(t){return t&&typeof t=="object"&&"src"in t&&typeof t.src=="string"&&"alt"in t&&typeof t.alt=="string"&&"width"in t&&typeof t.width=="number"&&"height"in t&&typeof t.height=="number"},n.register$$module$build$src$core$extensions=function(t,o){if(typeof t!="string"||t.trim()==="")throw Error('Error: Invalid extension name "'+t+'"');if(Ic[t])throw Error('Error: Extension "'+t+'" is already registered.');if(typeof o!="function")throw Error('Error: Extension "'+t+'" must be a function');Ic[t]=o},n.registerMixin$$module$build$src$core$extensions=function(t,o){if(!o||typeof o!="object")throw Error('Error: Mixin "'+t+'" must be a object');n.register$$module$build$src$core$extensions(t,function(){this.mixin(o)})},n.registerMutator$$module$build$src$core$extensions=function(t,o,u,g){const R='Error when registering mutator "'+t+'": ';Fo(R,o);const k=Jn(o,R);if(u&&typeof u!="function")throw Error(R+'Extension "'+t+'" is not a function');n.register$$module$build$src$core$extensions(t,function(){k&&this.setMutator(new n.MutatorIcon$$module$build$src$core$icons$mutator_icon(g||[],this)),this.mixin(o),u&&u.apply(this)})},d_=function(t){Js(t)?delete Ic[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},Js=function(t){return!!Ic[t]},cd=function(t,o,u){const g=Ic[t];if(typeof g!="function")throw Error('Error: Extension "'+t+'" not found.');let R;if(u?hd(t,o):R=fd(o),g.apply(o),u)Fo('Error after applying mutator "'+t+'": ',o);else if(!ub(R,o))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},hd=function(t,o){if(fd(o).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+o.id)},dd=function(t,o){return _c(t.mutationToDom,t.domToMutation,o+" mutationToDom/domToMutation")},xf=function(t,o){return _c(t.saveExtraState,t.loadExtraState,o+" saveExtraState/loadExtraState")},Jn=function(t,o){return _c(t.compose,t.decompose,o+" compose/decompose")},_c=function(t,o,u){if(t&&o){if(typeof t!="function"||typeof o!="function")throw Error(u+" must be a function");return!0}if(!t&&!o)return!1;throw Error(u+"Must have both or neither functions")},Fo=function(t,o){const u=dd(o,t),g=xf(o,t);if(!u&&!g)throw Error(t+"Mutations must contain either XML hooks, or JSON hooks, or both");Jn(o,t)},fd=function(t){const o=[];return t.domToMutation!==void 0&&o.push(t.domToMutation),t.mutationToDom!==void 0&&o.push(t.mutationToDom),t.saveExtraState!==void 0&&o.push(t.saveExtraState),t.loadExtraState!==void 0&&o.push(t.loadExtraState),t.compose!==void 0&&o.push(t.compose),t.decompose!==void 0&&o.push(t.decompose),o},ub=function(t,o){if(o=fd(o),o.length!==t.length)return!1;for(let u=0;u<o.length;u++)if(t[u]!==o[u])return!1;return!0},Cf=function(t){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")t();else{const o=setInterval(function(){document.readyState==="complete"&&(clearInterval(o),t())},10)}},n.buildTooltipForDropdown$$module$build$src$core$extensions=function(t,o){const u=[];return function(){u.includes(this.type)||(wa(this,t,o),u.push(this.type)),this.setTooltip((function(){const g=String(this.getFieldValue(t));return mi(o[g])}).bind(this))}},wa=function(t,o,u){var g=t.getField(o);if(g instanceof Xs&&!g.isOptionListDynamic()){g=g.getOptions();for(const R of g)R!==Xs.SEPARATOR&&([,g]=R,u[g]===void 0&&console.warn(`No tooltip mapping for value ${g} of field ${o} of block type ${t.type}.`))}},n.buildTooltipWithFieldText$$module$build$src$core$extensions=function(t,o){return function(){this.setTooltip((function(){const u=this.getField(o);return mi(t).replace("%1",u?u.getText():"")}).bind(this))}},vc=function(){const t=this.tooltip;this.setTooltip((function(){const o=this.getParent();return o&&o.getInputsInline()&&o.tooltip||t}).bind(this))},cn=function(t,o){return" "+t+","+o+" "},ao=function(t,o){return" "+t+o.join("")},Zs=function(t,o){return" M "+t+","+o+" "},ws=function(t,o){return" m "+t+","+o+" "},yr=function(t,o){return" l "+t+","+o+" "},Iu=function(t){return" l"+t.join("")},hn=function(t,o){return" "+t+" "+o+" "},ps=function(t,o,u,g){return t+" "+u+" "+u+" "+o+g},Kp=function(t,o){if(!t||!o)throw Error("Cannot connect null connections.");t.targetConnection=o,o.targetConnection=t},Ia=function(t,o){let u=null;o=o.outputConnection;const g=o?.getConnectionChecker();for(let R=0,k;k=t.inputList[R];R++){const ue=k.connection;let xe;if(ue&&((xe=g)!=null&&xe.canConnect(o,ue,!1))){if(u)return null;u=ue}}return u},Sm=function(t,o){let u;for(;u=Ia(t,o);)if(t=u.targetBlock(),!t||t.isShadow())return u;return null},Am=function(t){return Le(t)&&typeof t.getType=="function"&&typeof t.initView=="function"&&typeof t.dispose=="function"&&typeof t.getWeight=="function"&&typeof t.getSize=="function"&&typeof t.applyColour=="function"&&typeof t.hideForInsertionMarker=="function"&&typeof t.updateEditable=="function"&&typeof t.updateCollapsed=="function"&&typeof t.isShownWhenCollapsed=="function"&&typeof t.setOffsetInBlock=="function"&&typeof t.onLocationChange=="function"&&typeof t.onClick=="function"},Ou=function(t){return Am(t)&&ac(t)&&Rn(t)&&typeof t.setText=="function"&&typeof t.getText=="function"&&typeof t.setBubbleSize=="function"&&typeof t.getBubbleSize=="function"&&typeof t.setBubbleLocation=="function"&&typeof t.getBubbleLocation=="function"&&t.getType()===je.COMMENT},Mf=function(t){if(!(t.getDescendants(!1).length>100)){var o=t.workspace,u=t.getSvgRoot();o.getAudioManager().play("delete");var g=t.getRelativeToSurfaceXY(),R=u.cloneNode(!0);R.setAttribute("transform","translate("+g.x+","+g.y+")");var k;(k=o.getLayerManager())==null||k.appendToAnimationLayer({getSvgRoot:()=>R}),Vn(R,{x:g.x,y:g.y,width:t.width,height:t.height},o.RTL,new Date)}},Vn=function(t,o,u,g){const R=(new Date().getTime()-g.getTime())/150;R>1?we(t):(t.setAttribute("transform","translate("+(o.x+(u?-1:1)*o.width/2*R)+","+(o.y+o.height/2*R)+") scale("+(1-R)+")"),setTimeout(Vn,10,t,o,u,g))},ul=function(t){var o=t.workspace;const u=o.scale;if(o.getAudioManager().play("click"),!(u<1)){var g=o.getSvgXY(t.getSvgRoot());t.outputConnection?(g.x+=(t.RTL?3:-3)*u,g.y+=13*u):t.previousConnection&&(g.x+=(t.RTL?-23:23)*u,g.y+=3*u);var R=Re(qe.CIRCLE,{cx:g.x,cy:g.y,r:0,fill:"none",stroke:"#888","stroke-width":10},o.getParentSvg());t=Re(qe.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*u},R),o=Re(qe.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},R),t.beginElement(),o.beginElement(),setTimeout(()=>void we(R),150)}},Fl=function(t){if(Hl(),t.workspace.getAudioManager().play("disconnect"),!(t.workspace.scale<1)){var o=t.getHeightWidth().height;o=Math.atan(10/o)/Math.PI*180,t.RTL||(o*=-1),Dd=t,bc(t,o,new Date,0)}},bc=function(t,o,u,g){const R=[.66,1,.66,0,-.66,-1,-.66,0];let k="";u.getTime()+200>new Date().getTime()&&(k=`skewX(${Math.round(R[g%R.length]*o)})`,Cb=setTimeout(bc,15,t,o,u,g+1)),t.getSvgRoot().setAttribute("transform",`${t.getTranslation()} ${k}`)},Hl=function(){Dd&&(Cb&&(clearTimeout(Cb),Cb=null),Dd.getSvgRoot().setAttribute("transform",Dd.getTranslation()),Dd=null)},$m=function(t,o){const u=t.workspace,g=n.config$$module$build$src$core$config.snapRadius,R=Ot.difference(o,t.getRelativeToSurfaceXY()),k=new Ot(0,0),ue=u.getAllBlocks(!1).filter(xe=>xe.id!=t.id).map(xe=>xe.getRelativeToSurfaceXY());for(;Rf(Ot.sum(o,k),ue)||pd(t,Ot.sum(R,k),g);)u.RTL?k.translate(-g,g*2):k.translate(g,g*2);t.moveTo(Ot.sum(o,k))},Rf=function(t,o){return o.some(u=>Math.abs(u.x-t.x)<=1&&Math.abs(u.y-t.y)<=1)},pd=function(t,o,u){return t.getConnections_(!1).some(g=>!!g.closest(u,o).connection)},Gl=function(t,o,u){const g=u.getBoundingRectangle(),R=g.right-g.left,k=$a(o.top,g.top,o.top+o.height-(g.bottom-g.top))-g.top;let ue=o.left;return o=o.left+o.width-R,t.RTL?ue=Math.min(o,ue):o=Math.max(ue,o),(t=$a(ue,g.left,o)-g.left)||k?(u.moveBy(t,k,["inbounds"]),!0):!1},xm=function(t){return o=>{var u=t.getMetricsManager();if(u.hasFixedEdges()&&!t.isDragging()){var g;if(ua.includes((g=o.type)!=null?g:"")){g=u.getScrollMetrics(!0);const R=md(t,o);R&&(u=n.getGroup$$module$build$src$core$events$utils()||!1,n.setGroup$$module$build$src$core$events$utils(o.group),Gl(t,g,R)&&!o.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),n.setGroup$$module$build$src$core$events$utils(u))}else ce(o)&&o.scale&&o.oldScale&&o.scale>o.oldScale&&gd(t)}}},md=function(t,o){let u=null;switch(o.type){case tt.BLOCK_CREATE:case tt.BLOCK_MOVE:(u=t.getBlockById(o.blockId))&&(u=u.getRootBlock());break;case tt.COMMENT_CREATE:case tt.COMMENT_MOVE:case tt.COMMENT_RESIZE:u=t.getCommentById(o.commentId)}return u},gd=function(t){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging()){o=o.getScrollMetrics(!0);var u=t.getTopBoundedElements();for(let g=0,R;R=u[g];g++)Gl(t,o,R)}},Oa=function(t){return t&&typeof t.isDeletable=="function"&&typeof t.dispose=="function"&&typeof t.setDeleteStyle=="function"},qp=function(t,o){const u=t.getIcons();for(const g of t.inputList){if(!g.isVisible())continue;u.push(...g.fieldRow);let R;if((R=g.connection)!=null&&R.targetBlock())if(t=g.connection.targetBlock(),g.connection.type!==un.NEXT_STATEMENT||o)u.push(t);else{let k;(t=(k=t.lastConnectionInStack(!1))==null?void 0:k.getSourceBlock())&&u.push(t)}else{let k;((k=g.connection)==null?void 0:k.type)===un.INPUT_VALUE&&u.push(g.connection)}}return u},Nu=function(t,o){const u=t.workspace.getTopBoundedElements(!0).filter(R=>Le(R));t=u.indexOf(t instanceof Zi?t.getRootBlock():t)+o;let g=null;if(t>=0&&t<u.length?g=u[t]:t<0?g=u[u.length-1]:t>=u.length&&(g=u[0]),o<0&&g instanceof Zi){let R,k;return(k=(R=g.lastConnectionInStack(!1))==null?void 0:R.getSourceBlock())!=null?k:g}return g},Br=function(t,o){var u;let g;const R=t instanceof Zi?(g=(u=t.outputConnection)==null?void 0:u.targetBlock())!=null?g:t.getSurroundParent():t.getSourceBlock();return!(R instanceof Zi)||(u=qp(R,o>0),t=u.indexOf(t),t===-1)?null:(o=t+o,o>=0&&o<u.length?u[o]:null)},jn=function(t){return t&&typeof t.getRelativeToSurfaceXY=="function"&&typeof t.isMovable=="function"&&typeof t.startDrag=="function"&&typeof t.drag=="function"&&typeof t.endDrag=="function"&&typeof t.revertDrag=="function"},Xi=function(t){return t&&typeof t.autoHide=="function"},Qs=function(t,o){i(Et.ICON,t.toString(),o)},Jp=function(t){a(Et.ICON,t)},Ho=function(t){return typeof t.getProcedureModel=="function"&&typeof t.doProcedureUpdate=="function"&&typeof t.isProcedureDef=="function"},zr=function(t){return t&&typeof t.startPublishing=="function"&&typeof t.stopPublishing=="function"},Hs=function(t){const o=t.getProcedureMap().getProcedures().filter(g=>!g.getReturnTypes()).map(g=>[g.getName(),g.getParameters().map(R=>R.getName()),!1]);t.getBlocksByType("procedures_defnoreturn",!1).forEach(g=>{!Ho(g)&&Ja(g)&&o.push(g.getProcedureDef())});const u=t.getProcedureMap().getProcedures().filter(g=>!!g.getReturnTypes()).map(g=>[g.getName(),g.getParameters().map(R=>R.getName()),!0]);return t.getBlocksByType("procedures_defreturn",!1).forEach(g=>{!Ho(g)&&Ja(g)&&u.push(g.getProcedureDef())}),o.sort(la),u.sort(la),[o,u]},la=function(t,o){return t[0].localeCompare(o[0],void 0,{sensitivity:"base"})},n.findLegalName$$module$build$src$core$procedures=function(t,o){if(o.isInFlyout)return t;for(t=t||n.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Vr(t,o.workspace,o);){const u=t.match(/^(.*?)(\d+)$/);t=u?u[1]+(parseInt(u[2])+1):t+"2"}return t},Vr=function(t,o,u){return!Cm(t,o,u)},Cm=function(t,o,u){for(const g of o.getAllBlocks(!1))if(g!==u&&Ja(g)&&n.Names$$module$build$src$core$names.equals(g.getProcedureDef()[0],t))return!0;u=u&&Ho(u)?u?.getProcedureModel():void 0;for(const g of o.getProcedureMap().getProcedures())if(g!==u&&n.Names$$module$build$src$core$names.equals(g.getName(),t))return!0;return!1},n.rename$$module$build$src$core$procedures=function(t){var o=this.getSourceBlock();if(!o)throw new rr;t=t.trim();const u=n.findLegalName$$module$build$src$core$procedures(t,o);Ho(o)&&!o.isInsertionMarker()&&o.getProcedureModel().setName(u);const g=this.getValue();if(g!==t&&g!==u)for(t=o.workspace.getAllBlocks(!1),o=0;o<t.length;o++){const R=t[o];R.renameProcedure&&R.renameProcedure(g,u)}return u},er=function(t){function o(k,ue){for(let St=0;St<k.length;St++){var xe=k[St][0];const bn=k[St][1],xr=n.createElement$$module$build$src$core$utils$xml("block");xr.setAttribute("type",ue),xr.setAttribute("gap","16");const Us=n.createElement$$module$build$src$core$utils$xml("mutation");for(Us.setAttribute("name",xe),xr.appendChild(Us),xe=0;xe<bn.length;xe++){const Ha=n.createElement$$module$build$src$core$utils$xml("arg");Ha.setAttribute("name",bn[xe]),Us.appendChild(Ha)}u.push(xr)}}const u=[];if(As.procedures_defnoreturn){var g=n.createElement$$module$build$src$core$utils$xml("block");g.setAttribute("type","procedures_defnoreturn"),g.setAttribute("gap","16");var R=n.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),R.appendChild(n.createTextNode$$module$build$src$core$utils$xml(n.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),g.appendChild(R),u.push(g)}return As.procedures_defreturn&&(g=n.createElement$$module$build$src$core$utils$xml("block"),g.setAttribute("type","procedures_defreturn"),g.setAttribute("gap","16"),R=n.createElement$$module$build$src$core$utils$xml("field"),R.setAttribute("name","NAME"),R.appendChild(n.createTextNode$$module$build$src$core$utils$xml(n.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),g.appendChild(R),u.push(g)),As.procedures_ifreturn&&(g=n.createElement$$module$build$src$core$utils$xml("block"),g.setAttribute("type","procedures_ifreturn"),g.setAttribute("gap","16"),u.push(g)),u.length&&u[u.length-1].setAttribute("gap","24"),t=Hs(t),o(t[0],"procedures_callnoreturn"),o(t[1],"procedures_callreturn"),u},kr=function(t){return zl(t,!1)},zl=function(t,o=!0){function u(R,k){for(const[ue,xe]of R)g.push({kind:"block",type:k,gap:16,extraState:{name:ue,params:xe}})}if(o)return vr("The XML return value of Blockly.Procedures.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),er(t);const g=[];return As.procedures_defnoreturn&&g.push({kind:"block",type:"procedures_defnoreturn",gap:16,fields:{NAME:n.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE}}),As.procedures_defreturn&&g.push({kind:"block",type:"procedures_defreturn",gap:16,fields:{NAME:n.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE}}),As.procedures_ifreturn&&g.push({kind:"block",type:"procedures_ifreturn",gap:16}),g.length&&(g[g.length-1].gap=24),t=Hs(t),u(t[0],"procedures_callnoreturn"),u(t[1],"procedures_callreturn"),g},Mm=function(t){var o=[],u=t.getBlocksByType("procedures_mutatorarg",!1);for(let k=0,ue;ue=u[k];k++)o.push(ue.getFieldValue("NAME"));u=n.createElement$$module$build$src$core$utils$xml("xml");const g=n.createElement$$module$build$src$core$utils$xml("block");g.setAttribute("type","procedures_mutatorarg");const R=n.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),o=Nl(n.DEFAULT_ARG$$module$build$src$core$procedures,o),o=n.createTextNode$$module$build$src$core$utils$xml(o),R.appendChild(o),g.appendChild(R),u.appendChild(g),t.updateToolbox(u)},Rm=function(t){if(te(t)&&t.bubbleType==="mutator"&&t.isOpen&&t.blockId){t=yt(t.workspaceId).getBlockById(t.blockId);var o=t.type;(o==="procedures_defnoreturn"||o==="procedures_defreturn")&&(t=t.getIcon(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Mm(t),t.addChangeListener(cb))}},cb=function(t){(Z(t)||Y(t)||j(t)||ne(t))&&(t=yt(t.workspaceId),Mm(t))},Zp=function(t,o){return o.getAllBlocks(!1).filter(u=>Qp(u,t)||om(u)&&n.Names$$module$build$src$core$names.equals(u.getProcedureCall(),t))},Qp=function(t,o){return Ho(t)&&!t.isProcedureDef()&&t.getProcedureModel()&&n.Names$$module$build$src$core$names.equals(t.getProcedureModel().getName(),o)},n.mutateCallers$$module$build$src$core$procedures=function(t){const o=pe();var u=t.getProcedureDef()[0];const g=t.mutationToDom(!0);t=Zp(u,t.workspace);for(let k=0,ue;ue=t[k];k++){u=(u=ue.mutationToDom())&&_t(u),ue.domToMutation&&ue.domToMutation(g);var R=ue.mutationToDom();R=R&&_t(R),u!==R&&(n.setRecordUndo$$module$build$src$core$events$utils(!1),K(new(Ke(tt.BLOCK_CHANGE))(ue,"mutation",null,u,R)),n.setRecordUndo$$module$build$src$core$events$utils(o))}},n.getDefinition$$module$build$src$core$procedures=function(t,o){for(const u of o.getAllBlocks(!1))if(Ho(u)&&u.isProcedureDef()&&n.Names$$module$build$src$core$names.equals(u.getProcedureModel().getName(),t)||Ja(u)&&n.Names$$module$build$src$core$names.equals(u.getProcedureDef()[0],t))return u;return null},wf=function(t){return t.isDynamic},vo=function(t){return t.pathDown!==void 0&&t.pathUp!==void 0},cr=function(t){return t.pathLeft!==void 0&&t.pathRight!==void 0},cl=function(t,o){i(Et.RENDERER,t,o)},hl=function(t){a(Et.RENDERER,t)},If=function(t,o,u){return t=new(f(Et.RENDERER,t))(t),t.init(o,u),t},Of=function(t){Qa(t.getTargetWorkspace(),void 0,"String")},dl=function(t){Qa(t.getTargetWorkspace(),void 0,"Number")},Vl=function(t){Qa(t.getTargetWorkspace(),void 0,"Colour")},Nf=function(t){return e0(t,!1)},e0=function(t,o=!0){return As.variables_set_dynamic||As.variables_get_dynamic||console.warn("There are no dynamic variable blocks, but there is a dynamic variable category."),o?(vr("The XML return value of Blockly.VariablesDynamic.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),f_(t)):(t.registerButtonCallback("CREATE_VARIABLE_STRING",Of),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",dl),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",Vl),[{kind:"button",text:n.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE,callbackkey:"CREATE_VARIABLE_STRING"},{kind:"button",text:n.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE,callbackkey:"CREATE_VARIABLE_NUMBER"},{kind:"button",text:n.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE,callbackkey:"CREATE_VARIABLE_COLOUR"},...oc(t,t.getVariableMap().getAllVariables(),!1,"variables_get_dynamic","variables_set_dynamic")])},f_=function(t){let o=[],u=document.createElement("button");return u.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),o.push(u),u=document.createElement("button"),u.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),o.push(u),u=document.createElement("button"),u.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),o.push(u),t.registerButtonCallback("CREATE_VARIABLE_STRING",Of),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",dl),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",Vl),t=oh(t),o=o.concat(t)},oh=function(t){t=t.getVariableMap().getAllVariables();const o=[];if(t.length>0){if(As.variables_set_dynamic){var u=t[t.length-1];const g=n.createElement$$module$build$src$core$utils$xml("block");g.setAttribute("type","variables_set_dynamic"),g.setAttribute("gap","24"),g.appendChild(No(u)),o.push(g)}if(As.variables_get_dynamic){t.sort(Ll);for(let g=0,R;R=t[g];g++)u=n.createElement$$module$build$src$core$utils$xml("block"),u.setAttribute("type","variables_get_dynamic"),u.setAttribute("gap","8"),u.appendChild(No(R)),o.push(u)}}return o},t0=function(t,o){const u=t.toCopyData();return jT=u,YT=Xe(t)&&t.workspace instanceof Sl?t.workspace:null,RA=o,u},n0=function(){return jT},p_=function(t){jT=t},i0=function(){return YT},wm=function(t){YT=t},Im=function(){return RA},hb=function(t){RA=t},yc=function(t,o,u){return t&&o?Om(t,o,u):jT&&YT?Om(jT,YT,RA):null},Om=function(t,o,u){let g;o=o.isMutator?o:(g=o.options.parentWorkspace)!=null?g:o;let R,k;return(k=(R=p(Et.PASTER,t.paster,!1))==null?void 0:R.paste(t,o,u))!=null?k:null},Lf=function(t){return t&&typeof t.toCopyData=="function"},s0=function(){Ii.registry.register({name:Kf.ESCAPE,preconditionFn(t){return!t.isReadOnly()},callback(t){return t.hideChaff(),!0},keyCodes:[ds.ESC]})},Nm=function(){Ii.registry.register({name:Kf.DELETE,preconditionFn(t,o){return o=o.focusedNode,!t.isReadOnly()&&o!=null&&Oa(o)&&o.isDeletable()&&!t.isDragging()&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(t,o,u,g){return o.preventDefault(),t=g.focusedNode,t instanceof Zi?t.checkAndDelete():Oa(t)&&t.isDeletable()&&(n.setGroup$$module$build$src$core$events$utils(!0),t.dispose(),n.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[ds.DELETE,ds.BACKSPACE]})},Df=function(t){return Lf(t)&&Oa(t)&&jn(t)?t.isCopyable?t.isCopyable():t instanceof Zi||t instanceof vh?t.isOwnDeletable()&&t.isOwnMovable():t.isDeletable()&&t.isMovable():!1},Lm=function(t){return Df(t)&&Oa(t)&&t.isDeletable()},Dm=function(){const t=Ii.registry.createSerializedKey(ds.C,[ds.CTRL]),o=Ii.registry.createSerializedKey(ds.C,[ds.META]);Ii.registry.register({name:Kf.COPY,preconditionFn(u,g){return g=g.focusedNode,u=u.isFlyout?u.targetWorkspace:u,!!g&&!!u&&!u.isDragging()&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Df(g)},callback(u,g,R,k){return g.preventDefault(),g=k.focusedNode,!g||!Lf(g)||!Df(g)||(u=u.isFlyout?u.targetWorkspace:u,!u)?!1:(g.workspace.isFlyout||u.hideChaff(),u=jn(g)&&g.workspace==u?g.getRelativeToSurfaceXY():void 0,!!t0(g,u))},keyCodes:[t,o]})},Bm=function(){const t=Ii.registry.createSerializedKey(ds.X,[ds.CTRL]),o=Ii.registry.createSerializedKey(ds.X,[ds.META]);Ii.registry.register({name:Kf.CUT,preconditionFn(u,g){return g=g.focusedNode,!!g&&!u.isReadOnly()&&!u.isDragging()&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Lm(g)},callback(u,g,R,k){return u=k.focusedNode,!u||!Lm(u)||!Lf(u)?!1:(g=jn(u)?u.getRelativeToSurfaceXY():void 0,g=t0(u,g),u instanceof Zi?u.checkAndDelete():Oa(u)&&u.dispose(),!!g)},keyCodes:[t,o]})},m_=function(){const t=Ii.registry.createSerializedKey(ds.V,[ds.CTRL]),o=Ii.registry.createSerializedKey(ds.V,[ds.META]);Ii.registry.register({name:Kf.PASTE,preconditionFn(){var u=i0();return!u||!u.rendered?!1:(u=u.isFlyout?u.targetWorkspace:u,!!n0()&&!!u&&!u.isReadOnly()&&!u.isDragging()&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken())},callback(u,g){if(u=n0(),!u)return!1;var R=i0();if(!R||(R=R.isFlyout?R.targetWorkspace:R,!R||R.isReadOnly()))return!1;if(g instanceof PointerEvent)return g=Ue(R,new Ot(g.clientX,g.clientY)),!!yc(u,R,g);if(g=Im(),!g)return!!yc(u,R);const{left:k,top:ue,width:xe,height:St}=R.getMetricsManager().getViewMetrics(!0);return new pn(ue,ue+St,k,k+xe).contains(g.x,g.y)?!!yc(u,R):(g=new Ot(k+xe/2,ue+St/2),!!yc(u,R,g))},keyCodes:[t,o]})},km=function(){const t=Ii.registry.createSerializedKey(ds.Z,[ds.CTRL]),o=Ii.registry.createSerializedKey(ds.Z,[ds.META]);Ii.registry.register({name:Kf.UNDO,preconditionFn(u){return!u.isReadOnly()&&!u.isDragging()&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(u,g){return u.hideChaff(),u.undo(!1),g.preventDefault(),!0},keyCodes:[t,o]})},ah=function(){const t=Ii.registry.createSerializedKey(ds.Z,[ds.CTRL,ds.SHIFT]),o=Ii.registry.createSerializedKey(ds.Z,[ds.META,ds.SHIFT]),u=Ii.registry.createSerializedKey(ds.Y,[ds.CTRL]);Ii.registry.register({name:Kf.REDO,preconditionFn(g){return!g.isDragging()&&!g.isReadOnly()&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(g,R){return g.hideChaff(),g.undo(!0),R.preventDefault(),!0},keyCodes:[t,o,u]})},_d=function(){s0(),Nm(),Dm(),Bm(),m_(),km(),ah()},r0=function(t){const o=t.saveState();return t.getParameters().length&&(o.parameters=t.getParameters().map(u=>u.saveState())),o},Bf=function(t,o,u,g){if(t=t.loadState(u,g),!u.parameters)return t;for(const[R,k]of u.parameters.entries())t.insertParameter(o.loadState(k,g),R);return t},vd=function(t){const o=Object.create(null),u=v(Et.SERIALIZER,!0);for(const g in u){let R;const k=(R=u[g])==null?void 0:R.save(t);k&&(o[g]=k)}return o},Pm=function(t,o,{recordUndo:u=!1}={}){var g=v(Et.SERIALIZER,!0);if(g){g=Object.entries(g).sort((k,ue)=>ue[1].priority-k[1].priority);var R=pe();n.setRecordUndo$$module$build$src$core$events$utils(u),(u=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),Qe(),o instanceof Sl&&o.setResizesEnabled(!1);for(const[,k]of g.reverse()){let ue;(ue=k)==null||ue.clear(o)}for(const[k,ue]of g.reverse())if(t[k]){let xe;(xe=ue)==null||xe.load(t[k],o)}o instanceof Sl&&o.setResizesEnabled(!0),vt(),K(new(Ke(tt.FINISHED_LOADING))(o)),n.setGroup$$module$build$src$core$events$utils(u),n.setRecordUndo$$module$build$src$core$events$utils(R)}},Um=function(t,o){let u=null;u=typeof t=="string"?document.getElementById(t)||document.querySelector(t):t;var g;if(!document.contains(u)&&document!==((g=u)==null?void 0:g.ownerDocument))throw Error("Error: container is not in current document");t=new bh(o||{}),g=document.createElement("div"),Ye(g,"injectionDiv"),o!=null&&o.rtl&&Ye(g,"blocklyRTL"),u.appendChild(g),o=o0(g,t);const R=a0(g,o,t);return g_(R),oe(R),Ze(R),g.addEventListener("focusin",function(){oe(R)}),w(g,"keydown",null,Xt),R},o0=function(t,o){t.setAttribute("dir","LTR"),xn(o.hasCss,o.pathToMedia);const u=Re(qe.SVG,{xmlns:hi,"xmlns:html":fr,"xmlns:xlink":qi,version:"1.1",class:"blocklySvg"},t),g=Re(qe.DEFS,{},u),R=String(Math.random()).substring(2);return o.gridPattern=zT.createDom(R,o.gridOptions,g,t),u},a0=function(t,o,u){u.parentWorkspace=null,u=new Sl(u);const g=u.options;u.scale=g.zoomOptions.startScale,o.appendChild(u.createDom("blocklyMainBackground",t));var R=u.getRenderer().getClassName();return R&&Ye(t,R),(R=u.getTheme().getClassName())&&Ye(t,R),!g.hasCategories&&g.languageTree&&(t=u.addFlyout(qe.SVG),Ie(t,o)),g.hasTrashcan&&u.addTrashcan(),g.zoomOptions&&g.zoomOptions.controls&&u.addZoomControls(),u.getThemeManager().subscribe(o,"workspaceBackgroundColour","background-color"),u.translate(0,0),u.addChangeListener(xm(u)),Ze(u),bf(),el(),Gp(),u},g_=function(t){const o=t.options;var u=t.getParentSvg();if(w(u.parentNode,"contextmenu",null,function(g){P(g)||g.preventDefault()}),u=w(window,"resize",null,function(){nl(),t.hideComponents(!0),mf(),Mu(),Ze(t),gd(t)}),t.setResizeHandlerWrapper(u),__(),o.languageTree){u=t.getToolbox();const g=t.getFlyout(!0);u?u.init():g&&(g.init(t),g.show(o.languageTree),typeof g.scrollToStart=="function"&&g.scrollToStart())}o.hasTrashcan&&t.trashcan.init(),o.zoomOptions&&o.zoomOptions.controls&&t.zoomControls_.init(),o.moveOptions&&o.moveOptions.scrollbars?(t.scrollbar=new cg(t,o.moveOptions.scrollbars===!0||!!o.moveOptions.scrollbars.horizontal,o.moveOptions.scrollbars===!0||!!o.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),o.hasSounds&&Fm(o.pathToMedia,t)},__=function(){ML||(w(document,"scroll",null,function(){const t=bt();for(let o=0,u;u=t[o];o++)u instanceof Sl&&u.updateInverseScreenCTM()}),I(document,"touchend",null,S),I(document,"touchcancel",null,S)),ML=!0},Fm=function(t,o){function u(){for(;R.length;){const k=R.pop();k&&O(k)}g.preload()}const g=o.getAudioManager();g.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),g.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),g.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");const R=[];R.push(w(document,"pointermove",null,u,!0)),R.push(w(document,"touchstart",null,u,!0))},Hm=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.UNDO},preconditionFn(t){return t.workspace.getUndoStack().length>0?"enabled":"disabled"},callback(t){t.workspace.undo(!1)},scopeType:oi.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},l0=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.REDO},preconditionFn(t){return t.workspace.getRedoStack().length>0?"enabled":"disabled"},callback(t){t.workspace.undo(!0)},scopeType:oi.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},kf=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(t){return t.workspace.isMovable()?t.workspace.getTopBlocks(!1).length>1?"enabled":"disabled":"hidden"},callback(t){t.workspace.cleanUp()},scopeType:oi.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Gm=function(t,o){function u(k){R--,k.setCollapsed(t),R===0&&n.setGroup$$module$build$src$core$events$utils(!1)}let g=0,R=0;n.setGroup$$module$build$src$core$events$utils(!0);for(let k=0;k<o.length;k++){let ue=o[k];for(;ue;)R++,setTimeout(u.bind(null,ue),g),ue=ue.getNextBlock(),g+=10}},zm=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(let o=0;o<t.length;o++){let u=t[o];for(;u;){if(!u.isCollapsed())return"enabled";u=u.getNextBlock()}}return"disabled"}return"hidden"},callback(t){Gm(!0,t.workspace.getTopBlocks(!0))},scopeType:oi.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},v_=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(let o=0;o<t.length;o++){let u=t[o];for(;u;){if(u.isCollapsed())return"enabled";u=u.getNextBlock()}}return"disabled"}return"hidden"},callback(t){Gm(!1,t.workspace.getTopBlocks(!0))},scopeType:oi.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},u0=function(t,o){if(t.isDeletable())Array.prototype.push.apply(o,t.getDescendants(!1));else{t=t.getChildren(!1);for(let u=0;u<t.length;u++)u0(t[u],o)}},c0=function(t){const o=[];t=t.getTopBlocks(!0);for(let u=0;u<t.length;u++)u0(t[u],o);return o},Pf=function(t,o){o?n.setGroup$$module$build$src$core$events$utils(o):(n.setGroup$$module$build$src$core$events$utils(!0),o=n.getGroup$$module$build$src$core$events$utils());const u=t.shift();u&&(u.isDeadOrDying()?Pf(t,o):(u.dispose(!1,!0),setTimeout(Pf,10,t,o))),n.setGroup$$module$build$src$core$events$utils(!1)},h0=function(){oi.registry.register({displayText(t){return t.workspace?(t=c0(t.workspace).length,t===1?n.Msg$$module$build$src$core$msg.DELETE_BLOCK:n.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${t}`)):""},preconditionFn(t){return t.workspace&&c0(t.workspace).length>0?"enabled":"disabled"},callback(t){if(t.workspace){t.workspace.cancelCurrentGesture();var o=c0(t.workspace);o.length<2?Pf(o):cf(n.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(o.length)),function(u){u&&Pf(o)})}},scopeType:oi.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},b_=function(){Hm(),l0(),kf(),zm(),v_(),h0()},Vm=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback(t){if(t.block){var o=t.block.toCopyData();o&&yc(o,t.block.workspace)}},scopeType:oi.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},y_=function(){oi.registry.register({displayText(t){return t.block.hasIcon(Oe.TYPE)?n.Msg$$module$build$src$core$msg.REMOVE_COMMENT:n.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.workspace.options.comments&&!t.isCollapsed()&&t.isEditable()?"enabled":"hidden"},callback(t){t=t.block,t.hasIcon(Oe.TYPE)?t.setCommentText(null):t.setCommentText("")},scopeType:oi.ScopeType.BLOCK,id:"blockComment",weight:2})},T_=function(){oi.registry.register({displayText(t){return t.block.getInputsInline()?n.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:n.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(t){if(t=t.block,!t.isInFlyout&&t.isMovable()&&!t.isCollapsed()){for(let o=1;o<t.inputList.length;o++)if(!(t.inputList[o-1]instanceof IA||t.inputList[o]instanceof IA))return"enabled"}return"hidden"},callback(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:oi.ScopeType.BLOCK,id:"blockInline",weight:3})},Wm=function(){oi.registry.register({displayText(t){return t.block.isCollapsed()?n.Msg$$module$build$src$core$msg.EXPAND_BLOCK:n.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(t){return t=t.block,!t.isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:oi.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},bd=function(){oi.registry.register({displayText(t){return t.block.hasDisabledReason(Vs)?n.Msg$$module$build$src$core$msg.ENABLE_BLOCK:n.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(t){if(t=t.block,!t.isInFlyout&&t.workspace.options.disable&&t.isEditable()){var o=t.getDisabledReasons();return o=o.size>(o.has(Vs)?1:0),t.getInheritedDisabled()||o?"disabled":"enabled"}return"hidden"},callback(t){t=t.block;const o=n.getGroup$$module$build$src$core$events$utils();o||n.setGroup$$module$build$src$core$events$utils(!0),t.setDisabledReason(!t.hasDisabledReason(Vs),Vs),n.setGroup$$module$build$src$core$events$utils(o)},scopeType:oi.ScopeType.BLOCK,id:"blockDisable",weight:5})},Uf=function(){oi.registry.register({displayText(t){var o=t.block;return t=o.getDescendants(!1).length,(o=o.getNextBlock())&&(t-=o.getDescendants(!1).length),t===1?n.Msg$$module$build$src$core$msg.DELETE_BLOCK:n.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${t}`)},preconditionFn(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback(t){t.block&&t.block.checkAndDelete()},scopeType:oi.ScopeType.BLOCK,id:"blockDelete",weight:6})},Ff=function(){oi.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.HELP},preconditionFn(t){return t=t.block,(typeof t.helpUrl=="function"?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback(t){t.block.showHelp()},scopeType:oi.ScopeType.BLOCK,id:"blockHelp",weight:7})},Xm=function(){oi.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(t){let o;return(o=t.comment)!=null&&o.isDeletable()?"enabled":"hidden"},callback(t){n.setGroup$$module$build$src$core$events$utils(!0);let o;(o=t.comment)==null||o.dispose(),n.setGroup$$module$build$src$core$events$utils(!1)},scopeType:oi.ScopeType.COMMENT,id:"commentDelete",weight:6})},Go=function(){oi.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(t){let o;return(o=t.comment)!=null&&o.isMovable()?"enabled":"hidden"},callback(t){if(t.comment){var o=t.comment.toCopyData();o&&yc(o,t.comment.workspace)}},scopeType:oi.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},yd=function(){oi.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:t=>{let o;return(o=t.workspace)!=null&&o.isMutator?"hidden":"enabled"},callback:(t,o,u,g)=>{(t=t.workspace)&&(n.setGroup$$module$build$src$core$events$utils(!0),o=new vh(t),o.setPlaceholderText(n.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),o.moveTo(d0(new Ot(g.x,g.y),t)),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(o),n.setGroup$$module$build$src$core$events$utils(!1))},scopeType:oi.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},d0=function(t,o){var u=o.getInjectionDiv().getBoundingClientRect();return t=new Ot(t.x-u.left,t.y-u.top),u=o.getOriginOffsetInPixels(),t=Ot.difference(t,u),t.scale(1/o.scale),t},jm=function(){Vm(),y_(),T_(),Wm(),bd(),Uf(),Ff()},E_=function(){Go(),Xm(),yd()},Tc=function(){b_(),jm()},Hf=function(t){return t&&typeof t.paste=="function"},Gf=function(t){return t&&typeof t.getSvgRoot=="function"},Td=function(t){return t.isSelectable()},f0=function(t){H().hideChaff(t)},ut=ut||{},ut.scope={},ut.ASSUME_ES5=!1,ut.ASSUME_ES6=!1,ut.ASSUME_ES2020=!1,ut.ASSUME_NO_NATIVE_MAP=!1,ut.ASSUME_NO_NATIVE_SET=!1,ut.ISOLATE_POLYFILLS=!1,ut.FORCE_POLYFILL_PROMISE=!1,ut.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,ut.INSTRUMENT_ASYNC_CONTEXT=!0,ut.objectCreate=ut.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(t){var o=function(){};return o.prototype=t,new o},ut.defineProperty=ut.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(t,o,u){return t==Array.prototype||t==Object.prototype||(t[o]=u.value),t},ut.getGlobal=function(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof ED=="object"&&ED];for(var o=0;o<t.length;++o){var u=t[o];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")},ut.global=ut.ASSUME_ES2020?globalThis:ut.getGlobal(this),ut.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",ut.TRUST_ES6_POLYFILLS=!ut.ISOLATE_POLYFILLS||ut.IS_SYMBOL_NATIVE,ut.polyfills={},ut.propertyToPolyfillSymbol={},ut.POLYFILL_PREFIX="$jscp$",ut.polyfill=function(t,o,u,g){o&&(ut.ISOLATE_POLYFILLS?ut.polyfillIsolated(t,o,u,g):ut.polyfillUnisolated(t,o,u,g))},ut.polyfillUnisolated=function(t,o,u,g){for(u=ut.global,t=t.split("."),g=0;g<t.length-1;g++){var R=t[g];if(!(R in u))return;u=u[R]}t=t[t.length-1],g=u[t],o=o(g),o!=g&&o!=null&&ut.defineProperty(u,t,{configurable:!0,writable:!0,value:o})},ut.polyfillIsolated=function(t,o,u,g){var R=t.split(".");t=R.length===1,g=R[0],g=!t&&g in ut.polyfills?ut.polyfills:ut.global;for(var k=0;k<R.length-1;k++){var ue=R[k];if(!(ue in g))return;g=g[ue]}R=R[R.length-1],u=ut.IS_SYMBOL_NATIVE&&u==="es6"?g[R]:null,o=o(u),o!=null&&(t?ut.defineProperty(ut.polyfills,R,{configurable:!0,writable:!0,value:o}):o!==u&&(ut.propertyToPolyfillSymbol[R]===void 0&&(u=Math.random()*1e9>>>0,ut.propertyToPolyfillSymbol[R]=ut.IS_SYMBOL_NATIVE?ut.global.Symbol(R):ut.POLYFILL_PREFIX+u+"$"+R),ut.defineProperty(g,ut.propertyToPolyfillSymbol[R],{configurable:!0,writable:!0,value:o})))},ut.getConstructImplementation=function(){function t(){function u(){}return Reflect.construct(u,[],function(){}),new u instanceof u}if(ut.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(t())return Reflect.construct;var o=Reflect.construct;return function(u,g,R){return u=o(u,g),R&&Reflect.setPrototypeOf(u,R.prototype),u}}return function(u,g,R){return R===void 0&&(R=u),R=ut.objectCreate(R.prototype||Object.prototype),Function.prototype.apply.call(u,R,g)||R}},ut.construct={valueOf:ut.getConstructImplementation}.valueOf(),ut.underscoreProtoCanBeSet=function(){var t={a:!0},o={};try{return o.__proto__=t,o.a}catch{}return!1},ut.setPrototypeOf=ut.ASSUME_ES6||ut.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:ut.underscoreProtoCanBeSet()?function(t,o){if(t.__proto__=o,t.__proto__!==o)throw new TypeError(t+" is not extensible");return t}:null,ut.inherits=function(t,o){if(t.prototype=ut.objectCreate(o.prototype),t.prototype.constructor=t,ut.ASSUME_ES6||ut.setPrototypeOf){var u=ut.setPrototypeOf;u(t,o)}else for(u in o)if(u!="prototype")if(Object.defineProperties){var g=Object.getOwnPropertyDescriptor(o,u);g&&Object.defineProperty(t,u,g)}else t[u]=o[u];t.superClass_=o.prototype},ut.arrayIteratorImpl=function(t){var o=0;return function(){return o<t.length?{done:!1,value:t[o++]}:{done:!0}}},ut.arrayIterator=function(t){return{next:ut.arrayIteratorImpl(t)}},ut.makeIterator=function(t){var o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(o)return o.call(t);if(typeof t.length=="number")return ut.arrayIterator(t);throw Error(String(t)+" is not an iterable or ArrayLike")},ut.arrayFromIterator=function(t){for(var o,u=[];!(o=t.next()).done;)u.push(o.value);return u},ut.arrayFromIterable=function(t){return t instanceof Array?t:ut.arrayFromIterator(ut.makeIterator(t))},ut.generator={},ut.generator.ensureIteratorResultIsObject_=function(t){if(!(t instanceof Object))throw new TypeError("Iterator result "+t+" is not an object")},ut.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},ut.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},ut.generator.Context.prototype.stop_=function(){this.isRunning_=!1},ut.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},ut.generator.Context.prototype.next_=function(t){this.yieldResult=t},ut.generator.Context.prototype.throw_=function(t){this.abruptCompletion_={exception:t,isException:!0},this.jumpToErrorHandler_()},ut.generator.Context.prototype.return=function(t){this.abruptCompletion_={return:t},this.nextAddress=this.finallyAddress_},ut.generator.Context.prototype.jumpThroughFinallyBlocks=function(t){this.abruptCompletion_={jumpTo:t},this.nextAddress=this.finallyAddress_},ut.generator.Context.prototype.yield=function(t,o){return this.nextAddress=o,{value:t}},ut.generator.Context.prototype.yieldAll=function(t,o){t=ut.makeIterator(t);var u=t.next();if(ut.generator.ensureIteratorResultIsObject_(u),u.done)this.yieldResult=u.value,this.nextAddress=o;else return this.yieldAllIterator_=t,this.yield(u.value,o)},ut.generator.Context.prototype.jumpTo=function(t){this.nextAddress=t},ut.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},ut.generator.Context.prototype.setCatchFinallyBlocks=function(t,o){this.catchAddress_=t,o!=null&&(this.finallyAddress_=o)},ut.generator.Context.prototype.setFinallyBlock=function(t){this.catchAddress_=0,this.finallyAddress_=t||0},ut.generator.Context.prototype.leaveTryBlock=function(t,o){this.nextAddress=t,this.catchAddress_=o||0},ut.generator.Context.prototype.enterCatchBlock=function(t){return this.catchAddress_=t||0,t=this.abruptCompletion_.exception,this.abruptCompletion_=null,t},ut.generator.Context.prototype.enterFinallyBlock=function(t,o,u){u?this.finallyContexts_[u]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=t||0,this.finallyAddress_=o||0},ut.generator.Context.prototype.leaveFinallyBlock=function(t,o){if(o=this.finallyContexts_.splice(o||0)[0],o=this.abruptCompletion_=this.abruptCompletion_||o){if(o.isException)return this.jumpToErrorHandler_();o.jumpTo!=null&&this.finallyAddress_<o.jumpTo?(this.nextAddress=o.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=t},ut.generator.Context.prototype.forIn=function(t){return new ut.generator.Context.PropertyIterator(t)},ut.generator.Context.PropertyIterator=function(t){this.object_=t,this.properties_=[];for(var o in t)this.properties_.push(o);this.properties_.reverse()},ut.generator.Context.PropertyIterator.prototype.getNext=function(){for(;this.properties_.length>0;){var t=this.properties_.pop();if(t in this.object_)return t}return null},ut.generator.Engine_=function(t){this.context_=new ut.generator.Context,this.program_=t},ut.generator.Engine_.prototype.next_=function(t){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,t,this.context_.next_):(this.context_.next_(t),this.nextStep_())},ut.generator.Engine_.prototype.return_=function(t){this.context_.start_();var o=this.context_.yieldAllIterator_;return o?this.yieldAllStep_("return"in o?o.return:function(u){return{value:u,done:!0}},t,this.context_.return):(this.context_.return(t),this.nextStep_())},ut.generator.Engine_.prototype.throw_=function(t){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,t,this.context_.next_):(this.context_.throw_(t),this.nextStep_())},ut.generator.Engine_.prototype.yieldAllStep_=function(t,o,u){try{var g=t.call(this.context_.yieldAllIterator_,o);if(ut.generator.ensureIteratorResultIsObject_(g),!g.done)return this.context_.stop_(),g;var R=g.value}catch(k){return this.context_.yieldAllIterator_=null,this.context_.throw_(k),this.nextStep_()}return this.context_.yieldAllIterator_=null,u.call(this.context_,R),this.nextStep_()},ut.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var t=this.program_(this.context_);if(t)return this.context_.stop_(),{value:t.value,done:!1}}catch(o){this.context_.yieldResult=void 0,this.context_.throw_(o)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(t=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,t.isException)throw t.exception;return{value:t.return,done:!0}}return{value:void 0,done:!0}},ut.generator.Generator_=function(t){this.next=function(o){return t.next_(o)},this.throw=function(o){return t.throw_(o)},this.return=function(o){return t.return_(o)},this[Symbol.iterator]=function(){return this}},ut.generator.createGenerator=function(t,o){return o=new ut.generator.Generator_(new ut.generator.Engine_(o)),ut.setPrototypeOf&&t.prototype&&ut.setPrototypeOf(o,t.prototype),o},ut.asyncExecutePromiseGenerator=function(t){function o(g){return t.next(g)}function u(g){return t.throw(g)}return new Promise(function(g,R){function k(ue){ue.done?g(ue.value):Promise.resolve(ue.value).then(o,u).then(k,R)}k(t.next())})},ut.asyncExecutePromiseGeneratorFunction=function(t){return ut.asyncExecutePromiseGenerator(t())},ut.asyncExecutePromiseGeneratorProgram=function(t){return ut.asyncExecutePromiseGenerator(new ut.generator.Generator_(new ut.generator.Engine_(t)))},ut.polyfill("globalThis",function(t){return t||ut.global},"es_2020","es3"),ut.polyfill("Array.prototype.includes",function(t){return t||function(o,u){var g=this;g instanceof String&&(g=String(g));var R=g.length;for(u=u||0,u<0&&(u=Math.max(u+R,0));u<R;u++){var k=g[u];if(k===o||Object.is(k,o))return!0}return!1}},"es7","es3"),ut.checkEs6ConformanceViaProxy=function(){try{var t={},o=Object.create(new ut.global.Proxy(t,{get:function(u,g,R){return u==t&&g=="q"&&R==o}}));return o.q===!0}catch{return!1}},ut.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,ut.ES6_CONFORMANCE=ut.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&ut.checkEs6ConformanceViaProxy(),ut.initSymbol=function(){},ut.iteratorPrototype=function(t){return t={next:t},t[Symbol.iterator]=function(){return this},t},ut.owns=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},ut.MapEntry=function(){},ut.polyfill("Set.prototype.difference",function(t){return t||function(o){ut.checkIsSetInstance(this),ut.checkIsSetLike(o);var u=ut.getSmallerAndLargerSets(this,o);o=new Set(this);var g=u.smallerSetIterator;u=u.largerSet;for(var R=g.next();!R.done;)u.has(R.value)&&o.delete(R.value),R=g.next();return o}},"es_next","es6"),ut.checkIsSetLike=function(t){if(typeof t!="object"||t===null||typeof t.size!="number"||t.size<0||typeof t.keys!="function"||typeof t.has!="function")throw new TypeError("Argument must be set-like")},ut.checkIsValidIterator=function(t){if(typeof t!="object"||t===null||typeof t.next!="function")throw new TypeError("Invalid iterator.");return t},ut.getSmallerAndLargerSets=function(t,o){return t.size<=o.size?{smallerSetIterator:t.keys(),largerSet:o}:{smallerSetIterator:ut.checkIsValidIterator(o.keys()),largerSet:t}},ut.checkIsSetInstance=function(t){if(!(t instanceof Set))throw new TypeError("Method must be called on an instance of Set.")},ut.iteratorFromArray=function(t,o){if(ut.ASSUME_ES6)return t[Symbol.iterator]();t instanceof String&&(t+="");var u=0,g=!1,R={next:function(){if(!g&&u<t.length){var k=u++;return{value:o(k,t[k]),done:!1}}return g=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R},ut.polyfill("Array.prototype.values",function(t){return t||function(){return ut.iteratorFromArray(this,function(o,u){return u})}},"es8","es3"),ut.polyfill("Array.prototype.flatMap",function(t){return t||function(o,u){var g=[];return Array.prototype.forEach.call(this,function(R,k){R=o.call(u,R,k,this),Array.isArray(R)?g.push.apply(g,R):g.push(R)}),g}},"es9","es5"),ut.polyfill("Array.prototype.flat",function(t){return t||function(o){o=o===void 0?1:o;var u=[];return Array.prototype.forEach.call(this,function(g){Array.isArray(g)&&o>0?(g=Array.prototype.flat.call(g,o-1),u.push.apply(u,g)):u.push(g)}),u}},"es9","es5"),ut.polyfill("Object.entries",function(t){return t||function(o){var u=[],g;for(g in o)ut.owns(o,g)&&u.push([g,o[g]]);return u}},"es8","es3"),ut.polyfill("Object.values",function(t){return t||function(o){var u=[],g;for(g in o)ut.owns(o,g)&&u.push(o[g]);return u}},"es8","es3");var Ec=Object.create(null),Ed={typeMap:Ec},p0=Object.create(null),ri="default",Et=class{constructor(t){this.name=t}toString(){return this.name}};Et.CONNECTION_CHECKER=new Et("connectionChecker"),Et.CONNECTION_PREVIEWER=new Et("connectionPreviewer"),Et.CURSOR=new Et("cursor"),Et.EVENT=new Et("event"),Et.FIELD=new Et("field"),Et.INPUT=new Et("input"),Et.RENDERER=new Et("renderer"),Et.TOOLBOX=new Et("toolbox"),Et.THEME=new Et("theme"),Et.TOOLBOX_ITEM=new Et("toolboxItem"),Et.FLYOUTS_VERTICAL_TOOLBOX=new Et("flyoutsVerticalToolbox"),Et.FLYOUTS_HORIZONTAL_TOOLBOX=new Et("flyoutsHorizontalToolbox"),Et.FLYOUT_INFLATER=new Et("flyoutInflater"),Et.METRICS_MANAGER=new Et("metricsManager"),Et.BLOCK_DRAGGER=new Et("blockDragger"),Et.SERIALIZER=new Et("serializer"),Et.ICON=new Et("icon"),Et.PASTER=new Et("paster"),Et.VARIABLE_MODEL=new Et("variableModel"),Et.VARIABLE_MAP=new Et("variableMap");var bo={DEFAULT:ri,TEST_ONLY:Ed};bo.Type=Et,bo.getAllItems=v,bo.getClass=f,bo.getClassFromOptions=T,bo.getObject=p,bo.hasItem=h,bo.register=i,bo.unregister=a;var As=Object.create(null),lh=750,Wl="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),ks=null,zo={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Xl=0,hr={TOUCH_ENABLED:Wl,TOUCH_MAP:zo};hr.checkTouchIdentifier=E,hr.clearTouchIdentifier=$,hr.getTouchIdentifierFromEvent=C,hr.longStart=y,hr.longStop=S,hr.shouldHandleEvent=M;var Ym,S_,jl,uh,ch,Sd,Km,m0,Na,g0;(function(t){function o(g){return u.includes(g.toUpperCase())}Ym=t;const u=Ym.toUpperCase();S_=o("JavaFX"),jl=o("WebKit"),uh=o("Gecko")&&!jl,ch=o("Android"),t=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Sd=o("iPad")||o("Macintosh")&&t>0,Km=o("iPhone")&&!Sd,m0=o("Macintosh"),Na=Sd||ch&&!o("Mobile")||o("Silk"),g0=!Na&&(Km||ch)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var db=Ym,_0=S_,fb=uh,qm=ch,dr=Sd,tr=Km,yo=m0,Vo=g0,A_={ANDROID:qm,GECKO:fb,IPAD:dr,IPHONE:tr,JavaFx:_0,MAC:yo,MOBILE:Vo,raw:db},hh=40,dh=125,Wo={};Wo.bind=I,Wo.conditionalBind=w,Wo.getScrollDeltaPixels=X,Wo.isRightButton=F,Wo.isTargetInput=P,Wo.mouseToSvg=V,Wo.unbind=O;var tt;(function(t){t.BLOCK_CREATE="create",t.BLOCK_DELETE="delete",t.BLOCK_CHANGE="change",t.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",t.BLOCK_MOVE="move",t.VAR_CREATE="var_create",t.VAR_DELETE="var_delete",t.VAR_RENAME="var_rename",t.VAR_TYPE_CHANGE="var_type_change",t.UI="ui",t.BLOCK_DRAG="drag",t.SELECTED="selected",t.CLICK="click",t.MARKER_MOVE="marker_move",t.BUBBLE_OPEN="bubble_open",t.TRASHCAN_OPEN="trashcan_open",t.TOOLBOX_ITEM_SELECT="toolbox_item_select",t.THEME_CHANGE="theme_change",t.VIEWPORT_CHANGE="viewport_change",t.COMMENT_CREATE="comment_create",t.COMMENT_DELETE="comment_delete",t.COMMENT_CHANGE="comment_change",t.COMMENT_MOVE="comment_move",t.COMMENT_RESIZE="comment_resize",t.COMMENT_DRAG="comment_drag",t.COMMENT_COLLAPSE="comment_collapse",t.FINISHED_LOADING="finished_loading"})(tt||(tt={}));var ua=[tt.BLOCK_CREATE,tt.BLOCK_MOVE,tt.COMMENT_CREATE,tt.COMMENT_MOVE],ca="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Sc={genUid:()=>{const t=ca.length,o=[];for(let u=0;u<20;u++)o[u]=ca.charAt(Math.random()*t);return o.join("")}},Yl=0,La={TEST_ONLY:Sc};La.genUid=D,La.getNextUniqueId=G;var Tr="",Lu=!0,fl=0,Ac="ORPHANED_BLOCK",Is=[],Wr={FIRE_QUEUE:Is,enqueueEvent:Pe,fireNow:Ne,fireInternal:fe,setGroupInternal:gt};n.disable$$module$build$src$core$events$utils,n.enable$$module$build$src$core$events$utils,n.getGroup$$module$build$src$core$events$utils,n.setGroup$$module$build$src$core$events$utils,n.setRecordUndo$$module$build$src$core$events$utils;var hi="http://www.w3.org/2000/svg",fr="http://www.w3.org/1999/xhtml",qi="http://www.w3.org/1999/xlink",Da;(function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE"})(Da||(Da={}));var nr=null,$c=0,Xo=null,ir={HTML_NS:fr};ir.NodeType=Da,ir.SVG_NS=hi,ir.XLINK_NS=qi,ir.addClass=Ye,ir.createSvgElement=Re,ir.getFastTextWidth=_e,ir.getFastTextWidthWithSizeString=se,ir.getTextWidth=et,ir.hasClass=Ae,ir.insertAfter=Ie,ir.measureFontMetrics=$e,ir.removeClass=Se,ir.removeClasses=J,ir.removeNode=we,ir.setCssTransform=dt,ir.startTextWidthCache=Qe,ir.stopTextWidthCache=vt;var $s=class{static findFocusedNode(t){var o=t.getRootFocusableNode();if(!o.canBeFocused())return null;var u=o.getFocusableElement();return Ae(u,$s.ACTIVE_CLASS_NAME)||Ae(u,$s.PASSIVE_CSS_CLASS_NAME)||(o=u.querySelector(this.ACTIVE_FOCUS_NODE_CSS_SELECTOR),(o instanceof HTMLElement||o instanceof SVGElement)&&(o=$s.findFocusableNodeFor(o,t)))?o:(u=u.querySelector(this.PASSIVE_FOCUS_NODE_CSS_SELECTOR),(u instanceof HTMLElement||u instanceof SVGElement)&&(t=$s.findFocusableNodeFor(u,t))?t:null)}static findFocusableNodeFor(t,o){if(!t.id||t.id==="null"||o.getNestedTrees().map(R=>$s.findFocusableNodeFor(t,R)).findIndex(R=>!!R)!==-1)return null;var u=o.getRootFocusableNode();if(u.canBeFocused()&&t===u.getFocusableElement())return u;var g;return(u=(g=o.lookUpFocusableNode(t.id))!=null?g:null)?u:(g=t.parentElement,!u&&g?$s.findFocusableNodeFor(g,o):null)}};$s.ACTIVE_CLASS_NAME="blocklyActiveFocus",$s.PASSIVE_CSS_CLASS_NAME="blocklyPassiveFocus",$s.ACTIVE_FOCUS_NODE_CSS_SELECTOR=`.${$s.ACTIVE_CLASS_NAME}`,$s.PASSIVE_FOCUS_NODE_CSS_SELECTOR=`.${$s.PASSIVE_CSS_CLASS_NAME}`;var Ad=class{constructor(t,o){this.tree=t,this.rootShouldBeAutoTabbable=o}},ni=class{constructor(t){this.previouslyFocusedNode=this.focusedNode=null,this.registeredTrees=[],this.isUpdatingFocusedNode=this.recentlyLostAllFocus=this.lockFocusStateChanges=this.currentlyHoldsEphemeralFocus=!1;const o=u=>{if(!this.isUpdatingFocusedNode){this.recentlyLostAllFocus=!u;var g=null;if(u instanceof HTMLElement||u instanceof SVGElement){for(var R of this.registeredTrees)if(g=$s.findFocusableNodeFor(u,R.tree))break}if(g&&g.canBeFocused()){u=g.getFocusableTree();let k;R=(k=this.focusedNode)==null?void 0:k.getFocusableTree(),g===u.getRootFocusableNode()&&u!==R?this.focusTree(u):this.focusNode(g)}else this.defocusCurrentFocusedNode()}};t("focusin",u=>{u instanceof FocusEvent&&o(document.activeElement)}),t("focusout",u=>{u instanceof FocusEvent&&o(u.relatedTarget)})}registerTree(t,o=!1){if(this.ensureManagerIsUnlocked(),this.isRegistered(t))throw Error(`Attempted to re-register already registered tree: ${t}.`);this.registeredTrees.push(new Ad(t,o));const u=t.getRootFocusableNode().getFocusableElement();if(!u.id||u.id==="null")throw Error(`Attempting to register a tree with a root element that has an invalid ID: ${t}.`);o&&(u.tabIndex=0)}isRegistered(t){return!!this.lookUpRegistration(t)}lookUpRegistration(t){let o;return(o=this.registeredTrees.find(u=>u.tree===t))!=null?o:null}unregisterTree(t){if(this.ensureManagerIsUnlocked(),!this.isRegistered(t))throw Error(`Attempted to unregister not registered tree: ${t}.`);var o=this.registeredTrees.findIndex(R=>R.tree===t);const u=this.registeredTrees[o];this.registeredTrees.splice(o,1),o=$s.findFocusedNode(t);const g=t.getRootFocusableNode();o&&this.removeHighlight(o),this.focusedNode!==o&&this.focusedNode!==g||this.updateFocusedNode(null),this.removeHighlight(g),u.rootShouldBeAutoTabbable&&t.getRootFocusableNode().getFocusableElement().removeAttribute("tabindex")}getFocusedTree(){let t,o;return(o=(t=this.focusedNode)==null?void 0:t.getFocusableTree())!=null?o:null}getFocusedNode(){return this.focusedNode}focusTree(t){if(this.ensureManagerIsUnlocked(),!this.isRegistered(t))throw Error(`Attempted to focus unregistered tree: ${t}.`);const o=$s.findFocusedNode(t),u=t.getRestoredFocusableNode(o);t=t.getRootFocusableNode();let g;this.focusNode((g=u??o)!=null?g:t)}focusNode(t){this.ensureManagerIsUnlocked();const o=!this.currentlyHoldsEphemeralFocus;o&&(this.isUpdatingFocusedNode=!0);var u,g=((u=this.focusedNode)==null?void 0:u.getFocusableElement())!==document.activeElement;if(this.focusedNode!==t||g)if(t.canBeFocused()){if(u=t.getFocusableTree(),!this.isRegistered(u))throw Error(`Attempted to focus unregistered node: ${t}.`);g=t.getFocusableElement(),g.id&&g.id!=="null"||console.warn("Trying to focus a node that has an invalid ID.");var R=$s.findFocusableNodeFor(g,u);g=$s.findFocusedNode(u);var k=t;if(R!==t){k=u.getRestoredFocusableNode(g),t=u.getRootFocusableNode();var ue;k=(ue=k??g)!=null?ue:t}t=this.focusedNode,ue=t?.getFocusableTree(),t&&this.passivelyFocusNode(t,u),u=u.getRootFocusableNode(),g&&this.removeHighlight(g),u!==k&&this.removeHighlight(u),this.currentlyHoldsEphemeralFocus||this.activelyFocusNode(k,ue??null),this.updateFocusedNode(k)}else console.warn("Trying to focus a node that can't be focused.");o&&(this.isUpdatingFocusedNode=!1)}takeEphemeralFocus(t){if(this.ensureManagerIsUnlocked(),this.currentlyHoldsEphemeralFocus)throw Error(`Attempted to take ephemeral focus when it's already held, with new element: ${t}.`);this.currentlyHoldsEphemeralFocus=!0,this.focusedNode&&this.passivelyFocusNode(this.focusedNode,null),t.focus();let o=!1;return()=>{if(o)throw Error(`Attempted to finish ephemeral focus twice for element: ${t}.`);if(o=!0,this.currentlyHoldsEphemeralFocus=!1,this.focusedNode){this.activelyFocusNode(this.focusedNode,null);const u=this.focusedNode;setTimeout(()=>{!this.focusedNode&&this.previouslyFocusedNode===u&&this.recentlyLostAllFocus&&this.focusNode(u)},0)}}}ephemeralFocusTaken(){return this.currentlyHoldsEphemeralFocus}ensureManagerIsUnlocked(){if(this.lockFocusStateChanges)throw Error("FocusManager state changes cannot happen in a tree/node focus/blur callback.")}updateFocusedNode(t){this.previouslyFocusedNode=this.focusedNode,this.focusedNode=t}defocusCurrentFocusedNode(){this.focusedNode&&!this.currentlyHoldsEphemeralFocus&&(this.passivelyFocusNode(this.focusedNode,null),this.updateFocusedNode(null))}activelyFocusNode(t,o){this.lockFocusStateChanges=!0;const u=t.getFocusableTree(),g=t.getFocusableElement();let R;const k=(R=this.lookUpRegistration(u))==null?void 0:R.rootShouldBeAutoTabbable;u!==o&&(u.onTreeFocus(t,o),k&&(u.getRootFocusableNode().getFocusableElement().tabIndex=-1)),t.onNodeFocus(),this.lockFocusStateChanges=!1,k&&t===u.getRootFocusableNode()||g.hasAttribute("tabindex")||(g.tabIndex=-1),this.setNodeToVisualActiveFocus(t),g.focus()}passivelyFocusNode(t,o){this.lockFocusStateChanges=!0;const u=t.getFocusableTree();if(u!==o){u.onTreeBlur(o);let g;(g=this.lookUpRegistration(u))!=null&&g.rootShouldBeAutoTabbable&&(u.getRootFocusableNode().getFocusableElement().tabIndex=0)}t.onNodeBlur(),this.lockFocusStateChanges=!1,u!==o&&this.setNodeToVisualPassiveFocus(t)}setNodeToVisualActiveFocus(t){t=t.getFocusableElement(),Ye(t,ni.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Se(t,ni.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}setNodeToVisualPassiveFocus(t){t=t.getFocusableElement(),Se(t,ni.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Ye(t,ni.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}removeHighlight(t){t=t.getFocusableElement(),Se(t,ni.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Se(t,ni.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}static getFocusManager(){return ni.focusManager||(ni.focusManager=new ni(document.addEventListener)),ni.focusManager}};ni.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyActiveFocus",ni.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyPassiveFocus",ni.focusManager=null,n.getFocusManager$$module$build$src$core$focus_manager;var Jm={};Jm.deepMerge=Ve;var Ii=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(t,o){if(this.shortcuts.get(t.name)&&!o)throw Error(`Shortcut named "${t.name}" already exists.`);if(this.shortcuts.set(t.name,t),o=t.keyCodes,o!=null&&o.length)for(const u of o)this.addKeyMapping(u,t.name,!!t.allowCollision)}unregister(t){return this.shortcuts.get(t)?(this.removeAllKeyMappings(t),this.shortcuts.delete(t),!0):(console.warn(`Keyboard shortcut named "${t}" not found.`),!1)}addKeyMapping(t,o,u){t=`${t}`;const g=this.keyMap.get(t);if(g&&!u)throw Error(`Shortcut named "${o}" collides with shortcuts "${g}"`);g&&u?g.unshift(o):this.keyMap.set(t,[o])}removeKeyMapping(t,o,u){const g=this.keyMap.get(t);if(!g)return u||console.warn(`No keyboard shortcut named "${o}" registered with key code "${t}"`),!1;const R=g.indexOf(o);return R>-1?(g.splice(R,1),g.length===0&&this.keyMap.delete(t),!0):(u||console.warn(`No keyboard shortcut named "${o}" registered with key code "${t}"`),!1)}removeAllKeyMappings(t){for(const o of this.keyMap.keys())this.removeKeyMapping(o,t,!0)}setKeyMap(t){this.keyMap.clear();for(const o in t)this.keyMap.set(o,t[o])}getKeyMap(){const t=Object.create(null);for(const[o,u]of this.keyMap)t[o]=u;return t}getRegistry(){const t=Object.create(null);for(const[o,u]of this.shortcuts)t[o]=u;return Ve(Object.create(null),t)}onKeyDown(t,o){var u=this.serializeKeyEvent(o);if(u=this.getShortcutNamesByKeyCode(u),!u)return!1;for(const g of u){u=this.shortcuts.get(g);let R;if(!u||u.preconditionFn&&!u.preconditionFn(t,{focusedNode:(R=n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?R:void 0}))continue;let k,ue,xe;if((ue=(k=u).callback)!=null&&ue.call(k,t,o,u,{focusedNode:(xe=n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?xe:void 0}))return!0}return!1}getShortcutNamesByKeyCode(t){let o;return((o=this.keyMap.get(t))==null?void 0:o.slice())||[]}getKeyCodesByShortcutName(t){const o=[];for(const[u,g]of this.keyMap)g.indexOf(t)>-1&&o.push(u);return o}serializeKeyEvent(t){let o="";for(const u in Ii.modifierKeys)t.getModifierState(u)&&(o!==""&&(o+="+"),o+=u);return o!==""&&t.keyCode?o+="+"+t.keyCode:t.keyCode&&(o=String(t.keyCode)),o}checkModifiers(t){for(const o of t)if(!(o in Ii.modifierKeys))throw Error(o+" is not a valid modifier key.")}createSerializedKey(t,o){let u="";if(o){this.checkModifiers(o);for(const g in Ii.modifierKeys)o.includes(Ii.modifierKeys[g])&&(u!==""&&(u+="+"),u+=g)}return u!==""&&t?u+="+"+t:t&&(u=`${t}`),u}};Ii.registry=new Ii,function(t){t=t.modifierKeys||(t.modifierKeys={}),t[t.Shift=16]="Shift",t[t.Control=17]="Control",t[t.Alt=18]="Alt",t[t.Meta=91]="Meta"}(Ii||(Ii={}));var Du=Object.create(null),fh,ha,Kl=[],Bu={defineBlocksWithJsonArrayInternal:xt},Os={TEST_ONLY:Bu};Os.createBlockDefinitionsFromJsonArray=n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Os.defineBlocks=n.defineBlocks$$module$build$src$core$common,Os.defineBlocksWithJsonArray=Mt,Os.draggingConnections=Kl,Os.fireSelectedEvent=ye,Os.getAllWorkspaces=bt,Os.getBlockTypeCounts=$t,Os.getMainWorkspace=H,Os.getParentContainer=lt,Os.getSelected=ve,Os.getWorkspaceById=yt,Os.globalShortcutHandler=Xt,Os.registerWorkspace=At,Os.setMainWorkspace=oe,Os.setParentContainer=Me,Os.setSelected=re,Os.svgResize=Ze,Os.unregisterWorkpace=Ft;var jo=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=n.getGroup$$module$build$src$core$events$utils(),this.recordUndo=pe()}toJson(){return{type:this.type,group:this.group}}static fromJson(t,o,u){return u.isBlank=!1,u.group=t.group||"",u.workspaceId=o.id,u}isNull(){return!1}run(t){}getEventWorkspace_(){let t;if(this.workspaceId&&(t=yt(this.workspaceId)),!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t}},Yo=class extends jo{constructor(t){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof t>"u",this.workspaceId=t||""}},$d=class extends Yo{constructor(t,o,u){o=t?t.workspace.id:o,o===null&&(o=void 0),super(o),this.type=tt.CLICK,this.blockId=t?t.id:void 0,this.targetType=u}toJson(){const t=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return t.targetType=this.targetType,t.blockId=this.blockId,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new $d),o.targetType=t.targetType,o.blockId=t.blockId,o}},xd;(function(t){t.BLOCK="block",t.WORKSPACE="workspace",t.ZOOM_CONTROLS="zoom_controls"})(xd||(xd={})),i(Et.EVENT,tt.CLICK,$d);var xc={};xc.removeElem=Yt;var To=class{constructor(t){this.name=t}toString(){return this.name}};To.POSITIONABLE=new To("positionable"),To.DRAG_TARGET=new To("drag_target"),To.DELETE_AREA=new To("delete_area"),To.AUTOHIDEABLE=new To("autohideable");var Hi=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(t,o){const u=t.component.id;if(!o&&this.componentData.has(u)){var g;throw Error('Plugin "'+u+'" with capabilities "'+((g=this.componentData.get(u))==null?void 0:g.capabilities)+'" already added.')}for(this.componentData.set(u,t),o=[],g=0;g<t.capabilities.length;g++){const R=String(t.capabilities[g]).toLowerCase();if(o.push(R),this.capabilityToComponentIds.has(R)){let k;(k=this.capabilityToComponentIds.get(R))==null||k.push(u)}else this.capabilityToComponentIds.set(R,[u])}this.componentData.get(u).capabilities=o}removeComponent(t){const o=this.componentData.get(t);if(o){for(let u=0;u<o.capabilities.length;u++){const g=String(o.capabilities[u]).toLowerCase();Yt(this.capabilityToComponentIds.get(g),t)}this.componentData.delete(t)}}addCapability(t,o){if(!this.getComponent(t))throw Error('Cannot add capability, "'+o+'". Plugin "'+t+'" has not been added to the ComponentManager');if(this.hasCapability(t,o))console.warn('Plugin "'+t+'already has capability "'+o+'"');else{o=`${o}`.toLowerCase();var u;(u=this.componentData.get(t))==null||u.capabilities.push(o);var g;(g=this.capabilityToComponentIds.get(o))==null||g.push(t)}}removeCapability(t,o){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+o+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,o)?(o=`${o}`.toLowerCase(),Yt(this.componentData.get(t).capabilities,o),Yt(this.capabilityToComponentIds.get(o),t)):console.warn('Plugin "'+t+`doesn't have capability "`+o+'" to remove')}hasCapability(t,o){return o=`${o}`.toLowerCase(),this.componentData.has(t)&&this.componentData.get(t).capabilities.includes(o)}getComponent(t){let o;return(o=this.componentData.get(t))==null?void 0:o.component}getComponents(t,o){if(t=`${t}`.toLowerCase(),t=this.capabilityToComponentIds.get(t),!t)return[];const u=[];if(o){const g=[];t.forEach(R=>{g.push(this.componentData.get(R))}),g.sort(function(R,k){return R.weight-k.weight}),g.forEach(function(R){u.push(R.component)})}else t.forEach(g=>{u.push(this.componentData.get(g).component)});return u}};Hi.Capability=To,function(t){t=t.ComponentWeight||(t.ComponentWeight={}),t[t.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",t[t.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",t[t.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",t[t.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(Hi||(Hi={})),Hi.ComponentWeight;var ku=!1,pl=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyEmboss {
  filter: var(--blocklyEmbossFilter);
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyHighlighted>.blocklyPath {
  filter: var(--blocklyEmbossFilter);
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabledPattern>.blocklyPath {
  fill: var(--blocklyDisabledPattern);
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableField>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyMenuSeparator {
  background-color: #ccc;
  height: 1px;
  border: 0;
  margin-left: 4px;
  margin-right: 4px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}

.blocklyField {
  cursor: default;
}

.blocklyInputField {
  cursor: text;
}

.blocklyDragging .blocklyField,
.blocklyDragging .blocklyIconGroup {
  cursor: grabbing;
}

.blocklyActiveFocus:is(
  .blocklyFlyout,
  .blocklyWorkspace,
  .blocklyField,
  .blocklyPath,
  .blocklyHighlightedConnectionPath,
  .blocklyComment,
  .blocklyBubble,
  .blocklyIconGroup,
  .blocklyTextarea
) {
  outline: none;
}
`,cs={};cs.inject=xn,cs.register=Wt;var Ot=class{constructor(t,o){this.x=t,this.y=o}clone(){return new Ot(this.x,this.y)}scale(t){return this.x*=t,this.y*=t,this}translate(t,o){return this.x+=t,this.y+=o,this}static equals(t,o){return t===o?!0:t&&o?t.x===o.x&&t.y===o.y:!1}static distance(t,o){const u=t.x-o.x;return t=t.y-o.y,Math.sqrt(u*u+t*t)}static magnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static difference(t,o){return new Ot(t.x-o.x,t.y-o.y)}static sum(t,o){return new Ot(t.x+o.x,t.y+o.y)}},qe=class{constructor(t){this.tagName=t}toString(){return this.tagName}};qe.ANIMATE=new qe("animate"),qe.CIRCLE=new qe("circle"),qe.CLIPPATH=new qe("clipPath"),qe.DEFS=new qe("defs"),qe.FECOMPOSITE=new qe("feComposite"),qe.FECOMPONENTTRANSFER=new qe("feComponentTransfer"),qe.FEFLOOD=new qe("feFlood"),qe.FEFUNCA=new qe("feFuncA"),qe.FEGAUSSIANBLUR=new qe("feGaussianBlur"),qe.FEPOINTLIGHT=new qe("fePointLight"),qe.FESPECULARLIGHTING=new qe("feSpecularLighting"),qe.FILTER=new qe("filter"),qe.FOREIGNOBJECT=new qe("foreignObject"),qe.G=new qe("g"),qe.IMAGE=new qe("image"),qe.LINE=new qe("line"),qe.PATH=new qe("path"),qe.PATTERN=new qe("pattern"),qe.POLYGON=new qe("polygon"),qe.RECT=new qe("rect"),qe.SVG=new qe("svg"),qe.TEXT=new qe("text"),qe.TSPAN=new qe("tspan");var pn=class{constructor(t,o,u,g){this.top=t,this.bottom=o,this.left=u,this.right=g}static from(t){return new pn(t.y,t.y+t.height,t.x,t.x+t.width)}clone(){return new pn(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}getOrigin(){return new Ot(this.left,this.top)}contains(t,o){return t>=this.left&&t<=this.right&&o>=this.top&&o<=this.bottom}intersects(t){return this.left<=t.right&&this.right>=t.left&&this.bottom>=t.top&&this.top<=t.bottom}static equals(t,o){return t===o?!0:t&&o?t.top===o.top&&t.bottom===o.bottom&&t.left===o.left&&t.right===o.right:!1}static createFromPoint(t,o,u){const g=t.x;return t=t.y,new pn(t,t+u,g,g+o)}},wn=class{constructor(t,o){this.width=t,this.height=o}static equals(t,o){return t===o?!0:t&&o?t.width===o.width&&t.height===o.height:!1}static max(t,o){return new wn(Math.max(t.width,o.width),Math.max(t.height,o.height))}static min(t,o){return new wn(Math.min(t.width,o.width),Math.min(t.height,o.height))}},Pu={getSizeInternal:Zt},Yn={TEST_ONLY:Pu};Yn.getBorderBox=lr,Yn.getComputedStyle=gn,Yn.getContainerOffsetToScrollInto=Cn,Yn.getPageOffset=zn,Yn.getSize=jt,Yn.getViewportPageOffset=is,Yn.scrollIntoContainerView=Rs;var kn=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Ai=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,ml={XY_REGEX:kn,XY_STYLE_REGEX:Ai},Ba={TEST_ONLY:ml};Ba.getDocumentScroll=ge,Ba.getInjectionDivXY=Ri,Ba.getRelativeXY=Ks,Ba.getViewportBBox=ae,Ba.screenToWsCoordinates=Ue,Ba.wsToScreenCoordinates=ot;var rs=class{constructor(t,o,u,g,R){this.workspace=t,this.horizontal=o,this.oldHostMetrics=null,this.ratio=1,this.origin=new Ot(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Ot(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=u||!1,this.margin=R!==void 0?R:rs.DEFAULT_SCROLLBAR_MARGIN,t="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),g&&(t+=" "+g),this.outerSvg=Re(qe.SVG,{class:t}),g=Re(qe.G,{},this.outerSvg),this.svgBackground=Re(qe.RECT,{class:"blocklyScrollbarBackground"},g),t=Math.floor((rs.scrollbarThickness-5)/2),this.svgHandle=Re(qe.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},g),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ie(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),o?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=w(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=w(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const t=rs.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(t)),this.outerSvg.setAttribute("height",String(t)),this.svgHandle.setAttribute("height",String(t-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(t)),this.outerSvg.setAttribute("width",String(t)),this.svgHandle.setAttribute("width",String(t-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),O(this.onMouseDownBarWrapper_),O(this.onMouseDownHandleWrapper_),we(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(t){return t=t<=0||isNaN(t)?0:Math.min(t,this.scrollbarLength)}setHandleLength(t){this.handleLength=t,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(t){return t=t<=0||isNaN(t)?0:Math.min(t,this.scrollbarLength-this.handleLength)}setHandlePosition(t){this.handlePosition=t,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(t){this.scrollbarLength=t,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(t,o){this.position.x=t,this.position.y=o,dt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(t){!t&&(t=this.workspace.getMetrics(),!t)||this.oldHostMetrics&&rs.metricsAreEquivalent(t,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(t):this.resizeVertical(t),this.oldHostMetrics=t,this.updateMetrics())}requiresViewResize(t){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==t.viewWidth||this.oldHostMetrics.viewHeight!==t.viewHeight||this.oldHostMetrics.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics.absoluteTop!==t.absoluteTop:!0}resizeHorizontal(t){this.requiresViewResize(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)}resizeViewHorizontal(t){var o=t.viewWidth-this.margin*2;this.pair&&(o-=rs.scrollbarThickness),this.setScrollbarLength(Math.max(0,o)),o=t.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(o+=rs.scrollbarThickness),this.setPosition(o,t.absoluteTop+t.viewHeight-rs.scrollbarThickness-this.margin),this.resizeContentHorizontal(t)}resizeContentHorizontal(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var o=this.scrollbarLength*t.viewWidth/t.scrollWidth;o=this.constrainHandleLength(o),this.setHandleLength(o),o=t.scrollWidth-t.viewWidth;var u=this.scrollbarLength-this.handleLength;t=(t.viewLeft-t.scrollLeft)/o*u,t=this.constrainHandlePosition(t),this.setHandlePosition(t),this.ratio=u/o}}resizeVertical(t){this.requiresViewResize(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)}resizeViewVertical(t){let o=t.viewHeight-this.margin*2;this.pair&&(o-=rs.scrollbarThickness),this.setScrollbarLength(Math.max(0,o)),this.setPosition(this.workspace.RTL?t.absoluteLeft+this.margin:t.absoluteLeft+t.viewWidth-rs.scrollbarThickness-this.margin,t.absoluteTop+this.margin),this.resizeContentVertical(t)}resizeContentVertical(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var o=this.scrollbarLength*t.viewHeight/t.scrollHeight;o=this.constrainHandleLength(o),this.setHandleLength(o),o=t.scrollHeight-t.viewHeight;var u=this.scrollbarLength-this.handleLength;t=(t.viewTop-t.scrollTop)/o*u,t=this.constrainHandlePosition(t),this.setHandlePosition(t),this.ratio=u/o}}isVisible(){return this.isHandleVisible}setContainerVisible(t){const o=t!==this.containerVisible;this.containerVisible=t,o&&this.updateDisplay_()}setVisible(t){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(t)}setVisibleInternal(t){const o=t!==this.isVisible();this.isHandleVisible=t,o&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(t){if(this.workspace.markFocused(),$(),this.cleanUp(),F(t))t.stopPropagation();else{var o=V(t,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());o=this.horizontal?o.x:o.y;var u=Ri(this.svgHandle);u=this.horizontal?u.x:u.y;var g=this.handlePosition,R=this.handleLength*.95;o<=u?g-=R:o>=u+this.handleLength&&(g+=R),this.setHandlePosition(this.constrainHandlePosition(g)),this.updateMetrics(),t.stopPropagation(),t.preventDefault()}}onMouseDownHandle(t){this.workspace.markFocused(),this.cleanUp(),F(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?t.clientX:t.clientY,this.onMouseUpWrapper_=w(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=w(document,"pointermove",this,this.onMouseMoveHandle),t.stopPropagation(),t.preventDefault())}onMouseMoveHandle(t){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?t.clientX:t.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){$(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(O(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(O(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let t=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(t)&&(t=0),t}updateMetrics(){const t=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:t}):this.workspace.setMetrics({y:t})}set(t,o){this.setHandlePosition(this.constrainHandlePosition(t*this.ratio)),(o||o===void 0)&&this.updateMetrics()}setOrigin(t,o){this.origin=new Ot(t,o)}static metricsAreEquivalent(t,o){return t.viewWidth===o.viewWidth&&t.viewHeight===o.viewHeight&&t.viewLeft===o.viewLeft&&t.viewTop===o.viewTop&&t.absoluteTop===o.absoluteTop&&t.absoluteLeft===o.absoluteLeft&&t.scrollWidth===o.scrollWidth&&t.scrollHeight===o.scrollHeight&&t.scrollLeft===o.scrollLeft&&t.scrollTop===o.scrollTop}};rs.scrollbarThickness=Wl?25:15,rs.DEFAULT_SCROLLBAR_MARGIN=.5;var Cd={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Cc={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:pr,DOMParser:Ko,XMLSerializer:ph}=globalThis;Ko&&(Cd=new Ko),ph&&(Cc=new ph);var Gs="https://developers.google.com/blockly/xml",mh=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Er={NAME_SPACE:Gs};Er.createElement=n.createElement$$module$build$src$core$utils$xml,Er.createTextNode=n.createTextNode$$module$build$src$core$utils$xml,Er.domToText=_t,Er.injectDependencies=ht,Er.textToDom=n.textToDom$$module$build$src$core$utils$xml;var qo="categoryToolbox",ql="flyoutToolbox",Kn;(function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"})(Kn||(Kn={}));var v0={hasCategoriesInternal:ke},$i={};$i.Position=Kn,$i.TEST_ONLY=v0,$i.convertFlyoutDefToJsonArray=Te,$i.convertToolboxDefToJson=kt,$i.hasCategories=De,$i.isCategoryCollapsible=ze,$i.parseToolboxTree=Bt;var gl;(function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM"})(gl||(gl={}));var da;(function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT"})(da||(da={}));var Xr;(function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN"})(Xr||(Xr={}));var Pr={};Pr.bumpDirection=Xr,Pr.bumpPositionRect=Jt,Pr.getCornerOppositeToolbox=Kt,Pr.getStartPositionRect=qt,Pr.horizontalPosition=da,Pr.verticalPosition=gl;var Sr={width:96,height:124,url:"sprites.png"},$_=class{constructor(t){this.workspace=t,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=Re(qe.G,{});const t=String(Math.random()).substring(2);return this.createZoomOutSvg(t),this.createZoomInSvg(t),this.workspace.isMovable()&&this.createZoomResetSvg(t),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:Hi.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[Hi.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&we(this.svgGroup);for(const t of this.boundEvents)O(t);this.boundEvents.length=0}getBoundingRectangle(){let t=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(t+=this.LARGE_SPACING+this.HEIGHT),new pn(this.top,this.top+t,this.left,this.left+this.WIDTH)}position(t,o){if(this.initialized){var u=Kt(this.workspace,t),g=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(g+=this.LARGE_SPACING+this.HEIGHT),t=qt(u,new wn(this.WIDTH,g),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,t,this.workspace),u=u.vertical,o=Jt(t,this.MARGIN_VERTICAL,u===gl.TOP?Xr.DOWN:Xr.UP,o),u===gl.TOP){var R=this.SMALL_SPACING+this.HEIGHT,k;(k=this.zoomInGroup)==null||k.setAttribute("transform","translate(0, "+R+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(R+this.LARGE_SPACING+this.HEIGHT)+")")}else{k=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let xe;(xe=this.zoomInGroup)==null||xe.setAttribute("transform","translate(0, "+k+")"),k=k+this.SMALL_SPACING+this.HEIGHT,(R=this.zoomOutGroup)==null||R.setAttribute("transform","translate(0, "+k+")")}this.top=o.top,this.left=o.left;var ue;(ue=this.svgGroup)==null||ue.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(t){this.zoomOutGroup=Re(qe.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const o=Re(qe.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup);Re(qe.RECT,{width:32,height:32},o),Re(qe.IMAGE,{width:Sr.width,height:Sr.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup).setAttributeNS(qi,"xlink:href",this.workspace.options.pathToMedia+Sr.url),this.boundEvents.push(w(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(t){this.zoomInGroup=Re(qe.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const o=Re(qe.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup);Re(qe.RECT,{width:32,height:32},o),Re(qe.IMAGE,{width:Sr.width,height:Sr.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup).setAttributeNS(qi,"xlink:href",this.workspace.options.pathToMedia+Sr.url),this.boundEvents.push(w(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(t,o){this.workspace.markFocused(),this.workspace.zoomCenter(t),this.fireZoomEvent(),$(),o.stopPropagation(),o.preventDefault()}createZoomResetSvg(t){this.zoomResetGroup=Re(qe.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const o=Re(qe.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup);Re(qe.RECT,{width:32,height:32},o),Re(qe.IMAGE,{width:Sr.width,height:Sr.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup).setAttributeNS(qi,"xlink:href",this.workspace.options.pathToMedia+Sr.url),this.boundEvents.push(w(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(t){this.workspace.markFocused();const o=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(o),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),$(),t.stopPropagation(),t.preventDefault()}fireZoomEvent(){const t=new(Ke(tt.CLICK))(null,this.workspace.id,"zoom_controls");K(t)}};Wt(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var x_=100,ms=75,Zm=50,Jl=25,Uu={BLOCKS:Zm,PROCEDURES:ms,VARIABLES:x_,WORKSPACE_COMMENTS:Jl},Ps={};Ps.register=vn,Ps.unregister=Tn;var Qm=class{constructor(){this.priority=Jl}save(t){const o=[];for(const u of t.getTopComments())(t=ei(u,{addCoordinates:!0,saveIds:!0}))&&o.push(t);return o.length?o:null}load(t,o){for(const u of t)ln(u,o,{recordUndo:pe()})}clear(t){for(const o of t.getTopComments())o.dispose()}};vn("workspaceComments",new Qm);var Oi={};Oi.WorkspaceCommentSerializer=Qm,Oi.append=ln,Oi.save=ei;var qn={};qn.register=Dn,qn.unregister=fn;var ii=class{paste(t,o,u){t=t.commentState,u&&(t.x=u.x,t.y=u.y),n.disable$$module$build$src$core$events$utils();let g;try{g=ln(t,o),yi(g)}finally{n.enable$$module$build$src$core$events$utils()}return g?(Fe()&&K(new(Ke(tt.COMMENT_CREATE))(g)),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(g),g):null}};ii.TYPE="workspace-comment",Dn(ii.TYPE,new ii);var On;On=28,n.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:On,connectingSnapRadius:On,currentConnectionPreference:8,bumpDelay:250},n.config$$module$build$src$core$config;var si="aria-",zs="role",Ns;(function(t){t.GRID="grid",t.GRIDCELL="gridcell",t.GROUP="group",t.LISTBOX="listbox",t.MENU="menu",t.MENUITEM="menuitem",t.MENUITEMCHECKBOX="menuitemcheckbox",t.OPTION="option",t.PRESENTATION="presentation",t.ROW="row",t.TREE="tree",t.TREEITEM="treeitem",t.SEPARATOR="separator",t.STATUS="status"})(Ns||(Ns={}));var gs;(function(t){t.ACTIVEDESCENDANT="activedescendant",t.COLCOUNT="colcount",t.DISABLED="disabled",t.EXPANDED="expanded",t.INVALID="invalid",t.LABEL="label",t.LABELLEDBY="labelledby",t.LEVEL="level",t.ORIENTATION="orientation",t.POSINSET="posinset",t.ROWCOUNT="rowcount",t.SELECTED="selected",t.SETSIZE="setsize",t.VALUEMAX="valuemax",t.VALUEMIN="valuemin",t.LIVE="live",t.HIDDEN="hidden"})(gs||(gs={}));var Fu={};Fu.Role=Ns,Fu.State=gs,Fu.setRole=Mn,Fu.setState=Xn;var Jo=class{constructor(t,o){this.content=t,this.opt_value=o,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const t=document.createElement("div");t.id=G(),this.element=t,t.className="blocklyMenuItem "+(this.enabled?"":"blocklyMenuItemDisabled ")+(this.checked?"blocklyMenuItemSelected ":"")+(this.highlight?"blocklyMenuItemHighlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl ":"");const o=document.createElement("div");if(o.className="blocklyMenuItemContent",this.checkable){var u=document.createElement("div");u.className="blocklyMenuItemCheckbox ",o.appendChild(u)}return u=this.content,typeof this.content=="string"&&(u=document.createTextNode(this.content)),o.appendChild(u),t.appendChild(o),this.roleName&&Mn(t,this.roleName),Xn(t,gs.SELECTED,this.checkable&&this.checked||!1),Xn(t,gs.DISABLED,!this.enabled),t}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let t;return(t=this.opt_value)!=null?t:null}setRightToLeft(t){this.rightToLeft=t}setRole(t){this.roleName=t}setCheckable(t){this.checkable=t}setChecked(t){this.checked=t}setHighlighted(t){this.highlight=t;const o=this.getElement();o&&this.isEnabled()&&(t?Ye(o,"blocklyMenuItemHighlight"):Se(o,"blocklyMenuItemHighlight"))}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}performAction(t){this.isEnabled()&&this.actionHandler&&this.actionHandler(this,t)}onAction(t,o){this.actionHandler=t.bind(o)}},_s=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(t){this.menuItems.push(t)}render(t){const o=document.createElement("div");o.className="blocklyMenu",o.tabIndex=0,this.roleName&&Mn(o,this.roleName),this.element=o;for(let u=0,g;g=this.menuItems[u];u++)o.appendChild(g.createDom());return this.pointerMoveHandler=w(o,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=w(o,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=w(o,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=w(o,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=w(o,"keydown",this,this.handleKeyEvent),t.appendChild(o),o}getElement(){return this.element}focus(){const t=this.getElement();t&&t.focus({preventScroll:!0})}blur(){const t=this.getElement();t&&t.blur()}setRole(t){this.roleName=t}dispose(){this.pointerMoveHandler&&(O(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(O(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(O(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(O(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(O(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let t=0,o;o=this.menuItems[t];t++)o.dispose();this.element=null}getMenuItem(t){const o=this.getElement();for(;t&&t!==o;){if(t.classList.contains("blocklyMenuItem")){const u=this.getMenuItems();for(let g=0,R;R=u[g];g++)if(R.getElement()===t)return R}t=t.parentElement}return null}setHighlighted(t){var o=this.highlightedItem;if(o&&(o.setHighlighted(!1),this.highlightedItem=null),t){t.setHighlighted(!0),this.highlightedItem=t,o=this.getElement();const u=t.getElement();o&&u&&(Rs(u,o),Xn(o,gs.ACTIVEDESCENDANT,t.getId()))}}highlightNext(){const t=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(t,1)}highlightPrevious(){const t=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(t<0?this.menuItems.length:t,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(t,o){t+=o;let u;const g=this.getMenuItems();for(;u=g[t];){if(u.isEnabled()){this.setHighlighted(u);break}t+=o}}handlePointerMove(t){Math.max(Math.abs(t.movementX),Math.abs(t.movementY))!==0&&(t=this.getMenuItem(t.target))&&(t.isEnabled()?this.highlightedItem!==t&&this.setHighlighted(t):this.setHighlighted(null))}handleClick(t){var o=this.openingCoords;if(this.openingCoords=null,o&&typeof t.clientX=="number"){const u=new Ot(t.clientX,t.clientY);if(Ot.distance(o,u)<1)return}(o=this.getMenuItem(t.target))&&o.performAction(t)}handlePointerEnter(t){this.focus()}handlePointerLeave(t){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(t){if(this.menuItems.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var o=this.highlightedItem;switch(t.key){case"Enter":case" ":o&&o.performAction(t);break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}t.preventDefault(),t.stopPropagation()}}getSize(){const t=this.getElement(),o=jt(t);return o.height=t.scrollHeight,o}getMenuItems(){return this.menuItems.filter(t=>t instanceof Jo)}},_l=class{constructor(){this.element=null}createDom(){return this.element=document.createElement("hr"),this.element.className="blocklyMenuSeparator",Mn(this.element,Ns.SEPARATOR),this.element}dispose(){let t;(t=this.element)==null||t.remove(),this.element=null}},fa="_TEMP_COLLAPSED_INPUT",Hu="_TEMP_COLLAPSED_FIELD",Vs="MANUALLY_DISABLED",Ni={COLLAPSED_FIELD_NAME:Hu,COLLAPSED_INPUT_NAME:fa,MANUALLY_DISABLED:Vs};(function(t){t[t.VALUE=1]="VALUE",t[t.STATEMENT=3]="STATEMENT",t[t.DUMMY=5]="DUMMY",t[t.CUSTOM=6]="CUSTOM",t[t.END_ROW=7]="END_ROW"})(n.inputTypes$$module$build$src$core$inputs$input_types||(n.inputTypes$$module$build$src$core$inputs$input_types={})),n.inputTypes$$module$build$src$core$inputs$input_types;var Li=new Set,Pn=new WeakSet,di=new WeakMap,Di=null,jr=null,ka=0,Eo={};Eo.finishQueuedRenders=Gn,Eo.queueRender=ti,Eo.triggerQueuedRenders=Ui;var mr,lo;n.Msg$$module$build$src$core$msg=Object.create(null),mr=function(t){Object.keys(t).forEach(function(o){n.Msg$$module$build$src$core$msg[o]=t[o]})},lo={Msg:n.Msg$$module$build$src$core$msg,setLocale:mr};var ji="blocklyToast",pa="blocklyToastMessage",Gu="blocklyToastCloseButton",Zl=class{static show(t,o){if(o.oncePerSession&&o.id){if(this.shownIds.has(o.id))return;this.shownIds.add(o.id)}this.hide(t);const u=this.createDom(t,o);requestAnimationFrame(()=>{u.style.bottom="2rem"})}static createDom(t,o){const{message:u,duration:g=5,assertiveness:R=Zl.Assertiveness.POLITE}=o,k=document.createElement("div");t.getInjectionDiv().appendChild(k),k.dataset.toastId=o.id,k.className=ji,Mn(k,Ns.STATUS),Xn(k,gs.LIVE,R),o=k.appendChild(document.createElement("div")),o.className=pa,o.innerText=u,o=k.appendChild(document.createElement("button")),o.className=Gu,Xn(o,gs.LABEL,n.Msg$$module$build$src$core$msg.CLOSE);var ue=Re(qe.SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},o);Xn(ue,gs.HIDDEN,!0),Re(qe.RECT,{x:19.7782,y:2.80762,width:2,height:24,transform:"rotate(45, 19.7782, 2.80762)",fill:"black"},ue),Re(qe.RECT,{x:2.80762,y:4.22183,width:2,height:24,transform:"rotate(-45, 2.80762, 4.22183)",fill:"black"},ue),o.addEventListener("click",()=>{k.remove(),t.markFocused()});let xe;return o=()=>{xe=setTimeout(()=>k.remove(),g*1e3)},ue=()=>clearTimeout(xe),k.addEventListener("focusin",ue),k.addEventListener("focusout",o),k.addEventListener("mouseenter",ue),k.addEventListener("mousemove",ue),k.addEventListener("mouseleave",o),o(),k}static hide(t,o){t=t.getInjectionDiv().querySelector(`.${ji}`),t instanceof HTMLElement&&(!o||o===t.dataset.toastId)&&t.remove()}};Zl.shownIds=new Set,function(t){t=t.Assertiveness||(t.Assertiveness={}),t.ASSERTIVE="assertive",t.POLITE="polite"}(Zl||(Zl={})),Wt(`
.${ji} {
  font-size: 1.2rem;
  position: absolute;
  bottom: -10rem;
  right: 2rem;
  padding: 1rem;
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 0.4rem;
  z-index: 999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  line-height: 1.5;
  transition: bottom 0.3s ease-out;
}

.${ji} .${pa} {
  maxWidth: 18rem;
}

.${ji} .${Gu} {
  margin: 0;
  padding: 0.2rem;
  background-color: transparent;
  color: black;
  border: none;
  cursor: pointer;
}
`);var ma=function(t,o){window.alert(t),o&&o()},Ql=ma,gh=function(t,o){o(window.confirm(t))},Ws=gh,b0=function(t,o,u){u(window.prompt(t,o))},So=b0,Md=Zl.show.bind(Zl),zf=Md,Ao={};Ao.alert=ic,Ao.confirm=cf,Ao.prompt=Yc,Ao.setAlert=Ip,Ao.setConfirm=Jg,Ao.setPrompt=Op,Ao.setToast=sc,Ao.toast=Np;var vl=new Set,eu={};eu.warn=vr;var Mc="VARIABLE",zu="ijkmnopqrstuvwxyzabcdefgh",y0={generateUniqueNameInternal:am},vs={CATEGORY_NAME:Mc,TEST_ONLY:y0,VAR_LETTER_OPTIONS:zu};vs.allDeveloperVariables=n.allDeveloperVariables$$module$build$src$core$variables,vs.allUsedVarModels=n.allUsedVarModels$$module$build$src$core$variables,vs.compareByName=Ll,vs.createVariableButtonHandler=Qa,vs.deleteVariable=n.deleteVariable$$module$build$src$core$variables,vs.flyoutCategory=Za,vs.flyoutCategoryBlocks=Lp,vs.generateUniqueName=hf,vs.generateUniqueNameFromOptions=Nl,vs.generateVariableFieldDom=No,vs.getAddedVariables=vu,vs.getOrCreateVariablePackage=n.getOrCreateVariablePackage$$module$build$src$core$variables,vs.getVariable=n.getVariable$$module$build$src$core$variables,vs.getVariableUsesById=Zc,vs.internalFlyoutCategory=rc,vs.jsonFlyoutCategoryBlocks=oc,vs.nameUsedWithAnyType=_u,vs.nameUsedWithConflictingParam=Jc,vs.promptName=qc,vs.renameVariable=n.renameVariable$$module$build$src$core$variables;var Rc=class extends Error{},m=class extends Rc{constructor(t){super("Expected to find a 'type' property, defining the block type"),this.state=t}},_=class extends Rc{constructor(t,o,u){super(`The block ${o.toDevString()} is missing a(n) ${t}
connection`),this.block=o,this.state=u}},x=class extends Rc{constructor(t,o,u,g){super(`The block ${u.toDevString()} could not connect its
${o} to its parent, because: ${t}`),this.childBlock=u,this.childState=g}},L=class extends Rc{constructor(t){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=t}},U=class extends Rc{constructor(t,o,u){super(`Cannot add an icon of type '${t}' to the block ${o.toDevString()}, because there is no icon registered with type '${t}'. Make sure that all of your icons have been registered.`),this.block=o,this.state=u}},W={};W.BadConnectionCheck=x,W.DeserializationError=Rc,W.MissingBlockType=m,W.MissingConnection=_,W.RealChildOfShadow=L,W.UnregisteredIcon=U;var me=class{constructor(){this.priority=Zm}save(t){const o=[];for(const u of t.getTopBlocks(!1))(t=Aa(u,{addCoordinates:!0,doFullSerialization:!1}))&&o.push(t);return o.length?{languageVersion:0,blocks:o}:null}load(t,o){t=t.blocks;for(const u of t)Dl(u,o,{recordUndo:pe()})}clear(t){for(const o of t.getTopBlocks(!1))o.dispose(!1)}};vn("blocks",new me);var Be={};Be.BlockSerializer=me,Be.append=Dl,Be.appendInternal=Zh,Be.save=Aa;var je=class{constructor(t){this.name=t}toString(){return this.name}equals(t){return this.name===t.toString()}};je.MUTATOR=new je("mutator"),je.WARNING=new je("warning"),je.COMMENT=new je("comment");var Ct=class extends jo{constructor(t){super(),this.isBlank=!t,t&&(this.blockId=t.id,this.workspaceId=t.workspace.id)}toJson(){const t=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return t.blockId=this.blockId,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new Ct),o.blockId=t.blockId,o}},zt=class extends Ct{constructor(t,o,u,g,R){super(t),this.type=tt.BLOCK_CHANGE,t&&(this.element=o,this.name=u||void 0,this.oldValue=g,this.newValue=R)}toJson(){const t=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return t.element=this.element,t.name=this.name,t.oldValue=this.oldValue,t.newValue=this.newValue,this.disabledReason&&(t.disabledReason=this.disabledReason),t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new zt),o.element=t.element,o.name=t.name,o.oldValue=t.oldValue,o.newValue=t.newValue,t.disabledReason!==void 0&&(o.disabledReason=t.disabledReason),o}setDisabledReason(t){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=t}isNull(){return this.oldValue===this.newValue}run(t){var o=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(o=o.getBlockById(this.blockId),!o)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const u=o.getIcon(je.MUTATOR);switch(u&&ac(u)&&u.bubbleIsVisible()&&u.setBubbleVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(o=o.getField(this.name))?o.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":o.setCommentText(t||null);break;case"collapsed":o.setCollapsed(!!t);break;case"disabled":var g;o.setDisabledReason(!!t,(g=this.disabledReason)!=null?g:Vs);break;case"inline":o.setInputsInline(!!t);break;case"mutation":g=zt.getExtraBlockState_(o),o.loadExtraState?o.loadExtraState(JSON.parse(t||"{}")):o.domToMutation&&o.domToMutation(n.textToDom$$module$build$src$core$utils$xml(t||"<mutation/>")),K(new zt(o,"mutation",null,g,t));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(t){return t.saveExtraState?(t=t.saveExtraState(!0))?JSON.stringify(t):"":t.mutationToDom&&(t=t.mutationToDom())?Ra(t):""}};i(Et.EVENT,tt.BLOCK_CHANGE,zt);var en={};en.clamp=$a,en.toDegrees=o_,en.toRadians=pm;var nn=16,Zn=1,ga=12,Vu=16,tu=.25,ct=null,He=null,pt="",Vt="",Qt,os,Bn,xi=null,hs=null,fi=null,Pa=null,Rd=null,C_={getBoundsInfo:function(){const t=zn(xi),o=jt(xi);return{left:t.x,right:t.x+o.width,top:t.y,bottom:t.y+o.height,width:o.width,height:o.height}},getPositionMetrics:function(t,o,u,g){const R=C_.getBoundsInfo(),k=jt(Qt);return o+k.height<R.bottom?ff(t,o,R,k):g-k.height>R.top?Up(u,g,R,k):o+k.height<document.documentElement.clientHeight?ff(t,o,R,k):g-k.height>document.documentElement.clientTop?Up(u,g,R,k):Lo(t,R,k)}},Ar={ANIMATION_TIME:tu,ARROW_HORIZONTAL_PADDING:ga,ARROW_SIZE:nn,BORDER_SIZE:Zn,PADDING_Y:Vu,TEST_ONLY:C_};Ar.clearContent=eh,Ar.createDom=el,Ar.getContentDiv=Qc,Ar.getOwner=lc,Ar.getPositionX=Eu,Ar.hide=th,Ar.hideIfOwner=Fp,Ar.hideWithoutAnimation=xa,Ar.isVisible=uc,Ar.repositionForWindowResize=mf,Ar.setBoundsElement=Qh,Ar.setColour=yu,Ar.show=Pp,Ar.showPositionedByBlock=Hr,Ar.showPositionedByField=ed;var Ua={};Ua.commonWordPrefix=nh,Ua.commonWordSuffix=Ss,Ua.isNumber=n.isNumber$$module$build$src$core$utils$string,Ua.shortestStringLength=Su,Ua.wrap=n.wrap$$module$build$src$core$utils$string;var Vf=void 0,M_=!1,T0=!1,RT=50,wT=0,Wf=0,IT=0,R_=0,nu=null,eg=null,OT=0,w_=10,pb=10,dA=750,mb=5,sr=null,iu={HOVER_MS:dA,LIMIT:RT,MARGINS:mb,OFFSET_X:OT,OFFSET_Y:w_,RADIUS_OK:pb};iu.bindMouseEvents=nd,iu.block=zp,iu.createDom=Gp,iu.dispose=sd,iu.getCustomTooltip=l_,iu.getDiv=tl,iu.getTooltipOfObject=wr,iu.hide=nl,iu.isVisible=Do,iu.setCustomTooltip=cc,iu.unbindMouseEvents=id,iu.unblock=Ir;var gb=.45,gi=.65,_b={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Fa={};Fa.blend=Bl,Fa.getHsvSaturation=ro,Fa.getHsvValue=go,Fa.hexToRgb=il,Fa.hsvToHex=rd,Fa.hueToHex=br,Fa.names=_b,Fa.parse=Bo,Fa.rgbToHex=xu,Fa.setHsvSaturation=vm,Fa.setHsvValue=c_;var E0={};E0.checkMessageReferences=Ca,E0.parseBlockColour=dc,E0.replaceMessageReferences=mi,E0.tokenizeInterpolation=Or;var Ji=class{get size_(){return this.size}set size_(t){this.size=t}constructor(t,o,u){this.DEFAULT_VALUE=null,this.name=void 0,this.tooltip=this.validator_=null,this.size=new wn(0,0),this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.id_=null,this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new wn(0,0),t!==Ji.SKIP_SETUP&&(u&&this.configure_(u),this.setValue(t),o&&this.setValidator(o))}configure_(t){t.tooltip&&this.setTooltip(mi(t.tooltip))}setSourceBlock(t){if(this.sourceBlock_)throw Error("Field already bound to a block");if(this.sourceBlock_=t,t.id.includes("_field"))throw Error(`Field ID indicator is contained in block ID. This may cause problems with focus: ${t.id}.`);this.id_=`${t.id}_field_${G()}`}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){if(!this.fieldGroup_){var t=this.id_;if(!t)throw Error("Expected ID to be defined prior to init.");this.fieldGroup_=Re(qe.G,{id:t}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour()}}initView(){this.createBorderRect_(),this.createTextElement_(),this.fieldGroup_&&Ye(this.fieldGroup_,"blocklyField")}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=Re(qe.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Re(qe.TEXT,{class:"blocklyText blocklyFieldText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const t=this.getClickTarget_();if(!t)throw Error("A click target has not been set.");nd(t),this.mouseDownWrapper=w(t,"pointerdown",this,this.onMouseDown_)}fromXml(t){this.setValue(t.textContent)}toXml(t){return t.textContent=this.getValue(),t}saveState(t){return t=this.saveLegacyState(Ji),t!==null?t:this.getValue()}loadState(t){this.loadLegacyState(Ji,t)||this.setValue(t)}saveLegacyState(t){return t.prototype.saveState===this.saveState&&t.prototype.toXml!==this.toXml?(t=n.createElement$$module$build$src$core$utils$xml("field"),t.setAttribute("name",this.name||""),_t(this.toXml(t)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(t,o){return t.prototype.loadState===this.loadState&&t.prototype.fromXml!==this.fromXml?(this.fromXml(n.textToDom$$module$build$src$core$utils$xml(o)),!0):!1}dispose(){Fp(this),oa(this);let t;(t=this.getSourceBlock())!=null&&t.isDeadOrDying()||we(this.fieldGroup_),this.disposed=!0}updateEditable(){const t=this.fieldGroup_,o=this.getSourceBlock();this.EDITABLE&&t&&o&&(this.enabled_&&o.isEditable()?(Ye(t,"blocklyEditableField"),Se(t,"blocklyNonEditableField")):(Ye(t,"blocklyNonEditableField"),Se(t,"blocklyEditableField")))}setEnabled(t){this.enabled_=t,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Ji.prototype.showEditor_}isClickableInFlyout(t){return!t}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t}isVisible(){return this.visible_}setVisible(t){if(this.visible_!==t){this.visible_=t;var o=this.fieldGroup_;o&&(o.style.display=t?"block":"none")}}setValidator(t){this.validator_=t}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(t){this.isClickable()&&this.showEditor_(t)}showEditor_(t){}repositionForWindowResize(){return!1}updateSize_(t){const o=this.getConstants();t=t!==void 0?t:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let u=t*2,g=o.FIELD_TEXT_HEIGHT,R=0;this.textElement_&&(R=et(this.textElement_),u+=R),this.isFullBlockField()||(g=Math.max(g,o.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=g,this.size_.width=u,this.positionTextElement_(t,R),this.positionBorderRect_()}positionTextElement_(t,o){if(this.textElement_){var u=this.getConstants(),g=this.size_.height/2,R;this.textElement_.setAttribute("x",String((R=this.getSourceBlock())!=null&&R.RTL?this.size_.width-o-t:t)),this.textElement_.setAttribute("y",String(u.FIELD_TEXT_BASELINE_CENTER?g:g-u.FIELD_TEXT_HEIGHT/2+u.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_&&(this.render_(),this.isDirty_=!1),this.size_):new wn(0,0)}getScaledBBox(){let t;var o=this.getSourceBlock();if(!o)throw new rr;if(this.isFullBlockField()){var u=this.sourceBlock_.getHeightWidth();const g=o.workspace.scale;t=this.getAbsoluteXY_(),o=(u.width+1)*g,u=(u.height+1)*g,fb?(t.x+=1.5*g,t.y+=1.5*g):(t.x-=.5*g,t.y-=.5*g)}else u=this.borderRect_.getBoundingClientRect(),t=zn(this.borderRect_),o=u.width,u=u.height;return new pn(t.y,t.y+u,t.x,t.x+o)}onLocationChange(t){}getDisplayText_(){let t=this.getText();return t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"…"),t=t.replace(/\s/g,Ji.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="‏"),t}getText(){const t=this.getText_();return String(t!==null?t:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(t,o=!0){if(t!==null){var u=n.getGroup$$module$build$src$core$events$utils();u||n.setGroup$$module$build$src$core$events$utils(!0);try{const St=this.doClassValidation_(t),bn=this.processValidation(t,St,o);if(!(bn instanceof Error)){var g,R=(g=this.getValidator())==null?void 0:g.call(this,bn),k=this.processValidation(bn,R,o);if(!(k instanceof Error)){var ue=this.sourceBlock_;if(!ue||!ue.disposed){var xe=this.getValue();xe===k?this.doValueUpdate_(k):(this.doValueUpdate_(k),o&&ue&&Fe()&&K(new(Ke(tt.BLOCK_CHANGE))(ue,"field",this.name||null,xe,k)),this.isDirty_&&this.forceRerender())}}}}finally{n.setGroup$$module$build$src$core$events$utils(u)}}}processValidation(t,o,u){return o===null?(this.doValueInvalid_(t,u),this.isDirty_&&this.forceRerender(),Error()):o===void 0?t:o}getValue(){return this.value_}doClassValidation_(t){return t??null}doValueUpdate_(t){this.value_=t,this.isDirty_=!0}doValueInvalid_(t,o){}onMouseDown_(t){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)}setTooltip(t){t||t===""||(t=this.sourceBlock_);const o=this.getClickTarget_();o?o.tooltip=t:this.tooltip=t}getTooltip(){const t=this.getClickTarget_();return wr(t||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return zn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let t=null;const o=this.getSourceBlock();if(!o)throw new rr;const u=o.inputList;for(let g=0;g<o.inputList.length;g++){const R=u[g],k=R.fieldRow;for(let ue=0;ue<k.length;ue++)if(k[ue]===this){t=R;break}}return t}getFlipRtl(){return!1}onShortcut(t){return!1}getFocusableElement(){if(!this.fieldGroup_)throw Error("This field currently has no representative DOM element.");return this.fieldGroup_}getFocusableTree(){const t=this.getSourceBlock();if(!t)throw new rr;return t.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}static fromJson(t){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Ji.NBSP=" ",Ji.SKIP_SETUP=Symbol("SKIP_SETUP");var rr=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},_h=null,I_=null,wd=null,vb="blocklyWidgetDiv",tg="",ng="",bl,O_=null,yl={};yl.createDom=bf,yl.getDiv=Cu,yl.hide=ih,yl.hideIfOwner=oa,yl.hideIfOwnerIsInWorkspace=od,yl.isVisible=sh,yl.positionWithAnchor=ad,yl.repositionForWindowResize=Mu,yl.show=sl,yl.testOnly_setDiv=fc;var as=null,bb={},Yr=null,S0={};S0.callbackFactory=n.callbackFactory$$module$build$src$core$contextmenu,S0.dispose=Ru,S0.getCurrentBlock=yf,S0.hide=oo,S0.setCurrentBlock=Tf,S0.show=kl;var oi=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(t){if(this.registeredItems.has(t.id))throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registeredItems.set(t.id,t)}unregister(t){if(!this.registeredItems.has(t))throw Error('Menu item with ID "'+t+'" not found.');this.registeredItems.delete(t)}getItem(t){let o;return(o=this.registeredItems.get(t))!=null?o:null}getContextMenuOptions(t,o){const u=[];for(const g of this.registeredItems.values()){if(g.scopeType&&(g.scopeType===N_.BLOCK&&!t.block||g.scopeType===N_.COMMENT&&!t.comment||g.scopeType===N_.WORKSPACE&&!t.workspace))continue;let R;if(R={scope:t,weight:g.weight},g.separator)R=Object.assign({},R,{separator:!0});else{const k=g.preconditionFn(t,o);if(k==="hidden")continue;const ue=typeof g.displayText=="function"?g.displayText(t):g.displayText;R=Object.assign({},R,{text:ue,callback:g.callback,enabled:k==="enabled"})}u.push(R)}return u.sort(function(g,R){return g.weight-R.weight}),u}};(function(t){var o=t.ScopeType||(t.ScopeType={});o.BLOCK="block",o.WORKSPACE="workspace",o.COMMENT="comment",t.registry=new t})(oi||(oi={}));var N_=oi.ScopeType,wc=50,L_=100,fA={BLOCK:wc,BUBBLE:L_},yb=class{constructor(t){this.comment=t,this.startLoc=null,this.workspace=t.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.isReadOnly()}startDrag(){this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(t){this.comment.moveDuringDrag(t)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.comment,wc),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0)}fireDragStartEvent(){const t=new(Ke(tt.COMMENT_DRAG))(this.comment,!0);K(t)}fireDragEndEvent(){const t=new(Ke(tt.COMMENT_DRAG))(this.comment,!1);K(t)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var t=new(Ke(tt.COMMENT_MOVE))(this.comment);t.setReason(["drag"]),t.oldCoordinate_=this.startLoc,t.recordNew(),K(t)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},Tb=new WeakMap,Eb=class{constructor(t,o,u){this.id=t,this.workspace=o,this.container=u}isVisible(){return this.icon.checkVisibility()}getParentComment(){const t=this.workspace.getCommentById(this.id);if(!t)throw Error(`Comment bar button ${this.id} has no corresponding comment`);return t}getSize(t=!1){var o=this.icon.getBBox();return o=pn.from(o),t&&(t=this.getMargin(),o.left-=t,o.top-=t,o.bottom+=t,o.right+=t),o}getMargin(){return(this.container.getBBox().height-this.icon.getBBox().height)/2}getFocusableElement(){return this.icon}getFocusableTree(){return this.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return this.isVisible()}},NT="_collapse_bar_button",pA=class extends Eb{constructor(t,o,u){super(t,o,u),this.id=t,this.workspace=o,this.container=u,this.icon=Re(qe.IMAGE,{class:"blocklyFoldoutIcon",href:`${this.workspace.options.pathToMedia}foldout-icon.svg`,id:`${this.id}${NT}`},this.container),this.bindId=w(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){O(this.bindId)}reposition(){const t=this.getMargin();this.icon.setAttribute("y",`${t}`),this.icon.setAttribute("x",`${t}`)}performAction(t){$();const o=this.getParentComment();o.view.bringToFront(),t&&t instanceof PointerEvent&&F(t)?t.stopPropagation():(o.setCollapsed(!o.isCollapsed()),this.workspace.hideChaff(),t?.stopPropagation())}},Sb="_comment_textarea_",mA=class{constructor(t,o,u){this.workspace=t,this.onFinishEditing=u,this.textChangeListeners=[],this.text="",this.foreignObject=Re(qe.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"}),t=document.createElementNS(fr,"body"),t.setAttribute("xmlns",fr),t.className="blocklyMinimalBody",this.textArea=document.createElementNS(fr,"textarea"),this.textArea.setAttribute("tabindex","-1"),Ye(this.textArea,"blocklyCommentText"),Ye(this.textArea,"blocklyTextarea"),Ye(this.textArea,"blocklyText"),t.appendChild(this.textArea),this.foreignObject.appendChild(t),o&&(this.id=o+Sb,this.textArea.setAttribute("id",this.id)),w(this.textArea,"change",this,this.onTextChange),w(this.textArea,"pointerdown",this,g=>{g.stopPropagation(),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this),$()}),w(this.textArea,"keydown",this,this.handleKeyDown)}getDom(){return this.foreignObject}getText(){return this.text}setText(t){this.textArea.value=t,this.onTextChange()}onTextChange(){const t=this.text;this.text=this.textArea.value;for(let o=this.textChangeListeners.length-1;o>=0;o--)this.textChangeListeners[o](t,this.text)}handleKeyDown(t){(t.key==="Escape"||t.key==="Enter"&&(t.ctrlKey||t.metaKey))&&(this.onFinishEditing&&this.onFinishEditing(),t.stopPropagation())}addTextChangeListener(t){this.textChangeListeners.push(t)}removeTextChangeListener(t){this.textChangeListeners.splice(this.textChangeListeners.indexOf(t),1)}setPlaceholderText(t){this.textArea.placeholder=t}setEditable(t){t?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","true")}updateSize(t,o){this.foreignObject.setAttribute("height",`${t.height-o.height}`),this.foreignObject.setAttribute("width",`${t.width}`),this.foreignObject.setAttribute("y",`${o.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-t.width}`)}getFocusableElement(){return this.textArea}getFocusableTree(){return this.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!!this.id}},gA="_delete_bar_button",Id=class extends Eb{constructor(t,o,u){super(t,o,u),this.id=t,this.workspace=o,this.container=u,this.icon=Re(qe.IMAGE,{class:"blocklyDeleteIcon",href:`${this.workspace.options.pathToMedia}delete-icon.svg`,id:`${this.id}${gA}`},u),this.bindId=w(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){O(this.bindId)}reposition(){const t=this.getMargin();this.icon.setAttribute("x","0");const o=this.container.getBBox();this.icon.setAttribute("y",`${t}`),this.icon.setAttribute("x",`${o.width-this.getSize(!0).getWidth()}`)}performAction(t){$(),t&&t instanceof PointerEvent&&F(t)?t.stopPropagation():(this.getParentComment().dispose(),t?.stopPropagation(),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.workspace))}},ig=class{constructor(t,o){this.workspace=t,this.commentId=o,this.collapsed=!1,this.editable=!0,this.location=new Ot(0,0),this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=Re(qe.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteButton:this.deleteButton,foldoutButton:this.foldoutButton,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot),this.commentEditor=this.createTextArea(),this.resizeHandle=this.createResizeHandle(this.svgRoot,t);let u;(u=t.getLayerManager())==null||u.append(this,wc),this.size=ig.defaultCommentSize,this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Ot(0,0))}createHighlightRect(t){return Re(qe.RECT,{class:"blocklyCommentHighlight"},t)}createTopBar(t){t=Re(qe.G,{class:"blocklyCommentTopbar"},t);const o=Re(qe.RECT,{class:"blocklyCommentTopbarBackground"},t),u=new Id(this.commentId,this.workspace,t),g=new pA(this.commentId,this.workspace,t),R=Re(qe.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},t),k=document.createTextNode("");return R.appendChild(k),{topBarGroup:t,topBarBackground:o,deleteButton:u,foldoutButton:g,textPreview:R,textPreviewNode:k}}createTextArea(){const t=new mA(this.workspace,this.commentId,()=>this.svgRoot.focus());return this.svgRoot.appendChild(t.getDom()),t.addTextChangeListener((o,u)=>{this.updateTextPreview(u),this.setSize(this.size)}),t}getEditorFocusableNode(){return this.commentEditor}createResizeHandle(t,o){return t=Re(qe.IMAGE,{class:"blocklyResizeHandle",href:`${o.options.pathToMedia}resize-handle.svg`},t),w(t,"pointerdown",this,this.onResizePointerDown),t}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(t){const o=this.topBarBackground.getBBox(),u=this.textPreview.getBBox(),g=this.resizeHandle.getBBox();this.size=t=wn.max(t,this.calcMinSize(o)),this.svgRoot.setAttribute("height",`${t.height}`),this.svgRoot.setAttribute("width",`${t.width}`),this.updateHighlightRect(t),this.updateTopBarSize(t),this.commentEditor.updateSize(t,o),this.deleteButton.reposition(),this.foldoutButton.reposition(),this.updateTextPreviewSize(t,o,u),this.updateResizeHandlePosition(t,g)}setSize(t){const o=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(t),this.onSizeChange(o,this.size)}calcMinSize(t){var o;this.updateTextPreview((o=this.commentEditor.getText())!=null?o:"");let u=o=et(this.textPreview);return this.foldoutButton.isVisible()?u+=this.foldoutButton.getSize(!0).getWidth():o&&(u+=4),this.deleteButton.isVisible()?u+=this.deleteButton.getSize(!0).getWidth():o&&(u+=4),new wn(u,t.height+20)}updateHighlightRect(t){this.highlightRect.setAttribute("height",`${t.height}`),this.highlightRect.setAttribute("width",`${t.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-t.width}`)}updateTopBarSize(t){this.topBarBackground.setAttribute("width",`${t.width}`)}updateTextPreviewSize(t,o,u){o=(o.height-u.height)/2;const g=this.foldoutButton.getSize(!0),R=this.deleteButton.getSize(!0);t=t.width-g.getWidth()-R.getWidth(),this.textPreview.setAttribute("x",`${g.getWidth()}`),this.textPreview.setAttribute("y",`${o+u.height/2}`),this.textPreview.setAttribute("width",`${t}`)}updateResizeHandlePosition(t,o){this.resizeHandle.setAttribute("y",`${t.height-o.height}`),this.resizeHandle.setAttribute("x",`${t.width-o.width}`)}onSizeChange(t,o){for(let u=this.sizeChangeListeners.length-1;u>=0;u--)this.sizeChangeListeners[u](t,o)}addSizeChangeListener(t){this.sizeChangeListeners.push(t)}removeSizeChangeListener(t){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(t),1)}onResizePointerDown(t){this.isEditable()&&(this.bringToFront(),F(t)||(this.preResizeSize=this.getSize(),Ma(this.workspace,t,new Ot(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=w(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=w(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),t.stopPropagation())}onResizePointerUp(t){$(),this.resizePointerUpListener&&(O(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(O(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(t){t=ol(this.workspace,t),this.setSizeWithoutFiringEvents(new wn(this.workspace.RTL?-t.x:t.x,t.y))}isCollapsed(){return this.collapsed}setCollapsed(t){(this.collapsed=t)?Ye(this.svgRoot,"blocklyCollapsed"):Se(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let t=this.collapseChangeListeners.length-1;t>=0;t--)this.collapseChangeListeners[t](this.collapsed)}addOnCollapseListener(t){this.collapseChangeListeners.push(t)}removeOnCollapseListener(t){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(t),1)}isEditable(){return this.editable}setEditable(t){(this.editable=t)?(Ye(this.svgRoot,"blocklyEditable"),Se(this.svgRoot,"blocklyReadonly")):(Se(this.svgRoot,"blocklyEditable"),Ye(this.svgRoot,"blocklyReadonly")),this.commentEditor.setEditable(t)}getRelativeToSurfaceXY(){return this.location}moveTo(t){this.location=t,this.svgRoot.setAttribute("transform",`translate(${t.x}, ${t.y})`)}getText(){return this.commentEditor.getText()}setText(t){this.commentEditor.setText(t)}setPlaceholderText(t){this.commentEditor.setPlaceholderText(t)}addTextChangeListener(t){this.commentEditor.addTextChangeListener(t)}removeTextChangeListener(t){this.commentEditor.removeTextChangeListener(t)}updateTextPreview(t){this.textPreviewNode.textContent=this.truncateText(t)}truncateText(t){return t.length>=12?`${t.substring(0,9)}...`:t}bringToFront(){const t=this.svgRoot.parentNode,o=t.childNodes;o[o.length-1]!==this.svgRoot&&t.appendChild(this.svgRoot)}onDeleteDown(t){$(),F(t)||this.dispose(),t.stopPropagation()}dispose(){this.disposing=!0,this.foldoutButton.dispose(),this.deleteButton.dispose(),we(this.svgRoot);for(let t=this.disposeListeners.length-1;t>=0;t--)this.disposeListeners[t]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(t){this.disposeListeners.push(t)}removeDisposeListener(t){this.disposeListeners.splice(this.disposeListeners.indexOf(t),1)}getCommentBarButtons(){return[this.foldoutButton,this.deleteButton]}};ig.defaultCommentSize=new wn(120,100),Wt(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklyCommentText.blocklyActiveFocus {
  border-color: #fc3;
  border-width: 2px;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var sg=class{constructor(t,o){this.workspace=t,this.text="",this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Ot(0,0),this.disposing=this.disposed=!1,this.id=o&&!t.getCommentById(o)?o:D(),this.size=ig.defaultCommentSize,t.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){Fe()&&K(new(Ke(tt.COMMENT_CREATE))(this))}fireDeleteEvent(){Fe()&&K(new(Ke(tt.COMMENT_DELETE))(this))}fireChangeEvent(t,o){Fe()&&K(new(Ke(tt.COMMENT_CHANGE))(this,t,o))}fireCollapseEvent(t){Fe()&&K(new(Ke(tt.COMMENT_COLLAPSE))(this,t))}setText(t){const o=this.text;this.text=t,this.fireChangeEvent(o,t)}getText(){return this.text}setSize(t){const o=new(Ke(tt.COMMENT_RESIZE))(this);this.size=t,o.recordCurrentSizeAsNewSize(),K(o)}getSize(){return this.size}setCollapsed(t){this.collapsed=t,this.fireCollapseEvent(t)}isCollapsed(){return this.collapsed}setEditable(t){this.editable=t}isEditable(){return this.isOwnEditable()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setMovable(t){this.movable=t}isMovable(){return this.isOwnMovable()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnMovable(){return this.movable}setDeletable(t){this.deletable=t}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnDeletable(){return this.deletable}moveTo(t,o){const u=new(Ke(tt.COMMENT_MOVE))(this);o&&u.setReason(o),this.location=t,u.recordNew(),K(u)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},vh=class extends sg{constructor(t,o){super(t,o),this.dragStrategy=new yb(this),this.workspace=t,this.view=new ig(t,this.id),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.view.getSvgRoot().setAttribute("id",this.id),this.addModelUpdateBindings(),w(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),w(this.view.getSvgRoot(),"wheel",this,u=>{u.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((t,o)=>void super.setText(o)),this.view.addSizeChangeListener((t,o)=>void super.setSize(o)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(t){this.view.setText(t)}setPlaceholderText(t){this.view.setPlaceholderText(t)}setSize(t){this.view.setSize(t)}setCollapsed(t){this.view.setCollapsed(t)}setEditable(t){super.setEditable(t),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const t=this.getRelativeToSurfaceXY();var o,u;const g=(u=(o=this.view)==null?void 0:o.getSize())!=null?u:this.getSize();return this.workspace.RTL?(o=t.x-g.width,u=t.x):(o=t.x,u=t.x+g.width),new pn(t.y,t.y+g.height,o,u)}moveBy(t,o,u){const g=this.getRelativeToSurfaceXY();t=new Ot(g.x+t,g.y+o),this.moveTo(t,u)}moveTo(t,o){super.moveTo(t,o),this.view.moveTo(t)}moveDuringDrag(t){this.location=t,this.view.moveTo(t)}setDragging(t){t?Ye(this.getSvgRoot(),"blocklyDragging"):Se(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0;const t=n.getFocusManager$$module$build$src$core$focus_manager();t.getFocusedNode()===this&&setTimeout(()=>t.focusTree(this.workspace),0),this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(t){const o=this.workspace.getGesture(t);o&&(o.handleCommentStart(t,this),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this))}setDeleteStyle(t){t?Ye(this.getSvgRoot(),"blocklyDraggingDelete"):Se(this.getSvgRoot(),"blocklyDraggingDelete")}isCopyable(){return this.isOwnMovable()&&this.isOwnDeletable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(t){this.dragStrategy.drag(t)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ye(this.getSvgRoot(),"blocklySelected"),ye(this)}unselect(){Se(this.getSvgRoot(),"blocklySelected"),ye(null)}toCopyData(){return{paster:ii.TYPE,commentState:ei(this,{addCoordinates:!0})}}showContextMenu(t){const o=oi.registry.getContextMenuOptions({comment:this,focusedNode:this},t);let u;u=t instanceof PointerEvent?new Ot(t.clientX,t.clientY):ot(this.workspace,this.getRelativeToSurfaceXY()).translate(10,10),kl(t,o,this.workspace.RTL,this.workspace,u)}snapToGrid(){if(!this.isDeadOrDying()){var t=this.workspace.getGrid();if(t!=null&&t.shouldSnap()){var o=this.getRelativeToSurfaceXY();t=t.alignXY(o),t!==o&&this.moveTo(t,["snap"])}}}getEditorFocusableNode(){return this.view.getEditorFocusableNode()}getFocusableElement(){return this.getSvgRoot()}getFocusableTree(){return this.workspace}onNodeFocus(){this.select();let t;(t=this.workspace.getLayerManager())==null||t.append(this,wc)}onNodeBlur(){this.unselect()}canBeFocused(){return!0}},_a={};_a.appendDomToWorkspace=al,_a.blockToDom=Dr,_a.blockToDomWithXY=Lr,_a.clearWorkspaceAndLoadFromXml=h_,_a.deleteNext=Ul,_a.domToBlock=n.domToBlock$$module$build$src$core$xml,_a.domToBlockInternal=ll,_a.domToPrettyText=pc,_a.domToText=Ra,_a.domToVariables=Fi,_a.domToWorkspace=n.domToWorkspace$$module$build$src$core$xml,_a.loadWorkspaceComment=jp,_a.saveWorkspaceComment=ud,_a.variablesToDom=Xp,_a.workspaceToDom=Wp;var D_=class extends Ct{constructor(t){super(t),this.type=tt.BLOCK_CREATE,t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=Lr(t),this.ids=ft(t),this.json=Aa(t,{addCoordinates:!0}))}toJson(){const t=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=Ra(this.xml),t.ids=this.ids,t.json=this.json,this.recordUndo||(t.recordUndo=this.recordUndo),t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new D_),o.xml=n.textToDom$$module$build$src$core$utils$xml(t.xml),o.ids=t.ids,o.json=t.json,t.recordUndo!==void 0&&(o.recordUndo=t.recordUndo),o}run(t){const o=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!s1(o,this.ids))if(t)Dl(this.json,o);else for(t=0;t<this.ids.length;t++){const u=this.ids[t],g=o.getBlockById(u);g?g.dispose(!1):u===this.blockId&&console.warn("Can't uncreate non-existent block: "+u)}}},s1=function(t,o){return o.map(u=>t.getBlockById(u)).filter(u=>u&&u.isShadow()).length===o.length};i(Et.EVENT,tt.BLOCK_CREATE,D_);var su=class extends Yo{constructor(t,o){super(o),this.type=tt.THEME_CHANGE,this.themeName=t}toJson(){const t=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return t.themeName=this.themeName,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new su),o.themeName=t.themeName,o}};i(Et.EVENT,tt.THEME_CHANGE,su);var B_=class extends Yo{constructor(t,o,u,g,R){super(g),this.type=tt.VIEWPORT_CHANGE,this.viewTop=t,this.viewLeft=o,this.scale=u,this.oldScale=R}toJson(){const t=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new B_),o.viewTop=t.viewTop,o.viewLeft=t.viewLeft,o.scale=t.scale,o.oldScale=t.oldScale,o}};i(Et.EVENT,tt.VIEWPORT_CHANGE,B_);var un;(function(t){t[t.INPUT_VALUE=1]="INPUT_VALUE",t[t.OUTPUT_VALUE=2]="OUTPUT_VALUE",t[t.NEXT_STATEMENT=3]="NEXT_STATEMENT",t[t.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(un||(un={}));var A0=class{constructor(t){this.connectionChecker=t,this.connections=[]}addConnection(t,o){o=this.calculateIndexForYPos(o),this.connections.splice(o,0,t)}findIndexOfConnection(t,o){if(!this.connections.length)return-1;const u=this.calculateIndexForYPos(o);if(u>=this.connections.length)return-1;o=t.y;let g=u;for(;g>=0&&this.connections[g].y===o;){if(this.connections[g]===t)return g;g--}for(g=u;g<this.connections.length&&this.connections[g].y===o;){if(this.connections[g]===t)return g;g++}return-1}calculateIndexForYPos(t){if(!this.connections.length)return 0;let o=0,u=this.connections.length;for(;o<u;){const g=Math.floor((o+u)/2);if(this.connections[g].y<t)o=g+1;else if(this.connections[g].y>t)u=g;else{o=g;break}}return o}removeConnection(t,o){if(t=this.findIndexOfConnection(t,o),t===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(t,1)}getNeighbours(t,o){function u(bn){const xr=R-g[bn].x,Us=k-g[bn].y;return Math.sqrt(xr*xr+Us*Us)<=o&&St.push(g[bn]),Us<o}const g=this.connections,R=t.x,k=t.y;t=0;let ue=g.length-2,xe=ue;for(;t<xe;)g[xe].y<k?t=xe:ue=xe,xe=Math.floor((t+ue)/2);const St=[];if(ue=t=xe,g.length){for(;t>=0&&u(t);)t--;do ue++;while(ue<g.length&&u(ue))}return St}isInYRange(t,o,u){return Math.abs(this.connections[t].y-o)<=u}searchForClosest(t,o,u){if(!this.connections.length)return{connection:null,radius:o};const g=t.y,R=t.x;t.x=R+u.x,t.y=g+u.y;var k=this.calculateIndexForYPos(t.y);u=null;let ue=o,xe,St=k-1;for(;St>=0&&this.isInYRange(St,t.y,o);)xe=this.connections[St],this.connectionChecker.canConnect(t,xe,!0,ue)&&(u=xe,ue=xe.distanceFrom(t)),St--;for(;k<this.connections.length&&this.isInYRange(k,t.y,o);)xe=this.connections[k],this.connectionChecker.canConnect(t,xe,!0,ue)&&(u=xe,ue=xe.distanceFrom(t)),k++;return t.x=R,t.y=g,{connection:u,radius:ue}}static init(t){const o=[];return o[un.INPUT_VALUE]=new A0(t),o[un.OUTPUT_VALUE]=new A0(t),o[un.NEXT_STATEMENT]=new A0(t),o[un.PREVIOUS_STATEMENT]=new A0(t),o}},$0=class extends Yo{constructor(t,o,u){super(u),this.type=tt.SELECTED,this.oldElementId=t??void 0,this.newElementId=o??void 0}toJson(){const t=super.toJson();return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new $0),o.oldElementId=t.oldElementId,o.newElementId=t.newElementId,o}};i(Et.EVENT,tt.SELECTED,$0);var Tl=class extends Ct{constructor(t){if(super(t),this.type=tt.BLOCK_DELETE,t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=Lr(t),this.ids=ft(t),this.wasShadow=t.isShadow(),this.oldJson=Aa(t,{addCoordinates:!0})}}toJson(){const t=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.oldXml=Ra(this.oldXml),t.ids=this.ids,t.wasShadow=this.wasShadow,t.oldJson=this.oldJson,this.recordUndo||(t.recordUndo=this.recordUndo),t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new Tl),o.oldXml=n.textToDom$$module$build$src$core$utils$xml(t.oldXml),o.ids=t.ids,o.wasShadow=t.wasShadow||o.oldXml.tagName.toLowerCase()==="shadow",o.oldJson=t.oldJson,t.recordUndo!==void 0&&(o.recordUndo=t.recordUndo),o}run(t){const o=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(t)for(t=0;t<this.ids.length;t++){const u=this.ids[t],g=o.getBlockById(u);g?g.dispose(!1):u===this.blockId&&console.warn("Can't delete non-existent block: "+u)}else Dl(this.oldJson,o)}};i(Et.EVENT,tt.BLOCK_DELETE,Tl);var LT={fromJsonInternal:Em},x0={TEST_ONLY:LT};x0.fromJson=n.fromJson$$module$build$src$core$field_registry,x0.register=aa,x0.unregister=Yp;var Xs=class extends Ji{constructor(t,o,u){super(Ji.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,t!==Ji.SKIP_SETUP&&(this.setOptions(t),u&&this.configure_(u),o&&this.setValidator(o))}fromXml(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)}loadState(t){this.loadLegacyState(Xs,t)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=Re(qe.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Ye(this.borderRect_,"blocklyDropdownRect"),this.fieldGroup_&&(Ye(this.fieldGroup_,"blocklyField"),Ye(this.fieldGroup_,"blocklyDropdownField"))}shouldAddBorderRect_(){let t;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((t=this.getSourceBlock())!=null&&t.isShadow())}createTextArrow_(){this.arrow=Re(qe.TSPAN,{},this.textElement_);let t;this.arrow.appendChild(document.createTextNode((t=this.getSourceBlock())!=null&&t.RTL?Xs.ARROW_CHAR+" ":" "+Xs.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let o;(o=this.getSourceBlock())!=null&&o.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=Re(qe.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(qi,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(t){var o=this.getSourceBlock();if(!o)throw new rr;this.dropdownCreate(),this.menu_&&(this.menu_.openingCoords=t&&typeof t.clientX=="number"?new Ot(t.clientX,t.clientY):null,eh(),t=this.menu_.render(Qc()),Ye(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(o=o.getColour(),t=this.sourceBlock_.getColourTertiary(),yu(o,t)),ed(this,this.dropdownDispose_.bind(this)),Qc().style.height=`${this.menu_.getSize().height}px`,this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour())}dropdownCreate(){const t=this.getSourceBlock();if(!t)throw new rr;const o=new _s;o.setRole(Ns.LISTBOX),this.menu_=o;const u=this.getOptions(!1);this.selectedMenuItem=null;for(let R=0;R<u.length;R++){var g=u[R];if(g===Xs.SEPARATOR){o.addChild(new _l);continue}const[k,ue]=g;$f(k)?(g=new Image(k.width,k.height),g.src=k.src,g.alt=k.alt):g=k,g=new Jo(g,ue),g.setRole(Ns.OPTION),g.setRightToLeft(t.RTL),g.setCheckable(!0),o.addChild(g),g.setChecked(ue===this.value_),ue===this.value_&&(this.selectedMenuItem=g),g.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(t){Fp(this,!0),this.onItemSelected_(this.menu_,t)}onItemSelected_(t,o){this.setValue(o.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(t){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:t&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}setOptions(t){Array.isArray(t)?(this.validateOptions(t),t=this.trimOptions(t),this.menuGenerator_=t.options,this.prefixField=t.prefix||null,this.suffixField=t.suffix||null):this.menuGenerator_=t,this.selectedOption=this.getOptions(!1)[0],this.setValue(this.selectedOption[1])}doClassValidation_(t){return this.getOptions(!0).some(o=>o[1]===t)?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)}doValueUpdate_(t){super.doValueUpdate_(t),t=this.getOptions(!0);for(let o=0,u;u=t[o];o++)u[1]===this.value_&&(this.selectedOption=u)}applyColour(){const t=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",t.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",t.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),t&&this.arrow&&(t.isShadow()?this.arrow.style.fill=t.getColourSecondary():this.arrow.style.fill=t.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const t=this.selectedOption&&this.selectedOption[0];$f(t)?this.renderSelectedImage(t):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(t){const o=this.getSourceBlock();if(!o)throw new rr;this.imageElement.style.display="",this.imageElement.setAttributeNS(qi,"xlink:href",t.src),this.imageElement.setAttribute("height",String(t.height)),this.imageElement.setAttribute("width",String(t.width));const u=Number(t.height);t=Number(t.width);var g=!!this.borderRect_;const R=Math.max(g?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,u+Xs.IMAGE_Y_PADDING);g=g?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let k;k=this.svgArrow?this.positionSVGArrow(t+g,R/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):et(this.arrow),this.size_.width=t+k+g*2,this.size_.height=R;let ue=0;o.RTL?this.imageElement.setAttribute("x",`${g+k}`):(ue=t+k,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${g}`)),this.imageElement.setAttribute("y",String(R/2-u/2)),this.positionTextElement_(ue+g,t+k)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var t=this.getTextElement();Ye(t,"blocklyDropdownText"),t.setAttribute("text-anchor","start");var o=!!this.borderRect_;t=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const u=et(this.getTextElement());o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let g=0;this.svgArrow&&(g=this.positionSVGArrow(u+o,t/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=u+g+o*2,this.size_.height=t,this.positionTextElement_(o,u)}positionSVGArrow(t,o){if(!this.svgArrow)return 0;const u=this.getSourceBlock();if(!u)throw new rr;const g=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,R=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,k=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(u.RTL?g:t+R)+","+o+")"),k+R}getText_(){if(!this.selectedOption)return null;const t=this.selectedOption[0];if($f(t))return t.alt;if(typeof HTMLElement<"u"&&t instanceof HTMLElement){let o,u;return(u=(o=t.title)!=null?o:t.ariaLabel)!=null?u:t.innerText}return typeof t=="string"?t:(console.warn("Can't get text for existing dropdown option. If you're using HTMLElement dropdown options in node, ensure you're using jsdom-global or similar."),null)}static fromJson(t){if(!t.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(t.options,void 0,t)}trimOptions(t){let o=!1;const u=t.map(ue=>{if(ue===Xs.SEPARATOR)return ue;const[xe,St]=ue;return typeof xe=="string"?[mi(xe),St]:(o=!0,[$f(xe)?Object.assign({},xe,{alt:mi(xe.alt)}):Object.assign({},xe),St])});if(o||t.length<2)return{options:u};var g=u.map(([ue])=>ue),R=Su(g);t=nh(g,R);const k=Ss(g,R);return!t&&!k||R<=t+k?{options:u}:(R=t?g[0].substring(0,t-1):void 0,g=k?g[0].substr(1-k):void 0,{options:this.applyTrim(u,t,k),prefix:R,suffix:g})}applyTrim(t,o,u){return t.map(([g,R])=>[g.substring(o,g.length-u),R])}validateOptions(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");let o=!1;for(let u=0;u<t.length;u++){const g=t[u];Array.isArray(g)||g===Xs.SEPARATOR?typeof g[1]!="string"?(o=!0,console.error(`Invalid option[${u}]: Each FieldDropdown option id must be a string. 
          Found ${g[1]} in: ${g}`)):!g[0]||typeof g[0]=="string"||$f(g[0])||typeof HTMLElement<"u"&&g[0]instanceof HTMLElement||(o=!0,console.error(`Invalid option[${u}]: Each FieldDropdown option must have a string 
          label, image description, or HTML element. Found ${g[0]} in: ${g}`)):(o=!0,console.error(`Invalid option[${u}]: Each FieldDropdown option must be an array or
          the string literal 'separator'. Found: ${g}`))}if(o)throw TypeError("Found invalid FieldDropdown options.")}};Xs.SEPARATOR="separator",Xs.ARROW_CHAR="▾",Xs.IMAGE_Y_OFFSET=5,Xs.IMAGE_Y_PADDING=Xs.IMAGE_Y_OFFSET*2,aa("field_dropdown",Xs);var C0=class{constructor(t,o,u,g){this.name=t,this.startHats=!1,this.blockStyles=o||Object.create(null),this.categoryStyles=u||Object.create(null),this.componentStyles=g||Object.create(null),this.fontStyle=Object.create(null),i(Et.THEME,t,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(t,o){this.blockStyles[t]=o}setCategoryStyle(t,o){this.categoryStyles[t]=o}getComponentStyle(t){if(t=this.componentStyles[t],!t)return null;if(typeof t=="string"){const o=this.getComponentStyle(t);if(o)return o}return`${t}`}setComponentStyle(t,o){this.componentStyles[t]=o}setFontStyle(t){this.fontStyle=t}setStartHats(t){this.startHats=t}static defineTheme(t,o){t=t.toLowerCase();const u=new C0(t);let g=o.base;if(g){if(typeof g=="string"){let R;g=(R=p(Et.THEME,g))!=null?R:void 0}g instanceof C0&&(Ve(u,g),u.name=t)}return Ve(u.blockStyles,o.blockStyles),Ve(u.categoryStyles,o.categoryStyles),Ve(u.componentStyles,o.componentStyles),Ve(u.fontStyle,o.fontStyle),o.startHats!==null&&(u.startHats=o.startHats),u}},r1={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},rg={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},k_=new C0("classic",r1,rg),bh=class{constructor(t){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let o=null,u=!1;var g=!1,R=!1,k=!1,ue=!1,xe=!1;const St=!!t.readOnly;if(!St){var bn;o=kt((bn=t.toolbox)!=null?bn:null),u=De(o),g=t.trashcan,g=g===void 0?u:g,R=t.collapse,R=R===void 0?u:R,k=t.comments,k=k===void 0?u:k,ue=t.disable,ue=ue===void 0?u:ue,xe=t.sounds,xe=xe===void 0?!0:xe}bn=t.maxTrashcanContents,g?bn===void 0&&(bn=32):bn=0;const xr=!!t.rtl;let Us=t.horizontalLayout;Us===void 0&&(Us=!1);var Ha=t.toolboxPosition!=="end";Ha=Us?Ha?Kn.TOP:Kn.BOTTOM:Ha===xr?Kn.RIGHT:Kn.LEFT;let w0=t.css;w0===void 0&&(w0=!0);let ep="https://blockly-demo.appspot.com/static/media/";t.media&&(ep=t.media.endsWith("/")?t.media:t.media+"/");const vD=t.oneBasedIndex,FV=t.renderer||"geras",HV=t.plugins||{};let U1=t.modalInputs;U1===void 0&&(U1=!0),this.RTL=xr,this.oneBasedIndex=vD===void 0?!0:vD,this.collapse=R,this.comments=k,this.disable=ue,this.readOnly=St,this.maxBlocks=t.maxBlocks||1/0;let bD;this.maxInstances=(bD=t.maxInstances)!=null?bD:null,this.modalInputs=U1,this.pathToMedia=ep,this.hasCategories=u,this.moveOptions=bh.parseMoveOptions(t,u),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=g,this.maxTrashcanContents=bn,this.hasSounds=xe,this.hasCss=w0,this.horizontalLayout=Us,this.languageTree=o,this.gridOptions=bh.parseGridOptions(t),this.zoomOptions=bh.parseZoomOptions(t),this.toolboxPosition=Ha,this.theme=bh.parseThemeOptions(t),this.renderer=FV;let yD;this.rendererOverrides=(yD=t.rendererOverrides)!=null?yD:null;let TD;this.parentWorkspace=(TD=t.parentWorkspace)!=null?TD:null,this.plugins=HV}static parseMoveOptions(t,o){const u=t.move||{},g={};return u.scrollbars===void 0&&t.scrollbars===void 0?g.scrollbars=o:typeof u.scrollbars=="object"?(g.scrollbars={horizontal:!!u.scrollbars.horizontal,vertical:!!u.scrollbars.vertical},g.scrollbars.horizontal&&g.scrollbars.vertical?g.scrollbars=!0:g.scrollbars.horizontal||g.scrollbars.vertical||(g.scrollbars=!1)):g.scrollbars=!!u.scrollbars||!!t.scrollbars,g.wheel=g.scrollbars&&u.wheel!==void 0?!!u.wheel:typeof g.scrollbars=="object",g.drag=g.scrollbars?u.drag===void 0?!0:!!u.drag:!1,g}static parseZoomOptions(t){t=t.zoom||{};const o={};return o.controls=t.controls===void 0?!1:!!t.controls,o.wheel=t.wheel===void 0?!1:!!t.wheel,o.startScale=t.startScale===void 0?1:Number(t.startScale),o.maxScale=t.maxScale===void 0?3:Number(t.maxScale),o.minScale=t.minScale===void 0?.3:Number(t.minScale),o.scaleSpeed=t.scaleSpeed===void 0?1.2:Number(t.scaleSpeed),o.pinch=t.pinch===void 0?o.wheel||o.controls:!!t.pinch,o}static parseGridOptions(t){t=t.grid||{};const o={};return o.spacing=Number(t.spacing)||0,o.colour=t.colour||"#888",o.length=t.length===void 0?1:Number(t.length),o.snap=o.spacing>0&&!!t.snap,o}static parseThemeOptions(t){return t=t.theme||k_,typeof t=="string"?p(Et.THEME,t):t instanceof C0?t:C0.defineTheme(t.name||"builtin"+G(),t)}},_A=class{constructor(t,o){this.bubble=t,this.workspace=o,this.startLoc=null}isMovable(){return!0}startDrag(){this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(t){this.bubble.moveDuringDrag(t)}endDrag(){this.workspace.setResizesEnabled(!0);let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.bubble,L_),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},ru,ls=class{constructor(t,o,u,g){this.workspace=t,this.anchor=o,this.ownerRect=u,this.size=new wn(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new _A(this,this.workspace),this.id=G(),this.svgRoot=Re(qe.G,{class:"blocklyBubble"},t.getBubbleCanvas()),t=Re(qe.G,{class:"blocklyEmboss"},this.svgRoot),this.tail=Re(qe.PATH,{class:"blocklyBubbleTail"},t),this.background=Re(qe.RECT,{class:"blocklyDraggable",x:0,y:0,rx:ru.BORDER_WIDTH,ry:ru.BORDER_WIDTH},t),this.contentContainer=Re(qe.G,{},this.svgRoot),this.focusableElement=g??this.svgRoot,this.focusableElement.setAttribute("id",this.id),w(this.background,"pointerdown",this,this.onMouseDown)}dispose(){we(this.svgRoot),this.disposed=!0}setAnchorLocation(t,o=!1){this.anchor=t,o?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(t,o){this.relativeLeft=t,this.relativeTop=o,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(t,o=!1){t.width=Math.max(t.width,ru.MIN_SIZE),t.height=Math.max(t.height,ru.MIN_SIZE),this.size=t,this.background.setAttribute("width",`${t.width}`),this.background.setAttribute("height",`${t.height}`),o?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(t){this.colour=t,this.tail.setAttribute("fill",t),this.background.setAttribute("fill",t)}onMouseDown(t){let o;(o=this.workspace.getGesture(t))==null||o.handleBubbleStart(t,this),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}positionRelativeToAnchor(){let t=this.anchor.x;t=this.workspace.RTL?t-(this.relativeLeft+this.size.width):t+this.relativeLeft,this.moveTo(t,this.relativeTop+this.anchor.y)}moveTo(t,o){this.svgRoot.setAttribute("transform",`translate(${t}, ${o})`)}positionByRect(t=new pn(0,0,0,0)){var o=this.workspace.getMetricsManager().getViewMetrics(!0),u=this.getOptimalRelativeLeft(o),g=this.getOptimalRelativeTop(o);const R={x:u,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},k={x:-this.size.width-30,y:g};g={x:t.getWidth(),y:g};var ue={x:u,y:t.getHeight()};u=t.getWidth()<t.getHeight()?g:ue,t=t.getWidth()<t.getHeight()?ue:g,g=this.getOverlap(R,o),ue=this.getOverlap(k,o);const xe=this.getOverlap(u,o);o=this.getOverlap(t,o),o=Math.max(g,ue,xe,o),g===o?(this.relativeLeft=R.x,this.relativeTop=R.y):ue===o?(this.relativeLeft=k.x,this.relativeTop=k.y):xe===o?(this.relativeLeft=u.x,this.relativeTop=u.y):(this.relativeLeft=t.x,this.relativeTop=t.y),this.positionRelativeToAnchor()}getOverlap(t,o){var u=this.workspace.RTL?this.anchor.x-t.x-this.size.width:t.x+this.anchor.x;return t=t.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(u+this.size.width,o.left+o.width)-Math.max(u,o.left))*(Math.min(t+this.size.height,o.top+o.height)-Math.max(t,o.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(t){let o=-this.size.width/4;if(this.size.width>t.width)return o;if(t=this.getWorkspaceViewRect(t),this.workspace.RTL){var u=this.anchor.x-o;u-this.size.width<t.left?o=-(t.left-this.anchor.x+this.size.width):u>t.right&&(o=-(t.right-this.anchor.x))}else{u=o+this.anchor.x;const g=u+this.size.width;u<t.left?o=t.left-this.anchor.x:g>t.right&&(o=t.right-this.anchor.x-this.size.width)}return o}getOptimalRelativeTop(t){let o=-this.size.height/4;if(this.size.height>t.height)return o;const u=this.anchor.y+o,g=u+this.size.height;return t=this.getWorkspaceViewRect(t),u<t.top?o=t.top-this.anchor.y:g>t.bottom&&(o=t.bottom-this.anchor.y-this.size.height),o}getWorkspaceViewRect(t){const o=t.top;let u=t.top+t.height,g=t.left;return t=t.left+t.width,u-=this.getScrollbarThickness(),this.workspace.RTL?g-=this.getScrollbarThickness():t-=this.getScrollbarThickness(),new pn(o,u,g,t)}getScrollbarThickness(){return rs.scrollbarThickness/this.workspace.scale}renderTail(){const t=[];var o=this.size.width/2,u=this.size.height/2,g=-this.relativeLeft,R=-this.relativeTop;if(o===g&&u===R)t.push("M "+o+","+u);else{R-=u,g-=o,this.workspace.RTL&&(g*=-1);var k=Math.sqrt(R*R+g*g),ue=Math.acos(g/k);R<0&&(ue=2*Math.PI-ue);var xe=ue+Math.PI/2;xe>Math.PI*2&&(xe-=Math.PI*2);var St=Math.sin(xe);const xr=Math.cos(xe);let Us=(this.size.width+this.size.height)/ru.TAIL_THICKNESS;Us=Math.min(Us,this.size.width,this.size.height)/4,xe=1-ru.ANCHOR_RADIUS/k,g=o+xe*g,R=u+xe*R,xe=o+Us*xr;const Ha=u+Us*St;o-=Us*xr,u-=Us*St,St=pm(this.workspace.RTL?-ru.TAIL_ANGLE:ru.TAIL_ANGLE),St=ue+St,St>Math.PI*2&&(St-=Math.PI*2),ue=Math.sin(St)*k/ru.TAIL_BEND,k=Math.cos(St)*k/ru.TAIL_BEND,t.push("M"+xe+","+Ha),t.push("C"+(xe+k)+","+(Ha+ue)+" "+g+","+R+" "+g+","+R),t.push("C"+g+","+R+" "+(o+k)+","+(u+ue)+" "+o+","+u)}t.push("z");let bn;(bn=this.tail)==null||bn.setAttribute("d",t.join(" "))}bringToFront(){let t;const o=(t=this.svgRoot)==null?void 0:t.parentNode;return this.svgRoot&&o?.lastChild!==this.svgRoot?(o?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Ot(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(t){this.moveTo(t.x,t.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-t.x-this.size.width:t.x-this.anchor.x,this.relativeTop=t.y-this.anchor.y,this.renderTail()}setDragging(t){}setDeleteStyle(t){}isDeletable(){return!1}showContextMenu(t){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(t){this.dragStrategy.drag(t)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){ye(this)}unselect(){ye(null)}getFocusableElement(){return this.focusableElement}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.bringToFront()}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};ru=ls,ls.BORDER_WIDTH=6,ls.DOUBLE_BORDER=ru.BORDER_WIDTH*2,ls.MIN_SIZE=ru.DOUBLE_BORDER,ls.TAIL_THICKNESS=1,ls.TAIL_ANGLE=20,ls.TAIL_BEND=4,ls.ANCHOR_RADIUS=8;var Od=class extends ls{constructor(t,o,u,g){super(o,u,g),this.workspace=o,this.anchor=u,this.ownerRect=g,this.autoLayout=!0,o=new bh(t),this.validateWorkspaceOptions(o),this.svgDialog=Re(qe.SVG,{x:ls.BORDER_WIDTH,y:ls.BORDER_WIDTH},this.contentContainer),t.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new bh(t)),this.miniWorkspace.internalIsMutator=!0,t=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(t),o.languageTree&&(t.insertBefore(this.miniWorkspace.addFlyout(qe.G),this.miniWorkspace.getCanvas()),t=this.miniWorkspace.getFlyout(),t?.init(this.miniWorkspace),t?.show(o.languageTree)),Ye(this.svgRoot,"blocklyMiniWorkspaceBubble"),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let R,k;(R=this.miniWorkspace.getFlyout())==null||(k=R.getWorkspace())==null||k.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(t){this.miniWorkspace.addChangeListener(t)}validateWorkspaceOptions(t){if(t.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(t.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(t.zoomOptions.controls||t.zoomOptions.wheel||t.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(t.moveOptions.scrollbars||t.moveOptions.wheel||t.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(t.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress)for(const t of this.miniWorkspace.getTopBlocks(!1)){const o=t.getRelativeToSurfaceXY();if(o.y<20&&t.moveBy(0,20-o.y),t.RTL){let u=-20;const g=this.miniWorkspace.getFlyout();g&&(u-=g.getWidth()),o.x>u&&t.moveBy(u-o.x,0)}else o.x<20&&t.moveBy(20-o.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress){this.autoLayout&&(this.autoLayout=!this.miniWorkspace.keyboardMoveInProgress);var t=this.getSize(),o=this.calculateWorkspaceSize();Math.abs(t.width-o.width)<Od.MINIMUM_VIEW_CHANGE&&Math.abs(t.height-o.height)<Od.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${o.width}px`),this.svgDialog.setAttribute("height",`${o.height}px`),this.miniWorkspace.setCachedParentSvgSize(o.width,o.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${o.width}, 0)`),this.setSize(new wn(o.width+ls.DOUBLE_BORDER,o.height+ls.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var t=this.miniWorkspace.getCanvas().getBBox();let o=t.width+Od.MARGIN;t=t.height+Od.MARGIN;const u=this.miniWorkspace.getFlyout();if(u){const g=u.getWorkspace().getMetricsManager().getScrollMetrics();t=Math.max(t,g.height+20),o+=u.getWidth()}return new wn(o,t)}updateBlockStyles(){for(var t of this.miniWorkspace.getAllBlocks(!1))t.setStyle(t.getStyleName());let o;if(t=(o=this.miniWorkspace.getFlyout())==null?void 0:o.getWorkspace())for(const u of t.getAllBlocks(!1))u.setStyle(u.getStyleName())}moveDuringDrag(t){super.moveDuringDrag(t),this.autoLayout=!1}moveTo(t,o){super.moveTo(t,o),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(t){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Od.MINIMUM_VIEW_CHANGE=10,Od.MARGIN=ls.DOUBLE_BORDER*3;var P_=class{constructor(t){this.sourceBlock=t,this.offsetInBlock=new Ot(0,0),this.workspaceLocation=new Ot(0,0),this.svgRoot=null,this.tooltip=t,this.id=G()}getType(){throw Error("Icons must implement getType")}initView(t){if(!this.svgRoot){var o=this.sourceBlock;this.svgRoot=Re(qe.G,{class:"blocklyIconGroup",id:this.id}),o.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),w(this.svgRoot,"pointerdown",this,t),this.svgRoot.tooltip=this,nd(this.svgRoot)}}dispose(){id(this.svgRoot),we(this.svgRoot)}getWeight(){return-1}getSize(){return new wn(0,0)}setTooltip(t){this.tooltip=t??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",ac(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(t){this.offsetInBlock=t,this.updateSvgRootOffset()}updateSvgRootOffset(){let t;(t=this.svgRoot)==null||t.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(t){this.workspaceLocation=Ot.sum(t,this.offsetInBlock)}onClick(){}isClickableInFlyout(t){return!0}getFocusableElement(){const t=this.svgRoot;if(!t)throw Error("Attempting to focus uninitialized icon.");return t}getFocusableTree(){return this.sourceBlock.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getSourceBlock(){return this.sourceBlock}},Ab,U_;Ab=17,U_=16,n.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends P_{constructor(t,o){super(o),this.flyoutBlockTypes=t,this.sourceBlock=o,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(t){this.svgRoot||(super.initView(t),Re(qe.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),Re(qe.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),Re(qe.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Ye(this.svgRoot,"blocklyMutatorIcon"))}dispose(){super.dispose();let t;(t=this.miniWorkspaceBubble)==null||t.dispose()}getWeight(){return n.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new wn(Ab,Ab)}applyColour(){super.applyColour();let t;(t=this.miniWorkspaceBubble)==null||t.setColour(this.sourceBlock.getColour());let o;(o=this.miniWorkspaceBubble)==null||o.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(t){super.onLocationChange(t);let o;(o=this.miniWorkspaceBubble)==null||o.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(t){const o=this;return(0,ut.asyncExecutePromiseGeneratorFunction)(function*(){if(o.bubbleIsVisible()!==t){if(yield Gn(),t){o.miniWorkspaceBubble=new Od(o.getMiniWorkspaceConfig(),o.sourceBlock.workspace,o.getAnchorLocation(),o.getBubbleOwnerRect()),o.applyColour(),o.createRootBlock(),o.addSaveConnectionsListener();let u;(u=o.miniWorkspaceBubble)==null||u.addWorkspaceChangeListener(o.createMiniWorkspaceChangeListener())}else{let u;(u=o.miniWorkspaceBubble)==null||u.dispose(),o.miniWorkspaceBubble=null,o.saveConnectionsListener&&o.sourceBlock.workspace.removeChangeListener(o.saveConnectionsListener),o.saveConnectionsListener=null}K(new(Ke(tt.BUBBLE_OPEN))(o.sourceBlock,t,"mutator"))}})}getBubble(){return this.miniWorkspaceBubble}getMiniWorkspaceConfig(){let t;const o={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(t=this.sourceBlock.workspace.options.rendererOverrides)!=null?t:void 0};return this.flyoutBlockTypes.length&&(o.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(u=>({kind:"block",type:u}))}),o}getAnchorLocation(){const t=Ab/2;return Ot.sum(this.workspaceLocation,new Ot(t,t))}getBubbleOwnerRect(){const t=this.sourceBlock.getSvgRoot().getBBox();return new pn(t.y,t.y+t.height,t.x,t.x+t.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var t of this.rootBlock.getDescendants(!1))t.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let o,u,g,R;t=(R=(o=this.miniWorkspaceBubble)==null||(u=o.getWorkspace())==null||(g=u.getFlyout())==null?void 0:g.getWidth())!=null?R:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(t+U_):U_,U_)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return t=>{n.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(t)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(t){return t.isUiEvent||Z(t)||j(t)&&t.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var t=n.getGroup$$module$build$src$core$events$utils();t||n.setGroup$$module$build$src$core$events$utils(!0);var o=zt.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var u=zt.getExtraBlockState_(this.sourceBlock);o!==u&&K(new(Ke(tt.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,o,u)),n.setGroup$$module$build$src$core$events$utils(t)}}getWorkspace(){let t;return(t=this.miniWorkspaceBubble)==null?void 0:t.getWorkspace()}},n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=je.MUTATOR,n.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,n.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Ic=Object.create(null),F_={allExtensions:Ic};n.register$$module$build$src$core$extensions("parent_tooltip_when_inline",vc);var Wu={TEST_ONLY:F_};Wu.apply=cd,Wu.buildTooltipForDropdown=n.buildTooltipForDropdown$$module$build$src$core$extensions,Wu.buildTooltipWithFieldText=n.buildTooltipWithFieldText$$module$build$src$core$extensions,Wu.isRegistered=Js,Wu.register=n.register$$module$build$src$core$extensions,Wu.registerMixin=n.registerMixin$$module$build$src$core$extensions,Wu.registerMutator=n.registerMutator$$module$build$src$core$extensions,Wu.runAfterPageLoad=Cf,Wu.unregister=d_;var ds;(function(t){t[t.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",t[t.MAC_ENTER=3]="MAC_ENTER",t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.NUM_CENTER=12]="NUM_CENTER",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.PLUS_SIGN=43]="PLUS_SIGN",t[t.PRINT_SCREEN=44]="PRINT_SCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.FF_SEMICOLON=59]="FF_SEMICOLON",t[t.FF_EQUALS=61]="FF_EQUALS",t[t.FF_DASH=173]="FF_DASH",t[t.FF_HASH=163]="FF_HASH",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.AT_SIGN=64]="AT_SIGN",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.META=91]="META",t[t.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",t[t.CONTEXT_MENU=93]="CONTEXT_MENU",t[t.NUM_ZERO=96]="NUM_ZERO",t[t.NUM_ONE=97]="NUM_ONE",t[t.NUM_TWO=98]="NUM_TWO",t[t.NUM_THREE=99]="NUM_THREE",t[t.NUM_FOUR=100]="NUM_FOUR",t[t.NUM_FIVE=101]="NUM_FIVE",t[t.NUM_SIX=102]="NUM_SIX",t[t.NUM_SEVEN=103]="NUM_SEVEN",t[t.NUM_EIGHT=104]="NUM_EIGHT",t[t.NUM_NINE=105]="NUM_NINE",t[t.NUM_MULTIPLY=106]="NUM_MULTIPLY",t[t.NUM_PLUS=107]="NUM_PLUS",t[t.NUM_MINUS=109]="NUM_MINUS",t[t.NUM_PERIOD=110]="NUM_PERIOD",t[t.NUM_DIVISION=111]="NUM_DIVISION",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NUMLOCK=144]="NUMLOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",t[t.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",t[t.SEMICOLON=186]="SEMICOLON",t[t.DASH=189]="DASH",t[t.EQUALS=187]="EQUALS",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD",t[t.SLASH=191]="SLASH",t[t.APOSTROPHE=192]="APOSTROPHE",t[t.TILDE=192]="TILDE",t[t.SINGLE_QUOTE=222]="SINGLE_QUOTE",t[t.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",t[t.BACKSLASH=220]="BACKSLASH",t[t.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",t[t.WIN_KEY=224]="WIN_KEY",t[t.MAC_FF_META=224]="MAC_FF_META",t[t.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",t[t.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",t[t.WIN_IME=229]="WIN_IME",t[t.VK_NONAME=252]="VK_NONAME",t[t.PHANTOM=255]="PHANTOM"})(ds||(ds={}));var El={};El.arc=ps,El.curve=ao,El.line=Iu,El.lineOnAxis=hn,El.lineTo=yr,El.moveBy=ws,El.moveTo=Zs,El.point=cn;var xs={};xs.Coordinate=Ot,xs.KeyCodes=ds,xs.Rect=pn,xs.Size=wn,xs.Svg=qe,xs.aria=Fu,xs.array=xc,xs.browserEvents=Wo,xs.colour=Fa,xs.deprecation=eu,xs.dom=ir,xs.extensions=Wu,xs.idGenerator=La,xs.math=en,xs.object=Jm,xs.parsing=E0,xs.string=Ua,xs.style=Yn,xs.svgMath=Ba,xs.svgPaths=El,xs.toolbox=$i,xs.userAgent=A_,xs.xml=Er;var Ci=class{constructor(t,o){if(this.type=o,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=t,t.id.includes("_connection"))throw Error(`Connection ID indicator is contained in block ID. This will cause problems with focus: ${t.id}.`);this.id=`${t.id}_connection_${G()}`}connect_(t){const o=un.INPUT_VALUE,u=this.getSourceBlock();var g=t.getSourceBlock();t.isConnected()&&t.disconnectInternal(!1);let R;if(this.isConnected()){const ue=this.stashShadowState(),xe=this.targetBlock();xe.isShadow()?xe.dispose(!1):(this.disconnectInternal(),R=xe),this.applyShadowState(ue)}let k;Fe()&&(k=new(Ke(tt.BLOCK_MOVE))(g),k.setReason(["connect"])),Kp(this,t),g.setParent(u),k&&(k.recordNew(),K(k)),R&&(t=this.type===o?R.outputConnection:R.previousConnection)&&((g=Ci.getConnectionForOrphanedConnection(g,t))?t.connect(g):t.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const t=this.targetBlock();t&&!t.isDeadOrDying()&&t.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===un.INPUT_VALUE||this.type===un.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(t){}connect(t){if(this.targetConnection===t)return!0;if(this.getConnectionChecker().canConnect(this,t,!1)){const o=n.getGroup$$module$build$src$core$events$utils();o||n.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n.setGroup$$module$build$src$core$events$utils(o)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(t=!0){const{parentConnection:o,childConnection:u}=this.getParentAndChildConnections();if(!o||!u)throw Error("Source connection not connected.");const g=n.getGroup$$module$build$src$core$events$utils();g||n.setGroup$$module$build$src$core$events$utils(!0);let R;Fe()&&(R=new(Ke(tt.BLOCK_MOVE))(u.getSourceBlock()),R.setReason(["disconnect"]));const k=this.targetConnection;k&&(k.targetConnection=null),this.targetConnection=null,t&&u.getSourceBlock().setParent(null),R&&(R.recordNew(),K(R)),u.getSourceBlock().isShadow()||o.respawnShadow_(),n.setGroup$$module$build$src$core$events$utils(g)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(t,o){if(this.getSourceBlock().isDeadOrDying())return!1;var u;return o=(u=t.getInput(o))==null?void 0:u.connection,u=this.targetBlock(),u&&u!==t||!o||o.targetConnection===this?!1:(o.isConnected()&&o.disconnect(),o.connect(this),!0)}targetBlock(){if(this.isConnected()){let t,o;return(o=(t=this.targetConnection)==null?void 0:t.getSourceBlock())!=null?o:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(t){return t?(Array.isArray(t)||(t=[t]),this.check=t,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(t){this.setShadowStateInternal({shadowDom:t})}getShadowDom(t){return t&&this.targetBlock().isShadow()?Dr(this.targetBlock()):this.shadowDom}setShadowState(t){this.setShadowStateInternal({shadowState:t})}getShadowState(t){return t&&this.targetBlock()&&this.targetBlock().isShadow()?Aa(this.targetBlock()):this.shadowState}neighbours(t){return[]}getParentInput(){let t=null;const o=this.sourceBlock_.inputList;for(let u=0;u<o.length;u++)if(o[u].connection===this){t=o[u];break}return t}toString(){const t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection===this)var o="Output Connection of ";else if(t.previousConnection===this)o="Previous Connection of ";else if(t.nextConnection===this)o="Next Connection of ";else{o=null;for(let u=0,g;g=t.inputList[u];u++)if(g.connection===this){o=g;break}if(o)o='Input "'+o.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return o+t.toDevString()}stashShadowState(){const t=this.getShadowDom(!0),o=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:t,shadowState:o}}applyShadowState({shadowDom:t,shadowState:o}){this.shadowDom=t,this.shadowState=o}setShadowStateInternal({shadowDom:t=null,shadowState:o=null}={}){this.shadowDom=t,this.shadowState=o,this.getSourceBlock().isDeadOrDying()||((t=this.targetBlock())?t.isShadow()?(t.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(t=this.createShadowBlock(!1),this.serializeShadow(t),t&&t.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(t){var o=this.getSourceBlock();const u=this.getShadowState(),g=this.getShadowDom();if(o.isDeadOrDying()||!u&&!g)return null;if(u)return o=Zh(u,o.workspace,{parentConnection:t?this:void 0,isShadow:!0,recordUndo:!1});if(g){if(o=ll(g,o.workspace),t)if(this.type===un.INPUT_VALUE){if(!o.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(o.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===un.NEXT_STATEMENT){if(!o.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(o.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return o}return null}serializeShadow(t){t&&(this.shadowDom=Dr(t),this.shadowState=Aa(t))}static getConnectionForOrphanedConnection(t,o){if(o.type===un.OUTPUT_VALUE)return Sm(t,o.getSourceBlock());t=t.lastConnectionInStack(!0);const u=o.getConnectionChecker();return t&&u.canConnect(o,t,!1)?t:null}};Ci.CAN_CONNECT=0,Ci.REASON_SELF_CONNECTION=1,Ci.REASON_WRONG_TYPE=2,Ci.REASON_TARGET_NULL=3,Ci.REASON_CHECKS_FAILED=4,Ci.REASON_DIFFERENT_WORKSPACES=5,Ci.REASON_SHADOW_PARENT=6,Ci.REASON_DRAG_CHECKS_FAILED=7,Ci.REASON_PREVIOUS_AND_OUTPUT=8;var H_=class extends Error{constructor(t){super(`Tried to append an icon of type ${t.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=t}},$b={};$b.DuplicateIconType=H_,function(t){t[t.LEFT=-1]="LEFT",t[t.CENTRE=0]="CENTRE",t[t.RIGHT=1]="RIGHT"}(n.Align$$module$build$src$core$inputs$align||(n.Align$$module$build$src$core$inputs$align={})),n.Align$$module$build$src$core$inputs$align;var Nd=class extends Ji{constructor(t,o,u){super(Ji.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,t!==Ji.SKIP_SETUP&&(u?this.configure_(u):this.class=o||null,this.setValue(t))}configure_(t){super.configure_(t),t.class&&(this.class=t.class)}initView(){this.createTextElement_(),this.class&&Ye(this.getTextElement(),this.class),this.fieldGroup_&&Ye(this.fieldGroup_,"blocklyLabelField")}doClassValidation_(t){return t==null?null:`${t}`}setClass(t){this.textElement_&&(this.class&&Se(this.textElement_,this.class),t&&Ye(this.textElement_,t)),this.class=t}static fromJson(t){return new this(mi(t.text),void 0,t)}};aa("field_label",Nd),Nd.prototype.DEFAULT_VALUE="";var G_=30,Xf=[];Xf[un.INPUT_VALUE]=un.OUTPUT_VALUE,Xf[un.OUTPUT_VALUE]=un.INPUT_VALUE,Xf[un.NEXT_STATEMENT]=un.PREVIOUS_STATEMENT,Xf[un.PREVIOUS_STATEMENT]=un.NEXT_STATEMENT;var xb="RENAME_VARIABLE_ID",DT="DELETE_VARIABLE_ID",BT=10,$r=class extends Ci{constructor(t,o){super(t,o),this.highlighted=!1,this.targetConnection=null,this.db=t.workspace.connectionDBList[o],this.dbOpposite=t.workspace.connectionDBList[Xf[o]],this.offsetInBlock=new Ot(0,0),this.trackedState=$r.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===$r.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let t,o;(o=(t=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||o.call(t,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(t){const o=this.x-t.x;return t=this.y-t.y,Math.sqrt(o*o+t*t)}bumpAwayFrom(t,o=!1){if(!this.sourceBlock_.workspace.isDragging()){var u=n.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*BT),g=n.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*BT),R=t.sourceBlock_.getRootBlock(),k=this.sourceBlock_.getRootBlock();if(!R.isInFlyout&&!k.isInFlyout){var ue=!0;if(k.isMovable())R.isMovable()&&o&&(g=-g);else if(R.isMovable())ue=!1,u=-u,g=-g;else return;o=ue?t:this,t=ue?this:t,R=ue?k:R,R.RTL&&(u=-u),R.moveBy(o.x+u-t.x,o.y+g-t.y,["bump"])}}}moveTo(t,o){let u=!1;return this.trackedState===$r.TrackedState.WILL_TRACK?(this.db.addConnection(this,o),this.trackedState=$r.TrackedState.TRACKED,u=!0):this.trackedState===$r.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,o),u=!0),this.x=t,this.y=o,u}moveBy(t,o){return this.moveTo(this.x+t,this.y+o)}moveToOffset(t){return this.moveTo(t.x+this.offsetInBlock.x,t.y+this.offsetInBlock.y)}setOffsetInBlock(t,o){this.offsetInBlock.x=t,this.offsetInBlock.y=o}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var t=this.targetConnection;const o=this.targetBlock();t&&o&&(t=Ot.difference(this.offsetInBlock,t.offsetInBlock),o.translate(t.x,t.y))}closest(t,o){return this.dbOpposite.searchForClosest(this,t,o)}highlight(){this.highlighted=!0;const t=this.findHighlightSvg();t&&(t.style.display="")}unhighlight(){this.highlighted=!1;const t=this.findHighlightSvg();t&&(t.style.display="none")}isHighlighted(){return this.highlighted}setTracking(t){t&&this.trackedState===$r.TrackedState.TRACKED||!t&&this.trackedState===$r.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db.addConnection(this,this.y),this.trackedState=$r.TrackedState.TRACKED):(this.trackedState===$r.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=$r.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const t=this.targetBlock().getDescendants(!1);for(let o=0;o<t.length;o++){const u=t[o],g=u.getConnections_(!0);for(let R=0;R<g.length;R++)g[R].setTracking(!1);for(const R of u.getIcons())ac(R)&&R.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let t=[];if(this.type!==un.INPUT_VALUE&&this.type!==un.NEXT_STATEMENT)return t;const o=this.targetBlock();if(o){let u;o.isCollapsed()?(u=[],o.outputConnection&&u.push(o.outputConnection),o.nextConnection&&u.push(o.nextConnection),o.previousConnection&&u.push(o.previousConnection)):u=o.getConnections_(!0);for(let g=0;g<u.length;g++)t.push(...u[g].startTrackingAll());t.length||(t=[o])}return t}onFailedConnect(t){const o=this.getSourceBlock();if(pe()){const u=n.getGroup$$module$build$src$core$events$utils();setTimeout((function(){o.isDisposed()||o.getParent()||(n.setGroup$$module$build$src$core$events$utils(u),this.bumpAwayFrom(t),n.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),n.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(t=!0){const{parentConnection:o,childConnection:u}=this.getParentAndChildConnections();if(o&&u){var g=n.getGroup$$module$build$src$core$events$utils();g||n.setGroup$$module$build$src$core$events$utils(!0);var R=o.getSourceBlock(),k=u.getSourceBlock();super.disconnectInternal(t),R.queueRender(),k.updateDisabled(),k.queueRender(),k.getSvgRoot().style.display="block",n.setGroup$$module$build$src$core$events$utils(g)}}respawnShadow_(){super.respawnShadow_();const t=this.targetBlock();t&&(t.initSvg(),t.queueRender())}neighbours(t){return this.dbOpposite.getNeighbours(this,t)}connect_(t){super.connect_(t);var o=this.getSourceBlock();t=t.getSourceBlock(),o.updateDisabled(),t.updateDisabled(),t.queueRender(),(o=o.getInputWithBlock(t))&&(o=o.isVisible(),t.getSvgRoot().style.display=o?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(t){return super.setCheck(t),this.sourceBlock_.queueRender(),this}showContextMenu(t){const o=oi.registry.getContextMenuOptions({focusedNode:this},t);if(o.length){var u=this.getSourceBlock(),g=u.workspace;if(t instanceof PointerEvent)var R=new Ot(t.clientX,t.clientY);else R=new Ot(this.x,this.y),R=ot(g,R).translate(u.RTL?-5:5,5);kl(t,o,u.RTL,g,R)}}getFocusableElement(){const t=this.findHighlightSvg();if(t)return t;throw Error("No highlight SVG found corresponding to this connection.")}getFocusableTree(){return this.getSourceBlock().workspace}onNodeFocus(){this.highlight()}onNodeBlur(){this.unhighlight()}canBeFocused(){return!0}findHighlightSvg(){return document.getElementById(this.id)}};(function(t){t=t.TrackedState||(t.TrackedState={}),t[t.WILL_TRACK=-1]="WILL_TRACK",t[t.UNTRACKED=0]="UNTRACKED",t[t.TRACKED=1]="TRACKED"})($r||($r={})),$r.TrackedState;var og=class{constructor(t,o){this.name=t,this.sourceBlock=o,this.fieldRow=[],this.align=n.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(t,o){return this.insertFieldAt(this.fieldRow.length,t,o),this}insertFieldAt(t,o,u){if(t<0||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(o||o===""&&u)&&(typeof o=="string"&&(o=n.fromJson$$module$build$src$core$field_registry({type:"field_label",text:o})),o.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(o),o.name=u,o.setVisible(this.isVisible()),o.prefixField&&(t=this.insertFieldAt(t,o.prefixField)),this.fieldRow.splice(t,0,o),t++,o.suffixField&&(t=this.insertFieldAt(t,o.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),t}removeField(t,o){for(let u=0,g;g=this.fieldRow[u];u++)if(g.name===t)return g.dispose(),this.fieldRow.splice(u,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(o)return!1;throw Error('Field "'+t+'" not found.')}isVisible(){return this.visible}setVisible(t){let o=[];if(this.visible===t)return o;this.visible=t;for(let u=0,g;g=this.fieldRow[u];u++)g.setVisible(t);if(this.connection&&this.connection instanceof $r){t?o=this.connection.startTrackingAll():this.connection.stopTrackingAll();const u=this.connection.targetBlock();u&&(u.getSvgRoot().style.display=t?"block":"none")}return o}markDirty(){for(let t=0,o;o=this.fieldRow[t];t++)o.markDirty()}setCheck(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this}setAlign(t){return this.align=t,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const t of this.fieldRow)t.init()}initModel(){for(const t of this.fieldRow)t.initModel()}initField(t){this.sourceBlock.rendered?t.init():t.initModel()}dispose(){for(let t=0,o;o=this.fieldRow[t];t++)o.dispose();this.connection&&this.connection.dispose()}makeConnection(t){return this.sourceBlock.makeConnection_(t)}},yh=class extends og{constructor(t,o){super(t,o),this.name=t,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Ld=class extends og{constructor(t,o){super(t,o),this.name=t,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},va=class extends og{constructor(t,o){if(!t)throw Error("Statement inputs must have a non-empty name");super(t,o),this.name=t,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(un.NEXT_STATEMENT)}},z_;n.ValueInput$$module$build$src$core$inputs$value_input=class extends og{constructor(t,o){if(!t)throw Error("Value inputs must have a non-empty name");super(t,o),this.name=t,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(un.INPUT_VALUE)}},z_={},z_.ValueInput=n.ValueInput$$module$build$src$core$inputs$value_input;var jf=class{constructor(t,o,u){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=t,this.id=u&&!t.getBlockById(u)?u:D(),t.setBlockById(this.id,this),this.xy=new Ot(0,0),this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,o){if(this.type=o,u=As[o],!u||typeof u!="object")throw TypeError("Invalid block definition for type: "+o);Object.assign(this,u)}t.addTopBlock(this),t.addTypedBlock(this),new.target===jf&&this.doInit_()}doInit_(){const t=n.getGroup$$module$build$src$core$events$utils();t||n.setGroup$$module$build$src$core$events$utils(!0);const o=pe();try{typeof this.init=="function"&&(n.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),n.setRecordUndo$$module$build$src$core$events$utils(o)),Fe()&&K(new(Ke(tt.BLOCK_CREATE))(this))}finally{n.setGroup$$module$build$src$core$events$utils(t),n.setRecordUndo$$module$build$src$core$events$utils(o)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(t=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(t),Fe()&&K(new(Ke(tt.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(t=>t.disposeInternal()),this.inputList.forEach(t=>t.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(t=>t.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const t of this.inputList)t.initModel();this.initialized=!0}}unplug(t){this.outputConnection&&this.unplugFromRow(t),this.previousConnection&&this.unplugFromStack(t)}unplugFromRow(t){let o=null,u;(u=this.outputConnection)!=null&&u.isConnected()&&(o=this.outputConnection.targetConnection,this.outputConnection.disconnect()),o&&t&&(t=this.getOnlyValueConnection())&&t.isConnected()&&!t.targetBlock().isShadow()&&(t=t.targetConnection,t?.disconnect(),this.workspace.connectionChecker.canConnect(t,o,!1)?o.connect(t):t?.onFailedConnect(o))}getOnlyValueConnection(){let t=null;for(let o=0;o<this.inputList.length;o++){const u=this.inputList[o].connection;if(u&&u.type===un.INPUT_VALUE&&u.targetConnection){if(t)return null;t=u}}return t}unplugFromStack(t){let o=null;var u;if((u=this.previousConnection)!=null&&u.isConnected()&&(o=this.previousConnection.targetConnection,this.previousConnection.disconnect()),u=this.getNextBlock(),t&&u&&!u.isShadow()){let g,R;t=(R=(g=this.nextConnection)==null?void 0:g.targetConnection)!=null?R:null,t?.disconnect(),o&&this.workspace.connectionChecker.canConnect(o,t,!1)&&o.connect(t)}}getConnections_(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(let o=0,u;u=this.inputList[o];o++)u.connection&&t.push(u.connection);return t}lastConnectionInStack(t){let o=this.nextConnection;for(;o;){const u=o.targetBlock();if(!u||t&&u.isShadow())return o;o=u.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(t){for(let o=0,u;u=this.inputList[o];o++)if(u.connection&&u.connection.targetBlock()===t)return u;return null}getSurroundParent(){let t=this,o;do if(o=t,t=t.getParent(),!t)return null;while(t.getNextBlock()===o);return t}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let t,o=this;do t=o,o=t.parentBlock_;while(o);return t}getTopStackBlock(){let t=this,o;do o=t.getPreviousBlock();while(o&&o.getNextBlock()===t&&(t=o));return t}getChildren(t){if(!t)return this.childBlocks_;t=[];for(let u=0,g;g=this.inputList[u];u++)if(g.connection){var o=g.connection.targetBlock();o&&t.push(o)}return(o=this.getNextBlock())&&t.push(o),t}setParent(t){if(t!==this.parentBlock_){var o=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),u=!!o;if(u&&t&&o!==t)throw Error("Block connected to superior one that is not new parent.");if(!u&&t)throw Error("Block not connected to new parent.");if(u&&!t)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Yt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(t){const o=[this],u=this.getChildren(t);for(let g,R=0;g=u[R];R++)o.push(...g.getDescendants(t));return o}isDeletable(){return this.deletable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnDeletable(){return this.deletable}setDeletable(t){this.deletable=t}isMovable(){return this.movable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnMovable(){return this.movable}setMovable(t){this.movable=t}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable($t(this,!0)):!0}isShadow(){return this.shadow}setShadow(t){this.shadow=t}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(t){this.isInsertionMarker_=t}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setEditable(t){this.editable=t;for(const o of this.getFields())o.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const t of this.inputList)if(t.connection||t.fieldRow.length>1)return!1;return!0}getMatchingConnection(t,o){const u=this.getConnections_(!0);if(t=t.getConnections_(!0),u.length!==t.length)throw Error("Connection lists did not match in length.");for(let g=0;g<t.length;g++)if(t[g]===o)return u[g];return null}setHelpUrl(t){this.helpUrl=t}setTooltip(t){this.tooltip=t}getTooltip(){return wr(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(t){t=dc(t),this.hue=t.hue,this.colour_=t.hex}setStyle(t){this.styleName_=t}setOnChange(t){if(t&&typeof t!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=t,this.onchangeWrapper=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(t){if(typeof t!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(t===void 0?"nothing":t+" of type "+typeof t)+" instead");for(const o of this.getFields())if(o.name===t)return o;return null}*getFields(){for(const t of this.inputList)for(const o of t.fieldRow)yield o}getVars(){const t=[];for(const o of this.getFields())o.referencesVariables()&&t.push(o.getValue());return t}getVarModels(){const t=[];for(const o of this.getFields())if(o.referencesVariables()){const u=this.workspace.getVariableById(o.getValue());u&&t.push(u)}return t}updateVarName(t){for(const o of this.getFields())o.referencesVariables()&&t.getId()===o.getValue()&&o.refreshVariableName()}renameVarById(t,o){for(const u of this.getFields())u.referencesVariables()&&t===u.getValue()&&u.setValue(o)}getFieldValue(t){return(t=this.getField(t))?t.getValue():null}setFieldValue(t,o){const u=this.getField(o);if(!u)throw Error('Field "'+o+'" not found.');u.setValue(t)}setPreviousStatement(t,o){if(t)o===void 0&&(o=null),this.previousConnection||(this.previousConnection=this.makeConnection_(un.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(o);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(t,o){if(t)o===void 0&&(o=null),this.nextConnection||(this.nextConnection=this.makeConnection_(un.NEXT_STATEMENT)),this.nextConnection.setCheck(o);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(t,o){if(t)o===void 0&&(o=null),this.outputConnection||(this.outputConnection=this.makeConnection_(un.OUTPUT_VALUE)),this.outputConnection.setCheck(o);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(t){this.inputsInline!==t&&(K(new(Ke(tt.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1]instanceof yh&&this.inputList[t]instanceof yh)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1]instanceof n.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[t]instanceof yh)return!0;for(t=0;t<this.inputList.length;t++)if(this.inputList[t]instanceof Ld)return!0;return!1}setOutputShape(t){this.outputShape_=t}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}setDisabledReason(t,o){t||this.workspace.options.disable||!this.hasDisabledReason(Vs)||o==Vs||this.setDisabledReason(!1,Vs),this.disabledReasons.has(o)!==t&&(t?this.disabledReasons.add(o):this.disabledReasons.delete(o),t=new(Ke(tt.BLOCK_CHANGE))(this,"disabled",null,!t,t),t.setDisabledReason(o),K(t))}getInheritedDisabled(){let t=this.getSurroundParent();for(;t;){if(!t.isEnabled())return!0;t=t.getSurroundParent()}return!1}hasDisabledReason(t){return this.disabledReasons.has(t)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(t){this.collapsed_!==t&&(K(new(Ke(tt.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)}toString(t,o){o=this.toTokens(o);for(let g=2;g<o.length;g++)o[g-2]==="("&&o[g]===")"&&(o[g-2]=o[g-1],o.splice(g-1,2));let u="";return o=o.reduce((g,R)=>(g=g+(u==="("||R===")"?"":" ")+R,u=R[R.length-1],g),""),o=o.trim()||"???",t&&o.length>t&&(o=o.substring(0,t-3)+"..."),o}toTokens(t="?"){const o=[];for(const g of this.inputList)if(g.name!=fa){for(const R of g.fieldRow)o.push(R.getText());if(g.connection){const R=g.connection.targetBlock();if(R){var u=g.connection;let k=u.getCheck();!k&&u.targetConnection&&(k=u.targetConnection.getCheck()),(u=!!k&&(k.includes("Boolean")||k.includes("Number")))&&o.push("("),o.push(...R.toTokens(t)),u&&o.push(")")}else o.push(t)}}return o}appendValueInput(t){return this.appendInput(new n.ValueInput$$module$build$src$core$inputs$value_input(t,this))}appendStatementInput(t){return this.statementInputCount++,this.appendInput(new va(t,this))}appendDummyInput(t=""){return this.appendInput(new yh(t,this))}appendEndRowInput(t=""){return this.appendInput(new Ld(t,this))}appendInput(t){return this.inputList.push(t),t}appendInputFromRegistry(t,o){return(t=f(Et.INPUT,t,!1))?this.appendInput(new t(o,this)):null}jsonInit(t){var o=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(o+"Must not have both an output and a previousStatement.");for(var u=0;t["args"+u];){if(t["message"+u]===void 0)throw Error(o+`args${u} must have a corresponding message (message${u}).`);u++}if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(o+"Must not have both a colour and a style.");for(t.style?this.jsonInitStyle(t,o):this.jsonInitColour(t,o),u=0;t["message"+u]!==void 0;)this.interpolate(t["message"+u],t["args"+u]||[],t["implicitAlign"+u]||t["lastDummyAlign"+u],o),u++;if(t.inputsInline!==void 0&&(n.disable$$module$build$src$core$events$utils(),this.setInputsInline(t.inputsInline),n.enable$$module$build$src$core$events$utils()),t.output!==void 0&&this.setOutput(!0,t.output),t.outputShape!==void 0&&this.setOutputShape(t.outputShape),t.previousStatement!==void 0&&this.setPreviousStatement(!0,t.previousStatement),t.nextStatement!==void 0&&this.setNextStatement(!0,t.nextStatement),t.tooltip!==void 0&&(u=mi(t.tooltip),this.setTooltip(u)),t.enableContextMenu!==void 0&&(this.contextMenu=!!t.enableContextMenu),t.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!t.suppressPrefixSuffix),t.helpUrl!==void 0&&(u=mi(t.helpUrl),this.setHelpUrl(u)),typeof t.extensions=="string"&&(console.warn(o+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),t.mutator!==void 0&&cd(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(o=0;o<t.length;o++)cd(t[o],this,!1)}jsonInitColour(t,o){if("colour"in t)if(t.colour===void 0)console.warn(o+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch{console.warn(o+"Illegal colour value: ",t)}}}jsonInitStyle(t,o){t=t.style;try{this.setStyle(t)}catch{console.warn(o+"Style does not exist: ",t)}}mixin(t,o){if(o!==void 0&&typeof o!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!o){o=[];for(const u in t)this[u]!==void 0&&o.push(u);if(o.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(o))}Object.assign(this,t)}interpolate(t,o,u,g){t=Or(t),this.validateTokens(t,o.length),o=this.interpolateArguments(t,o,u),u=[];for(let R=0,k;k=o[R];R++)if(this.isInputKeyword(k.type)){if(t=this.inputFromJson(k,g)){for(let ue=0,xe;xe=u[ue];ue++)t.appendField(xe[0],xe[1]);u.length=0}}else(t=this.fieldFromJson(k))&&u.push([t,k.name])}validateTokens(t,o){const u=[];let g=0;for(let R=0;R<t.length;R++){const k=t[R];if(typeof k=="number"){if(k<1||k>o)throw Error('Block "'+this.type+'": Message index %'+k+" out of range.");if(u[k])throw Error('Block "'+this.type+'": Message index %'+k+" duplicated.");u[k]=!0,g++}}if(g!==o)throw Error('Block "'+this.type+'": Message does not reference all '+o+" arg(s).")}interpolateArguments(t,o,u){const g=[];for(let k=0;k<t.length;k++){var R=t[k];if(typeof R=="number"&&(R=o[R-1]),typeof R=="string"){if(R===`
`)R={type:"input_end_row"},u&&(R.align=u);else if(R=this.stringToFieldJson(R),!R)continue}g.push(R)}return(t=g.length)&&!this.isInputKeyword(g[t-1].type)&&(t={type:"input_dummy"},u&&(t.align=u),g.push(t)),g}fieldFromJson(t){const o=n.fromJson$$module$build$src$core$field_registry(t);return!o&&t.alt?typeof t.alt=="string"?(t=this.stringToFieldJson(t.alt))?this.fieldFromJson(t):null:this.fieldFromJson(t.alt):o}inputFromJson(t,o){var u={LEFT:n.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:n.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:n.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:n.Align$$module$build$src$core$inputs$align.CENTRE};let g;switch(t.type){case"input_value":g=this.appendValueInput(t.name);break;case"input_statement":g=this.appendStatementInput(t.name);break;case"input_dummy":g=this.appendDummyInput(t.name);break;case"input_end_row":g=this.appendEndRowInput(t.name);break;default:g=this.appendInputFromRegistry(t.type,t.name)}return g?(t.check&&g.setCheck(t.check),t.align&&(u=u[t.align.toUpperCase()],u===void 0?console.warn(o+"Illegal align value: ",t.align):g.setAlign(u)),g):null}isInputKeyword(t){return t==="input_value"||t==="input_statement"||t==="input_dummy"||t==="input_end_row"||h(Et.INPUT,t)}stringToFieldJson(t){return(t=t.trim())?{type:"field_label",text:t}:null}moveInputBefore(t,o){if(t!==o){var u=-1,g=o?-1:this.inputList.length;for(let R=0,k;k=this.inputList[R];R++)if(k.name===t){if(u=R,g!==-1)break}else if(o&&k.name===o&&(g=R,u!==-1))break;if(u===-1)throw Error('Named input "'+t+'" not found.');if(g===-1)throw Error('Reference input "'+o+'" not found.');this.moveNumberedInputBefore(u,g)}}moveNumberedInputBefore(t,o){if(t===o)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(o>this.inputList.length)throw RangeError("Reference input "+o+" out of bounds.");const u=this.inputList[t];this.inputList.splice(t,1),t<o&&o--,this.inputList.splice(o,0,u)}removeInput(t,o){for(let u=0,g;g=this.inputList[u];u++)if(g.name===t)return g instanceof va&&this.statementInputCount--,g.dispose(),this.inputList.splice(u,1),!0;if(o)return!1;throw Error("Input not found: "+t)}getInput(t){for(let o=0,u;u=this.inputList[o];o++)if(u.name===t)return u;return null}getInputTargetBlock(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()}getCommentText(){let t,o;return(o=(t=this.getIcon(je.COMMENT))==null?void 0:t.getText())!=null?o:null}setCommentText(t){var o;let u;const g=(u=(o=this.getIcon(je.COMMENT))==null?void 0:o.getText())!=null?u:null;if(g!==t){if(t!==null){if(o=this.getIcon(je.COMMENT),!o){if(o=f(Et.ICON,je.COMMENT.toString(),!1),!o)throw Error("No comment icon class is registered, so a comment cannot be set");if(o=new o(this),!Ou(o))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");o=this.addIcon(o)}n.disable$$module$build$src$core$events$utils(),o.setText(t),n.enable$$module$build$src$core$events$utils()}else this.removeIcon(je.COMMENT);K(new(Ke(tt.BLOCK_CHANGE))(this,"comment",null,g,t))}}setWarningText(t,o){}setMutator(t){}addIcon(t){if(this.hasIcon(t.getType()))throw new H_(t);return this.icons.push(t),this.icons.sort((o,u)=>o.getWeight()-u.getWeight()),t}removeIcon(t){if(!this.hasIcon(t))return!1;let o;return(o=this.getIcon(t))==null||o.dispose(),this.icons=this.icons.filter(u=>!u.getType().equals(t)),!0}hasIcon(t){return this.icons.some(o=>o.getType().equals(t))}getIcon(t){return t instanceof je?this.icons.find(o=>o.getType().equals(t)):this.icons.find(o=>o.getType().toString()===t)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(t,o,u){if(this.parentBlock_)throw Error("Block has parent");const g=new(Ke(tt.BLOCK_MOVE))(this);u&&g.setReason(u),this.xy.translate(t,o),g.recordNew(),K(g)}makeConnection_(t){return new Ci(this,t)}allInputsFilled(t){if(t===void 0&&(t=!0),!t&&this.isShadow())return!1;for(let u=0,g;g=this.inputList[u];u++)if(g.connection){var o=g.connection.targetBlock();if(!o||!o.allInputsFilled(t))return!1}return(o=this.getNextBlock())?o.allInputsFilled(t):!0}toDevString(){let t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t}};jf.COLLAPSED_INPUT_NAME=fa,jf.COLLAPSED_FIELD_NAME=Hu;var Cb=null,Dd=null,V_={};V_.connectionUiEffect=ul,V_.disconnectUiEffect=Fl,V_.disconnectUiStop=Hl,V_.disposeUiEffect=Mf;var ag=class{paste(t,o,u){if(!o.isCapacityAvailable(t.typeCounts))return null;u&&(t.blockState.x=u.x,t.blockState.y=u.y),u=u||new Ot(t.blockState.x||0,t.blockState.y||0),n.disable$$module$build$src$core$events$utils();let g;try{g=Dl(t.blockState,o),$m(g,u)}finally{n.enable$$module$build$src$core$events$utils()}if(!g)return g;Fe()&&!g.isShadow()&&K(new(Ke(tt.BLOCK_CREATE))(g));const R=g;return Gn().then(()=>n.getFocusManager$$module$build$src$core$focus_manager().focusNode(R)),g}};ag.TYPE="block",Dn(ag.TYPE,new ag);var W_={};W_.bumpIntoBounds=Gl,W_.bumpIntoBoundsHandler=xm,W_.bumpTopObjectsIntoBounds=gd;var kT=class{constructor(t){this.block=t,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Ot(0,0),this.originalEventGroup="",this.workspace=t.workspace}isMovable(){if(this.block.isShadow()){let t,o;return(o=(t=this.block.getParent())==null?void 0:t.isMovable())!=null?o:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.block.isInFlyout}startDrag(t){if(this.block.isShadow())this.startDraggingShadow(t);else{this.dragging=!0,this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(T(Et.CONNECTION_PREVIEWER,this.workspace.options))(this.block),Qe(),this.workspace.setResizesEnabled(!1),Hl(),t=this.shouldHealStack(t),this.shouldDisconnect(t)&&this.disconnectBlock(t),this.block.setDragging(!0);var o;(o=this.workspace.getLayerManager())==null||o.moveToDragLayer(this.block)}}shouldHealStack(t){return!!t&&(t.altKey||t.ctrlKey||t.metaKey)}startDraggingShadow(t){const o=this.block.getParent();if(!o)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Ot.difference(o.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),o.startDrag(t)}shouldDisconnect(t){return!!(this.block.getParent()||t&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(t){let o,u,g;if(this.startParentConn=(g=(o=this.block.outputConnection)==null?void 0:o.targetConnection)!=null?g:(u=this.block.previousConnection)==null?void 0:u.targetConnection,t){let R;this.startChildConn=(R=this.block.nextConnection)==null?void 0:R.targetConnection}this.block.unplug(t),Fl(this.block)}fireDragStartEvent(){const t=new(Ke(tt.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));K(t)}fireDragEndEvent(){const t=new(Ke(tt.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));K(t)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var t=new(Ke(tt.BLOCK_MOVE))(this.block);t.setReason(["drag"]),t.oldCoordinate=this.startLoc,t.recordNew(),K(t)}}drag(t){if(this.block.isShadow()){let o;(o=this.block.getParent())==null||o.drag(Ot.sum(t,this.dragOffset))}else this.block.moveDuringDrag(t),this.updateConnectionPreview(this.block,Ot.difference(t,this.startLoc))}updateConnectionPreview(t,o){var u=this.connectionCandidate;const g=this.getConnectionCandidate(t,o);if(g){this.connectionCandidate=o=u&&this.currCandidateIsBetter(u,o,g)?u:g;var{local:R,neighbour:k}=o;o=R.type===un.OUTPUT_VALUE||R.type===un.PREVIOUS_STATEMENT;var ue;if(u=k.isConnected()&&!((ue=k.targetBlock())!=null&&ue.isInsertionMarker()),o&&u&&!this.orphanCanConnectAtEnd(t,k.targetBlock(),R.type)){let St;(St=this.connectionPreviewer)==null||St.previewReplacement(R,k,k.targetBlock())}else{var xe;(xe=this.connectionPreviewer)==null||xe.previewConnection(R,k)}}else{let St;(St=this.connectionPreviewer)==null||St.hidePreview(),this.connectionCandidate=null}}orphanCanConnectAtEnd(t,o,u){return!!Ci.getConnectionForOrphanedConnection(t,u===un.OUTPUT_VALUE?o.outputConnection:o.previousConnection)}currCandidateIsBetter(t,o,u){const{local:g,neighbour:R}=t;t=new Ot(g.x,g.y);const k=new Ot(R.x,R.y);return o=Ot.distance(Ot.sum(t,o),k),u.distance>o-n.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(t,o){t=this.getLocalConnections(t);let u=this.getSearchRadius(),g=null;for(const R of t){const{connection:k,radius:ue}=R.closest(u,o);k&&(g={local:R,neighbour:k,distance:ue},u=ue)}return g}getSearchRadius(){return this.connectionCandidate?n.config$$module$build$src$core$config.connectingSnapRadius:n.config$$module$build$src$core$config.snapRadius}getLocalConnections(t){const o=t.getConnections_(!1),u=t.lastConnectionInStack(!0);return u&&u!==t.nextConnection&&o.push(u),o}endDrag(t){if(this.block.isShadow()){let u;(u=this.block.getParent())==null||u.endDrag(t)}else{this.originalEventGroup=n.getGroup$$module$build$src$core$events$utils(),this.fireDragEndEvent(),this.fireMoveEvent(),vt(),Hl();var o;if((o=this.connectionPreviewer)==null||o.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let u;(u=this.workspace.getLayerManager())==null||u.moveOffDragLayer(this.block,wc),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep())}}disposeStep(){const t=n.getGroup$$module$build$src$core$events$utils();n.setGroup$$module$build$src$core$events$utils(this.originalEventGroup),this.block.snapToGrid();let o;(o=this.connectionPreviewer)==null||o.dispose(),this.workspace.setResizesEnabled(!0),n.setGroup$$module$build$src$core$events$utils(t)}applyConnections(t){const{local:o,neighbour:u}=t;o.connect(u);const g=o.isSuperior()?u:o,R=this.block.getRootBlock();Gn().then(()=>{ul(g.getSourceBlock()),setTimeout(()=>{R.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let u;(u=this.block.getParent())==null||u.revertDrag()}else{var t;(t=this.connectionPreviewer)==null||t.hidePreview(),this.connectionCandidate=null;var o;if((o=this.startChildConn)==null||o.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case un.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case un.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let u;(u=this.workspace.getLayerManager())==null||u.moveOffDragLayer(this.block,wc),Gl(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.block.setDragging(!1),this.dragging=!1}}},PT=class extends ls{constructor(t,o,u,g){super(o,u,g),this.text=t,this.workspace=o,this.anchor=u,this.ownerRect=g,this.paragraph=this.stringToSvg(t,this.contentContainer),this.updateBubbleSize(),Ye(this.svgRoot,"blocklyTextBubble")}getText(){return this.text}setText(t){this.text=t,we(this.paragraph),this.paragraph=this.stringToSvg(t,this.contentContainer),this.updateBubbleSize()}stringToSvg(t,o){return o=this.createParagraph(o),t=this.createTextFragments(o,t),this.workspace.RTL&&this.rightAlignTextFragments(o.getBBox().width,t),o}createParagraph(t){return Re(qe.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${ls.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},t)}createTextFragments(t,o){let u=1;return o.split(`
`).map(g=>{const R=Re(qe.TEXT,{y:`${u}em`,x:ls.BORDER_WIDTH},t);return g=document.createTextNode(g),R.appendChild(g),u+=1,R})}rightAlignTextFragments(t,o){for(const u of o)u.setAttribute("text-anchor","start"),u.setAttribute("x",`${t+ls.BORDER_WIDTH}`)}updateBubbleSize(){const t=this.paragraph.getBBox();this.setSize(new wn(t.width+ls.BORDER_WIDTH*2,t.height+ls.BORDER_WIDTH*2),!0)}},X_=17,Oc=class extends P_{constructor(t){super(t),this.sourceBlock=t,this.textMap=new Map,this.textBubble=null}getType(){return Oc.TYPE}initView(t){this.svgRoot||(super.initView(t),Re(qe.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),Re(qe.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),Re(qe.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Ye(this.svgRoot,"blocklyWarningIcon"))}dispose(){super.dispose();let t;(t=this.textBubble)==null||t.dispose()}getWeight(){return Oc.WEIGHT}getSize(){return new wn(X_,X_)}applyColour(){super.applyColour();let t;(t=this.textBubble)==null||t.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(t){super.onLocationChange(t);let o;(o=this.textBubble)==null||o.setAnchorLocation(this.getAnchorLocation())}addMessage(t,o){if(this.textMap.get(o)===t)return this;t?this.textMap.set(o,t):this.textMap.delete(o);let u;return(u=this.textBubble)==null||u.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(t){const o=this;return(0,ut.asyncExecutePromiseGeneratorFunction)(function*(){if(o.bubbleIsVisible()!==t){if(yield Gn(),t)o.textBubble=new PT(o.getText(),o.sourceBlock.workspace,o.getAnchorLocation(),o.getBubbleOwnerRect()),o.applyColour();else{let u;(u=o.textBubble)==null||u.dispose(),o.textBubble=null}K(new(Ke(tt.BUBBLE_OPEN))(o.sourceBlock,t,"warning"))}})}getBubble(){return this.textBubble}getAnchorLocation(){const t=X_/2;return Ot.sum(this.workspaceLocation,new Ot(t,t))}getBubbleOwnerRect(){const t=this.sourceBlock.getSvgRoot().getBBox();return new pn(t.y,t.y+t.height,t.x,t.x+t.width)}};Oc.TYPE=je.WARNING,Oc.WEIGHT=2;var Zi=class extends jf{constructor(t,o,u){if(super(t,o,u),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Ot(0,0),this.dragStrategy=new kT(this),!t.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=t,this.svgGroup=Re(qe.G,{}),o&&Ye(this.svgGroup,o),this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup,this.style),t=this.pathObject.svgPath,t.tooltip=this,nd(t),this.svgGroup.setAttribute("data-id",this.id),t.id=G(),this.doInit_()}initSvg(){if(!this.initialized){for(var t of this.inputList)t.init();for(const o of this.getIcons())o.initView(this.createIconPointerDownListener(o)),o.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),(t=this.getSvgRoot())&&w(t,"pointerdown",this,this.onMouseDown),t.parentNode||this.workspace.getCanvas().appendChild(t),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){this.addSelect(),ye(this)}unselect(){this.removeSelect(),ye(null)}setParent(t){var o=this.parentBlock_;if(t!==o){Qe(),super.setParent(t),vt();var u=this.getSvgRoot();if(!this.workspace.isClearing&&u){var g=this.getRelativeToSurfaceXY(),R=n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode(),k,ue=this.getSvgRoot().contains((k=R?.getFocusableElement())!=null?k:null);t?(t.getSvgRoot().appendChild(u),ue&&R&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(R)):o&&(t=this.workspace.getCanvas().querySelector(".blocklyDragging"),o=t?.parentElement,k=this.workspace.getCanvas(),o===k?k.insertBefore(u,t):(k.appendChild(u),ue&&R&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(R)),this.translate(g.x,g.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const t=this.workspace.getLayerManager();if(!t)throw Error("Cannot calculate position because the workspace has not been appended");let o=0,u=0,g=this.getSvgRoot();if(g)do{const R=Ks(g);o+=R.x,u+=R.y,g=g.parentNode}while(g&&!t.hasLayer(g));return new Ot(o,u)}moveBy(t,o,u){if(this.parentBlock_)throw Error("Block has parent");const g=Fe();let R=null;g&&(R=new(Ke(tt.BLOCK_MOVE))(this),u&&R.setReason(u)),t=new Ot(t,o),o=this.getRelativeToSurfaceXY(),t=Ot.sum(o,t),this.translate(t.x,t.y),this.updateComponentLocations(t),g&&R&&(R.recordNew(),K(R)),this.workspace.resizeContents()}translate(t,o){this.translation=`translate(${t}, ${o})`,this.relativeCoords=new Ot(t,o),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(t,o){const u=this.getRelativeToSurfaceXY();this.moveBy(t.x-u.x,t.y-u.y,o)}moveDuringDrag(t){this.translate(t.x,t.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(t)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t!=null&&t.shouldSnap()){var o=this.getRelativeToSurfaceXY();t=t.alignXY(o),t!==o&&this.moveTo(t,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(t){const o=this.getRelativeToSurfaceXY();let u,g;return this.RTL?(u=o.x-t.width,g=o.x):(u=o.x,g=o.x+t.width),new pn(o.y,o.y+t.height,u,g)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let t=0,o;o=this.inputList[t];t++)o.markDirty()}setCollapsed(t){this.collapsed_!==t&&(super.setCollapsed(t),this.updateCollapsed())}childHasWarning(){const t=this.getChildren(!1);for(const o of t)if(o.getIcon(Oc.TYPE)||o.childHasWarning())return!0;return!1}updateCollapsed(){var t=this.isCollapsed();const o=fa,u=Hu;for(let R=0,k;k=this.inputList[R];R++)k.name!==o&&k.setVisible(!t);for(var g of this.getIcons())g.updateCollapsed();t?(Ye(this.svgGroup,"blocklyCollapsed"),this.childHasWarning()&&this.setWarningText(n.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Zi.COLLAPSED_WARNING_ID),t=this.toString(G_),(g=this.getField(u))?g.setValue(t):(this.getInput(o)||this.appendDummyInput(o)).appendField(new Nd(t),u)):(this.updateDisabled(),this.removeInput(o),Se(this.svgGroup,"blocklyCollapsed"),this.setWarningText(null,Zi.COLLAPSED_WARNING_ID))}onMouseDown(t){if(!this.workspace.isReadOnly()){var o=this.workspace.getGesture(t);o&&o.handleBlockStart(t,this)}}showHelp(){const t=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;t&&window.open(t)}generateContextMenu(t){return this.workspace.isReadOnly()||!this.contextMenu?null:(t=oi.registry.getContextMenuOptions({block:this,focusedNode:this},t),this.customContextMenu&&this.customContextMenu(t),t)}calculateContextMenuLocation(t){if(t instanceof PointerEvent)return new Ot(t.clientX,t.clientY);t=ot(this.workspace,this.getRelativeToSurfaceXY());let o,u;const g=(o=this.inputList.filter(R=>R.isVisible()).flatMap(R=>R.fieldRow).find(R=>R.isVisible()))==null||(u=o.getSvgRoot())==null?void 0:u.getBoundingClientRect();return new Ot(this.RTL?t.x-5:t.x+5,(g&&g.height?g.y+g.height:t.y+this.height)+5)}showContextMenu(t){const o=this.generateContextMenu(t),u=this.calculateContextMenuLocation(t);o&&o.length&&(kl(t,o,this.RTL,this.workspace,u),Tf(this))}updateComponentLocations(t){this.dragging||this.updateConnectionLocations(t),this.updateIconLocations(t),this.updateFieldLocations(t);for(const o of this.getChildren(!1))o.updateComponentLocations(Ot.sum(t,o.relativeCoords))}updateConnectionLocations(t){for(const o of this.getConnections_(!1))o.moveToOffset(t)}updateIconLocations(t){for(const o of this.getIcons())o.onLocationChange(t)}updateFieldLocations(t){for(const o of this.inputList)for(const u of o.fieldRow)u.onLocationChange(t)}addClass(t){Ye(this.svgGroup,t)}removeClass(t){Se(this.svgGroup,t)}setDragging(t){(this.dragging=t)?(this.translation="",Kl.push(...this.getConnections_(!0)),this.addClass("blocklyDragging")):(Kl.length=0,this.removeClass("blocklyDragging"));for(let o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].setDragging(t)}setMovable(t){super.setMovable(t),this.pathObject.updateMovable(t)}setEditable(t){super.setEditable(t),t?Se(this.svgGroup,"blocklyNotEditable"):Ye(this.svgGroup,"blocklyNotEditable"),t=this.getIcons();for(let o=0;o<t.length;o++)t[o].updateEditable()}setShadow(t){super.setShadow(t),this.applyColour()}setInsertionMarker(t){this.isInsertionMarker_!==t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(t,o){this.disposing=!0,sd(),oo();const u=n.getFocusManager$$module$build$src$core$focus_manager();var g,R;if(this.getSvgRoot().contains((R=(g=u.getFocusedNode())==null?void 0:g.getFocusableElement())!=null?R:null)){if(g=this.getParent(),!g){let k;if(R=(k=this.outputConnection)!=null?k:this.previousConnection){let ue;g=(ue=R.closest(0,new Ot(0,0)).connection)==null?void 0:ue.getSourceBlock()}}g?u.focusNode(g):setTimeout(()=>u.focusTree(this.workspace),0)}o&&(this.unplug(t),Mf(this)),super.dispose(!!t),we(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===this&&this.workspace.cancelCurrentGesture(),[...this.warningTextDb.values()].forEach(t=>clearTimeout(t)),this.warningTextDb.clear(),this.getIcons().forEach(t=>t.dispose())}checkAndDelete(){this.workspace.isFlyout||(n.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),n.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:ag.TYPE,blockState:Aa(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:$t(this,!0)}}applyColour(){var t,o;for((o=(t=this.pathObject).applyColour)==null||o.call(t,this),t=this.getIcons(),o=0;o<t.length;o++)t[o].applyColour();for(const u of this.getFields())u.applyColour()}updateDisabled(){const t=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===t){let o;(o=this.getNextBlock())==null||o.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=t;for(const o of this.getChildren(!1))o.updateDisabled()}}setWarningText(t,o=""){if(o)this.warningTextDb.has(o)&&(clearTimeout(this.warningTextDb.get(o)),this.warningTextDb.delete(o));else{for(var u of this.warningTextDb.values())clearTimeout(u);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(o,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(o),this.setWarningText(t,o))},100));else if(this.isInFlyout&&(t=null),u=this.getIcon(Oc.TYPE),t){let g=this.getSurroundParent(),R=null;for(;g;)g.isCollapsed()&&(R=g),g=g.getSurroundParent();R&&R.setWarningText(n.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Zi.COLLAPSED_WARNING_ID),u?u.addMessage(t,o):this.addIcon(new Oc(this).addMessage(t,o))}else u&&(o?(u.addMessage("",o),u.getText()||this.removeIcon(Oc.TYPE)):this.removeIcon(Oc.TYPE))}setMutator(t){this.removeIcon(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),t&&this.addIcon(t)}addIcon(t){return super.addIcon(t),t instanceof n.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=t),t.initView(this.createIconPointerDownListener(t)),t.applyColour(),t.updateEditable(),this.queueRender(),t}createIconPointerDownListener(t){return o=>{this.isDeadOrDying()||(o=this.workspace.getGesture(o))&&o.setStartIcon(t)}}removeIcon(t){const o=super.removeIcon(t);return t.equals(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),o}setDisabledReason(t,o){const u=this.isEnabled();super.setDisabledReason(t,o),this.isEnabled()===u||this.getInheritedDisabled()||this.updateDisabled()}setDeletable(t){super.setDeletable(t),t?Se(this.svgGroup,"blocklyNotDeletable"):Ye(this.svgGroup,"blocklyNotDeletable")}setHighlighted(t){this.pathObject.updateHighlighted(t)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(t){this.pathObject.updateDraggingDelete(t)}getColour(){return this.style.colourPrimary}setColour(t){super.setColour(t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);let o,u;(u=(o=this.pathObject).setStyle)==null||u.call(o,t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()}setStyle(t){const o=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_&&Se(this.svgGroup,this.styleName_),o){this.hat=o.hat;let u,g;(g=(u=this.pathObject).setStyle)==null||g.call(u,o),this.colour_=o.colourPrimary,this.style=o,this.applyColour(),Ye(this.svgGroup,t),this.styleName_=t}else throw Error("Invalid style name: "+t)}getStyle(){return this.style}bringToFront(t=!1){const o=n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();let u=this;if(!u.isDeadOrDying()){do{const g=u.getSvgRoot(),R=g.parentNode,k=R.childNodes;if(k[k.length-1]!==g&&R.appendChild(g),t)break;u=u.getParent()}while(u);o&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(o)}}setPreviousStatement(t,o){super.setPreviousStatement(t,o),this.queueRender()}setNextStatement(t,o){super.setNextStatement(t,o),this.queueRender()}setOutput(t,o){super.setOutput(t,o),this.queueRender()}setInputsInline(t){super.setInputsInline(t),this.queueRender()}removeInput(t,o){return t=super.removeInput(t,o),this.queueRender(),t}moveNumberedInputBefore(t,o){super.moveNumberedInputBefore(t,o),this.queueRender()}appendInput(t){return super.appendInput(t),this.queueRender(),t}setConnectionTracking(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var o=this.nextConnection.targetBlock();o&&o.setConnectionTracking(t)}if(!this.collapsed_)for(o=0;o<this.inputList.length;o++){var u=this.inputList[o].connection;u&&(u.setTracking(t),(u=u.targetBlock())&&u.setConnectionTracking(t))}}getConnections_(t){const o=[];if(this.outputConnection&&o.push(this.outputConnection),this.previousConnection&&o.push(this.previousConnection),this.nextConnection&&o.push(this.nextConnection),t||!this.collapsed_)for(let u=0,g;g=this.inputList[u];u++)g.connection&&o.push(g.connection);return o}lastConnectionInStack(t){return super.lastConnectionInStack(t)}getMatchingConnection(t,o){return super.getMatchingConnection(t,o)}makeConnection_(t){return new $r(this,t)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const t=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||t.isInFlyout))for(const o of this.getConnections_(!1)){if(o.isSuperior()){let u;(u=o.targetBlock())==null||u.bumpNeighbours()}for(const u of o.neighbours(n.config$$module$build$src$core$config.snapRadius))u.getSourceBlock().getRootBlock()!==t&&(o.isConnected()&&u.isConnected()||(o.isSuperior()?u.bumpAwayFrom(o,!1):o.bumpAwayFrom(u,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(t,o,u){if(t.type===un.NEXT_STATEMENT||t.type===un.INPUT_VALUE){let g=o.x;o=o.y,g+=u.x-t.getOffsetInBlock().x,o+=u.y-t.getOffsetInBlock().y,this.moveBy(g,o)}}getChildren(t){return super.getChildren(t)}queueRender(){return ti(this)}render(){this.queueRender(),Ui()}renderEfficiently(){Qe(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),vt()}tightenChildrenEfficiently(){for(const t of this.inputList){const o=t.connection;o&&o.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}getHeightWidth(){let t=this.height,o=this.width;var u=this.getNextBlock();if(u){u=u.getHeightWidth();const g=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=u.height-g,o=Math.max(o,u.width)}return{height:t,width:o}}fadeForReplacement(t){this.pathObject.updateReplacementFade(t)}highlightShapeForInput(t,o){this.pathObject.updateShapeForInputHighlight(t,o)}getDragStrategy(){return this.dragStrategy}setDragStrategy(t){this.dragStrategy=t}isCopyable(){return this.isOwnDeletable()&&this.isOwnMovable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(t){this.dragStrategy.startDrag(t)}drag(t,o){this.dragStrategy.drag(t,o)}endDrag(t){this.dragStrategy.endDrag(t)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const t=Object.assign({},{kind:"BLOCK"},Aa(this)),o=new Set(["id","height","width","pinned","enabled"]),u=function(g){for(const R in g)o.has(R)?delete g[R]:typeof g[R]=="object"&&u(g[R])};return u(t),[t]}jsonInit(t){super.jsonInit(t),t.classes&&this.addClass(Array.isArray(t.classes)?t.classes.join(" "):t.classes)}getFocusableElement(){return this.pathObject.svgPath}getFocusableTree(){return this.workspace}onNodeFocus(){this.select()}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};Zi.INLINE=-1,Zi.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var vA=class{constructor(){}onDragEnter(t){}onDragOver(t){}onDragExit(t){}onDrop(t){}getClientRect(){return null}shouldPreventMove(t){return!1}},Mb=class extends vA{constructor(){super(),this.wouldDelete_=!1}wouldDelete(t){return t instanceof Zi?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t)):this.updateWouldDelete_(Oa(t)&&t.isDeletable()),this.wouldDelete_}updateWouldDelete_(t){this.wouldDelete_=t}},Yf=class{constructor(t,o){this.element=t,this.type=o}getElement(){return this.element}getType(){return this.type}},j_=class{constructor(t){this.workspace_=t}getDimensionsPx_(t){let o=0,u=0;return t&&(o=t.getWidth(),u=t.getHeight()),new wn(o,u)}getFlyoutMetrics(t){return t=this.getDimensionsPx_(this.workspace_.getFlyout(t)),{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let t=0,o=0;const u=this.getToolboxMetrics(),g=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var k;const ue=!((k=this.workspace_.getFlyout())!=null&&k.autoClose);k=R?u.position:g.position;const xe=k===Kn.TOP;return k===Kn.LEFT&&(R&&(t+=u.width),ue&&(t+=g.width)),xe&&(R&&(o+=u.height),ue&&(o+=g.height)),{top:o,left:t}}getViewMetrics(t){t=t?this.workspace_.scale:1;const o=this.getSvgMetrics(),u=this.getToolboxMetrics(),g=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var k;const ue=!((k=this.workspace_.getFlyout())!=null&&k.autoClose);k=R?u.position:g.position;const xe=k===Kn.LEFT||k===Kn.RIGHT;return(k===Kn.TOP||k===Kn.BOTTOM)&&(R&&(o.height-=u.height),ue&&(o.height-=g.height)),xe&&(R&&(o.width-=u.width),ue&&(o.width-=g.width)),{height:o.height/t,width:o.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}}getContentMetrics(t){t=t?1:this.workspace_.scale;const o=this.workspace_.getBlocksBoundingBox();return{height:(o.bottom-o.top)*t,width:(o.right-o.left)*t,top:o.top*t,left:o.left*t}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(t){if(!this.hasFixedEdges())return{};const o=this.workspace_.isMovableHorizontally(),u=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);const g={};return u||(g.top=t.top,g.bottom=t.top+t.height),o||(g.left=t.left,g.right=t.left+t.width),g}getPaddedContent_(t,o){const u=o.top+o.height,g=o.left+o.width,R=t.width;t=t.height;const k=R/2,ue=t/2;return{top:Math.min(o.top-ue,u-t),bottom:Math.max(u+ue,o.top+t),left:Math.min(o.left-k,g-R),right:Math.max(g+k,o.left+R)}}getScrollMetrics(t,o,u){t=t?this.workspace_.scale:1,o=o||this.getViewMetrics(!1);var g=u||this.getContentMetrics();u=this.getComputedFixedEdges_(o),o=this.getPaddedContent_(o,g),g=u.top!==void 0?u.top:o.top;const R=u.left!==void 0?u.left:o.left;return{top:g/t,left:R/t,width:((u.right!==void 0?u.right:o.right)-R)/t,height:((u.bottom!==void 0?u.bottom:o.bottom)-g)/t}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const t=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),u=this.getSvgMetrics(),g=this.getAbsoluteMetrics(),R=this.getViewMetrics(),k=this.getContentMetrics(),ue=this.getScrollMetrics(!1,R,k);return{contentHeight:k.height,contentWidth:k.width,contentTop:k.top,contentLeft:k.left,scrollHeight:ue.height,scrollWidth:ue.width,scrollTop:ue.top,scrollLeft:ue.left,viewHeight:R.height,viewWidth:R.width,viewTop:R.top,viewLeft:R.left,absoluteTop:g.top,absoluteLeft:g.left,svgHeight:u.height,svgWidth:u.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:o.width,flyoutHeight:o.height}}};i(Et.METRICS_MANAGER,ri,j_);var Y_=class extends j_{constructor(t,o){super(t),this.flyout_=o}getBoundingBox(){let t;try{t=this.workspace_.getCanvas().getBBox()}catch{t={height:0,y:0,width:0,x:0}}return t}getContentMetrics(t){const o=this.getBoundingBox();return t=t?1:this.workspace_.scale,{height:o.height*t,width:o.width*t,top:o.y*t,left:o.x*t}}getScrollMetrics(t,o,u){return o=u||this.getContentMetrics(),u=this.flyout_.MARGIN*this.workspace_.scale,t=t?this.workspace_.scale:1,{height:(o.height+2*u)/t,width:(o.width+o.left+u)/t,top:0,left:0}}},Zo=class{constructor(t,o,u,g){this.workspace=t,this.targetWorkspace=o,this.isFlyoutLabel=g,this.height=this.width=0,this.cursorSvg=this.svgText=null,this.text=u.text,this.position=new Ot(0,0),this.callbackKey=u.callbackKey||u.callbackkey,this.cssClass=u["web-class"]||null,this.info=u,t=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton",this.cssClass&&(t+=" "+this.cssClass),this.id=G(),this.svgGroup=Re(qe.G,{id:this.id,class:t},this.workspace.getCanvas());let R;this.isFlyoutLabel||(R=Re(qe.RECT,{class:"blocklyFlyoutButtonShadow",rx:Zo.BORDER_RADIUS,ry:Zo.BORDER_RADIUS,x:1,y:1},this.svgGroup)),t=Re(qe.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Zo.BORDER_RADIUS,ry:Zo.BORDER_RADIUS},this.svgGroup),o=Re(qe.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup),u=mi(this.text),this.workspace.RTL&&(u+="‏"),o.textContent=u,this.isFlyoutLabel&&(this.svgText=o,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill")),g=gn(o,"fontSize");const k=gn(o,"fontWeight"),ue=gn(o,"fontFamily");if(this.width=se(o,g,k,ue),u=$e(u,g,k,ue),this.height=this.height||u.height,!this.isFlyoutLabel){this.width+=2*Zo.TEXT_MARGIN_X,this.height+=2*Zo.TEXT_MARGIN_Y;let xe;(xe=R)==null||xe.setAttribute("width",String(this.width));let St;(St=R)==null||St.setAttribute("height",String(this.height))}t.setAttribute("width",String(this.width)),t.setAttribute("height",String(this.height)),o.setAttribute("x",String(this.width/2)),o.setAttribute("y",String(this.height/2-u.height/2+u.baseline)),this.updateTransform(),this.onMouseDownWrapper=w(this.svgGroup,"pointerdown",this,this.onMouseDown),this.onMouseUpWrapper=w(this.svgGroup,"pointerup",this,this.onMouseUp)}createDom(){return this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(t,o){this.position.x=t,this.position.y=o,this.updateTransform()}moveBy(t,o,u){this.moveTo(this.position.x+t,this.position.y+o)}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getBoundingRectangle(){return new pn(this.position.y,this.position.y+this.height,this.position.x,this.position.x+this.width)}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){O(this.onMouseDownWrapper),O(this.onMouseUpWrapper),this.svgGroup&&we(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(t){t?this.svgGroup&&(this.svgGroup.appendChild(t),this.cursorSvg=t):this.cursorSvg=null}onMouseUp(t){(t=this.targetWorkspace.getGesture(t))&&t.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(t=this.targetWorkspace.getButtonCallback(this.callbackKey))&&t(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}onMouseDown(t){const o=this.targetWorkspace.getGesture(t),u=this.targetWorkspace.getFlyout();o&&u&&o.handleFlyoutStart(t,u)}getSvgRoot(){return this.svgGroup}getFocusableElement(){return this.svgGroup}getFocusableTree(){return this.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}};Zo.TEXT_MARGIN_X=5,Zo.TEXT_MARGIN_Y=2,Zo.BORDER_RADIUS=4,Wt(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var UT=class{getFirstChild(t){return null}getParent(t){return t.getWorkspace()}getNextSibling(t){return null}getPreviousSibling(t){return null}isNavigable(t){return t.canBeFocused()}isApplicable(t){return t instanceof Zo}},Rb=class{constructor(t,o){this.policy=t,this.flyout=o}getFirstChild(t){return null}getParent(t){return this.policy.getParent(t)}getNextSibling(t){const o=this.flyout.getContents();if(!o)return null;let u=o.findIndex(g=>g.getElement()===t);return u===-1?null:(u++,u>=o.length&&(u=0),o[u].getElement())}getPreviousSibling(t){const o=this.flyout.getContents();if(!o)return null;let u=o.findIndex(g=>g.getElement()===t);return u===-1?null:(u--,u<0&&(u=o.length-1),o[u].getElement())}isNavigable(t){return this.policy.isNavigable(t)}isApplicable(t){return this.policy.isApplicable(t)}},Nc=class{constructor(t,o){this.gap=t,this.axis=o,this.y=this.x=0}getBoundingRectangle(){switch(this.axis){case"x":return new pn(this.y,this.y,this.x,this.x+this.gap);case"y":return new pn(this.y,this.y+this.gap,this.x,this.x)}}moveBy(t,o,u){this.x+=t,this.y+=o}isNavigable(){return!1}getFocusableElement(){throw Error("Cannot be focused")}getFocusableTree(){throw Error("Cannot be focused")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}},Bd=class{getFirstChild(t){return null}getParent(t){return null}getNextSibling(t){return null}getPreviousSibling(t){return null}isNavigable(t){return!1}isApplicable(t){return t instanceof Nc}},kd=class{getFirstChild(t){return qp(t,!0)[0]}getParent(t){var o;if((o=t.previousConnection)!=null&&o.targetBlock()){if(o=t.getSurroundParent())return o}else{let u;if((u=t.outputConnection)!=null&&u.targetBlock())return t.outputConnection.targetBlock()}return t.workspace}getNextSibling(t){let o;if((o=t.nextConnection)!=null&&o.targetBlock()){let g;return(g=t.nextConnection)==null?void 0:g.targetBlock()}let u;return(u=t.outputConnection)!=null&&u.targetBlock()?Br(t,1):t.getSurroundParent()?Br(t.getTopStackBlock(),1):this.getParent(t)instanceof Sl?Nu(t,1):null}getPreviousSibling(t){let o;if((o=t.previousConnection)!=null&&o.targetBlock()){let g;return(g=t.previousConnection)==null?void 0:g.targetBlock()}let u;return(u=t.outputConnection)!=null&&u.targetBlock()?Br(t,-1):this.getParent(t)instanceof Sl?Nu(t,-1):null}isNavigable(t){return t.canBeFocused()}isApplicable(t){return t instanceof Zi}},K_=class{getFirstChild(t){return null}getParent(t){return t.getParentComment()}getNextSibling(t){const o=t.getParentComment().view.getCommentBarButtons();return t=o.indexOf(t),t>=0&&t+1<o.length?o[t+1]:null}getPreviousSibling(t){const o=t.getParentComment().view.getCommentBarButtons();return t=o.indexOf(t),t>0?o[t-1]:null}isNavigable(t){return t.canBeFocused()}isApplicable(t){return t instanceof Eb}},lg=class{getFirstChild(t){return t.getParentInput()?t.targetConnection:null}getParent(t){return t.getSourceBlock()}getNextSibling(t){if(t.getParentInput())return Br(t,1);if(t.type===un.NEXT_STATEMENT){const u=t.targetConnection;var o=t.getSourceBlock();if(!u&&o.getRootBlock().lastConnectionInStack(!1)===t){t=o.workspace.getTopBlocks(!0),o=t.indexOf(o.getRootBlock())+1,o>=t.length&&(o=0),o=t[o];let g;return(g=this.getParentConnection(o))!=null?g:o}return u}return t.getSourceBlock()}getPreviousSibling(t){if(t.getParentInput())return Br(t,-1);if(t.type===un.PREVIOUS_STATEMENT||t.type===un.OUTPUT_VALUE){const u=t.targetConnection&&!t.targetConnection.getParentInput()?t.targetConnection:null;var o=t.getSourceBlock();if(!u&&this.getParentConnection(o.getRootBlock())===t){t=o.workspace.getTopBlocks(!0),o=t.indexOf(o.getRootBlock())-1,o<0&&(o=t.length-1),o=t[o];let g;return(g=o.lastConnectionInStack(!1))!=null?g:o}return u}return t.type===un.NEXT_STATEMENT?t.getSourceBlock():null}getParentConnection(t){let o;return!t.outputConnection||(o=t.previousConnection)!=null&&o.isConnected()?t.previousConnection:t.outputConnection}isNavigable(t){return t.canBeFocused()}isApplicable(t){return t instanceof $r}},Pd=class{getFirstChild(t){return null}getParent(t){return t.getSourceBlock()}getNextSibling(t){return Br(t,1)}getPreviousSibling(t){return Br(t,-1)}isNavigable(t){let o;return t.canBeFocused()&&t.isVisible()&&(t.isClickable()||t.isCurrentlyEditable())&&!((o=t.getSourceBlock())!=null&&o.isSimpleReporter()&&t.isFullBlockField())&&t.getParentInput().isVisible()}isApplicable(t){return t instanceof Ji}},o1=class{getFirstChild(t){if(t instanceof n.MutatorIcon$$module$build$src$core$icons$mutator_icon&&t.bubbleIsVisible()&&n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===t){let o,u;return(u=(o=t.getBubble())==null?void 0:o.getWorkspace())!=null?u:null}return null}getParent(t){return t.getSourceBlock()}getNextSibling(t){return Br(t,1)}getPreviousSibling(t){return Br(t,-1)}isNavigable(t){return t.canBeFocused()}isApplicable(t){return t instanceof P_}},bA=class{getFirstChild(t){return t.view.getCommentBarButtons()[0]}getParent(t){return t.workspace}getNextSibling(t){return Nu(t,1)}getPreviousSibling(t){return Nu(t,-1)}isNavigable(t){return t.canBeFocused()}isApplicable(t){return t instanceof vh}},ug=class{getFirstChild(t){return t=t.getTopBlocks(!0),t.length?t[0]:null}getParent(t){return null}getNextSibling(t){return null}getPreviousSibling(t){return null}isNavigable(t){return t.canBeFocused()&&!t.isMutator}isApplicable(t){return t instanceof Sl}},FT=class{constructor(){this.rules=[new kd,new Pd,new lg,new ug,new o1,new bA,new K_]}addNavigationPolicy(t){this.rules.push(t)}get(t){return this.rules.find(o=>o.isApplicable(t))}getFirstChild(t){let o;const u=(o=this.get(t))==null?void 0:o.getFirstChild(t);if(!u)return null;let g;return(g=this.get(u))!=null&&g.isNavigable(u)?u:this.getFirstChild(u)||this.getNextSibling(u)}getParent(t){let o;const u=(o=this.get(t))==null?void 0:o.getParent(t);if(!u)return null;let g;return(g=this.get(u))!=null&&g.isNavigable(u)?u:this.getParent(u)}getNextSibling(t){let o;const u=(o=this.get(t))==null?void 0:o.getNextSibling(t);if(!u)return null;let g;return(g=this.get(u))!=null&&g.isNavigable(u)?u:this.getNextSibling(u)}getPreviousSibling(t){let o;const u=(o=this.get(t))==null?void 0:o.getPreviousSibling(t);if(!u)return null;let g;return(g=this.get(u))!=null&&g.isNavigable(u)?u:this.getPreviousSibling(u)}},HT=class extends FT{constructor(t){super(),this.rules.push(new UT,new Bd),this.rules=this.rules.map(o=>new Rb(o,t))}},cg=class{constructor(t,o,u,g,R){this.workspace=t,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,o=o===void 0?!0:o,u=u===void 0?!0:u;const k=o&&u;o&&(this.hScroll=new rs(t,!0,k,g,R)),u&&(this.vScroll=new rs(t,!1,k,g,R)),k&&(this.corner_=Re(qe.RECT,{height:rs.scrollbarThickness,width:rs.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ie(this.corner_,t.getBubbleCanvas()))}dispose(){we(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const t=this.workspace.getMetrics();if(t){var o=!1,u=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===t.viewWidth&&this.oldHostMetrics.viewHeight===t.viewHeight&&this.oldHostMetrics.absoluteTop===t.absoluteTop&&this.oldHostMetrics.absoluteLeft===t.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===t.scrollWidth&&this.oldHostMetrics.viewLeft===t.viewLeft&&this.oldHostMetrics.scrollLeft===t.scrollLeft||(o=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===t.scrollHeight&&this.oldHostMetrics.viewTop===t.viewTop&&this.oldHostMetrics.scrollTop===t.scrollTop||(u=!0)):u=o=!0,o||u){try{n.disable$$module$build$src$core$events$utils(),this.hScroll&&o&&this.hScroll.resize(t),this.vScroll&&u&&this.vScroll.resize(t)}finally{n.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==t.viewWidth||this.oldHostMetrics.absoluteLeft!==t.absoluteLeft){let g;(g=this.corner_)==null||g.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==t.viewHeight||this.oldHostMetrics.absoluteTop!==t.absoluteTop){let g;(g=this.corner_)==null||g.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=t}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(t,o){this.hScroll&&this.hScroll.setOrigin(t,o),this.vScroll&&this.vScroll.setOrigin(t,o)}set(t,o,u){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(o,!1),(u||u===void 0)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace.setMetrics(t))}setX(t){this.hScroll&&this.hScroll.set(t,!0)}setY(t){this.vScroll&&this.vScroll.set(t,!0)}setContainerVisible(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)}isVisible(){let t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t}setVisible(t){this.hScroll&&this.hScroll.setVisibleInternal(t),this.vScroll&&this.vScroll.setVisibleInternal(t)}resizeContent(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)}resizeView(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)}},M0="sep",yA=class{load(t,o){return t=new Nc(0,o.horizontalLayout?"x":"y"),new Yf(t,M0)}gapForItem(t,o){let u;return(u=parseInt(String(t.gap)))!=null?u:o}disposeItem(t){}getType(){return M0}};i(Et.FLYOUT_INFLATER,M0,yA);var R0=class extends Mb{constructor(t){super(),this.horizontalLayout=!1,this.boundEvents=[],this.reflowWrapper=null,this.contents=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,this.inflaters=new Map,t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Sl(t),this.workspace_.setMetricsManager(new Y_(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.workspace_.setNavigator(new HT(this)),this.id=D(),this.RTL=!!t.RTL,this.toolboxPosition_=t.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=this.MARGIN*3,this.GAP_Y=this.MARGIN*3}createDom(t){return this.svgGroup_=Re(t,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=Re(qe.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new cg(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(w(this.svgGroup_,"wheel",this,this.wheel_)),this.boundEvents.push(w(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:Hi.ComponentWeight.FLYOUT_WEIGHT,capabilities:[Hi.Capability.AUTOHIDEABLE,Hi.Capability.DELETE_AREA,Hi.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const t of this.boundEvents)O(t);this.boundEvents.length=0,this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&we(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(t){this.autoClose=t,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(t){!t&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(t){const o=t!==this.isVisible();this.visible=t,o&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(t){const o=t!==this.containerVisible;this.containerVisible=t,o&&this.updateDisplay()}getContents(){return this.contents}setContents(t){this.contents=t}updateDisplay(){let t;t=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=t?"block":"none");let o;(o=this.workspace_.scrollbar)==null||o.setContainerVisible(t)}positionAt_(t,o,u,g){let R;(R=this.svgGroup_)==null||R.setAttribute("width",`${t}`);let k;(k=this.svgGroup_)==null||k.setAttribute("height",`${o}`),this.workspace_.setCachedParentSvgSize(t,o),this.svgGroup_&&dt(this.svgGroup_,"translate("+u+"px,"+g+"px)"),(t=this.workspace_.scrollbar)&&(t.setOrigin(u,g),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))}hide(){this.isVisible()&&(this.setVisible(!1),this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null))}show(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof t=="string"&&(t=this.getDynamicCategoryContents(t)),this.setVisible(!0),t=Te(t),t=this.createFlyoutInfo(t),Ui(this.workspace_),this.setContents(t),this.layout_(t),this.horizontalLayout?this.height_=0:this.width_=0,this.reflow(),this.workspace_.setResizesEnabled(!0),this.reflowWrapper=o=>{o.type!==tt.BLOCK_CHANGE&&o.type!==tt.BLOCK_FIELD_INTERMEDIATE_CHANGE||this.reflow()},this.workspace_.addChangeListener(this.reflowWrapper)}createFlyoutInfo(t){const o=[],u=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const g of t)"custom"in g&&(t=this.getDynamicCategoryContents(g.custom),t=Te(t),o.push(...this.createFlyoutInfo(t))),t=g.kind.toLowerCase(),(t=this.getInflaterForType(t))&&(o.push(t.load(g,this)),(t=t.gapForItem(g,u))&&o.push(new Yf(new Nc(t,this.horizontalLayout?"x":"y"),M0)));return this.normalizeSeparators(o)}normalizeSeparators(t){for(let o=t.length-1;o>0;o--){const u=t[o].getType().toLowerCase(),g=t[o-1].getType().toLowerCase();u===M0&&g===M0&&t.splice(o-1,1)}return t}getDynamicCategoryContents(t){if(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t),typeof t!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return t(this.workspace_.targetWorkspace)}clearOldBlocks(){this.getContents().forEach(o=>{let u;(u=this.getInflaterForType(o.getType()))==null||u.disposeItem(o)});let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}onMouseDown(t){const o=this.targetWorkspace.getGesture(t);o&&o.handleFlyoutStart(t,this)}isBlockCreatable(t){return t.isEnabled()&&!this.getTargetWorkspace().isReadOnly()}createBlock(t){let o=null;n.disable$$module$build$src$core$events$utils();var u=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{o=this.placeNewBlock(t)}finally{n.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),t=vu(this.targetWorkspace,u),Fe()){for(n.setGroup$$module$build$src$core$events$utils(!0),u=0;u<t.length;u++){const g=t[u];K(new(Ke(tt.VAR_CREATE))(g))}K(new(Ke(tt.BLOCK_CREATE))(o))}return this.autoClose&&this.hide(),o}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(t){var o=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered");const u=this.serializeBlock(t);return o.setResizesEnabled(!1),o=Dl(u,o),this.positionNewBlock(t,o),o}serializeBlock(t){return Aa(t)}positionNewBlock(t,o){const u=this.targetWorkspace;var g=u.getOriginOffsetInPixels(),R=this.workspace_.getOriginOffsetInPixels();t=t.getRelativeToSurfaceXY(),t.scale(this.workspace_.scale),R=Ot.sum(R,t),g=Ot.difference(R,g),g.scale(1/u.scale),o.moveTo(new Ot(g.x,g.y))}getInflaterForType(t){if(this.inflaters.has(t)){var o;return(o=this.inflaters.get(t))!=null?o:null}return(o=f(Et.FLYOUT_INFLATER,t))?(o=new o,this.inflaters.set(t,o),o):null}getFocusableElement(){throw Error("Flyouts are not directly focusable.")}getFocusableTree(){throw Error("Flyouts are not directly focusable.")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}getRootFocusableNode(){throw Error("Flyouts are not directly focusable.")}getRestoredFocusableNode(t){throw Error("Flyouts are not directly focusable.")}getNestedTrees(){throw Error("Flyouts are not directly focusable.")}lookUpFocusableNode(t){throw Error("Flyouts are not directly focusable.")}onTreeFocus(t,o){}onTreeBlur(t){throw Error("Flyouts are not directly focusable.")}},q_=class{constructor(){this.isActive=!1,this.activeClassName="blocklyKeyboardNavigation"}setIsActive(t=!0){this.isActive=t,this.updateActiveVisualization()}getIsActive(){return this.isActive}updateActiveVisualization(){this.isActive?document.body.classList.add(this.activeClassName):document.body.classList.remove(this.activeClassName)}},J_=new q_,hg=class{constructor(t){this.workspace=t,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Ot(t.scrollX,t.scrollY)}dispose(){this.workspace=null}startDrag(){}endDrag(t){this.drag(t)}drag(t){if(t=Ot.sum(this.startScrollXY_,t),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(t.x,t.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(t.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,t.y);else throw new TypeError("Invalid state.")}},GT=5,wb=6,Z_=class{constructor(t,o){this.creatorWorkspace=o,this.mouseDownXY=new Ot(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=t,this.currentDragDeltaXY=new Ot(0,0)}dispose(){$(),Ir(),this.creatorWorkspace.clearGesture();for(const t of this.boundEvents)O(t);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(t){const o=new Ot(t.clientX,t.clientY);this.updateDragDelta(o)&&(this.updateIsDragging(t),S()),this.mostRecentEvent=t}updateDragDelta(t){return this.currentDragDeltaXY=Ot.difference(t,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Ot.magnitude(this.currentDragDeltaXY)>(this.flyout?n.config$$module$build$src$core$config.flyoutDragRadius:n.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let t;if(!this.targetBlock||(t=this.flyout)==null||!t.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new hg(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(t){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const o=ve();o&&jn(o)&&o.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(o,this.startWorkspace_),this.dragger.onDragStart(t),this.dragger.onDrag(t,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(t,o){return new(T(Et.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(t,o)}doStart(t){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,P(t)?this.cancel():(this.gestureHasStarted=!0,Hl(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=lc(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=t,zp(),F(t)?this.handleRightClick(t):(t.type.toLowerCase()==="pointerdown"&&t.pointerType!=="mouse"&&y(t,this),this.mouseDownXY=new Ot(t.clientX,t.clientY),this.bindMouseEvents(t),this.isEnding_||this.handleTouchStart(t)))}bindMouseEvents(t){this.boundEvents.push(w(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(w(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(w(document,"pointerup",null,this.handleUp.bind(this),!0)),t.preventDefault(),t.stopPropagation()}handleStart(t){this.isDragging()||(this.handleTouchStart(t),this.isMultiTouch()&&S())}handleMove(t){this.isDragging()&&M(t)||!this.isMultiTouch()?(this.updateFromEvent(t),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),t.preventDefault(),t.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(t),S())}handleUp(t){if(this.isDragging()||this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()){if(!M(t))return;if(this.updateFromEvent(t),S(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?(J_.setIsActive(!1),this.dragger.onDragEnd(t,this.currentDragDeltaXY)):this.workspaceDragger?(J_.setIsActive(!1),this.workspaceDragger.endDrag(this.currentDragDeltaXY)):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(t))}t.preventDefault(),t.stopPropagation(),this.dispose()}handleTouchStart(t){var o=C(t);this.cachedPoints.set(o,this.getTouchPoint(t));var u=Array.from(this.cachedPoints.keys());u.length===2&&(o=this.cachedPoints.get(u[0]),u=this.cachedPoints.get(u[1]),this.startDistance=Ot.distance(o,u),this.multiTouch=!0,t.preventDefault())}handleTouchMove(t){const o=C(t);this.cachedPoints.set(o,this.getTouchPoint(t)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(t):(this.updateFromEvent(t),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),t.preventDefault(),t.stopPropagation())}handlePinch(t){var o=Array.from(this.cachedPoints.keys()),u=this.cachedPoints.get(o[0]);if(o=this.cachedPoints.get(o[1]),u=Ot.distance(u,o)/this.startDistance,this.previousScale>0&&this.previousScale<1/0){if(o=u-this.previousScale,o=o>0?o*GT:o*wb,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const g=this.startWorkspace_,R=V(t,g.getParentSvg(),g.getInverseScreenCTM());g.zoom(R.x,R.y,o)}this.previousScale=u,t.preventDefault()}handleTouchEnd(t){t=C(t),this.cachedPoints.has(t)&&this.cachedPoints.delete(t),this.cachedPoints.size<2&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(t){return this.startWorkspace_?new Ot(t.pageX,t.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(S(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(t){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(t)):this.startBubble?this.startBubble.showContextMenu(t):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(t)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startWorkspace_),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),J_.setIsActive(!1),this.dispose()}handleWsStart(t,o){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(o),this.mostRecentEvent=t,this.startBlock||this.startBubble||this.startComment?this.startBlock&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startBlock):n.getFocusManager$$module$build$src$core$focus_manager().focusNode(o),this.doStart(t)}fireWorkspaceClick(t){K(new(Ke(tt.CLICK))(null,t.id,"workspace"))}handleFlyoutStart(t,o){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(o),this.handleWsStart(t,o.getWorkspace())}handleBlockStart(t,o){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(o),this.mostRecentEvent=t}handleBubbleStart(t,o){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(o),this.mostRecentEvent=t}handleCommentStart(t,o){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(o),this.mostRecentEvent=t}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.bringBlockToFront(),this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent)}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.flyout.isBlockCreatable(this.targetBlock)){n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0);var t=this.flyout.createBlock(this.targetBlock);t.snapToGrid(),t.bumpNeighbours(),n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");t=new(Ke(tt.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),K(t)}this.bringBlockToFront(),n.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(t){this.fireWorkspaceClick(this.startWorkspace_||this.creatorWorkspace)}bringBlockToFront(){this.targetBlock&&!this.flyout&&(n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),this.targetBlock.bringToFront())}setStartField(t){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=t)}setStartIcon(t){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=t)}setStartBubble(t){this.startBubble||(this.startBubble=t)}setStartComment(t){this.startComment||(this.startComment=t)}setStartBlock(t){this.startBlock||this.startBubble||(this.startBlock=t,t.isInFlyout&&t!==t.getRootBlock()?this.setTargetBlock(t.getRootBlock()):this.setTargetBlock(t))}setTargetBlock(t){t.isShadow()?this.setTargetBlock(t.getParent()):(this.targetBlock=t,n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t))}setStartWorkspace(t){this.startWorkspace_||(this.startWorkspace_=t)}setStartFlyout(t){this.flyout||(this.flyout=t)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const t=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&t}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let t,o;return(o=(t=this.workspaceDragger)!=null?t:this.dragger)!=null?o:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const t=bt();for(let o=0,u;u=t[o];o++)if(u.currentGesture_)return!0;return!1}},zT=class{constructor(t,o){this.pattern=t,this.scale=1;let u;this.spacing=(u=o.spacing)!=null?u:0;let g;this.length=(g=o.length)!=null?g:1,this.line2=(this.line1=t.firstChild)&&this.line1.nextSibling;let R;this.snapToGrid=(R=o.snap)!=null?R:!1}setSpacing(t){this.spacing=t,this.update(this.scale)}getSpacing(){return this.spacing}setLength(t){this.length=t,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(t){this.snapToGrid=t}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(t){this.scale=t;var o=this.spacing*t;this.pattern.setAttribute("width",`${o}`),this.pattern.setAttribute("height",`${o}`),o=Math.floor(this.spacing/2)+.5;let u=o-this.length/2,g=o+this.length/2;o*=t,u*=t,g*=t,this.setLineAttributes(this.line1,t,u,g,o,o),this.setLineAttributes(this.line2,t,o,o,u,g)}setLineAttributes(t,o,u,g,R,k){t&&(t.setAttribute("stroke-width",`${o}`),t.setAttribute("x1",`${u}`),t.setAttribute("y1",`${R}`),t.setAttribute("x2",`${g}`),t.setAttribute("y2",`${k}`))}moveTo(t,o){this.pattern.setAttribute("x",`${t}`),this.pattern.setAttribute("y",`${o}`)}alignXY(t){var o=this.getSpacing();const u=o/2,g=Math.round(Math.round((t.x-u)/o)*o+u);return o=Math.round(Math.round((t.y-u)/o)*o+u),g===t.x&&o===t.y?t:new Ot(g,o)}static createDom(t,o,u,g){t=Re(qe.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},u);let R,k;if(((R=o.length)!=null?R:1)>0&&((k=o.spacing)!=null?k:0)>0){Re(qe.LINE,{stroke:o.colour},t);let ue;(ue=o.length)!=null&&ue&&Re(qe.LINE,{stroke:o.colour},t)}else Re(qe.LINE,{},t);return g&&g.style.setProperty("--blocklyGridPattern",`url(#${t.id})`),t}},Ib=class{constructor(t){this.workspace=t,this.layers=new Map,(t=t.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(t),this.animationLayer=this.createAnimationLayer(t)),t=this.createLayer(wc),Ye(t,"blocklyBlockCanvas"),t=this.createLayer(L_),Ye(t,"blocklyBubbleCanvas")}createDragLayer(t){const o=Re(qe.SVG,{class:"blocklyBlockDragSurface",xmlns:hi,"xmlns:html":fr,"xmlns:xlink":qi,version:"1.1"});return t.append(o),Re(qe.G,{},o)}createAnimationLayer(t){const o=Re(qe.SVG,{class:"blocklyAnimationLayer",xmlns:hi,"xmlns:html":fr,"xmlns:xlink":qi,version:"1.1"});return t.append(o),Re(qe.G,{},o)}appendToAnimationLayer(t){let o;const u=(o=this.dragLayer)==null?void 0:o.getAttribute("transform");if(u){let R;(R=this.animationLayer)==null||R.setAttribute("transform",u)}let g;(g=this.animationLayer)==null||g.appendChild(t.getSvgRoot())}translateLayers(t,o){t=`translate(${t.x}, ${t.y}) scale(${o})`;let u;(u=this.dragLayer)==null||u.setAttribute("transform",t);for(const[,g]of this.layers)g.setAttribute("transform",t)}moveToDragLayer(t){let o;(o=this.dragLayer)==null||o.appendChild(t.getSvgRoot()),t.canBeFocused()&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)}moveOffDragLayer(t,o){this.append(t,o),t.canBeFocused()&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)}append(t,o){this.layers.has(o)||this.createLayer(o),t=t.getSvgRoot();let u;if(((u=this.layers.get(o))==null?void 0:u.lastChild)!==t){let g;(g=this.layers.get(o))==null||g.appendChild(t)}}createLayer(t){const o=this.workspace.getSvgGroup(),u=Re(qe.G,{});let g=!1;const R=[...this.layers].sort((k,ue)=>k[0]-ue[0]);for(const[k,ue]of R)if(t<k){o.insertBefore(u,ue),g=!0;break}return g||o.appendChild(u),this.layers.set(t,u),u}hasLayer(t){return t===this.dragLayer||new Set(this.layers.values()).has(t)}getBlockLayer(){return this.layers.get(wc)}getBubbleLayer(){return this.layers.get(L_)}},c=class{constructor(){this.curNode=this.colour=null,this.type="marker"}getCurNode(){return this.curNode}setCurNode(t){this.curNode=t}dispose(){this.curNode=null}getSourceBlockFromNode(t){return t instanceof Zi?t:t instanceof Ji||t instanceof $r?t.getSourceBlock():null}getSourceBlock(){return this.getSourceBlockFromNode(this.getCurNode())}},d=class extends c{constructor(t){super(),this.workspace=t,this.type="cursor",this.potentialNodes=null}next(){var t=this.getCurNode();return t?((t=this.getNextNode(t,o=>{let u;return o instanceof Zi&&!((u=o.outputConnection)!=null&&u.targetBlock())||o instanceof vh},!0))&&this.setCurNode(t),t):null}in(){var t=this.getCurNode();return t?((t=this.getNextNode(t,()=>!0,!0))&&this.setCurNode(t),t):null}prev(){var t=this.getCurNode();return t?((t=this.getPreviousNode(t,o=>{let u;return o instanceof Zi&&!((u=o.outputConnection)!=null&&u.targetBlock())||o instanceof vh},!0))&&this.setCurNode(t),t):null}out(){var t=this.getCurNode();return t?((t=this.getPreviousNode(t,()=>!0,!0))&&this.setCurNode(t),t):null}atEndOfLine(){var t=this.getCurNode();if(!t)return!1;const o=this.getNextNode(t,()=>!0,!0);return t=this.getNextNode(t,u=>{let g;return u instanceof Zi&&!((g=u.outputConnection)!=null&&g.targetBlock())},!0),o===t}getNextNodeImpl(t,o,u=new Set){if(!t||u.has(t))return null;let g=this.workspace.getNavigator().getFirstChild(t)||this.workspace.getNavigator().getNextSibling(t);for(var R=t;R&&!g&&(R=this.workspace.getNavigator().getParent(R),!!R);)g=this.workspace.getNavigator().getNextSibling(R);return o(g)?g:g?(u.add(t),this.getNextNodeImpl(g,o,u)):null}getNextNode(t,o,u){return!t||!u&&this.getLastNode()===t?null:this.getNextNodeImpl(t,o)}getPreviousNodeImpl(t,o,u=new Set){if(!t||u.has(t))return null;const g=this.getRightMostChild(this.workspace.getNavigator().getPreviousSibling(t),t)||this.workspace.getNavigator().getParent(t);return o(g)?g:g?(u.add(t),this.getPreviousNodeImpl(g,o,u)):null}getPreviousNode(t,o,u){return!t||!u&&this.getFirstNode()===t?null:this.getPreviousNodeImpl(t,o)}getRightMostChild(t,o){if(!t)return t;let u=this.workspace.getNavigator().getFirstChild(t);if(!u||u===o)return t;for(t=u;t&&t!==o;t=this.workspace.getNavigator().getNextSibling(u))u=t;return this.getRightMostChild(u,o)}preDelete(t){var o=this.getCurNode();o=o?[o]:[];var u;let g,R;const k=(R=(u=t.previousConnection)==null?void 0:u.targetConnection)!=null?R:(g=t.outputConnection)==null?void 0:g.targetConnection;k&&o.push(k),(u=t.getNextBlock())&&o.push(u),(t=t.getParent())&&o.push(t),o.push(this.workspace),this.potentialNodes=o}postDelete(){const t=this.potentialNodes;if(this.potentialNodes=null,!t)throw Error("must call preDelete first");for(const o of t){let u;if((u=this.getSourceBlockFromNode(o))==null||!u.disposed){this.setCurNode(o);return}}throw Error("no valid nodes in this.potentialNodes")}getCurNode(){return n.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()}setCurNode(t){n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),t instanceof Zi?t.workspace.scrollBoundsIntoView(t.getBoundingRectangleWithoutChildren()):t instanceof Ji?(t=t.getSourceBlock(),t.workspace.scrollBoundsIntoView(t.getBoundingRectangleWithoutChildren())):t instanceof vh&&t.workspace.scrollBoundsIntoView(t.getBoundingRectangle())}getFirstNode(){return this.workspace.getNavigator().getFirstChild(this.workspace)}getLastNode(){const t=this.getFirstNode();return this.getPreviousNode(t,()=>!0,!0)}};i(Et.CURSOR,ri,d);var b=class{constructor(t){this.workspace=t,this.markers=new Map,this.cursor=new d(this.workspace)}registerMarker(t,o){this.markers.has(t)&&this.unregisterMarker(t),this.markers.set(t,o)}unregisterMarker(t){const o=this.markers.get(t);if(o)o.dispose(),this.markers.delete(t);else throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(t){return this.markers.get(t)||null}setCursor(t){this.cursor=t}dispose(){const t=Object.keys(this.markers);for(let o=0,u;u=t[o];o++)this.unregisterMarker(u);this.markers.clear(),this.cursor.dispose()}};b.LOCAL_MARKER="local_marker_1";var A=class extends ls{constructor(t,o,u){super(t,o,u,A.createTextArea()),this.workspace=t,this.anchor=o,this.ownerRect=u,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.locationChangeListeners=[],this.text="",this.DEFAULT_SIZE=new wn(160+ls.DOUBLE_BORDER,80+ls.DOUBLE_BORDER),this.MIN_SIZE=new wn(45+ls.DOUBLE_BORDER,20+ls.DOUBLE_BORDER),this.editable=!0,Ye(this.svgRoot,"blocklyTextInputBubble"),this.textArea=this.getFocusableElement(),this.inputRoot=this.createEditor(this.contentContainer,this.textArea),this.resizeGroup=this.createResizeHandle(this.svgRoot,t),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(t){this.text=t,this.textArea.value=t,this.onTextChange()}setEditable(t){(this.editable=t)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(t){this.textChangeListeners.push(t)}addSizeChangeListener(t){this.sizeChangeListeners.push(t)}addLocationChangeListener(t){this.locationChangeListeners.push(t)}static createTextArea(){const t=document.createElementNS(fr,"textarea");return t.className="blocklyTextarea blocklyText",t}createEditor(t,o){t=Re(qe.FOREIGNOBJECT,{x:ls.BORDER_WIDTH,y:ls.BORDER_WIDTH},t);const u=document.createElementNS(fr,"body");return u.setAttribute("xmlns",fr),u.className="blocklyMinimalBody",o.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),u.appendChild(o),t.appendChild(u),this.bindTextAreaEvents(o),t}bindTextAreaEvents(t){w(t,"wheel",this,o=>{o.stopPropagation()}),w(t,"pointerdown",this,o=>{o.stopPropagation(),$()}),w(t,"change",this,this.onTextChange)}createResizeHandle(t,o){return t=Re(qe.IMAGE,{class:"blocklyResizeHandle",href:`${o.options.pathToMedia}resize-handle.svg`},t),w(t,"pointerdown",this,this.onResizePointerDown),t}setSize(t,o=!1){t.width=Math.max(t.width,this.MIN_SIZE.width),t.height=Math.max(t.height,this.MIN_SIZE.height);const u=t.width-ls.DOUBLE_BORDER,g=t.height-ls.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${u}`),this.inputRoot.setAttribute("height",`${g}`),this.resizeGroup.setAttribute("y",`${g}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-ls.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${u}`),super.setSize(t,o),this.onSizeChange()}getSize(){return super.getSize()}moveDuringDrag(t){super.moveDuringDrag(t),this.onLocationChange()}setPositionRelativeToAnchor(t,o){super.setPositionRelativeToAnchor(t,o),this.onLocationChange()}positionByRect(t=new pn(0,0,0,0)){super.positionByRect(t),this.onLocationChange()}onResizePointerDown(t){this.bringToFront(),F(t)||(Ma(this.workspace,t,new Ot(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=w(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=w(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),t.stopPropagation()}onResizePointerUp(t){$(),this.resizePointerUpListener&&(O(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(O(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(t){t=ol(this.workspace,t),this.setSize(new wn(this.workspace.RTL?-t.x:t.x,t.y),!1),this.onSizeChange()}onTextChange(){this.text=this.textArea.value;for(const t of this.textChangeListeners)t()}onSizeChange(){for(const t of this.sizeChangeListeners)t()}onLocationChange(){for(const t of this.locationChangeListeners)t()}};Wt(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var N={};N.register=Qs,N.unregister=Jp;var B=17,ie=160,de=80,Oe=class extends P_{constructor(t){super(t),this.sourceBlock=t,this.textInputBubble=null,this.text="",this.bubbleSize=new wn(ie,de),this.bubbleVisiblity=!1}getType(){return Oe.TYPE}initView(t){this.svgRoot||(super.initView(t),Re(qe.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),Re(qe.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),Re(qe.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Ye(this.svgRoot,"blocklyCommentIcon"))}dispose(){super.dispose();let t;(t=this.textInputBubble)==null||t.dispose()}getWeight(){return Oe.WEIGHT}getSize(){return new wn(B,B)}applyColour(){super.applyColour();const t=this.sourceBlock.getColour();let o;(o=this.textInputBubble)==null||o.setColour(t)}updateEditable(){const t=this,o=()=>super.updateEditable;return(0,ut.asyncExecutePromiseGeneratorFunction)(function*(){o().call(t),t.bubbleIsVisible()&&(yield t.setBubbleVisible(!1),yield t.setBubbleVisible(!0))})}onLocationChange(t){const o=this.workspaceLocation;super.onLocationChange(t),this.bubbleLocation&&(t=Ot.difference(this.workspaceLocation,o),this.bubbleLocation=Ot.sum(this.bubbleLocation,t)),t=this.getAnchorLocation();let u;(u=this.textInputBubble)==null||u.setAnchorLocation(t)}setText(t){const o=this.text;K(new(Ke(tt.BLOCK_CHANGE))(this.sourceBlock,"comment",null,o,t)),this.text=t;let u;(u=this.textInputBubble)==null||u.setText(this.text)}getText(){return this.text}setBubbleSize(t){this.bubbleSize=t;let o;(o=this.textInputBubble)==null||o.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}setBubbleLocation(t){this.bubbleLocation=t;let o;(o=this.textInputBubble)==null||o.moveDuringDrag(t)}getBubbleLocation(){return this.bubbleLocation}saveState(){if(this.text){const t={text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width},o=this.getBubbleLocation();return o&&(t.x=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(o.x+this.bubbleSize.width):o.x,t.y=o.y),t}return null}loadState(t){let o;this.text=(o=t.text)!=null?o:"";let u,g;this.bubbleSize=new wn((u=t.width)!=null?u:ie,(g=t.height)!=null?g:de);let R;this.bubbleVisiblity=(R=t.pinned)!=null?R:!1,this.setBubbleVisible(this.bubbleVisiblity);let k=t.x;const ue=t.y;Gn().then(()=>{k&&ue&&(k=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(k+this.bubbleSize.width):k,this.setBubbleLocation(new Ot(k,ue)))})}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var t=this.textInputBubble.getText();this.text!==t&&(K(new(Ke(tt.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,t)),this.text=t)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}onBubbleLocationChange(){this.textInputBubble&&(this.bubbleLocation=this.textInputBubble.getRelativeToSurfaceXY())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(t){const o=this;return(0,ut.asyncExecutePromiseGeneratorFunction)(function*(){o.bubbleVisiblity!==t&&(o.bubbleVisiblity=t,yield Gn(),!o.sourceBlock.rendered||o.sourceBlock.isInFlyout||o.sourceBlock.isInsertionMarker()||(t?(o.sourceBlock.isEditable()?o.showEditableBubble():o.showNonEditableBubble(),o.applyColour()):o.hideBubble(),K(new(Ke(tt.BUBBLE_OPEN))(o.sourceBlock,t,"comment"))))})}getBubble(){return this.textInputBubble}showEditableBubble(){this.createBubble();let t;(t=this.textInputBubble)==null||t.addTextChangeListener(()=>this.onTextChange());let o;(o=this.textInputBubble)==null||o.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let t;(t=this.textInputBubble)==null||t.setEditable(!1)}createBubble(){this.textInputBubble=new A(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.bubbleLocation&&this.textInputBubble.moveDuringDrag(this.bubbleLocation),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange()),this.textInputBubble.addLocationChangeListener(()=>this.onBubbleLocationChange())}hideBubble(){let t;(t=this.textInputBubble)==null||t.dispose(),this.textInputBubble=null}getAnchorLocation(){const t=B/2;return Ot.sum(this.workspaceLocation,new Ot(t,t))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Oe.TYPE=je.COMMENT,Oe.WEIGHT=3,Qs(Oe.TYPE,Oe);var nt={};nt.CommentIcon=Oe,nt.Icon=P_,nt.IconType=je,nt.MutatorIcon=n.MutatorIcon$$module$build$src$core$icons$mutator_icon,nt.WarningIcon=Oc,nt.exceptions=$b,nt.registry=N,n.Names$$module$build$src$core$names=class{constructor(t,o){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=o||"",this.reservedWords=new Set(t?t.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(t){this.variableMap=t}getNameForUserVariable(t){return this.variableMap?(t=this.variableMap.getVariableById(t))?t.getName():null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(t){t=n.allUsedVarModels$$module$build$src$core$variables(t);for(let o=0;o<t.length;o++)this.getName(t[o].getId(),n.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(t){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(t,o){let u=t;o===n.NameType$$module$build$src$core$names.VARIABLE&&(t=this.getNameForUserVariable(t))&&(u=t),t=u.toLowerCase();const g=o===n.NameType$$module$build$src$core$names.VARIABLE||o===n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(o)||this.db.set(o,new Map);const R=this.db.get(o);return R.has(t)?g+R.get(t):(o=this.getDistinctName(u,o),R.set(t,o.substr(g.length)),o)}getUserNames(t){let o;return(t=(o=this.db.get(t))==null?void 0:o.keys())?Array.from(t):[]}getDistinctName(t,o){t=this.safeName(t);let u=null,g,R;for(;this.dbReverse.has(t+((g=u)!=null?g:""))||this.reservedWords.has(t+((R=u)!=null?R:""));)u=u?u+1:2;let k;return t+=(k=u)!=null?k:"",this.dbReverse.add(t),(o===n.NameType$$module$build$src$core$names.VARIABLE||o===n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+t}safeName(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(t[0])&&(t="my_"+t)):t=n.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",t}static equals(t,o){return t.toLowerCase()===o.toLowerCase()}},function(t){t=t.NameType||(t.NameType={}),t.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",t.VARIABLE="VARIABLE",t.PROCEDURE="PROCEDURE"}(n.Names$$module$build$src$core$names||(n.Names$$module$build$src$core$names={})),n.NameType$$module$build$src$core$names=n.Names$$module$build$src$core$names.NameType,n.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,n.NameType$$module$build$src$core$names,n.Names$$module$build$src$core$names;var wt=class extends Map{constructor(){super()}set(t,o){return this.get(t)===o?this:(super.set(t,o),zr(o)&&o.startPublishing(),this)}delete(t){const o=this.get(t);return t=super.delete(t),t&&(zr(o)&&o.stopPublishing(),t)}clear(){if(this.size)for(const t of this.keys())this.delete(t)}add(t){return this.set(t.getId(),t)}getProcedures(){return[...this.values()]}},Dt,it;Dt="PROCEDURE",n.DEFAULT_ARG$$module$build$src$core$procedures="x",it={CATEGORY_NAME:Dt,DEFAULT_ARG:n.DEFAULT_ARG$$module$build$src$core$procedures},it.ObservableProcedureMap=wt,it.allProcedures=Hs,it.findLegalName=n.findLegalName$$module$build$src$core$procedures,it.flyoutCategory=zl,it.getCallers=Zp,it.getDefinition=n.getDefinition$$module$build$src$core$procedures,it.internalFlyoutCategory=kr,it.isNameUsed=Cm,it.isProcedureBlock=Ho,it.mutateCallers=n.mutateCallers$$module$build$src$core$procedures,it.mutatorOpenListener=Rm,it.rename=n.rename$$module$build$src$core$procedures;var mt=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(t){return Object.prototype.hasOwnProperty.call(this,t)||(this[t]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[t]}isField(t){return(t.type&this.FIELD)>=1}isHat(t){return(t.type&this.HAT)>=1}isIcon(t){return(t.type&this.ICON)>=1}isSpacer(t){return(t.type&this.SPACER)>=1}isInRowSpacer(t){return(t.type&this.IN_ROW_SPACER)>=1}isSpacerRow(t){return(t.type&this.BETWEEN_ROW_SPACER)>=1}isInput(t){return(t.type&this.INPUT)>=1}isExternalInput(t){return(t.type&this.EXTERNAL_VALUE_INPUT)>=1}isInlineInput(t){return(t.type&this.INLINE_INPUT)>=1}isStatementInput(t){return(t.type&this.STATEMENT_INPUT)>=1}isPreviousConnection(t){return(t.type&this.PREVIOUS_CONNECTION)>=1}isNextConnection(t){return(t.type&this.NEXT_CONNECTION)>=1}isPreviousOrNextConnection(t){return this.isPreviousConnection(t)||this.isNextConnection(t)}isRoundCorner(t){return(t.type&this.LEFT_ROUND_CORNER)>=1||(t.type&this.RIGHT_ROUND_CORNER)>=1}isLeftRoundedCorner(t){return this.isRoundCorner(t)&&(t.type&this.LEFT_ROUND_CORNER)>=1}isRightRoundedCorner(t){return this.isRoundCorner(t)&&(t.type&this.RIGHT_ROUND_CORNER)>=1}isLeftSquareCorner(t){return(t.type&this.LEFT_SQUARE_CORNER)>=1}isRightSquareCorner(t){return(t.type&this.RIGHT_SQUARE_CORNER)>=1}isCorner(t){return(t.type&this.CORNER)>=1}isJaggedEdge(t){return(t.type&this.JAGGED_EDGE)>=1}isRow(t){return(t.type&this.ROW)>=1}isBetweenRowSpacer(t){return(t.type&this.BETWEEN_ROW_SPACER)>=1}isTopRow(t){return(t.type&this.TOP_ROW)>=1}isBottomRow(t){return(t.type&this.BOTTOM_ROW)>=1}isTopOrBottomRow(t){return this.isTopRow(t)||this.isBottomRow(t)}isInputRow(t){return(t.type&this.INPUT_ROW)>=1}},Ce=new mt,Sn=class{constructor(t){this.centerline=this.xPos=this.height=this.width=0,this.constants_=t,this.type=Ce.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Qi=class{constructor(t){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=t,this.type=Ce.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let t=this.elements.length-1;t>=0;t--){const o=this.elements[t];if(Ce.isInput(o))return o}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let t=0;t<this.elements.length;t++){const o=this.elements[t];if(Ce.isInRowSpacer(o))return o}return null}getLastSpacer(){for(let t=this.elements.length-1;t>=0;t--){const o=this.elements[t];if(Ce.isInRowSpacer(o))return o}return null}},Je=class extends Qi{constructor(t){super(t),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=Ce.BOTTOM_ROW}hasLeftSquareCorner(t){return!!t.outputConnection||!!t.getNextBlock()}hasRightSquareCorner(t){return!0}measure(){let t=0,o=0,u=0;for(let g=0;g<this.elements.length;g++){const R=this.elements[g];o+=R.width,Ce.isSpacer(R)||(Ce.isNextConnection(R)?u=Math.max(u,R.height):t=Math.max(t,R.height))}this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,t)+u,this.descenderHeight=u,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Ge=class extends Sn{constructor(t,o){super(t),this.connectionModel=o,this.type|=Ce.CONNECTION,this.shape=this.constants_.shapeFor(o),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=o.isHighlighted()}},st=class extends Ge{constructor(t,o){super(t,o.connection),this.input=o,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=Ce.INPUT,this.align=o.align,(this.connectedBlock=o.connection&&o.connection.targetBlock()?o.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Lt=class extends st{constructor(t,o){super(t,o),this.height=0,this.type|=Ce.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},mn=class extends Sn{constructor(t,o,u){super(t),this.field=o,this.parentInput=u,this.isEditable=o.EDITABLE,this.flipRtl=o.getFlipRtl(),this.type|=Ce.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width}},_i=class extends Sn{constructor(t){super(t),this.type|=Ce.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},In=class extends Sn{constructor(t,o){super(t),this.icon=o,this.flipRtl=!1,this.type|=Ce.ICON,t=o.getSize(),this.height=t.height,this.width=t.width}},yn=class extends Sn{constructor(t,o){super(t),this.type|=Ce.SPACER|Ce.IN_ROW_SPACER,this.width=o,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Kr=class extends st{constructor(t,o){super(t,o),this.type|=Ce.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Gi=class extends Qi{constructor(t){super(t),this.connectedBlockWidths=0,this.type|=Ce.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let t=0;for(let o=0;o<this.elements.length;o++){const u=this.elements[o];this.width+=u.width,Ce.isInput(u)&&(Ce.isStatementInput(u)?t+=u.connectedBlockWidth:Ce.isExternalInput(u)&&u.connectedBlockWidth!==0&&(t+=u.connectedBlockWidth-u.connectionWidth)),Ce.isSpacer(u)||(this.height=Math.max(this.height,u.height))}this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Ud=class extends Sn{constructor(t){super(t),this.type|=Ce.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},TA=class extends Ge{constructor(t,o){super(t,o),this.type|=Ce.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},oL=class extends Ge{constructor(t,o){super(t,o),this.connectionOffsetX=0,this.type|=Ce.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},aL=class extends Ge{constructor(t,o){super(t,o),this.type|=Ce.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},VT=class extends Sn{constructor(t,o){super(t),this.type=(o&&o!=="left"?Ce.RIGHT_ROUND_CORNER:Ce.LEFT_ROUND_CORNER)|Ce.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},a1=class extends Qi{constructor(t,o,u){super(t),this.height=o,this.width=u,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type|=Ce.SPACER|Ce.BETWEEN_ROW_SPACER,this.elements=[new yn(this.constants_,u)]}measure(){}},WT=class extends Sn{constructor(t,o){super(t),this.type=(o&&o!=="left"?Ce.RIGHT_SQUARE_CORNER:Ce.LEFT_SQUARE_CORNER)|Ce.CORNER,this.width=this.height=this.constants_.NO_PADDING}},EA=class extends st{constructor(t,o){super(t,o),this.type|=Ce.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},l1=class extends Qi{constructor(t){super(t),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=Ce.TOP_ROW}hasLeftSquareCorner(t){const o=(t.hat?t.hat==="cap":this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,u=t.getPreviousBlock();return!!t.outputConnection||o||(u?u.getNextBlock()===t:!1)}hasRightSquareCorner(t){return!0}measure(){let t=0,o=0,u=0;for(let g=0;g<this.elements.length;g++){const R=this.elements[g];o+=R.width,Ce.isSpacer(R)||(Ce.isHat(R)?u=Math.max(u,R.ascenderHeight):t=Math.max(t,R.height))}this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,t)+u,this.capline=this.ascenderHeight=u,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},SA=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ws(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(t){this.blockStyles=Object.create(null);const o=t.blockStyles;for(const u in o)this.blockStyles[u]=this.validatedBlockStyle_(o[u]);this.setDynamicProperties_(t)}setDynamicProperties_(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=t.startHats!==void 0?t.startHats:this.ADD_START_HATS}setFontConstants_(t){t.fontStyle&&t.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=t.fontStyle.family),t.fontStyle&&t.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=t.fontStyle.weight),t.fontStyle&&t.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=t.fontStyle.size),t=$e("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline}setComponentConstants_(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(t){const o="auto_"+t;return this.blockStyles[o]||(this.blockStyles[o]=this.createBlockStyle_(t)),{style:this.blockStyles[o],name:o}}getBlockStyle(t){return this.blockStyles[t||""]||(t&&t.startsWith("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(t){return this.validatedBlockStyle_({colourPrimary:t})}validatedBlockStyle_(t){const o={};return t&&Object.assign(o,t),t=dc(o.colourPrimary||"#000"),o.colourPrimary=t.hex,o.colourSecondary=o.colourSecondary?dc(o.colourSecondary).hex:this.generateSecondaryColour_(o.colourPrimary),o.colourTertiary=o.colourTertiary?dc(o.colourTertiary).hex:this.generateTertiaryColour_(o.colourPrimary),o.hat=o.hat||"",o}generateSecondaryColour_(t){return Bl("#fff",t,.6)||t}generateTertiaryColour_(t){return Bl("#fff",t,.3)||t}dispose(){this.embossFilter&&we(this.embossFilter),this.disabledPattern&&we(this.disabledPattern),this.debugFilter&&we(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const t=this.JAGGED_TEETH_HEIGHT,o=this.JAGGED_TEETH_WIDTH,u=Iu([cn(o,t/4),cn(-o*2,t/2),cn(o,t/4)]);return{height:t,width:o,path:u}}makeStartHat(){const t=this.START_HAT_HEIGHT,o=this.START_HAT_WIDTH,u=ao("c",[cn(30,-t),cn(70,-t),cn(o,0)]);return{height:t*.75,width:o,path:u}}makePuzzleTab(){function t(k){k=k?-1:1;const ue=-k;var xe=u/2;const St=xe+2.5,bn=xe+.5,xr=cn(-o,k*xe);return xe=cn(o,k*xe),ao("c",[cn(0,k*St),cn(-o,ue*bn),xr])+ao("s",[cn(o,ue*2.5),xe])}const o=this.TAB_WIDTH,u=this.TAB_HEIGHT,g=t(!0),R=t(!1);return{type:this.SHAPES.PUZZLE,width:o,height:u,pathDown:R,pathUp:g}}makeNotch(){function t(ue){return Iu([cn(ue*g,u),cn(ue*3,0),cn(ue*g,-u)])}const o=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,g=(o-3)/2,R=t(1),k=t(-1);return{type:this.SHAPES.NOTCH,width:o,height:u,pathLeft:R,pathRight:k}}makeInsideCorners(){const t=this.CORNER_RADIUS,o=ps("a","0 0,0",t,cn(-t,t)),u=ps("a","0 0,0",t,cn(t,t));return{width:t,height:t,pathTop:o,pathBottom:u}}makeOutsideCorners(){const t=this.CORNER_RADIUS,o=ws(0,t)+ps("a","0 0,1",t,cn(t,-t)),u=ps("a","0 0,1",t,cn(t,t)),g=ps("a","0 0,1",t,cn(-t,-t)),R=ps("a","0 0,1",t,cn(-t,t));return{topLeft:o,topRight:u,bottomRight:R,bottomLeft:g,rightHeight:t}}shapeFor(t){switch(t.type){case un.INPUT_VALUE:case un.OUTPUT_VALUE:return this.PUZZLE_TAB;case un.PREVIOUS_STATEMENT:case un.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(t,o,u,g){this.injectCSS_(o,u),this.defs=Re(qe.DEFS,{},t),t=Re(qe.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),Re(qe.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),o=Re(qe.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t),Re(qe.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),Re(qe.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),Re(qe.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter=t,t=Re(qe.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),Re(qe.RECT,{width:10,height:10,fill:"#aaa"},t),Re(qe.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},t),this.disabledPatternId=t.id,this.disabledPattern=t,this.createDebugFilter(),g&&(g.style.setProperty("--blocklyEmbossFilter",`url(#${this.embossFilterId})`),g.style.setProperty("--blocklyDisabledPattern",`url(#${this.disabledPatternId})`),g.style.setProperty("--blocklyDebugFilter",`url(#${this.debugFilterId})`))}createDebugFilter(){if(!this.debugFilter){const t=Re(qe.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),o=Re(qe.FECOMPONENTTRANSFER,{result:"outBlur"},t);Re(qe.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),Re(qe.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),Re(qe.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter=t}}injectCSS_(t,o){o=this.getCSS_(o),t="blockly-renderer-style-"+t,this.cssNode=document.getElementById(t);const u=o.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=u:(o=document.createElement("style"),o.id=t,t=document.createTextNode(u),o.appendChild(t),document.head.insertBefore(o,document.head.firstChild),this.cssNode=o)}getCSS_(t){return[`${t} .blocklyText, `,`${t} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t} .blocklyText {`,"fill: #fff;","}",`${t} .blocklyNonEditableField>rect,`,`${t} .blocklyEditableField>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${t} .blocklyNonEditableField>text,`,`${t} .blocklyEditableField>text {`,"fill: #000;","}",`${t} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${t} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${t} .blocklyEditableField:not(.blocklyEditing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${t} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${t} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${t} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${t} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${t} .blocklyReplaceable .blocklyPathLight,`,`${t} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${t} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},AA=class{constructor(t,o){this.inlinePath_=this.outlinePath_="",this.block_=t,this.info_=o,this.topLeft_=t.getRelativeToSurfaceXY(),this.constants_=o.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let t=1;t<this.info_.rows.length-1;t++){const o=this.info_.rows[t];o.hasJaggedEdge?this.drawJaggedEdge_(o):o.hasStatement?this.drawStatementInput_(o):o.hasExternalInput?this.drawValueInput_(o):this.drawRightSideRow_(o)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const t=this.info_.topRow,o=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=ws(t.xPos,this.info_.startY);for(let u=0,g;g=o[u];u++)Ce.isLeftRoundedCorner(g)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Ce.isRightRoundedCorner(g)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Ce.isPreviousConnection(g)?this.outlinePath_+=g.shape.pathLeft:Ce.isHat(g)?this.outlinePath_+=this.constants_.START_HAT.path:Ce.isSpacer(g)&&(this.outlinePath_+=hn("h",g.width));this.outlinePath_+=hn("v",t.height)}drawJaggedEdge_(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+hn("v",t.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(t){const o=t.getLastInput();this.positionExternalValueConnection_(t);const u=wf(o.shape)?o.shape.pathDown(o.height):o.shape.pathDown;this.outlinePath_+=hn("H",o.xPos+o.width)+u+hn("v",t.height-o.connectionHeight)}drawStatementInput_(t){var o=t.getLastInput();if(o){var u=o.xPos+o.notchOffset+o.shape.width;o=o.shape.pathRight+hn("h",-(o.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var g=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=hn("H",u)+o+hn("v",g)+this.constants_.INSIDE_CORNERS.pathBottom+hn("H",t.xPos+t.width),this.positionStatementInputConnection_(t)}}drawRightSideRow_(t){this.outlinePath_+=hn("V",t.yPos+t.height)}drawBottom_(){const t=this.info_.bottomRow,o=t.elements;this.positionNextConnection_();let u=0,g="";for(let R=o.length-1,k;k=o[R];R--)Ce.isNextConnection(k)?g+=k.shape.pathRight:Ce.isLeftSquareCorner(k)?g+=hn("H",t.xPos):Ce.isLeftRoundedCorner(k)?g+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Ce.isRightRoundedCorner(k)?(g+=this.constants_.OUTSIDE_CORNERS.bottomRight,u=this.constants_.OUTSIDE_CORNERS.rightHeight):Ce.isSpacer(k)&&(g+=hn("h",k.width*-1));this.outlinePath_+=hn("V",t.baseline-u),this.outlinePath_+=g}drawLeft_(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){const o=t.connectionOffsetY+t.height;t=wf(t.shape)?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=hn("V",o)+t}this.outlinePath_+="z"}drawInternals_(){for(let t=0,o;o=this.info_.rows[t];t++)for(let u=0,g;g=o.elements[u];u++)Ce.isInlineInput(g)?this.drawInlineInput_(g):(Ce.isIcon(g)||Ce.isField(g))&&this.layoutField_(g)}layoutField_(t){const o=t.centerline-t.height/2;let u=t.xPos;var g="";this.info_.RTL&&(u=-(u+t.width),t.flipRtl&&(u+=t.width,g="scale(-1 1)")),Ce.isIcon(t)?(g=t.icon,g.setOffsetInBlock(new Ot(u,o)),this.info_.isInsertionMarker&&g.hideForInsertionMarker()):(t=t.field.getSvgRoot(),t.setAttribute("transform","translate("+u+","+o+")"+g),this.info_.isInsertionMarker&&t.setAttribute("display","none"))}drawInlineInput_(t){const o=t.width,u=t.height,g=t.connectionOffsetY,R=t.connectionHeight+g;this.inlinePath_+=Zs(t.xPos+t.connectionWidth,t.centerline-u/2)+hn("v",g)+t.shape.pathDown+hn("v",u-R)+hn("h",o-t.connectionWidth)+hn("v",-u)+"z",this.positionInlineInputConnection_(t)}positionInlineInputConnection_(t){const o=t.centerline-t.height/2;if(t.connectionModel){let u=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(u*=-1),t.connectionModel.setOffsetInBlock(u,o+t.connectionOffsetY)}}positionStatementInputConnection_(t){const o=t.getLastInput();if(o!=null&&o.connectionModel){let u=t.xPos+t.statementEdge+o.notchOffset;this.info_.RTL&&(u*=-1),o.connectionModel.setOffsetInBlock(u,t.yPos)}}positionExternalValueConnection_(t){const o=t.getLastInput();if(o&&o.connectionModel){let u=t.xPos+t.width;this.info_.RTL&&(u*=-1),o.connectionModel.setOffsetInBlock(u,t.yPos)}}positionPreviousConnection_(){const t=this.info_.topRow;if(t.connection){const o=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,0)}}positionNextConnection_(){const t=this.info_.bottomRow;if(t.connection){const o=t.connection,u=o.xPos;o.connectionModel.setOffsetInBlock(this.info_.RTL?-u:u,t.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const t of this.info_.rows)for(const o of t.elements){if(!(o instanceof Ge))continue;const u=this.drawConnectionHighlightPath(o);u&&(u.style.display=o.highlighted?"":"none")}}drawConnectionHighlightPath(t){const o=t.connectionModel;t=o.type===un.INPUT_VALUE||o.type===un.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(t):this.getStatementConnectionHighlightPath(t);const u=o.getSourceBlock();let g,R;return(R=(g=u.pathObject).addConnectionHighlight)==null?void 0:R.call(g,o,t,o.getOffsetInBlock(),u.RTL)}getExpressionConnectionHighlightPath(t){let o="";return wf(t.shape)?o=t.shape.pathDown(t.height):vo(t.shape)&&(o=t.shape.pathDown),t=this.constants_.TAB_OFFSET_FROM_TOP,ws(0,-t)+hn("v",t)+o+hn("v",t)}getStatementConnectionHighlightPath(t){if(!cr(t.shape))throw Error("Statement connections should have notch shapes");const o=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ws(-o,0)+hn("h",o)+t.shape.pathLeft+hn("h",o)}},XT=class{constructor(t,o){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=t,this.block_=o,this.constants_=this.renderer_.getConstants(),this.outputConnection=o.outputConnection?new oL(this.constants_,o.outputConnection):null,this.isInline=o.getInputsInline()&&!o.isCollapsed(),this.isCollapsed=o.isCollapsed(),this.isInsertionMarker=o.isInsertionMarker(),this.RTL=o.RTL,this.topRow=new l1(this.constants_),this.bottomRow=new Je(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let t=new Gi(this.constants_);this.inputRows.push(t);var o=this.block_.getIcons();for(let u=0,g;g=o[u];u++){const R=new In(this.constants_,g);this.isCollapsed&&!g.isShownWhenCollapsed()||t.elements.push(R)}o=void 0;for(let u=0,g;g=this.block_.inputList[u];u++)if(g.isVisible()){this.shouldStartNewRow_(g,o)&&(this.rows.push(t),t=new Gi(this.constants_),this.inputRows.push(t));for(let R=0,k;k=g.fieldRow[R];R++)t.elements.push(new mn(this.constants_,k,g));this.addInput_(g,t),o=g}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new Ud(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var t=!!this.block_.previousConnection;const o=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t;let u=this.topRow.hasLeftSquareCorner(this.block_)?WT:VT;this.topRow.elements.push(new u(this.constants_)),o?(t=new _i(this.constants_),this.topRow.elements.push(t)):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new aL(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof va&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,u=this.topRow.hasRightSquareCorner(this.block_)?WT:VT,this.topRow.elements.push(new u(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof va?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new WT(this.constants_)):this.bottomRow.elements.push(new VT(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new TA(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new WT(this.constants_,"right")):this.bottomRow.elements.push(new VT(this.constants_,"right"))}addInput_(t,o){this.isInline&&t instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(o.elements.push(new Kr(this.constants_,t)),o.hasInlineInput=!0):t instanceof va?(o.elements.push(new EA(this.constants_,t)),o.hasStatement=!0):t instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(o.elements.push(new Lt(this.constants_,t)),o.hasExternalInput=!0):(t instanceof yh||t instanceof Ld)&&(o.minHeight=Math.max(o.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),o.hasDummyInput=!0),o.align===null&&(o.align=t.align)}shouldStartNewRow_(t,o){return o?o instanceof Ld||t instanceof va||o instanceof va?!0:t instanceof n.ValueInput$$module$build$src$core$inputs$value_input||t instanceof yh||o instanceof n.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let t=0,o;o=this.rows[t];t++){const u=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new yn(this.constants_,this.getInRowSpacing_(null,u[0]))),u.length){for(let g=0;g<u.length-1;g++){o.elements.push(u[g]);const R=this.getInRowSpacing_(u[g],u[g+1]);o.elements.push(new yn(this.constants_,R))}o.elements.push(u[u.length-1]),o.endsWithElemSpacer()&&o.elements.push(new yn(this.constants_,this.getInRowSpacing_(u[u.length-1],null)))}}}getInRowSpacing_(t,o){if(!t&&o&&Ce.isStatementInput(o))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&Ce.isInput(t)&&!o){if(Ce.isExternalInput(t))return this.constants_.NO_PADDING;if(Ce.isInlineInput(t))return this.constants_.LARGE_PADDING;if(Ce.isStatementInput(t))return this.constants_.NO_PADDING}return t&&Ce.isLeftSquareCorner(t)&&o&&(Ce.isPreviousConnection(o)||Ce.isNextConnection(o))?o.notchOffset:t&&Ce.isLeftRoundedCorner(t)&&o&&(Ce.isPreviousConnection(o)||Ce.isNextConnection(o))?o.notchOffset-this.constants_.CORNER_RADIUS:t&&Ce.isField(t)&&t.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING}computeBounds_(){let t=0,o=0,u=0;for(let R=0,k;k=this.rows[R];R++){if(k.measure(),o=Math.max(o,k.width),k.hasStatement){var g=k.getLastInput();let ue,xe;g=k.width-((xe=(ue=g)==null?void 0:ue.width)!=null?xe:0),t=Math.max(t,g)}u=Math.max(u,k.widthWithConnectedBlocks)}this.statementEdge=t,this.width=o;for(let R=0,k;k=this.rows[R];R++)k.hasStatement&&(k.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(o,u),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let o=0,u;u=this.rows[o];o++)if(u.hasStatement)this.alignStatementRow_(u);else{var t=u.width;t=this.getDesiredRowWidth_(u)-t,t>0&&this.addAlignmentPadding_(u,t),Ce.isTopOrBottomRow(u)&&(u.widthWithConnectedBlocks=u.width)}}getDesiredRowWidth_(t){return this.width-this.startX}addAlignmentPadding_(t,o){const u=t.getFirstSpacer(),g=t.getLastSpacer();if((t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=o),t.align===n.Align$$module$build$src$core$inputs$align.LEFT&&g)g.width+=o;else if(t.align===n.Align$$module$build$src$core$inputs$align.CENTRE&&u&&g)u.width+=o/2,g.width+=o/2;else if(t.align===n.Align$$module$build$src$core$inputs$align.RIGHT&&u)u.width+=o;else if(g)g.width+=o;else return;t.width+=o}alignStatementRow_(t){const o=t.getLastInput();if(o){var u=t.width-o.width,g=this.statementEdge;u=g-u,u>0&&this.addAlignmentPadding_(t,u),u=t.width,g=this.getDesiredRowWidth_(t),o.width+=g-u,o.height=Math.max(o.height,t.height),t.width+=g-u,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)}}addRowSpacing_(){const t=this.rows;this.rows=[];for(let o=0;o<t.length;o++)this.rows.push(t[o]),o!==t.length-1&&this.rows.push(this.makeSpacerRow_(t[o],t[o+1]))}makeSpacerRow_(t,o){var u=this.getSpacerRowHeight_(t,o);const g=this.getSpacerRowWidth_(t,o);return u=new a1(this.constants_,u,g),t.hasStatement&&(u.followsStatement=!0),o.hasStatement&&(u.precedesStatement=!0),u}getSpacerRowWidth_(t,o){return this.width-this.startX}getSpacerRowHeight_(t,o){return this.constants_.MEDIUM_PADDING}getElemCenterline_(t,o){return Ce.isSpacer(o)?t.yPos+o.height/2:Ce.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,Ce.isNextConnection(o)?t+o.height/2:t-o.height/2):Ce.isTopRow(t)?Ce.isHat(o)?t.capline-o.height/2:t.capline+o.height/2:t.yPos+t.height/2}recordElemPositions_(t){let o=t.xPos;for(let u=0,g;g=t.elements[u];u++)Ce.isSpacer(g)&&(g.height=t.height),g.xPos=o,g.centerline=this.getElemCenterline_(t,g),o+=g.width}finalize_(){let t=0,o=0;for(let u=0,g;g=this.rows[u];u++)g.yPos=o,g.xPos=this.startX,o+=g.height,t=Math.max(t,g.widthWithConnectedBlocks),this.recordElemPositions_(g);if(this.outputConnection&&this.block_.nextConnection){const u=this.block_.nextConnection.targetBlock();u&&(t=Math.max(t,u.getHeightWidth().width))}this.widthWithChildren=t+this.startX,this.height=o,this.startY=this.topRow.capline,this.bottomRow.baseline=o-this.bottomRow.descenderHeight}getMeasureableForConnection(t){let o;if(((o=this.outputConnection)==null?void 0:o.connectionModel)===t)return this.outputConnection;for(const u of this.rows)for(const g of u.elements)if(g instanceof Ge&&g.connectionModel===t)return g;return null}},$A=class{constructor(t,o,u){this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=u,this.style=o,this.svgRoot=t,this.svgPath=Re(qe.PATH,{class:"blocklyPath"},this.svgRoot),this.setClass_("blocklyBlock",!0)}setPath(t){this.svgPath.setAttribute("d",t)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}applyColour(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())}setStyle(t){this.style=t}setClass_(t,o){t&&(o?Ye(this.svgRoot,t):Se(this.svgRoot,t))}updateHighlighted(t){t?this.setClass_("blocklyHighlighted",!0):this.setClass_("blocklyHighlighted",!1)}updateShadow_(t){t?(this.setClass_("blocklyShadow",!0),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)):this.setClass_("blocklyShadow",!1)}updateDisabled_(t){this.setClass_("blocklyDisabled",t),this.setClass_("blocklyDisabledPattern",t)}updateSelected(t){this.setClass_("blocklySelected",t)}updateDraggingDelete(t){this.setClass_("blocklyDraggingDelete",t)}updateInsertionMarker(t){this.setClass_("blocklyInsertionMarker",t)}updateMovable(t){this.setClass_("blocklyDraggable",t)}updateReplacementFade(t){this.setClass_("blocklyReplaceable",t)}updateShapeForInputHighlight(t,o){}addConnectionHighlight(t,o,u,g){return u=`translate(${u.x}, ${u.y})`+(g?" scale(-1 1)":""),(g=this.connectionHighlights.get(t))?(g.setAttribute("d",o),g.setAttribute("transform",u),g):(o=Re(qe.PATH,{id:t.id,class:"blocklyHighlightedConnectionPath",style:"display: none;",d:o,transform:u},this.svgRoot),this.connectionHighlights.set(t,o),o)}removeConnectionHighlight(t){const o=this.connectionHighlights.get(t);o&&(we(o),this.connectionHighlights.delete(t))}},xA=class{constructor(t){this.overrides=null,this.name=t}getClassName(){return this.name+"-renderer"}init(t,o){this.constants_=this.makeConstants_(),o&&(this.overrides=o,Object.assign(this.constants_,o)),this.constants_.setTheme(t),this.constants_.init()}createDom(t,o,u){this.constants_.createDom(t,this.name+"-"+o.name,"."+this.getClassName()+"."+o.getClassName(),u)}refreshDom(t,o,u){const g=this.getConstants();g.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=g.randomIdentifier,this.constants_.setTheme(o),this.constants_.init(),this.createDom(t,o,u)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new SA}makeRenderInfo_(t){return new XT(this,t)}makeDrawer_(t,o){return new AA(t,o)}makePathObject(t,o){return new $A(t,o,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(t){return!0}orphanCanConnectAtEnd(t,o,u){return!!Ci.getConnectionForOrphanedConnection(t,u===un.OUTPUT_VALUE?o.outputConnection:o.previousConnection)}render(t){const o=this.makeRenderInfo_(t);o.measure(),this.makeDrawer_(t,o).draw()}},bs={};bs.BottomRow=Je,bs.Connection=Ge,bs.ConstantProvider=SA,bs.Drawer=AA,bs.ExternalValueInput=Lt,bs.Field=mn,bs.Hat=_i,bs.Icon=In,bs.InRowSpacer=yn,bs.InlineInput=Kr,bs.InputConnection=st,bs.InputRow=Gi,bs.JaggedEdge=Ud,bs.Measurable=Sn,bs.NextConnection=TA,bs.OutputConnection=oL,bs.PathObject=$A,bs.PreviousConnection=aL,bs.RenderInfo=XT,bs.Renderer=xA,bs.RoundCorner=VT,bs.Row=Qi,bs.SpacerRow=a1,bs.SquareCorner=WT,bs.StatementInput=EA,bs.TopRow=l1,bs.Types=Ce,bs.init=If,bs.register=cl,bs.unregister=hl;var lL=class{constructor(t,o){this.workspace=t,this.theme=o,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(t){var o=this.theme;this.theme=t,(t=this.workspace.getInjectionDiv())&&(o&&(o=o.getClassName())&&Se(t,o),(o=this.theme.getClassName())&&Ye(t,o));for(let u=0,g;g=this.subscribedWorkspaces[u];u++)g.refreshTheme();for(const[u,g]of this.componentDB)for(const R of g){t=R.element,o=R.propertyName;const k=this.theme&&this.theme.getComponentStyle(u);t.style.setProperty(o,k||"")}for(const u of this.subscribedWorkspaces)u.hideChaff()}subscribeWorkspace(t){this.subscribedWorkspaces.push(t)}unsubscribeWorkspace(t){if(!Yt(this.subscribedWorkspaces,t))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(t,o,u){this.componentDB.has(o)||this.componentDB.set(o,[]),this.componentDB.get(o).push({element:t,propertyName:u}),o=this.theme&&this.theme.getComponentStyle(o),t.style.setProperty(u,o||"")}unsubscribe(t){if(t)for(const[o,u]of this.componentDB){for(let g=u.length-1;g>=0;g--)u[g].element===t&&u.splice(g,1);u.length||this.componentDB.delete(o)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},u1="VARIABLE_DYNAMIC",dg={CATEGORY_NAME:u1};dg.flyoutCategory=e0,dg.flyoutCategoryBlocks=oh,dg.internalFlyoutCategory=Nf,dg.onCreateVariableButtonClick_Colour=Vl,dg.onCreateVariableButtonClick_Number=dl,dg.onCreateVariableButtonClick_String=Of;var uL=class{canConnect(t,o,u,g){return this.canConnectWithReason(t,o,u,g)===Ci.CAN_CONNECT}canConnectWithReason(t,o,u,g){const R=this.doSafetyChecks(t,o);return R!==Ci.CAN_CONNECT?R:this.doTypeChecks(t,o)?u&&!this.doDragChecks(t,o,g||0)?Ci.REASON_DRAG_CHECKS_FAILED:Ci.CAN_CONNECT:Ci.REASON_CHECKS_FAILED}getErrorMessage(t,o,u){switch(t){case Ci.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Ci.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Ci.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Ci.REASON_TARGET_NULL:return"Target connection is null.";case Ci.REASON_CHECKS_FAILED:return"Connection checks failed. "+(o+" expected "+o.getCheck()+", found "+u.getCheck());case Ci.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Ci.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Ci.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(t,o){if(!t||!o)return Ci.REASON_TARGET_NULL;let u,g,R;return t.isSuperior()?(u=t.getSourceBlock(),g=o.getSourceBlock(),R=o):(g=t.getSourceBlock(),u=o.getSourceBlock(),R=t,t=o),u===g?Ci.REASON_SELF_CONNECTION:R.type!==Xf[t.type]?Ci.REASON_WRONG_TYPE:u.workspace!==g.workspace?Ci.REASON_DIFFERENT_WORKSPACES:u.isShadow()&&!g.isShadow()?Ci.REASON_SHADOW_PARENT:R.type===un.OUTPUT_VALUE&&g.previousConnection&&g.previousConnection.isConnected()||R.type===un.PREVIOUS_STATEMENT&&g.outputConnection&&g.outputConnection.isConnected()?Ci.REASON_PREVIOUS_AND_OUTPUT:Ci.CAN_CONNECT}doTypeChecks(t,o){if(t=t.getCheck(),o=o.getCheck(),!t||!o)return!0;for(let u=0;u<t.length;u++)if(o.includes(t[u]))return!0;return!1}doDragChecks(t,o,u){if(t.distanceFrom(o)>u||o.getSourceBlock().isInsertionMarker())return!1;switch(o.type){case un.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,o);case un.OUTPUT_VALUE:if(o.isConnected()&&!o.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case un.INPUT_VALUE:if(o.isConnected()&&!o.targetBlock().isMovable()&&!o.targetBlock().isShadow())return!1;break;case un.NEXT_STATEMENT:if(o.isConnected()&&!t.getSourceBlock().nextConnection&&!o.targetBlock().isShadow()&&o.targetBlock().nextConnection||o.targetBlock()&&!o.targetBlock().isMovable()&&!o.targetBlock().isShadow())return!1;break;default:return!1}return!Kl.includes(o)}canConnectToPrevious_(t,o){return t.targetConnection||Kl.includes(o)?!1:o.targetConnection?(t=o.targetBlock(),t.isInsertionMarker()?!t.getPreviousBlock():!1):!0}};i(Et.CONNECTION_CHECKER,ri,uL);var Ob=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(t){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new wt,this.readOnly=!1,this.potentialVariableMap=null,this.id=D(),At(this),this.options=t||new bh({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(T(Et.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new(this.getVariableMapClass())(this),this.setIsReadOnly(this.options.readOnly)}dispose(){this.listeners.length=0,this.clear(),Ft(this)}sortObjects(t,o){const u=g=>({getBoundingRectangle:()=>{const R=g.getRelativeToSurfaceXY();return new pn(R.y,R.y,R.x,R.x)},moveBy:()=>{}});return this.sortByOrigin(u(t),u(o))}sortByOrigin(t,o){const u=Math.sin(pm(Ob.SCAN_ANGLE))*(this.RTL?-1:1);return t=t.getBoundingRectangle().getOrigin(),o=o.getBoundingRectangle().getOrigin(),t.y+u*t.x-(o.y+u*o.x)}addTopBlock(t){this.topBlocks.push(t)}removeTopBlock(t){if(!Yt(this.topBlocks,t))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(t=!1){const o=[].concat(this.topBlocks);return t&&o.length>1&&o.sort(this.sortObjects.bind(this)),o}addTypedBlock(t){this.typedBlocksDB.has(t.type)||this.typedBlocksDB.set(t.type,[]),this.typedBlocksDB.get(t.type).push(t)}removeTypedBlock(t){Yt(this.typedBlocksDB.get(t.type),t),this.typedBlocksDB.get(t.type).length||this.typedBlocksDB.delete(t.type)}getBlocksByType(t,o=!1){return this.typedBlocksDB.has(t)?(t=this.typedBlocksDB.get(t).slice(0),o&&t&&t.length>1&&t.sort(this.sortObjects.bind(this)),t.filter(u=>!u.isInsertionMarker())):[]}addTopComment(t){this.topComments.push(t),this.commentDB.has(t.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB.set(t.id,t)}removeTopComment(t){if(!Yt(this.topComments,t))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(t.id)}getTopComments(t=!1){const o=[].concat(this.topComments);return t&&o.length>1&&o.sort(this.sortObjects.bind(this)),o}getAllBlocks(t=!1){if(t){var o=this.getTopBlocks(!0);t=[];for(let u=0;u<o.length;u++)t.push(...o[u].getDescendants(!0))}else for(t=this.getTopBlocks(!1),o=0;o<t.length;o++)t.push(...t[o].getChildren(!1));return t.filter(u=>!u.isInsertionMarker())}clear(){this.isClearing=!0;try{const t=n.getGroup$$module$build$src$core$events$utils();for(t||n.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();n.setGroup$$module$build$src$core$events$utils(t),this.isFlyout||this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(t,o){vr("Blockly.Workspace.renameVariableById","v12","v13","Blockly.Workspace.getVariableMap().renameVariable"),(t=this.variableMap.getVariableById(t))&&this.variableMap.renameVariable(t,o)}createVariable(t,o,u){return vr("Blockly.Workspace.createVariable","v12","v13","Blockly.Workspace.getVariableMap().createVariable"),this.variableMap.createVariable(t,o??void 0,u??void 0)}getVariableUsesById(t){return vr("Blockly.Workspace.getVariableUsesById","v12","v13","Blockly.Workspace.getVariableMap().getVariableUsesById"),Zc(this,t)}deleteVariableById(t){vr("Blockly.Workspace.deleteVariableById","v12","v13","Blockly.Workspace.getVariableMap().deleteVariable");const o=this.variableMap.getVariableById(t);o?n.deleteVariable$$module$build$src$core$variables(this,o):console.warn(`Can't delete non-existent variable: ${t}`)}getVariable(t,o){return vr("Blockly.Workspace.getVariable","v12","v13","Blockly.Workspace.getVariableMap().getVariable"),this.variableMap.getVariable(t,o)}getVariableById(t){return vr("Blockly.Workspace.getVariableById","v12","v13","Blockly.Workspace.getVariableMap().getVariableById"),this.variableMap.getVariableById(t)}getVariablesOfType(t){return vr("Blockly.Workspace.getVariablesOfType","v12","v13","Blockly.Workspace.getVariableMap().getVariablesOfType"),this.variableMap.getVariablesOfType(t??"")}getAllVariables(){return vr("Blockly.Workspace.getAllVariables","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables()}getAllVariableNames(){return vr("Blockly.Workspace.getAllVariableNames","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables().map(t=>t.getName())}getWidth(){return 0}newBlock(t,o){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(t){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(t){return this.options.maxInstances?(this.options.maxInstances[t]!==void 0?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0}isCapacityAvailable(t){if(!this.hasBlockLimits())return!0;let o=0;for(const u in t){if(t[u]>this.remainingCapacityOfType(u))return!1;o+=t[u]}return!(o>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(t){var o=t?this.redoStack_:this.undoStack_,u=t?this.undoStack_:this.redoStack_;const g=o.pop();if(g){for(var R=[g];o.length&&g.group&&g.group===o[o.length-1].group;){const k=o.pop();k&&R.push(k)}for(o=0;o<R.length;o++)u.push(R[o]);n.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(u=0;u<R.length;u++)R[u].run(t)}finally{n.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,We()}addChangeListener(t){return this.listeners.push(t),t}removeChangeListener(t){Yt(this.listeners,t)}fireChangeListener(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&this.MAX_UNDO>=0;)this.undoStack_.shift();for(let o=0;o<this.listeners.length;o++)(0,this.listeners[o])(t)}getBlockById(t){return this.blockDB.get(t)||null}setBlockById(t,o){this.blockDB.set(t,o)}removeBlockById(t){this.blockDB.delete(t)}getCommentById(t){let o;return(o=this.commentDB.get(t))!=null?o:null}allInputsFilled(t){const o=this.getTopBlocks(!1);for(let u=0;u<o.length;u++)if(!o[u].allInputsFilled(t))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new(this.getVariableMapClass())(this,!0)}getVariableMap(){return this.variableMap}setVariableMap(t){this.variableMap=t}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let t=null;const o=this.options.parentWorkspace;return this.isFlyout?o&&o.options&&(t=o.options.parentWorkspace):o&&(t=o),t}static getById(t){return yt(t)}static getAll(){return bt()}getVariableMapClass(){const t=T(Et.VARIABLE_MAP,this.options,!0);if(!t)throw Error("No variable map is registered.");return t}isReadOnly(){return this.readOnly}setIsReadOnly(t){this.readOnly=t,this.options.readOnly=t}};Ob.SCAN_ANGLE=3;var _V=100,cL=class{constructor(t){this.parentWorkspace=t,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(t,o){if(t.length){try{var u=new globalThis.Audio}catch{return}for(let R=0;R<t.length;R++){const k=t[R],ue=k.match(/\.(\w+)$/);if(ue&&u.canPlayType("audio/"+ue[1])){var g=new globalThis.Audio(k);break}}g&&this.sounds.set(o,g)}}preload(){for(const t of this.sounds.values()){t.volume=.01;const o=t.play();if(o!==void 0?o.then(t.pause).catch(function(){}):t.pause(),dr||tr)break}}play(t,o){if(!this.muted){var u=this.sounds.get(t);u?(t=new Date,this.lastSound!==null&&t.getTime()-this.lastSound.getTime()<_V||(this.lastSound=t,u=dr||qm?u:u.cloneNode(),u.volume=o===void 0?1:o,u.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(t,o)}}setMuted(t){this.muted=t}getMuted(){return this.muted}},vV=20,Sl=class extends Ob{constructor(t){super(t),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardMoveInProgress=this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.navigator=new FT,this.metricsManager=new(T(Et.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=t.setMetrics||Sl.setTopLevelWorkspaceMetrics,this.componentManager=new Hi,this.connectionDBList=A0.init(this.connectionChecker),this.audioManager=new cL(t.parentWorkspace),this.grid=this.options.gridPattern?new zT(this.options.gridPattern,t.gridOptions):null,this.markerManager=new b(this),vs&&rc&&this.registerToolboxCategoryCallback(Mc,rc),dg&&Nf&&this.registerToolboxCategoryCallback(u1,Nf),it&&kr&&(this.registerToolboxCategoryCallback(Dt,kr),this.addChangeListener(Rm)),this.addChangeListener(this.variableChangeCallback.bind(this)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new lL(this,this.options.theme||k_),this.themeManager_.subscribeWorkspace(this);let o;this.renderer=If(this.options.renderer||"geras",this.getTheme(),(o=this.options.rendererOverrides)!=null?o:void 0),this.cachedParentSvgSize=new wn(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(t){this.metricsManager=t,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}getMarker(t){return this.markerManager.getMarker(t)}getCursor(){return this.markerManager.getCursor()}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(t){t||(t=k_),this.themeManager_.setTheme(t)}refreshTheme(){if(this.svgGroup_){var t=this.options.parentWorkspace===null;this.renderer.refreshDom(this.svgGroup_,this.getTheme(),t?this.getInjectionDiv():void 0)}this.updateBlockStyles(this.getAllBlocks(!1).filter(o=>!!o.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0),t=new(Ke(tt.THEME_CHANGE))(this.getTheme().name,this.id),K(t)}updateBlockStyles(t){for(let o=0,u;u=t[o];o++){const g=u.getStyleName();g&&u.setStyle(g)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM=t.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(t){let o=0,u=0,g=1;(this.getCanvas().contains(t)||this.getBubbleCanvas().contains(t))&&(g=this.scale);do{const R=Ks(t);(t===this.getCanvas()||t===this.getBubbleCanvas())&&(g=1),o+=R.x*g,u+=R.y*g,t=t.parentNode}while(t&&t!==this.getParentSvg()&&t!==this.getInjectionDiv());return new Ot(o,u)}getCachedParentSvgSize(){const t=this.cachedParentSvgSize;return new wn(t.width,t.height)}getOriginOffsetInPixels(){return Ri(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let t=this.svgGroup_;for(;t;){if((" "+(t.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=t;break}t=t.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(t){this.resizeHandlerWrapper=t}createDom(t,o){return this.injectionDiv||(this.injectionDiv=o??null),this.svgGroup_=Re(qe.G,{class:"blocklyWorkspace",id:this.id}),o&&Xn(this.svgGroup_,gs.LABEL,n.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),t&&(this.svgBackground_=Re(qe.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),t==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="var(--blocklyGridPattern)":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new Ib(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(w(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),w(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(T(Et.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(t=T(Et.CURSOR,this.options))&&this.markerManager.setCursor(new t(this)),t=this.options.parentWorkspace===null,this.renderer.createDom(this.svgGroup_,this.getTheme(),t?this.getInjectionDiv():void 0),n.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!!this.injectionDiv||this.isFlyout),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&we(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const t=this.getParentSvg();t&&t.parentNode&&we(t.parentNode)}this.resizeHandlerWrapper&&(O(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null),n.getFocusManager$$module$build$src$core$focus_manager().isRegistered(this)&&n.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}addTrashcan(){this.trashcan=Sl.newTrashcan(this);const t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.getCanvas())}static newTrashcan(t){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new $_(this);const t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)}copyOptionsForFlyout(){return new bh({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,plugins:this.options.plugins,modalInputs:this.options.modalInputs,move:{scrollbars:!0}})}addFlyout(t){const o=this.copyOptionsForFlyout();return o.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(T(Et.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(o):new(T(Et.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(o),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(t)}getFlyout(t){return this.flyout||t?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox?this.toolbox.position():this.flyout&&this.flyout.position();const t=this.componentManager.getComponents(Hi.Capability.POSITIONABLE,!0),o=this.getMetricsManager().getUiMetrics(),u=[];for(let g=0,R;R=t[g];g++){R.position(o,u);const k=R.getBoundingRectangle();k&&u.push(k)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const t=ge();Ot.equals(this.lastRecordedPageScroll,t)||(this.lastRecordedPageScroll=t,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(t,o){const u=this.getParentSvg();t!=null&&(this.cachedParentSvgSize.width=t,u.setAttribute("data-cached-width",`${t}`)),o!=null&&(this.cachedParentSvgSize.height=o,u.setAttribute("data-cached-height",`${o}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let t=this.svgGroup_;for(;t;){if(t.tagName==="svg"){this.cachedParentSvg=t;break}t=t.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(Fe()){var t=this.scale,o=-this.scrollY,u=-this.scrollX;if(!(t===this.oldScale&&Math.abs(o-this.oldTop)<1&&Math.abs(u-this.oldLeft)<1)){var g=new(Ke(tt.VIEWPORT_CHANGE))(o,u,t,this.id,this.oldScale);this.oldScale=t,this.oldTop=o,this.oldLeft=u,K(g)}}}translate(t,o){let u;(u=this.layerManager)==null||u.translateLayers(new Ot(t,o),this.scale);let g;(g=this.grid)==null||g.moveTo(t,o),this.maybeFireViewportChangeEvent()}getWidth(){const t=this.getMetrics();return t?t.viewWidth/this.scale:0}setVisible(t){this.visible=t,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox&&this.toolbox.setVisible(t),t||this.hideChaff(!0))}render(){const t=this.getAllBlocks(!1);for(let o=t.length-1;o>=0;o--)t[o].queueRender();this.getTopBlocks().flatMap(o=>o.getDescendants(!1)).filter(o=>o.isInsertionMarker()).forEach(o=>o.queueRender())}highlightBlock(t,o){if(o===void 0){for(let u=0,g;g=this.highlightedBlocks[u];u++)g.setHighlighted(!1);this.highlightedBlocks.length=0}(t=t?this.getBlockById(t):null)&&((o=o===void 0||o)?this.highlightedBlocks.includes(t)||this.highlightedBlocks.push(t):Yt(this.highlightedBlocks,t),t.setHighlighted(o))}variableChangeCallback(t){switch(t.type){case tt.VAR_CREATE:case tt.VAR_DELETE:case tt.VAR_RENAME:case tt.VAR_TYPE_CHANGE:this.refreshToolboxSelection()}}refreshToolboxSelection(){const t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox&&t.toolbox.getFlyout()&&t.toolbox.refreshSelection()}recordDragTargets(){const t=this.componentManager.getComponents(Hi.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let o=0,u;u=t[o];o++){const g=u.getClientRect();g&&this.dragTargetAreas.push({component:u,clientRect:g})}}newBlock(t,o){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(t){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(t){for(let o=0,u;u=this.dragTargetAreas[o];o++)if(u.clientRect.contains(t.clientX,t.clientY))return u.component;return null}onMouseDown(t){const o=this.getGesture(t);o&&o.handleWsStart(t,this)}startDrag(t,o){Ma(this,t,o)}moveDrag(t){return ol(this,t)}setKeyboardMoveInProgress(t){this.keyboardMoveInProgress=t}isDragging(){return this.keyboardMoveInProgress||this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())}onMouseWheel(t){if(Z_.inProgress())t.preventDefault(),t.stopPropagation();else{var o=this.options.zoomOptions&&this.options.zoomOptions.wheel,u=this.options.moveOptions&&this.options.moveOptions.wheel;if(o||u){var g=X(t);if(yo)var R=t.metaKey;o&&(t.ctrlKey||R||!u)?(g=-g.y/50,o=V(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(o.x,o.y,g)):(o=this.scrollX-g.x,u=this.scrollY-g.y,t.shiftKey&&!g.x&&(o=this.scrollX-g.y,u=this.scrollY),this.scroll(o,u)),t.preventDefault()}}}getBlocksBoundingBox(){const t=this.getTopBoundedElements();if(!t.length)return new pn(0,0,0,0);const o=t[0].getBoundingRectangle();for(let g=1;g<t.length;g++){var u=t[g];u.isInsertionMarker&&u.isInsertionMarker()||(u=u.getBoundingRectangle(),u.top<o.top&&(o.top=u.top),u.bottom>o.bottom&&(o.bottom=u.bottom),u.left<o.left&&(o.left=u.left),u.right>o.right&&(o.right=u.right))}return o}cleanUp(){this.setResizesEnabled(!1),n.setGroup$$module$build$src$core$events$utils(!0);var t=this.getTopBlocks(!0),o=t.filter(k=>k.isMovable());const u=t.filter(k=>!k.isMovable()).map(k=>k.getBoundingRectangle());t=function(k){for(const ue of u)if(k.intersects(ue))return ue;return null};var g=0;const R=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const k of o){for(o=k.getBoundingRectangle(),k.moveBy(-o.left,g-o.top,["cleanup"]),k.snapToGrid(),o=k.getBoundingRectangle(),g=t(o);g!=null;)g=g.top+g.getHeight()+R,k.moveBy(0,g-o.top,["cleanup"]),k.snapToGrid(),o=k.getBoundingRectangle(),g=t(o);g=k.getRelativeToSurfaceXY().y+k.getHeightWidth().height+R}n.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(t){if(!this.isReadOnly()&&!this.isFlyout){var o=oi.registry.getContextMenuOptions({workspace:this,focusedNode:this},t);this.configureContextMenu&&this.configureContextMenu(o,t);var u=t instanceof PointerEvent?new Ot(t.clientX,t.clientY):ot(this,new Ot(5,5));kl(t,o,this.RTL,this,u)}}updateToolbox(t){if(t=kt(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(De(t)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox.render(t)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(oe(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(t,o,u){u=Math.pow(this.options.zoomOptions.scaleSpeed,u);const g=this.scale*u;if(this.scale!==g){g>this.options.zoomOptions.maxScale?u=this.options.zoomOptions.maxScale/this.scale:g<this.options.zoomOptions.minScale&&(u=this.options.zoomOptions.minScale/this.scale);var R=this.getCanvas().getCTM(),k=this.getParentSvg().createSVGPoint();k.x=t,k.y=o,k=k.matrixTransform(R.inverse()),t=k.x,o=k.y,R=R.translate(t*(1-u),o*(1-u)).scale(u),this.scrollX=R.e,this.scrollY=R.f,this.setScale(g)}}zoomCenter(t){var o=this.getMetrics();let u;this.flyout?(u=o.svgWidth?o.svgWidth/2:0,o=o.svgHeight?o.svgHeight/2:0):(u=o.viewWidth/2+o.absoluteLeft,o=o.viewHeight/2+o.absoluteTop),this.zoom(u,o,t)}zoomToFit(){if(this.isMovable()){var t=this.getMetrics(),o=t.viewWidth;t=t.viewHeight;var u=this.getBlocksBoundingBox(),g=vV*2,R=u.right-u.left+g;if(u=u.bottom-u.top+g,R){this.flyout&&(this.horizontalLayout?(t+=this.flyout.getHeight(),u+=this.flyout.getHeight()/this.scale):(o+=this.flyout.getWidth(),R+=this.flyout.getWidth()/this.scale)),o/=R,t/=u,n.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(o,t)),this.scrollCenter()}finally{n.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Ye(this.getCanvas(),"blocklyCanvasTransitioning"),Ye(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Se(this.getCanvas(),"blocklyCanvasTransitioning"),Se(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var t=this.getMetrics(),o=(t.scrollWidth-t.viewWidth)/2,u=(t.scrollHeight-t.viewHeight)/2;o=-o-t.scrollLeft,u=-u-t.scrollTop,this.scroll(o,u)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(t,o){if(this.isMovable()){var u=t?this.getBlockById(t):null;if(u){t=u.getRelativeToSurfaceXY(),u=o?{height:u.height,width:u.width}:u.getHeightWidth();var g=this.scale;o=(t.x+(this.RTL?-1:1)*u.width/2)*g,t=(t.y+u.height/2)*g,u=this.getMetrics(),this.scroll(-(o-u.viewWidth/2),-(t-u.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,this.hideChaff(!1),(t=this.getFlyout(!1))&&t.isVisible()&&(t.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))}getScale(){return this.scale}getAbsoluteScale(){const t=u=>{if(u.isFlyout){let g;const R=(g=u.targetWorkspace)==null?void 0:g.getFlyout();if(R instanceof R0)return R.getFlyoutScale()}return u.getScale()},o=(u,g)=>u.options.parentWorkspace&&u.options.parentWorkspace.getSvgGroup().contains(u.getSvgGroup())?o(u.options.parentWorkspace,g*t(u)):g*t(u);return o(this,1)}scroll(t,o){this.hideChaff(!0);const u=this.getMetrics();t=Math.min(t,-u.scrollLeft),o=Math.min(o,-u.scrollTop);const g=u.scrollTop+Math.max(0,u.scrollHeight-u.viewHeight);t=Math.max(t,-(u.scrollLeft+Math.max(0,u.scrollWidth-u.viewWidth))),o=Math.max(o,-g),this.scrollX=t,this.scrollY=o,this.scrollbar&&this.scrollbar.set(-(t+u.scrollLeft),-(o+u.scrollTop),!1),t+=u.absoluteLeft,o+=u.absoluteTop,this.translate(t,o)}getBlockById(t){return super.getBlockById(t)}getAllBlocks(t=!1){return super.getAllBlocks(t)}getTopBlocks(t=!1){return super.getTopBlocks(t)}addTopBlock(t){this.addTopBoundedElement(t),super.addTopBlock(t)}removeTopBlock(t){this.removeTopBoundedElement(t),super.removeTopBlock(t)}addTopComment(t){this.addTopBoundedElement(t),super.addTopComment(t)}removeTopComment(t){this.removeTopBoundedElement(t),super.removeTopComment(t)}getTopComments(t=!1){return super.getTopComments(t)}getCommentById(t){return super.getCommentById(t)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(t){this.topBoundedElements.push(t)}removeTopBoundedElement(t){Yt(this.topBoundedElements,t)}getTopBoundedElements(t=!1){const o=[].concat(this.topBoundedElements);return t&&o.sort(this.sortByOrigin.bind(this)),o}setResizesEnabled(t){const o=!this.resizesEnabled&&t;this.resizesEnabled=t,o&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(t,o){if(typeof o!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(t,o)}getButtonCallback(t){let o;return(o=this.flyoutButtonCallbacks.get(t))!=null?o:null}removeButtonCallback(t){this.flyoutButtonCallbacks.delete(t)}registerToolboxCategoryCallback(t,o){if(typeof o!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(t,o)}getToolboxCategoryCallback(t){return this.toolboxCategoryCallbacks.get(t)||null}removeToolboxCategoryCallback(t){this.toolboxCategoryCallbacks.delete(t)}getGesture(t){if(this.keyboardMoveInProgress)return t.preventDefault(),t.stopPropagation(),null;const o=t.type==="pointerdown";let u;return o&&((u=this.currentGesture_)!=null&&u.hasStarted())&&(console.warn("Tried to start the same gesture twice."),this.currentGesture_.cancel()),!this.currentGesture_&&o&&(this.currentGesture_=new Z_(t,this)),this.currentGesture_}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(t=!1){nl(),od(this),xa(),this.hideComponents(t)}hideComponents(t=!1){this.getComponentManager().getComponents(Hi.Capability.AUTOHIDEABLE,!0).forEach(o=>o.autoHide(t))}static setTopLevelWorkspaceMetrics(t){const o=this.getMetrics();typeof t.x=="number"&&(this.scrollX=-(o.scrollLeft+(o.scrollWidth-o.viewWidth)*t.x)),typeof t.y=="number"&&(this.scrollY=-(o.scrollTop+(o.scrollHeight-o.viewHeight)*t.y)),this.translate(this.scrollX+o.absoluteLeft,this.scrollY+o.absoluteTop)}addClass(t){this.injectionDiv&&Ye(this.injectionDiv,t)}removeClass(t){this.injectionDiv&&Se(this.injectionDiv,t)}setIsReadOnly(t){super.setIsReadOnly(t),t?this.addClass("blocklyReadOnly"):this.removeClass("blocklyReadOnly")}scrollBoundsIntoView(t,o=10){if(!Z_.inProgress()){var u=this.getScale(),g=this.getMetricsManager().getViewMetrics(!0);if(g=new pn(g.top,g.top+g.height,g.left,g.left+g.width),!(t.left>=g.left&&t.top>=g.top&&t.right<=g.right&&t.bottom<=g.bottom)){t=t.clone(),t.top-=o,t.bottom+=o,t.left-=o,t.right+=o;var R=o=0;t.left<g.left?o=this.RTL?Math.min(g.left-t.left,g.right-t.right):g.left-t.left:t.right>g.right&&(o=this.RTL?g.right-t.right:Math.max(g.right-t.right,g.left-t.left)),t.top<g.top?R=g.top-t.top:t.bottom>g.bottom&&(R=Math.max(g.bottom-t.bottom,g.top-t.top)),this.scroll(this.scrollX+o*u,this.scrollY+R*u)}}}getFocusableElement(){return this.svgGroup_}getFocusableTree(){return this.isMutator&&this.options.parentWorkspace||this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(t){if(t)return null;let o;return(o=this.getTopBlocks(!0)[0])!=null?o:null}getNestedTrees(){const t=this.getAllBlocks().map(u=>u.getIcons()).flat().filter(u=>u instanceof n.MutatorIcon$$module$build$src$core$icons$mutator_icon&&u.bubbleIsVisible()).map(u=>{let g;return(g=u.getBubble())==null?void 0:g.getWorkspace()}).filter(u=>!!u),o=this.getFlyout(!0);return o&&t.push(o.getWorkspace()),t}searchForWorkspaceComment(t){for(const o of this.getTopComments())if(o instanceof vh&&o.canBeFocused()&&o.getFocusableElement().id===t)return o}lookUpFocusableNode(t){var o;const u=(o=this.targetWorkspace)==null?void 0:o.getFlyout();if(this.isFlyout&&u){for(var g of u.getContents())if(o=g.getElement(),Le(o)&&o.canBeFocused()&&o.getFocusableElement().id===t)return o}if(g=t.indexOf("_field_"),o=t.indexOf("_connection_"),g!==-1){var R=t.substring(0,g);if(R=this.getBlockById(R)){for(var k of R.getFields())if(k.canBeFocused()&&k.getFocusableElement().id===t)return k}return null}if(o!==-1){if(R=t.substring(0,o),R=this.getBlockById(R)){for(const xe of R.getConnections_(!0))if(xe.id===t)return xe}return null}if(k=Math.max(t.indexOf(Sb),t.indexOf(NT),t.indexOf(gA)),k!==-1&&(k=t.substring(0,k),k=this.searchForWorkspaceComment(k))){if(t.indexOf(Sb)>-1)return k.getEditorFocusableNode();var ue;return(ue=k.view.getCommentBarButtons().find(xe=>xe.getFocusableElement().id.includes(t)))!=null?ue:null}if((ue=this.getAllBlocks(!1).find(xe=>xe.getFocusableElement().id===t))||(ue=this.searchForWorkspaceComment(t)))return ue;ue=this.getAllBlocks().map(xe=>xe.getIcons()).flat();for(R of ue){if(R.canBeFocused()&&R.getFocusableElement().id===t)return R;if(ac(R)&&(ue=R.getBubble())&&ue.canBeFocused()&&ue.getFocusableElement().id===t)return ue}return null}onTreeFocus(t,o){}onTreeBlur(t){if(this.isFlyout&&this.targetWorkspace&&!n.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()){var o=this.targetWorkspace.getFlyout(),u=this.targetWorkspace.getToolbox();u&&t===u||(u&&u.clearSelection(),o&&Xi(o)&&o.autoHide(!1))}}getNavigator(){return this.navigator}setNavigator(t){this.navigator=t}},Nb=class extends jo{constructor(t){super(),this.isBlank=typeof t>"u",t&&(this.varId=t.getId(),this.workspaceId=t.getWorkspace().id)}toJson(){const t=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return t.varId=this.varId,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new Nb),o.varId=t.varId,o}},c1=class extends Nb{constructor(t){super(t),this.type=tt.VAR_CREATE,t&&(this.varType=t.getType(),this.varName=t.getName())}toJson(){const t=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return t.varType=this.varType,t.varName=this.varName,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new c1),o.varType=t.varType,o.varName=t.varName,o}run(t){var o=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");o=o.getVariableMap(),t?o.createVariable(this.varName,this.varType,this.varId):(t=o.getVariableById(this.varId))&&o.deleteVariable(t)}};i(Et.EVENT,tt.VAR_CREATE,c1);var hL=class{constructor(t,o,u,g){this.workspace=t,this.name=o,this.type=u||"",this.id=g||D()}getId(){return this.id}getName(){return this.name}setName(t){return this.name=t,this}getType(){return this.type}setType(t){return this.type=t,this}getWorkspace(){return this.workspace}save(){const t={name:this.getName(),id:this.getId()},o=this.getType();return o&&(t.type=o),t}static load(t,o){t=new this(o,t.name,t.type,t.id),o.getVariableMap().addVariable(t),K(new(Ke(tt.VAR_CREATE))(t))}};i(Et.VARIABLE_MODEL,ri,hL);var h1=class extends Nb{constructor(t){super(t),this.type=tt.VAR_DELETE,t&&(this.varType=t.getType(),this.varName=t.getName())}toJson(){const t=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return t.varType=this.varType,t.varName=this.varName,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new h1),o.varType=t.varType,o.varName=t.varName,o}run(t){var o=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");o=o.getVariableMap(),t?(t=o.getVariableById(this.varId))&&o.deleteVariable(t):o.createVariable(this.varName,this.varType,this.varId)}};i(Et.EVENT,tt.VAR_DELETE,h1);var d1=class extends Nb{constructor(t,o){super(t),this.type=tt.VAR_RENAME,t&&(this.oldName=t.getName(),this.newName=typeof o>"u"?"":o)}toJson(){const t=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return t.oldName=this.oldName,t.newName=this.newName,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new d1),o.oldName=t.oldName,o.newName=t.newName,o}run(t){var o=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");o=o.getVariableMap();const u=o.getVariableById(this.varId);t?u&&o.renameVariable(u,this.newName):u&&o.renameVariable(u,this.oldName)}};i(Et.EVENT,tt.VAR_RENAME,d1);var dL=class{constructor(t,o=!1){this.workspace=t,this.potentialMap=o,this.variableMap=new Map}clear(){for(const t of this.variableMap.values())for(const o of t.values())this.deleteVariable(o);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(t,o){if(t.getName()===o)return t;var u=t.getType();u=this.getVariable(o,u);const g=this.workspace.getAllBlocks(!1);let R="";this.potentialMap||(R=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0);try{u&&u.getId()!==t.getId()?this.renameVariableWithConflict(t,o,u,g):this.renameVariableAndUses(t,o,g)}finally{this.potentialMap||n.setGroup$$module$build$src$core$events$utils(R)}return t}changeVariableType(t,o){var u;(u=this.variableMap.get(t.getType()))==null||u.delete(t.getId()),t.setType(o);let g;return u=(g=this.variableMap.get(o))!=null?g:new Map,u.set(t.getId(),t),this.variableMap.has(o)||this.variableMap.set(o,u),t}renameVariableById(t,o){vr("VariableMap.renameVariableById","v12","v13","VariableMap.renameVariable");const u=this.getVariableById(t);if(!u)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(u,o)}renameVariableAndUses(t,o,u){for(this.potentialMap||K(new(Ke(tt.VAR_RENAME))(t,o)),t.setName(o),o=0;o<u.length;o++)u[o].updateVarName(t)}renameVariableWithConflict(t,o,u,g){const R=t.getType(),k=u.getName();for(o!==k&&this.renameVariableAndUses(u,o,g),o=0;o<g.length;o++)g[o].renameVarById(t.getId(),u.getId());this.potentialMap||K(new(Ke(tt.VAR_DELETE))(t));let ue;(ue=this.variableMap.get(R))==null||ue.delete(t.getId())}createVariable(t,o,u){var g=this.getVariable(t,o);if(g){if(u&&g.getId()!==u)throw Error('Variable "'+t+'" is already in use and its id is "'+g.getId()+'" which conflicts with the passed in id, "'+u+'".');return g}if(u&&this.getVariableById(u))throw Error('Variable id, "'+u+'", is already in use.');if(g=u||D(),o=o||"",u=p(Et.VARIABLE_MODEL,ri,!0),!u)throw Error("No variable model is registered.");g=new u(this.workspace,t,o,g);let R;return t=(R=this.variableMap.get(o))!=null?R:new Map,t.set(g.getId(),g),this.variableMap.has(o)||this.variableMap.set(o,t),this.potentialMap||K(new(Ke(tt.VAR_CREATE))(g)),g}addVariable(t){const o=t.getType();this.variableMap.has(o)||this.variableMap.set(o,new Map);let u;(u=this.variableMap.get(o))==null||u.set(t.getId(),t)}deleteVariable(t){const o=Zc(this.workspace,t.getId());let u="";this.potentialMap||(u=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0);try{for(let R=0;R<o.length;R++)o[R].dispose(!0);const g=this.variableMap.get(t.getType());g&&g.has(t.getId())&&(g.delete(t.getId()),this.potentialMap||K(new(Ke(tt.VAR_DELETE))(t)),g.size===0&&this.variableMap.delete(t.getType()))}finally{this.potentialMap||n.setGroup$$module$build$src$core$events$utils(u)}}deleteVariableById(t){vr("VariableMap.deleteVariableById","v12","v13","Blockly.Variables.deleteVariable"),(t=this.getVariableById(t))&&n.deleteVariable$$module$build$src$core$variables(this.workspace,t)}getVariable(t,o){if(o=this.variableMap.get(o||""),!o)return null;let u;return(u=[...o.values()].find(g=>n.Names$$module$build$src$core$names.equals(g.getName(),t)))!=null?u:null}getVariableById(t){for(const o of this.variableMap.values())if(o.has(t)){let u;return(u=o.get(t))!=null?u:null}return null}getVariablesOfType(t){return(t=this.variableMap.get(t||""))?[...t.values()]:[]}getTypes(){return[...this.variableMap.keys()]}getAllVariables(){let t=[];for(const o of this.variableMap.values())t=t.concat(...o.values());return t}getAllVariableNames(){vr("VariableMap.getAllVariableNames","v12","v13","Blockly.Variables.getAllVariables");const t=[];for(const o of this.variableMap.values())for(const u of o.values())t.push(u.getName());return t}getVariableUsesById(t){return vr("VariableMap.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),Zc(this.workspace,t)}};i(Et.VARIABLE_MAP,ri,dL);var f1=class extends Yo{constructor(t,o){super(o),this.type=tt.TRASHCAN_OPEN,this.isOpen=t}toJson(){const t=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return t.isOpen=this.isOpen,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new f1),o.isOpen=t.isOpen,o}};i(Et.EVENT,tt.TRASHCAN_OPEN,f1);var fL=class extends Mb{constructor(t){super(),this.workspace=t,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,this.workspace.options.maxTrashcanContents<=0||(t=this.workspace.copyOptionsForFlyout(),this.workspace.horizontalLayout?(t.toolboxPosition=this.workspace.toolboxPosition===Kn.TOP?Kn.BOTTOM:Kn.TOP,this.flyout=new(T(Et.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(t)):(t.toolboxPosition=this.workspace.toolboxPosition===Kn.RIGHT?Kn.LEFT:Kn.RIGHT,this.flyout=new(T(Et.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(t)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=Re(qe.G,{class:"blocklyTrash"});let t;const o=String(Math.random()).substring(2);t=Re(qe.CLIPPATH,{id:"blocklyTrashBodyClipPath"+o},this.svgGroup),Re(qe.RECT,{width:Lb,height:CA,y:Db},t);const u=Re(qe.IMAGE,{width:Sr.width,x:-p1,height:Sr.height,y:-m1,"clip-path":"url(#blocklyTrashBodyClipPath"+o+")"},this.svgGroup);return u.setAttributeNS(qi,"xlink:href",this.workspace.options.pathToMedia+Sr.url),t=Re(qe.CLIPPATH,{id:"blocklyTrashLidClipPath"+o},this.svgGroup),Re(qe.RECT,{width:Lb,height:Db},t),this.svgLid=Re(qe.IMAGE,{width:Sr.width,x:-p1,height:Sr.height,y:-m1,"clip-path":"url(#blocklyTrashLidClipPath"+o+")"},this.svgGroup),this.svgLid.setAttributeNS(qi,"xlink:href",this.workspace.options.pathToMedia+Sr.url),I(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),I(this.svgGroup,"pointerup",this,this.click),I(u,"pointerover",this,this.mouseOver),I(u,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){if(this.workspace.options.maxTrashcanContents>0){const t=this.flyout.createDom(qe.SVG);Ye(t,"blocklyTrashcanFlyout"),Ie(t,this.workspace.getParentSvg()),this.flyout.init(this.workspace)}this.workspace.getComponentManager().addComponent({component:this,weight:Hi.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[Hi.Capability.AUTOHIDEABLE,Hi.Capability.DELETE_AREA,Hi.Capability.DRAG_TARGET,Hi.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&we(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var t=this.contents.map(function(u){return JSON.parse(u)}),o=this.workspace.getParentSvg().style;o.cursor="wait",setTimeout(()=>{let u;(u=this.flyout)==null||u.show(t),o.cursor="";let g;(g=this.workspace.scrollbar)==null||g.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var t;(t=this.flyout)==null||t.hide();var o;(o=this.workspace.scrollbar)==null||o.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(t){!t&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(t,o){if(this.initialized){var u=Kt(this.workspace,t);t=qt(u,new wn(Lb,CA+Db),bV,pL,t,this.workspace),o=Jt(t,pL,u.vertical===gl.TOP?Xr.DOWN:Xr.UP,o),this.top=o.top,this.left=o.left;var g;(g=this.svgGroup)==null||g.setAttribute("transform","translate("+this.left+","+this.top+")");var R;(R=this.flyout)==null||R.position()}}getBoundingRectangle(){return new pn(this.top,this.top+CA+Db,this.left,this.left+Lb)}getClientRect(){if(!this.svgGroup)return null;var t=this.svgGroup.getBoundingClientRect();const o=t.top+m1-MA;return t=t.left+p1-MA,new pn(o,o+Db+CA+2*MA,t,t+Lb+2*MA)}onDragOver(t){this.setLidOpen(this.wouldDelete_)}onDragExit(t){this.setLidOpen(!1)}onDrop(t){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(t){this.isLidOpen!==t&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=t,this.animateLid())}animateLid(){const t=EV;var o=1/(t+1);this.lidOpen+=this.isLidOpen?o:-o,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*gL),o=mL+this.lidOpen*(SV-mL),this.svgGroup&&(this.svgGroup.style.opacity=`${o}`),this.lidOpen>this.minOpenness&&this.lidOpen<1&&(this.lidTask=setTimeout(this.animateLid.bind(this),TV/t))}setLidAngle(t){const o=this.workspace.toolboxPosition===Kn.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let u;(u=this.svgLid)==null||u.setAttribute("transform","rotate("+(o?-t:t)+","+(o?4:Lb-4)+","+(Db-2)+")")}setMinOpenness(t){this.minOpenness=t,this.isLidOpen||this.setLidAngle(t*gL)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(t){t=new(Ke(tt.TRASHCAN_OPEN))(t,this.workspace.id),K(t)}blockMouseDownWhenOpenable(t){!this.contentsIsOpen()&&this.hasContents()&&t.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(t){if(!(this.workspace.options.maxTrashcanContents<=0||!Y(t)||t.wasShadow)){if(!t.oldJson)throw Error("Encountered a delete event without proper oldJson");if(t=JSON.stringify(this.cleanBlockJson(t.oldJson)),!this.contents.includes(t)){for(this.contents.unshift(t);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(yV)}}}cleanBlockJson(t){function o(u){if(u){if(delete u.id,delete u.x,delete u.y,delete u.enabled,delete u.disabledReasons,u.icons&&u.icons.comment){var g=u.icons.comment;delete g.height,delete g.width,delete g.pinned}g=u.inputs;for(var R in g){var k=g[R];const ue=k.block;k=k.shadow,ue&&o(ue),k&&o(k)}u.next&&(R=u.next,u=R.block,R=R.shadow,u&&o(u),R&&o(R))}}return t=JSON.parse(JSON.stringify(t)),o(t),Object.assign({},{kind:"BLOCK"},t)}},Lb=47,CA=44,Db=16,pL=20,bV=20,MA=10,p1=0,m1=32,yV=.1,TV=80,EV=4,mL=.4,SV=.8,gL=45,jT=null,YT=null,RA=void 0,Fd={};Fd.BlockPaster=ag,Fd.copy=t0,Fd.getLastCopiedData=n0,Fd.getLastCopiedLocation=Im,Fd.getLastCopiedWorkspace=i0,Fd.paste=yc,Fd.registry=qn,Fd.setLastCopiedData=p_,Fd.setLastCopiedLocation=hb,Fd.setLastCopiedWorkspace=wm;var fg={};fg.CollapseCommentBarButton=pA,fg.CommentBarButton=Eb,fg.CommentEditor=mA,fg.CommentView=ig,fg.DeleteCommentBarButton=Id,fg.RenderedWorkspaceComment=vh,fg.WorkspaceComment=sg;var Kf;(function(t){t.ESCAPE="escape",t.DELETE="delete",t.COPY="copy",t.CUT="cut",t.PASTE="paste",t.UNDO="undo",t.REDO="redo"})(Kf||(Kf={})),_d();var qf={};qf.names=Kf,qf.registerCopy=Dm,qf.registerCut=Bm,qf.registerDefaultShortcuts=_d,qf.registerDelete=Nm,qf.registerEscape=s0,qf.registerPaste=m_,qf.registerRedo=ah,qf.registerUndo=km;var AV=class{constructor(t,o){this.procedureModelClass=t,this.parameterModelClass=o,this.priority=ms}save(t){return t=t.getProcedureMap().getProcedures().map(o=>r0(o)),t.length?t:null}load(t,o){const u=o.getProcedureMap();for(const g of t)u.add(Bf(this.procedureModelClass,this.parameterModelClass,g,o))}clear(t){t.getProcedureMap().clear()}},wA={};wA.ProcedureSerializer=AV,wA.loadProcedure=Bf,wA.saveProcedure=r0;var _L=class{constructor(){this.priority=x_}save(t){return t=t.getAllVariables().map(o=>o.save()),t.length?t:null}load(t,o){const u=p(Et.VARIABLE_MODEL,ri);t.forEach(g=>{u?.load(g,o)})}clear(t){t.getVariableMap().clear()}};vn("variables",new _L);var vL={};vL.VariableSerializer=_L;var g1={};g1.load=Pm,g1.save=vd;var $V={blocks:Be,exceptions:W,priorities:Uu,procedures:wA,registry:Ps,variables:vL,workspaceComments:Oi,workspaces:g1};"Blockly"in globalThis||(globalThis.Blockly={Msg:lo});var _1="label",bL=class{load(t,o){return t=new Zo(o.getWorkspace(),o.targetWorkspace,t,!0),t.show(),new Yf(t,_1)}gapForItem(t,o){return o}disposeItem(t){t=t.getElement(),t instanceof Zo&&t.dispose()}getType(){return _1}};i(Et.FLYOUT_INFLATER,_1,bL);var yL=class extends SA{constructor(t){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,t&&(this.GRID_UNIT=t),this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(t){super.setFontConstants_(t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+this.FIELD_BORDER_RECT_Y_PADDING*2}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(t){super.setDynamicProperties_(t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const o=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=o&&!isNaN(o)?o:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&we(this.selectedGlowFilter),this.replacementGlowFilter&&we(this.replacementGlowFilter)}makeStartHat(){const t=this.START_HAT_HEIGHT,o=this.START_HAT_WIDTH,u=ao("c",[cn(25,-t),cn(71,-t),cn(o,0)]);return{height:t*.75,width:o,path:u}}makeHexagonal(){function t(u,g,R){var k=u/2;return k=k>o?o:k,R=R?-1:1,u=(g?-1:1)*u/2,yr(-R*k,u)+yr(R*k,u)}const o=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(u){return u/=2,u>o?o:u},height(u){return u},connectionOffsetY(u){return u/2},connectionOffsetX(u){return-u},pathDown(u){return t(u,!1,!1)},pathUp(u){return t(u,!0,!1)},pathRightDown(u){return t(u,!1,!0)},pathRightUp(u){return t(u,!1,!0)}}}makeRounded(){function t(g,R,k){const ue=g>u?g-u:0;g=(g>u?u:g)/2;const xe=k===R?"0":"1";return ps("a","0 0,"+xe,g,cn((k?1:-1)*g,(R?-1:1)*g))+hn("v",(R?-1:1)*ue)+ps("a","0 0,"+xe,g,cn((k?-1:1)*g,(R?-1:1)*g))}const o=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=o*2;return{type:this.SHAPES.ROUND,isDynamic:!0,width(g){return g/=2,g>o?o:g},height(g){return g},connectionOffsetY(g){return g/2},connectionOffsetX(g){return-g},pathDown(g){return t(g,!1,!1)},pathUp(g){return t(g,!0,!1)},pathRightDown(g){return t(g,!1,!0)},pathRightUp(g){return t(g,!1,!0)}}}makeSquared(){function t(u,g,R){u-=o*2;const k=R===g?"0":"1";return ps("a","0 0,"+k,o,cn((R?1:-1)*o,(g?-1:1)*o))+hn("v",(g?-1:1)*u)+ps("a","0 0,"+k,o,cn((R?-1:1)*o,(g?-1:1)*o))}const o=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(u){return o},height(u){return u},connectionOffsetY(u){return u/2},connectionOffsetX(u){return-u},pathDown(u){return t(u,!1,!1)},pathUp(u){return t(u,!0,!1)},pathRightDown(u){return t(u,!1,!0)},pathRightUp(u){return t(u,!1,!0)}}}shapeFor(t){let o=t.getCheck();switch(!o&&t.targetConnection&&(o=t.targetConnection.getCheck()),t.type){case un.INPUT_VALUE:case un.OUTPUT_VALUE:if(t=t.getSourceBlock().getOutputShape(),t!==null)switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return o&&o.includes("Boolean")?this.HEXAGONAL:o&&o.includes("Number")?this.ROUNDED:(o&&o.includes("String"),this.ROUNDED);case un.PREVIOUS_STATEMENT:case un.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function t(bn){return ao("c",[cn(bn*R/2,0),cn(bn*R*3/4,ue/2),cn(bn*R,ue)])+Iu([cn(bn*R,k)])+ao("c",[cn(bn*R/4,ue/2),cn(bn*R/2,ue),cn(bn*R,ue)])+hn("h",bn*g)+ao("c",[cn(bn*R/2,0),cn(bn*R*3/4,-(ue/2)),cn(bn*R,-ue)])+Iu([cn(bn*R,-k)])+ao("c",[cn(bn*R/4,-(ue/2)),cn(bn*R/2,-ue),cn(bn*R,-ue)])}const o=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,g=o/3,R=g/3,k=u/2,ue=k/2,xe=t(1),St=t(-1);return{type:this.SHAPES.NOTCH,width:o,height:u,pathLeft:xe,pathRight:St}}makeInsideCorners(){const t=this.CORNER_RADIUS,o=ps("a","0 0,0",t,cn(-t,t)),u=ps("a","0 0,1",t,cn(-t,t)),g=ps("a","0 0,0",t,cn(t,t)),R=ps("a","0 0,1",t,cn(t,t));return{width:t,height:t,pathTop:o,pathBottom:g,rightWidth:t,rightHeight:t,pathTopRight:u,pathBottomRight:R}}generateSecondaryColour_(t){return Bl("#000",t,.15)||t}generateTertiaryColour_(t){return Bl("#000",t,.25)||t}createDom(t,o,u,g){super.createDom(t,o,u,g),t=Re(qe.DEFS,{},t),o=Re(qe.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),Re(qe.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},o),u=Re(qe.FECOMPONENTTRANSFER,{result:"outBlur"},o),Re(qe.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},u),Re(qe.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},o),Re(qe.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},o),this.selectedGlowFilterId=o.id,this.selectedGlowFilter=o,t=Re(qe.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),Re(qe.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),o=Re(qe.FECOMPONENTTRANSFER,{result:"outBlur"},t),Re(qe.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),Re(qe.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),Re(qe.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),Re(qe.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter=t,g&&(g.style.setProperty("--blocklySelectedGlowFilter",`url(#${this.selectedGlowFilterId})`),g.style.setProperty("--blocklyReplacementGlowFilter",`url(#${this.replacementGlowFilterId})`))}getCSS_(t){return[`${t} .blocklyText,`,`${t} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${t} .blocklyText {`,"fill: #fff;","}",`${t} .blocklyNonEditableField>rect:not(.blocklyDropdownRect),`,`${t} .blocklyEditableField>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${t} .blocklyNonEditableField>text,`,`${t} .blocklyEditableField>text,`,`${t} .blocklyNonEditableField>g>text,`,`${t} .blocklyEditableField>g>text {`,"fill: #575E75;","}",`${t} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${t} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${t} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>rect,",`${t} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${t} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${t} .blocklyDropdownText {`,"fill: #fff !important;","}",`${t}.blocklyWidgetDiv .blocklyMenuItem,`,`${t}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${t} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${t} .blocklyDisabledPattern > .blocklyOutlinePath {`,"fill: var(--blocklyDisabledPattern)","}",`${t} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}",`${t} .blocklySelected>.blocklyPath.blocklyPathSelected {`,"fill: none;","filter: var(--blocklySelectedGlowFilter);","}",`${t} .blocklyReplaceable>.blocklyPath {`,"filter: var(--blocklyReplacementGlowFilter);","}"]}},TL=class extends AA{constructor(t,o){super(t,o)}draw(){const t=this.block_.pathObject;t.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),t.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&t.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(t){if(!(t.height<=0)){if(Ce.isSpacer(t)){const g=t.precedesStatement;var o=t.followsStatement;if(g||o){const R=this.constants_.INSIDE_CORNERS;var u=R.rightHeight;u=t.height-(g?u:0),o=o?R.pathBottomRight:"",t=u>0?hn("V",t.yPos+u):"",this.outlinePath_+=o+t+(g?R.pathTopRight:"");return}}this.outlinePath_+=hn("V",t.yPos+t.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ws(t.xPos,this.info_.startY),this.outlinePath_+=hn("h",t.width)}drawFlatBottom_(){const t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=hn("V",t.baseline),this.outlinePath_+=hn("h",-t.width)}drawInlineInput_(t){this.positionInlineInputConnection_(t);const o=t.input.name;t.connectedBlock||this.info_.isInsertionMarker||(t=Zs(t.xPos+t.connectionWidth,t.centerline-t.height/2)+this.getInlineInputPath(t),this.block_.pathObject.setOutlinePath(o,t))}getInlineInputPath(t){const o=t.width-t.connectionWidth*2,u=t.height;return hn("h",o)+t.shape.pathRightDown(u)+hn("h",-o)+t.shape.pathUp(u)+"z"}drawStatementInput_(t){var o=t.getLastInput();const u=o.xPos+o.notchOffset+o.shape.width,g=this.constants_.INSIDE_CORNERS,R=o.shape.pathRight+hn("h",-(o.notchOffset-g.width))+g.pathTop,k=t.height-2*g.height;o=g.pathBottom+hn("h",o.notchOffset-g.width)+(o.connectedBottomNextConnection?"":o.shape.pathLeft),this.outlinePath_+=hn("H",u)+R+hn("v",k)+o+hn("H",t.xPos+t.width),this.positionStatementInputConnection_(t)}drawConnectionHighlightPath(t){const o=t.connectionModel;if(o.type===un.NEXT_STATEMENT||o.type===un.PREVIOUS_STATEMENT||o.type===un.OUTPUT_VALUE&&!t.isDynamicShape)return super.drawConnectionHighlightPath(t);t=o.type===un.INPUT_VALUE?Zs(t.connectionWidth,-t.height/2)+this.getInlineInputPath(t):Zs(t.width,-t.height/2)+t.shape.pathDown(t.height);const u=o.getSourceBlock();let g,R;return(R=(g=u.pathObject).addConnectionHighlight)==null?void 0:R.call(g,o,t,o.getOffsetInBlock(),u.RTL)}},Q_=class extends Ji{constructor(t,o,u,g,R,k,ue){if(super(Ji.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",u=Number(mi(u)),o=Number(mi(o)),isNaN(u)||isNaN(o))throw Error("Height and width values of an image field must cast to numbers.");if(u<=0||o<=0)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new wn(o,u+Q_.Y_PADDING),this.imageHeight=u,typeof R=="function"&&(this.clickHandler=R),t!==Ji.SKIP_SETUP&&(ue?this.configure_(ue):(this.flipRtl=!!k,this.altText=mi(g)||""),this.setValue(mi(t)))}configure_(t){super.configure_(t),t.flipRtl&&(this.flipRtl=t.flipRtl),t.alt&&(this.altText=mi(t.alt))}initView(){this.imageElement=Re(qe.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(qi,"xlink:href",this.value_),this.fieldGroup_&&Ye(this.fieldGroup_,"blocklyImageField"),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(t){return typeof t!="string"?null:t}doValueUpdate_(t){this.value_=t,this.imageElement&&this.imageElement.setAttributeNS(qi,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(t){t!==this.altText&&(this.altText=t||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}isClickable(){return super.isClickable()&&!!this.clickHandler}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(t){this.clickHandler=t}getText_(){return this.altText}static fromJson(t){if(!t.src||!t.width||!t.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(t.src,t.width,t.height,void 0,void 0,void 0,t)}};Q_.Y_PADDING=1,aa("field_image",Q_),Q_.prototype.DEFAULT_VALUE="";var Bb=class extends Ji{set size_(t){super.size_=t}get size_(){const t=super.size_;return t.width<14&&(t.width=14),t}constructor(t,o,u){super(Ji.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,t!==Ji.SKIP_SETUP&&(u&&this.configure_(u),this.setValue(t),o&&this.setValidator(o))}configure_(t){super.configure_(t),t.spellcheck!==void 0&&(this.spellcheck_=t.spellcheck)}initView(){if(!this.getSourceBlock())throw new rr;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()),this.fieldGroup_&&Ye(this.fieldGroup_,"blocklyInputField")}isFullBlockField(){const t=this.getSourceBlock();if(!t)throw new rr;let o;return this.fullBlockClickTarget_=!((o=this.getConstants())==null||!o.FULL_BLOCK_FIELDS)&&t.isSimpleReporter()}doValueInvalid_(t,o=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,t=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&Fe()&&this.value_!==t&&o&&K(new(Ke(tt.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))}doValueUpdate_(t){this.isTextValid_=this.isDirty_=!0,this.value_=t}applyColour(){const t=this.getSourceBlock();if(!t)throw new rr;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",t.getColourTertiary())):(this.borderRect_.style.display="none",t.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let t;return(t=this.getConstants())!=null&&t.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var t=this.htmlInput_;this.isTextValid_?(Se(t,"blocklyInvalidInput"),Xn(t,gs.INVALID,!1)):(Ye(t,"blocklyInvalidInput"),Xn(t,gs.INVALID,!0))}if(t=this.getSourceBlock(),!t)throw new rr;this.getConstants().FULL_BLOCK_FIELDS&&t.applyColour()}setSpellcheck(t){t!==this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(t,o=!1,u=!0){this.workspace_=this.sourceBlock_.workspace,!o&&this.workspace_.options.modalInputs&&(Vo||qm||dr)?this.showPromptEditor():this.showInlineEditor(o,u)}showPromptEditor(){Yc(n.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),t=>{t!==null&&this.setValue(this.getValueFromEditorText_(t)),this.onFinishEditing_(this.value_)})}showInlineEditor(t,o){const u=this.getSourceBlock();if(!u)throw new rr;sl(this,u.RTL,this.widgetDispose_.bind(this),this.workspace_,o),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var t=this.getSourceBlock();if(!t)throw new rr;n.setGroup$$module$build$src$core$events$utils(!0);const o=Cu();var u=this.getClickTarget_();if(!u)throw Error("A click target has not been set.");Ye(u,"blocklyEditing"),u=document.createElement("input"),u.className="blocklyHtmlInput",u.setAttribute("spellcheck",this.spellcheck_);const g=this.workspace_.getAbsoluteScale();var R=this.getConstants().FIELD_TEXT_FONTSIZE*g+"pt";return o.style.fontSize=R,u.style.fontSize=R,R=Bb.BORDERRADIUS*g+"px",this.isFullBlockField()&&(R=this.getScaledBBox(),R=(R.bottom-R.top)/2+"px",t=t.getParent()?t.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),u.style.border=1*g+"px solid "+t,o.style.borderRadius=R,o.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(o.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*g+"px")),u.style.borderRadius=R,o.appendChild(u),u.value=u.defaultValue=this.getEditorText_(this.value_),u.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(u),u}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&Fe()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(K(new(Ke(tt.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),n.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var t=Cu().style;if(t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,t=this.getClickTarget_(),!t)throw Error("A click target has not been set.");Se(t,"blocklyEditing")}onFinishEditing_(t){}bindInputEvents_(t){this.onKeyDownWrapper=w(t,"keydown",this,this.onHtmlInputKeyDown_),this.onInputWrapper=w(t,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(O(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onInputWrapper&&(O(this.onInputWrapper),this.onInputWrapper=null)}onHtmlInputKeyDown_(t){if(t.key==="Enter")oa(this),xa();else if(t.key==="Escape")this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),oa(this),xa();else if(t.key==="Tab"){t.preventDefault();var o,u=(o=this.workspace_)==null?void 0:o.getCursor();o=g=>(g instanceof Bb||g instanceof Zi&&g.isSimpleReporter())&&g!==this.getSourceBlock(),t=t.shiftKey?u?.getPreviousNode(this,o,!1):u?.getNextNode(this,o,!1),t=t instanceof Zi&&t.isSimpleReporter()?t.getFields().next().value:t,t instanceof Bb&&(oa(this),xa(),u=t.getSourceBlock(),t.isFullBlockField()&&u&&u instanceof Zi?n.getFocusManager$$module$build$src$core$focus_manager().focusNode(u):n.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),t.showEditor())}}onHtmlInputChange(t){t=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&Fe()&&this.value_!==t&&K(new(Ke(tt.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,t,this.value_))}setEditorValue_(t,o=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t,o)}resizeEditor_(){Gn().then(()=>{const t=this.getSourceBlock();if(!t)throw new rr;const o=Cu(),u=this.getScaledBBox();o.style.width=u.right-u.left+"px",o.style.height=u.bottom-u.top+"px";const g=u.top;o.style.left=`${t.RTL?u.right-o.offsetWidth:u.left}px`,o.style.top=`${g}px`})}repositionForWindowResize(){let t;const o=(t=this.getSourceBlock())==null?void 0:t.getRootBlock();return o instanceof Zi?(Gl(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),o)||this.resizeEditor_(),!0):!1}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(t){return`${t}`}getValueFromEditorText_(t){return t}};Bb.BORDERRADIUS=4,n.FieldTextInput$$module$build$src$core$field_textinput=class extends Bb{constructor(t,o,u){super(t,o,u)}initView(){super.initView(),this.fieldGroup_&&Ye(this.fieldGroup_,"blocklyTextInputField")}doClassValidation_(t){return t===void 0?null:`${t}`}static fromJson(t){return new this(mi(t.text),void 0,t)}},aa("field_input",n.FieldTextInput$$module$build$src$core$field_textinput),n.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",n.FieldTextInput$$module$build$src$core$field_textinput;var EL=class extends Je{constructor(t){super(t)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(t){return!!t.outputConnection}hasRightSquareCorner(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection}},IA=class extends EA{constructor(t,o){if(super(t,o),this.connectedBottomNextConnection=!1,this.connectedBlock){for(t=this.connectedBlock;o=t.getNextBlock();)t=o;t.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},SL=class extends Sn{constructor(t){super(t),this.width=this.height=0,this.type|=Ce.getType("RIGHT_CONNECTION")}},AL=class extends l1{constructor(t){super(t)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(t){const o=(t.hat?t.hat==="cap":this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||o}hasRightSquareCorner(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection}},$L=class extends XT{constructor(t,o){super(t,o),this.isInline=!0,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.topRow=new AL(this.constants_),this.bottomRow=new EL(this.constants_),this.isMultiRow=!o.getInputsInline()||o.isCollapsed(),this.hasStatementInput=o.statementInputCount>0,this.rightSide=this.outputConnection?new SL(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(t,o){return o?o instanceof Ld||t instanceof va||o instanceof va?!0:t instanceof n.ValueInput$$module$build$src$core$inputs$value_input||t instanceof yh||t instanceof Ld?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(t)}getInRowSpacing_(t,o){return t&&o||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&o&&Ce.isStatementInput(o)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&Ce.isLeftRoundedCorner(t)&&o&&(Ce.isPreviousConnection(o)||Ce.isNextConnection(o))?o.notchOffset-this.constants_.CORNER_RADIUS:t&&Ce.isLeftSquareCorner(t)&&o&&Ce.isHat(o)||t&&Ce.isField(t)&&t.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(t,o){if(Ce.isTopRow(t)&&Ce.isBottomRow(o))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const u=Ce.isInputRow(t)&&t.hasStatement,g=Ce.isInputRow(o)&&o.hasStatement;return g||u?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),g&&u?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):Ce.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Ce.isBottomRow(o)?this.outputConnection?!o.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(t,o){const u=this.width-this.startX;return Ce.isInputRow(t)&&t.hasStatement||Ce.isInputRow(o)&&o.hasStatement?Math.max(u,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):u}getElemCenterline_(t,o){if(t.hasStatement&&!Ce.isSpacer(o)&&!Ce.isStatementInput(o))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Ce.isInlineInput(o)){const u=o.connectedBlock;if(u&&u.outputConnection&&u.nextConnection)return t.yPos+u.height/2}return super.getElemCenterline_(t,o)}addInput_(t,o){if((t instanceof yh||t instanceof Ld)&&o.hasDummyInput&&o.align===n.Align$$module$build$src$core$inputs$align.LEFT&&t.align===n.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(o,t);else if(t instanceof va){o.elements.push(new IA(this.constants_,t)),o.hasStatement=!0,o.align===null&&(o.align=t.align);return}super.addInput_(t,o)}addAlignmentPadding_(t,o){if(this.rightAlignedDummyInputs.get(t)){let u;for(let g=0;g<t.elements.length;g++){const R=t.elements[g];if(Ce.isSpacer(R)&&(u=R),Ce.isField(R)&&R.parentInput===this.rightAlignedDummyInputs.get(t))break}if(u){u.width+=o,t.width+=o;return}}super.addAlignmentPadding_(t,o)}adjustXPosition_(){const t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let o=t;for(let R=2;R<this.rows.length-1;R+=2){var u=this.rows[R-1];const k=this.rows[R];var g=this.rows[R+1];if(u=R===2?!!this.topRow.hasPreviousConnection:!!u.followsStatement,g=R+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!g.precedesStatement,Ce.isInputRow(k)&&k.hasStatement){k.measure();let ue,xe;o=k.width-((xe=(ue=k.getLastInput())==null?void 0:ue.width)!=null?xe:0)+t}else if(u&&(R===2||g)&&Ce.isInputRow(k)&&!k.hasStatement){g=k.xPos,u=null;for(let ue=0;ue<k.elements.length;ue++){const xe=k.elements[ue];Ce.isSpacer(xe)&&(u=xe),!(u&&(Ce.isField(xe)||Ce.isInput(xe))&&g<o)||Ce.isField(xe)&&(xe.field instanceof Nd||xe.field instanceof Q_)||(u.width+=o-g),g+=xe.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var t=this.outputConnection.shape;if("isDynamic"in t&&t.isDynamic){for(var o=0,u=0;u<this.rows.length;u++){const g=this.rows[u];g.yPos=o,o+=g.height}this.height=o,u=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,o=t.height(u),u=t.width(u),this.outputConnection.height=o,this.outputConnection.width=u,this.outputConnection.startX=u,this.outputConnection.connectionOffsetY=t.connectionOffsetY(o),this.outputConnection.connectionOffsetX=t.connectionOffsetX(u),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=u,this.rightSide.height=o,this.rightSide.width=t,this.rightSide.centerline=o/2,this.rightSide.xPos=this.width+t),this.startX=u,this.width+=u+t,this.widthWithChildren+=u+t}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var t=0,o=0;o<this.rows.length;o++){var u=this.rows[o];if(!Ce.isInputRow(u))continue;t=u.elements[u.elements.length-2];let g=this.getNegativeSpacing_(u.elements[1]),R=this.getNegativeSpacing_(t);t=g+R;const k=this.constants_.MIN_BLOCK_WIDTH+this.outputConnection.width*2;this.width-t<k&&(t=this.width-k,g=t/2,R=t/2),u.elements.unshift(new yn(this.constants_,-g)),u.elements.push(new yn(this.constants_,-R))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,o=0;o<this.rows.length;o++)u=this.rows[o],Ce.isTopOrBottomRow(u)&&(u.elements[1].width-=t),u.width-=t,u.widthWithConnectedBlocks-=t}}getNegativeSpacing_(t){if(!t||!this.outputConnection)return 0;const o=this.outputConnection.width;var u=this.outputConnection.shape.type;const g=this.constants_;if(this.inputRows.length>1)switch(u){case g.SHAPES.ROUND:return u=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=this.height/2>u?u:this.height/2,o-u*(1-Math.sin(Math.acos((u-this.constants_.SMALL_PADDING)/u)));default:return 0}if(Ce.isInlineInput(t)){const R=t.connectedBlock;return t=R?R.pathObject.outputShapeType:t.shape.type,t==null||R&&R.outputConnection&&(R.statementInputCount||R.nextConnection)||u===g.SHAPES.HEXAGONAL&&u!==t?0:o-this.constants_.SHAPE_IN_SHAPE_PADDING[u][t]}return Ce.isField(t)?u===g.SHAPES.ROUND&&t.field instanceof n.FieldTextInput$$module$build$src$core$field_textinput?o-2.75*g.GRID_UNIT:o-this.constants_.SHAPE_IN_SHAPE_PADDING[u][0]:Ce.isIcon(t)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let g=2;g<this.rows.length-1;g+=2){const R=this.rows[g-1],k=this.rows[g],ue=this.rows[g+1];var t=g===2,o=g+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!ue.precedesStatement;if(t?this.topRow.hasPreviousConnection:R.followsStatement){var u=k.elements[1];if(u=k.elements.length===3&&u instanceof mn&&(u.field instanceof Nd||u.field instanceof Q_),!t&&u)R.height-=this.constants_.SMALL_PADDING,ue.height-=this.constants_.SMALL_PADDING,k.height-=this.constants_.MEDIUM_PADDING;else if(!t&&!o)R.height+=this.constants_.SMALL_PADDING;else if(o){for(t=!1,o=0;o<k.elements.length;o++)if(u=k.elements[o],Ce.isInlineInput(u)&&u.connectedBlock&&!u.connectedBlock.isShadow()&&u.connectedBlock.getHeightWidth().height>=40){t=!0;break}t&&(R.height-=this.constants_.SMALL_PADDING,ue.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},xL=class extends $A{constructor(t,o,u){super(t,o,u),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=u}setPath(t){super.setPath(t),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",t)}applyColour(t){super.applyColour(t);const o=t.getParent();t.isShadow()&&o&&this.svgPath.setAttribute("stroke",o.getColourTertiary());for(const u of this.outlines.values())u.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const t of this.outlines.values())t.setAttribute("transform","scale(-1 1)")}updateSelected(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.classList.add("blocklyPathSelected"),Se(this.svgPathSelected,ni.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Se(this.svgPathSelected,ni.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME),this.svgPathSelected.removeAttribute("tabindex"),this.svgPathSelected.removeAttribute("id"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(t){this.setClass_("blocklyReplaceable",t)}updateShapeForInputHighlight(t,o){t=t.getParentInput().name,(t=this.getOutlinePath(t))&&(o?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const t of this.outlines.keys())this.remainingOutlines.add(t)}endDrawing(){if(this.remainingOutlines.size)for(const t of this.remainingOutlines)this.removeOutlinePath(t);this.remainingOutlines.clear()}setOutlinePath(t,o){t=this.getOutlinePath(t),t.setAttribute("d",o),t.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(t){return this.outlines.has(t)||this.outlines.set(t,Re(qe.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(t),this.outlines.get(t)}removeOutlinePath(t){let o,u;(o=this.outlines.get(t))==null||(u=o.parentNode)==null||u.removeChild(this.outlines.get(t)),this.outlines.delete(t)}},v1=class extends xA{constructor(t){super(t)}makeConstants_(){return new yL}makeRenderInfo_(t){return new $L(this,t)}makeDrawer_(t,o){return new TL(t,o)}makePathObject(t,o){return new xL(t,o,this.getConstants())}getConstants(){return this.constants_}};cl("zelos",v1);var CL=class{constructor(t){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=t.workspace}previewReplacement(t,o,u){n.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=u,u.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(o)&&(o.highlight(),this.staticConn=o)}finally{n.enable$$module$build$src$core$events$utils()}}previewConnection(t,o){if(t!==this.draggedConn||o!==this.staticConn){n.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(t,o)&&(this.markerConn=this.previewMarker(t,o)),this.workspace.getRenderer().shouldHighlightConnection(o)&&o.highlight(),this.draggedConn=t,this.staticConn=o}finally{n.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(t,o){return o.type===un.PREVIOUS_STATEMENT||o.type===un.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof v1)}previewMarker(t,o){const u=t.getSourceBlock(),g=this.createInsertionMarker(u),R=this.getMatchingConnection(u,g,t);if(!R)return null;g.queueRender(),Ui(),R.connect(o);const k={x:o.x-R.x,y:o.y-R.y},ue=R.getOffsetInBlock().clone();return Gn().then(()=>{if(!g.isDeadOrDying()){n.disable$$module$build$src$core$events$utils();try{g?.positionNearConnection(R,k,ue),g?.getSvgRoot().setAttribute("visibility","visible")}finally{n.enable$$module$build$src$core$events$utils()}}}),R}createInsertionMarker(t){const o=Aa(t,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!o)throw Error(`Failed to serialize source block. ${t.toDevString()}`);t=Dl(o,this.workspace);for(const u of t.getDescendants(!1))u.setInsertionMarker(!0);return t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden"),t}getMatchingConnection(t,o,u){if(t=t.getConnections_(!0),o=o.getConnections_(!0),t.length!==o.length)return null;for(let g=0;g<t.length;g++)if(t[g]===u)return o[g];return null}hidePreview(){n.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{n.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(t){const o=t.getSourceBlock(),u=o.outputConnection;let g;if((g=o.previousConnection)!=null&&g.targetConnection||u!=null&&u.targetConnection)o.unplug(!0);else{let R;(R=t.targetBlock())==null||R.unplug(!1)}o.dispose()}dispose(){this.hidePreview()}};i(Et.CONNECTION_PREVIEWER,ri,CL);var pg={};pg.Align=n.Align$$module$build$src$core$inputs$align,pg.DummyInput=yh,pg.EndRowInput=Ld,pg.Input=og,pg.StatementInput=va,pg.ValueInput=n.ValueInput$$module$build$src$core$inputs$value_input,pg.inputTypes=n.inputTypes$$module$build$src$core$inputs$input_types;var ML=!1,RL;n.CodeGenerator$$module$build$src$core$generator=class{constructor(t){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=H());var o=[];this.init(t),t=t.getTopBlocks(!0);for(let u=0,g;g=t[u];u++){let R=this.blockToCode(g);Array.isArray(R)&&(R=R[0]),R&&(g.outputConnection&&(R=this.scrubNakedValue(R),this.STATEMENT_PREFIX&&!g.suppressPrefixSuffix&&(R=this.injectId(this.STATEMENT_PREFIX,g)+R),this.STATEMENT_SUFFIX&&!g.suppressPrefixSuffix&&(R+=this.injectId(this.STATEMENT_SUFFIX,g))),o.push(R))}return o=o.join(`
`),o=this.finish(o),o=o.replace(/^\s+\n/,""),o=o.replace(/\n\s+$/,`
`),o=o.replace(/[ \t]+\n/g,`
`)}prefixLines(t,o){return o+t.replace(/(?!\n$)\n/g,`
`+o)}allNestedComments(t){const o=[];t=t.getDescendants(!0);for(let u=0;u<t.length;u++){const g=t[u].getCommentText();g&&o.push(g)}return o.length&&o.push(""),o.join(`
`)}blockToCode(t,o){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return o?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return o?"":this.blockToCode(t.getChildren(!1)[0]);var u=this.forBlock[t.type];if(typeof u!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${t.type}".`);if(u=u.call(t,t,this),Array.isArray(u)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,u[0],o),u[1]]}if(typeof u=="string")return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,t)+u),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,u,o);if(u===null)return"";throw SyntaxError("Invalid code generated: "+u)}valueToCode(t,o,u){if(isNaN(u))throw TypeError("Expecting valid order from block: "+t.type);var g=t.getInputTargetBlock(o);if(!g&&!t.getInput(o))throw ReferenceError(`Input "${o}" doesn't exist on "${t.type}"`);if(!g||(o=this.blockToCode(g),o===""))return"";if(!Array.isArray(o))throw TypeError(`Expecting tuple from value block: ${g.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(t=o[0],o=o[1],isNaN(o))throw TypeError("Expecting valid order from value block: "+g.type);if(!t)return"";g=!1;var R=Math.floor(u);const k=Math.floor(o);if(R<=k&&(R!==k||R!==0&&R!==99)){for(g=!0,R=0;R<this.ORDER_OVERRIDES.length;R++)if(this.ORDER_OVERRIDES[R][0]===u&&this.ORDER_OVERRIDES[R][1]===o){g=!1;break}}return g&&(t="("+t+")"),t}statementToCode(t,o){const u=t.getInputTargetBlock(o);if(!u&&!t.getInput(o))throw ReferenceError(`Input "${o}" doesn't exist on "${t.type}"`);if(t=this.blockToCode(u),typeof t!="string")throw TypeError("Expecting code from statement block: "+(u&&u.type));return t&&(t=this.prefixLines(t,this.INDENT)),t}addLoopTrap(t,o){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,o),this.INDENT)+t),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,o),this.INDENT)+t),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,o),this.INDENT)),t}injectId(t,o){return o=o.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+o+"'")}addReservedWords(t){this.RESERVED_WORDS_+=t+","}provideFunction_(t,o){if(!this.definitions_[t]){const u=this.nameDB_.getDistinctName(t,n.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[t]=u,Array.isArray(o)&&(o=o.join(`
`)),o=o.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,u);let g;for(;g!==o;)g=o,o=o.replace(/^(( {2})*) {2}/gm,"$1\0");o=o.replace(/\0/g,this.INDENT),this.definitions_[t]=o}return this.functionNames_[t]}getVariableName(t){return this.getName(t,n.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(t){return this.getName(t,n.NameType$$module$build$src$core$names.PROCEDURE)}getName(t,o){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(t,o)}init(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(t,o,u){return o}finish(t){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),t}scrubNakedValue(t){return t}},RL={},RL.CodeGenerator=n.CodeGenerator$$module$build$src$core$generator;var b1=class extends R0{constructor(t){super(t)}setMetrics_(t){if(this.isVisible()){var o=this.workspace_.getMetricsManager(),u=o.getScrollMetrics(),g=o.getViewMetrics();o=o.getAbsoluteMetrics(),typeof t.y=="number"&&(this.workspace_.scrollY=-(u.top+(u.height-g.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+o.left,this.workspace_.scrollY+o.top)}}getX(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager();const o=t.getAbsoluteMetrics(),u=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Kn.LEFT?t.width:u.width-this.getWidth():this.toolboxPosition_===Kn.LEFT?0:u.width:this.toolboxPosition_===Kn.LEFT?0:u.width+o.left-this.getWidth()}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height;var o=this.getWidth()-this.CORNER_RADIUS;this.setBackgroundPath(o,t.height-2*this.CORNER_RADIUS),t=this.getX(),o=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),t,o)}}setBackgroundPath(t,o){const u=this.toolboxPosition_===Kn.RIGHT;var g=t+this.CORNER_RADIUS;g=["M "+(u?g:0)+",0"],g.push("h",u?-t:t),g.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),g.push("v",Math.max(0,o)),g.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),g.push("h",u?t:-t),g.push("z"),this.svgBackground_.setAttribute("d",g.join(" "))}scrollToStart(){let t;(t=this.workspace_.scrollbar)==null||t.setY(0)}wheel_(t){var o=X(t);if(o.y){const u=this.workspace_.getMetricsManager(),g=u.getScrollMetrics();o=u.getViewMetrics().top-g.top+o.y;let R;(R=this.workspace_.scrollbar)==null||R.setY(o),od(this.workspace_),xa()}t.preventDefault(),t.stopPropagation()}layout_(t){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN;const u=this.RTL?o:o+this.tabWidth_;for(const g of t)g.getElement().moveBy(u,o),o+=g.getElement().getBoundingRectangle().getHeight()}isDragTowardWorkspace(t){t=Math.atan2(t.y,t.x)/Math.PI*180;const o=this.dragAngleRange_;return t<o&&t>-o||t<-180+o||t>180-o}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const t=this.svgGroup_.getBoundingClientRect(),o=t.left;return this.toolboxPosition_===Kn.LEFT?new pn(-1e9,1e9,-1e9,o+t.width):new pn(-1e9,1e9,o,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let t=this.getContents().reduce((o,u)=>Math.max(o,u.getElement().getBoundingRectangle().getWidth()),0);if(t+=this.MARGIN*1.5+this.tabWidth_,t*=this.workspace_.scale,t+=rs.scrollbarThickness,this.getWidth()!==t){if(this.RTL)for(const o of this.getContents()){const u=o.getElement().getBoundingRectangle().left,g=t/this.workspace_.scale-o.getElement().getBoundingRectangle().getWidth()-this.MARGIN-this.tabWidth_;o.getElement().moveBy(g-u,0)}this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Kn.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};b1.registryName="verticalFlyout",i(Et.FLYOUTS_VERTICAL_TOOLBOX,ri,b1);var wL=class extends R0{constructor(t){super(t),this.horizontalLayout=!0}setMetrics_(t){if(this.isVisible()){var o=this.workspace_.getMetricsManager(),u=o.getScrollMetrics(),g=o.getViewMetrics();o=o.getAbsoluteMetrics(),typeof t.x=="number"&&(this.workspace_.scrollX=-(u.left+(u.width-g.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+o.left,this.workspace_.scrollY+o.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager();const o=t.getAbsoluteMetrics(),u=t.getViewMetrics();t=t.getToolboxMetrics();const g=this.toolboxPosition_===Kn.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?g?t.height:u.height-this.getHeight():g?0:u.height:g?0:u.height+o.top-this.getHeight()}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,t=t.width-2*this.CORNER_RADIUS;var o=this.getHeight()-this.CORNER_RADIUS;this.setBackgroundPath(t,o),t=this.getX(),o=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),t,o)}}setBackgroundPath(t,o){const u=this.toolboxPosition_===Kn.TOP,g=["M 0,"+(u?0:this.CORNER_RADIUS)];u?(g.push("h",t+2*this.CORNER_RADIUS),g.push("v",o),g.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),g.push("h",-t),g.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(g.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),g.push("h",t),g.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),g.push("v",o),g.push("h",-t-2*this.CORNER_RADIUS)),g.push("z"),this.svgBackground_.setAttribute("d",g.join(" "))}scrollToStart(){let t;(t=this.workspace_.scrollbar)==null||t.setX(this.RTL?1/0:0)}wheel_(t){var o=X(t);if(o=o.x||o.y){const u=this.workspace_.getMetricsManager(),g=u.getScrollMetrics();o=u.getViewMetrics().left-g.left+o;let R;(R=this.workspace_.scrollbar)==null||R.setX(o),od(this.workspace_),xa()}t.preventDefault(),t.stopPropagation()}layout_(t){this.workspace_.scale=this.targetWorkspace.scale;const o=this.MARGIN;let u=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(const g of t)t=g.getElement().getBoundingRectangle(),t=this.RTL?u+t.getWidth():u,g.getElement().moveBy(t,o),u+=g.getElement().getBoundingRectangle().getWidth()}isDragTowardWorkspace(t){t=Math.atan2(t.y,t.x)/Math.PI*180;const o=this.dragAngleRange_;return t<90+o&&t>90-o||t>-90-o&&t<-90+o}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const t=this.svgGroup_.getBoundingClientRect(),o=t.top;return this.toolboxPosition_===Kn.TOP?new pn(-1e9,o+t.height,-1e9,1e9):new pn(o,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let t=this.getContents().reduce((o,u)=>Math.max(o,u.getElement().getBoundingRectangle().getHeight()),0);t+=this.MARGIN*1.5,t*=this.workspace_.scale,t+=rs.scrollbarThickness,this.getHeight()!==t&&(this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Kn.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets())}};i(Et.FLYOUTS_HORIZONTAL_TOOLBOX,ri,wL);var KT=class extends Xs{constructor(t,o,u,g,R){super(Ji.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=KT.dropdownCreate,this.defaultVariableName=typeof t=="string"?t:"",this.size_=new wn(0,0),t!==Ji.SKIP_SETUP&&(R?this.configure_(R):this.setTypes(u,g),o&&this.setValidator(o))}configure_(t){super.configure_(t),this.setTypes(t.variableTypes,t.defaultType)}initModel(){var t=this.getSourceBlock();if(!t)throw new rr;this.variable||(t=n.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(t.getId()))}initView(){super.initView(),Ye(this.fieldGroup_,"blocklyVariableField")}shouldAddBorderRect_(){const t=this.getSourceBlock();if(!t)throw new rr;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||t.type!=="variables_get")}fromXml(t){var o=this.getSourceBlock();if(!o)throw new rr;const u=t.getAttribute("id"),g=t.textContent,R=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(o=n.getOrCreateVariablePackage$$module$build$src$core$variables(o.workspace,u,g,R),R!==null&&R!==o.getType())throw Error("Serialized variable type with id '"+o.getId()+"' had type "+o.getType()+", and does not match variable field that references it: "+Ra(t)+".");this.setValue(o.getId())}toXml(t){return this.initModel(),t.id=this.variable.getId(),t.textContent=this.variable.getName(),this.variable.getType()&&t.setAttribute("variabletype",this.variable.getType()),t}saveState(t){var o=this.saveLegacyState(KT);return o!==null||(this.initModel(),o={id:this.variable.getId()},t&&(o.name=this.variable.getName(),o.type=this.variable.getType())),o}loadState(t){const o=this.getSourceBlock();if(!o)throw new rr;this.loadLegacyState(KT,t)||(t=n.getOrCreateVariablePackage$$module$build$src$core$variables(o.workspace,t.id||null,t.name,t.type||""),this.setValue(t.getId()))}setSourceBlock(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(t)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.getName():""}getVariable(){return this.variable}getDefaultType(){return this.defaultType}getValidator(){return this.variable?this.validator_:null}doClassValidation_(t){if(t===null)return null;var o=this.getSourceBlock();if(!o)throw new rr;return o=n.getVariable$$module$build$src$core$variables(o.workspace,t),o?(o=o.getType(),this.typeIsAllowed(o)?t:(console.warn("Variable type doesn't match this field!  Type was "+o),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)}doValueUpdate_(t){const o=this.getSourceBlock();if(!o)throw new rr;this.variable=n.getVariable$$module$build$src$core$variables(o.workspace,t),super.doValueUpdate_(t)}typeIsAllowed(t){const o=this.getVariableTypes();if(!o)return!0;for(let u=0;u<o.length;u++)if(t===o[u])return!0;return!1}getVariableTypes(){if(this.variableTypes)return this.variableTypes;if(!this.sourceBlock_||this.sourceBlock_.isDeadOrDying())return[""];let t=this.sourceBlock_.workspace.getVariableMap().getTypes();if(this.sourceBlock_.isInFlyout){const o=this.sourceBlock_.workspace.getPotentialVariableMap();if(!o)return t;t=Array.from(new Set([...t,...o.getTypes()]))}return t}setTypes(t=null,o=""){var u=this.getText();if(Array.isArray(t)){if(t.length===0)throw Error(`'variableTypes' of field variable ${u} was an empty list. If you want to include all variable types, pass 'null' instead.`);u=!1;for(let g=0;g<t.length;g++)t[g]===o&&(u=!0);if(!u)throw Error("Invalid default type '"+o+"' in the definition of a FieldVariable")}else if(t!==null)throw Error(`'variableTypes' was not an array or null in the definition of FieldVariable ${u}`);this.defaultType=o,this.variableTypes=t}refreshVariableName(){this.forceRerender()}onItemSelected_(t,o){if(t=o.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(t===xb&&this.variable){n.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(t===DT&&this.variable){t=this.variable.getWorkspace(),n.deleteVariable$$module$build$src$core$variables(t,this.variable,this.sourceBlock_);return}}this.setValue(t)}referencesVariables(){return!0}static fromJson(t){return new this(mi(t.variable),void 0,void 0,void 0,t)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const t=this.getText();let o=[];var u=this.getSourceBlock();if(u&&!u.isDeadOrDying()){u=u.workspace;const k=this.getVariableTypes();for(let ue=0;ue<k.length;ue++){const xe=k[ue],St=u.getVariableMap().getVariablesOfType(xe);if(o=o.concat(St),u.isFlyout){var g=void 0,R=void 0;o=o.concat((R=(g=u.getPotentialVariableMap())==null?void 0:g.getVariablesOfType(xe))!=null?R:[])}}}for(o.sort(Ll),g=[],R=0;R<o.length;R++)g[R]=[o[R].getName(),o[R].getId()];return g.push([n.Msg$$module$build$src$core$msg.RENAME_VARIABLE,xb]),n.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&g.push([n.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",t),DT]),g}};aa("field_variable",KT);var y1=class extends Bb{constructor(t,o,u,g,R,k){super(Ji.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,t!==Ji.SKIP_SETUP&&(k?this.configure_(k):this.setConstraints(o,u,g),this.setValue(t),R&&this.setValidator(R))}configure_(t){super.configure_(t),this.setMinInternal(t.min),this.setMaxInternal(t.max),this.setPrecisionInternal(t.precision)}setConstraints(t,o,u){this.setMinInternal(t),this.setMaxInternal(o),this.setPrecisionInternal(u),this.setValue(this.getValue())}setMin(t){this.setMinInternal(t),this.setValue(this.getValue())}setMinInternal(t){t==null?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))}getMin(){return this.min_}setMax(t){this.setMaxInternal(t),this.setValue(this.getValue())}setMaxInternal(t){t==null?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))}getMax(){return this.max_}setPrecision(t){this.setPrecisionInternal(t),this.setValue(this.getValue())}setPrecisionInternal(t){this.precision_=Number(t)||0;let o=String(this.precision_);o.includes("e")&&(o=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const u=o.indexOf(".");this.decimalPlaces=u===-1?t?0:null:o.length-u-1}getPrecision(){return this.precision_}doClassValidation_(t){return t===null||(t=`${t}`.replace(/O/gi,"0"),t=t.replace(/,/g,""),t=t.replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),this.decimalPlaces!==null&&(t=Number(t.toFixed(this.decimalPlaces))),t)}widgetCreate_(){const t=super.widgetCreate_();return this.min_>-1/0&&(t.min=`${this.min_}`,Xn(t,gs.VALUEMIN,this.min_)),this.max_<1/0&&(t.max=`${this.max_}`,Xn(t,gs.VALUEMAX,this.max_)),t}initView(){super.initView(),this.fieldGroup_&&Ye(this.fieldGroup_,"blocklyNumberField")}static fromJson(t){return new this(t.value,void 0,void 0,void 0,void 0,t)}};aa("field_number",y1),y1.prototype.DEFAULT_VALUE=0;var IL=class extends Nd{constructor(t,o,u){super(String(t??""),o,u),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(t){return new this(mi(t.text),void 0,t)}};aa("field_label_serializable",IL);var ev=class extends Ji{constructor(t,o,u){super(Ji.SKIP_SETUP),this.SERIALIZABLE=!0,this.value_=this.value_,this.checkChar=ev.CHECK_CHAR,t!==Ji.SKIP_SETUP&&(u&&this.configure_(u),this.setValue(t),o&&this.setValidator(o))}configure_(t){super.configure_(t),t.checkCharacter&&(this.checkChar=t.checkCharacter)}saveState(){const t=this.saveLegacyState(ev);return t!==null?t:this.getValueBoolean()}initView(){super.initView();const t=this.getTextElement();Ye(this.fieldGroup_,"blocklyCheckboxField"),t.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(t){this.checkChar=t||ev.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(t){return t===!0||t==="TRUE"?"TRUE":t===!1||t==="FALSE"?"FALSE":null}doValueUpdate_(t){this.value_=this.convertValueToBool(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(t){return typeof t=="string"?t==="TRUE":!!t}static fromJson(t){return new this(t.checked,void 0,t)}};ev.CHECK_CHAR="✓",aa("field_checkbox",ev),ev.prototype.DEFAULT_VALUE=!1;var OL=class{constructor(t,o){this.draggable=t,this.workspace=o,this.dragTarget=null,this.startLoc=t.getRelativeToSurfaceXY()}onDragStart(t){n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0),this.draggable.startDrag(t)}onDrag(t,o){this.moveDraggable(t,o),o=this.getRoot(this.draggable),Oa(o)&&o.setDeleteStyle(this.wouldDeleteDraggable(t,o)),this.updateDragTarget(t)}updateDragTarget(t){t=this.workspace.getDragTarget(t);const o=this.getRoot(this.draggable);if(this.dragTarget!==t){let u;(u=this.dragTarget)==null||u.onDragExit(o),t?.onDragEnter(o)}t?.onDragOver(o),this.dragTarget=t}moveDraggable(t,o){o=this.pixelsToWorkspaceUnits(o),o=Ot.sum(this.startLoc,o),this.draggable.drag(o,t)}wouldDeleteDraggable(t,o){return(t=this.workspace.getDragTarget(t))&&this.workspace.getComponentManager().hasCapability(t.id,Hi.Capability.DELETE_AREA)?t.wouldDelete(o):!1}onDragEnd(t){const o=n.getGroup$$module$build$src$core$events$utils();var u=this.workspace.getDragTarget(t);const g=this.getRoot(this.draggable);if(u){let R;(R=this.dragTarget)==null||R.onDrop(g)}this.shouldReturnToStart(t,g)&&this.draggable.revertDrag(),(u=Oa(g)&&this.wouldDeleteDraggable(t,g))&&this.draggable instanceof Zi&&Mf(this.draggable.getRootBlock()),this.draggable.endDrag(t),u&&Oa(g)&&(n.setGroup$$module$build$src$core$events$utils(o),g.dispose()),n.setGroup$$module$build$src$core$events$utils(!1),!u&&Le(this.draggable)&&n.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.draggable)}getRoot(t){return t instanceof Zi?t.getRootBlock():t}shouldReturnToStart(t,o){return(t=this.workspace.getDragTarget(t))?t.shouldPreventMove(o):!1}pixelsToWorkspaceUnits(t){return t=new Ot(t.x/this.workspace.scale,t.y/this.workspace.scale),this.workspace.isMutator&&t.scale(1/this.workspace.options.parentWorkspace.scale),t}};i(Et.BLOCK_DRAGGER,ri,OL);var qT={};qT.BlockDragStrategy=kT,qT.BubbleDragStrategy=_A,qT.CommentDragStrategy=yb,qT.Dragger=OL;var T1=class extends Yo{constructor(t,o,u){super(t?t.workspace.id:void 0),this.type=tt.BLOCK_DRAG,t&&(this.blockId=t.id,this.isStart=o,this.blocks=u)}toJson(){const t=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new T1),o.isStart=t.isStart,o.blockId=t.blockId,o.blocks=t.blocks,o}};i(Et.EVENT,tt.BLOCK_DRAG,T1);var E1=class extends Ct{constructor(t,o,u,g){super(t),this.type=tt.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,t&&(this.name=o,this.oldValue=u,this.newValue=g)}toJson(){const t=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return t.name=this.name,t.oldValue=this.oldValue,t.newValue=this.newValue,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new E1),o.name=t.name,o.oldValue=t.oldValue,o.newValue=t.newValue,o}isNull(){return this.oldValue===this.newValue}run(t){var o=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(o=o.getBlockById(this.blockId),!o)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");t=t?this.newValue:this.oldValue,(o=o.getField(this.name))?o.setValue(t):console.warn("Can't set non-existent field: "+this.name)}};i(Et.EVENT,tt.BLOCK_FIELD_INTERMEDIATE_CHANGE,E1);var S1=class extends Ct{constructor(t){super(t),this.type=tt.BLOCK_MOVE,t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)}toJson(){const t=super.toJson();return t.oldParentId=this.oldParentId,t.oldInputName=this.oldInputName,this.oldCoordinate&&(t.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),t.newParentId=this.newParentId,t.newInputName=this.newInputName,this.newCoordinate&&(t.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(t.reason=this.reason),this.recordUndo||(t.recordUndo=this.recordUndo),t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new S1),o.oldParentId=t.oldParentId,o.oldInputName=t.oldInputName,t.oldCoordinate&&(u=t.oldCoordinate.split(","),o.oldCoordinate=new Ot(Number(u[0]),Number(u[1]))),o.newParentId=t.newParentId,o.newInputName=t.newInputName,t.newCoordinate&&(u=t.newCoordinate.split(","),o.newCoordinate=new Ot(Number(u[0]),Number(u[1]))),t.reason!==void 0&&(o.reason=t.reason),t.recordUndo!==void 0&&(o.recordUndo=t.recordUndo),o}recordNew(){const t=this.currentLocation();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate}setReason(t){this.reason=t}currentLocation(){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var o=t.getBlockById(this.blockId);if(!o)throw Error("The block associated with the block move event could not be found");t={};const u=o.getParent();return u?(t.parentId=u.id,(o=u.getInputWithBlock(o))&&(t.inputName=o.name)):t.coordinate=o.getRelativeToSurfaceXY(),t}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Ot.equals(this.oldCoordinate,this.newCoordinate)}run(t){var o=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var u=o.getBlockById(this.blockId);if(u){var g=t?this.newParentId:this.oldParentId,R=t?this.newInputName:this.oldInputName;if(t=t?this.newCoordinate:this.oldCoordinate,g){var k=o.getBlockById(g);if(!k){console.warn("Can't connect to non-existent block: "+g);return}}if(u.getParent()&&u.unplug(),t)R=u.getRelativeToSurfaceXY(),u.moveBy(t.x-R.x,t.y-R.y,this.reason);else{o=u.outputConnection,(!o||u.previousConnection&&u.previousConnection.isConnected())&&(o=u.previousConnection);let ue,xe;u=(xe=o)==null?void 0:xe.type,R?(u=k.getInput(R))&&(ue=u.connection):u===un.PREVIOUS_STATEMENT&&(ue=k.nextConnection),ue&&o?o.connect(ue):console.warn("Can't connect to non-existent input: "+R)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Et.EVENT,tt.BLOCK_MOVE,S1);var A1=class extends Yo{constructor(t,o,u){super(t?t.workspace.id:void 0),this.type=tt.BUBBLE_OPEN,t&&(this.blockId=t.id,this.isOpen=o,this.bubbleType=u)}toJson(){const t=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId||"",t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new A1),o.isOpen=t.isOpen,o.bubbleType=t.bubbleType,o.blockId=t.blockId,o}},$1;(function(t){t.MUTATOR="mutator",t.COMMENT="comment",t.WARNING="warning"})($1||($1={})),i(Et.EVENT,tt.BUBBLE_OPEN,A1);var Jf=class extends jo{constructor(t){super(),this.isBlank=!t,t&&(this.commentId=t.id,this.workspaceId=t.workspace.id,this.group=n.getGroup$$module$build$src$core$events$utils(),this.recordUndo=pe())}toJson(){const t=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return t.commentId=this.commentId,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new Jf),o.commentId=t.commentId,o}static CommentCreateDeleteHelper(t,o){const u=t.getEventWorkspace_();if(o){if(!t.json)throw Error("Encountered a comment event without proper json");ln(t.json,u)}else{if(!t.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(o=u.getCommentById(t.commentId))?o.dispose():console.warn("Can't delete non-existent comment: "+t.commentId)}}},x1=class extends Jf{constructor(t,o,u){super(t),this.type=tt.COMMENT_CHANGE,t&&(this.oldContents_=typeof o>"u"?"":o,this.newContents_=typeof u>"u"?"":u)}toJson(){const t=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new x1),o.oldContents_=t.oldContents,o.newContents_=t.newContents,o}isNull(){return this.oldContents_===this.newContents_}run(t){var o=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(o=o.getCommentById(this.commentId)){var u=t?this.newContents_:this.oldContents_;if(u===void 0)throw Error(t?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");o.setText(u)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Et.EVENT,tt.COMMENT_CHANGE,x1);var C1=class extends Jf{constructor(t,o){super(t),this.newCollapsed=o,this.type=tt.COMMENT_COLLAPSE}toJson(){const t=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return t.newCollapsed=this.newCollapsed,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new C1),o.newCollapsed=t.newCollapsed,o}run(t){var o=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(o=o.getCommentById(this.commentId))?o.setCollapsed(t?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};i(Et.EVENT,tt.COMMENT_COLLAPSE,C1);var M1=class extends Jf{constructor(t){super(t),this.type=tt.COMMENT_CREATE,t&&(this.xml=ud(t),this.json=ei(t,{addCoordinates:!0}))}toJson(){const t=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=Ra(this.xml),t.json=this.json,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new M1),o.xml=n.textToDom$$module$build$src$core$utils$xml(t.xml),o.json=t.json,o}run(t){Jf.CommentCreateDeleteHelper(this,t)}};i(Et.EVENT,tt.COMMENT_CREATE,M1);var R1=class extends Jf{constructor(t){super(t),this.type=tt.COMMENT_DELETE,t&&(this.xml=ud(t),this.json=ei(t,{addCoordinates:!0}))}run(t){Jf.CommentCreateDeleteHelper(this,!t)}toJson(){const t=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=Ra(this.xml),t.json=this.json,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new R1),o.xml=n.textToDom$$module$build$src$core$utils$xml(t.xml),o.json=t.json,o}};i(Et.EVENT,tt.COMMENT_DELETE,R1);var w1=class extends Yo{constructor(t,o){super(t?t.workspace.id:void 0),this.type=tt.COMMENT_DRAG,t&&(this.commentId=t.id,this.isStart=o)}toJson(){const t=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return t.isStart=this.isStart,t.commentId=this.commentId,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new w1),o.isStart=t.isStart,o.commentId=t.commentId,o}};i(Et.EVENT,tt.COMMENT_DRAG,w1);var I1=class extends Jf{constructor(t){super(t),this.type=tt.COMMENT_MOVE,t&&(this.comment_=t,this.oldCoordinate_=t.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(t){this.reason=t}setOldCoordinate(t){this.oldCoordinate_=t}toJson(){const t=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return t.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new I1),u=t.oldCoordinate.split(","),o.oldCoordinate_=new Ot(Number(u[0]),Number(u[1])),u=t.newCoordinate.split(","),o.newCoordinate_=new Ot(Number(u[0]),Number(u[1])),o}isNull(){return Ot.equals(this.oldCoordinate_,this.newCoordinate_)}run(t){var o=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(o=o.getCommentById(this.commentId)){if(t=t?this.newCoordinate_:this.oldCoordinate_,!t)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");o.moveTo(t)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Et.EVENT,tt.COMMENT_MOVE,I1);var O1=class extends Jf{constructor(t){super(t),this.type=tt.COMMENT_RESIZE,t&&(this.oldSize=t.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId),!t)throw Error("The comment associated with the comment resize event could not be found");this.newSize=t.getSize()}toJson(){const t=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return t.oldWidth=Math.round(this.oldSize.width),t.oldHeight=Math.round(this.oldSize.height),t.newWidth=Math.round(this.newSize.width),t.newHeight=Math.round(this.newSize.height),t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new O1),o.oldSize=new wn(t.oldWidth,t.oldHeight),o.newSize=new wn(t.newWidth,t.newHeight),o}isNull(){return wn.equals(this.oldSize,this.newSize)}run(t){var o=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(o=o.getCommentById(this.commentId)){if(t=t?this.newSize:this.oldSize,!t)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");o.setSize(t)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};i(Et.EVENT,tt.COMMENT_RESIZE,O1);var N1=class extends Yo{constructor(t,o,u){super(u),this.type=tt.TOOLBOX_ITEM_SELECT,this.oldItem=t??void 0,this.newItem=o??void 0}toJson(){const t=super.toJson();return t.oldItem=this.oldItem,t.newItem=this.newItem,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new N1),o.oldItem=t.oldItem,o.newItem=t.newItem,o}};i(Et.EVENT,tt.TOOLBOX_ITEM_SELECT,N1);var L1=class extends Nb{constructor(t,o,u){super(t),this.oldType=o,this.newType=u,this.type=tt.VAR_TYPE_CHANGE}toJson(){const t=super.toJson();if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");return t.oldType=this.oldType,t.newType=this.newType,t}static fromJson(t,o,u){return o=super.fromJson(t,o,u??new L1),o.oldType=t.oldType,o.newType=t.newType,o}run(t){const o=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");const u=o.getVariableMap().getVariableById(this.varId);u&&(t?o.getVariableMap().changeVariableType(u,this.newType):o.getVariableMap().changeVariableType(u,this.oldType))}};i(Et.EVENT,tt.VAR_TYPE_CHANGE,L1);var NL=class extends jo{constructor(t){super(),this.isBlank=!0,this.recordUndo=!1,this.type=tt.FINISHED_LOADING,this.isBlank=!!t,t&&(this.workspaceId=t.id)}};i(Et.EVENT,tt.FINISHED_LOADING,NL);var LL,DL,BL,kL,PL,UL,FL,HL,GL,zL,VL,WL,XL,jL,YL,KL,qL,JL,ZL,QL,eD,tD,nD,iD,an;n.BLOCK_CHANGE$$module$build$src$core$events$events=tt.BLOCK_CHANGE,n.BLOCK_CREATE$$module$build$src$core$events$events=tt.BLOCK_CREATE,n.BLOCK_DELETE$$module$build$src$core$events$events=tt.BLOCK_DELETE,LL=tt.BLOCK_DRAG,n.BLOCK_MOVE$$module$build$src$core$events$events=tt.BLOCK_MOVE,DL=tt.BLOCK_FIELD_INTERMEDIATE_CHANGE,BL=tt.BUBBLE_OPEN,kL=tt.BLOCK_CHANGE,PL=tt.CLICK,UL=tt.COMMENT_CHANGE,FL=tt.COMMENT_CREATE,HL=tt.COMMENT_DELETE,GL=tt.COMMENT_MOVE,zL=tt.COMMENT_RESIZE,VL=tt.COMMENT_DRAG,WL=tt.BLOCK_CREATE,XL=tt.BLOCK_DELETE,jL=tt.FINISHED_LOADING,YL=tt.BLOCK_MOVE,KL=tt.SELECTED,qL=tt.THEME_CHANGE,JL=tt.TOOLBOX_ITEM_SELECT,ZL=tt.TRASHCAN_OPEN,QL=tt.UI,eD=tt.VAR_CREATE,tD=tt.VAR_DELETE,nD=tt.VAR_RENAME,iD=tt.VIEWPORT_CHANGE,an={},an.Abstract=jo,an.BLOCK_CHANGE=n.BLOCK_CHANGE$$module$build$src$core$events$events,an.BLOCK_CREATE=n.BLOCK_CREATE$$module$build$src$core$events$events,an.BLOCK_DELETE=n.BLOCK_DELETE$$module$build$src$core$events$events,an.BLOCK_DRAG=LL,an.BLOCK_FIELD_INTERMEDIATE_CHANGE=DL,an.BLOCK_MOVE=n.BLOCK_MOVE$$module$build$src$core$events$events,an.BUBBLE_OPEN=BL,an.BUMP_EVENTS=ua,an.BlockBase=Ct,an.BlockChange=zt,an.BlockCreate=D_,an.BlockDelete=Tl,an.BlockDrag=T1,an.BlockFieldIntermediateChange=E1,an.BlockMove=S1,an.BubbleOpen=A1,an.BubbleType=$1,an.CHANGE=kL,an.CLICK=PL,an.COMMENT_CHANGE=UL,an.COMMENT_CREATE=FL,an.COMMENT_DELETE=HL,an.COMMENT_DRAG=VL,an.COMMENT_MOVE=GL,an.COMMENT_RESIZE=zL,an.CREATE=WL,an.Click=$d,an.ClickTarget=xd,an.CommentBase=Jf,an.CommentChange=x1,an.CommentCollapse=C1,an.CommentCreate=M1,an.CommentDelete=R1,an.CommentDrag=w1,an.CommentMove=I1,an.CommentResize=O1,an.DELETE=XL,an.FINISHED_LOADING=jL,an.FinishedLoading=NL,an.MOVE=YL,an.SELECTED=KL,an.Selected=$0,an.THEME_CHANGE=qL,an.TOOLBOX_ITEM_SELECT=JL,an.TRASHCAN_OPEN=ZL,an.ThemeChange=su,an.ToolboxItemSelect=N1,an.TrashcanOpen=f1,an.UI=QL,an.UiBase=Yo,an.VAR_CREATE=eD,an.VAR_DELETE=tD,an.VAR_RENAME=nD,an.VIEWPORT_CHANGE=iD,an.VarBase=Nb,an.VarCreate=c1,an.VarDelete=h1,an.VarRename=d1,an.VarTypeChange=L1,an.ViewportChange=B_,an.clearPendingUndo=We,an.disable=n.disable$$module$build$src$core$events$utils,an.disableOrphans=Ht,an.enable=n.enable$$module$build$src$core$events$utils,an.filter=Ee,an.fire=K,an.fromJson=Ut,an.get=Ke,an.getDescendantIds=ft,an.getGroup=n.getGroup$$module$build$src$core$events$utils,an.getRecordUndo=pe,an.isEnabled=Fe,an.setGroup=n.setGroup$$module$build$src$core$events$utils,an.setRecordUndo=n.setRecordUndo$$module$build$src$core$events$utils;var Zf={};Zf.BottomRow=EL,Zf.ConstantProvider=yL,Zf.Drawer=TL,Zf.PathObject=xL,Zf.RenderInfo=$L,Zf.Renderer=v1,Zf.RightConnectionShape=SL,Zf.StatementInput=IA,Zf.TopRow=AL,Tc();var Qo={};Qo.registerCleanup=kf,Qo.registerCollapse=zm,Qo.registerCollapseExpandBlock=Wm,Qo.registerComment=y_,Qo.registerCommentCreate=yd,Qo.registerCommentDelete=Xm,Qo.registerCommentDuplicate=Go,Qo.registerCommentOptions=E_,Qo.registerDefaultOptions=Tc,Qo.registerDelete=Uf,Qo.registerDeleteAll=h0,Qo.registerDisable=bd,Qo.registerDuplicate=Vm,Qo.registerExpand=v_,Qo.registerHelp=Ff,Qo.registerInline=T_,Qo.registerRedo=l0,Qo.registerUndo=Hm;var D1="button",sD=class{load(t,o){return t=new Zo(o.getWorkspace(),o.targetWorkspace,t,!1),t.show(),new Yf(t,D1)}gapForItem(t,o){return o}disposeItem(t){t=t.getElement(),t instanceof Zo&&t.dispose()}getType(){return D1}};i(Et.FLYOUT_INFLATER,D1,sD);var JT={};JT.Bubble=ls,JT.MiniWorkspaceBubble=Od,JT.TextBubble=PT,JT.TextInputBubble=A;var xV="WORKSPACE_AT_BLOCK_CAPACITY",B1="block",rD=class{constructor(){this.permanentlyDisabledBlocks=new Set,this.listeners=new Map,this.capacityWrapper=this.filterFlyoutBasedOnCapacity.bind(this)}load(t,o){return this.setFlyout(o),t=this.createBlock(t,o.getWorkspace()),t.isEnabled()?this.updateStateBasedOnCapacity(t):this.permanentlyDisabledBlocks.add(t),t.getDescendants(!1).forEach(u=>u.isInFlyout=!0),this.addBlockListeners(t),new Yf(t,B1)}createBlock(t,o){return t.blockxml?(t=typeof t.blockxml=="string"?n.textToDom$$module$build$src$core$utils$xml(t.blockxml):t.blockxml,o=ll(t,o)):(t.enabled===void 0&&(t.enabled=t.disabled!=="true"&&t.disabled!==!0),t.disabledReasons===void 0&&t.enabled===!1&&(t.disabledReasons=[Vs]),"x"in t&&delete t.x,"y"in t&&delete t.y,o=Zh(t,o)),o}gapForItem(t,o){let u;return t.gap?u=parseInt(String(t.gap)):t.blockxml&&(t=typeof t.blockxml=="string"?n.textToDom$$module$build$src$core$utils$xml(t.blockxml):t.blockxml,u=parseInt(t.getAttribute("gap"))),!u||isNaN(u)?o:u}disposeItem(t){t=t.getElement(),t instanceof Zi&&(this.removeListeners(t.id),t.dispose(!1,!1))}removeListeners(t){let o;((o=this.listeners.get(t))!=null?o:[]).forEach(u=>O(u)),this.listeners.delete(t)}setFlyout(t){if(this.flyout!==t){if(this.flyout){let u;(u=this.flyout.targetWorkspace)==null||u.removeChangeListener(this.capacityWrapper)}this.flyout=t;var o;(o=this.flyout.targetWorkspace)==null||o.addChangeListener(this.capacityWrapper)}}updateStateBasedOnCapacity(t){let o,u;const g=(o=this.flyout)==null||(u=o.targetWorkspace)==null?void 0:u.isCapacityAvailable($t(t));for(;t;)t.setDisabledReason(!g,xV),t=t.getNextBlock()}addBlockListeners(t){const o=[];o.push(w(t.getSvgRoot(),"pointerdown",t,u=>{let g,R;const k=(g=this.flyout)==null||(R=g.targetWorkspace)==null?void 0:R.getGesture(u);k&&this.flyout&&(k.setStartBlock(t),k.handleFlyoutStart(u,this.flyout))})),o.push(I(t.getSvgRoot(),"pointermove",null,()=>{let u,g;!((u=this.flyout)==null||(g=u.targetWorkspace)==null)&&g.isDragging()||t.addSelect()})),o.push(I(t.getSvgRoot(),"pointerleave",null,()=>{let u,g;!((u=this.flyout)==null||(g=u.targetWorkspace)==null)&&g.isDragging()||t.removeSelect()})),this.listeners.set(t.id,o)}filterFlyoutBasedOnCapacity(t){!this.flyout||t&&t.type!==tt.BLOCK_CREATE&&t.type!==tt.BLOCK_DELETE||this.flyout.getWorkspace().getTopBlocks(!1).forEach(o=>{this.permanentlyDisabledBlocks.has(o)||this.updateStateBasedOnCapacity(o)})}getType(){return B1}};i(Et.FLYOUT_INFLATER,B1,rD);var oD=class extends SA{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(t){return super.getCSS_(t).concat([`${t} .blocklyInsertionMarker>.blocklyPathLight,`,`${t} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},aD=class{constructor(t){this.inlineSteps_=this.steps_="",this.info_=t,this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(t){this.steps_+=ws(t.xPos,this.info_.startY);for(let o=0,u;u=t.elements[o];o++)Ce.isLeftSquareCorner(u)?this.steps_+=this.highlightConstants_.START_POINT:Ce.isLeftRoundedCorner(u)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Ce.isPreviousConnection(u)?this.steps_+=this.notchPaths_.pathLeft:Ce.isHat(u)?this.steps_+=this.startPaths_.path(this.RTL_):Ce.isSpacer(u)&&u.width!==0&&(this.steps_+=hn("H",u.xPos+u.width-this.highlightOffset));this.steps_+=hn("H",t.xPos+t.width-this.highlightOffset)}drawJaggedEdge_(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+hn("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(t){const o=t.getLastInput();if(this.RTL_){const u=t.height-o.connectionHeight;this.steps_+=Zs(o.xPos+o.width-this.highlightOffset,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+hn("v",u)}else this.steps_+=Zs(o.xPos+o.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(t){const o=t.getLastInput();if(o)if(this.RTL_){const u=t.height-2*this.insideCornerPaths_.height;this.steps_+=Zs(o.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+hn("v",u)+this.insideCornerPaths_.pathBottom(this.RTL_)+yr(t.width-o.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Zs(o.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+yr(t.width-o.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(t){const o=t.xPos+t.width-this.highlightOffset;t instanceof a1&&t.followsStatement&&(this.steps_+=hn("H",o)),this.RTL_&&(this.steps_+=hn("H",o),t.height>this.highlightOffset&&(this.steps_+=hn("V",t.yPos+t.height-this.highlightOffset)))}drawBottomRow(t){if(this.RTL_)this.steps_+=hn("V",t.baseline-this.highlightOffset);else{const o=this.info_.bottomRow.elements[0];Ce.isLeftSquareCorner(o)?this.steps_+=Zs(t.xPos+this.highlightOffset,t.baseline-this.highlightOffset):Ce.isLeftRoundedCorner(o)&&(this.steps_+=Zs(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=Zs(this.info_.startX,t):(this.steps_+=Zs(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=hn("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t=this.info_.topRow,Ce.isLeftRoundedCorner(t.elements[0])?this.steps_+=hn("V",this.outsideCornerPaths_.height):this.steps_+=hn("V",t.capline+this.highlightOffset))}drawInlineInput(t){const o=this.highlightOffset,u=t.xPos+t.connectionWidth;var g=t.centerline-t.height/2;const R=t.width-t.connectionWidth,k=g+o;this.RTL_?(g=t.connectionOffsetY-o,t=t.height-(t.connectionOffsetY+t.connectionHeight)+o,this.inlineSteps_+=Zs(u-o,k)+hn("v",g)+this.puzzleTabPaths_.pathDown(this.RTL_)+hn("v",t)+hn("h",R)):this.inlineSteps_+=Zs(t.xPos+t.width+o,k)+hn("v",t.height)+hn("h",-R)+Zs(u,g+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},lD=class extends AA{constructor(t,o){super(t,o),this.highlighter_=new aD(o)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const t=this.block_.pathObject;t.setPath(this.outlinePath_+`
`+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(t){this.highlighter_.drawJaggedEdge_(t),super.drawJaggedEdge_(t)}drawValueInput_(t){this.highlighter_.drawValueInput(t),super.drawValueInput_(t)}drawStatementInput_(t){this.highlighter_.drawStatementInput(t),super.drawStatementInput_(t)}drawRightSideRow_(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=hn("H",t.xPos+t.width)+hn("V",t.yPos+t.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(t){this.highlighter_.drawInlineInput(t),super.drawInlineInput_(t)}positionInlineInputConnection_(t){const o=t.centerline-t.height/2;if(t.connectionModel){let u=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),t.connectionModel.setOffsetInBlock(u,o+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(t){const o=t.getLastInput();if(o!=null&&o.connectionModel){let u=t.xPos+t.statementEdge+o.notchOffset;u=this.info_.RTL?u*-1:u+this.constants_.DARK_PATH_OFFSET,o.connectionModel.setOffsetInBlock(u,t.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(t){const o=t.getLastInput();if(o&&o.connectionModel){let u=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),o.connectionModel.setOffsetInBlock(u,t.yPos)}}positionNextConnection_(){const t=this.info_.bottomRow;if(t.connection){const o=t.connection,u=o.xPos;o.connectionModel.setOffsetInBlock((this.info_.RTL?-u:u)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}}},uD=class{constructor(t){this.OFFSET=.5,this.constantProvider=t,this.START_POINT=ws(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const t=this.constantProvider.CORNER_RADIUS,o=this.OFFSET,u=(1-Math.SQRT1_2)*(t+o)-o,g=ws(u,u)+ps("a","0 0,0",t,cn(-u-o,t-u)),R=ps("a","0 0,0",t+o,cn(t+o,t+o)),k=ws(u,-u)+ps("a","0 0,0",t+o,cn(t-u,u+o));return{width:t+o,height:t,pathTop(ue){return ue?g:""},pathBottom(ue){return ue?R:k}}}makeOutsideCorner(){const t=this.constantProvider.CORNER_RADIUS,o=this.OFFSET,u=(1-Math.SQRT1_2)*(t-o)+o,g=ws(u,u)+ps("a","0 0,1",t-o,cn(t-u,-u+o)),R=ws(o,t)+ps("a","0 0,1",t-o,cn(t,-t+o)),k=-u,ue=ws(u,k)+ps("a","0 0,1",t-o,cn(-u+o,-k-t));return{height:t,topLeft(xe){return xe?g:R},bottomLeft(){return ue}}}makePuzzleTab(){const t=this.constantProvider.TAB_WIDTH,o=this.constantProvider.TAB_HEIGHT,u=ws(-2,-o+2.5+.9)+yr(t*-.45,-2.1),g=hn("v",2.5)+ws(-t*.97,2.5)+ao("q",[cn(-t*.05,10),cn(t*.3,9.5)])+ws(t*.67,-1.9)+hn("v",2.5),R=hn("v",-1.5)+ws(t*-.92,-.5)+ao("q",[cn(t*-.19,-5.5),cn(0,-11)])+ws(t*.92,1),k=ws(-5,o-.7)+yr(t*.46,-2.1);return{width:t,height:o,pathUp(ue){return ue?u:R},pathDown(ue){return ue?g:k}}}makeNotch(){return{pathLeft:hn("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:yr(5.1,2.6)+ws(-10.2,6.8)+yr(5.1,2.6),height:12,width:10.2}}makeStartHat(){const t=this.constantProvider.START_HAT.height,o=ws(25,-8.7)+ao("c",[cn(29.7,-6.2),cn(57.2,-.5),cn(75,8.7)]),u=ao("c",[cn(17.8,-9.2),cn(45.3,-14.9),cn(75,-8.7)])+Zs(100.5,t+.5);return{path(g){return g?o:u}}}},cD=class extends Kr{constructor(t,o){super(t,o),this.constants_=t,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},hD=class extends EA{constructor(t,o){super(t,o),this.constants_=t,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},dD=class extends XT{constructor(t,o){super(t,o),this.renderer_=t}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof va||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(t,o){this.isInline&&t instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(o.elements.push(new cD(this.constants_,t)),o.hasInlineInput=!0):t instanceof va?(o.elements.push(new hD(this.constants_,t)),o.hasStatement=!0):t instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(o.elements.push(new Lt(this.constants_,t)),o.hasExternalInput=!0):(t instanceof yh||t instanceof Ld)&&(o.minHeight=Math.max(o.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),o.hasDummyInput=!0),this.isInline||o.align!==null||(o.align=t.align)}addElemSpacing_(){let t=!1;for(let u=0,g;g=this.rows[u];u++)g.hasExternalInput&&(t=!0);for(let u=0,g;g=this.rows[u];u++){var o=g.elements;if(g.elements=[],g.startsWithElemSpacer()&&g.elements.push(new yn(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let R=0;R<o.length-1;R++){g.elements.push(o[R]);const k=this.getInRowSpacing_(o[R],o[R+1]);g.elements.push(new yn(this.constants_,k))}g.elements.push(o[o.length-1]),g.endsWithElemSpacer()&&(o=this.getInRowSpacing_(o[o.length-1],null),t&&g.hasDummyInput&&(o+=this.constants_.TAB_WIDTH),g.elements.push(new yn(this.constants_,o)))}}}getInRowSpacing_(t,o){if(!t)return o&&Ce.isField(o)&&o.isEditable?this.constants_.MEDIUM_PADDING:o&&Ce.isInlineInput(o)?this.constants_.MEDIUM_LARGE_PADDING:o&&Ce.isStatementInput(o)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Ce.isInput(t)&&(!o||Ce.isStatementInput(o)))return Ce.isField(t)&&t.isEditable?t.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:Ce.isIcon(t)?this.constants_.LARGE_PADDING*2+1:Ce.isHat(t)?this.constants_.NO_PADDING:Ce.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:Ce.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:Ce.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Ce.isInput(t)&&!o){if(Ce.isExternalInput(t))return this.constants_.NO_PADDING;if(Ce.isInlineInput(t))return this.constants_.LARGE_PADDING;if(Ce.isStatementInput(t))return this.constants_.NO_PADDING}if(!Ce.isInput(t)&&o&&Ce.isInput(o)){if(Ce.isField(t)&&t.isEditable){if(Ce.isInlineInput(o)||Ce.isExternalInput(o))return this.constants_.SMALL_PADDING}else{if(Ce.isInlineInput(o)||Ce.isExternalInput(o))return this.constants_.MEDIUM_LARGE_PADDING;if(Ce.isStatementInput(o))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Ce.isIcon(t)&&o&&!Ce.isInput(o))return this.constants_.LARGE_PADDING;if(Ce.isInlineInput(t)&&o&&Ce.isField(o))return o.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Ce.isLeftSquareCorner(t)&&o){if(Ce.isHat(o))return this.constants_.NO_PADDING;if(Ce.isPreviousConnection(o))return o.notchOffset;if(Ce.isNextConnection(o))return o.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(Ce.isLeftRoundedCorner(t)&&o){if(Ce.isPreviousConnection(o))return o.notchOffset-this.constants_.CORNER_RADIUS;if(Ce.isNextConnection(o))return o.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return Ce.isField(t)&&o&&Ce.isField(o)&&t.isEditable===o.isEditable?t.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:o&&Ce.isJaggedEdge(o)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(t,o){return Ce.isTopRow(t)&&Ce.isBottomRow(o)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Ce.isTopRow(t)||Ce.isBottomRow(o)?this.constants_.NO_PADDING:t.hasExternalInput&&o.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&o.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&o.hasStatement||!t.hasStatement&&o.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(t,o){if(Ce.isSpacer(o))return t.yPos+o.height/2;if(Ce.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,Ce.isNextConnection(o)?t+o.height/2:t-o.height/2;if(Ce.isTopRow(t))return Ce.isHat(o)?t.capline-o.height/2:t.capline+o.height/2;let u=t.yPos;return Ce.isField(o)||Ce.isIcon(o)?(u+=o.height/2,(t.hasInlineInput||t.hasStatement)&&o.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(u+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):u=Ce.isInlineInput(o)?u+o.height/2:u+t.height/2,u}alignRowElements_(){if(this.isInline){var t=0,o=new WeakMap,u=null;for(let g=this.rows.length-1,R;R=this.rows[g];g--)o.set(R,t),Ce.isInputRow(R)&&(R.hasStatement&&this.alignStatementRow_(R),u&&u.hasStatement&&R.width<u.width?o.set(R,u.width):t=R.hasStatement?R.width:Math.max(t,R.width),u=R);t=0;for(let g=0,R;R=this.rows[g];g++)R.hasStatement?t=this.getDesiredRowWidth_(R):Ce.isSpacer(R)?R.width=Math.max(t,o.get(R)):(u=R.width,t=Math.max(t,o.get(R))-u,t>0&&this.addAlignmentPadding_(R,t),t=R.width)}else super.alignRowElements_()}getDesiredRowWidth_(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(t)}finalize_(){let t=0,o=0;for(let g=0,R;R=this.rows[g];g++){R.yPos=o,R.xPos=this.startX,o+=R.height,t=Math.max(t,R.widthWithConnectedBlocks);var u=o-this.topRow.ascenderHeight;R===this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(u=this.constants_.MIN_BLOCK_HEIGHT-u,this.bottomRow.height+=u,o+=u),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(u=this.block_.nextConnection.targetBlock())&&(t=Math.max(t,u.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=o-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=o+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},fD=class extends $A{constructor(t,o,u){super(t,o,u),this.constants=u,this.colourDark="#000000",this.svgPathDark=Re(qe.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Re(qe.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)}setHighlightPath(t){this.svgPathLight.setAttribute("d",t)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(t){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(t),this.svgPath.setAttribute("stroke","none")}setStyle(t){this.style=t,this.colourDark=Bl("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(t){super.updateHighlighted(t),this.svgPathLight.style.display=t?"none":"inline"}updateShadow_(t){if(t){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(t){super.updateDisabled_(t),t&&this.svgPath.setAttribute("stroke","none")}},pD=class extends xA{constructor(t){super(t),this.highlightConstants=null}init(t,o){super.init(t,o),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(t,o,u){super.refreshDom(t,o,u),this.getHighlightConstants().init()}makeConstants_(){return new oD}makeRenderInfo_(t){return new dD(this,t)}makeDrawer_(t,o){return new lD(t,o)}makePathObject(t,o){return new fD(t,o,this.getConstants())}makeHighlightConstants_(){return new uD(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};cl("geras",pD);var Qf={};Qf.ConstantProvider=oD,Qf.Drawer=lD,Qf.HighlightConstantProvider=uD,Qf.Highlighter=aD,Qf.InlineInput=cD,Qf.PathObject=fD,Qf.RenderInfo=dD,Qf.Renderer=pD,Qf.StatementInput=hD;var mD=class extends XT{constructor(t,o){super(t,o)}getRenderer(){return this.renderer_}addElemSpacing_(){let t=!1;for(var o=0;o<this.rows.length;o++)if(this.rows[o].hasExternalInput){t=!0;break}for(o=0;o<this.rows.length;o++){const g=this.rows[o];var u=g.elements;if(g.elements=[],g.startsWithElemSpacer()&&g.elements.push(new yn(this.constants_,this.getInRowSpacing_(null,u[0]))),u.length){for(let R=0;R<u.length-1;R++){g.elements.push(u[R]);const k=this.getInRowSpacing_(u[R],u[R+1]);g.elements.push(new yn(this.constants_,k))}g.elements.push(u[u.length-1]),g.endsWithElemSpacer()&&(u=this.getInRowSpacing_(u[u.length-1],null),t&&g.hasDummyInput&&(u+=this.constants_.TAB_WIDTH),g.elements.push(new yn(this.constants_,u)))}}}getInRowSpacing_(t,o){if(!t)return o&&Ce.isField(o)&&o.isEditable?this.constants_.MEDIUM_PADDING:o&&Ce.isInlineInput(o)?this.constants_.MEDIUM_LARGE_PADDING:o&&Ce.isStatementInput(o)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Ce.isInput(t)&&!o)return Ce.isField(t)&&t.isEditable?t.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:Ce.isIcon(t)?this.constants_.LARGE_PADDING*2+1:Ce.isHat(t)?this.constants_.NO_PADDING:Ce.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:Ce.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:Ce.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Ce.isInput(t)&&!o){if(Ce.isExternalInput(t))return this.constants_.NO_PADDING;if(Ce.isInlineInput(t))return this.constants_.LARGE_PADDING;if(Ce.isStatementInput(t))return this.constants_.NO_PADDING}if(!Ce.isInput(t)&&o&&Ce.isInput(o)){if(Ce.isField(t)&&t.isEditable){if(Ce.isInlineInput(o)||Ce.isExternalInput(o))return this.constants_.SMALL_PADDING}else{if(Ce.isInlineInput(o)||Ce.isExternalInput(o))return this.constants_.MEDIUM_LARGE_PADDING;if(Ce.isStatementInput(o))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Ce.isIcon(t)&&o&&!Ce.isInput(o))return this.constants_.LARGE_PADDING;if(Ce.isInlineInput(t)&&o&&Ce.isField(o))return o.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Ce.isLeftSquareCorner(t)&&o){if(Ce.isHat(o))return this.constants_.NO_PADDING;if(Ce.isPreviousConnection(o)||Ce.isNextConnection(o))return o.notchOffset}return Ce.isLeftRoundedCorner(t)&&o?o.notchOffset-this.constants_.CORNER_RADIUS:Ce.isField(t)&&o&&Ce.isField(o)&&t.isEditable===o.isEditable?t.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:o&&Ce.isJaggedEdge(o)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(t,o){return Ce.isTopRow(t)&&Ce.isBottomRow(o)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Ce.isTopRow(t)||Ce.isBottomRow(o)?this.constants_.NO_PADDING:t.hasExternalInput&&o.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&o.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&o.hasStatement||t.hasDummyInput||o.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(t,o){if(Ce.isSpacer(o))return t.yPos+o.height/2;if(Ce.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,Ce.isNextConnection(o)?t+o.height/2:t-o.height/2;if(Ce.isTopRow(t))return Ce.isHat(o)?t.capline-o.height/2:t.capline+o.height/2;let u=t.yPos;return u=Ce.isField(o)&&t.hasStatement?u+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+o.height/2):u+t.height/2}finalize_(){let t=0,o=0;for(var u=0;u<this.rows.length;u++){const R=this.rows[u];R.yPos=o,R.xPos=this.startX,o+=R.height,t=Math.max(t,R.widthWithConnectedBlocks);var g=o-this.topRow.ascenderHeight;R===this.bottomRow&&g<this.constants_.MIN_BLOCK_HEIGHT&&(g=this.constants_.MIN_BLOCK_HEIGHT-g,this.bottomRow.height+=g,o+=g),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(u=this.block_.nextConnection.targetBlock())&&(t=Math.max(t,u.getHeightWidth().width)),this.bottomRow.baseline=o-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=o,this.startY=this.topRow.capline}},gD=class extends xA{constructor(t){super(t)}makeRenderInfo_(t){return new mD(this,t)}};cl("thrasos",gD);var k1={};k1.RenderInfo=mD,k1.Renderer=gD;var CV={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},MV={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},RV=new C0("zelos",CV,MV),wV={Classic:k_,Zelos:RV},P1=class{constructor(t,o,u){this.id_=t.toolboxitemid||G(),this.level_=(this.parent_=u||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=o,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(t){}getFocusableElement(){const t=this.getDiv();if(!t)throw Error("Trying to access toolbox item before DOM is initialized.");if(!(t instanceof HTMLElement))throw Error("Toolbox item div is unexpectedly not an HTML element.");return t}getFocusableTree(){return this.parentToolbox_}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}},Hd=class extends P1{constructor(t,o,u){super(t,o,u),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategoryContainer",row:"blocklyToolboxCategory",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyToolboxCategoryIcon",label:"blocklyToolboxCategoryLabel",contents:"blocklyToolboxCategoryGroup",selected:"blocklyToolboxSelected",openicon:"blocklyToolboxCategoryIconOpen",closedicon:"blocklyToolboxCategoryIconClosed"}}parseContents_(t){if("custom"in t)this.flyoutItems_=t.custom;else if(t=t.contents)for(let o=0;o<t.length;o++){const u=t[o];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(u)}}parseCategoryDef_(t){this.name_="name"in t?mi(t.name):"",this.colour_=this.getColour_(t),Object.assign(this.cssConfig_,t.cssconfig||t.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Mn(this.htmlDiv_,Ns.TREEITEM),Xn(this.htmlDiv_,gs.SELECTED,!1),Xn(this.htmlDiv_,gs.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Mn(this.iconDom_,Ns.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const t=this.labelDom_.getAttribute("id");return t&&Xn(this.htmlDiv_,gs.LABELLEDBY,t),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const t=document.createElement("div");t.tabIndex=-1,t.id=this.getId();const o=this.cssConfig_.container;return o&&Ye(t,o),t}createRowContainer_(){const t=document.createElement("div");var o=this.cssConfig_.row;return o&&Ye(t,o),o=`${Hd.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?t.style.paddingRight=o:t.style.paddingLeft=o,t}createRowContentsContainer_(){const t=document.createElement("div"),o=this.cssConfig_.rowcontentcontainer;return o&&Ye(t,o),t}createIconDom_(){const t=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const o=this.cssConfig_.icon;o&&Ye(t,o)}return t.style.display="inline-block",t}createLabelDom_(t){const o=document.createElement("span");return o.setAttribute("id",this.getId()+".label"),o.textContent=t,(t=this.cssConfig_.label)&&Ye(o,t),o}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(t){t&&(t=Hd.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)}getColour_(t){const o=t.categorystyle||t.categoryStyle;if((t=t.colour)&&o)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(o)return this.getColourfromStyle(o);if(t)return this.parseColour(t)}return""}getColourfromStyle(t){var o=this.workspace_.getTheme();if(t&&o){if((o=o.categoryStyles[t])&&o.colour)return this.parseColour(o.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(t){if(t=mi(t),t==null||t==="")return"";var o=Number(t);return isNaN(o)?(o=Bo(t))?o:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):br(o)}openIcon_(t){if(t){var o=this.cssConfig_.closedicon;o&&J(t,o),(o=this.cssConfig_.openicon)&&Ye(t,o)}}closeIcon_(t){if(t){var o=this.cssConfig_.openicon;o&&J(t,o),(o=this.cssConfig_.closedicon)&&Ye(t,o)}}setVisible_(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let t=this;for(;t.getParent();)if(t=t.getParent(),!t.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(t){}setSelected(t){if(this.rowDiv_){var o=this.cssConfig_.selected;if(t){const u=this.parseColour(Hd.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||u,o&&Ye(this.rowDiv_,o)}else this.rowDiv_.style.backgroundColor="",o&&Se(this.rowDiv_,o);Xn(this.htmlDiv_,gs.SELECTED,t)}}setDisabled(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",`${t}`),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(t){this.flyoutItems_=[],this.toolboxItemDef_=typeof t=="string"?{kind:this.toolboxItemDef_.kind,custom:t,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Te(t),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){we(this.htmlDiv_)}};Hd.registrationName="category",Hd.nestedPadding=19,Hd.borderWidth=8,Hd.defaultBackgroundColour="#57e",Wt(`
.blocklyToolboxCategory:not(.blocklyToolboxSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolbox[layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 5px 1px 0;
}

.blocklyToolbox[dir="RTL"][layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 0 1px 5px;
}

.blocklyToolboxCategory {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategory {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyToolboxCategoryIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyToolboxCategoryIconClosed {
  background-position: -32px -1px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategoryIconClosed {
  background-position: 0 -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: -32px -17px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: 0 -17px;
}

.blocklyToolboxCategoryIconOpen {
  background-position: -16px -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconOpen {
  background-position: -16px -17px;
}

.blocklyToolboxCategoryLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyToolboxCategoryLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxSelected .blocklyToolboxCategoryLabel {
  color: #fff;
}
`),i(Et.TOOLBOX_ITEM,Hd.registrationName,Hd);var ZT=class extends P1{constructor(t,o){super(t,o),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,t.cssconfig||t.cssConfig)}init(){this.createDom_()}createDom_(){const t=document.createElement("div");t.tabIndex=-1,t.id=this.getId();const o=this.cssConfig_.container;return o&&Ye(t,o),this.htmlDiv=t}getDiv(){return this.htmlDiv}dispose(){we(this.htmlDiv)}};ZT.registrationName="sep",Wt(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolbox[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Et.TOOLBOX_ITEM,ZT.registrationName,ZT);var kb=class extends Hd{constructor(t,o,u){super(t,o,u),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const t=super.makeDefaultCssConfig_();return t.contents="blocklyToolboxCategoryGroup",t}parseContents_(t){if("custom"in t)this.flyoutItems_=t.custom;else{const o=t.contents;if(o){this.flyoutItems_=[],t=!0;for(let u=0;u<o.length;u++){const g=o[u];!h(Et.TOOLBOX_ITEM,g.kind)||g.kind.toLowerCase()===ZT.registrationName&&t?(this.flyoutItems_.push(g),t=!0):(this.createToolboxItem(g),t=!1)}}}}createToolboxItem(t){let o=t.kind;o.toUpperCase()==="CATEGORY"&&ze(t)&&(o=kb.registrationName),t=new(f(Et.TOOLBOX_ITEM,o))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),Mn(this.subcategoriesDiv_,Ns.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Xn(this.htmlDiv_,gs.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const t=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const o=this.cssConfig_.icon;o&&Ye(t,o),t.style.visibility="visible"}return t.style.display="inline-block",t}createSubCategoriesDom_(t){const o=document.createElement("div");o.style.display="none";var u=this.cssConfig_.contents;for(u&&Ye(o,u),u=0;u<t.length;u++){const g=t[u];g.init();const R=g.getDiv();if(o.appendChild(R),g.getClickTarget){let k;(k=g.getClickTarget())==null||k.setAttribute("id",g.getId())}}return o}setExpanded(t){if(this.expanded_!==t){if(this.expanded_=t)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let o;(o=this.parentToolbox_.getFlyout())==null||o.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Xn(this.htmlDiv_,gs.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(t){this.htmlDiv_.style.display=t?"block":"none";const o=this.getChildToolboxItems();for(let u=0;u<o.length;u++)o[u].setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(t){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};kb.registrationName="collapsibleCategory",i(Et.TOOLBOX_ITEM,kb.registrationName,kb);var _D=class extends Mb{constructor(t){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.height_=this.width_=0,this.flyout=null,this.contents=new Map,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[],this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout=t.options.horizontalLayout,this.RTL=t.options.RTL,this.toolboxPosition=t.options.toolboxPosition}onShortcut(t){return!1}init(){var t=this.workspace_;const o=t.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_);const u=this.flyout.createDom("svg");Ye(u,"blocklyToolboxFlyout"),Ie(u,o),this.setVisible(!0),this.flyout.init(t),this.render(this.toolboxDef_),t=t.getThemeManager(),t.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:Hi.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[Hi.Capability.AUTOHIDEABLE,Hi.Capability.DELETE_AREA,Hi.Capability.DRAG_TARGET]}),n.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!0)}createDom_(t){t=t.getParentSvg();const o=this.createContainer_();return o.id=G(),this.contentsDiv_=this.createContentsContainer_(),Mn(this.contentsDiv_,Ns.TREE),o.appendChild(this.contentsDiv_),t.parentNode.insertBefore(o,t),this.attachEvents_(o,this.contentsDiv_),o}createContainer_(){const t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),Ye(t,"blocklyToolbox"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t}createContentsContainer_(){const t=document.createElement("div");return Ye(t,"blocklyToolboxCategoryGroup"),this.isHorizontal()&&(t.style.flexDirection="row"),t}attachEvents_(t,o){t=w(t,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(t),o=w(o,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(o)}onClick_(t){if(F(t)||t.target===this.HtmlDiv)H().hideChaff(!1);else{var o=t.target.getAttribute("id");o&&(o=this.getToolboxItemById(o),o.isSelectable()&&(this.setSelectedItem(o),o.onClick(t))),H().hideChaff(!0)}$()}onKeyDown_(t){let o=!1;switch(t.key){case"ArrowDown":o=this.selectNext();break;case"ArrowUp":o=this.selectPrevious();break;case"ArrowLeft":o=this.selectParent();break;case"ArrowRight":o=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),o=!0);break;default:o=!1}!o&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(o=this.selectedItem_.onKeyDown(t)),o&&t.preventDefault()}createFlyout_(){const t=this.workspace_,o=t.copyOptionsForFlyout();return o.toolboxPosition=t.options.toolboxPosition,new(t.horizontalLayout?T(Et.FLYOUTS_HORIZONTAL_TOOLBOX,t.options,!0):T(Et.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(o)}render(t){this.toolboxDef_=t,this.contents.forEach(o=>o.dispose()),this.contents.clear(),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()}renderContents_(t){const o=document.createDocumentFragment();for(let u=0;u<t.length;u++)this.createToolboxItem(t[u],o);this.contentsDiv_.appendChild(o)}createToolboxItem(t,o){var u=t.kind;u.toUpperCase()==="CATEGORY"&&ze(t)&&(u=kb.registrationName),(u=f(Et.TOOLBOX_ITEM,u.toLowerCase()))&&(t=new u(t,this),t.init(),this.addToolboxItem_(t),(u=t.getDiv())&&o.appendChild(u),t.getClickTarget()&&t.getClickTarget().setAttribute("id",t.getId()))}addToolboxItem_(t){if(this.contents.set(t.getId(),t),t.isCollapsible()){t=t.getChildToolboxItems();for(let o=0;o<t.length;o++)this.addToolboxItem_(t[o])}}getToolboxItems(){return[...this.contents.values()]}addStyle(t){t&&this.HtmlDiv&&Ye(this.HtmlDiv,t)}removeStyle(t){t&&this.HtmlDiv&&Se(this.HtmlDiv,t)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect();const o=t.top,u=o+t.height,g=t.left;return t=g+t.width,this.toolboxPosition===Kn.TOP?new pn(-1e7,u,-1e7,1e7):this.toolboxPosition===Kn.BOTTOM?new pn(o,1e7,-1e7,1e7):this.toolboxPosition===Kn.LEFT?new pn(-1e7,1e7,-1e7,t):new pn(-1e7,1e7,g,1e7)}wouldDelete(t){return t instanceof Zi?this.updateWouldDelete_(!t.getParent()&&t.isDeletable()):this.updateWouldDelete_(Oa(t)&&t.isDeletable()),this.wouldDelete_}onDragEnter(t){this.updateCursorDeleteStyle_(!0)}onDragExit(t){this.updateCursorDeleteStyle_(!1)}onDrop(t){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(t){const o=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(o):this.removeStyle(o)}getToolboxItemById(t){return this.contents.get(t)||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const t=this.workspace_.getMetrics(),o=this.HtmlDiv;o&&(this.horizontalLayout?(o.style.left="0",o.style.height="auto",o.style.width="100%",this.height_=o.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition===Kn.TOP?o.style.top="0":o.style.bottom="0"):(this.toolboxPosition===Kn.RIGHT?o.style.right="0":o.style.left="0",o.style.height="100%",this.width_=o.offsetWidth,this.height_=t.viewHeight),this.flyout.position())}handleToolboxItemResize(){const t=this.workspace_;var o=this.HtmlDiv.getBoundingClientRect();const u=this.getFlyout(),g=this.toolboxPosition===Kn.LEFT?t.scrollX+o.width+(u!=null&&u.isVisible()?u.getWidth():0):t.scrollX;o=this.toolboxPosition===Kn.TOP?t.scrollY+o.height+(u!=null&&u.isVisible()?u.getHeight():0):t.scrollY,t.translate(g,o),Ze(t)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){this.contents.forEach(t=>{t.refreshTheme&&t.refreshTheme()})}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())}autoHide(t){!t&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(t){const o=this.selectedItem_;!t&&!o||t&&!Td(t)||(this.shouldDeselectItem_(o,t)&&o!==null&&this.deselectItem_(o),this.shouldSelectItem_(o,t)&&t!==null&&this.selectItem_(o,t),this.updateFlyout_(o,t),this.fireSelectEvent(o,t))}shouldDeselectItem_(t,o){return t!==null&&(!t.isCollapsible()||t!==o)}shouldSelectItem_(t,o){return o!==null&&o!==t}deselectItem_(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),Xn(this.contentsDiv_,gs.ACTIVEDESCENDANT,"")}selectItem_(t,o){this.selectedItem_=o,this.previouslySelectedItem_=t,o.setSelected(!0),Xn(this.contentsDiv_,gs.ACTIVEDESCENDANT,o.getId())}selectItemByPosition(t){(t=this.getToolboxItems()[t])&&this.setSelectedItem(t)}updateFlyout_(t,o){o&&(t!==o||o.isCollapsible())&&o.getContents().length?(this.flyout.show(o.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(t,o){const u=t&&t.getName();let g=o&&o.getName();t===o&&(g=null),t=new(Ke(tt.TOOLBOX_ITEM_SELECT))(u,g,this.workspace_.id),K(t)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const t=this.selectedItem_;return t.isExpanded()?this.selectNext():t.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;const t=[...this.contents.values()];let o=t.indexOf(this.selectedItem_)+1;if(o>-1&&o<t.length){let u=t[o];for(;u&&!u.isSelectable();)u=t[++o];if(u&&u.isSelectable())return this.setSelectedItem(u),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;const t=[...this.contents.values()];let o=t.indexOf(this.selectedItem_)-1;if(o>-1&&o<t.length){let u=t[o];for(;u&&!u.isSelectable();)u=t[--o];if(u&&u.isSelectable())return this.setSelectedItem(u),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose(),this.contents.forEach(t=>t.dispose());for(let t=0;t<this.boundEvents_.length;t++)O(this.boundEvents_[t]);this.boundEvents_=[],this.contents.clear(),this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),we(this.HtmlDiv)),n.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}getFocusableElement(){if(!this.HtmlDiv)throw Error("Toolbox DOM has not yet been created.");return this.HtmlDiv}getFocusableTree(){return this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(t){if(!t||t===this){let o;return(o=this.getToolboxItems().find(u=>u.isSelectable()))!=null?o:null}return null}getNestedTrees(){return[]}lookUpFocusableNode(t){return this.getToolboxItemById(t)}onTreeFocus(t,o){t!==this?this.getSelectedItem()!==t&&this.setSelectedItem(t):this.clearSelection()}onTreeBlur(t){let o;t&&t===((o=this.flyout)==null?void 0:o.getWorkspace())||(this.clearSelection(),this.flyout&&Xi(this.flyout)&&this.flyout.autoHide(!1))}};Wt(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolbox {
  box-sizing: border-box;
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxCategoryGroup {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxCategoryGroup:focus {
  outline: none;
}
`),i(Et.TOOLBOX,ri,_D);var IV="12.2.0",OV=un.INPUT_VALUE,NV=un.OUTPUT_VALUE,LV=un.NEXT_STATEMENT,DV=un.PREVIOUS_STATEMENT,BV=Kn.TOP,kV=Kn.BOTTOM,PV=Kn.LEFT,UV=Kn.RIGHT;Ob.prototype.newBlock=function(t,o){return new jf(this,t,o)},Sl.prototype.newBlock=function(t,o){return new Zi(this,t,o)},Ob.prototype.newComment=function(t){return new sg(this,t)},Sl.prototype.newComment=function(t){return new vh(this,t)},Sl.newTrashcan=function(t){return new fL(t)},Od.prototype.newWorkspaceSvg=function(t){return new Sl(t)},n.Names$$module$build$src$core$names.prototype.populateProcedures=function(t){t=Hs(t),t=t[0].concat(t[1]);for(let o=0;o<t.length;o++)this.getName(t[o][0],n.Names$$module$build$src$core$names.NameType.PROCEDURE)};var at={};return at.Block=jf,at.BlockFlyoutInflater=rD,at.BlockNavigationPolicy=kd,at.BlockSvg=Zi,at.Blocks=As,at.ButtonFlyoutInflater=sD,at.COLLAPSED_FIELD_NAME=Hu,at.COLLAPSED_INPUT_NAME=fa,at.COLLAPSE_CHARS=G_,at.CodeGenerator=n.CodeGenerator$$module$build$src$core$generator,at.CollapsibleToolboxCategory=kb,at.ComponentManager=Hi,at.Connection=Ci,at.ConnectionChecker=uL,at.ConnectionDB=A0,at.ConnectionNavigationPolicy=lg,at.ConnectionType=un,at.ContextMenu=S0,at.ContextMenuItems=Qo,at.ContextMenuRegistry=oi,at.Css=cs,at.DELETE_VARIABLE_ID=DT,at.DeleteArea=Mb,at.DragTarget=vA,at.DropDownDiv=Ar,at.Events=an,at.Extensions=Wu,at.Field=Ji,at.FieldCheckbox=ev,at.FieldDropdown=Xs,at.FieldImage=Q_,at.FieldLabel=Nd,at.FieldLabelSerializable=IL,at.FieldNavigationPolicy=Pd,at.FieldNumber=y1,at.FieldTextInput=n.FieldTextInput$$module$build$src$core$field_textinput,at.FieldVariable=KT,at.Flyout=R0,at.FlyoutButton=Zo,at.FlyoutButtonNavigationPolicy=UT,at.FlyoutItem=Yf,at.FlyoutMetricsManager=Y_,at.FlyoutNavigationPolicy=Rb,at.FlyoutNavigator=HT,at.FlyoutSeparator=Nc,at.FlyoutSeparatorNavigationPolicy=Bd,at.FocusManager=ni,at.FocusableTreeTraverser=$s,at.Generator=n.CodeGenerator$$module$build$src$core$generator,at.Gesture=Z_,at.Grid=zT,at.HorizontalFlyout=wL,at.INPUT_VALUE=OV,at.Input=og,at.InsertionMarkerPreviewer=CL,at.KeyboardNavigationController=q_,at.LabelFlyoutInflater=bL,at.LineCursor=d,at.Marker=c,at.MarkerManager=b,at.Menu=_s,at.MenuItem=Jo,at.MetricsManager=j_,at.Msg=n.Msg$$module$build$src$core$msg,at.NEXT_STATEMENT=LV,at.Names=n.Names$$module$build$src$core$names,at.Navigator=FT,at.OPPOSITE_TYPE=Xf,at.OUTPUT_VALUE=NV,at.Options=bh,at.PREVIOUS_STATEMENT=DV,at.PROCEDURE_CATEGORY_NAME=Dt,at.Procedures=it,at.RENAME_VARIABLE_ID=xb,at.RenderedConnection=$r,at.Scrollbar=rs,at.ScrollbarPair=cg,at.SeparatorFlyoutInflater=yA,at.ShortcutItems=qf,at.ShortcutRegistry=Ii,at.TOOLBOX_AT_BOTTOM=kV,at.TOOLBOX_AT_LEFT=PV,at.TOOLBOX_AT_RIGHT=UV,at.TOOLBOX_AT_TOP=BV,at.Theme=C0,at.ThemeManager=lL,at.Themes=wV,at.Toast=Zl,at.Toolbox=_D,at.ToolboxCategory=Hd,at.ToolboxItem=P1,at.ToolboxSeparator=ZT,at.Tooltip=iu,at.Touch=hr,at.Trashcan=fL,at.UnattachedFieldError=rr,at.VARIABLE_CATEGORY_NAME=Mc,at.VARIABLE_DYNAMIC_CATEGORY_NAME=u1,at.VERSION=IV,at.VariableMap=dL,at.VariableModel=hL,at.Variables=vs,at.VariablesDynamic=dg,at.VerticalFlyout=b1,at.WidgetDiv=yl,at.Workspace=Ob,at.WorkspaceAudio=cL,at.WorkspaceDragger=hg,at.WorkspaceNavigationPolicy=ug,at.WorkspaceSvg=Sl,at.Xml=_a,at.ZoomControls=$_,at.blockAnimations=V_,at.blockRendering=bs,at.browserEvents=Wo,at.bubbles=JT,at.bumpObjects=W_,at.clipboard=Fd,at.comments=fg,at.common=Os,at.config=n.config$$module$build$src$core$config,at.constants=Ni,at.defineBlocksWithJsonArray=Mt,at.dialog=Ao,at.dragging=qT,at.fieldRegistry=x0,at.geras=Qf,at.getFocusManager=n.getFocusManager$$module$build$src$core$focus_manager,at.getMainWorkspace=H,at.getSelected=ve,at.hasBubble=ac,at.hideChaff=f0,at.icons=nt,at.inject=Um,at.inputs=pg,at.isCopyable=Lf,at.isDeletable=Oa,at.isDraggable=jn,at.isIcon=Am,at.isObservable=zr,at.isPaster=Hf,at.isRenderedElement=Gf,at.isSelectable=Xe,at.isSerializable=Rn,at.isVariableBackedParameterModel=Yh,at.keyboardNavigationController=J_,at.layers=fA,at.navigateBlock=Br,at.navigateStacks=Nu,at.procedures=it,at.registry=bo,at.renderManagement=Eo,at.serialization=$V,at.setLocale=mr,at.setParentContainer=Me,at.svgResize=Ze,at.thrasos=k1,at.uiPosition=Pr,at.utils=xs,at.zelos=Zf,at.__namespace__=n,at})}(_x)),_x.exports}var vx={exports:{}},uce=vx.exports,nU;function cce(){return nU||(nU=1,function(s,e){(function(n,i){s.exports=i()})(uce,function(){var n=n||{Msg:Object.create(null)};return n.Msg.ADD_COMMENT="Add Comment",n.Msg.ALT_KEY="Alt",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CHROME_OS="ChromeOS",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.CLOSE="Close",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.COMMAND_KEY="⌘ Command",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.CONTROL_KEY="Ctrl",n.Msg.COPY_SHORTCUT="Copy",n.Msg.CUT_SHORTCUT="Cut",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DIALOG_CANCEL="Cancel",n.Msg.DIALOG_OK="OK",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",n.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",n.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",n.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",n.Msg.LINUX="Linux",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MAC_OS="macOS",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="÷",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="×",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.MOVE_BLOCK="Move Block",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.OPTION_KEY="⌥ Option",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PASTE_SHORTCUT="Paste",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",n.Msg.SHORTCUTS_EDITING="Editing",n.Msg.SHORTCUTS_GENERAL="General",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNKNOWN="Unknown",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",n.Msg.WINDOWS="Windows",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_HELPURL=n.Msg.LISTS_INDEX_OF_HELPURL,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.MATH_HUE="230",n.Msg.LOOPS_HUE="120",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.VARIABLES_HUE="330",n.Msg.TEXTS_HUE="160",n.Msg.PROCEDURES_HUE="290",n.Msg.COLOUR_HUE="20",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg})}(vx)),vx.exports}var bx={exports:{}},hce=bx.exports,iU;function dce(){return iU||(iU=1,function(s,e){(function(n,i){s.exports=i(XN())})(hce,function(n){var i=n.__namespace__,r=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),a={customContextMenu:function(H){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(ve={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},re=this.getField("VAR").getText(),re={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",re),enabled:!0,callback:h(this)},H.unshift(ve),H.unshift(re));else{if(this.type==="variables_get_dynamic")var oe="variables_set_dynamic",ve=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else oe="variables_get_dynamic",ve=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var re=this.getField("VAR");oe={type:oe,fields:{VAR:re.saveState(!0)}},H.push({enabled:this.workspace.remainingCapacity()>0,text:ve.replace("%1",re.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,oe)})}},onchange:function(H){H=this.getFieldValue("VAR"),H=i.getVariable$$module$build$src$core$variables(this.workspace,H),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(H.getType()):this.getInput("VALUE").connection.setCheck(H.getType())}},l=function(H){return function(){const oe=H.workspace,ve=H.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(oe,ve)}},h=function(H){return function(){const oe=H.getField("VAR").getVariable();oe&&i.deleteVariable$$module$build$src$core$variables(oe.getWorkspace(),oe,H)}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",a),i.defineBlocks$$module$build$src$core$common(r);var f={blocks:r},p=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),v={customContextMenu:function(H){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(ve={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:T(this)},re=this.getField("VAR").getText(),re={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",re),enabled:!0,callback:y(this)},H.unshift(ve),H.unshift(re));else{if(this.type==="variables_get")var oe="variables_set",ve=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else oe="variables_get",ve=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var re=this.getField("VAR");oe={type:oe,fields:{VAR:re.saveState(!0)}},H.push({enabled:this.workspace.remainingCapacity()>0,text:ve.replace("%1",re.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,oe)})}}},T=function(H){return function(){const oe=H.workspace,ve=H.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(oe,ve)}},y=function(H){return function(){const oe=H.getField("VAR").getVariable();oe&&i.deleteVariable$$module$build$src$core$variables(oe.getWorkspace(),oe,H)}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",v),i.defineBlocks$$module$build$src$core$common(p);var S={blocks:p},$=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),M={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const H=oe=>{const ve=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+oe]});return ve.setValidator(function(re){const ye=this.getValue();re=re==="FROM_START"||re==="FROM_END",re!==(ye==="FROM_START"||ye==="FROM_END")&&this.getSourceBlock().updateAt_(oe,re)}),ve};this.appendDummyInput("WHERE1_INPUT").appendField(H(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(H(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");var oe=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return H.setAttribute("at1",`${oe}`),oe=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,H.setAttribute("at2",`${oe}`),H},domToMutation:function(H){const oe=H.getAttribute("at1")==="true";H=H.getAttribute("at2")==="true",this.updateAt_(1,oe),this.updateAt_(2,H)},updateAt_:function(H,oe){this.removeInput("AT"+H),this.removeInput("ORDINAL"+H,!0),oe?(this.appendValueInput("AT"+H).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+H).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+H),H===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),H===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};$.text_getSubstring=M,$.text_changeCase={init:function(){const H=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},$.text_trim={init:function(){const H=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},$.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var C={updateType_:function(H){this.outputConnection.setCheck(H==="NUMBER"?"Number":"String")},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("type",this.getFieldValue("TYPE")),H},domToMutation:function(H){this.updateType_(H.getAttribute("type"))}};$.text_prompt_ext=Object.assign({},C,{init:function(){var H=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),H.setValidator(oe=>{this.updateType_(oe)}),this.appendValueInput("TEXT").appendField(H,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),$.text_prompt=Object.assign({},C,{init:function(){this.mixin(E);var H=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),H.setValidator(oe=>{this.updateType_(oe)}),this.appendDummyInput().appendField(H,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),$.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},$.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},$.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var E={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(H){for(let oe=0,ve;ve=this.inputList[oe];oe++)for(let re=0,ye;ye=ve.fieldRow[re];re++)if(H===ye.name){ve.insertFieldAt(re,this.newQuote_(!0)),ve.insertFieldAt(re+2,this.newQuote_(!1));return}console.warn('field named "'+H+'" not found in '+this.toDevString())},newQuote_:function(H){return H=this.RTL?!H:H,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:H?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:H?"“":"”"})}},w=function(){this.mixin(E),this.quoteField_("TEXT")},I={itemCount_:0,mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("items",`${this.itemCount_}`),H},domToMutation:function(H){this.itemCount_=parseInt(H.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(H){this.itemCount_=H.itemCount,this.updateShape_()},decompose:function(H){const oe=H.newBlock("text_create_join_container");oe.initSvg();let ve=oe.getInput("STACK").connection;for(let re=0;re<this.itemCount_;re++){const ye=H.newBlock("text_create_join_item");ye.initSvg(),ve.connect(ye.previousConnection),ve=ye.nextConnection}return oe},compose:function(H){var oe=H.getInputTargetBlock("STACK");for(H=[];oe;)oe.isInsertionMarker()||H.push(oe.valueConnection_),oe=oe.getNextBlock();for(oe=0;oe<this.itemCount_;oe++){const ve=this.getInput("ADD"+oe).connection.targetConnection;ve&&!H.includes(ve)&&ve.disconnect()}for(this.itemCount_=H.length,this.updateShape_(),oe=0;oe<this.itemCount_;oe++){let ve;(ve=H[oe])==null||ve.reconnect(this,"ADD"+oe)}},saveConnections:function(H){H=H.getInputTargetBlock("STACK");let oe=0;for(;H;){if(H.isInsertionMarker()){H=H.getNextBlock();continue}const ve=this.getInput("ADD"+oe);H.valueConnection_=ve&&ve.connection.targetConnection,H=H.getNextBlock(),oe++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var H=0;H<this.itemCount_;H++)if(!this.getInput("ADD"+H)){const oe=this.appendValueInput("ADD"+H).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);H===0&&oe.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(H=this.itemCount_;this.getInput("ADD"+H);H++)this.removeInput("ADD"+H)}},O=function(){this.mixin(E),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var P=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},F={isAt_:!1,mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("at",`${this.isAt_}`),H},domToMutation:function(H){H=H.getAttribute("at")!=="false",this.updateAt_(H)},updateAt_:function(H){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),H&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=H}},V=function(){this.getField("WHERE").setValidator(function(H){H=H==="FROM_START"||H==="FROM_END";const oe=this.getSourceBlock();H!==oe.isAt_&&oe.updateAt_(H)}),this.updateAt_(!0),this.setTooltip(()=>{var H=this.getFieldValue("WHERE");let oe=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(H==="FROM_START"||H==="FROM_END")&&(H=H==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(oe+="  "+H.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),oe})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",P),i.register$$module$build$src$core$extensions("text_quotes",w),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",E),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",I,O),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",F,V),i.defineBlocks$$module$build$src$core$common($);var X={blocks:$},G={},D={setStatements_:function(H){this.hasStatements_!==H&&(H?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=H)},updateParams_:function(){let H="";this.arguments_.length&&(H=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(H,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(H){const oe=i.createElement$$module$build$src$core$utils$xml("mutation");H&&oe.setAttribute("name",this.getFieldValue("NAME"));for(let ve=0;ve<this.argumentVarModels_.length;ve++){const re=i.createElement$$module$build$src$core$utils$xml("arg"),ye=this.argumentVarModels_[ve];re.setAttribute("name",ye.getName()),re.setAttribute("varid",ye.getId()),H&&this.paramIds_&&re.setAttribute("paramId",this.paramIds_[ve]),oe.appendChild(re)}return this.hasStatements_||oe.setAttribute("statements","false"),oe},domToMutation:function(H){this.arguments_=[],this.argumentVarModels_=[];for(let ve=0,re;re=H.childNodes[ve];ve++)if(re.nodeName.toLowerCase()==="arg"){var oe=re;const ye=oe.getAttribute("name");oe=oe.getAttribute("varid")||oe.getAttribute("varId"),this.arguments_.push(ye),oe=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,oe,ye,""),oe!==null?this.argumentVarModels_.push(oe):console.log(`Failed to create a variable named "${ye}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(H.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const H=Object.create(null);if(this.argumentVarModels_.length){H.params=[];for(let oe=0;oe<this.argumentVarModels_.length;oe++)H.params.push({name:this.argumentVarModels_[oe].getName(),id:this.argumentVarModels_[oe].getId()})}return this.hasStatements_||(H.hasStatements=!1),H},loadExtraState:function(H){if(this.arguments_=[],this.argumentVarModels_=[],H.params)for(let ve=0;ve<H.params.length;ve++){var oe=H.params[ve];oe=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,oe.id,oe.name,""),this.arguments_.push(oe.getName()),this.argumentVarModels_.push(oe)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(H.hasStatements!==!1)},decompose:function(H){const oe=i.createElement$$module$build$src$core$utils$xml("block");oe.setAttribute("type","procedures_mutatorcontainer");var ve=i.createElement$$module$build$src$core$utils$xml("statement");ve.setAttribute("name","STACK"),oe.appendChild(ve);for(let ye=0;ye<this.arguments_.length;ye++){const lt=i.createElement$$module$build$src$core$utils$xml("block");lt.setAttribute("type","procedures_mutatorarg");var re=i.createElement$$module$build$src$core$utils$xml("field");re.setAttribute("name","NAME");const Me=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[ye]);re.appendChild(Me),lt.appendChild(re),re=i.createElement$$module$build$src$core$utils$xml("next"),lt.appendChild(re),ve.appendChild(lt),ve=re}return H=i.domToBlock$$module$build$src$core$xml(oe,H),this.type==="procedures_defreturn"?H.setFieldValue(this.hasStatements_,"STATEMENTS"):H.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),H},compose:function(H){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let oe=H.getInputTargetBlock("STACK");for(;oe&&!oe.isInsertionMarker();){var ve=oe.getFieldValue("NAME");this.arguments_.push(ve),ve=this.workspace.getVariable(ve,""),this.argumentVarModels_.push(ve),this.paramIds_.push(oe.id),oe=oe.nextConnection&&oe.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),H=H.getFieldValue("STATEMENTS"),H!==null&&(H=H==="TRUE",this.hasStatements_!==H))if(H){this.setStatements_(!0);var re;(re=this.statementConnection_)==null||re.reconnect(this,"STACK"),this.statementConnection_=null}else re=this.getInput("STACK").connection,(this.statementConnection_=re.targetConnection)&&(re=re.targetBlock(),re.unplug(),re.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(H,oe){var ve=this.workspace.getVariableById(H);if(ve.getType()===""){ve=ve.getName(),oe=this.workspace.getVariableById(oe);var re=!1;for(let ye=0;ye<this.argumentVarModels_.length;ye++)this.argumentVarModels_[ye].getId()===H&&(this.arguments_[ye]=oe.getName(),this.argumentVarModels_[ye]=oe,re=!0);re&&(this.displayRenamedVar_(ve,oe.getName()),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(H){const oe=H.getName();let ve=!1,re;for(let ye=0;ye<this.argumentVarModels_.length;ye++)this.argumentVarModels_[ye].getId()===H.getId()&&(re=this.arguments_[ye],this.arguments_[ye]=oe,ve=!0);ve&&(this.displayRenamedVar_(re,oe),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(H,oe){this.updateParams_();var ve=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(ve&&ve.bubbleIsVisible()){ve=ve.getWorkspace().getAllBlocks(!1);for(let re=0,ye;ye=ve[re];re++)ye.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(H,ye.getFieldValue("NAME"))&&ye.setFieldValue(oe,"NAME")}},customContextMenu:function(H){if(!this.isInFlyout){var oe=this.getFieldValue("NAME"),ve={type:this.callType_,extraState:{name:oe,params:this.arguments_}};if(H.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",oe),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ve)}),!this.isCollapsed())for(oe=0;oe<this.argumentVarModels_.length;oe++){ve=this.argumentVarModels_[oe];const re={type:"variables_get",fields:{VAR:{name:ve.getName(),id:ve.getId(),type:ve.getType()}}};H.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ve.getName()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,re)})}}}};G.procedures_defnoreturn=Object.assign({},D,{init:function(){var H=i.findLegalName$$module$build$src$core$procedures("",this);H=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:H}),H.setValidator(i.rename$$module$build$src$core$procedures),H.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(H,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),G.procedures_defreturn=Object.assign({},D,{init:function(){var H=i.findLegalName$$module$build$src$core$procedures("",this);H=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:H}),H.setValidator(i.rename$$module$build$src$core$procedures),H.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(H,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Z={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};G.procedures_mutatorcontainer=Z;var Y=class extends i.FieldTextInput$$module$build$src$core$field_textinput{constructor(){super(...arguments),this.editingInteractively=!1}showEditor_(H){super.showEditor_(H),this.editingInteractively=!0,this.editingVariable=void 0}onFinishEditing_(H){super.onFinishEditing_(H),this.editingInteractively=!1}},j={init:function(){const H=new Y(i.DEFAULT_ARG$$module$build$src$core$procedures,this.validator_);this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(H,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1},validator_:function(H){var oe=this.getSourceBlock();const ve=oe.workspace.getRootWorkspace();if(H=H.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!H)return null;const re=(oe.workspace.targetWorkspace||oe.workspace).getAllBlocks(!1),ye=H.toLowerCase();for(let lt=0;lt<re.length;lt++){if(re[lt].id===this.getSourceBlock().id)continue;const Me=re[lt].getFieldValue("NAME");if(Me&&Me.toLowerCase()===ye)return null}return oe.isInFlyout||((oe=ve.getVariable(H,""))&&oe.getName()!==H&&ve.renameVariableById(oe.getId(),H),oe||(this.editingInteractively?this.editingVariable?ve.renameVariableById(this.editingVariable.getId(),H):this.editingVariable=ve.createVariable(H,""):ve.createVariable(H,""))),H}};G.procedures_mutatorarg=j;var ne="DISABLED_PROCEDURE_DEFINITION",ee={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(H,oe){i.Names$$module$build$src$core$names.equals(H,this.getProcedureCall())&&(this.setFieldValue(oe,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",oe)))},setProcedureParameters_:function(H,oe){var ve=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((ve=(ve=ve&&ve.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&ve.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),H.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=oe;else{if(oe.length!==H.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let ye=0;ye<this.arguments_.length;ye++){var re=this.getInput("ARG"+ye);re&&(re=re.connection.targetConnection,this.quarkConnections_[this.quarkIds_[ye]]=re,ve&&re&&!oe.includes(this.quarkIds_[ye])&&(re.disconnect(),re.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(H),this.argumentVarModels_=[],H=0;H<this.arguments_.length;H++)ve=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[H],""),this.argumentVarModels_.push(ve);if(this.updateShape_(),this.quarkIds_=oe){for(oe=0;oe<this.arguments_.length;oe++)if(H=this.quarkIds_[oe],H in this.quarkConnections_){let ye;(ye=this.quarkConnections_[H])!=null&&ye.reconnect(this,"ARG"+oe)||delete this.quarkConnections_[H]}}}},updateShape_:function(){for(var H=0;H<this.arguments_.length;H++){var oe=this.getField("ARGNAME"+H);if(oe){i.disable$$module$build$src$core$events$utils();try{oe.setValue(this.arguments_[H])}finally{i.enable$$module$build$src$core$events$utils()}}else oe=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[H]}),this.appendValueInput("ARG"+H).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(oe,"ARGNAME"+H)}for(H=this.arguments_.length;this.getInput("ARG"+H);H++)this.removeInput("ARG"+H);(H=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||H.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&H.removeField("WITH"))},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");H.setAttribute("name",this.getProcedureCall());for(let oe=0;oe<this.arguments_.length;oe++){const ve=i.createElement$$module$build$src$core$utils$xml("arg");ve.setAttribute("name",this.arguments_[oe]),H.appendChild(ve)}return H},domToMutation:function(H){var oe=H.getAttribute("name");this.renameProcedure(this.getProcedureCall(),oe),oe=[];const ve=[];for(let re=0,ye;ye=H.childNodes[re];re++)ye.nodeName.toLowerCase()==="arg"&&(oe.push(ye.getAttribute("name")),ve.push(ye.getAttribute("paramId")));this.setProcedureParameters_(oe,ve)},saveExtraState:function(){const H=Object.create(null);return H.name=this.getProcedureCall(),this.arguments_.length&&(H.params=this.arguments_),H},loadExtraState:function(H){if(this.renameProcedure(this.getProcedureCall(),H.name),H=H.params){const oe=[];oe.length=H.length,oe.fill(null),this.setProcedureParameters_(H,oe)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(H){if(this.workspace&&!this.workspace.isFlyout&&H.recordUndo)if(H.type===i.BLOCK_CREATE$$module$build$src$core$events$events&&H.ids.includes(this.id)){var oe=this.getProcedureCall(),ve=i.getDefinition$$module$build$src$core$procedures(oe,this.workspace);if(!ve||ve.type===this.defType_&&JSON.stringify(ve.getVars())===JSON.stringify(this.arguments_)||(ve=null),ve)ve.isEnabled()||(this.setDisabledReason(!0,ne),this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",oe)));else{i.setGroup$$module$build$src$core$events$utils(H.group),H=i.createElement$$module$build$src$core$utils$xml("xml"),oe=i.createElement$$module$build$src$core$utils$xml("block"),oe.setAttribute("type",this.defType_),ve=this.getRelativeToSurfaceXY();var re=ve.y+i.config$$module$build$src$core$config.snapRadius*2;oe.setAttribute("x",`${ve.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),oe.setAttribute("y",`${re}`),ve=this.mutationToDom(),oe.appendChild(ve),ve=i.createElement$$module$build$src$core$utils$xml("field"),ve.setAttribute("name","NAME"),re=this.getProcedureCall();const ye=i.findLegalName$$module$build$src$core$procedures(re,this);re!==ye&&this.renameProcedure(re,ye),ve.appendChild(i.createTextNode$$module$build$src$core$utils$xml(re)),oe.appendChild(ve),H.appendChild(oe),i.domToWorkspace$$module$build$src$core$xml(H,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else H.type===i.BLOCK_DELETE$$module$build$src$core$events$events?(oe=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(oe,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(H.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):H.type===i.BLOCK_CHANGE$$module$build$src$core$events$events&&H.element==="disabled"&&(oe=this.getProcedureCall(),(re=i.getDefinition$$module$build$src$core$procedures(oe,this.workspace))&&re.id===H.blockId&&((ve=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(H.group),H=re.isEnabled(),this.setDisabledReason(!H,ne),this.setWarningText(H?null:i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",oe)),i.setGroup$$module$build$src$core$events$utils(ve)))},customContextMenu:function(H){if(this.workspace.isMovable()){var oe=this.getProcedureCall(),ve=this.workspace;H.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const re=i.getDefinition$$module$build$src$core$procedures(oe,ve);re&&(ve.centerOnBlock(re.id),i.getFocusManager$$module$build$src$core$focus_manager().focusNode(re))}})}}};G.procedures_callnoreturn=Object.assign({},ee,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),G.procedures_callreturn=Object.assign({},ee,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var z="UNPARENTED_IFRETURN",te={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("value",String(Number(this.hasReturnValue_))),H},domToMutation:function(H){this.hasReturnValue_=H.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(H){if(!(this.workspace.isDragging&&this.workspace.isDragging()||H.type!==i.BLOCK_MOVE$$module$build$src$core$events$events&&H.type!==i.BLOCK_CREATE$$module$build$src$core$events$events)){H=!1;var oe=this;do{if(this.FUNCTION_TYPES.includes(oe.type)){H=!0;break}oe=oe.getSurroundParent()}while(oe);if(H?(oe.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):oe.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!H,z)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};G.procedures_ifreturn=te,i.defineBlocks$$module$build$src$core$common(G);var ce={blocks:G},pe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),K={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",K));var fe={mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation"),oe=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return H.setAttribute("divisor_input",String(oe)),H},domToMutation:function(H){H=H.getAttribute("divisor_input")==="true",this.updateShape_(H)},updateShape_:function(H){const oe=this.getInput("DIVISOR");H?oe||this.appendValueInput("DIVISOR").setCheck("Number"):oe&&this.removeInput("DIVISOR")}},Ne=function(){this.getField("PROPERTY").setValidator(function(H){H=H==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(H)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",fe,Ne),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Pe={updateType_:function(H){H==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("op",this.getFieldValue("OP")),H},domToMutation:function(H){if(H=H.getAttribute("op"),H===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(H)}},Ee=function(){this.getField("OP").setValidator((function(H){this.updateType_(H)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Pe,Ee),i.defineBlocks$$module$build$src$core$common(pe);var We={blocks:pe},Fe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),gt={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",gt));var ft={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",ft));var Ut={customContextMenu:function(H){if(!this.isInFlyout){var oe=this.getField("VAR"),ve=oe.getVariable().getName();this.isCollapsed()||ve===null||(oe={type:"variables_get",fields:{VAR:oe.saveState(!0)}},H.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ve),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,oe)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Ut),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var Ke=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),Ht="CONTROL_FLOW_NOT_IN_LOOP",Re={getSurroundLoop:function(){let H=this;do{if(Ke.has(H.type))return H;H=H.getSurroundParent()}while(H);return null},onchange:function(H){const oe=this.workspace;if(oe.isDragging&&!oe.isDragging()&&(H.type===i.BLOCK_MOVE$$module$build$src$core$events$events||H.type===i.BLOCK_CREATE$$module$build$src$core$events$events)&&(H=!!this.getSurroundLoop(),this.setWarningText(H?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!H,Ht)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",Re),i.defineBlocks$$module$build$src$core$common(Fe);var Ye={blocks:Fe,loopTypes:Ke},J=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Se={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Se));var Ae={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const H=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&H.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&H.setAttribute("else","1"),H},domToMutation:function(H){this.elseifCount_=parseInt(H.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(H.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const H=Object.create(null);return this.elseifCount_&&(H.elseIfCount=this.elseifCount_),this.elseCount_&&(H.hasElse=!0),H},loadExtraState:function(H){this.elseifCount_=H.elseIfCount||0,this.elseCount_=H.hasElse?1:0,this.updateShape_()},decompose:function(H){const oe=H.newBlock("controls_if_if");oe.initSvg();let ve=oe.nextConnection;for(let re=1;re<=this.elseifCount_;re++){const ye=H.newBlock("controls_if_elseif");ye.initSvg(),ve.connect(ye.previousConnection),ve=ye.nextConnection}return this.elseCount_&&(H=H.newBlock("controls_if_else"),H.initSvg(),ve.connect(H.previousConnection)),oe},compose:function(H){H=H.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const oe=[null],ve=[null];let re=null;for(;H;){if(!H.isInsertionMarker())switch(H.type){case"controls_if_elseif":this.elseifCount_++,oe.push(H.valueConnection_),ve.push(H.statementConnection_);break;case"controls_if_else":this.elseCount_++,re=H.statementConnection_;break;default:throw TypeError("Unknown block type: "+H.type)}H=H.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(oe,ve,re)},saveConnections:function(H){H=H.nextConnection.targetBlock();let oe=1;for(;H;){if(!H.isInsertionMarker())switch(H.type){case"controls_if_elseif":var ve=this.getInput("IF"+oe);const re=this.getInput("DO"+oe);H.valueConnection_=ve&&ve.connection.targetConnection,H.statementConnection_=re&&re.connection.targetConnection,oe++;break;case"controls_if_else":ve=this.getInput("ELSE"),H.statementConnection_=ve&&ve.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+H.type)}H=H.getNextBlock()}},rebuildShape_:function(){const H=[null],oe=[null];let ve=null;this.getInput("ELSE")&&(ve=this.getInput("ELSE").connection.targetConnection);for(let re=1;this.getInput("IF"+re);re++){const ye=this.getInput("IF"+re),lt=this.getInput("DO"+re);H.push(ye.connection.targetConnection),oe.push(lt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(H,oe,ve)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var H=1;this.getInput("IF"+H);H++)this.removeInput("IF"+H),this.removeInput("DO"+H);for(H=1;H<=this.elseifCount_;H++)this.appendValueInput("IF"+H).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+H).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(H,oe,ve){for(let re=1;re<=this.elseifCount_;re++){let ye;(ye=H[re])==null||ye.reconnect(this,"IF"+re);let lt;(lt=oe[re])==null||lt.reconnect(this,"DO"+re)}ve?.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Ae,null,["controls_if_elseif","controls_if_else"]);var we=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",we);var Ie={onchange:function(H){this.prevBlocks_||(this.prevBlocks_=[null,null]);var oe=this.getInputTargetBlock("A");const ve=this.getInputTargetBlock("B");oe&&ve&&!this.workspace.connectionChecker.doTypeChecks(oe.outputConnection,ve.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(H.group),H=this.prevBlocks_[0],H!==oe&&(oe.unplug(),!H||H.isDisposed()||H.isShadow()||this.getInput("A").connection.connect(H.outputConnection)),oe=this.prevBlocks_[1],oe!==ve&&(ve.unplug(),!oe||oe.isDisposed()||oe.isShadow()||this.getInput("B").connection.connect(oe.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},dt=function(){this.mixin(Ie)};i.register$$module$build$src$core$extensions("logic_compare",dt);var Qe={prevParentConnection_:null,onchange:function(H){const oe=this.getInputTargetBlock("THEN"),ve=this.getInputTargetBlock("ELSE"),re=this.outputConnection.targetConnection;if((oe||ve)&&re)for(let ye=0;ye<2;ye++){const lt=ye===1?oe:ve;lt&&!lt.workspace.connectionChecker.doTypeChecks(lt.outputConnection,re)&&(i.setGroup$$module$build$src$core$events$utils(H.group),re===this.prevParentConnection_?(this.unplug(),re.getSourceBlock().bumpNeighbours()):(lt.unplug(),lt.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=re}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",Qe),i.defineBlocks$$module$build$src$core$common(J);var vt={blocks:J},et=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),_e={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("items",String(this.itemCount_)),H},domToMutation:function(H){if(H=H.getAttribute("items"),!H)throw new TypeError("element did not have items");this.itemCount_=parseInt(H,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(H){this.itemCount_=H.itemCount,this.updateShape_()},decompose:function(H){const oe=H.newBlock("lists_create_with_container");oe.initSvg();let ve=oe.getInput("STACK").connection;for(let re=0;re<this.itemCount_;re++){const ye=H.newBlock("lists_create_with_item");if(ye.initSvg(),!ye.previousConnection)throw Error("itemBlock has no previousConnection");ve.connect(ye.previousConnection),ve=ye.nextConnection}return oe},compose:function(H){var oe=H.getInputTargetBlock("STACK");for(H=[];oe;)oe.isInsertionMarker()||H.push(oe.valueConnection_),oe=oe.getNextBlock();for(oe=0;oe<this.itemCount_;oe++){const ve=this.getInput("ADD"+oe).connection.targetConnection;ve&&!H.includes(ve)&&ve.disconnect()}for(this.itemCount_=H.length,this.updateShape_(),oe=0;oe<this.itemCount_;oe++){let ve;(ve=H[oe])==null||ve.reconnect(this,"ADD"+oe)}},saveConnections:function(H){H=H.getInputTargetBlock("STACK");let oe=0;for(;H;){if(H.isInsertionMarker()){H=H.getNextBlock();continue}const ve=this.getInput("ADD"+oe);let re;H.valueConnection_=(re=ve)==null?void 0:re.connection.targetConnection,H=H.getNextBlock(),oe++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var H=0;H<this.itemCount_;H++)if(!this.getInput("ADD"+H)){const oe=this.appendValueInput("ADD"+H).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);H===0&&oe.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(H=this.itemCount_;this.getInput("ADD"+H);H++)this.removeInput("ADD"+H)}};et.lists_create_with=_e;var se={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};et.lists_create_with_container=se;var $e={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};et.lists_create_with_item=$e;var Le={init:function(){var H=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),!H)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(H,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};et.lists_indexOf=Le;var Xe={init:function(){var H=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),H.setValidator(function(oe){oe=oe==="REMOVE",this.getSourceBlock().updateStatement_(oe)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(H,"MODE").appendField("","SPACE"),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),H.setValidator(function(oe){const ve=this.getValue();oe=oe==="FROM_START"||oe==="FROM_END",oe!==(ve==="FROM_START"||ve==="FROM_END")&&this.getSourceBlock().updateAt_(oe)}),this.appendDummyInput().appendField(H,"WHERE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const oe=this.getFieldValue("MODE"),ve=this.getFieldValue("WHERE");let re="";switch(oe+" "+ve){case"GET FROM_START":case"GET FROM_END":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":re=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(ve==="FROM_START"||ve==="FROM_END")&&(re+="  "+(ve==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),re})},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");H.setAttribute("statement",String(!this.outputConnection));const oe=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return H.setAttribute("at",String(oe)),H},domToMutation:function(H){const oe=H.getAttribute("statement")==="true";this.updateStatement_(oe),H=H.getAttribute("at")!=="false",this.updateAt_(H)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(H){H.isStatement?this.updateStatement_(!0):typeof H=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(H))},updateStatement_:function(H){H!==!this.outputConnection&&(this.unplug(!0,!0),H?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(H){this.removeInput("AT"),this.removeInput("ORDINAL",!0),H?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};et.lists_getIndex=Xe;var Ve={init:function(){var H=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:H}),this.appendDummyInput().appendField(H,"MODE").appendField("","SPACE"),H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),H.setValidator(function(oe){const ve=this.getValue();oe=oe==="FROM_START"||oe==="FROM_END",oe!==(ve==="FROM_START"||ve==="FROM_END")&&this.getSourceBlock().updateAt_(oe)}),this.appendDummyInput().appendField(H,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const oe=this.getFieldValue("MODE"),ve=this.getFieldValue("WHERE");let re="";switch(oe+" "+ve){case"SET FROM_START":case"SET FROM_END":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":re=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(ve==="FROM_START"||ve==="FROM_END")&&(re+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),re})},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation"),oe=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return H.setAttribute("at",String(oe)),H},domToMutation:function(H){H=H.getAttribute("at")!=="false",this.updateAt_(H)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(H){this.removeInput("AT"),this.removeInput("ORDINAL",!0),H?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};et.lists_setIndex=Ve;var yt={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const H=oe=>{const ve=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+oe]});return ve.setValidator(function(re){const ye=this.getValue();re=re==="FROM_START"||re==="FROM_END",re!==(ye==="FROM_START"||ye==="FROM_END")&&this.getSourceBlock().updateAt_(oe,re)}),ve};this.appendDummyInput("WHERE1_INPUT").appendField(H(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(H(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");var oe=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return H.setAttribute("at1",String(oe)),oe=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,H.setAttribute("at2",String(oe)),H},domToMutation:function(H){const oe=H.getAttribute("at1")==="true";H=H.getAttribute("at2")==="true",this.updateAt_(1,oe),this.updateAt_(2,H)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(H,oe){this.removeInput("AT"+H),this.removeInput("ORDINAL"+H,!0),oe?(this.appendValueInput("AT"+H).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+H).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+H),H===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};et.lists_getSublist=yt,et.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},et.lists_split={init:function(){const H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!H)throw Error("field_dropdown not found");H.setValidator(oe=>{this.updateType_(oe)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(H,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const oe=this.getFieldValue("MODE");if(oe==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(oe==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+oe)})},updateType_:function(H){if(this.getFieldValue("MODE")!==H){const oe=this.getInput("INPUT").connection;oe.setShadowDom(null);const ve=oe.targetBlock();ve&&(oe.disconnect(),ve.isShadow()?ve.dispose(!1):this.bumpNeighbours())}H==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const H=i.createElement$$module$build$src$core$utils$xml("mutation");return H.setAttribute("mode",this.getFieldValue("MODE")),H},domToMutation:function(H){this.updateType_(H.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(H){this.updateType_(H.mode)}},i.defineBlocks$$module$build$src$core$common(et);var bt={blocks:et},At=Object.assign({},et,J,Fe,pe,G,$,p,r),Ft={blocks:At,lists:bt,logic:vt,loops:Ye,math:We,procedures:ce,texts:X,variables:S,variablesDynamic:f};return Ft.__namespace__=i,Ft})}(bx)),bx.exports}var fce=gx.exports,sU;function pce(){return sU||(sU=1,function(s,e){(function(n,i){s.exports=i(XN(),cce(),dce())})(fce,function(n,i,r){return n.setLocale(i),n})}(gx)),gx.exports}var mce=pce();const gce=Mp(mce),{Block:Mhe,BlockFlyoutInflater:Rhe,BlockNavigationPolicy:whe,BlockSvg:Ihe,Blocks:_ce,ButtonFlyoutInflater:Ohe,COLLAPSED_FIELD_NAME:Nhe,COLLAPSED_INPUT_NAME:Lhe,COLLAPSE_CHARS:Dhe,CodeGenerator:Bhe,CollapsibleToolboxCategory:khe,ComponentManager:Phe,Connection:Uhe,ConnectionChecker:Fhe,ConnectionDB:Hhe,ConnectionNavigationPolicy:Ghe,ConnectionType:zhe,ContextMenu:Vhe,ContextMenuItems:Whe,ContextMenuRegistry:Xhe,Css:jhe,DELETE_VARIABLE_ID:Yhe,DeleteArea:Khe,DragTarget:qhe,DropDownDiv:Jhe,Events:Zhe,Extensions:Qhe,Field:ede,FieldCheckbox:tde,FieldDropdown:nde,FieldImage:ide,FieldLabel:sde,FieldLabelSerializable:rde,FieldNavigationPolicy:ode,FieldNumber:ade,FieldTextInput:lde,FieldVariable:ude,Flyout:cde,FlyoutButton:hde,FlyoutButtonNavigationPolicy:dde,FlyoutItem:fde,FlyoutMetricsManager:pde,FlyoutNavigationPolicy:mde,FlyoutNavigator:gde,FlyoutSeparator:_de,FlyoutSeparatorNavigationPolicy:vde,FocusManager:bde,FocusableTreeTraverser:yde,Generator:vce,Gesture:Tde,Grid:Ede,HorizontalFlyout:Sde,INPUT_VALUE:Ade,Input:$de,InsertionMarkerPreviewer:xde,KeyboardNavigationController:Cde,LabelFlyoutInflater:Mde,LineCursor:Rde,Marker:wde,MarkerManager:Ide,Menu:Ode,MenuItem:Nde,MetricsManager:Lde,Msg:Dde,NEXT_STATEMENT:Bde,Names:kde,Navigator:Pde,OPPOSITE_TYPE:Ude,OUTPUT_VALUE:Fde,Options:Hde,PREVIOUS_STATEMENT:Gde,PROCEDURE_CATEGORY_NAME:zde,Procedures:Vde,RENAME_VARIABLE_ID:Wde,RenderedConnection:Xde,Scrollbar:jde,ScrollbarPair:Yde,SeparatorFlyoutInflater:Kde,ShortcutItems:qde,ShortcutRegistry:Jde,TOOLBOX_AT_BOTTOM:Zde,TOOLBOX_AT_LEFT:Qde,TOOLBOX_AT_RIGHT:efe,TOOLBOX_AT_TOP:tfe,Theme:nfe,ThemeManager:ife,Themes:sfe,Toast:rfe,Toolbox:ofe,ToolboxCategory:afe,ToolboxItem:lfe,ToolboxSeparator:ufe,Tooltip:cfe,Touch:hfe,Trashcan:dfe,UnattachedFieldError:ffe,VARIABLE_CATEGORY_NAME:pfe,VARIABLE_DYNAMIC_CATEGORY_NAME:mfe,VERSION:gfe,VariableMap:_fe,VariableModel:vfe,Variables:bfe,VariablesDynamic:yfe,VerticalFlyout:Tfe,WidgetDiv:Efe,Workspace:Sfe,WorkspaceAudio:Afe,WorkspaceDragger:$fe,WorkspaceNavigationPolicy:xfe,WorkspaceSvg:Cfe,Xml:Hw,ZoomControls:Mfe,blockAnimations:Rfe,blockRendering:wfe,browserEvents:Ife,bubbles:Ofe,bumpObjects:Nfe,clipboard:Lfe,comments:Dfe,common:Bfe,config:kfe,constants:Pfe,defineBlocksWithJsonArray:Ufe,dialog:Ffe,dragging:Hfe,fieldRegistry:Gfe,geras:zfe,getFocusManager:Vfe,getMainWorkspace:Wfe,getSelected:Xfe,hasBubble:jfe,hideChaff:Yfe,icons:Kfe,inject:qfe,inputs:Jfe,isCopyable:Zfe,isDeletable:Qfe,isDraggable:epe,isIcon:tpe,isObservable:npe,isPaster:ipe,isRenderedElement:spe,isSelectable:rpe,isSerializable:ope,isVariableBackedParameterModel:ape,keyboardNavigationController:lpe,layers:upe,navigateBlock:cpe,navigateStacks:hpe,procedures:dpe,registry:fpe,renderManagement:ppe,serialization:mpe,setLocale:gpe,setParentContainer:_pe,svgResize:vpe,thrasos:bpe,uiPosition:ype,utils:bce,zelos:Tpe}=gce;let xo;const yce=[["step",s=>"Schritt("+s.getFieldValue("COUNT")+")"],["turnleft",s=>"LinksDrehen"],["turnright",s=>"RechtsDrehen"],["laydown",s=>"Hinlegen("+s.getFieldValue("COUNT")+")"],["laydown_color",s=>"Hinlegen("+s.getFieldValue("COLOR")+")"],["pickup",s=>"Aufheben("+s.getFieldValue("COUNT")+")"],["setmarker_color",s=>"MarkeSetzen("+s.getFieldValue("COLOR")+")"],["deletemarker",s=>"MarkeLöschen"],["wait",s=>"Warten("+s.getFieldValue("COUNT")+")"],["beep",s=>"Ton"],["stop",s=>"Beenden"],["repeat_times",s=>"wiederhole "+s.getFieldValue("COUNT")+` mal
`+xo.statementToCode(s,"STATEMENTS")+`
endewiederhole`],["while_do",s=>"wiederhole solange "+xo.valueToCode(s,"CONDITION",0)+`
`+xo.statementToCode(s,"STATEMENTS")+`
endewiederhole`],["repeat_until",s=>`wiederhole 
`+xo.statementToCode(s,"STATEMENTS")+`
endewiederhole
bis `+xo.valueToCode(s,"CONDITION",0)],["repeat_while",s=>`wiederhole 
`+xo.statementToCode(s,"STATEMENTS")+`
endewiederhole
solange `+xo.valueToCode(s,"CONDITION",0)],["repeat_forever",s=>`wiederhole immer
`+xo.statementToCode(s,"STATEMENTS")+`
endewiederhole`],["if_then",s=>"wenn "+xo.valueToCode(s,"CONDITION",0)+` dann
`+xo.statementToCode(s,"STATEMENTS")+`
endewenn`],["if_then_else",s=>"wenn  "+xo.valueToCode(s,"CONDITION",0)+` dann
`+xo.statementToCode(s,"STATEMENTS")+`
sonst`+xo.statementToCode(s,"STATEMENTS_2")+`
endewenn`],["is_wall",s=>["IstWand",0]],["isn't_wall",s=>["NichtIstWand",0]],["is_brick",s=>["IstZiegel",0]],["is_brick_count",s=>["IstZiegel("+s.getFieldValue("COUNT")+")",0]],["is_brick_color",s=>["IstZiegel("+s.getFieldValue("COLOR")+")",0]],["isn't_brick",s=>["NichtIstZiegel",0]],["isn't_brick_count",s=>["NichtIstZiegel("+s.getFieldValue("COUNT")+")",0]],["isn't_brick_color",s=>["NichtIstZiegel("+s.getFieldValue("COLOR")+")",0]],["is_marker",s=>["IstMarke",0]],["is_marker_color",s=>["IstMarke("+s.getFieldValue("COLOR")+")",0]],["isn't_marker",s=>["NichtIstMarke",0]],["isn't_marker_color",s=>["NichtIstMarke("+s.getFieldValue("COLOR")+")",0]],["is_south",s=>["IstSüden",0]],["is_north",s=>["IstNorden",0]],["is_west",s=>["IstWesten",0]],["is_east",s=>["IstOsten",0]],["is_full",s=>["IstVoll",0]],["isn't_full",s=>["NichtIstVoll",0]],["is_empty",s=>["IstLeer",0]],["isn't_empty",s=>["NichtIstLeer",0]],["has_bricks",s=>["HatZiegel",0]],["has_bricks_count",s=>["HatZiegel("+s.getFieldValue("COUNT")+")",0]]];function Tce(){ace.forEach(s=>{_ce[s.type]={init:function(){this.jsonInit(s)}}}),xo=new vce("karol"),xo.PRECEDENCE=0,yce.forEach(([s,e])=>{xo.forBlock[s]=e}),console.log("Registered blocks in karolGenerator:",Object.keys(xo.forBlock)),xo.scrub_=function(s,e){const n=s.nextConnection&&s.nextConnection.targetBlock();let i="";return n&&(i=`
`+xo.blockToCode(n)),e+i}}var Ece=XN();const Sce=Mp(Ece),{Block:Epe,BlockFlyoutInflater:Spe,BlockNavigationPolicy:Ape,BlockSvg:$pe,Blocks:xpe,ButtonFlyoutInflater:Cpe,COLLAPSED_FIELD_NAME:Mpe,COLLAPSED_INPUT_NAME:Rpe,COLLAPSE_CHARS:wpe,CodeGenerator:Ipe,CollapsibleToolboxCategory:Ope,ComponentManager:Npe,Connection:Lpe,ConnectionChecker:Dpe,ConnectionDB:Bpe,ConnectionNavigationPolicy:kpe,ConnectionType:Ppe,ContextMenu:Upe,ContextMenuItems:Fpe,ContextMenuRegistry:Hpe,Css:Gpe,DELETE_VARIABLE_ID:zpe,DeleteArea:Vpe,DragTarget:Wpe,DropDownDiv:Xpe,Events:jpe,Extensions:Ype,Field:Kpe,FieldCheckbox:qpe,FieldDropdown:Jpe,FieldImage:Zpe,FieldLabel:Qpe,FieldLabelSerializable:e0e,FieldNavigationPolicy:t0e,FieldNumber:n0e,FieldTextInput:i0e,FieldVariable:s0e,Flyout:r0e,FlyoutButton:o0e,FlyoutButtonNavigationPolicy:a0e,FlyoutItem:l0e,FlyoutMetricsManager:u0e,FlyoutNavigationPolicy:c0e,FlyoutNavigator:h0e,FlyoutSeparator:d0e,FlyoutSeparatorNavigationPolicy:f0e,FocusManager:p0e,FocusableTreeTraverser:m0e,Generator:g0e,Gesture:_0e,Grid:v0e,HorizontalFlyout:b0e,INPUT_VALUE:y0e,Input:T0e,InsertionMarkerPreviewer:E0e,KeyboardNavigationController:S0e,LabelFlyoutInflater:A0e,LineCursor:$0e,Marker:x0e,MarkerManager:C0e,Menu:M0e,MenuItem:R0e,MetricsManager:w0e,Msg:I0e,NEXT_STATEMENT:O0e,Names:N0e,Navigator:L0e,OPPOSITE_TYPE:D0e,OUTPUT_VALUE:B0e,Options:k0e,PREVIOUS_STATEMENT:P0e,PROCEDURE_CATEGORY_NAME:U0e,Procedures:F0e,RENAME_VARIABLE_ID:H0e,RenderedConnection:G0e,Scrollbar:z0e,ScrollbarPair:V0e,SeparatorFlyoutInflater:W0e,ShortcutItems:X0e,ShortcutRegistry:j0e,TOOLBOX_AT_BOTTOM:Y0e,TOOLBOX_AT_LEFT:K0e,TOOLBOX_AT_RIGHT:q0e,TOOLBOX_AT_TOP:J0e,Theme:Z0e,ThemeManager:Q0e,Themes:eme,Toast:tme,Toolbox:nme,ToolboxCategory:ime,ToolboxItem:sme,ToolboxSeparator:rme,Tooltip:ome,Touch:ame,Trashcan:lme,UnattachedFieldError:ume,VARIABLE_CATEGORY_NAME:cme,VARIABLE_DYNAMIC_CATEGORY_NAME:hme,VERSION:dme,VariableMap:fme,VariableModel:pme,Variables:mme,VariablesDynamic:gme,VerticalFlyout:_me,WidgetDiv:vme,Workspace:bme,WorkspaceAudio:yme,WorkspaceDragger:Tme,WorkspaceNavigationPolicy:Eme,WorkspaceSvg:Sme,Xml:NE,ZoomControls:Ame,blockAnimations:$me,blockRendering:xme,browserEvents:Cme,bubbles:Mme,bumpObjects:Rme,clipboard:wme,comments:Ime,common:Ome,config:Nme,constants:Lme,defineBlocksWithJsonArray:Dme,dialog:Bme,dragging:kme,fieldRegistry:Pme,geras:Ume,getFocusManager:Fme,getMainWorkspace:Hme,getSelected:Gme,hasBubble:zme,hideChaff:Vme,icons:Wme,inject:Ace,inputs:Xme,isCopyable:jme,isDeletable:Yme,isDraggable:Kme,isIcon:qme,isObservable:Jme,isPaster:Zme,isRenderedElement:Qme,isSelectable:ege,isSerializable:tge,isVariableBackedParameterModel:nge,keyboardNavigationController:ige,layers:sge,navigateBlock:rge,navigateStacks:oge,procedures:age,registry:lge,renderManagement:uge,serialization:nV,setLocale:cge,setParentContainer:hge,svgResize:dge,thrasos:fge,uiPosition:pge,utils:$ce,zelos:mge}=Sce;function xce(s,e){var n=null,i=null,r=function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];i=function(){n=null,s.apply(void 0,l)},n!=null&&clearTimeout(n),n=window.setTimeout(i,e)},a=function(){n!=null&&(clearTimeout(n),i&&i())};return[r,a]}var kC=function(){return kC=Object.assign||function(s){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r])}return s},kC.apply(this,arguments)};function Cce(s,e,n){try{return e.getAllBlocks(!1).length>0?void 0:(NE.domToWorkspace($ce.xml.textToDom(s),e),!0)}catch(i){return n&&n(i),!1}}function Mce(s,e,n){try{return nV.workspaces.load(s,e),!0}catch(i){return n&&n(i),!1}}var Rce=function(s){var e=s.ref,n=s.initialXml,i=s.initialJson,r=s.toolboxConfiguration,a=s.workspaceConfiguration,l=s.onWorkspaceChange,h=s.onImportXmlError,f=s.onImportError,p=s.onInject,v=s.onDispose;f=f??h;var T=Un.useState(null),y=T[0],S=T[1],$=Un.useState(n||null),M=$[0],C=$[1],E=Un.useState(i||null),w=E[0],I=E[1],O=Un.useState(!1),P=O[0],F=O[1],V=Un.useState(!1),X=V[0],G=V[1],D=Un.useRef(a);Un.useEffect(function(){D.current=a},[a]);var Z=Un.useRef(r);Un.useEffect(function(){Z.current=r,r&&y&&!a?.readOnly&&y.updateToolbox(r)},[r,y,a]);var Y=Un.useRef(p),j=Un.useRef(v);Un.useEffect(function(){Y.current=p},[p]),Un.useEffect(function(){j.current=v},[v]);var ne=Un.useCallback(function(ee){l&&l(ee)},[l]);return Un.useEffect(function(){if(e.current){var ee=Ace(e.current,kC(kC({},D.current),{toolbox:Z.current}));S(ee),F(!1),G(!1),Y.current&&Y.current(ee);var z=j.current;return function(){ee.dispose(),z&&z(ee)}}},[e]),Un.useEffect(function(){y&&!X&&ne(y)},[ne,X,y]),Un.useEffect(function(){if(y!=null){var ee=function(){ne(y)};return y.addChangeListener(ee),function(){y.removeChangeListener(ee)}}},[y,ne]),Un.useEffect(function(){if(y!=null){var ee=xce(function(){var ce=NE.domToText(NE.workspaceToDom(y));if(ce!==M){var pe=nV.workspaces.save(y);I(pe),C(ce)}},200),z=ee[0],te=ee[1];return y.addChangeListener(z),function(){y.removeChangeListener(z),te()}}},[y,M]),Un.useEffect(function(){if(M&&y&&!P){var ee=Cce(M,y,f);ee||C(null),F(!0)}else if(w&&y&&!P){var ee=Mce(w,y,f);ee||I(null);var z=NE.domToText(NE.workspaceToDom(y));C(z),F(!0)}},[w,M,y,P,f]),{workspace:y,xml:M,json:w}},wce={initialXml:An.string,initialJson:An.object,toolboxConfiguration:An.object,workspaceConfiguration:An.object,className:An.string,onWorkspaceChange:An.func,onImportXmlError:An.func,onImportError:An.func,onXmlChange:An.func,onJsonChange:An.func,onInject:An.func,onDispose:An.func};function iV(s){var e=s.initialXml,n=s.initialJson,i=s.toolboxConfiguration,r=s.workspaceConfiguration,a=s.className,l=s.onWorkspaceChange,h=s.onXmlChange,f=s.onJsonChange,p=s.onImportXmlError,v=s.onImportError,T=s.onInject,y=s.onDispose,S=Un.useRef(null),$=Rce({ref:S,initialXml:e,initialJson:n,toolboxConfiguration:i,workspaceConfiguration:r,onWorkspaceChange:l,onImportXmlError:p,onImportError:v,onInject:T,onDispose:y}),M=$.xml,C=$.json,E=Un.useRef(h);Un.useEffect(function(){E.current=h},[h]);var w=Un.useRef(f);return Un.useEffect(function(){w.current=f},[f]),Un.useEffect(function(){E.current&&M&&E.current(M),w.current&&C&&w.current(C)},[M,C]),he.jsx("div",{className:a,ref:S})}iV.propTypes=wce;const Ice={kind:"categoryToolbox",contents:[{kind:"category",name:"Anweisungen",contents:[{kind:"block",type:"step"},{kind:"block",type:"turnleft"},{kind:"block",type:"turnright"},{kind:"block",type:"laydown"},{kind:"block",type:"laydown_color"},{kind:"block",type:"pickup"},{kind:"block",type:"setmarker_color"},{kind:"block",type:"deletemarker"},{kind:"block",type:"wait"},{kind:"block",type:"beep"},{kind:"block",type:"stop"}]},{kind:"category",name:"Kontrollstrukturen",contents:[{kind:"block",type:"repeat_times"},{kind:"block",type:"while_do"},{kind:"block",type:"repeat_until"},{kind:"block",type:"repeat_while"},{kind:"block",type:"repeat_forever"},{kind:"block",type:"if_then"},{kind:"block",type:"if_then_else"}]},{kind:"category",name:"Bedingungen",contents:[{kind:"block",type:"is_wall"},{kind:"block",type:"isn't_wall"},{kind:"block",type:"is_brick"},{kind:"block",type:"is_brick_count"},{kind:"block",type:"is_brick_color"},{kind:"block",type:"isn't_brick"},{kind:"block",type:"isn't_brick_count"},{kind:"block",type:"isn't_brick_color"},{kind:"block",type:"is_marker"},{kind:"block",type:"is_marker_color"},{kind:"block",type:"isn't_marker"},{kind:"block",type:"isn't_marker_color"},{kind:"block",type:"is_south"},{kind:"block",type:"is_north"},{kind:"block",type:"is_west"},{kind:"block",type:"is_east"}]},{kind:"category",name:"Bed. bei Tragfähigkeit",contents:[{kind:"block",type:"is_full"},{kind:"block",type:"isn't_full"},{kind:"block",type:"is_empty"},{kind:"block",type:"isn't_empty"},{kind:"block",type:"has_bricks"},{kind:"block",type:"has_bricks_count"}]}]};Tce();function my(s){return()=>{try{s()}catch(e){alert("Error"+e)}}}const Oce=rm(s=>{const[e,n]=Q.useState(!1),[i,r]=Q.useState(0),[a,l]=Q.useState(!1),h=Q.useRef(null);function f(M){let C=!0;i===0&&M===1&&h.current&&a&&(C=confirm("Der Wechsel zu Blockly löscht eingegebenen Code. Trotzdem wechseln ?"),C&&l(!1)),C&&(r(M),M===1&&s.program.initializeBlocklyWorkspace())}function p(){n(!0)}function v(M){n(!1),s.model.updateSettings(M)}function T(M){s.program.setSourceCode(M.target.value),l(!0)}function y(M,C){const E=h.current;if(E)if(E.selectionStart||E.selectionStart==0){const w=E.selectionStart,I=E.selectionEnd;E.value=E.value.substring(0,w)+C.text+" "+E.value.substring(I,E.value.length)}else E.value+=C.text+" "}function S(M){return M.title?he.jsx(aT,{data:{text:M.title},onClick:y,children:M.title}):he.jsx(aT,{divider:!0})}function $(M,C){h.current&&(h.current.focus(),h.current.selectionStart=M,h.current.selectionEnd=C)}return he.jsxs("div",{style:{display:"flex",flexDirection:"column",flexGrow:1,border:"solid black 1px",borderTop:"none",minWidth:"320px"},children:[he.jsxs("div",{style:{display:"flex",flexDirection:"row",columns:2,flexWrap:"wrap"},children:[he.jsx(no,{title:"Programm laden",children:he.jsx(to,{onClick:()=>s.program.load(),children:he.jsx(J4,{})})}),he.jsx(no,{title:"Programm speichern",children:he.jsx(to,{onClick:()=>s.program.save(),children:he.jsx(K4,{})})}),he.jsx(no,{title:"Einzelschritt",children:he.jsx(to,{onClick:my(()=>s.program.run(0,s.model,$,!0)),children:he.jsx(sue,{})})}),he.jsx(no,{title:"Programmstart langsam",children:he.jsx(to,{onClick:my(()=>s.program.run(200,s.model,$)),children:he.jsx(iue,{})})}),he.jsx(no,{title:"Programmstart schnell",children:he.jsx(to,{onClick:my(()=>s.program.run(10,s.model,$)),children:he.jsx(nue,{})})}),he.jsx(no,{title:"Programm Maximalgeschwindigkeit",children:he.jsx(to,{onClick:my(()=>s.program.run(void 0,s.model,$)),children:he.jsx(tue,{})})}),he.jsx(no,{title:"Programm unterbrechen",children:he.jsx(to,{onClick:my(()=>s.program.pause()),children:he.jsx(oue,{})})}),he.jsx(no,{title:"Programm stoppen",children:he.jsx(to,{onClick:my(()=>s.program.stop()),children:he.jsx(uue,{})})}),he.jsx(no,{title:"Einstellungen Karol",children:he.jsx(to,{onClick:p,children:he.jsx(q4,{})})}),he.jsx(no,{title:"Programm löschen",children:he.jsx(to,{onClick:()=>s.program.clear(),children:he.jsx(eue,{})})}),he.jsx(IO,{variant:"subtitle1",children:s.program.executionState}),he.jsx(IO,{variant:"caption",style:{margin:"auto"},children:s.program.fileName})]}),he.jsx(oce,{onClose:v,open:e,karol:s.model,onCancel:()=>n(!1)}),he.jsxs(Xle,{value:i,onChange:(M,C)=>f(C),children:[he.jsx(X3,{label:"Code"}),he.jsx(X3,{label:"Blöcke"})]}),i===0?he.jsxs("div",{style:{flexGrow:1},children:[he.jsx(e1,{id:"menu_statements",children:he.jsx("textarea",{ref:h,value:s.program.sourceCode,onChange:T,style:{flexGrow:1,width:"100%",height:"100%",padding:"0px",resize:"none"}})}),he.jsxs(WN,{id:"menu_statements",children:[he.jsx(ky,{title:"Anweisungen",children:ice.map((M,C)=>he.jsx(S,{title:M},C))},"aw"),he.jsx(ky,{title:"Kontrollstrukturen",children:rce.map((M,C)=>he.jsx(S,{title:M},C))},"ks"),he.jsx(ky,{title:"Bedingungen",children:sce.map((M,C)=>he.jsx(S,{title:M},C))},"bd")]})]},"code"):null,i===1?he.jsx("div",{style:{flexGrow:1,display:"flex",flexDirection:"column"},children:he.jsx(iV,{className:"blockly-editor",toolboxConfiguration:Ice,workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},initialXml:s.program.blocklyXml,onXmlChange:M=>{console.log("XML changed:",M),s.program.setBlocklyXmlFromReact(M)},onWorkspaceChange:M=>s.program.setBlocklyXml(M),onDispose:()=>s.program.disposeBlocklyWorkspace()})}):null]})});var Nce=Object.defineProperty,Lce=Object.getOwnPropertyDescriptor,Ka=(s,e,n,i)=>{for(var r=i>1?void 0:i?Lce(e,n):e,a=s.length-1,l;a>=0;a--)(l=s[a])&&(r=(i?l(e,n,r):l(r))||r);return i&&r&&Nce(e,n,r),r},LE=(s=>(s[s.North=0]="North",s[s.East=1]="East",s[s.South=2]="South",s[s.West=3]="West",s))(LE||{});const Dce={0:{x:0,z:-1},1:{x:1,z:0},2:{x:0,z:1},3:{x:-1,z:0}};class Sa{constructor(e){this.world=e,dT(this),this.jumpHeight=1,this.figureIndex=0,this.reset()}position={x:0,y:0,z:0};direction=2;brickCount=1/0;initialBrickCount=1/0;maxBrickCount=1/0;jumpHeight;figureIndex;reset(){this.world.isValid(this.position)&&this.world.setFieldByCoord(this.position,Bi.empty),this.position={x:0,y:0,z:0},this.direction=2,this.brickCount=this.initialBrickCount,this.world.setFieldByCoord(this.position,Bi.karol)}updateSettings(e){this.jumpHeight=e.jumpHeight,this.figureIndex=e.figureIndex,this.maxBrickCount=e.maxBrickCount,this.initialBrickCount=e.initialBrickCount,this.reset()}move(e=1){let n=this.nextPosition;for(let i=0;i<e;i++)n=this.nextPosition,this.validateNextPosition(n,!0),n.y=this.world.getFirstFreeY(n.x,n.z),this.world.setFieldByCoord(this.position,Bi.empty),this.position=n,this.world.setFieldByCoord(n,Bi.karol);return n}turnLeft(){return this.direction=(4+this.direction-1)%4,this.direction}turnRight(){return this.direction=(this.direction+1)%4,this.direction}layBrick(e=1,n=Zv.red){for(let i=0;i<e;i++){let r=this.nextPosition;if(r.y=0,this.brickCount>=1)if(this.world.isValid(r)){for(;this.world.getFieldByCoord(r)>=Bi.brick_first;)r.y++;const a=this.world.getFieldByCoord(r);if(a===Bi.empty)this.world.setFieldByCoord(r,Pz(n)),this.brickCount=this.brickCount-1;else throw a===Bi.wall?r.y>=this.world.dimensions.y?Error("Karol kann nicht hinlegen, die maximale Stapelhöhe ist erreicht."):Error("Karol kann nicht hinlegen, er steht vor einem Quader."):a>=Bi.brick_first?Error("Karol kann nicht hinlegen, die maximale Stapelhöhe ist erreicht."):Error("Huch? Da ist was im Weg was ich nicht kenne.")}else throw Error("Karol kann nicht hinlegen, er steht vor der Wand.");else throw Error("Karol kann nicht "+e+" hinlegen, er hat nicht mehr genug Ziegel.")}}pickupBrick(e=1){for(let n=0;n<e;n++){let i=this.nextPosition,r;for(;this.world.getFieldByCoord(i)>=Bi.brick_first;)r={...i},i.y++;if(r)if(this.maxBrickCount===1/0||this.brickCount<this.maxBrickCount)this.world.setFieldByCoord(r,Bi.empty),this.brickCount+=1;else throw Error("Karol kann nicht mehr als "+this.maxBrickCount+" Ziegel tragen.");else throw Error("Da ist kein Ziegel")}}getBrickHeight(){return this.world.getBrickHeight(this.nextPosition.x,this.nextPosition.z)}hasBrick(e){return this.world.hasBrick(e,this.nextPosition.x,this.nextPosition.z)}setMarker(e){this.world.setMarker(this.position,e)}getMarker(){return this.world.getMarker(this.position)}deleteMarker(){this.world.deleteMarker(this.position)}get nextPosition(){const{x:e,y:n,z:i}=this.position,r=Dce[this.direction];return{x:e+r.x,y:n,z:i+r.z}}getNextFieldType(){return this.world.getFieldByCoord(this.nextPosition)}validateNextPosition(e,n){let i;if(this.world.isValid(e)){const r=this.getNextFieldType();if(r===Bi.wall)i="Karol ist am Quader angestoßen.";else if(r>=Bi.brick_first||e.y>0){const a=this.world.getFirstFreeY(e.x,e.z);this.world.isValid(new Q0(e.x,a,e.z))?Math.abs(e.y-a)<=this.jumpHeight?i=void 0:i="Karol kann nicht so hoch/tief springen.":i="Karol kann nicht springen, da keine freie Position mehr."}}else i="Karol ist an der Wand angestoßen.";if(n&&i!==void 0)throw Error(i);return i}hasBricksExactly(e){return this.brickCount===e}deserialize(e){this.position=new Q0(e.position.x,e.position.y,e.position.z),this.direction=e.direction}serialize(){const e=BE(this.position),n=BE(this.direction);return{position:e,direction:n}}}Ka([li],Sa.prototype,"position",2);Ka([li],Sa.prototype,"direction",2);Ka([li],Sa.prototype,"brickCount",2);Ka([li],Sa.prototype,"initialBrickCount",2);Ka([li],Sa.prototype,"maxBrickCount",2);Ka([li],Sa.prototype,"jumpHeight",2);Ka([li],Sa.prototype,"figureIndex",2);Ka([Si],Sa.prototype,"reset",1);Ka([Si],Sa.prototype,"updateSettings",1);Ka([Si],Sa.prototype,"move",1);Ka([Si],Sa.prototype,"turnLeft",1);Ka([Si],Sa.prototype,"turnRight",1);Ka([Si],Sa.prototype,"layBrick",1);Ka([Si],Sa.prototype,"pickupBrick",1);Ka([Si],Sa.prototype,"setMarker",1);Ka([Si],Sa.prototype,"deleteMarker",1);Ka([Si],Sa.prototype,"deserialize",1);var Jr={},vv={},Gw,rU;function mu(){if(rU)return Gw;rU=1;function s($){return $===null?"null":$}function e($){return Array.isArray($)?"["+$.map(s).join(", ")+"]":"null"}String.prototype.seed=String.prototype.seed||Math.round(Math.random()*Math.pow(2,32)),String.prototype.hashCode=function(){const $=this.toString();let M,C;const E=$.length&3,w=$.length-E;let I=String.prototype.seed;const O=3432918353,P=461845907;let F=0;for(;F<w;)C=$.charCodeAt(F)&255|($.charCodeAt(++F)&255)<<8|($.charCodeAt(++F)&255)<<16|($.charCodeAt(++F)&255)<<24,++F,C=(C&65535)*O+(((C>>>16)*O&65535)<<16)&4294967295,C=C<<15|C>>>17,C=(C&65535)*P+(((C>>>16)*P&65535)<<16)&4294967295,I^=C,I=I<<13|I>>>19,M=(I&65535)*5+(((I>>>16)*5&65535)<<16)&4294967295,I=(M&65535)+27492+(((M>>>16)+58964&65535)<<16);switch(C=0,E){case 3:C^=($.charCodeAt(F+2)&255)<<16;case 2:C^=($.charCodeAt(F+1)&255)<<8;case 1:C^=$.charCodeAt(F)&255,C=(C&65535)*O+(((C>>>16)*O&65535)<<16)&4294967295,C=C<<15|C>>>17,C=(C&65535)*P+(((C>>>16)*P&65535)<<16)&4294967295,I^=C}return I^=$.length,I^=I>>>16,I=(I&65535)*2246822507+(((I>>>16)*2246822507&65535)<<16)&4294967295,I^=I>>>13,I=(I&65535)*3266489909+(((I>>>16)*3266489909&65535)<<16)&4294967295,I^=I>>>16,I>>>0};function n($,M){return $?$.equals(M):$==M}function i($){return $?$.hashCode():-1}class r{constructor(M,C){this.data={},this.hashFunction=M||i,this.equalsFunction=C||n}add(M){const E="hash_"+this.hashFunction(M);if(E in this.data){const w=this.data[E];for(let I=0;I<w.length;I++)if(this.equalsFunction(M,w[I]))return w[I];return w.push(M),M}else return this.data[E]=[M],M}contains(M){return this.get(M)!=null}get(M){const E="hash_"+this.hashFunction(M);if(E in this.data){const w=this.data[E];for(let I=0;I<w.length;I++)if(this.equalsFunction(M,w[I]))return w[I]}return null}values(){let M=[];for(const C in this.data)C.indexOf("hash_")===0&&(M=M.concat(this.data[C]));return M}toString(){return e(this.values())}get length(){let M=0;for(const C in this.data)C.indexOf("hash_")===0&&(M=M+this.data[C].length);return M}}class a{constructor(){this.data=[]}add(M){this.data[M]=!0}or(M){const C=this;Object.keys(M.data).map(function(E){C.add(E)})}remove(M){delete this.data[M]}contains(M){return this.data[M]===!0}values(){return Object.keys(this.data)}minValue(){return Math.min.apply(null,this.values())}hashCode(){const M=new p;return M.update(this.values()),M.finish()}equals(M){return M instanceof a?this.hashCode()===M.hashCode():!1}toString(){return"{"+this.values().join(", ")+"}"}get length(){return this.values().length}}class l{constructor(M,C){this.data={},this.hashFunction=M||i,this.equalsFunction=C||n}put(M,C){const E="hash_"+this.hashFunction(M);if(E in this.data){const w=this.data[E];for(let I=0;I<w.length;I++){const O=w[I];if(this.equalsFunction(M,O.key)){const P=O.value;return O.value=C,P}}return w.push({key:M,value:C}),C}else return this.data[E]=[{key:M,value:C}],C}containsKey(M){const C="hash_"+this.hashFunction(M);if(C in this.data){const E=this.data[C];for(let w=0;w<E.length;w++){const I=E[w];if(this.equalsFunction(M,I.key))return!0}}return!1}get(M){const C="hash_"+this.hashFunction(M);if(C in this.data){const E=this.data[C];for(let w=0;w<E.length;w++){const I=E[w];if(this.equalsFunction(M,I.key))return I.value}}return null}entries(){let M=[];for(const C in this.data)C.indexOf("hash_")===0&&(M=M.concat(this.data[C]));return M}getKeys(){return this.entries().map(function(M){return M.key})}getValues(){return this.entries().map(function(M){return M.value})}toString(){return"["+this.entries().map(function(C){return"{"+C.key+":"+C.value+"}"}).join(", ")+"]"}get length(){let M=0;for(const C in this.data)C.indexOf("hash_")===0&&(M=M+this.data[C].length);return M}}class h{constructor(){this.data={}}get(M){return M="k-"+M,M in this.data?this.data[M]:null}put(M,C){M="k-"+M,this.data[M]=C}values(){const M=this.data;return Object.keys(this.data).map(function(E){return M[E]})}}class f{constructor(M){this.defaultMapCtor=M||l,this.cacheMap=new this.defaultMapCtor}get(M,C){const E=this.cacheMap.get(M)||null;return E===null?null:E.get(C)||null}set(M,C,E){let w=this.cacheMap.get(M)||null;w===null&&(w=new this.defaultMapCtor,this.cacheMap.put(M,w)),w.put(C,E)}}class p{constructor(){this.count=0,this.hash=0}update(){for(let M=0;M<arguments.length;M++){const C=arguments[M];if(C!=null)if(Array.isArray(C))this.update.apply(this,C);else{let E=0;switch(typeof C){case"undefined":case"function":continue;case"number":case"boolean":E=C;break;case"string":E=C.hashCode();break;default:C.updateHashCode?C.updateHashCode(this):console.log("No updateHashCode for "+C.toString());continue}E=E*3432918353,E=E<<15|E>>>17,E=E*461845907,this.count=this.count+1;let w=this.hash^E;w=w<<13|w>>>19,w=w*5+3864292196,this.hash=w}}}finish(){let M=this.hash^this.count*4;return M=M^M>>>16,M=M*2246822507,M=M^M>>>13,M=M*3266489909,M=M^M>>>16,M}}function v(){const $=new p;return $.update.apply($,arguments),$.finish()}function T($,M){return $=$.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),M&&($=$.replace(/ /g,"·")),$}function y($){return $.replace(/\w\S*/g,function(M){return M.charAt(0).toUpperCase()+M.substr(1)})}function S($,M){if(!Array.isArray($)||!Array.isArray(M))return!1;if($===M)return!0;if($.length!==M.length)return!1;for(let C=0;C<$.length;C++)if($[C]!==M[C]&&(!$[C].equals||!$[C].equals(M[C])))return!1;return!0}return Gw={Hash:p,Set:r,Map:l,BitSet:a,AltDict:h,DoubleDict:f,hashStuff:v,escapeWhitespace:T,arrayToString:e,titleCase:y,equalArrays:S},Gw}var zw,oU;function ra(){if(oU)return zw;oU=1;class s{constructor(){this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null}getTokenSource(){return this.source[0]}getInputStream(){return this.source[1]}get text(){return this._text}set text(i){this._text=i}}s.INVALID_TYPE=0,s.EPSILON=-2,s.MIN_USER_TOKEN_TYPE=1,s.EOF=-1,s.DEFAULT_CHANNEL=0,s.HIDDEN_CHANNEL=1;class e extends s{constructor(i,r,a,l,h){super(),this.source=i!==void 0?i:e.EMPTY_SOURCE,this.type=r!==void 0?r:null,this.channel=a!==void 0?a:s.DEFAULT_CHANNEL,this.start=l!==void 0?l:-1,this.stop=h!==void 0?h:-1,this.tokenIndex=-1,this.source[0]!==null?(this.line=i[0].line,this.column=i[0].column):this.column=-1}clone(){const i=new e(this.source,this.type,this.channel,this.start,this.stop);return i.tokenIndex=this.tokenIndex,i.line=this.line,i.column=this.column,i.text=this.text,i}toString(){let i=this.text;return i!==null?i=i.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):i="<no text>","[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+i+"',<"+this.type+">"+(this.channel>0?",channel="+this.channel:"")+","+this.line+":"+this.column+"]"}get text(){if(this._text!==null)return this._text;const i=this.getInputStream();if(i===null)return null;const r=i.size;return this.start<r&&this.stop<r?i.getText(this.start,this.stop):"<EOF>"}set text(i){this._text=i}}return e.EMPTY_SOURCE=[null,null],zw={Token:s,CommonToken:e},zw}var Z$={},Vw,aU;function qg(){if(aU)return Vw;aU=1;class s{constructor(){this.atn=null,this.stateNumber=s.INVALID_STATE_NUMBER,this.stateType=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null}toString(){return this.stateNumber}equals(C){return C instanceof s?this.stateNumber===C.stateNumber:!1}isNonGreedyExitState(){return!1}addTransition(C,E){E===void 0&&(E=-1),this.transitions.length===0?this.epsilonOnlyTransitions=C.isEpsilon:this.epsilonOnlyTransitions!==C.isEpsilon&&(this.epsilonOnlyTransitions=!1),E===-1?this.transitions.push(C):this.transitions.splice(E,1,C)}}s.INVALID_TYPE=0,s.BASIC=1,s.RULE_START=2,s.BLOCK_START=3,s.PLUS_BLOCK_START=4,s.STAR_BLOCK_START=5,s.TOKEN_START=6,s.RULE_STOP=7,s.BLOCK_END=8,s.STAR_LOOP_BACK=9,s.STAR_LOOP_ENTRY=10,s.PLUS_LOOP_BACK=11,s.LOOP_END=12,s.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"],s.INVALID_STATE_NUMBER=-1;class e extends s{constructor(){super(),this.stateType=s.BASIC}}class n extends s{constructor(){return super(),this.decision=-1,this.nonGreedy=!1,this}}class i extends n{constructor(){return super(),this.endState=null,this}}class r extends i{constructor(){return super(),this.stateType=s.BLOCK_START,this}}class a extends s{constructor(){return super(),this.stateType=s.BLOCK_END,this.startState=null,this}}class l extends s{constructor(){return super(),this.stateType=s.RULE_STOP,this}}class h extends s{constructor(){return super(),this.stateType=s.RULE_START,this.stopState=null,this.isPrecedenceRule=!1,this}}class f extends n{constructor(){return super(),this.stateType=s.PLUS_LOOP_BACK,this}}class p extends i{constructor(){return super(),this.stateType=s.PLUS_BLOCK_START,this.loopBackState=null,this}}class v extends i{constructor(){return super(),this.stateType=s.STAR_BLOCK_START,this}}class T extends s{constructor(){return super(),this.stateType=s.STAR_LOOP_BACK,this}}class y extends n{constructor(){return super(),this.stateType=s.STAR_LOOP_ENTRY,this.loopBackState=null,this.isPrecedenceDecision=null,this}}class S extends s{constructor(){return super(),this.stateType=s.LOOP_END,this.loopBackState=null,this}}class $ extends n{constructor(){return super(),this.stateType=s.TOKEN_START,this}}return Vw={ATNState:s,BasicState:e,DecisionState:n,BlockStartState:i,BlockEndState:a,LoopEndState:S,RuleStartState:h,RuleStopState:l,TokensStartState:$,PlusLoopbackState:f,StarLoopbackState:T,StarLoopEntryState:y,PlusBlockStartState:p,StarBlockStartState:v,BasicBlockStartState:r},Vw}var Ww,lU;function lA(){if(lU)return Ww;lU=1;const{Set:s,Hash:e,equalArrays:n}=mu();class i{hashCode(){const p=new e;return this.updateHashCode(p),p.finish()}evaluate(p,v){}evalPrecedence(p,v){return this}static andContext(p,v){if(p===null||p===i.NONE)return v;if(v===null||v===i.NONE)return p;const T=new l(p,v);return T.opnds.length===1?T.opnds[0]:T}static orContext(p,v){if(p===null)return v;if(v===null)return p;if(p===i.NONE||v===i.NONE)return i.NONE;const T=new h(p,v);return T.opnds.length===1?T.opnds[0]:T}}class r extends i{constructor(p,v,T){super(),this.ruleIndex=p===void 0?-1:p,this.predIndex=v===void 0?-1:v,this.isCtxDependent=T===void 0?!1:T}evaluate(p,v){const T=this.isCtxDependent?v:null;return p.sempred(T,this.ruleIndex,this.predIndex)}updateHashCode(p){p.update(this.ruleIndex,this.predIndex,this.isCtxDependent)}equals(p){return this===p?!0:p instanceof r?this.ruleIndex===p.ruleIndex&&this.predIndex===p.predIndex&&this.isCtxDependent===p.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}i.NONE=new r;class a extends i{constructor(p){super(),this.precedence=p===void 0?0:p}evaluate(p,v){return p.precpred(v,this.precedence)}evalPrecedence(p,v){return p.precpred(v,this.precedence)?i.NONE:null}compareTo(p){return this.precedence-p.precedence}updateHashCode(p){p.update(this.precedence)}equals(p){return this===p?!0:p instanceof a?this.precedence===p.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}static filterPrecedencePredicates(p){const v=[];return p.values().map(function(T){T instanceof a&&v.push(T)}),v}}class l extends i{constructor(p,v){super();const T=new s;p instanceof l?p.opnds.map(function(S){T.add(S)}):T.add(p),v instanceof l?v.opnds.map(function(S){T.add(S)}):T.add(v);const y=a.filterPrecedencePredicates(T);if(y.length>0){let S=null;y.map(function($){(S===null||$.precedence<S.precedence)&&(S=$)}),T.add(S)}this.opnds=Array.from(T.values())}equals(p){return this===p?!0:p instanceof l?n(this.opnds,p.opnds):!1}updateHashCode(p){p.update(this.opnds,"AND")}evaluate(p,v){for(let T=0;T<this.opnds.length;T++)if(!this.opnds[T].evaluate(p,v))return!1;return!0}evalPrecedence(p,v){let T=!1;const y=[];for(let $=0;$<this.opnds.length;$++){const M=this.opnds[$],C=M.evalPrecedence(p,v);if(T|=C!==M,C===null)return null;C!==i.NONE&&y.push(C)}if(!T)return this;if(y.length===0)return i.NONE;let S=null;return y.map(function($){S=S===null?$:i.andContext(S,$)}),S}toString(){const p=this.opnds.map(v=>v.toString());return(p.length>3?p.slice(3):p).join("&&")}}class h extends i{constructor(p,v){super();const T=new s;p instanceof h?p.opnds.map(function(S){T.add(S)}):T.add(p),v instanceof h?v.opnds.map(function(S){T.add(S)}):T.add(v);const y=a.filterPrecedencePredicates(T);if(y.length>0){const S=y.sort(function(M,C){return M.compareTo(C)}),$=S[S.length-1];T.add($)}this.opnds=Array.from(T.values())}equals(p){return this===p?!0:p instanceof h?n(this.opnds,p.opnds):!1}updateHashCode(p){p.update(this.opnds,"OR")}evaluate(p,v){for(let T=0;T<this.opnds.length;T++)if(this.opnds[T].evaluate(p,v))return!0;return!1}evalPrecedence(p,v){let T=!1;const y=[];for(let $=0;$<this.opnds.length;$++){const M=this.opnds[$],C=M.evalPrecedence(p,v);if(T|=C!==M,C===i.NONE)return i.NONE;C!==null&&y.push(C)}return T?(y.length===0,null):this}toString(){const p=this.opnds.map(v=>v.toString());return(p.length>3?p.slice(3):p).join("||")}}return Ww={SemanticContext:i,PrecedencePredicate:a,Predicate:r},Ww}var uU;function t1(){if(uU)return Z$;uU=1;const{DecisionState:s}=qg(),{SemanticContext:e}=lA(),{Hash:n}=mu();function i(l,h){if(l===null){const f={state:null,alt:null,context:null,semanticContext:null};return h&&(f.reachesIntoOuterContext=0),f}else{const f={};return f.state=l.state||null,f.alt=l.alt===void 0?null:l.alt,f.context=l.context||null,f.semanticContext=l.semanticContext||null,h&&(f.reachesIntoOuterContext=l.reachesIntoOuterContext||0,f.precedenceFilterSuppressed=l.precedenceFilterSuppressed||!1),f}}let r=class HO{constructor(h,f){this.checkContext(h,f),h=i(h),f=i(f,!0),this.state=h.state!==null?h.state:f.state,this.alt=h.alt!==null?h.alt:f.alt,this.context=h.context!==null?h.context:f.context,this.semanticContext=h.semanticContext!==null?h.semanticContext:f.semanticContext!==null?f.semanticContext:e.NONE,this.reachesIntoOuterContext=f.reachesIntoOuterContext,this.precedenceFilterSuppressed=f.precedenceFilterSuppressed}checkContext(h,f){(h.context===null||h.context===void 0)&&(f===null||f.context===null||f.context===void 0)&&(this.context=null)}hashCode(){const h=new n;return this.updateHashCode(h),h.finish()}updateHashCode(h){h.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)}equals(h){return this===h?!0:h instanceof HO?this.state.stateNumber===h.state.stateNumber&&this.alt===h.alt&&(this.context===null?h.context===null:this.context.equals(h.context))&&this.semanticContext.equals(h.semanticContext)&&this.precedenceFilterSuppressed===h.precedenceFilterSuppressed:!1}hashCodeForConfigSet(){const h=new n;return h.update(this.state.stateNumber,this.alt,this.semanticContext),h.finish()}equalsForConfigSet(h){return this===h?!0:h instanceof HO?this.state.stateNumber===h.state.stateNumber&&this.alt===h.alt&&this.semanticContext.equals(h.semanticContext):!1}toString(){return"("+this.state+","+this.alt+(this.context!==null?",["+this.context.toString()+"]":"")+(this.semanticContext!==e.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"}};class a extends r{constructor(h,f){super(h,f);const p=h.lexerActionExecutor||null;return this.lexerActionExecutor=p||(f!==null?f.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=f!==null?this.checkNonGreedyDecision(f,this.state):!1,this.hashCodeForConfigSet=a.prototype.hashCode,this.equalsForConfigSet=a.prototype.equals,this}updateHashCode(h){h.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)}equals(h){return this===h||h instanceof a&&this.passedThroughNonGreedyDecision===h.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(h.lexerActionExecutor):!h.lexerActionExecutor)&&super.equals(h)}checkNonGreedyDecision(h,f){return h.passedThroughNonGreedyDecision||f instanceof s&&f.nonGreedy}}return Z$.ATNConfig=r,Z$.LexerATNConfig=a,Z$}var Xw,cU;function Wc(){if(cU)return Xw;cU=1;const{Token:s}=ra();class e{constructor(r,a){this.start=r,this.stop=a}clone(){return new e(this.start,this.stop)}contains(r){return r>=this.start&&r<this.stop}toString(){return this.start===this.stop-1?this.start.toString():this.start.toString()+".."+(this.stop-1).toString()}get length(){return this.stop-this.start}}class n{constructor(){this.intervals=null,this.readOnly=!1}first(r){return this.intervals===null||this.intervals.length===0?s.INVALID_TYPE:this.intervals[0].start}addOne(r){this.addInterval(new e(r,r+1))}addRange(r,a){this.addInterval(new e(r,a+1))}addInterval(r){if(this.intervals===null)this.intervals=[],this.intervals.push(r.clone());else{for(let a=0;a<this.intervals.length;a++){const l=this.intervals[a];if(r.stop<l.start){this.intervals.splice(a,0,r);return}else if(r.stop===l.start){this.intervals[a]=new e(r.start,l.stop);return}else if(r.start<=l.stop){this.intervals[a]=new e(Math.min(l.start,r.start),Math.max(l.stop,r.stop)),this.reduce(a);return}}this.intervals.push(r.clone())}}addSet(r){return r.intervals!==null&&r.intervals.forEach(a=>this.addInterval(a),this),this}reduce(r){if(r<this.intervals.length-1){const a=this.intervals[r],l=this.intervals[r+1];a.stop>=l.stop?(this.intervals.splice(r+1,1),this.reduce(r)):a.stop>=l.start&&(this.intervals[r]=new e(a.start,l.stop),this.intervals.splice(r+1,1))}}complement(r,a){const l=new n;return l.addInterval(new e(r,a+1)),this.intervals!==null&&this.intervals.forEach(h=>l.removeRange(h)),l}contains(r){if(this.intervals===null)return!1;for(let a=0;a<this.intervals.length;a++)if(this.intervals[a].contains(r))return!0;return!1}removeRange(r){if(r.start===r.stop-1)this.removeOne(r.start);else if(this.intervals!==null){let a=0;for(let l=0;l<this.intervals.length;l++){const h=this.intervals[a];if(r.stop<=h.start)return;if(r.start>h.start&&r.stop<h.stop){this.intervals[a]=new e(h.start,r.start);const f=new e(r.stop,h.stop);this.intervals.splice(a,0,f);return}else r.start<=h.start&&r.stop>=h.stop?(this.intervals.splice(a,1),a=a-1):r.start<h.stop?this.intervals[a]=new e(h.start,r.start):r.stop<h.stop&&(this.intervals[a]=new e(r.stop,h.stop));a+=1}}}removeOne(r){if(this.intervals!==null)for(let a=0;a<this.intervals.length;a++){const l=this.intervals[a];if(r<l.start)return;if(r===l.start&&r===l.stop-1){this.intervals.splice(a,1);return}else if(r===l.start){this.intervals[a]=new e(l.start+1,l.stop);return}else if(r===l.stop-1){this.intervals[a]=new e(l.start,l.stop-1);return}else if(r<l.stop-1){const h=new e(l.start,r);l.start=r+1,this.intervals.splice(a,0,h);return}}}toString(r,a,l){return r=r||null,a=a||null,l=l||!1,this.intervals===null?"{}":r!==null||a!==null?this.toTokenString(r,a):l?this.toCharString():this.toIndexString()}toCharString(){const r=[];for(let a=0;a<this.intervals.length;a++){const l=this.intervals[a];l.stop===l.start+1?l.start===s.EOF?r.push("<EOF>"):r.push("'"+String.fromCharCode(l.start)+"'"):r.push("'"+String.fromCharCode(l.start)+"'..'"+String.fromCharCode(l.stop-1)+"'")}return r.length>1?"{"+r.join(", ")+"}":r[0]}toIndexString(){const r=[];for(let a=0;a<this.intervals.length;a++){const l=this.intervals[a];l.stop===l.start+1?l.start===s.EOF?r.push("<EOF>"):r.push(l.start.toString()):r.push(l.start.toString()+".."+(l.stop-1).toString())}return r.length>1?"{"+r.join(", ")+"}":r[0]}toTokenString(r,a){const l=[];for(let h=0;h<this.intervals.length;h++){const f=this.intervals[h];for(let p=f.start;p<f.stop;p++)l.push(this.elementName(r,a,p))}return l.length>1?"{"+l.join(", ")+"}":l[0]}elementName(r,a,l){return l===s.EOF?"<EOF>":l===s.EPSILON?"<EPSILON>":r[l]||a[l]}get length(){return this.intervals.map(r=>r.length).reduce((r,a)=>r+a)}}return Xw={Interval:e,IntervalSet:n},Xw}var jw,hU;function uA(){if(hU)return jw;hU=1;const{Token:s}=ra(),{IntervalSet:e}=Wc(),{Predicate:n,PrecedencePredicate:i}=lA();class r{constructor(E){if(E==null)throw"target cannot be null.";this.target=E,this.isEpsilon=!1,this.label=null}}r.EPSILON=1,r.RANGE=2,r.RULE=3,r.PREDICATE=4,r.ATOM=5,r.ACTION=6,r.SET=7,r.NOT_SET=8,r.WILDCARD=9,r.PRECEDENCE=10,r.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"],r.serializationTypes={EpsilonTransition:r.EPSILON,RangeTransition:r.RANGE,RuleTransition:r.RULE,PredicateTransition:r.PREDICATE,AtomTransition:r.ATOM,ActionTransition:r.ACTION,SetTransition:r.SET,NotSetTransition:r.NOT_SET,WildcardTransition:r.WILDCARD,PrecedencePredicateTransition:r.PRECEDENCE};class a extends r{constructor(E,w){super(E),this.label_=w,this.label=this.makeLabel(),this.serializationType=r.ATOM}makeLabel(){const E=new e;return E.addOne(this.label_),E}matches(E,w,I){return this.label_===E}toString(){return this.label_}}class l extends r{constructor(E,w,I,O){super(E),this.ruleIndex=w,this.precedence=I,this.followState=O,this.serializationType=r.RULE,this.isEpsilon=!0}matches(E,w,I){return!1}}class h extends r{constructor(E,w){super(E),this.serializationType=r.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=w}matches(E,w,I){return!1}toString(){return"epsilon"}}class f extends r{constructor(E,w,I){super(E),this.serializationType=r.RANGE,this.start=w,this.stop=I,this.label=this.makeLabel()}makeLabel(){const E=new e;return E.addRange(this.start,this.stop),E}matches(E,w,I){return E>=this.start&&E<=this.stop}toString(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"}}class p extends r{constructor(E){super(E)}}class v extends p{constructor(E,w,I,O){super(E),this.serializationType=r.PREDICATE,this.ruleIndex=w,this.predIndex=I,this.isCtxDependent=O,this.isEpsilon=!0}matches(E,w,I){return!1}getPredicate(){return new n(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}}class T extends r{constructor(E,w,I,O){super(E),this.serializationType=r.ACTION,this.ruleIndex=w,this.actionIndex=I===void 0?-1:I,this.isCtxDependent=O===void 0?!1:O,this.isEpsilon=!0}matches(E,w,I){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}}class y extends r{constructor(E,w){super(E),this.serializationType=r.SET,w!=null?this.label=w:(this.label=new e,this.label.addOne(s.INVALID_TYPE))}matches(E,w,I){return this.label.contains(E)}toString(){return this.label.toString()}}class S extends y{constructor(E,w){super(E,w),this.serializationType=r.NOT_SET}matches(E,w,I){return E>=w&&E<=I&&!super.matches(E,w,I)}toString(){return"~"+super.toString()}}class $ extends r{constructor(E){super(E),this.serializationType=r.WILDCARD}matches(E,w,I){return E>=w&&E<=I}toString(){return"."}}class M extends p{constructor(E,w){super(E),this.serializationType=r.PRECEDENCE,this.precedence=w,this.isEpsilon=!0}matches(E,w,I){return!1}getPredicate(){return new i(this.precedence)}toString(){return this.precedence+" >= _p"}}return jw={Transition:r,AtomTransition:a,SetTransition:y,NotSetTransition:S,RuleTransition:l,ActionTransition:T,EpsilonTransition:h,RangeTransition:f,WildcardTransition:$,PredicateTransition:v,PrecedencePredicateTransition:M,AbstractPredicateTransition:p},jw}var Yw,dU;function lT(){if(dU)return Yw;dU=1;const{Token:s}=ra(),{Interval:e}=Wc(),n=new e(-1,-2);class i{}class r extends i{constructor(){super()}}class a extends r{constructor(){super()}}class l extends a{constructor(){super()}getRuleContext(){throw new Error("missing interface implementation")}}class h extends a{constructor(){super()}}class f extends h{constructor(){super()}}class p{visit(M){return Array.isArray(M)?M.map(function(C){return C.accept(this)},this):M.accept(this)}visitChildren(M){return M.children?this.visit(M.children):null}visitTerminal(M){}visitErrorNode(M){}}class v{visitTerminal(M){}visitErrorNode(M){}enterEveryRule(M){}exitEveryRule(M){}}class T extends h{constructor(M){super(),this.parentCtx=null,this.symbol=M}getChild(M){return null}getSymbol(){return this.symbol}getParent(){return this.parentCtx}getPayload(){return this.symbol}getSourceInterval(){if(this.symbol===null)return n;const M=this.symbol.tokenIndex;return new e(M,M)}getChildCount(){return 0}accept(M){return M.visitTerminal(this)}getText(){return this.symbol.text}toString(){return this.symbol.type===s.EOF?"<EOF>":this.symbol.text}}class y extends T{constructor(M){super(M)}isErrorNode(){return!0}accept(M){return M.visitErrorNode(this)}}class S{walk(M,C){if(C instanceof f||C.isErrorNode!==void 0&&C.isErrorNode())M.visitErrorNode(C);else if(C instanceof h)M.visitTerminal(C);else{this.enterRule(M,C);for(let w=0;w<C.getChildCount();w++){const I=C.getChild(w);this.walk(M,I)}this.exitRule(M,C)}}enterRule(M,C){const E=C.getRuleContext();M.enterEveryRule(E),E.enterRule(M)}exitRule(M,C){const E=C.getRuleContext();E.exitRule(M),M.exitEveryRule(E)}}return S.DEFAULT=new S,Yw={RuleNode:l,ErrorNode:f,TerminalNode:h,ErrorNodeImpl:y,TerminalNodeImpl:T,ParseTreeListener:v,ParseTreeVisitor:p,ParseTreeWalker:S,INVALID_INTERVAL:n},Yw}var Kw,fU;function sV(){if(fU)return Kw;fU=1;const s=mu(),{Token:e}=ra(),{ErrorNode:n,TerminalNode:i,RuleNode:r}=lT(),a={toStringTree:function(l,h,f){h=h||null,f=f||null,f!==null&&(h=f.ruleNames);let p=a.getNodeText(l,h);p=s.escapeWhitespace(p,!1);const v=l.getChildCount();if(v===0)return p;let T="("+p+" ";v>0&&(p=a.toStringTree(l.getChild(0),h),T=T.concat(p));for(let y=1;y<v;y++)p=a.toStringTree(l.getChild(y),h),T=T.concat(" "+p);return T=T.concat(")"),T},getNodeText:function(l,h,f){if(h=h||null,f=f||null,f!==null&&(h=f.ruleNames),h!==null)if(l instanceof r){const T=l.getRuleContext().getAltNumber();return T!=0?h[l.ruleIndex]+":"+T:h[l.ruleIndex]}else{if(l instanceof n)return l.toString();if(l instanceof i&&l.symbol!==null)return l.symbol.text}const p=l.getPayload();return p instanceof e?p.text:l.getPayload().toString()},getChildren:function(l){const h=[];for(let f=0;f<l.getChildCount();f++)h.push(l.getChild(f));return h},getAncestors:function(l){let h=[];for(l=l.getParent();l!==null;)h=[l].concat(h),l=l.getParent();return h},findAllTokenNodes:function(l,h){return a.findAllNodes(l,h,!0)},findAllRuleNodes:function(l,h){return a.findAllNodes(l,h,!1)},findAllNodes:function(l,h,f){const p=[];return a._findAllNodes(l,h,f,p),p},_findAllNodes:function(l,h,f,p){f&&l instanceof i?l.symbol.type===h&&p.push(l):!f&&l instanceof r&&l.ruleIndex===h&&p.push(l);for(let v=0;v<l.getChildCount();v++)a._findAllNodes(l.getChild(v),h,f,p)},descendants:function(l){let h=[l];for(let f=0;f<l.getChildCount();f++)h=h.concat(a.descendants(l.getChild(f)));return h}};return Kw=a,Kw}var qw,pU;function jN(){if(pU)return qw;pU=1;const{RuleNode:s}=lT(),{INVALID_INTERVAL:e}=lT(),n=sV();class i extends s{constructor(a,l){super(),this.parentCtx=a||null,this.invokingState=l||-1}depth(){let a=0,l=this;for(;l!==null;)l=l.parentCtx,a+=1;return a}isEmpty(){return this.invokingState===-1}getSourceInterval(){return e}getRuleContext(){return this}getPayload(){return this}getText(){return this.getChildCount()===0?"":this.children.map(function(a){return a.getText()}).join("")}getAltNumber(){return 0}setAltNumber(a){}getChild(a){return null}getChildCount(){return 0}accept(a){return a.visitChildren(this)}toStringTree(a,l){return n.toStringTree(this,a,l)}toString(a,l){a=a||null,l=l||null;let h=this,f="[";for(;h!==null&&h!==l;){if(a===null)h.isEmpty()||(f+=h.invokingState);else{const p=h.ruleIndex,v=p>=0&&p<a.length?a[p]:""+p;f+=v}h.parentCtx!==null&&(a!==null||!h.parentCtx.isEmpty())&&(f+=" "),h=h.parentCtx}return f+="]",f}}return qw=i,qw}var Jw,mU;function Fg(){if(mU)return Jw;mU=1;const s=jN(),{Hash:e,Map:n,equalArrays:i}=mu();class r{constructor(E){this.cachedHashCode=E}isEmpty(){return this===r.EMPTY}hasEmptyPath(){return this.getReturnState(this.length-1)===r.EMPTY_RETURN_STATE}hashCode(){return this.cachedHashCode}updateHashCode(E){E.update(this.cachedHashCode)}}r.EMPTY=null,r.EMPTY_RETURN_STATE=2147483647,r.globalNodeCount=1,r.id=r.globalNodeCount;class a{constructor(){this.cache=new n}add(E){if(E===r.EMPTY)return r.EMPTY;const w=this.cache.get(E)||null;return w!==null?w:(this.cache.put(E,E),E)}get(E){return this.cache.get(E)||null}get length(){return this.cache.length}}class l extends r{constructor(E,w){let I=0;const O=new e;E!==null?O.update(E,w):O.update(1),I=O.finish(),super(I),this.parentCtx=E,this.returnState=w}getParent(E){return this.parentCtx}getReturnState(E){return this.returnState}equals(E){return this===E?!0:E instanceof l?this.hashCode()!==E.hashCode()||this.returnState!==E.returnState?!1:this.parentCtx==null?E.parentCtx==null:this.parentCtx.equals(E.parentCtx):!1}toString(){const E=this.parentCtx===null?"":this.parentCtx.toString();return E.length===0?this.returnState===r.EMPTY_RETURN_STATE?"$":""+this.returnState:""+this.returnState+" "+E}get length(){return 1}static create(E,w){return w===r.EMPTY_RETURN_STATE&&E===null?r.EMPTY:new l(E,w)}}class h extends l{constructor(){super(null,r.EMPTY_RETURN_STATE)}isEmpty(){return!0}getParent(E){return null}getReturnState(E){return this.returnState}equals(E){return this===E}toString(){return"$"}}r.EMPTY=new h;class f extends r{constructor(E,w){const I=new e;I.update(E,w);const O=I.finish();return super(O),this.parents=E,this.returnStates=w,this}isEmpty(){return this.returnStates[0]===r.EMPTY_RETURN_STATE}getParent(E){return this.parents[E]}getReturnState(E){return this.returnStates[E]}equals(E){return this===E?!0:E instanceof f?this.hashCode()!==E.hashCode()?!1:i(this.returnStates,E.returnStates)&&i(this.parents,E.parents):!1}toString(){if(this.isEmpty())return"[]";{let E="[";for(let w=0;w<this.returnStates.length;w++){if(w>0&&(E=E+", "),this.returnStates[w]===r.EMPTY_RETURN_STATE){E=E+"$";continue}E=E+this.returnStates[w],this.parents[w]!==null?E=E+" "+this.parents[w]:E=E+"null"}return E+"]"}}get length(){return this.returnStates.length}}function p(C,E){if(E==null&&(E=s.EMPTY),E.parentCtx===null||E===s.EMPTY)return r.EMPTY;const w=p(C,E.parentCtx),O=C.states[E.invokingState].transitions[0];return l.create(w,O.followState.stateNumber)}function v(C,E,w,I){if(C===E)return C;if(C instanceof l&&E instanceof l)return T(C,E,w,I);if(w){if(C instanceof h)return C;if(E instanceof h)return E}return C instanceof l&&(C=new f([C.getParent()],[C.returnState])),E instanceof l&&(E=new f([E.getParent()],[E.returnState])),S(C,E,w,I)}function T(C,E,w,I){if(I!==null){let P=I.get(C,E);if(P!==null||(P=I.get(E,C),P!==null))return P}const O=y(C,E,w);if(O!==null)return I!==null&&I.set(C,E,O),O;if(C.returnState===E.returnState){const P=v(C.parentCtx,E.parentCtx,w,I);if(P===C.parentCtx)return C;if(P===E.parentCtx)return E;const F=l.create(P,C.returnState);return I!==null&&I.set(C,E,F),F}else{let P=null;if((C===E||C.parentCtx!==null&&C.parentCtx===E.parentCtx)&&(P=C.parentCtx),P!==null){const G=[C.returnState,E.returnState];C.returnState>E.returnState&&(G[0]=E.returnState,G[1]=C.returnState);const D=[P,P],Z=new f(D,G);return I!==null&&I.set(C,E,Z),Z}const F=[C.returnState,E.returnState];let V=[C.parentCtx,E.parentCtx];C.returnState>E.returnState&&(F[0]=E.returnState,F[1]=C.returnState,V=[E.parentCtx,C.parentCtx]);const X=new f(V,F);return I!==null&&I.set(C,E,X),X}}function y(C,E,w){if(w){if(C===r.EMPTY||E===r.EMPTY)return r.EMPTY}else{if(C===r.EMPTY&&E===r.EMPTY)return r.EMPTY;if(C===r.EMPTY){const I=[E.returnState,r.EMPTY_RETURN_STATE],O=[E.parentCtx,null];return new f(O,I)}else if(E===r.EMPTY){const I=[C.returnState,r.EMPTY_RETURN_STATE],O=[C.parentCtx,null];return new f(O,I)}}return null}function S(C,E,w,I){if(I!==null){let D=I.get(C,E);if(D!==null||(D=I.get(E,C),D!==null))return D}let O=0,P=0,F=0,V=[],X=[];for(;O<C.returnStates.length&&P<E.returnStates.length;){const D=C.parents[O],Z=E.parents[P];if(C.returnStates[O]===E.returnStates[P]){const Y=C.returnStates[O];Y===r.EMPTY_RETURN_STATE&&D===null&&Z===null||D!==null&&Z!==null&&D===Z?(X[F]=D,V[F]=Y):(X[F]=v(D,Z,w,I),V[F]=Y),O+=1,P+=1}else C.returnStates[O]<E.returnStates[P]?(X[F]=D,V[F]=C.returnStates[O],O+=1):(X[F]=Z,V[F]=E.returnStates[P],P+=1);F+=1}if(O<C.returnStates.length)for(let D=O;D<C.returnStates.length;D++)X[F]=C.parents[D],V[F]=C.returnStates[D],F+=1;else for(let D=P;D<E.returnStates.length;D++)X[F]=E.parents[D],V[F]=E.returnStates[D],F+=1;if(F<X.length){if(F===1){const D=l.create(X[0],V[0]);return I!==null&&I.set(C,E,D),D}X=X.slice(0,F),V=V.slice(0,F)}const G=new f(X,V);return G===C?(I!==null&&I.set(C,E,C),C):G===E?(I!==null&&I.set(C,E,E),E):($(X),I!==null&&I.set(C,E,G),G)}function $(C){const E=new n;for(let w=0;w<C.length;w++){const I=C[w];E.containsKey(I)||E.put(I,I)}for(let w=0;w<C.length;w++)C[w]=E.get(C[w])}function M(C,E,w){if(C.isEmpty())return C;let I=w.get(C)||null;if(I!==null)return I;if(I=E.get(C),I!==null)return w.put(C,I),I;let O=!1,P=[];for(let V=0;V<P.length;V++){const X=M(C.getParent(V),E,w);if(O||X!==C.getParent(V)){if(!O){P=[];for(let G=0;G<C.length;G++)P[G]=C.getParent(G);O=!0}P[V]=X}}if(!O)return E.add(C),w.put(C,C),C;let F=null;return P.length===0?F=r.EMPTY:P.length===1?F=l.create(P[0],C.getReturnState(0)):F=new f(P,C.returnStates),E.add(F),w.put(F,F),w.put(C,F),F}return Jw={merge:v,PredictionContext:r,PredictionContextCache:a,SingletonPredictionContext:l,predictionContextFromRuleContext:p,getCachedPredictionContext:M},Jw}var Zw,gU;function rV(){if(gU)return Zw;gU=1;const{Set:s,BitSet:e}=mu(),{Token:n}=ra(),{ATNConfig:i}=t1(),{IntervalSet:r}=Wc(),{RuleStopState:a}=qg(),{RuleTransition:l,NotSetTransition:h,WildcardTransition:f,AbstractPredicateTransition:p}=uA(),{predictionContextFromRuleContext:v,PredictionContext:T,SingletonPredictionContext:y}=Fg();class S{constructor(M){this.atn=M}getDecisionLookahead(M){if(M===null)return null;const C=M.transitions.length,E=[];for(let w=0;w<C;w++){E[w]=new r;const I=new s;this._LOOK(M.transition(w).target,null,T.EMPTY,E[w],I,new e,!1,!1),(E[w].length===0||E[w].contains(S.HIT_PRED))&&(E[w]=null)}return E}LOOK(M,C,E){const w=new r,I=!0;E=E||null;const O=E!==null?v(M.atn,E):null;return this._LOOK(M,C,O,w,new s,new e,I,!0),w}_LOOK(M,C,E,w,I,O,P,F){const V=new i({state:M,alt:0,context:E},null);if(!I.contains(V)){if(I.add(V),M===C){if(E===null){w.addOne(n.EPSILON);return}else if(E.isEmpty()&&F){w.addOne(n.EOF);return}}if(M instanceof a){if(E===null){w.addOne(n.EPSILON);return}else if(E.isEmpty()&&F){w.addOne(n.EOF);return}if(E!==T.EMPTY){const X=O.contains(M.ruleIndex);try{O.remove(M.ruleIndex);for(let G=0;G<E.length;G++){const D=this.atn.states[E.getReturnState(G)];this._LOOK(D,C,E.getParent(G),w,I,O,P,F)}}finally{X&&O.add(M.ruleIndex)}return}}for(let X=0;X<M.transitions.length;X++){const G=M.transitions[X];if(G.constructor===l){if(O.contains(G.target.ruleIndex))continue;const D=y.create(E,G.followState.stateNumber);try{O.add(G.target.ruleIndex),this._LOOK(G.target,C,D,w,I,O,P,F)}finally{O.remove(G.target.ruleIndex)}}else if(G instanceof p)P?this._LOOK(G.target,C,E,w,I,O,P,F):w.addOne(S.HIT_PRED);else if(G.isEpsilon)this._LOOK(G.target,C,E,w,I,O,P,F);else if(G.constructor===f)w.addRange(n.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{let D=G.label;D!==null&&(G instanceof h&&(D=D.complement(n.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),w.addSet(D))}}}}}return S.HIT_PRED=n.INVALID_TYPE,Zw=S,Zw}var Qw,_U;function CT(){if(_U)return Qw;_U=1;const s=rV(),{IntervalSet:e}=Wc(),{Token:n}=ra();class i{constructor(a,l){this.grammarType=a,this.maxTokenType=l,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=null,this.modeNameToStartState={},this.ruleToTokenType=null,this.lexerActions=null,this.modeToStartState=[]}nextTokensInContext(a,l){return new s(this).LOOK(a,null,l)}nextTokensNoContext(a){return a.nextTokenWithinRule!==null||(a.nextTokenWithinRule=this.nextTokensInContext(a,null),a.nextTokenWithinRule.readOnly=!0),a.nextTokenWithinRule}nextTokens(a,l){return l===void 0?this.nextTokensNoContext(a):this.nextTokensInContext(a,l)}addState(a){a!==null&&(a.atn=this,a.stateNumber=this.states.length),this.states.push(a)}removeState(a){this.states[a.stateNumber]=null}defineDecisionState(a){return this.decisionToState.push(a),a.decision=this.decisionToState.length-1,a.decision}getDecisionState(a){return this.decisionToState.length===0?null:this.decisionToState[a]}getExpectedTokens(a,l){if(a<0||a>=this.states.length)throw"Invalid state number.";const h=this.states[a];let f=this.nextTokens(h);if(!f.contains(n.EPSILON))return f;const p=new e;for(p.addSet(f),p.removeOne(n.EPSILON);l!==null&&l.invokingState>=0&&f.contains(n.EPSILON);){const T=this.states[l.invokingState].transitions[0];f=this.nextTokens(T.followState),p.addSet(f),p.removeOne(n.EPSILON),l=l.parentCtx}return f.contains(n.EPSILON)&&p.addOne(n.EOF),p}}return i.INVALID_ALT_NUMBER=0,Qw=i,Qw}var eI,vU;function Bce(){return vU||(vU=1,eI={LEXER:0,PARSER:1}),eI}var tI,bU;function oV(){if(bU)return tI;bU=1;class s{constructor(n){n===void 0&&(n=null),this.readOnly=!1,this.verifyATN=n===null?!0:n.verifyATN,this.generateRuleBypassTransitions=n===null?!1:n.generateRuleBypassTransitions}}return s.defaultOptions=new s,s.defaultOptions.readOnly=!0,tI=s,tI}var nI,yU;function aV(){if(yU)return nI;yU=1;const s={CHANNEL:0,CUSTOM:1,MODE:2,MORE:3,POP_MODE:4,PUSH_MODE:5,SKIP:6,TYPE:7};class e{constructor(y){this.actionType=y,this.isPositionDependent=!1}hashCode(){const y=new Hash;return this.updateHashCode(y),y.finish()}updateHashCode(y){y.update(this.actionType)}equals(y){return this===y}}class n extends e{constructor(){super(s.SKIP)}execute(y){y.skip()}toString(){return"skip"}}n.INSTANCE=new n;class i extends e{constructor(y){super(s.TYPE),this.type=y}execute(y){y.type=this.type}updateHashCode(y){y.update(this.actionType,this.type)}equals(y){return this===y?!0:y instanceof i?this.type===y.type:!1}toString(){return"type("+this.type+")"}}class r extends e{constructor(y){super(s.PUSH_MODE),this.mode=y}execute(y){y.pushMode(this.mode)}updateHashCode(y){y.update(this.actionType,this.mode)}equals(y){return this===y?!0:y instanceof r?this.mode===y.mode:!1}toString(){return"pushMode("+this.mode+")"}}class a extends e{constructor(){super(s.POP_MODE)}execute(y){y.popMode()}toString(){return"popMode"}}a.INSTANCE=new a;class l extends e{constructor(){super(s.MORE)}execute(y){y.more()}toString(){return"more"}}l.INSTANCE=new l;class h extends e{constructor(y){super(s.MODE),this.mode=y}execute(y){y.mode(this.mode)}updateHashCode(y){y.update(this.actionType,this.mode)}equals(y){return this===y?!0:y instanceof h?this.mode===y.mode:!1}toString(){return"mode("+this.mode+")"}}class f extends e{constructor(y,S){super(s.CUSTOM),this.ruleIndex=y,this.actionIndex=S,this.isPositionDependent=!0}execute(y){y.action(null,this.ruleIndex,this.actionIndex)}updateHashCode(y){y.update(this.actionType,this.ruleIndex,this.actionIndex)}equals(y){return this===y?!0:y instanceof f?this.ruleIndex===y.ruleIndex&&this.actionIndex===y.actionIndex:!1}}class p extends e{constructor(y){super(s.CHANNEL),this.channel=y}execute(y){y._channel=this.channel}updateHashCode(y){y.update(this.actionType,this.channel)}equals(y){return this===y?!0:y instanceof p?this.channel===y.channel:!1}toString(){return"channel("+this.channel+")"}}class v extends e{constructor(y,S){super(S.actionType),this.offset=y,this.action=S,this.isPositionDependent=!0}execute(y){this.action.execute(y)}updateHashCode(y){y.update(this.actionType,this.offset,this.action)}equals(y){return this===y?!0:y instanceof v?this.offset===y.offset&&this.action===y.action:!1}}return nI={LexerActionType:s,LexerSkipAction:n,LexerChannelAction:p,LexerCustomAction:f,LexerIndexedCustomAction:v,LexerMoreAction:l,LexerTypeAction:i,LexerPushModeAction:r,LexerPopModeAction:a,LexerModeAction:h},nI}var iI,TU;function lV(){if(TU)return iI;TU=1;const{Token:s}=ra(),e=CT(),n=Bce(),{ATNState:i,BasicState:r,DecisionState:a,BlockStartState:l,BlockEndState:h,LoopEndState:f,RuleStartState:p,RuleStopState:v,TokensStartState:T,PlusLoopbackState:y,StarLoopbackState:S,StarLoopEntryState:$,PlusBlockStartState:M,StarBlockStartState:C,BasicBlockStartState:E}=qg(),{Transition:w,AtomTransition:I,SetTransition:O,NotSetTransition:P,RuleTransition:F,RangeTransition:V,ActionTransition:X,EpsilonTransition:G,WildcardTransition:D,PredicateTransition:Z,PrecedencePredicateTransition:Y}=uA(),{IntervalSet:j}=Wc(),ne=oV(),{LexerActionType:ee,LexerSkipAction:z,LexerChannelAction:te,LexerCustomAction:ce,LexerMoreAction:pe,LexerTypeAction:K,LexerPushModeAction:fe,LexerPopModeAction:Ne,LexerModeAction:Pe}=aV(),Ee="AADB8D7E-AEEF-4415-AD2B-8204D6CF042E",We="59627784-3BE5-417A-B9EB-8131A7286089",Fe=[Ee,We],gt=3,ft=We;function Ut(Ye,J){const Se=[];return Se[Ye-1]=J,Se.map(function(Ae){return J})}class Ke{constructor(J){J==null&&(J=ne.defaultOptions),this.deserializationOptions=J,this.stateFactories=null,this.actionFactories=null}isFeatureSupported(J,Se){const Ae=Fe.indexOf(J);return Ae<0?!1:Fe.indexOf(Se)>=Ae}deserialize(J){this.reset(J),this.checkVersion(),this.checkUUID();const Se=this.readATN();this.readStates(Se),this.readRules(Se),this.readModes(Se);const Ae=[];return this.readSets(Se,Ae,this.readInt.bind(this)),this.isFeatureSupported(We,this.uuid)&&this.readSets(Se,Ae,this.readInt32.bind(this)),this.readEdges(Se,Ae),this.readDecisions(Se),this.readLexerActions(Se),this.markPrecedenceDecisions(Se),this.verifyATN(Se),this.deserializationOptions.generateRuleBypassTransitions&&Se.grammarType===n.PARSER&&(this.generateRuleBypassTransitions(Se),this.verifyATN(Se)),Se}reset(J){const Se=function(we){const Ie=we.charCodeAt(0);return Ie>1?Ie-2:Ie+65534},Ae=J.split("").map(Se);Ae[0]=J.charCodeAt(0),this.data=Ae,this.pos=0}checkVersion(){const J=this.readInt();if(J!==gt)throw"Could not deserialize ATN with version "+J+" (expected "+gt+")."}checkUUID(){const J=this.readUUID();if(Fe.indexOf(J)<0)throw ft;this.uuid=J}readATN(){const J=this.readInt(),Se=this.readInt();return new e(J,Se)}readStates(J){let Se,Ae,we;const Ie=[],dt=[],Qe=this.readInt();for(let _e=0;_e<Qe;_e++){const se=this.readInt();if(se===i.INVALID_TYPE){J.addState(null);continue}let $e=this.readInt();$e===65535&&($e=-1);const Le=this.stateFactory(se,$e);if(se===i.LOOP_END){const Xe=this.readInt();Ie.push([Le,Xe])}else if(Le instanceof l){const Xe=this.readInt();dt.push([Le,Xe])}J.addState(Le)}for(Se=0;Se<Ie.length;Se++)Ae=Ie[Se],Ae[0].loopBackState=J.states[Ae[1]];for(Se=0;Se<dt.length;Se++)Ae=dt[Se],Ae[0].endState=J.states[Ae[1]];let vt=this.readInt();for(Se=0;Se<vt;Se++)we=this.readInt(),J.states[we].nonGreedy=!0;let et=this.readInt();for(Se=0;Se<et;Se++)we=this.readInt(),J.states[we].isPrecedenceRule=!0}readRules(J){let Se;const Ae=this.readInt();for(J.grammarType===n.LEXER&&(J.ruleToTokenType=Ut(Ae,0)),J.ruleToStartState=Ut(Ae,0),Se=0;Se<Ae;Se++){const we=this.readInt();if(J.ruleToStartState[Se]=J.states[we],J.grammarType===n.LEXER){let Ie=this.readInt();Ie===65535&&(Ie=s.EOF),J.ruleToTokenType[Se]=Ie}}for(J.ruleToStopState=Ut(Ae,0),Se=0;Se<J.states.length;Se++){const we=J.states[Se];we instanceof v&&(J.ruleToStopState[we.ruleIndex]=we,J.ruleToStartState[we.ruleIndex].stopState=we)}}readModes(J){const Se=this.readInt();for(let Ae=0;Ae<Se;Ae++){let we=this.readInt();J.modeToStartState.push(J.states[we])}}readSets(J,Se,Ae){const we=this.readInt();for(let Ie=0;Ie<we;Ie++){const dt=new j;Se.push(dt);const Qe=this.readInt();this.readInt()!==0&&dt.addOne(-1);for(let et=0;et<Qe;et++){const _e=Ae(),se=Ae();dt.addRange(_e,se)}}}readEdges(J,Se){let Ae,we,Ie,dt,Qe;const vt=this.readInt();for(Ae=0;Ae<vt;Ae++){const et=this.readInt(),_e=this.readInt(),se=this.readInt(),$e=this.readInt(),Le=this.readInt(),Xe=this.readInt();dt=this.edgeFactory(J,se,et,_e,$e,Le,Xe,Se),J.states[et].addTransition(dt)}for(Ae=0;Ae<J.states.length;Ae++)for(Ie=J.states[Ae],we=0;we<Ie.transitions.length;we++){const et=Ie.transitions[we];if(!(et instanceof F))continue;let _e=-1;J.ruleToStartState[et.target.ruleIndex].isPrecedenceRule&&et.precedence===0&&(_e=et.target.ruleIndex),dt=new G(et.followState,_e),J.ruleToStopState[et.target.ruleIndex].addTransition(dt)}for(Ae=0;Ae<J.states.length;Ae++){if(Ie=J.states[Ae],Ie instanceof l){if(Ie.endState===null||Ie.endState.startState!==null)throw"IllegalState";Ie.endState.startState=Ie}if(Ie instanceof y)for(we=0;we<Ie.transitions.length;we++)Qe=Ie.transitions[we].target,Qe instanceof M&&(Qe.loopBackState=Ie);else if(Ie instanceof S)for(we=0;we<Ie.transitions.length;we++)Qe=Ie.transitions[we].target,Qe instanceof $&&(Qe.loopBackState=Ie)}}readDecisions(J){const Se=this.readInt();for(let Ae=0;Ae<Se;Ae++){const we=this.readInt(),Ie=J.states[we];J.decisionToState.push(Ie),Ie.decision=Ae}}readLexerActions(J){if(J.grammarType===n.LEXER){const Se=this.readInt();J.lexerActions=Ut(Se,null);for(let Ae=0;Ae<Se;Ae++){const we=this.readInt();let Ie=this.readInt();Ie===65535&&(Ie=-1);let dt=this.readInt();dt===65535&&(dt=-1),J.lexerActions[Ae]=this.lexerActionFactory(we,Ie,dt)}}}generateRuleBypassTransitions(J){let Se;const Ae=J.ruleToStartState.length;for(Se=0;Se<Ae;Se++)J.ruleToTokenType[Se]=J.maxTokenType+Se+1;for(Se=0;Se<Ae;Se++)this.generateRuleBypassTransition(J,Se)}generateRuleBypassTransition(J,Se){let Ae,we;const Ie=new E;Ie.ruleIndex=Se,J.addState(Ie);const dt=new h;dt.ruleIndex=Se,J.addState(dt),Ie.endState=dt,J.defineDecisionState(Ie),dt.startState=Ie;let Qe=null,vt=null;if(J.ruleToStartState[Se].isPrecedenceRule){for(vt=null,Ae=0;Ae<J.states.length;Ae++)if(we=J.states[Ae],this.stateIsEndStateFor(we,Se)){vt=we,Qe=we.loopBackState.transitions[0];break}if(Qe===null)throw"Couldn't identify final state of the precedence rule prefix section."}else vt=J.ruleToStopState[Se];for(Ae=0;Ae<J.states.length;Ae++){we=J.states[Ae];for(let $e=0;$e<we.transitions.length;$e++){const Le=we.transitions[$e];Le!==Qe&&Le.target===vt&&(Le.target=dt)}}const et=J.ruleToStartState[Se],_e=et.transitions.length;for(;_e>0;)Ie.addTransition(et.transitions[_e-1]),et.transitions=et.transitions.slice(-1);J.ruleToStartState[Se].addTransition(new G(Ie)),dt.addTransition(new G(vt));const se=new r;J.addState(se),se.addTransition(new I(dt,J.ruleToTokenType[Se])),Ie.addTransition(new G(se))}stateIsEndStateFor(J,Se){if(J.ruleIndex!==Se||!(J instanceof $))return null;const Ae=J.transitions[J.transitions.length-1].target;return Ae instanceof f&&Ae.epsilonOnlyTransitions&&Ae.transitions[0].target instanceof v?J:null}markPrecedenceDecisions(J){for(let Se=0;Se<J.states.length;Se++){const Ae=J.states[Se];if(Ae instanceof $&&J.ruleToStartState[Ae.ruleIndex].isPrecedenceRule){const we=Ae.transitions[Ae.transitions.length-1].target;we instanceof f&&we.epsilonOnlyTransitions&&we.transitions[0].target instanceof v&&(Ae.isPrecedenceDecision=!0)}}}verifyATN(J){if(this.deserializationOptions.verifyATN)for(let Se=0;Se<J.states.length;Se++){const Ae=J.states[Se];if(Ae!==null)if(this.checkCondition(Ae.epsilonOnlyTransitions||Ae.transitions.length<=1),Ae instanceof M)this.checkCondition(Ae.loopBackState!==null);else if(Ae instanceof $)if(this.checkCondition(Ae.loopBackState!==null),this.checkCondition(Ae.transitions.length===2),Ae.transitions[0].target instanceof C)this.checkCondition(Ae.transitions[1].target instanceof f),this.checkCondition(!Ae.nonGreedy);else if(Ae.transitions[0].target instanceof f)this.checkCondition(Ae.transitions[1].target instanceof C),this.checkCondition(Ae.nonGreedy);else throw"IllegalState";else Ae instanceof S?(this.checkCondition(Ae.transitions.length===1),this.checkCondition(Ae.transitions[0].target instanceof $)):Ae instanceof f?this.checkCondition(Ae.loopBackState!==null):Ae instanceof p?this.checkCondition(Ae.stopState!==null):Ae instanceof l?this.checkCondition(Ae.endState!==null):Ae instanceof h?this.checkCondition(Ae.startState!==null):Ae instanceof a?this.checkCondition(Ae.transitions.length<=1||Ae.decision>=0):this.checkCondition(Ae.transitions.length<=1||Ae instanceof v)}}checkCondition(J,Se){if(!J)throw Se==null&&(Se="IllegalState"),Se}readInt(){return this.data[this.pos++]}readInt32(){const J=this.readInt(),Se=this.readInt();return J|Se<<16}readLong(){const J=this.readInt32(),Se=this.readInt32();return J&4294967295|Se<<32}readUUID(){const J=[];for(let Se=7;Se>=0;Se--){const Ae=this.readInt();J[2*Se+1]=Ae&255,J[2*Se]=Ae>>8&255}return Re[J[0]]+Re[J[1]]+Re[J[2]]+Re[J[3]]+"-"+Re[J[4]]+Re[J[5]]+"-"+Re[J[6]]+Re[J[7]]+"-"+Re[J[8]]+Re[J[9]]+"-"+Re[J[10]]+Re[J[11]]+Re[J[12]]+Re[J[13]]+Re[J[14]]+Re[J[15]]}edgeFactory(J,Se,Ae,we,Ie,dt,Qe,vt){const et=J.states[we];switch(Se){case w.EPSILON:return new G(et);case w.RANGE:return Qe!==0?new V(et,s.EOF,dt):new V(et,Ie,dt);case w.RULE:return new F(J.states[Ie],dt,Qe,et);case w.PREDICATE:return new Z(et,Ie,dt,Qe!==0);case w.PRECEDENCE:return new Y(et,Ie);case w.ATOM:return Qe!==0?new I(et,s.EOF):new I(et,Ie);case w.ACTION:return new X(et,Ie,dt,Qe!==0);case w.SET:return new O(et,vt[Ie]);case w.NOT_SET:return new P(et,vt[Ie]);case w.WILDCARD:return new D(et);default:throw"The specified transition type: "+Se+" is not valid."}}stateFactory(J,Se){if(this.stateFactories===null){const Ae=[];Ae[i.INVALID_TYPE]=null,Ae[i.BASIC]=()=>new r,Ae[i.RULE_START]=()=>new p,Ae[i.BLOCK_START]=()=>new E,Ae[i.PLUS_BLOCK_START]=()=>new M,Ae[i.STAR_BLOCK_START]=()=>new C,Ae[i.TOKEN_START]=()=>new T,Ae[i.RULE_STOP]=()=>new v,Ae[i.BLOCK_END]=()=>new h,Ae[i.STAR_LOOP_BACK]=()=>new S,Ae[i.STAR_LOOP_ENTRY]=()=>new $,Ae[i.PLUS_LOOP_BACK]=()=>new y,Ae[i.LOOP_END]=()=>new f,this.stateFactories=Ae}if(J>this.stateFactories.length||this.stateFactories[J]===null)throw"The specified state type "+J+" is not valid.";{const Ae=this.stateFactories[J]();if(Ae!==null)return Ae.ruleIndex=Se,Ae}}lexerActionFactory(J,Se,Ae){if(this.actionFactories===null){const we=[];we[ee.CHANNEL]=(Ie,dt)=>new te(Ie),we[ee.CUSTOM]=(Ie,dt)=>new ce(Ie,dt),we[ee.MODE]=(Ie,dt)=>new Pe(Ie),we[ee.MORE]=(Ie,dt)=>pe.INSTANCE,we[ee.POP_MODE]=(Ie,dt)=>Ne.INSTANCE,we[ee.PUSH_MODE]=(Ie,dt)=>new fe(Ie),we[ee.SKIP]=(Ie,dt)=>z.INSTANCE,we[ee.TYPE]=(Ie,dt)=>new K(Ie),this.actionFactories=we}if(J>this.actionFactories.length||this.actionFactories[J]===null)throw"The specified lexer action type "+J+" is not valid.";return this.actionFactories[J](Se,Ae)}}function Ht(){const Ye=[];for(let J=0;J<256;J++)Ye[J]=(J+256).toString(16).substr(1).toUpperCase();return Ye}const Re=Ht();return iI=Ke,iI}var sI,EU;function PC(){if(EU)return sI;EU=1;class s{syntaxError(r,a,l,h,f,p){}reportAmbiguity(r,a,l,h,f,p,v){}reportAttemptingFullContext(r,a,l,h,f,p){}reportContextSensitivity(r,a,l,h,f,p){}}class e extends s{constructor(){super()}syntaxError(r,a,l,h,f,p){console.error("line "+l+":"+h+" "+f)}}e.INSTANCE=new e;class n extends s{constructor(r){if(super(),r===null)throw"delegates";return this.delegates=r,this}syntaxError(r,a,l,h,f,p){this.delegates.map(v=>v.syntaxError(r,a,l,h,f,p))}reportAmbiguity(r,a,l,h,f,p,v){this.delegates.map(T=>T.reportAmbiguity(r,a,l,h,f,p,v))}reportAttemptingFullContext(r,a,l,h,f,p){this.delegates.map(v=>v.reportAttemptingFullContext(r,a,l,h,f,p))}reportContextSensitivity(r,a,l,h,f,p){this.delegates.map(v=>v.reportContextSensitivity(r,a,l,h,f,p))}}return sI={ErrorListener:s,ConsoleErrorListener:e,ProxyErrorListener:n},sI}var rI,SU;function uV(){if(SU)return rI;SU=1;const{Token:s}=ra(),{ConsoleErrorListener:e}=PC(),{ProxyErrorListener:n}=PC();class i{constructor(){this._listeners=[e.INSTANCE],this._interp=null,this._stateNumber=-1}checkVersion(a){const l="4.9.3";l!==a&&console.log("ANTLR runtime and generated code versions disagree: "+l+"!="+a)}addErrorListener(a){this._listeners.push(a)}removeErrorListeners(){this._listeners=[]}getLiteralNames(){return Object.getPrototypeOf(this).constructor.literalNames||[]}getSymbolicNames(){return Object.getPrototypeOf(this).constructor.symbolicNames||[]}getTokenNames(){if(!this.tokenNames){const a=this.getLiteralNames(),l=this.getSymbolicNames(),h=a.length>l.length?a.length:l.length;this.tokenNames=[];for(let f=0;f<h;f++)this.tokenNames[f]=a[f]||l[f]||"<INVALID"}return this.tokenNames}getTokenTypeMap(){const a=this.getTokenNames();if(a===null)throw"The current recognizer does not provide a list of token names.";let l=this.tokenTypeMapCache[a];return l===void 0&&(l=a.reduce(function(h,f,p){h[f]=p}),l.EOF=s.EOF,this.tokenTypeMapCache[a]=l),l}getRuleIndexMap(){const a=this.ruleNames;if(a===null)throw"The current recognizer does not provide a list of rule names.";let l=this.ruleIndexMapCache[a];return l===void 0&&(l=a.reduce(function(h,f,p){h[f]=p}),this.ruleIndexMapCache[a]=l),l}getTokenType(a){const l=this.getTokenTypeMap()[a];return l!==void 0?l:s.INVALID_TYPE}getErrorHeader(a){const l=a.getOffendingToken().line,h=a.getOffendingToken().column;return"line "+l+":"+h}getTokenErrorDisplay(a){if(a===null)return"<no token>";let l=a.text;return l===null&&(a.type===s.EOF?l="<EOF>":l="<"+a.type+">"),l=l.replace(`
`,"\\n").replace("\r","\\r").replace("	","\\t"),"'"+l+"'"}getErrorListenerDispatch(){return new n(this._listeners)}sempred(a,l,h){return!0}precpred(a,l){return!0}get state(){return this._stateNumber}set state(a){this._stateNumber=a}}return i.tokenTypeMapCache={},i.ruleIndexMapCache={},rI=i,rI}var oI,AU;function kce(){if(AU)return oI;AU=1;const s=ra().CommonToken;class e{}class n extends e{constructor(r){super(),this.copyText=r===void 0?!1:r}create(r,a,l,h,f,p,v,T){const y=new s(r,a,h,f,p);return y.line=v,y.column=T,l!==null?y.text=l:this.copyText&&r[1]!==null&&(y.text=r[1].getText(f,p)),y}createThin(r,a){const l=new s(null,r);return l.text=a,l}}return n.DEFAULT=new n,oI=n,oI}var aI,$U;function fp(){if($U)return aI;$U=1;const{PredicateTransition:s}=uA(),{Interval:e}=Wc().Interval;class n extends Error{constructor(v){super(v.message),Error.captureStackTrace?Error.captureStackTrace(this,n):new Error().stack,this.message=v.message,this.recognizer=v.recognizer,this.input=v.input,this.ctx=v.ctx,this.offendingToken=null,this.offendingState=-1,this.recognizer!==null&&(this.offendingState=this.recognizer.state)}getExpectedTokens(){return this.recognizer!==null?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null}toString(){return this.message}}class i extends n{constructor(v,T,y,S){super({message:"",recognizer:v,input:T,ctx:null}),this.startIndex=y,this.deadEndConfigs=S}toString(){let v="";return this.startIndex>=0&&this.startIndex<this.input.size&&(v=this.input.getText(new e(this.startIndex,this.startIndex))),"LexerNoViableAltException"+v}}class r extends n{constructor(v,T,y,S,$,M){M=M||v._ctx,S=S||v.getCurrentToken(),y=y||v.getCurrentToken(),T=T||v.getInputStream(),super({message:"",recognizer:v,input:T,ctx:M}),this.deadEndConfigs=$,this.startToken=y,this.offendingToken=S}}class a extends n{constructor(v){super({message:"",recognizer:v,input:v.getInputStream(),ctx:v._ctx}),this.offendingToken=v.getCurrentToken()}}function l(p,v){return v!==null?v:"failed predicate: {"+p+"}?"}class h extends n{constructor(v,T,y){super({message:l(T,y||null),recognizer:v,input:v.getInputStream(),ctx:v._ctx});const $=v._interp.atn.states[v.state].transitions[0];$ instanceof s?(this.ruleIndex=$.ruleIndex,this.predicateIndex=$.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=T,this.offendingToken=v.getCurrentToken()}}class f extends Error{constructor(){super(),Error.captureStackTrace(this,f)}}return aI={RecognitionException:n,NoViableAltException:r,LexerNoViableAltException:i,InputMismatchException:a,FailedPredicateException:h,ParseCancellationException:f},aI}var lI,xU;function n1(){if(xU)return lI;xU=1;const{Token:s}=ra(),e=uV(),n=kce(),{RecognitionException:i}=fp(),{LexerNoViableAltException:r}=fp();class a extends e{constructor(h){super(),this._input=h,this._factory=n.DEFAULT,this._tokenFactorySourcePair=[this,h],this._interp=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=s.DEFAULT_CHANNEL,this._type=s.INVALID_TYPE,this._modeStack=[],this._mode=a.DEFAULT_MODE,this._text=null}reset(){this._input!==null&&this._input.seek(0),this._token=null,this._type=s.INVALID_TYPE,this._channel=s.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=a.DEFAULT_MODE,this._modeStack=[],this._interp.reset()}nextToken(){if(this._input===null)throw"nextToken requires a non-null input stream.";const h=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=s.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this._interp.column,this._tokenStartLine=this._interp.line,this._text=null;let f=!1;for(;;){this._type=s.INVALID_TYPE;let p=a.SKIP;try{p=this._interp.match(this._input,this._mode)}catch(v){if(v instanceof i)this.notifyListeners(v),this.recover(v);else throw console.log(v.stack),v}if(this._input.LA(1)===s.EOF&&(this._hitEOF=!0),this._type===s.INVALID_TYPE&&(this._type=p),this._type===a.SKIP){f=!0;break}if(this._type!==a.MORE)break}if(!f)return this._token===null&&this.emit(),this._token}}finally{this._input.release(h)}}skip(){this._type=a.SKIP}more(){this._type=a.MORE}mode(h){this._mode=h}pushMode(h){this._interp.debug&&console.log("pushMode "+h),this._modeStack.push(this._mode),this.mode(h)}popMode(){if(this._modeStack.length===0)throw"Empty Stack";return this._interp.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode}emitToken(h){this._token=h}emit(){const h=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(h),h}emitEOF(){const h=this.column,f=this.line,p=this._factory.create(this._tokenFactorySourcePair,s.EOF,null,s.DEFAULT_CHANNEL,this._input.index,this._input.index-1,f,h);return this.emitToken(p),p}getCharIndex(){return this._input.index}getAllTokens(){const h=[];let f=this.nextToken();for(;f.type!==s.EOF;)h.push(f),f=this.nextToken();return h}notifyListeners(h){const f=this._tokenStartCharIndex,p=this._input.index,v=this._input.getText(f,p),T="token recognition error at: '"+this.getErrorDisplay(v)+"'";this.getErrorListenerDispatch().syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,T,h)}getErrorDisplay(h){const f=[];for(let p=0;p<h.length;p++)f.push(h[p]);return f.join("")}getErrorDisplayForChar(h){return h.charCodeAt(0)===s.EOF?"<EOF>":h===`
`?"\\n":h==="	"?"\\t":h==="\r"?"\\r":h}getCharErrorDisplay(h){return"'"+this.getErrorDisplayForChar(h)+"'"}recover(h){this._input.LA(1)!==s.EOF&&(h instanceof r?this._interp.consume(this._input):this._input.consume())}get inputStream(){return this._input}set inputStream(h){this._input=null,this._tokenFactorySourcePair=[this,this._input],this.reset(),this._input=h,this._tokenFactorySourcePair=[this,this._input]}get sourceName(){return this._input.sourceName}get type(){return this._type}set type(h){this._type=h}get line(){return this._interp.line}set line(h){this._interp.line=h}get column(){return this._interp.column}set column(h){this._interp.column=h}get text(){return this._text!==null?this._text:this._interp.getText(this._input)}set text(h){this._text=h}}return a.DEFAULT_MODE=0,a.MORE=-2,a.SKIP=-3,a.DEFAULT_TOKEN_CHANNEL=s.DEFAULT_CHANNEL,a.HIDDEN=s.HIDDEN_CHANNEL,a.MIN_CHAR_VALUE=0,a.MAX_CHAR_VALUE=1114111,lI=a,lI}var uI,CU;function MT(){if(CU)return uI;CU=1;const s=CT(),e=mu(),{SemanticContext:n}=lA(),{merge:i}=Fg();function r(f){return f.hashCodeForConfigSet()}function a(f,p){return f===p?!0:f===null||p===null?!1:f.equalsForConfigSet(p)}class l{constructor(p){this.configLookup=new e.Set(r,a),this.fullCtx=p===void 0?!0:p,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1}add(p,v){if(v===void 0&&(v=null),this.readOnly)throw"This set is readonly";p.semanticContext!==n.NONE&&(this.hasSemanticContext=!0),p.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);const T=this.configLookup.add(p);if(T===p)return this.cachedHashCode=-1,this.configs.push(p),!0;const y=!this.fullCtx,S=i(T.context,p.context,y,v);return T.reachesIntoOuterContext=Math.max(T.reachesIntoOuterContext,p.reachesIntoOuterContext),p.precedenceFilterSuppressed&&(T.precedenceFilterSuppressed=!0),T.context=S,!0}getStates(){const p=new e.Set;for(let v=0;v<this.configs.length;v++)p.add(this.configs[v].state);return p}getPredicates(){const p=[];for(let v=0;v<this.configs.length;v++){const T=this.configs[v].semanticContext;T!==n.NONE&&p.push(T.semanticContext)}return p}optimizeConfigs(p){if(this.readOnly)throw"This set is readonly";if(this.configLookup.length!==0)for(let v=0;v<this.configs.length;v++){const T=this.configs[v];T.context=p.getCachedContext(T.context)}}addAll(p){for(let v=0;v<p.length;v++)this.add(p[v]);return!1}equals(p){return this===p||p instanceof l&&e.equalArrays(this.configs,p.configs)&&this.fullCtx===p.fullCtx&&this.uniqueAlt===p.uniqueAlt&&this.conflictingAlts===p.conflictingAlts&&this.hasSemanticContext===p.hasSemanticContext&&this.dipsIntoOuterContext===p.dipsIntoOuterContext}hashCode(){const p=new e.Hash;return p.update(this.configs),p.finish()}updateHashCode(p){this.readOnly?(this.cachedHashCode===-1&&(this.cachedHashCode=this.hashCode()),p.update(this.cachedHashCode)):p.update(this.hashCode())}isEmpty(){return this.configs.length===0}contains(p){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(p)}containsFast(p){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(p)}clear(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new e.Set}setReadonly(p){this.readOnly=p,p&&(this.configLookup=null)}toString(){return e.arrayToString(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==s.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(this.conflictingAlts!==null?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")}get items(){return this.configs}get length(){return this.configs.length}}class h extends l{constructor(){super(),this.configLookup=new e.Set}}return uI={ATNConfigSet:l,OrderedATNConfigSet:h},uI}var cI,MU;function cA(){if(MU)return cI;MU=1;const{ATNConfigSet:s}=MT(),{Hash:e,Set:n}=mu();class i{constructor(l,h){this.alt=h,this.pred=l}toString(){return"("+this.pred+", "+this.alt+")"}}class r{constructor(l,h){return l===null&&(l=-1),h===null&&(h=new s),this.stateNumber=l,this.configs=h,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}getAltSet(){const l=new n;if(this.configs!==null)for(let h=0;h<this.configs.length;h++){const f=this.configs[h];l.add(f.alt)}return l.length===0?null:l}equals(l){return this===l||l instanceof r&&this.configs.equals(l.configs)}toString(){let l=""+this.stateNumber+":"+this.configs;return this.isAcceptState&&(l=l+"=>",this.predicates!==null?l=l+this.predicates:l=l+this.prediction),l}hashCode(){const l=new e;return l.update(this.configs),l.finish()}}return cI={DFAState:r,PredPrediction:i},cI}var hI,RU;function cV(){if(RU)return hI;RU=1;const{DFAState:s}=cA(),{ATNConfigSet:e}=MT(),{getCachedPredictionContext:n}=Fg(),{Map:i}=mu();class r{constructor(l,h){return this.atn=l,this.sharedContextCache=h,this}getCachedContext(l){if(this.sharedContextCache===null)return l;const h=new i;return n(l,this.sharedContextCache,h)}}return r.ERROR=new s(2147483647,new e),hI=r,hI}var dI,wU;function Pce(){if(wU)return dI;wU=1;const{hashStuff:s}=mu(),{LexerIndexedCustomAction:e}=aV();class n{constructor(r){return this.lexerActions=r===null?[]:r,this.cachedHashCode=s(r),this}fixOffsetBeforeMatch(r){let a=null;for(let l=0;l<this.lexerActions.length;l++)this.lexerActions[l].isPositionDependent&&!(this.lexerActions[l]instanceof e)&&(a===null&&(a=this.lexerActions.concat([])),a[l]=new e(r,this.lexerActions[l]));return a===null?this:new n(a)}execute(r,a,l){let h=!1;const f=a.index;try{for(let p=0;p<this.lexerActions.length;p++){let v=this.lexerActions[p];if(v instanceof e){const T=v.offset;a.seek(l+T),v=v.action,h=l+T!==f}else v.isPositionDependent&&(a.seek(f),h=!1);v.execute(r)}}finally{h&&a.seek(f)}}hashCode(){return this.cachedHashCode}updateHashCode(r){r.update(this.cachedHashCode)}equals(r){if(this===r)return!0;if(r instanceof n){if(this.cachedHashCode!=r.cachedHashCode)return!1;if(this.lexerActions.length!=r.lexerActions.length)return!1;{const a=this.lexerActions.length;for(let l=0;l<a;++l)if(!this.lexerActions[l].equals(r.lexerActions[l]))return!1;return!0}}else return!1}static append(r,a){if(r===null)return new n([a]);const l=r.lexerActions.concat([a]);return new n(l)}}return dI=n,dI}var fI,IU;function Uce(){if(IU)return fI;IU=1;const{Token:s}=ra(),e=n1(),n=CT(),i=cV(),{DFAState:r}=cA(),{OrderedATNConfigSet:a}=MT(),{PredictionContext:l}=Fg(),{SingletonPredictionContext:h}=Fg(),{RuleStopState:f}=qg(),{LexerATNConfig:p}=t1(),{Transition:v}=uA(),T=Pce(),{LexerNoViableAltException:y}=fp();function S(C){C.index=-1,C.line=0,C.column=-1,C.dfaState=null}class ${constructor(){S(this)}reset(){S(this)}}class M extends i{constructor(E,w,I,O){super(w,O),this.decisionToDFA=I,this.recog=E,this.startIndex=-1,this.line=1,this.column=0,this.mode=e.DEFAULT_MODE,this.prevAccept=new $}copyState(E){this.column=E.column,this.line=E.line,this.mode=E.mode,this.startIndex=E.startIndex}match(E,w){this.match_calls+=1,this.mode=w;const I=E.mark();try{this.startIndex=E.index,this.prevAccept.reset();const O=this.decisionToDFA[w];return O.s0===null?this.matchATN(E):this.execATN(E,O.s0)}finally{E.release(I)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=e.DEFAULT_MODE}matchATN(E){const w=this.atn.modeToStartState[this.mode];M.debug&&console.log("matchATN mode "+this.mode+" start: "+w);const I=this.mode,O=this.computeStartState(E,w),P=O.hasSemanticContext;O.hasSemanticContext=!1;const F=this.addDFAState(O);P||(this.decisionToDFA[this.mode].s0=F);const V=this.execATN(E,F);return M.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[I].toLexerString()),V}execATN(E,w){M.debug&&console.log("start state closure="+w.configs),w.isAcceptState&&this.captureSimState(this.prevAccept,E,w);let I=E.LA(1),O=w;for(;;){M.debug&&console.log("execATN loop starting closure: "+O.configs);let P=this.getExistingTargetState(O,I);if(P===null&&(P=this.computeTargetState(E,O,I)),P===i.ERROR||(I!==s.EOF&&this.consume(E),P.isAcceptState&&(this.captureSimState(this.prevAccept,E,P),I===s.EOF)))break;I=E.LA(1),O=P}return this.failOrAccept(this.prevAccept,E,O.configs,I)}getExistingTargetState(E,w){if(E.edges===null||w<M.MIN_DFA_EDGE||w>M.MAX_DFA_EDGE)return null;let I=E.edges[w-M.MIN_DFA_EDGE];return I===void 0&&(I=null),M.debug&&I!==null&&console.log("reuse state "+E.stateNumber+" edge to "+I.stateNumber),I}computeTargetState(E,w,I){const O=new a;return this.getReachableConfigSet(E,w.configs,O,I),O.items.length===0?(O.hasSemanticContext||this.addDFAEdge(w,I,i.ERROR),i.ERROR):this.addDFAEdge(w,I,null,O)}failOrAccept(E,w,I,O){if(this.prevAccept.dfaState!==null){const P=E.dfaState.lexerActionExecutor;return this.accept(w,P,this.startIndex,E.index,E.line,E.column),E.dfaState.prediction}else{if(O===s.EOF&&w.index===this.startIndex)return s.EOF;throw new y(this.recog,w,this.startIndex,I)}}getReachableConfigSet(E,w,I,O){let P=n.INVALID_ALT_NUMBER;for(let F=0;F<w.items.length;F++){const V=w.items[F],X=V.alt===P;if(!(X&&V.passedThroughNonGreedyDecision)){M.debug&&console.log(`testing %s at %s
`,this.getTokenName(O),V.toString(this.recog,!0));for(let G=0;G<V.state.transitions.length;G++){const D=V.state.transitions[G],Z=this.getReachableTarget(D,O);if(Z!==null){let Y=V.lexerActionExecutor;Y!==null&&(Y=Y.fixOffsetBeforeMatch(E.index-this.startIndex));const j=O===s.EOF,ne=new p({state:Z,lexerActionExecutor:Y},V);this.closure(E,ne,I,X,!0,j)&&(P=V.alt)}}}}}accept(E,w,I,O,P,F){M.debug&&console.log(`ACTION %s
`,w),E.seek(O),this.line=P,this.column=F,w!==null&&this.recog!==null&&w.execute(this.recog,E,I)}getReachableTarget(E,w){return E.matches(w,0,e.MAX_CHAR_VALUE)?E.target:null}computeStartState(E,w){const I=l.EMPTY,O=new a;for(let P=0;P<w.transitions.length;P++){const F=w.transitions[P].target,V=new p({state:F,alt:P+1,context:I},null);this.closure(E,V,O,!1,!1,!1)}return O}closure(E,w,I,O,P,F){let V=null;if(M.debug&&console.log("closure("+w.toString(this.recog,!0)+")"),w.state instanceof f){if(M.debug&&(this.recog!==null?console.log(`closure at %s rule stop %s
`,this.recog.ruleNames[w.state.ruleIndex],w):console.log(`closure at rule stop %s
`,w)),w.context===null||w.context.hasEmptyPath()){if(w.context===null||w.context.isEmpty())return I.add(w),!0;I.add(new p({state:w.state,context:l.EMPTY},w)),O=!0}if(w.context!==null&&!w.context.isEmpty()){for(let X=0;X<w.context.length;X++)if(w.context.getReturnState(X)!==l.EMPTY_RETURN_STATE){const G=w.context.getParent(X),D=this.atn.states[w.context.getReturnState(X)];V=new p({state:D,context:G},w),O=this.closure(E,V,I,O,P,F)}}return O}w.state.epsilonOnlyTransitions||(!O||!w.passedThroughNonGreedyDecision)&&I.add(w);for(let X=0;X<w.state.transitions.length;X++){const G=w.state.transitions[X];V=this.getEpsilonTarget(E,w,G,I,P,F),V!==null&&(O=this.closure(E,V,I,O,P,F))}return O}getEpsilonTarget(E,w,I,O,P,F){let V=null;if(I.serializationType===v.RULE){const X=h.create(w.context,I.followState.stateNumber);V=new p({state:I.target,context:X},w)}else{if(I.serializationType===v.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(I.serializationType===v.PREDICATE)M.debug&&console.log("EVAL rule "+I.ruleIndex+":"+I.predIndex),O.hasSemanticContext=!0,this.evaluatePredicate(E,I.ruleIndex,I.predIndex,P)&&(V=new p({state:I.target},w));else if(I.serializationType===v.ACTION)if(w.context===null||w.context.hasEmptyPath()){const X=T.append(w.lexerActionExecutor,this.atn.lexerActions[I.actionIndex]);V=new p({state:I.target,lexerActionExecutor:X},w)}else V=new p({state:I.target},w);else I.serializationType===v.EPSILON?V=new p({state:I.target},w):(I.serializationType===v.ATOM||I.serializationType===v.RANGE||I.serializationType===v.SET)&&F&&I.matches(s.EOF,0,e.MAX_CHAR_VALUE)&&(V=new p({state:I.target},w))}return V}evaluatePredicate(E,w,I,O){if(this.recog===null)return!0;if(!O)return this.recog.sempred(null,w,I);const P=this.column,F=this.line,V=E.index,X=E.mark();try{return this.consume(E),this.recog.sempred(null,w,I)}finally{this.column=P,this.line=F,E.seek(V),E.release(X)}}captureSimState(E,w,I){E.index=w.index,E.line=this.line,E.column=this.column,E.dfaState=I}addDFAEdge(E,w,I,O){if(I===void 0&&(I=null),O===void 0&&(O=null),I===null&&O!==null){const P=O.hasSemanticContext;if(O.hasSemanticContext=!1,I=this.addDFAState(O),P)return I}return w<M.MIN_DFA_EDGE||w>M.MAX_DFA_EDGE||(M.debug&&console.log("EDGE "+E+" -> "+I+" upon "+w),E.edges===null&&(E.edges=[]),E.edges[w-M.MIN_DFA_EDGE]=I),I}addDFAState(E){const w=new r(null,E);let I=null;for(let V=0;V<E.items.length;V++){const X=E.items[V];if(X.state instanceof f){I=X;break}}I!==null&&(w.isAcceptState=!0,w.lexerActionExecutor=I.lexerActionExecutor,w.prediction=this.atn.ruleToTokenType[I.state.ruleIndex]);const O=this.decisionToDFA[this.mode],P=O.states.get(w);if(P!==null)return P;const F=w;return F.stateNumber=O.states.length,E.setReadonly(!0),F.configs=E,O.states.add(F),F}getDFA(E){return this.decisionToDFA[E]}getText(E){return E.getText(this.startIndex,E.index-1)}consume(E){E.LA(1)===10?(this.line+=1,this.column=0):this.column+=1,E.consume()}getTokenName(E){return E===-1?"EOF":"'"+String.fromCharCode(E)+"'"}}return M.debug=!1,M.dfa_debug=!1,M.MIN_DFA_EDGE=0,M.MAX_DFA_EDGE=127,M.match_calls=0,fI=M,fI}var pI,OU;function hV(){if(OU)return pI;OU=1;const{Map:s,BitSet:e,AltDict:n,hashStuff:i}=mu(),r=CT(),{RuleStopState:a}=qg(),{ATNConfigSet:l}=MT(),{ATNConfig:h}=t1(),{SemanticContext:f}=lA(),p={SLL:0,LL:1,LL_EXACT_AMBIG_DETECTION:2,hasSLLConflictTerminatingPrediction:function(v,T){if(p.allConfigsInRuleStopStates(T))return!0;if(v===p.SLL&&T.hasSemanticContext){const S=new l;for(let $=0;$<T.items.length;$++){let M=T.items[$];M=new h({semanticContext:f.NONE},M),S.add(M)}T=S}const y=p.getConflictingAltSubsets(T);return p.hasConflictingAltSet(y)&&!p.hasStateAssociatedWithOneAlt(T)},hasConfigInRuleStopState:function(v){for(let T=0;T<v.items.length;T++)if(v.items[T].state instanceof a)return!0;return!1},allConfigsInRuleStopStates:function(v){for(let T=0;T<v.items.length;T++)if(!(v.items[T].state instanceof a))return!1;return!0},resolvesToJustOneViableAlt:function(v){return p.getSingleViableAlt(v)},allSubsetsConflict:function(v){return!p.hasNonConflictingAltSet(v)},hasNonConflictingAltSet:function(v){for(let T=0;T<v.length;T++)if(v[T].length===1)return!0;return!1},hasConflictingAltSet:function(v){for(let T=0;T<v.length;T++)if(v[T].length>1)return!0;return!1},allSubsetsEqual:function(v){let T=null;for(let y=0;y<v.length;y++){const S=v[y];if(T===null)T=S;else if(S!==T)return!1}return!0},getUniqueAlt:function(v){const T=p.getAlts(v);return T.length===1?T.minValue():r.INVALID_ALT_NUMBER},getAlts:function(v){const T=new e;return v.map(function(y){T.or(y)}),T},getConflictingAltSubsets:function(v){const T=new s;return T.hashFunction=function(y){i(y.state.stateNumber,y.context)},T.equalsFunction=function(y,S){return y.state.stateNumber===S.state.stateNumber&&y.context.equals(S.context)},v.items.map(function(y){let S=T.get(y);S===null&&(S=new e,T.put(y,S)),S.add(y.alt)}),T.getValues()},getStateToAltMap:function(v){const T=new n;return v.items.map(function(y){let S=T.get(y.state);S===null&&(S=new e,T.put(y.state,S)),S.add(y.alt)}),T},hasStateAssociatedWithOneAlt:function(v){const T=p.getStateToAltMap(v).values();for(let y=0;y<T.length;y++)if(T[y].length===1)return!0;return!1},getSingleViableAlt:function(v){let T=null;for(let y=0;y<v.length;y++){const $=v[y].minValue();if(T===null)T=$;else if(T!==$)return r.INVALID_ALT_NUMBER}return T}};return pI=p,pI}var mI,NU;function dV(){if(NU)return mI;NU=1;const s=jN(),e=lT(),n=e.INVALID_INTERVAL,i=e.TerminalNode,r=e.TerminalNodeImpl,a=e.ErrorNodeImpl,l=Wc().Interval;class h extends s{constructor(p,v){p=p||null,v=v||null,super(p,v),this.ruleIndex=-1,this.children=null,this.start=null,this.stop=null,this.exception=null}copyFrom(p){this.parentCtx=p.parentCtx,this.invokingState=p.invokingState,this.children=null,this.start=p.start,this.stop=p.stop,p.children&&(this.children=[],p.children.map(function(v){v instanceof a&&(this.children.push(v),v.parentCtx=this)},this))}enterRule(p){}exitRule(p){}addChild(p){return this.children===null&&(this.children=[]),this.children.push(p),p}removeLastChild(){this.children!==null&&this.children.pop()}addTokenNode(p){const v=new r(p);return this.addChild(v),v.parentCtx=this,v}addErrorNode(p){const v=new a(p);return this.addChild(v),v.parentCtx=this,v}getChild(p,v){if(v=v||null,this.children===null||p<0||p>=this.children.length)return null;if(v===null)return this.children[p];for(let T=0;T<this.children.length;T++){const y=this.children[T];if(y instanceof v){if(p===0)return y;p-=1}}return null}getToken(p,v){if(this.children===null||v<0||v>=this.children.length)return null;for(let T=0;T<this.children.length;T++){const y=this.children[T];if(y instanceof i&&y.symbol.type===p){if(v===0)return y;v-=1}}return null}getTokens(p){if(this.children===null)return[];{const v=[];for(let T=0;T<this.children.length;T++){const y=this.children[T];y instanceof i&&y.symbol.type===p&&v.push(y)}return v}}getTypedRuleContext(p,v){return this.getChild(v,p)}getTypedRuleContexts(p){if(this.children===null)return[];{const v=[];for(let T=0;T<this.children.length;T++){const y=this.children[T];y instanceof p&&v.push(y)}return v}}getChildCount(){return this.children===null?0:this.children.length}getSourceInterval(){return this.start===null||this.stop===null?n:new l(this.start.tokenIndex,this.stop.tokenIndex)}}return s.EMPTY=new h,mI=h,mI}var gI,LU;function Fce(){if(LU)return gI;LU=1;const s=mu(),{Set:e,BitSet:n,DoubleDict:i}=s,r=CT(),{ATNState:a,RuleStopState:l}=qg(),{ATNConfig:h}=t1(),{ATNConfigSet:f}=MT(),{Token:p}=ra(),{DFAState:v,PredPrediction:T}=cA(),y=cV(),S=hV(),$=jN();dV();const{SemanticContext:M}=lA(),{PredictionContext:C}=Fg(),{Interval:E}=Wc(),{Transition:w,SetTransition:I,NotSetTransition:O,RuleTransition:P,ActionTransition:F}=uA(),{NoViableAltException:V}=fp(),{SingletonPredictionContext:X,predictionContextFromRuleContext:G}=Fg();class D extends y{constructor(Y,j,ne,ee){super(j,ee),this.parser=Y,this.decisionToDFA=ne,this.predictionMode=S.LL,this._input=null,this._startIndex=0,this._outerContext=null,this._dfa=null,this.mergeCache=null,this.debug=!1,this.debug_closure=!1,this.debug_add=!1,this.debug_list_atn_decisions=!1,this.dfa_debug=!1,this.retry_debug=!1}reset(){}adaptivePredict(Y,j,ne){(this.debug||this.debug_list_atn_decisions)&&console.log("adaptivePredict decision "+j+" exec LA(1)=="+this.getLookaheadName(Y)+" line "+Y.LT(1).line+":"+Y.LT(1).column),this._input=Y,this._startIndex=Y.index,this._outerContext=ne;const ee=this.decisionToDFA[j];this._dfa=ee;const z=Y.mark(),te=Y.index;try{let ce;if(ee.precedenceDfa?ce=ee.getPrecedenceStartState(this.parser.getPrecedence()):ce=ee.s0,ce===null){ne===null&&(ne=$.EMPTY),(this.debug||this.debug_list_atn_decisions)&&console.log("predictATN decision "+ee.decision+" exec LA(1)=="+this.getLookaheadName(Y)+", outerContext="+ne.toString(this.parser.ruleNames));let fe=this.computeStartState(ee.atnStartState,$.EMPTY,!1);ee.precedenceDfa?(ee.s0.configs=fe,fe=this.applyPrecedenceFilter(fe),ce=this.addDFAState(ee,new v(null,fe)),ee.setPrecedenceStartState(this.parser.getPrecedence(),ce)):(ce=this.addDFAState(ee,new v(null,fe)),ee.s0=ce)}const pe=this.execATN(ee,ce,Y,te,ne);return this.debug&&console.log("DFA after predictATN: "+ee.toString(this.parser.literalNames,this.parser.symbolicNames)),pe}finally{this._dfa=null,this.mergeCache=null,Y.seek(te),Y.release(z)}}execATN(Y,j,ne,ee,z){(this.debug||this.debug_list_atn_decisions)&&console.log("execATN decision "+Y.decision+" exec LA(1)=="+this.getLookaheadName(ne)+" line "+ne.LT(1).line+":"+ne.LT(1).column);let te,ce=j;this.debug&&console.log("s0 = "+j);let pe=ne.LA(1);for(;;){let K=this.getExistingTargetState(ce,pe);if(K===null&&(K=this.computeTargetState(Y,ce,pe)),K===y.ERROR){const fe=this.noViableAlt(ne,z,ce.configs,ee);if(ne.seek(ee),te=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(ce.configs,z),te!==r.INVALID_ALT_NUMBER)return te;throw fe}if(K.requiresFullContext&&this.predictionMode!==S.SLL){let fe=null;if(K.predicates!==null){this.debug&&console.log("DFA state has preds in DFA sim LL failover");const Ee=ne.index;if(Ee!==ee&&ne.seek(ee),fe=this.evalSemanticContext(K.predicates,z,!0),fe.length===1)return this.debug&&console.log("Full LL avoided"),fe.minValue();Ee!==ee&&ne.seek(Ee)}this.dfa_debug&&console.log("ctx sensitive state "+z+" in "+K);const Pe=this.computeStartState(Y.atnStartState,z,!0);return this.reportAttemptingFullContext(Y,fe,K.configs,ee,ne.index),te=this.execATNWithFullContext(Y,K,Pe,ne,ee,z),te}if(K.isAcceptState){if(K.predicates===null)return K.prediction;const fe=ne.index;ne.seek(ee);const Ne=this.evalSemanticContext(K.predicates,z,!0);if(Ne.length===0)throw this.noViableAlt(ne,z,K.configs,ee);return Ne.length===1||this.reportAmbiguity(Y,K,ee,fe,!1,Ne,K.configs),Ne.minValue()}ce=K,pe!==p.EOF&&(ne.consume(),pe=ne.LA(1))}}getExistingTargetState(Y,j){const ne=Y.edges;return ne===null?null:ne[j+1]||null}computeTargetState(Y,j,ne){const ee=this.computeReachSet(j.configs,ne,!1);if(ee===null)return this.addDFAEdge(Y,j,ne,y.ERROR),y.ERROR;let z=new v(null,ee);const te=this.getUniqueAlt(ee);if(this.debug){const ce=S.getConflictingAltSubsets(ee);console.log("SLL altSubSets="+s.arrayToString(ce)+", configs="+ee+", predict="+te+", allSubsetsConflict="+S.allSubsetsConflict(ce)+", conflictingAlts="+this.getConflictingAlts(ee))}return te!==r.INVALID_ALT_NUMBER?(z.isAcceptState=!0,z.configs.uniqueAlt=te,z.prediction=te):S.hasSLLConflictTerminatingPrediction(this.predictionMode,ee)&&(z.configs.conflictingAlts=this.getConflictingAlts(ee),z.requiresFullContext=!0,z.isAcceptState=!0,z.prediction=z.configs.conflictingAlts.minValue()),z.isAcceptState&&z.configs.hasSemanticContext&&(this.predicateDFAState(z,this.atn.getDecisionState(Y.decision)),z.predicates!==null&&(z.prediction=r.INVALID_ALT_NUMBER)),z=this.addDFAEdge(Y,j,ne,z),z}predicateDFAState(Y,j){const ne=j.transitions.length,ee=this.getConflictingAltsOrUniqueAlt(Y.configs),z=this.getPredsForAmbigAlts(ee,Y.configs,ne);z!==null?(Y.predicates=this.getPredicatePredictions(ee,z),Y.prediction=r.INVALID_ALT_NUMBER):Y.prediction=ee.minValue()}execATNWithFullContext(Y,j,ne,ee,z,te){(this.debug||this.debug_list_atn_decisions)&&console.log("execATNWithFullContext "+ne);const ce=!0;let pe=!1,K,fe=ne;ee.seek(z);let Ne=ee.LA(1),Pe=-1;for(;;){if(K=this.computeReachSet(fe,Ne,ce),K===null){const We=this.noViableAlt(ee,te,fe,z);ee.seek(z);const Fe=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(fe,te);if(Fe!==r.INVALID_ALT_NUMBER)return Fe;throw We}const Ee=S.getConflictingAltSubsets(K);if(this.debug&&console.log("LL altSubSets="+Ee+", predict="+S.getUniqueAlt(Ee)+", resolvesToJustOneViableAlt="+S.resolvesToJustOneViableAlt(Ee)),K.uniqueAlt=this.getUniqueAlt(K),K.uniqueAlt!==r.INVALID_ALT_NUMBER){Pe=K.uniqueAlt;break}else if(this.predictionMode!==S.LL_EXACT_AMBIG_DETECTION){if(Pe=S.resolvesToJustOneViableAlt(Ee),Pe!==r.INVALID_ALT_NUMBER)break}else if(S.allSubsetsConflict(Ee)&&S.allSubsetsEqual(Ee)){pe=!0,Pe=S.getSingleViableAlt(Ee);break}fe=K,Ne!==p.EOF&&(ee.consume(),Ne=ee.LA(1))}return K.uniqueAlt!==r.INVALID_ALT_NUMBER?(this.reportContextSensitivity(Y,Pe,K,z,ee.index),Pe):(this.reportAmbiguity(Y,j,z,ee.index,pe,null,K),Pe)}computeReachSet(Y,j,ne){this.debug&&console.log("in computeReachSet, starting closure: "+Y),this.mergeCache===null&&(this.mergeCache=new i);const ee=new f(ne);let z=null;for(let ce=0;ce<Y.items.length;ce++){const pe=Y.items[ce];if(this.debug&&console.log("testing "+this.getTokenName(j)+" at "+pe),pe.state instanceof l){(ne||j===p.EOF)&&(z===null&&(z=[]),z.push(pe),this.debug_add&&console.log("added "+pe+" to skippedStopStates"));continue}for(let K=0;K<pe.state.transitions.length;K++){const fe=pe.state.transitions[K],Ne=this.getReachableTarget(fe,j);if(Ne!==null){const Pe=new h({state:Ne},pe);ee.add(Pe,this.mergeCache),this.debug_add&&console.log("added "+Pe+" to intermediate")}}}let te=null;if(z===null&&j!==p.EOF&&(ee.items.length===1||this.getUniqueAlt(ee)!==r.INVALID_ALT_NUMBER)&&(te=ee),te===null){te=new f(ne);const ce=new e,pe=j===p.EOF;for(let K=0;K<ee.items.length;K++)this.closure(ee.items[K],te,ce,!1,ne,pe)}if(j===p.EOF&&(te=this.removeAllConfigsNotInRuleStopState(te,te===ee)),z!==null&&(!ne||!S.hasConfigInRuleStopState(te)))for(let ce=0;ce<z.length;ce++)te.add(z[ce],this.mergeCache);return te.items.length===0?null:te}removeAllConfigsNotInRuleStopState(Y,j){if(S.allConfigsInRuleStopStates(Y))return Y;const ne=new f(Y.fullCtx);for(let ee=0;ee<Y.items.length;ee++){const z=Y.items[ee];if(z.state instanceof l){ne.add(z,this.mergeCache);continue}if(j&&z.state.epsilonOnlyTransitions&&this.atn.nextTokens(z.state).contains(p.EPSILON)){const ce=this.atn.ruleToStopState[z.state.ruleIndex];ne.add(new h({state:ce},z),this.mergeCache)}}return ne}computeStartState(Y,j,ne){const ee=G(this.atn,j),z=new f(ne);for(let te=0;te<Y.transitions.length;te++){const ce=Y.transitions[te].target,pe=new h({state:ce,alt:te+1,context:ee},null),K=new e;this.closure(pe,z,K,!0,ne,!1)}return z}applyPrecedenceFilter(Y){let j;const ne=[],ee=new f(Y.fullCtx);for(let z=0;z<Y.items.length;z++){if(j=Y.items[z],j.alt!==1)continue;const te=j.semanticContext.evalPrecedence(this.parser,this._outerContext);te!==null&&(ne[j.state.stateNumber]=j.context,te!==j.semanticContext?ee.add(new h({semanticContext:te},j),this.mergeCache):ee.add(j,this.mergeCache))}for(let z=0;z<Y.items.length;z++)if(j=Y.items[z],j.alt!==1){if(!j.precedenceFilterSuppressed){const te=ne[j.state.stateNumber]||null;if(te!==null&&te.equals(j.context))continue}ee.add(j,this.mergeCache)}return ee}getReachableTarget(Y,j){return Y.matches(j,0,this.atn.maxTokenType)?Y.target:null}getPredsForAmbigAlts(Y,j,ne){let ee=[];for(let te=0;te<j.items.length;te++){const ce=j.items[te];Y.contains(ce.alt)&&(ee[ce.alt]=M.orContext(ee[ce.alt]||null,ce.semanticContext))}let z=0;for(let te=1;te<ne+1;te++){const ce=ee[te]||null;ce===null?ee[te]=M.NONE:ce!==M.NONE&&(z+=1)}return z===0&&(ee=null),this.debug&&console.log("getPredsForAmbigAlts result "+s.arrayToString(ee)),ee}getPredicatePredictions(Y,j){const ne=[];let ee=!1;for(let z=1;z<j.length;z++){const te=j[z];Y!==null&&Y.contains(z)&&ne.push(new T(te,z)),te!==M.NONE&&(ee=!0)}return ee?ne:null}getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(Y,j){const ne=this.splitAccordingToSemanticValidity(Y,j),ee=ne[0],z=ne[1];let te=this.getAltThatFinishedDecisionEntryRule(ee);return te!==r.INVALID_ALT_NUMBER||z.items.length>0&&(te=this.getAltThatFinishedDecisionEntryRule(z),te!==r.INVALID_ALT_NUMBER)?te:r.INVALID_ALT_NUMBER}getAltThatFinishedDecisionEntryRule(Y){const j=[];for(let ne=0;ne<Y.items.length;ne++){const ee=Y.items[ne];(ee.reachesIntoOuterContext>0||ee.state instanceof l&&ee.context.hasEmptyPath())&&j.indexOf(ee.alt)<0&&j.push(ee.alt)}return j.length===0?r.INVALID_ALT_NUMBER:Math.min.apply(null,j)}splitAccordingToSemanticValidity(Y,j){const ne=new f(Y.fullCtx),ee=new f(Y.fullCtx);for(let z=0;z<Y.items.length;z++){const te=Y.items[z];te.semanticContext!==M.NONE?te.semanticContext.evaluate(this.parser,j)?ne.add(te):ee.add(te):ne.add(te)}return[ne,ee]}evalSemanticContext(Y,j,ne){const ee=new n;for(let z=0;z<Y.length;z++){const te=Y[z];if(te.pred===M.NONE){if(ee.add(te.alt),!ne)break;continue}const ce=te.pred.evaluate(this.parser,j);if((this.debug||this.dfa_debug)&&console.log("eval pred "+te+"="+ce),ce&&((this.debug||this.dfa_debug)&&console.log("PREDICT "+te.alt),ee.add(te.alt),!ne))break}return ee}closure(Y,j,ne,ee,z,te){this.closureCheckingStopState(Y,j,ne,ee,z,0,te)}closureCheckingStopState(Y,j,ne,ee,z,te,ce){if((this.debug||this.debug_closure)&&(console.log("closure("+Y.toString(this.parser,!0)+")"),Y.reachesIntoOuterContext>50))throw"problem";if(Y.state instanceof l)if(Y.context.isEmpty())if(z){j.add(Y,this.mergeCache);return}else this.debug&&console.log("FALLING off rule "+this.getRuleName(Y.state.ruleIndex));else{for(let pe=0;pe<Y.context.length;pe++){if(Y.context.getReturnState(pe)===C.EMPTY_RETURN_STATE){if(z){j.add(new h({state:Y.state,context:C.EMPTY},Y),this.mergeCache);continue}else this.debug&&console.log("FALLING off rule "+this.getRuleName(Y.state.ruleIndex)),this.closure_(Y,j,ne,ee,z,te,ce);continue}const K=this.atn.states[Y.context.getReturnState(pe)],fe=Y.context.getParent(pe),Ne={state:K,alt:Y.alt,context:fe,semanticContext:Y.semanticContext},Pe=new h(Ne,null);Pe.reachesIntoOuterContext=Y.reachesIntoOuterContext,this.closureCheckingStopState(Pe,j,ne,ee,z,te-1,ce)}return}this.closure_(Y,j,ne,ee,z,te,ce)}closure_(Y,j,ne,ee,z,te,ce){const pe=Y.state;pe.epsilonOnlyTransitions||j.add(Y,this.mergeCache);for(let K=0;K<pe.transitions.length;K++){if(K===0&&this.canDropLoopEntryEdgeInLeftRecursiveRule(Y))continue;const fe=pe.transitions[K],Ne=ee&&!(fe instanceof F),Pe=this.getEpsilonTarget(Y,fe,Ne,te===0,z,ce);if(Pe!==null){let Ee=te;if(Y.state instanceof l){if(this._dfa!==null&&this._dfa.precedenceDfa&&fe.outermostPrecedenceReturn===this._dfa.atnStartState.ruleIndex&&(Pe.precedenceFilterSuppressed=!0),Pe.reachesIntoOuterContext+=1,ne.add(Pe)!==Pe)continue;j.dipsIntoOuterContext=!0,Ee-=1,this.debug&&console.log("dips into outer ctx: "+Pe)}else{if(!fe.isEpsilon&&ne.add(Pe)!==Pe)continue;fe instanceof P&&Ee>=0&&(Ee+=1)}this.closureCheckingStopState(Pe,j,ne,Ne,z,Ee,ce)}}}canDropLoopEntryEdgeInLeftRecursiveRule(Y){const j=Y.state;if(j.stateType!==a.STAR_LOOP_ENTRY||j.stateType!==a.STAR_LOOP_ENTRY||!j.isPrecedenceDecision||Y.context.isEmpty()||Y.context.hasEmptyPath())return!1;const ne=Y.context.length;for(let ce=0;ce<ne;ce++)if(this.atn.states[Y.context.getReturnState(ce)].ruleIndex!==j.ruleIndex)return!1;const z=j.transitions[0].target.endState.stateNumber,te=this.atn.states[z];for(let ce=0;ce<ne;ce++){const pe=Y.context.getReturnState(ce),K=this.atn.states[pe];if(K.transitions.length!==1||!K.transitions[0].isEpsilon)return!1;const fe=K.transitions[0].target;if(!(K.stateType===a.BLOCK_END&&fe===j)&&K!==te&&fe!==te&&!(fe.stateType===a.BLOCK_END&&fe.transitions.length===1&&fe.transitions[0].isEpsilon&&fe.transitions[0].target===j))return!1}return!0}getRuleName(Y){return this.parser!==null&&Y>=0?this.parser.ruleNames[Y]:"<rule "+Y+">"}getEpsilonTarget(Y,j,ne,ee,z,te){switch(j.serializationType){case w.RULE:return this.ruleTransition(Y,j);case w.PRECEDENCE:return this.precedenceTransition(Y,j,ne,ee,z);case w.PREDICATE:return this.predTransition(Y,j,ne,ee,z);case w.ACTION:return this.actionTransition(Y,j);case w.EPSILON:return new h({state:j.target},Y);case w.ATOM:case w.RANGE:case w.SET:return te&&j.matches(p.EOF,0,1)?new h({state:j.target},Y):null;default:return null}}actionTransition(Y,j){if(this.debug){const ne=j.actionIndex===-1?65535:j.actionIndex;console.log("ACTION edge "+j.ruleIndex+":"+ne)}return new h({state:j.target},Y)}precedenceTransition(Y,j,ne,ee,z){this.debug&&(console.log("PRED (collectPredicates="+ne+") "+j.precedence+">=_p, ctx dependent=true"),this.parser!==null&&console.log("context surrounding pred is "+s.arrayToString(this.parser.getRuleInvocationStack())));let te=null;if(ne&&ee)if(z){const ce=this._input.index;this._input.seek(this._startIndex);const pe=j.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(ce),pe&&(te=new h({state:j.target},Y))}else{const ce=M.andContext(Y.semanticContext,j.getPredicate());te=new h({state:j.target,semanticContext:ce},Y)}else te=new h({state:j.target},Y);return this.debug&&console.log("config from pred transition="+te),te}predTransition(Y,j,ne,ee,z){this.debug&&(console.log("PRED (collectPredicates="+ne+") "+j.ruleIndex+":"+j.predIndex+", ctx dependent="+j.isCtxDependent),this.parser!==null&&console.log("context surrounding pred is "+s.arrayToString(this.parser.getRuleInvocationStack())));let te=null;if(ne&&(j.isCtxDependent&&ee||!j.isCtxDependent))if(z){const ce=this._input.index;this._input.seek(this._startIndex);const pe=j.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(ce),pe&&(te=new h({state:j.target},Y))}else{const ce=M.andContext(Y.semanticContext,j.getPredicate());te=new h({state:j.target,semanticContext:ce},Y)}else te=new h({state:j.target},Y);return this.debug&&console.log("config from pred transition="+te),te}ruleTransition(Y,j){this.debug&&console.log("CALL rule "+this.getRuleName(j.target.ruleIndex)+", ctx="+Y.context);const ne=j.followState,ee=X.create(Y.context,ne.stateNumber);return new h({state:j.target,context:ee},Y)}getConflictingAlts(Y){const j=S.getConflictingAltSubsets(Y);return S.getAlts(j)}getConflictingAltsOrUniqueAlt(Y){let j=null;return Y.uniqueAlt!==r.INVALID_ALT_NUMBER?(j=new n,j.add(Y.uniqueAlt)):j=Y.conflictingAlts,j}getTokenName(Y){if(Y===p.EOF)return"EOF";if(this.parser!==null&&this.parser.literalNames!==null)if(Y>=this.parser.literalNames.length&&Y>=this.parser.symbolicNames.length)console.log(""+Y+" ttype out of range: "+this.parser.literalNames),console.log(""+this.parser.getInputStream().getTokens());else return(this.parser.literalNames[Y]||this.parser.symbolicNames[Y])+"<"+Y+">";return""+Y}getLookaheadName(Y){return this.getTokenName(Y.LA(1))}dumpDeadEndConfigs(Y){console.log("dead end configs: ");const j=Y.getDeadEndConfigs();for(let ne=0;ne<j.length;ne++){const ee=j[ne];let z="no edges";if(ee.state.transitions.length>0){const te=ee.state.transitions[0];te instanceof AtomTransition?z="Atom "+this.getTokenName(te.label):te instanceof I&&(z=(te instanceof O?"~":"")+"Set "+te.set)}console.error(ee.toString(this.parser,!0)+":"+z)}}noViableAlt(Y,j,ne,ee){return new V(this.parser,Y,Y.get(ee),Y.LT(1),ne,j)}getUniqueAlt(Y){let j=r.INVALID_ALT_NUMBER;for(let ne=0;ne<Y.items.length;ne++){const ee=Y.items[ne];if(j===r.INVALID_ALT_NUMBER)j=ee.alt;else if(ee.alt!==j)return r.INVALID_ALT_NUMBER}return j}addDFAEdge(Y,j,ne,ee){if(this.debug&&console.log("EDGE "+j+" -> "+ee+" upon "+this.getTokenName(ne)),ee===null)return null;if(ee=this.addDFAState(Y,ee),j===null||ne<-1||ne>this.atn.maxTokenType)return ee;if(j.edges===null&&(j.edges=[]),j.edges[ne+1]=ee,this.debug){const z=this.parser===null?null:this.parser.literalNames,te=this.parser===null?null:this.parser.symbolicNames;console.log(`DFA=
`+Y.toString(z,te))}return ee}addDFAState(Y,j){if(j===y.ERROR)return j;const ne=Y.states.get(j);return ne!==null?ne:(j.stateNumber=Y.states.length,j.configs.readOnly||(j.configs.optimizeConfigs(this),j.configs.setReadonly(!0)),Y.states.add(j),this.debug&&console.log("adding new DFA state: "+j),j)}reportAttemptingFullContext(Y,j,ne,ee,z){if(this.debug||this.retry_debug){const te=new E(ee,z+1);console.log("reportAttemptingFullContext decision="+Y.decision+":"+ne+", input="+this.parser.getTokenStream().getText(te))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportAttemptingFullContext(this.parser,Y,ee,z,j,ne)}reportContextSensitivity(Y,j,ne,ee,z){if(this.debug||this.retry_debug){const te=new E(ee,z+1);console.log("reportContextSensitivity decision="+Y.decision+":"+ne+", input="+this.parser.getTokenStream().getText(te))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportContextSensitivity(this.parser,Y,ee,z,j,ne)}reportAmbiguity(Y,j,ne,ee,z,te,ce){if(this.debug||this.retry_debug){const pe=new E(ne,ee+1);console.log("reportAmbiguity "+te+":"+ce+", input="+this.parser.getTokenStream().getText(pe))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportAmbiguity(this.parser,Y,ne,ee,z,te,ce)}}return gI=D,gI}var DU;function Hce(){return DU||(DU=1,vv.ATN=CT(),vv.ATNDeserializer=lV(),vv.LexerATNSimulator=Uce(),vv.ParserATNSimulator=Fce(),vv.PredictionMode=hV()),vv}var BU={};/*! https://mths.be/codepointat v0.2.0 by @mathias */var kU;function fV(){return kU||(kU=1,String.prototype.codePointAt||function(){var s=function(){let n;try{const i={},r=Object.defineProperty;n=r(i,i,i)&&r}catch{}return n}();const e=function(n){if(this==null)throw TypeError();const i=String(this),r=i.length;let a=n?Number(n):0;if(a!==a&&(a=0),a<0||a>=r)return;const l=i.charCodeAt(a);let h;return l>=55296&&l<=56319&&r>a+1&&(h=i.charCodeAt(a+1),h>=56320&&h<=57343)?(l-55296)*1024+h-56320+65536:l};s?s(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}()),BU}var gy={},_I,PU;function UC(){if(PU)return _I;PU=1;const s=mu();class e{constructor(r,a,l){this.dfa=r,this.literalNames=a||[],this.symbolicNames=l||[]}toString(){if(this.dfa.s0===null)return null;let r="";const a=this.dfa.sortedStates();for(let l=0;l<a.length;l++){const h=a[l];if(h.edges!==null){const f=h.edges.length;for(let p=0;p<f;p++){const v=h.edges[p]||null;v!==null&&v.stateNumber!==2147483647&&(r=r.concat(this.getStateString(h)),r=r.concat("-"),r=r.concat(this.getEdgeLabel(p)),r=r.concat("->"),r=r.concat(this.getStateString(v)),r=r.concat(`
`))}}}return r.length===0?null:r}getEdgeLabel(r){return r===0?"EOF":this.literalNames!==null||this.symbolicNames!==null?this.literalNames[r-1]||this.symbolicNames[r-1]:String.fromCharCode(r-1)}getStateString(r){const a=(r.isAcceptState?":":"")+"s"+r.stateNumber+(r.requiresFullContext?"^":"");return r.isAcceptState?r.predicates!==null?a+"=>"+s.arrayToString(r.predicates):a+"=>"+r.prediction.toString():a}}class n extends e{constructor(r){super(r,null)}getEdgeLabel(r){return"'"+String.fromCharCode(r)+"'"}}return _I={DFASerializer:e,LexerDFASerializer:n},_I}var vI,UU;function Gce(){if(UU)return vI;UU=1;const{Set:s}=mu(),{DFAState:e}=cA(),{StarLoopEntryState:n}=qg(),{ATNConfigSet:i}=MT(),{DFASerializer:r}=UC(),{LexerDFASerializer:a}=UC();class l{constructor(f,p){if(p===void 0&&(p=0),this.atnStartState=f,this.decision=p,this._states=new s,this.s0=null,this.precedenceDfa=!1,f instanceof n&&f.isPrecedenceDecision){this.precedenceDfa=!0;const v=new e(null,new i);v.edges=[],v.isAcceptState=!1,v.requiresFullContext=!1,this.s0=v}}getPrecedenceStartState(f){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return f<0||f>=this.s0.edges.length?null:this.s0.edges[f]||null}setPrecedenceStartState(f,p){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";f<0||(this.s0.edges[f]=p)}setPrecedenceDfa(f){if(this.precedenceDfa!==f){if(this._states=new s,f){const p=new e(null,new i);p.edges=[],p.isAcceptState=!1,p.requiresFullContext=!1,this.s0=p}else this.s0=null;this.precedenceDfa=f}}sortedStates(){return this._states.values().sort(function(p,v){return p.stateNumber-v.stateNumber})}toString(f,p){return f=f||null,p=p||null,this.s0===null?"":new r(this,f,p).toString()}toLexerString(){return this.s0===null?"":new a(this).toString()}get states(){return this._states}}return vI=l,vI}var FU;function zce(){return FU||(FU=1,gy.DFA=Gce(),gy.DFASerializer=UC().DFASerializer,gy.LexerDFASerializer=UC().LexerDFASerializer,gy.PredPrediction=cA().PredPrediction),gy}var HU={};/*! https://mths.be/fromcodepoint v0.2.1 by @mathias */var GU;function pV(){return GU||(GU=1,String.fromCodePoint||function(){const s=function(){let r;try{const a={},l=Object.defineProperty;r=l(a,a,a)&&l}catch{}return r}(),e=String.fromCharCode,n=Math.floor,i=function(r){const l=[];let h,f,p=-1;const v=arguments.length;if(!v)return"";let T="";for(;++p<v;){let y=Number(arguments[p]);if(!isFinite(y)||y<0||y>1114111||n(y)!==y)throw RangeError("Invalid code point: "+y);y<=65535?l.push(y):(y-=65536,h=(y>>10)+55296,f=y%1024+56320,l.push(h,f)),(p+1===v||l.length>16384)&&(T+=e.apply(null,l),l.length=0)}return T};s?s(String,"fromCodePoint",{value:i,configurable:!0,writable:!0}):String.fromCodePoint=i}()),HU}var bI,zU;function Vce(){if(zU)return bI;zU=1;const s=lT(),e=sV();return bI={...s,Trees:e},bI}var Xd={},yI,VU;function Wce(){if(VU)return yI;VU=1;const{BitSet:s}=mu(),{ErrorListener:e}=PC(),{Interval:n}=Wc();class i extends e{constructor(a){super(),a=a||!0,this.exactOnly=a}reportAmbiguity(a,l,h,f,p,v,T){if(this.exactOnly&&!p)return;const y="reportAmbiguity d="+this.getDecisionDescription(a,l)+": ambigAlts="+this.getConflictingAlts(v,T)+", input='"+a.getTokenStream().getText(new n(h,f))+"'";a.notifyErrorListeners(y)}reportAttemptingFullContext(a,l,h,f,p,v){const T="reportAttemptingFullContext d="+this.getDecisionDescription(a,l)+", input='"+a.getTokenStream().getText(new n(h,f))+"'";a.notifyErrorListeners(T)}reportContextSensitivity(a,l,h,f,p,v){const T="reportContextSensitivity d="+this.getDecisionDescription(a,l)+", input='"+a.getTokenStream().getText(new n(h,f))+"'";a.notifyErrorListeners(T)}getDecisionDescription(a,l){const h=l.decision,f=l.atnStartState.ruleIndex,p=a.ruleNames;if(f<0||f>=p.length)return""+h;const v=p[f]||null;return v===null||v.length===0?""+h:`${h} (${v})`}getConflictingAlts(a,l){if(a!==null)return a;const h=new s;for(let f=0;f<l.items.length;f++)h.add(l.items[f].alt);return`{${h.values().join(", ")}}`}}return yI=i,yI}var TI,WU;function GO(){if(WU)return TI;WU=1;const{Token:s}=ra(),{NoViableAltException:e,InputMismatchException:n,FailedPredicateException:i,ParseCancellationException:r}=fp(),{ATNState:a}=qg(),{Interval:l,IntervalSet:h}=Wc();class f{reset(y){}recoverInline(y){}recover(y,S){}sync(y){}inErrorRecoveryMode(y){}reportError(y){}}class p extends f{constructor(){super(),this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this.nextTokensContext=null,this.nextTokenState=0}reset(y){this.endErrorCondition(y)}beginErrorCondition(y){this.errorRecoveryMode=!0}inErrorRecoveryMode(y){return this.errorRecoveryMode}endErrorCondition(y){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1}reportMatch(y){this.endErrorCondition(y)}reportError(y,S){this.inErrorRecoveryMode(y)||(this.beginErrorCondition(y),S instanceof e?this.reportNoViableAlternative(y,S):S instanceof n?this.reportInputMismatch(y,S):S instanceof i?this.reportFailedPredicate(y,S):(console.log("unknown recognition error type: "+S.constructor.name),console.log(S.stack),y.notifyErrorListeners(S.getOffendingToken(),S.getMessage(),S)))}recover(y,S){this.lastErrorIndex===y.getInputStream().index&&this.lastErrorStates!==null&&this.lastErrorStates.indexOf(y.state)>=0&&y.consume(),this.lastErrorIndex=y._input.index,this.lastErrorStates===null&&(this.lastErrorStates=[]),this.lastErrorStates.push(y.state);const $=this.getErrorRecoverySet(y);this.consumeUntil(y,$)}sync(y){if(this.inErrorRecoveryMode(y))return;const S=y._interp.atn.states[y.state],$=y.getTokenStream().LA(1),M=y.atn.nextTokens(S);if(M.contains($)){this.nextTokensContext=null,this.nextTokenState=a.INVALID_STATE_NUMBER;return}else if(M.contains(s.EPSILON)){this.nextTokensContext===null&&(this.nextTokensContext=y._ctx,this.nextTokensState=y._stateNumber);return}switch(S.stateType){case a.BLOCK_START:case a.STAR_BLOCK_START:case a.PLUS_BLOCK_START:case a.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(y)!==null)return;throw new n(y);case a.PLUS_LOOP_BACK:case a.STAR_LOOP_BACK:this.reportUnwantedToken(y);const C=new h;C.addSet(y.getExpectedTokens());const E=C.addSet(this.getErrorRecoverySet(y));this.consumeUntil(y,E);break}}reportNoViableAlternative(y,S){const $=y.getTokenStream();let M;$!==null?S.startToken.type===s.EOF?M="<EOF>":M=$.getText(new l(S.startToken.tokenIndex,S.offendingToken.tokenIndex)):M="<unknown input>";const C="no viable alternative at input "+this.escapeWSAndQuote(M);y.notifyErrorListeners(C,S.offendingToken,S)}reportInputMismatch(y,S){const $="mismatched input "+this.getTokenErrorDisplay(S.offendingToken)+" expecting "+S.getExpectedTokens().toString(y.literalNames,y.symbolicNames);y.notifyErrorListeners($,S.offendingToken,S)}reportFailedPredicate(y,S){const M="rule "+y.ruleNames[y._ctx.ruleIndex]+" "+S.message;y.notifyErrorListeners(M,S.offendingToken,S)}reportUnwantedToken(y){if(this.inErrorRecoveryMode(y))return;this.beginErrorCondition(y);const S=y.getCurrentToken(),$=this.getTokenErrorDisplay(S),M=this.getExpectedTokens(y),C="extraneous input "+$+" expecting "+M.toString(y.literalNames,y.symbolicNames);y.notifyErrorListeners(C,S,null)}reportMissingToken(y){if(this.inErrorRecoveryMode(y))return;this.beginErrorCondition(y);const S=y.getCurrentToken(),M="missing "+this.getExpectedTokens(y).toString(y.literalNames,y.symbolicNames)+" at "+this.getTokenErrorDisplay(S);y.notifyErrorListeners(M,S,null)}recoverInline(y){const S=this.singleTokenDeletion(y);if(S!==null)return y.consume(),S;if(this.singleTokenInsertion(y))return this.getMissingSymbol(y);throw new n(y)}singleTokenInsertion(y){const S=y.getTokenStream().LA(1),$=y._interp.atn,C=$.states[y.state].transitions[0].target;return $.nextTokens(C,y._ctx).contains(S)?(this.reportMissingToken(y),!0):!1}singleTokenDeletion(y){const S=y.getTokenStream().LA(2);if(this.getExpectedTokens(y).contains(S)){this.reportUnwantedToken(y),y.consume();const M=y.getCurrentToken();return this.reportMatch(y),M}else return null}getMissingSymbol(y){const S=y.getCurrentToken(),M=this.getExpectedTokens(y).first();let C;M===s.EOF?C="<missing EOF>":C="<missing "+y.literalNames[M]+">";let E=S;const w=y.getTokenStream().LT(-1);return E.type===s.EOF&&w!==null&&(E=w),y.getTokenFactory().create(E.source,M,C,s.DEFAULT_CHANNEL,-1,-1,E.line,E.column)}getExpectedTokens(y){return y.getExpectedTokens()}getTokenErrorDisplay(y){if(y===null)return"<no token>";let S=y.text;return S===null&&(y.type===s.EOF?S="<EOF>":S="<"+y.type+">"),this.escapeWSAndQuote(S)}escapeWSAndQuote(y){return y=y.replace(/\n/g,"\\n"),y=y.replace(/\r/g,"\\r"),y=y.replace(/\t/g,"\\t"),"'"+y+"'"}getErrorRecoverySet(y){const S=y._interp.atn;let $=y._ctx;const M=new h;for(;$!==null&&$.invokingState>=0;){const E=S.states[$.invokingState].transitions[0],w=S.nextTokens(E.followState);M.addSet(w),$=$.parentCtx}return M.removeOne(s.EPSILON),M}consumeUntil(y,S){let $=y.getTokenStream().LA(1);for(;$!==s.EOF&&!S.contains($);)y.consume(),$=y.getTokenStream().LA(1)}}class v extends p{constructor(){super()}recover(y,S){let $=y._ctx;for(;$!==null;)$.exception=S,$=$.parentCtx;throw new r(S)}recoverInline(y){this.recover(y,new n(y))}sync(y){}}return TI={BailErrorStrategy:v,DefaultErrorStrategy:p},TI}var XU;function Xce(){return XU||(XU=1,Xd.RecognitionException=fp().RecognitionException,Xd.NoViableAltException=fp().NoViableAltException,Xd.LexerNoViableAltException=fp().LexerNoViableAltException,Xd.InputMismatchException=fp().InputMismatchException,Xd.FailedPredicateException=fp().FailedPredicateException,Xd.DiagnosticErrorListener=Wce(),Xd.BailErrorStrategy=GO().BailErrorStrategy,Xd.DefaultErrorStrategy=GO().DefaultErrorStrategy,Xd.ErrorListener=PC().ErrorListener),Xd}var EI,jU;function YN(){if(jU)return EI;jU=1;const{Token:s}=ra();fV(),pV();class e{constructor(i,r){if(this.name="<empty>",this.strdata=i,this.decodeToUnicodeCodePoints=r||!1,this._index=0,this.data=[],this.decodeToUnicodeCodePoints)for(let a=0;a<this.strdata.length;){const l=this.strdata.codePointAt(a);this.data.push(l),a+=l<=65535?1:2}else{this.data=new Array(this.strdata.length);for(let a=0;a<this.strdata.length;a++){const l=this.strdata.charCodeAt(a);this.data[a]=l}}this._size=this.data.length}reset(){this._index=0}consume(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1}LA(i){if(i===0)return 0;i<0&&(i+=1);const r=this._index+i-1;return r<0||r>=this._size?s.EOF:this.data[r]}LT(i){return this.LA(i)}mark(){return-1}release(i){}seek(i){if(i<=this._index){this._index=i;return}this._index=Math.min(i,this._size)}getText(i,r){if(r>=this._size&&(r=this._size-1),i>=this._size)return"";if(this.decodeToUnicodeCodePoints){let a="";for(let l=i;l<=r;l++)a+=String.fromCodePoint(this.data[l]);return a}else return this.strdata.slice(i,r+1)}toString(){return this.strdata}get index(){return this._index}get size(){return this._size}}return EI=e,EI}const jce={},Yce=Object.freeze(Object.defineProperty({__proto__:null,default:jce},Symbol.toStringTag,{value:"Module"})),mV=zV(Yce);var SI,YU;function Kce(){if(YU)return SI;YU=1;const s=YN(),e=mV;return SI={fromString:function(i){return new s(i,!0)},fromBlob:function(i,r,a,l){const h=new window.FileReader;h.onload=function(f){const p=new s(f.target.result,!0);a(p)},h.onerror=l,h.readAsText(i,r)},fromBuffer:function(i,r){return new s(i.toString(r),!0)},fromPath:function(i,r,a){e.readFile(i,r,function(l,h){let f=null;h!==null&&(f=new s(h,!0)),a(l,f)})},fromPathSync:function(i,r){const a=e.readFileSync(i,r);return new s(a,!0)}},SI}var AI,KU;function qce(){if(KU)return AI;KU=1;const s=YN(),e=mV;class n extends s{constructor(r,a){const l=e.readFileSync(r,"utf8");super(l,a),this.fileName=r}}return AI=n,AI}var $I,qU;function Jce(){if(qU)return $I;qU=1;const{Token:s}=ra(),e=n1(),{Interval:n}=Wc();class i{}class r extends i{constructor(l){super(),this.tokenSource=l,this.tokens=[],this.index=-1,this.fetchedEOF=!1}mark(){return 0}release(l){}reset(){this.seek(0)}seek(l){this.lazyInit(),this.index=this.adjustSeekIndex(l)}get(l){return this.lazyInit(),this.tokens[l]}consume(){let l=!1;if(this.index>=0?this.fetchedEOF?l=this.index<this.tokens.length-1:l=this.index<this.tokens.length:l=!1,!l&&this.LA(1)===s.EOF)throw"cannot consume EOF";this.sync(this.index+1)&&(this.index=this.adjustSeekIndex(this.index+1))}sync(l){const h=l-this.tokens.length+1;return h>0?this.fetch(h)>=h:!0}fetch(l){if(this.fetchedEOF)return 0;for(let h=0;h<l;h++){const f=this.tokenSource.nextToken();if(f.tokenIndex=this.tokens.length,this.tokens.push(f),f.type===s.EOF)return this.fetchedEOF=!0,h+1}return l}getTokens(l,h,f){if(f===void 0&&(f=null),l<0||h<0)return null;this.lazyInit();const p=[];h>=this.tokens.length&&(h=this.tokens.length-1);for(let v=l;v<h;v++){const T=this.tokens[v];if(T.type===s.EOF)break;(f===null||f.contains(T.type))&&p.push(T)}return p}LA(l){return this.LT(l).type}LB(l){return this.index-l<0?null:this.tokens[this.index-l]}LT(l){if(this.lazyInit(),l===0)return null;if(l<0)return this.LB(-l);const h=this.index+l-1;return this.sync(h),h>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[h]}adjustSeekIndex(l){return l}lazyInit(){this.index===-1&&this.setup()}setup(){this.sync(0),this.index=this.adjustSeekIndex(0)}setTokenSource(l){this.tokenSource=l,this.tokens=[],this.index=-1,this.fetchedEOF=!1}nextTokenOnChannel(l,h){if(this.sync(l),l>=this.tokens.length)return-1;let f=this.tokens[l];for(;f.channel!==this.channel;){if(f.type===s.EOF)return-1;l+=1,this.sync(l),f=this.tokens[l]}return l}previousTokenOnChannel(l,h){for(;l>=0&&this.tokens[l].channel!==h;)l-=1;return l}getHiddenTokensToRight(l,h){if(h===void 0&&(h=-1),this.lazyInit(),l<0||l>=this.tokens.length)throw""+l+" not in 0.."+this.tokens.length-1;const f=this.nextTokenOnChannel(l+1,e.DEFAULT_TOKEN_CHANNEL),p=l+1,v=f===-1?this.tokens.length-1:f;return this.filterForChannel(p,v,h)}getHiddenTokensToLeft(l,h){if(h===void 0&&(h=-1),this.lazyInit(),l<0||l>=this.tokens.length)throw""+l+" not in 0.."+this.tokens.length-1;const f=this.previousTokenOnChannel(l-1,e.DEFAULT_TOKEN_CHANNEL);if(f===l-1)return null;const p=f+1,v=l-1;return this.filterForChannel(p,v,h)}filterForChannel(l,h,f){const p=[];for(let v=l;v<h+1;v++){const T=this.tokens[v];f===-1?T.channel!==e.DEFAULT_TOKEN_CHANNEL&&p.push(T):T.channel===f&&p.push(T)}return p.length===0?null:p}getSourceName(){return this.tokenSource.getSourceName()}getText(l){this.lazyInit(),this.fill(),l==null&&(l=new n(0,this.tokens.length-1));let h=l.start;h instanceof s&&(h=h.tokenIndex);let f=l.stop;if(f instanceof s&&(f=f.tokenIndex),h===null||f===null||h<0||f<0)return"";f>=this.tokens.length&&(f=this.tokens.length-1);let p="";for(let v=h;v<f+1;v++){const T=this.tokens[v];if(T.type===s.EOF)break;p=p+T.text}return p}fill(){for(this.lazyInit();this.fetch(1e3)===1e3;);}}return $I=r,$I}var xI,JU;function Zce(){if(JU)return xI;JU=1;const s=ra().Token,e=Jce();class n extends e{constructor(r,a){super(r),this.channel=a===void 0?s.DEFAULT_CHANNEL:a}adjustSeekIndex(r){return this.nextTokenOnChannel(r,this.channel)}LB(r){if(r===0||this.index-r<0)return null;let a=this.index,l=1;for(;l<=r;)a=this.previousTokenOnChannel(a-1,this.channel),l+=1;return a<0?null:this.tokens[a]}LT(r){if(this.lazyInit(),r===0)return null;if(r<0)return this.LB(-r);let a=this.index,l=1;for(;l<r;)this.sync(a+1)&&(a=this.nextTokenOnChannel(a+1,this.channel)),l+=1;return this.tokens[a]}getNumberOfOnChannelTokens(){let r=0;this.fill();for(let a=0;a<this.tokens.length;a++){const l=this.tokens[a];if(l.channel===this.channel&&(r+=1),l.type===s.EOF)break}return r}}return xI=n,xI}var CI,ZU;function Qce(){if(ZU)return CI;ZU=1;const{Token:s}=ra(),{ParseTreeListener:e,TerminalNode:n,ErrorNode:i}=lT(),r=uV(),{DefaultErrorStrategy:a}=GO(),l=lV(),h=oV(),f=n1();class p extends e{constructor(y){super(),this.parser=y}enterEveryRule(y){console.log("enter   "+this.parser.ruleNames[y.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}visitTerminal(y){console.log("consume "+y.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])}exitEveryRule(y){console.log("exit    "+this.parser.ruleNames[y.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}}class v extends r{constructor(y){super(),this._input=null,this._errHandler=new a,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.setInputStream(y)}reset(){this._input!==null&&this._input.seek(0),this._errHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),this._interp!==null&&this._interp.reset()}match(y){let S=this.getCurrentToken();return S.type===y?(this._errHandler.reportMatch(this),this.consume()):(S=this._errHandler.recoverInline(this),this.buildParseTrees&&S.tokenIndex===-1&&this._ctx.addErrorNode(S)),S}matchWildcard(){let y=this.getCurrentToken();return y.type>0?(this._errHandler.reportMatch(this),this.consume()):(y=this._errHandler.recoverInline(this),this._buildParseTrees&&y.tokenIndex===-1&&this._ctx.addErrorNode(y)),y}getParseListeners(){return this._parseListeners||[]}addParseListener(y){if(y===null)throw"listener";this._parseListeners===null&&(this._parseListeners=[]),this._parseListeners.push(y)}removeParseListener(y){if(this._parseListeners!==null){const S=this._parseListeners.indexOf(y);S>=0&&this._parseListeners.splice(S,1),this._parseListeners.length===0&&(this._parseListeners=null)}}removeParseListeners(){this._parseListeners=null}triggerEnterRuleEvent(){if(this._parseListeners!==null){const y=this._ctx;this._parseListeners.forEach(function(S){S.enterEveryRule(y),y.enterRule(S)})}}triggerExitRuleEvent(){if(this._parseListeners!==null){const y=this._ctx;this._parseListeners.slice(0).reverse().forEach(function(S){y.exitRule(S),S.exitEveryRule(y)})}}getTokenFactory(){return this._input.tokenSource._factory}setTokenFactory(y){this._input.tokenSource._factory=y}getATNWithBypassAlts(){const y=this.getSerializedATN();if(y===null)throw"The current parser does not support an ATN with bypass alternatives.";let S=this.bypassAltsAtnCache[y];if(S===null){const $=new h;$.generateRuleBypassTransitions=!0,S=new l($).deserialize(y),this.bypassAltsAtnCache[y]=S}return S}compileParseTreePattern(y,S,$){if($=$||null,$===null&&this.getTokenStream()!==null){const C=this.getTokenStream().tokenSource;C instanceof f&&($=C)}if($===null)throw"Parser can't discover a lexer to use";return new ParseTreePatternMatcher($,this).compile(y,S)}getInputStream(){return this.getTokenStream()}setInputStream(y){this.setTokenStream(y)}getTokenStream(){return this._input}setTokenStream(y){this._input=null,this.reset(),this._input=y}getCurrentToken(){return this._input.LT(1)}notifyErrorListeners(y,S,$){S=S||null,$=$||null,S===null&&(S=this.getCurrentToken()),this._syntaxErrors+=1;const M=S.line,C=S.column;this.getErrorListenerDispatch().syntaxError(this,S,M,C,y,$)}consume(){const y=this.getCurrentToken();y.type!==s.EOF&&this.getInputStream().consume();const S=this._parseListeners!==null&&this._parseListeners.length>0;if(this.buildParseTrees||S){let $;this._errHandler.inErrorRecoveryMode(this)?$=this._ctx.addErrorNode(y):$=this._ctx.addTokenNode(y),$.invokingState=this.state,S&&this._parseListeners.forEach(function(M){$ instanceof i||$.isErrorNode!==void 0&&$.isErrorNode()?M.visitErrorNode($):$ instanceof n&&M.visitTerminal($)})}return y}addContextToParseTree(){this._ctx.parentCtx!==null&&this._ctx.parentCtx.addChild(this._ctx)}enterRule(y,S,$){this.state=S,this._ctx=y,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this._ctx.stop=this._input.LT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parentCtx}enterOuterAlt(y,S){y.setAltNumber(S),this.buildParseTrees&&this._ctx!==y&&this._ctx.parentCtx!==null&&(this._ctx.parentCtx.removeLastChild(),this._ctx.parentCtx.addChild(y)),this._ctx=y}getPrecedence(){return this._precedenceStack.length===0?-1:this._precedenceStack[this._precedenceStack.length-1]}enterRecursionRule(y,S,$,M){this.state=S,this._precedenceStack.push(M),this._ctx=y,this._ctx.start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(y,S,$){const M=this._ctx;M.parentCtx=y,M.invokingState=S,M.stop=this._input.LT(-1),this._ctx=y,this._ctx.start=M.start,this.buildParseTrees&&this._ctx.addChild(M),this.triggerEnterRuleEvent()}unrollRecursionContexts(y){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);const S=this._ctx,$=this.getParseListeners();if($!==null&&$.length>0)for(;this._ctx!==y;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parentCtx;else this._ctx=y;S.parentCtx=y,this.buildParseTrees&&y!==null&&y.addChild(S)}getInvokingContext(y){let S=this._ctx;for(;S!==null;){if(S.ruleIndex===y)return S;S=S.parentCtx}return null}precpred(y,S){return S>=this._precedenceStack[this._precedenceStack.length-1]}inContext(y){return!1}isExpectedToken(y){const S=this._interp.atn;let $=this._ctx;const M=S.states[this.state];let C=S.nextTokens(M);if(C.contains(y))return!0;if(!C.contains(s.EPSILON))return!1;for(;$!==null&&$.invokingState>=0&&C.contains(s.EPSILON);){const w=S.states[$.invokingState].transitions[0];if(C=S.nextTokens(w.followState),C.contains(y))return!0;$=$.parentCtx}return!!(C.contains(s.EPSILON)&&y===s.EOF)}getExpectedTokens(){return this._interp.atn.getExpectedTokens(this.state,this._ctx)}getExpectedTokensWithinCurrentRule(){const y=this._interp.atn,S=y.states[this.state];return y.nextTokens(S)}getRuleIndex(y){const S=this.getRuleIndexMap()[y];return S!==null?S:-1}getRuleInvocationStack(y){y=y||null,y===null&&(y=this._ctx);const S=[];for(;y!==null;){const $=y.ruleIndex;$<0?S.push("n/a"):S.push(this.ruleNames[$]),y=y.parentCtx}return S}getDFAStrings(){return this._interp.decisionToDFA.toString()}dumpDFA(){let y=!1;for(let S=0;S<this._interp.decisionToDFA.length;S++){const $=this._interp.decisionToDFA[S];$.states.length>0&&(y&&console.log(),this.printer.println("Decision "+$.decision+":"),this.printer.print($.toString(this.literalNames,this.symbolicNames)),y=!0)}}getSourceName(){return this._input.sourceName}setTrace(y){y?(this._tracer!==null&&this.removeParseListener(this._tracer),this._tracer=new p(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)}}return v.bypassAltsAtnCache={},CI=v,CI}var QU;function ehe(){if(QU)return Jr;QU=1,Jr.atn=Hce(),Jr.codepointat=fV(),Jr.dfa=zce(),Jr.fromcodepoint=pV(),Jr.tree=Vce(),Jr.error=Xce(),Jr.Token=ra().Token,Jr.CharStreams=Kce(),Jr.CommonToken=ra().CommonToken,Jr.InputStream=YN(),Jr.FileStream=qce(),Jr.CommonTokenStream=Zce(),Jr.Lexer=n1(),Jr.Parser=Qce();var s=Fg();return Jr.PredictionContextCache=s.PredictionContextCache,Jr.ParserRuleContext=dV(),Jr.Interval=Wc().Interval,Jr.IntervalSet=Wc().IntervalSet,Jr.Utils=mu(),Jr.LL1Analyzer=rV().LL1Analyzer,Jr}var the=ehe();const Ln=Mp(the),nhe=["悋Ꜫ脳맭䅼㯧瞆","奤E˄\b		","			\x07",`	\x07\b	\b			
	
\v	\v`,"\f	\f\r	\r		","				","			","				","\x1B	\x1B		",'		 	 !	!"	"#',"	#$	$%	%&	&'	'(	()	)","*	*+	+,	,-	-.	./	/0	0","1	12	23	34	45	56	67	7","8	89	9:	:;	;<	<=	=>	>","?	?@	@A	AB	BC	CD	D","","","","","","","","","","\x07\x07\x07\x07\x07","\x07\x07\x07\x07\x07\x07","\b\b\b\b\b\b\b\b	","									",`		






`,`

\v\v\v\v\v`,"\v\v\v\v\v\f","\f\f\f\f\f\f\f\f","\f\f\f\f\f\r\r\r\r","\r\r\r\r\r\r\r","","","","","","","","","","","","","\x1B","\x1B\x1B\x1B\x1B\x1B","","","","","","   ","          ",'!!!!!!!!!"','""""""""#',"##########","#$$$$$$$$$","$$$$%%%%%%","%&&&&''''","''''(((((","((()))))))",")******+++","+++++,,,,,",",,,,,,,,--","-------...",".......///","///////000","0000001111","1111222222","2222222333","3333344444","4444444455","5555555566","6666666666","6667777777","7788888888","8888889999","999999::::",":;;;;;;;<<","<<=====>>>",">>?????@@@",`@@@@@AAA\x07Aʮ
A\f`,`AAʱ\vABBʴ
BCCD`,`DD\x07Dʻ
D\fDDʾ\vDDDˁ`,`
DDDE\x07	`,`\v\x07\r\b	
\v\f\r`,"\x1B!#%'",")+-/13\x1B579;",`= ?!A"C#E$G%I&K'M(O)Q*S+U,W-Y.[/]0_1a2c3e4g5i6k7m8o9q:s;u<w=y>{?}`,"@ABCDE/",'/C\\c|2;\v\f""',"ˇ","\x07	","\v\r","","","","\x1B","!","#%","')","+-","/1","35","79;","=?","AC","EG","IK","MOQ","SU","WY","[]","_a","ceg","ik","mo","qs","uw","y{}","","","","\x07","	©\v³","\rÁÌ","Ôà","éó","ā\x1BČ","ĎĔ","!Ė#Ę","%Ě'ĥ",")ĩ+ĸ","-ń/Ō1Ő","3ŕ5Ś","7Š9ũ",";ů=ŷ","?ƃAƐ","CƙEƢGƮ","IƻKǂ","MǆOǎ","QǖSǞ","UǤWǬ","Yǹ[Ȃ]Ȍ","_Ȗaȟ","cȧeȴ","gȼiɉ","kɓmɢ","oɫqɹsʃ","uʈwʏ","yʓ{ʘ","}ʝʢ","ʪʳ","ʵˀ","\x07r\x07t","\x07q\x07i","\x07t\x07c","\x07o\x07o","\x07g","\x07p\x07f\x07","g\x07r\x07t","\x07q\x07i","\x07t\x07c","\x07o\x07o"," \x07, ¡","\x07r¡¢\x07t¢£\x07","q£¤\x07i¤¥\x07t","¥¦\x07c¦§\x07o","§¨\x07o¨\b©","ª\x07cª«\x07p«¬","\x07y¬­\x07g­®\x07","k®¯\x07u¯°\x07w","°±\x07p±²\x07i",`²
³´\x07g´`,"µ\x07pµ¶\x07f¶·","\x07g·¸\x07c¸¹\x07","p¹º\x07yº»\x07g","»¼\x07k¼½\x07u","½¾\x07w¾¿\x07p¿","À\x07iÀ\fÁÂ","\x07,ÂÃ\x07cÃÄ\x07","pÄÅ\x07yÅÆ\x07g","ÆÇ\x07kÇÈ\x07u","ÈÉ\x07wÉÊ\x07pÊ","Ë\x07iËÌ","Í\x07oÍÎ\x07gÎÏ","\x07vÏÐ\x07jÐÑ\x07","qÑÒ\x07fÒÓ\x07g","ÓÔÕ\x07g","ÕÖ\x07pÖ×\x07f","×Ø\x07gØÙ\x07oÙ","Ú\x07gÚÛ\x07vÛÜ","\x07jÜÝ\x07qÝÞ\x07","fÞß\x07gß","àá\x07,áâ\x07o","âã\x07gãä\x07v","äå\x07jåæ\x07qæ","ç\x07fçè\x07gè","éê\x07dêë","\x07gëì\x07fìí\x07","kíî\x07pîï\x07i","ïð\x07wðñ\x07p","ñò\x07iò","óô\x07gôõ\x07põ","ö\x07fö÷\x07g÷ø","\x07døù\x07gùú\x07","fúû\x07kûü\x07p","üý\x07iýþ\x07w","þÿ\x07pÿĀ\x07iĀ","āĂ\x07,Ă","ă\x07dăĄ\x07gĄą","\x07fąĆ\x07kĆć\x07","pćĈ\x07iĈĉ\x07w","ĉĊ\x07pĊċ\x07i","ċČč\x07=","čĎď\x07m","ďĐ\x07cĐđ\x07tđ","Ē\x07qĒē\x07nē","Ĕĕ\x070ĕ ",'Ėė\x07*ė"',"Ęę\x07+ę$","Ěě\x07yěĜ\x07k","Ĝĝ\x07gĝĞ\x07fĞ","ğ\x07gğĠ\x07tĠġ","\x07jġĢ\x07qĢģ\x07","nģĤ\x07gĤ&","ĥĦ\x07oĦħ\x07c","ħĨ\x07nĨ(ĩ","Ī\x07gĪī\x07pīĬ","\x07fĬĭ\x07gĭĮ\x07","yĮį\x07kįİ\x07g","İı\x07fıĲ\x07g","Ĳĳ\x07tĳĴ\x07jĴ","ĵ\x07qĵĶ\x07nĶķ","\x07gķ*ĸĹ\x07",",Ĺĺ\x07yĺĻ\x07k","Ļļ\x07gļĽ\x07f","Ľľ\x07gľĿ\x07tĿ","ŀ\x07jŀŁ\x07qŁł","\x07nłŃ\x07gŃ,","ńŅ\x07uŅņ\x07q","ņŇ\x07nŇň\x07c","ňŉ\x07pŉŊ\x07iŊ","ŋ\x07gŋ.Ōō","\x07dōŎ\x07kŎŏ\x07","uŏ0Őő\x07y","őŒ\x07gŒœ\x07p","œŔ\x07pŔ2ŕ","Ŗ\x07fŖŗ\x07cŗŘ","\x07pŘř\x07př4","Śś\x07uśŜ\x07q","Ŝŝ\x07pŝŞ\x07u","Şş\x07vş6Š","š\x07gšŢ\x07pŢţ","\x07fţŤ\x07gŤť\x07","yťŦ\x07gŦŧ\x07p","ŧŨ\x07pŨ8","ũŪ\x07,Ūū\x07yū","Ŭ\x07gŬŭ\x07pŭŮ","\x07pŮ:ůŰ\x07","uŰű\x07eűŲ\x07j","Ųų\x07tųŴ\x07k","Ŵŵ\x07vŵŶ\x07vŶ","<ŷŸ\x07nŸŹ","\x07kŹź\x07pźŻ\x07","mŻż\x07użŽ\x07f","Žž\x07tžſ\x07g","ſƀ\x07jƀƁ\x07gƁ","Ƃ\x07pƂ>ƃƄ","\x07tƄƅ\x07gƅƆ\x07","eƆƇ\x07jƇƈ\x07v","ƈƉ\x07uƉƊ\x07f","ƊƋ\x07tƋƌ\x07gƌ","ƍ\x07jƍƎ\x07gƎƏ","\x07pƏ@ƐƑ\x07","jƑƒ\x07kƒƓ\x07p","ƓƔ\x07nƔƕ\x07g","ƕƖ\x07iƖƗ\x07gƗ","Ƙ\x07pƘBƙƚ","\x07cƚƛ\x07wƛƜ\x07","hƜƝ\x07jƝƞ\x07g","ƞƟ\x07dƟƠ\x07g","Ơơ\x07pơDƢ","ƣ\x07oƣƤ\x07cƤƥ","\x07tƥƦ\x07mƦƧ\x07","gƧƨ\x07uƨƩ\x07g","Ʃƪ\x07vƪƫ\x07|","ƫƬ\x07gƬƭ\x07pƭ","FƮƯ\x07oƯư","\x07cưƱ\x07tƱƲ\x07","mƲƳ\x07gƳƴ\x07n","ƴƵ\x07øƵƶ\x07u","ƶƷ\x07eƷƸ\x07j","Ƹƹ\x07gƹƺ\x07pƺ","HƻƼ\x07yƼƽ","\x07cƽƾ\x07tƾƿ\x07","vƿǀ\x07gǀǁ\x07p","ǁJǂǃ\x07v","ǃǄ\x07qǄǅ\x07pǅ","LǆǇ\x07dǇǈ","\x07gǈǉ\x07gǉǊ\x07","pǊǋ\x07fǋǌ\x07g","ǌǍ\x07pǍN","ǎǏ\x07uǏǐ\x07eǐ","Ǒ\x07jǑǒ\x07pǒǓ","\x07gǓǔ\x07nǔǕ\x07","nǕPǖǗ\x07n","Ǘǘ\x07cǘǙ\x07p","Ǚǚ\x07iǚǛ\x07uǛ","ǜ\x07cǜǝ\x07oǝR","Ǟǟ\x07pǟǠ\x07","kǠǡ\x07eǡǢ\x07j","Ǣǣ\x07vǣT","Ǥǥ\x07kǥǦ\x07uǦ","ǧ\x07vǧǨ\x07yǨǩ","\x07cǩǪ\x07pǪǫ\x07","fǫVǬǭ\x07p","ǭǮ\x07kǮǯ\x07e","ǯǰ\x07jǰǱ\x07vǱ","ǲ\x07kǲǳ\x07uǳǴ","\x07vǴǵ\x07yǵǶ\x07","cǶǷ\x07pǷǸ\x07f","ǸXǹǺ\x07k","Ǻǻ\x07uǻǼ\x07vǼ","ǽ\x07uǽǾ\x07þǾ","ǿ\x07fǿȀ\x07gȀȁ","\x07pȁZȂȃ\x07","kȃȄ\x07uȄȅ\x07v","ȅȆ\x07pȆȇ\x07q","ȇȈ\x07tȈȉ\x07fȉ","Ȋ\x07gȊȋ\x07pȋ\\","Ȍȍ\x07kȍȎ\x07","uȎȏ\x07vȏȐ\x07y","Ȑȑ\x07gȑȒ\x07u","Ȓȓ\x07vȓȔ\x07gȔ","ȕ\x07pȕ^Ȗȗ","\x07kȗȘ\x07uȘș\x07","vșȚ\x07qȚț\x07u","țȜ\x07vȜȝ\x07g","ȝȞ\x07pȞ`ȟ","Ƞ\x07kȠȡ\x07uȡȢ","\x07vȢȣ\x07xȣȤ\x07","qȤȥ\x07nȥȦ\x07n","ȦbȧȨ\x07p","Ȩȩ\x07kȩȪ\x07eȪ","ȫ\x07jȫȬ\x07vȬȭ","\x07kȭȮ\x07uȮȯ\x07","vȯȰ\x07xȰȱ\x07q","ȱȲ\x07nȲȳ\x07n","ȳdȴȵ\x07kȵ","ȶ\x07uȶȷ\x07vȷȸ","\x07nȸȹ\x07gȹȺ\x07","gȺȻ\x07tȻf","ȼȽ\x07pȽȾ\x07k","Ⱦȿ\x07eȿɀ\x07jɀ","Ɂ\x07vɁɂ\x07kɂɃ","\x07uɃɄ\x07vɄɅ\x07","nɅɆ\x07gɆɇ\x07g","ɇɈ\x07tɈh","ɉɊ\x07kɊɋ\x07uɋ","Ɍ\x07vɌɍ\x07|ɍɎ","\x07kɎɏ\x07gɏɐ\x07","iɐɑ\x07gɑɒ\x07n","ɒjɓɔ\x07p","ɔɕ\x07kɕɖ\x07eɖ","ɗ\x07jɗɘ\x07vɘə","\x07kəɚ\x07uɚɛ\x07","vɛɜ\x07|ɜɝ\x07k","ɝɞ\x07gɞɟ\x07i","ɟɠ\x07gɠɡ\x07nɡ","lɢɣ\x07kɣɤ","\x07uɤɥ\x07vɥɦ\x07","oɦɧ\x07cɧɨ\x07t","ɨɩ\x07mɩɪ\x07g","ɪnɫɬ\x07pɬ","ɭ\x07kɭɮ\x07eɮɯ","\x07jɯɰ\x07vɰɱ\x07","kɱɲ\x07uɲɳ\x07v","ɳɴ\x07oɴɵ\x07c","ɵɶ\x07tɶɷ\x07mɷ","ɸ\x07gɸpɹɺ","\x07jɺɻ\x07cɻɼ\x07","vɼɽ\x07|ɽɾ\x07k","ɾɿ\x07gɿʀ\x07i","ʀʁ\x07gʁʂ\x07nʂ","rʃʄ\x07yʄʅ","\x07cʅʆ\x07jʆʇ\x07","tʇtʈʉ\x07h","ʉʊ\x07cʊʋ\x07n","ʋʌ\x07uʌʍ\x07eʍ","ʎ\x07jʎvʏʐ","\x07tʐʑ\x07qʑʒ\x07","vʒxʓʔ\x07i","ʔʕ\x07gʕʖ\x07n","ʖʗ\x07dʗzʘ","ʙ\x07dʙʚ\x07nʚʛ","\x07cʛʜ\x07wʜ|","ʝʞ\x07iʞʟ\x07t","ʟʠ\x07þʠʡ\x07p","ʡ~ʢʣ\x07u","ʣʤ\x07eʤʥ\x07jʥ","ʦ\x07yʦʧ\x07cʧʨ","\x07tʨʩ\x07|ʩ","ʪʯBʫʮ","BʬʮCʭʫ","ʭʬʮʱ","ʯʭʯʰ","ʰʱʯ","ʲʴ	ʳʲ","ʴʵʶ	","ʶʷˁ	",`ʸʼ\x07}ʹʻ
`,"ʺʹʻʾ","ʼʺʼʽ","ʽʿʾʼ","ʿˁ\x07ˀʷ","ˀʸˁ˂","˂˃\bD˃","\bʭʯʳʼˀ\b"].join(""),zO=new Ln.atn.ATNDeserializer().deserialize(nhe),ihe=zO.decisionToState.map((s,e)=>new Ln.dfa.DFA(s,e));class dn extends Ln.Lexer{static grammarFileName="Karol.g4";static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static modeNames=["DEFAULT_MODE"];static literalNames=[null,"'programm'","'endeprogramm'","'*programm'","'anweisung'","'endeanweisung'","'*anweisung'","'methode'","'endemethode'","'*methode'","'bedingung'","'endebedingung'","'*bedingung'","';'","'karol'","'.'","'('","')'","'wiederhole'","'mal'","'endewiederhole'","'*wiederhole'","'solange'","'bis'","'wenn'","'dann'","'sonst'","'endewenn'","'*wenn'","'schritt'","'linksdrehen'","'rechtsdrehen'","'hinlegen'","'aufheben'","'markesetzen'","'markelöschen'","'warten'","'ton'","'beenden'","'schnell'","'langsam'","'nicht'","'istwand'","'nichtistwand'","'istsüden'","'istnorden'","'istwesten'","'istosten'","'istvoll'","'nichtistvoll'","'istleer'","'nichtistleer'","'istziegel'","'nichtistziegel'","'istmarke'","'nichtistmarke'","'hatziegel'","'wahr'","'falsch'","'rot'","'gelb'","'blau'","'grün'","'schwarz'"];static symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"IDENTIFIER","LETTER","DIGIT","WS"];static ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","T__12","T__13","T__14","T__15","T__16","T__17","T__18","T__19","T__20","T__21","T__22","T__23","T__24","T__25","T__26","T__27","T__28","T__29","T__30","T__31","T__32","T__33","T__34","T__35","T__36","T__37","T__38","T__39","T__40","T__41","T__42","T__43","T__44","T__45","T__46","T__47","T__48","T__49","T__50","T__51","T__52","T__53","T__54","T__55","T__56","T__57","T__58","T__59","T__60","T__61","T__62","IDENTIFIER","LETTER","DIGIT","WS"];constructor(e){super(e),this._interp=new Ln.atn.LexerATNSimulator(this,zO,ihe,new Ln.PredictionContextCache)}get atn(){return zO}}dn.EOF=Ln.Token.EOF;dn.T__0=1;dn.T__1=2;dn.T__2=3;dn.T__3=4;dn.T__4=5;dn.T__5=6;dn.T__6=7;dn.T__7=8;dn.T__8=9;dn.T__9=10;dn.T__10=11;dn.T__11=12;dn.T__12=13;dn.T__13=14;dn.T__14=15;dn.T__15=16;dn.T__16=17;dn.T__17=18;dn.T__18=19;dn.T__19=20;dn.T__20=21;dn.T__21=22;dn.T__22=23;dn.T__23=24;dn.T__24=25;dn.T__25=26;dn.T__26=27;dn.T__27=28;dn.T__28=29;dn.T__29=30;dn.T__30=31;dn.T__31=32;dn.T__32=33;dn.T__33=34;dn.T__34=35;dn.T__35=36;dn.T__36=37;dn.T__37=38;dn.T__38=39;dn.T__39=40;dn.T__40=41;dn.T__41=42;dn.T__42=43;dn.T__43=44;dn.T__44=45;dn.T__45=46;dn.T__46=47;dn.T__47=48;dn.T__48=49;dn.T__49=50;dn.T__50=51;dn.T__51=52;dn.T__52=53;dn.T__53=54;dn.T__54=55;dn.T__55=56;dn.T__56=57;dn.T__57=58;dn.T__58=59;dn.T__59=60;dn.T__60=61;dn.T__61=62;dn.T__62=63;dn.IDENTIFIER=64;dn.LETTER=65;dn.DIGIT=66;dn.WS=67;class qa extends Ln.tree.ParseTreeVisitor{visitKarol(e){return this.visitChildren(e)}visitDefinition(e){return this.visitChildren(e)}visitMethoddefinition(e){return this.visitChildren(e)}visitConditiondefinition(e){return this.visitChildren(e)}visitStatement(e){return this.visitChildren(e)}visitCustomMethodCall(e){return this.visitChildren(e)}visitIteration(e){return this.visitChildren(e)}visitLoop(e){return this.visitChildren(e)}visitConditional(e){return this.visitChildren(e)}visitInstruction(e){return this.visitChildren(e)}visitParameterizedinstruction(e){return this.visitChildren(e)}visitConditionexpression(e){return this.visitChildren(e)}visitCustomConditionCall(e){return this.visitChildren(e)}visitCondition(e){return this.visitChildren(e)}visitParameterizedcondition(e){return this.visitChildren(e)}visitColor(e){return this.visitChildren(e)}visitNumber(e){return this.visitChildren(e)}}const she=["悋Ꜫ脳맭䅼㯧瞆","奤Eĝ		","			\x07	\x07",`\b	\b			
	
\v	\v\f	\f`,"\r	\r			",`		\x07&
`,"\f)\v\x07",`-
\f0\v`,`\x074
\f7\v\x07`,`:
\f=\v?
`,`C
`,`\x07H
\fK\v`,`\x07Q
\f`,`T\vW
`,`]
\r`,"^",`h
`,`p
`,`t
`,`z
`,`}
\x07\x07\b\b\b\b\x07`,`\b
\b\f\b\b\v\b\b\b	`,`			\x07	
	\f		\v	`,`				\x07	
	\f		\v`,`						\x07	£
	\f	`,`	¦\v					«
	
`,`


\x07
±

\f

´\v
`,`

\x07
¸

\f

»\v

½`,`



\v\v\f\f\f`,`\f\f\f\f\f\f\fÌ
\f`,"\f\f\f\f\f\f\f\f\f","\f\f\f\f\f\f\f\f\fß",`
\f\r\r\r\r\r\r\r\r`,`\r\r\r\r\r\r\rï
\r`,"",`ù
`,`ā
`,"","","",`Ĕ
`,`ę
\rĚ`,`\b
\f`,' "\v\x07\b',`
\v\r`,"*,<=AĻ",">B",`V\bX
|`,"\f~","ª¬","ÀÞ","îð","òē",' ĕ"Ę',"$&%$&)","'%'((*",")'*.\x07",`+-
,+-0`,".,.//1","0.1?	24","3247","53566;",`758:
98`,":=;9;<","<?=;",">'>5?","@C\bACB@","BAC",`DE\x07EI\x07BFH
`,"GFHKIG","IJJLKI","LW	MN\x07	NR\x07",`BOQ
POQT`,"RPRS","SUTRUW	","VDVMW\x07","XY\x07\fY\\\x07BZ]",`
[]\r\\Z\\[`,"]^^\\","^__``a	","a	b}\bc}",`	d}
eg\vfh\x07`,"gfghh}","ij\x07jk\x07","kl\vlm\x07mo\x07","np\x07onop","p}qs\frt\x07","srst","t}uv\x07vw\x07","wy\fxz\x07yx","yzz}{}","\f\x07|b|c|","d|e|i","|q|u|{","}\v~\x07B","\r\x07",'"\x07',`
`,"","","	","\x07","\x07\r",`
`,"","","	","«\x07",`
`,"","","	","\x07«\r",` ¤\x07¡£
`,"¢¡£¦","¤¢¤¥","¥§¦¤","§¨	¨©\x07","©«\rª","ªª ","«¬­\x07","­®\r®²\x07\x1B",`¯±
°¯`,"±´²°","²³³¼","´²µ¹\x07",`¶¸
·¶`,"¸»¹·","¹ºº½","»¹¼µ","¼½½¾","¾¿	\x07¿","ÀÁ	\bÁÂ","Ã\x07ÃÄ\x07Ä",'Å"ÅÆ\x07Æ','ßÇÈ\x07"È',"Ë\x07ÉÌ Ê",'Ì"ËÉË',"ÊÌÍÍ","Î\x07ÎßÏ","Ð\x07#ÐÑ\x07Ñ",'Ò"ÒÓ\x07Ó',"ßÔÕ\x07$Õ","Ö\x07Ö× ×","Ø\x07ØßÙ","Ú\x07&ÚÛ\x07Û",'Ü"ÜÝ\x07Ý',"ßÞÂÞ","ÇÞÏÞ","ÔÞÙß","àá\x07+á","ï\râïã","ä\x07äå\x07å","ææç\x07ç","è\x07èïé","ïêë\x07ë","ì\x07ìïí","ïîàî","âîãî","éîêî","íïð","ñ\x07Bñ\x1Bò","ó		óôõ","\x076õø\x07öù",' ÷ù"øö',"ø÷ùú","úû\x07ûĔ","üý\x077ýĀ\x07","þā ÿā",'"ĀþĀÿ',"āĂĂă\x07","ăĔĄą\x07","8ąĆ\x07Ćć"," ćĈ\x07ĈĔ","ĉĊ\x079Ċċ\x07","ċČ Čč\x07","čĔĎď\x07",":ďĐ\x07Đđ",'"đĒ\x07ĒĔ',"ēôēü","ēĄēĉ","ēĎĔ",`ĕĖ	
Ė!`,"ėę\x07DĘė","ęĚĚĘ","Ěěě#","!'.5;>BIRV\\^gosy|¤ª²¹","¼ËÞîøĀēĚ"].join(""),VO=new Ln.atn.ATNDeserializer().deserialize(she),rhe=VO.decisionToState.map((s,e)=>new Ln.dfa.DFA(s,e)),ohe=new Ln.PredictionContextCache;class q extends Ln.Parser{static grammarFileName="Karol.g4";static literalNames=[null,"'programm'","'endeprogramm'","'*programm'","'anweisung'","'endeanweisung'","'*anweisung'","'methode'","'endemethode'","'*methode'","'bedingung'","'endebedingung'","'*bedingung'","';'","'karol'","'.'","'('","')'","'wiederhole'","'mal'","'endewiederhole'","'*wiederhole'","'solange'","'bis'","'wenn'","'dann'","'sonst'","'endewenn'","'*wenn'","'schritt'","'linksdrehen'","'rechtsdrehen'","'hinlegen'","'aufheben'","'markesetzen'","'markelöschen'","'warten'","'ton'","'beenden'","'schnell'","'langsam'","'nicht'","'istwand'","'nichtistwand'","'istsüden'","'istnorden'","'istwesten'","'istosten'","'istvoll'","'nichtistvoll'","'istleer'","'nichtistleer'","'istziegel'","'nichtistziegel'","'istmarke'","'nichtistmarke'","'hatziegel'","'wahr'","'falsch'","'rot'","'gelb'","'blau'","'grün'","'schwarz'"];static symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"IDENTIFIER","LETTER","DIGIT","WS"];static ruleNames=["karol","definition","methoddefinition","conditiondefinition","statement","customMethodCall","iteration","loop","conditional","instruction","parameterizedinstruction","conditionexpression","customConditionCall","condition","parameterizedcondition","color","number"];constructor(e){super(e),this._interp=new Ln.atn.ParserATNSimulator(this,VO,rhe,ohe),this.ruleNames=q.ruleNames,this.literalNames=q.literalNames,this.symbolicNames=q.symbolicNames}get atn(){return VO}karol(){let e=new gV(this,this._ctx,this.state);this.enterRule(e,0,q.RULE_karol);var n=0;try{this.state=60,this._errHandler.sync(this);var i=this._interp.adaptivePredict(this._input,4,this._ctx);switch(i){case 1:for(this.enterOuterAlt(e,1),this.state=37,this._errHandler.sync(this),n=this._input.LA(1);(n&-32)==0&&(1<<n&(1<<q.T__3|1<<q.T__6|1<<q.T__9))!==0;)this.state=34,this.definition(),this.state=39,this._errHandler.sync(this),n=this._input.LA(1);for(this.state=40,this.match(q.T__0),this.state=44,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=41,this.statement(),this.state=46,this._errHandler.sync(this),n=this._input.LA(1);this.state=47,n=this._input.LA(1),n===q.T__1||n===q.T__2?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this);break;case 2:for(this.enterOuterAlt(e,2),this.state=51,this._errHandler.sync(this),n=this._input.LA(1);(n&-32)==0&&(1<<n&(1<<q.T__3|1<<q.T__6|1<<q.T__9))!==0;)this.state=48,this.definition(),this.state=53,this._errHandler.sync(this),n=this._input.LA(1);for(this.state=57,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=54,this.statement(),this.state=59,this._errHandler.sync(this),n=this._input.LA(1);break}}catch(r){if(r instanceof Ln.error.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}definition(){let e=new FC(this,this._ctx,this.state);this.enterRule(e,2,q.RULE_definition);try{switch(this.state=64,this._errHandler.sync(this),this._input.LA(1)){case q.T__9:this.enterOuterAlt(e,1),this.state=62,this.conditiondefinition();break;case q.T__3:case q.T__6:this.enterOuterAlt(e,2),this.state=63,this.methoddefinition();break;default:throw new Ln.error.NoViableAltException(this)}}catch(n){if(n instanceof Ln.error.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}methoddefinition(){let e=new KN(this,this._ctx,this.state);this.enterRule(e,4,q.RULE_methoddefinition);var n=0;try{switch(this.state=84,this._errHandler.sync(this),this._input.LA(1)){case q.T__3:for(this.enterOuterAlt(e,1),this.state=66,this.match(q.T__3),this.state=67,this.match(q.IDENTIFIER),this.state=71,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=68,this.statement(),this.state=73,this._errHandler.sync(this),n=this._input.LA(1);this.state=74,n=this._input.LA(1),n===q.T__4||n===q.T__5?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this);break;case q.T__6:for(this.enterOuterAlt(e,2),this.state=75,this.match(q.T__6),this.state=76,this.match(q.IDENTIFIER),this.state=80,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=77,this.statement(),this.state=82,this._errHandler.sync(this),n=this._input.LA(1);this.state=83,n=this._input.LA(1),n===q.T__7||n===q.T__8?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this);break;default:throw new Ln.error.NoViableAltException(this)}}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}conditiondefinition(){let e=new qN(this,this._ctx,this.state);this.enterRule(e,6,q.RULE_conditiondefinition);var n=0;try{this.enterOuterAlt(e,1),this.state=86,this.match(q.T__9),this.state=87,this.match(q.IDENTIFIER),this.state=90,this._errHandler.sync(this),n=this._input.LA(1);do{this.state=90,this._errHandler.sync(this);var i=this._interp.adaptivePredict(this._input,9,this._ctx);switch(i){case 1:this.state=88,this.statement();break;case 2:this.state=89,this.conditionexpression();break}this.state=92,this._errHandler.sync(this),n=this._input.LA(1)}while((n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14|1<<q.T__40-14|1<<q.T__41-14|1<<q.T__42-14|1<<q.T__43-14|1<<q.T__44-14))!==0||(n-46&-32)==0&&(1<<n-46&(1<<q.T__45-46|1<<q.T__46-46|1<<q.T__47-46|1<<q.T__48-46|1<<q.T__49-46|1<<q.T__50-46|1<<q.T__51-46|1<<q.T__52-46|1<<q.T__53-46|1<<q.T__54-46|1<<q.T__55-46|1<<q.T__56-46|1<<q.T__57-46|1<<q.IDENTIFIER-46))!==0);this.state=94,n=this._input.LA(1),n===q.T__10||n===q.T__11?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(r){if(r instanceof Ln.error.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}statement(){let e=new nc(this,this._ctx,this.state);this.enterRule(e,8,q.RULE_statement);var n=0;try{this.state=122,this._errHandler.sync(this);var i=this._interp.adaptivePredict(this._input,15,this._ctx);switch(i){case 1:this.enterOuterAlt(e,1),this.state=96,this.iteration();break;case 2:this.enterOuterAlt(e,2),this.state=97,this.loop();break;case 3:this.enterOuterAlt(e,3),this.state=98,this.conditional();break;case 4:this.enterOuterAlt(e,4),this.state=99,this.instruction(),this.state=101,this._errHandler.sync(this),n=this._input.LA(1),n===q.T__12&&(this.state=100,this.match(q.T__12));break;case 5:this.enterOuterAlt(e,5),this.state=103,this.match(q.T__13),this.state=104,this.match(q.T__14),this.state=105,this.instruction(),this.state=106,this.match(q.T__15),this.state=107,this.match(q.T__16),this.state=109,this._errHandler.sync(this),n=this._input.LA(1),n===q.T__12&&(this.state=108,this.match(q.T__12));break;case 6:this.enterOuterAlt(e,6),this.state=111,this.parameterizedinstruction(),this.state=113,this._errHandler.sync(this),n=this._input.LA(1),n===q.T__12&&(this.state=112,this.match(q.T__12));break;case 7:this.enterOuterAlt(e,7),this.state=115,this.match(q.T__13),this.state=116,this.match(q.T__14),this.state=117,this.parameterizedinstruction(),this.state=119,this._errHandler.sync(this),n=this._input.LA(1),n===q.T__12&&(this.state=118,this.match(q.T__12));break;case 8:this.enterOuterAlt(e,8),this.state=121,this.customMethodCall();break}}catch(r){if(r instanceof Ln.error.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}customMethodCall(){let e=new JN(this,this._ctx,this.state);this.enterRule(e,10,q.RULE_customMethodCall);try{this.enterOuterAlt(e,1),this.state=124,this.match(q.IDENTIFIER)}catch(n){if(n instanceof Ln.error.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}iteration(){let e=new ZN(this,this._ctx,this.state);this.enterRule(e,12,q.RULE_iteration);var n=0;try{for(this.enterOuterAlt(e,1),this.state=126,this.match(q.T__17),this.state=127,this.number(),this.state=128,this.match(q.T__18),this.state=132,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=129,this.statement(),this.state=134,this._errHandler.sync(this),n=this._input.LA(1);this.state=135,n=this._input.LA(1),n===q.T__19||n===q.T__20?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}loop(){let e=new QN(this,this._ctx,this.state);this.enterRule(e,14,q.RULE_loop);var n=0;try{this.state=168,this._errHandler.sync(this);var i=this._interp.adaptivePredict(this._input,20,this._ctx);switch(i){case 1:for(this.enterOuterAlt(e,1),this.state=137,this.match(q.T__17),this.state=138,this.match(q.T__21),this.state=139,this.conditionexpression(),this.state=143,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=140,this.statement(),this.state=145,this._errHandler.sync(this),n=this._input.LA(1);this.state=146,n=this._input.LA(1),n===q.T__19||n===q.T__20?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this);break;case 2:for(this.enterOuterAlt(e,2),this.state=148,this.match(q.T__17),this.state=152,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=149,this.statement(),this.state=154,this._errHandler.sync(this),n=this._input.LA(1);this.state=155,n=this._input.LA(1),n===q.T__19||n===q.T__20?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=156,this.match(q.T__21),this.state=157,this.conditionexpression();break;case 3:for(this.enterOuterAlt(e,3),this.state=158,this.match(q.T__17),this.state=162,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=159,this.statement(),this.state=164,this._errHandler.sync(this),n=this._input.LA(1);this.state=165,n=this._input.LA(1),n===q.T__19||n===q.T__20?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=166,this.match(q.T__22),this.state=167,this.conditionexpression();break}}catch(r){if(r instanceof Ln.error.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}conditional(){let e=new eL(this,this._ctx,this.state);this.enterRule(e,16,q.RULE_conditional);var n=0;try{for(this.enterOuterAlt(e,1),this.state=170,this.match(q.T__23),this.state=171,this.conditionexpression(),this.state=172,this.match(q.T__24),this.state=176,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=173,this.statement(),this.state=178,this._errHandler.sync(this),n=this._input.LA(1);if(this.state=186,this._errHandler.sync(this),n=this._input.LA(1),n===q.T__25)for(this.state=179,this.match(q.T__25),this.state=183,this._errHandler.sync(this),n=this._input.LA(1);(n-14&-32)==0&&(1<<n-14&(1<<q.T__13-14|1<<q.T__17-14|1<<q.T__23-14|1<<q.T__28-14|1<<q.T__29-14|1<<q.T__30-14|1<<q.T__31-14|1<<q.T__32-14|1<<q.T__33-14|1<<q.T__34-14|1<<q.T__35-14|1<<q.T__36-14|1<<q.T__37-14|1<<q.T__38-14|1<<q.T__39-14))!==0||n===q.IDENTIFIER;)this.state=180,this.statement(),this.state=185,this._errHandler.sync(this),n=this._input.LA(1);this.state=188,n=this._input.LA(1),n===q.T__26||n===q.T__27?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}instruction(){let e=new tL(this,this._ctx,this.state);this.enterRule(e,18,q.RULE_instruction);var n=0;try{this.enterOuterAlt(e,1),this.state=190,n=this._input.LA(1),(n-29&-32)==0&&(1<<n-29&(1<<q.T__28-29|1<<q.T__29-29|1<<q.T__30-29|1<<q.T__31-29|1<<q.T__32-29|1<<q.T__33-29|1<<q.T__34-29|1<<q.T__35-29|1<<q.T__36-29|1<<q.T__37-29|1<<q.T__38-29|1<<q.T__39-29))!==0?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}parameterizedinstruction(){let e=new nL(this,this._ctx,this.state);this.enterRule(e,20,q.RULE_parameterizedinstruction);try{switch(this.state=220,this._errHandler.sync(this),this._input.LA(1)){case q.T__28:this.enterOuterAlt(e,1),this.state=192,this.match(q.T__28),this.state=193,this.match(q.T__15),this.state=194,this.number(),this.state=195,this.match(q.T__16);break;case q.T__31:switch(this.enterOuterAlt(e,2),this.state=197,this.match(q.T__31),this.state=198,this.match(q.T__15),this.state=201,this._errHandler.sync(this),this._input.LA(1)){case q.T__58:case q.T__59:case q.T__60:case q.T__61:case q.T__62:this.state=199,this.color();break;case q.DIGIT:this.state=200,this.number();break;default:throw new Ln.error.NoViableAltException(this)}this.state=203,this.match(q.T__16);break;case q.T__32:this.enterOuterAlt(e,3),this.state=205,this.match(q.T__32),this.state=206,this.match(q.T__15),this.state=207,this.number(),this.state=208,this.match(q.T__16);break;case q.T__33:this.enterOuterAlt(e,4),this.state=210,this.match(q.T__33),this.state=211,this.match(q.T__15),this.state=212,this.color(),this.state=213,this.match(q.T__16);break;case q.T__35:this.enterOuterAlt(e,5),this.state=215,this.match(q.T__35),this.state=216,this.match(q.T__15),this.state=217,this.number(),this.state=218,this.match(q.T__16);break;default:throw new Ln.error.NoViableAltException(this)}}catch(n){if(n instanceof Ln.error.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}conditionexpression(){let e=new Hg(this,this._ctx,this.state);this.enterRule(e,22,q.RULE_conditionexpression);try{this.state=236,this._errHandler.sync(this);var n=this._interp.adaptivePredict(this._input,26,this._ctx);switch(n){case 1:this.enterOuterAlt(e,1),this.state=222,this.match(q.T__40),this.state=223,this.conditionexpression();break;case 2:this.enterOuterAlt(e,2),this.state=224,this.condition();break;case 3:this.enterOuterAlt(e,3),this.state=225,this.match(q.T__13),this.state=226,this.match(q.T__14),this.state=227,this.condition(),this.state=228,this.match(q.T__15),this.state=229,this.match(q.T__16);break;case 4:this.enterOuterAlt(e,4),this.state=231,this.parameterizedcondition();break;case 5:this.enterOuterAlt(e,5),this.state=232,this.match(q.T__13),this.state=233,this.match(q.T__14),this.state=234,this.parameterizedcondition();break;case 6:this.enterOuterAlt(e,6),this.state=235,this.customConditionCall();break}}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}customConditionCall(){let e=new iL(this,this._ctx,this.state);this.enterRule(e,24,q.RULE_customConditionCall);try{this.enterOuterAlt(e,1),this.state=238,this.match(q.IDENTIFIER)}catch(n){if(n instanceof Ln.error.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}condition(){let e=new sL(this,this._ctx,this.state);this.enterRule(e,26,q.RULE_condition);var n=0;try{this.enterOuterAlt(e,1),this.state=240,n=this._input.LA(1),(n-42&-32)==0&&(1<<n-42&(1<<q.T__41-42|1<<q.T__42-42|1<<q.T__43-42|1<<q.T__44-42|1<<q.T__45-42|1<<q.T__46-42|1<<q.T__47-42|1<<q.T__48-42|1<<q.T__49-42|1<<q.T__50-42|1<<q.T__51-42|1<<q.T__52-42|1<<q.T__53-42|1<<q.T__54-42|1<<q.T__55-42|1<<q.T__56-42|1<<q.T__57-42))!==0?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}parameterizedcondition(){let e=new rL(this,this._ctx,this.state);this.enterRule(e,28,q.RULE_parameterizedcondition);try{switch(this.state=273,this._errHandler.sync(this),this._input.LA(1)){case q.T__51:switch(this.enterOuterAlt(e,1),this.state=242,this.match(q.T__51),this.state=243,this.match(q.T__15),this.state=246,this._errHandler.sync(this),this._input.LA(1)){case q.T__58:case q.T__59:case q.T__60:case q.T__61:case q.T__62:this.state=244,this.color();break;case q.DIGIT:this.state=245,this.number();break;default:throw new Ln.error.NoViableAltException(this)}this.state=248,this.match(q.T__16);break;case q.T__52:switch(this.enterOuterAlt(e,2),this.state=250,this.match(q.T__52),this.state=251,this.match(q.T__15),this.state=254,this._errHandler.sync(this),this._input.LA(1)){case q.T__58:case q.T__59:case q.T__60:case q.T__61:case q.T__62:this.state=252,this.color();break;case q.DIGIT:this.state=253,this.number();break;default:throw new Ln.error.NoViableAltException(this)}this.state=256,this.match(q.T__16);break;case q.T__53:this.enterOuterAlt(e,3),this.state=258,this.match(q.T__53),this.state=259,this.match(q.T__15),this.state=260,this.color(),this.state=261,this.match(q.T__16);break;case q.T__54:this.enterOuterAlt(e,4),this.state=263,this.match(q.T__54),this.state=264,this.match(q.T__15),this.state=265,this.color(),this.state=266,this.match(q.T__16);break;case q.T__55:this.enterOuterAlt(e,5),this.state=268,this.match(q.T__55),this.state=269,this.match(q.T__15),this.state=270,this.number(),this.state=271,this.match(q.T__16);break;default:throw new Ln.error.NoViableAltException(this)}}catch(n){if(n instanceof Ln.error.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}color(){let e=new i1(this,this._ctx,this.state);this.enterRule(e,30,q.RULE_color);var n=0;try{this.enterOuterAlt(e,1),this.state=275,n=this._input.LA(1),(n-59&-32)==0&&(1<<n-59&(1<<q.T__58-59|1<<q.T__59-59|1<<q.T__60-59|1<<q.T__61-59|1<<q.T__62-59))!==0?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}number(){let e=new hA(this,this._ctx,this.state);this.enterRule(e,32,q.RULE_number);var n=0;try{this.enterOuterAlt(e,1),this.state=278,this._errHandler.sync(this),n=this._input.LA(1);do this.state=277,this.match(q.DIGIT),this.state=280,this._errHandler.sync(this),n=this._input.LA(1);while(n===q.DIGIT)}catch(i){if(i instanceof Ln.error.RecognitionException)e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return e}}q.EOF=Ln.Token.EOF;q.T__0=1;q.T__1=2;q.T__2=3;q.T__3=4;q.T__4=5;q.T__5=6;q.T__6=7;q.T__7=8;q.T__8=9;q.T__9=10;q.T__10=11;q.T__11=12;q.T__12=13;q.T__13=14;q.T__14=15;q.T__15=16;q.T__16=17;q.T__17=18;q.T__18=19;q.T__19=20;q.T__20=21;q.T__21=22;q.T__22=23;q.T__23=24;q.T__24=25;q.T__25=26;q.T__26=27;q.T__27=28;q.T__28=29;q.T__29=30;q.T__30=31;q.T__31=32;q.T__32=33;q.T__33=34;q.T__34=35;q.T__35=36;q.T__36=37;q.T__37=38;q.T__38=39;q.T__39=40;q.T__40=41;q.T__41=42;q.T__42=43;q.T__43=44;q.T__44=45;q.T__45=46;q.T__46=47;q.T__47=48;q.T__48=49;q.T__49=50;q.T__50=51;q.T__51=52;q.T__52=53;q.T__53=54;q.T__54=55;q.T__55=56;q.T__56=57;q.T__57=58;q.T__58=59;q.T__59=60;q.T__60=61;q.T__61=62;q.T__62=63;q.IDENTIFIER=64;q.LETTER=65;q.DIGIT=66;q.WS=67;q.RULE_karol=0;q.RULE_definition=1;q.RULE_methoddefinition=2;q.RULE_conditiondefinition=3;q.RULE_statement=4;q.RULE_customMethodCall=5;q.RULE_iteration=6;q.RULE_loop=7;q.RULE_conditional=8;q.RULE_instruction=9;q.RULE_parameterizedinstruction=10;q.RULE_conditionexpression=11;q.RULE_customConditionCall=12;q.RULE_condition=13;q.RULE_parameterizedcondition=14;q.RULE_color=15;q.RULE_number=16;class gV extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_karol}definition=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(FC):this.getTypedRuleContext(FC,e)};statement=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(nc):this.getTypedRuleContext(nc,e)};accept(e){return e instanceof qa?e.visitKarol(this):e.visitChildren(this)}}class FC extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_definition}conditiondefinition(){return this.getTypedRuleContext(qN,0)}methoddefinition(){return this.getTypedRuleContext(KN,0)}accept(e){return e instanceof qa?e.visitDefinition(this):e.visitChildren(this)}}class KN extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_methoddefinition}IDENTIFIER(){return this.getToken(q.IDENTIFIER,0)}statement=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(nc):this.getTypedRuleContext(nc,e)};accept(e){return e instanceof qa?e.visitMethoddefinition(this):e.visitChildren(this)}}class qN extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_conditiondefinition}IDENTIFIER(){return this.getToken(q.IDENTIFIER,0)}statement=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(nc):this.getTypedRuleContext(nc,e)};conditionexpression=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(Hg):this.getTypedRuleContext(Hg,e)};accept(e){return e instanceof qa?e.visitConditiondefinition(this):e.visitChildren(this)}}class nc extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_statement}iteration(){return this.getTypedRuleContext(ZN,0)}loop(){return this.getTypedRuleContext(QN,0)}conditional(){return this.getTypedRuleContext(eL,0)}instruction(){return this.getTypedRuleContext(tL,0)}parameterizedinstruction(){return this.getTypedRuleContext(nL,0)}customMethodCall(){return this.getTypedRuleContext(JN,0)}accept(e){return e instanceof qa?e.visitStatement(this):e.visitChildren(this)}}class JN extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_customMethodCall}IDENTIFIER(){return this.getToken(q.IDENTIFIER,0)}accept(e){return e instanceof qa?e.visitCustomMethodCall(this):e.visitChildren(this)}}class ZN extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_iteration}number(){return this.getTypedRuleContext(hA,0)}statement=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(nc):this.getTypedRuleContext(nc,e)};accept(e){return e instanceof qa?e.visitIteration(this):e.visitChildren(this)}}class QN extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_loop}conditionexpression(){return this.getTypedRuleContext(Hg,0)}statement=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(nc):this.getTypedRuleContext(nc,e)};accept(e){return e instanceof qa?e.visitLoop(this):e.visitChildren(this)}}class eL extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_conditional}conditionexpression(){return this.getTypedRuleContext(Hg,0)}statement=function(e){return e===void 0&&(e=null),e===null?this.getTypedRuleContexts(nc):this.getTypedRuleContext(nc,e)};accept(e){return e instanceof qa?e.visitConditional(this):e.visitChildren(this)}}class tL extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_instruction}accept(e){return e instanceof qa?e.visitInstruction(this):e.visitChildren(this)}}class nL extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_parameterizedinstruction}number(){return this.getTypedRuleContext(hA,0)}color(){return this.getTypedRuleContext(i1,0)}accept(e){return e instanceof qa?e.visitParameterizedinstruction(this):e.visitChildren(this)}}class Hg extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_conditionexpression}conditionexpression(){return this.getTypedRuleContext(Hg,0)}condition(){return this.getTypedRuleContext(sL,0)}parameterizedcondition(){return this.getTypedRuleContext(rL,0)}customConditionCall(){return this.getTypedRuleContext(iL,0)}accept(e){return e instanceof qa?e.visitConditionexpression(this):e.visitChildren(this)}}class iL extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_customConditionCall}IDENTIFIER(){return this.getToken(q.IDENTIFIER,0)}accept(e){return e instanceof qa?e.visitCustomConditionCall(this):e.visitChildren(this)}}class sL extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_condition}accept(e){return e instanceof qa?e.visitCondition(this):e.visitChildren(this)}}class rL extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_parameterizedcondition}color(){return this.getTypedRuleContext(i1,0)}number(){return this.getTypedRuleContext(hA,0)}accept(e){return e instanceof qa?e.visitParameterizedcondition(this):e.visitChildren(this)}}class i1 extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_color}accept(e){return e instanceof qa?e.visitColor(this):e.visitChildren(this)}}class hA extends Ln.ParserRuleContext{constructor(e,n,i){n===void 0&&(n=null),i==null&&(i=-1),super(n,i),this.parser=e,this.ruleIndex=q.RULE_number}DIGIT=function(e){return e===void 0&&(e=null),e===null?this.getTokens(q.DIGIT):this.getToken(q.DIGIT,e)};accept(e){return e instanceof qa?e.visitNumber(this):e.visitChildren(this)}}q.KarolContext=gV;q.DefinitionContext=FC;q.MethoddefinitionContext=KN;q.ConditiondefinitionContext=qN;q.StatementContext=nc;q.CustomMethodCallContext=JN;q.IterationContext=ZN;q.LoopContext=QN;q.ConditionalContext=eL;q.InstructionContext=tL;q.ParameterizedinstructionContext=nL;q.ConditionexpressionContext=Hg;q.CustomConditionCallContext=iL;q.ConditionContext=sL;q.ParameterizedconditionContext=rL;q.ColorContext=i1;q.NumberContext=hA;const ahe=Ln.error.ErrorListener;Ln.tree.Trees;class lhe extends ahe{_errors=[];_errorCount=0;syntaxError(e,n,i,r,a,l){this._errorCount=this._errorCount+1,this._errors.push("Error "+a+"in line "+i+":"+r)}reportAmbiguity(e,n,i,r,a,l,h){this._errorCount=this._errorCount+1}reportAttemptingFullContext(e,n,i,r,a,l){this._errorCount=this._errorCount+1}reportContextSensitivity(e,n,i,r,a,l){this._errorCount=this._errorCount+1}get errorCount(){return this._errorCount}get errors(){return this._errors}}function uhe(s,e="karol"){const n=new Ln.InputStream(s.toLowerCase()),i=new dn(n),r=new Ln.CommonTokenStream(i),a=new q(r),l=new lhe;a.addErrorListener(l);const h=a[e]();return l.errorCount===0&&h!==null?h:l.errors.join(`
`)}const au=q;function MI(s,e,n){const i=s.getChild(e).symbol,r=s.getChild(n).symbol,a=s.getChild(n).getText().length;return{startLine:i.line,startCol:i.column,endLine:r.line,endCol:r.column+a}}function eF(s){const e=new Date().getTime();let n=0;for(;n-e<s;)n=new Date().getTime()}async function che(){return new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}function tF(s){let e,n;if(s.ruleIndex===au.RULE_number)e=Number.parseInt(s.getText());else{const i=Object.entries(Zv).find(([,r])=>r===s.getText());i&&(n=i[1])}return{numberParam:e,colorParam:n}}function*hhe(s,e){const n=new Map,i=new Map;return yield*r(s);function*r(E){if(Array.isArray(E))for(let w=0;w<E.length;w++)yield*r(E[w]);else switch(E.ruleIndex){case au.RULE_definition:const w=E.getChild(0).ruleIndex;if(w===au.RULE_conditiondefinition)l(E.getChild(0));else if(w===au.RULE_methoddefinition)h(E.getChild(0));else throw new Error("Internal Error: Definition type unknown");break;case au.RULE_iteration:yield*p(E);break;case au.RULE_loop:yield*v(E);break;case au.RULE_instruction:yield*$(E);break;case au.RULE_conditional:yield*T(E);break;case au.RULE_conditionexpression:return yield*y(E);case au.RULE_parameterizedinstruction:yield*C(E);break;case au.RULE_parameterizedcondition:return M(E);case au.RULE_customMethodCall:yield*f(E);break;default:return yield*a(E)}}function*a(E,w=0,I){if(E.children){const O=E.children;let P;for(let F=w;F<(I??O.length);F++)P=yield*r(O[F]);return P}else return}function l(E){const w=E.getChild(1).getText();n.set(w,E)}function h(E){const w=E.getChild(1).getText();i.set(w,E)}function*f(E){const w=E.getChild(0).getText(),I=i.get(w);if(I)yield*a(I,2,I.getChildCount()-1);else throw new Error("Es wurde keine Methode '"+w+" definiert.")}function*p(E){let w;const I=E.getChild(1).getText(),O=Number.parseInt(I);gO(!isNaN(O),"Keine Zahl: "+O);for(let P=0;P<O;P++)yield{source:MI(E,0,E.getChildCount()-1),isFinished:!1,result:void 0},w=yield*a(E);return w}function*v(E){let w,I;for(let O=0;O<E.getChildCount();O++){const P=E.getChild(O).getText();P==="solange"?w=O:P==="bis"&&(I=O)}if(w===1)for(;yield*y(E.getChild(2));)yield*a(E);else if(w!==void 0&&w>1)do yield*a(E);while(yield*y(E.getChild(w+1)));else if(I!==void 0)do yield*a(E);while(!(yield*y(E.getChild(I+1))));else throw Error("Interner Fehler: Dieses Schleifenkonstrukt sollte vom Parser nicht erlaubt sein")}function*T(E){let w;for(let O=0;O<E.getChildCount();O++)E.getChild(O).getText()==="sonst"&&(w=O);if(yield*y(E.getChild(1)))for(let O=3;O<(w??E.getChildCount()-1);O++)yield*r(E.getChild(O));else if(w!==void 0)for(let O=w+1;O<E.getChildCount()-1;O++)yield*r(E.getChild(O))}function*y(E){if(E.getChild(0).getText().toLowerCase()==="nicht")return gO(E.getChildCount()===2,"Internal Error: Negated condition expression has not length 2"),!(yield*y(E.getChild(1)));for(let w=0;w<E.getChildCount();w++){const I=E.getChild(w);if(I.ruleIndex===au.RULE_condition)return S(I);if(I.ruleIndex===au.RULE_parameterizedcondition)return M(I);if(I.ruleIndex===au.RULE_customConditionCall){const O=I.getText(),P=n.get(O);if(P)return yield*a(P,2,P.getChildCount()-1);throw new Error("Es wurde keine Methode '"+O+" definiert.")}}throw Error("Internal Error: conditionexpression without condition or parameterized condition")}function S(E){const w=e.direction,I=e.getNextFieldType();switch(E.getText().toLowerCase()){case"istwand":return I===Bi.wall;case"nichtistwand":return I!==Bi.wall;case"istziegel":return I===Bi.brick_red;case"nichtistziegel":return I!==Bi.brick_red;case"istmarke":return e.getMarker()!==void 0;case"nichtistmarke":return e.getMarker()===void 0;case"istsüden":return w===LE.South;case"istnorden":return w===LE.North;case"istwesten":return w===LE.West;case"istosten":return w===LE.East;case"istvoll":return e.brickCount===e.maxBrickCount;case"nichtistvoll":return e.brickCount!==e.maxBrickCount;case"istleer":return e.brickCount===0;case"nichtistleer":return e.brickCount!==0;case"hatziegel":return e.brickCount>0;case"wahr":return!0;case"falsch":return!1;default:throw new Error(E.getText()+" nicht implementiert")}}function*$(E){switch(E.getText().toLowerCase()){case"schritt":e.move();break;case"linksdrehen":e.turnLeft();break;case"rechtsdrehen":e.turnRight();break;case"hinlegen":e.layBrick();break;case"aufheben":e.pickupBrick();break;case"markesetzen":e.setMarker(Zv.yellow);break;case"markelöschen":e.deleteMarker();break;case"ton":che();break;case"warten":eF(1e3);break;default:throw Error("Instruction "+E.getText()+" not implemented")}yield{isFinished:!1,source:MI(E,0,0),result:void 0}}function M(E){const w=E.getChild(0);let{numberParam:I,colorParam:O}=tF(E.getChild(2));switch(w.getText().toLowerCase()){case"istziegel":if(O!==void 0)return e.hasBrick(O);if(I!==void 0)return e.getBrickHeight()===I;throw Error("Internal Error: Param is neither a number nor a color.");case"nichtistziegel":if(O!==void 0)return!e.hasBrick(O);if(I!==void 0)return e.getBrickHeight()!==I;throw Error("Internal Error: Param is neither a number nor a color.");case"istmarke":return pw(O,"Internal Error: IstMarke(param) needs a color parameter but didnt find one."),e.getMarker()===O;case"nichtistmarke":return pw(O,"Internal Error: IstMarke(param) needs a color parameter but didnt find one."),e.getMarker()!==O;case"hatziegel":return pw(I,"Internal Error: hatziegel(param) needs a number parameter but didnt find one."),e.hasBricksExactly(I);default:throw new Error(E.getText()+" noch nicht implementiert")}}function*C(E){const w=E.getChild(0);let{numberParam:I,colorParam:O}=tF(E.getChild(2));switch(w.getText().toLowerCase()){case"schritt":e.move(I);break;case"hinlegen":e.layBrick(I??1,O);break;case"aufheben":e.pickupBrick(I);break;case"markesetzen":e.setMarker(O??Zv.yellow);break;case"warten":eF(I??1e3);break;case"beenden":throw Error("Programm wurde beendet");default:throw Error("Instruction "+E.getText()+" not implemented")}yield{isFinished:!1,source:MI(E,0,0),result:void 0}}}const dhe=`{Karol baut 'ne Burg}
wiederhole 72 mal
    Schritt
    LinksDrehen
    Hinlegen
    RechtsDrehen
    wenn IstWand dann
        LinksDrehen
        Aufheben
    endewenn
endewiederhole
`,nF=`
<xml xmlns="https://developers.google.com/blockly/xml">
    <block type="repeat_times" id="8j]=9,hXz+^qcv|I5,ss" x="30" y="10">
        <field name="COUNT">72</field>
        <statement name="STATEMENTS">
            <block type="step" id="WkPEluSEDFn(QL3W(/e;">
                <field name="COUNT">1</field>
                <next>
                    <block type="turnleft" id="R;NQz4+fv4+O=K^5_;-?">
                        <next>
                            <block type="laydown_color" id="g*U,dxbtLZogHO2Z[XE[">
                                <field name="COLOR">grün</field>
                                <next>
                                    <block type="turnright" id="YcJ,{@H#$DV@m*QoFWy.">
                                        <next>
                                            <block type="if_then" id="4TT*\`]Qe~|j5QvLtDJb|">
                                                <value name="CONDITION">
                                                    <block type="is_wall" id="xp2Zkpr[vb(cZiib}^yf"></block>
                                                </value>
                                                <statement name="STATEMENTS">
                                                    <block type="turnleft" id="~k5Zgspn;ibGsLiz,+.i">
                                                        <next>
                                                            <block type="pickup" id="72T/YDc=-!.OpG@k_T29">
                                                                <field name="COUNT">1</field>
                                                            </block>
                                                        </next>
                                                    </block>
                                                </statement>
                                            </block>
                                        </next>
                                    </block>
                                </next>
                            </block>
                        </next>
                    </block>
                </next>
            </block>
        </statement>
    </block>
</xml>
`;var fhe=Object.defineProperty,phe=Object.getOwnPropertyDescriptor,Oo=(s,e,n,i)=>{for(var r=i>1?void 0:i?phe(e,n):e,a=s.length-1,l;a>=0;a--)(l=s[a])&&(r=(i?l(e,n,r):l(r))||r);return i&&r&&fhe(e,n,r),r};function iF(s,e,n){let i=0;for(;e>1;)i=s.indexOf(`
`,i)+1,e--;return i+=n,i}class po{sourceCode;fileName;executionState;blocklyXml;blocklyWorkspace=void 0;stepper=void 0;interruptExecution=!1;constructor(e){this.sourceCode=e,this.fileName="Untitled.karol",this.executionState="-",this.blocklyXml=nF,dT(this)}setBlocklyXml(e){this.blocklyWorkspace=e,console.log("workspace: ",e);const n=xo.workspaceToCode(e);console.log("Generated: ",n),this.sourceCode=n}setInterrupted(e){this.interruptExecution=e,this.executionState=e?"halt":this.stepper!==void 0?"läuft":"-"}start(e){try{const n=uhe(this.sourceCode);return typeof n!="string"?(this.stepper=hhe(n,e),console.log("Programm wurde gestartet"),this.setInterrupted(!1)):alert(`Das Programm enthält Syntaxfehler:
`+n),typeof n!="string"}catch(n){return alert(n),this.stepper=void 0,this.setInterrupted(!1),!1}}pause(){this.stepper!==void 0?this.setInterrupted(!0):alert("Programm läuft nicht, daher ist Unterbrechen nicht möglich")}stop(){this.stepper!==void 0?(console.log("Das Programm wurde gestoppt"),this.stepper=void 0,this.setInterrupted(!1)):alert("Programm läuft nicht, daher ist Stoppen nicht möglich")}run(e,n,i,r=!1){if(this.setInterrupted(!1),this.stepper===void 0&&!this.start(n))return;const a=()=>{if(!this.interruptExecution&&this.stepper!==void 0){const l=this.stepper;try{let h=l.next();if(!h.done&&h.value?.source!==void 0){const f=h.value.source,p=iF(this.sourceCode,f.startLine,f.startCol),v=iF(this.sourceCode,f.endLine,f.endCol);i(p,v),r?this.setInterrupted(!0):e!==void 0?setTimeout(a,e):a()}else console.log("Programm wurde beendet"),this.stepper=void 0,this.setInterrupted(!1)}catch(h){return alert(h),this.stepper=void 0,this.setInterrupted(!1),!1}}};a()}async load(){const e=await Z4({mimeTypes:["application/json"],extensions:[".karol",".json"],description:"Karol Code"});this.fileName=e.name;const n=JSON.parse(await e.text());if(this.sourceCode=n.text,this.blocklyWorkspace!==void 0&&n.blockly!==void 0){this.blocklyWorkspace.clear(),console.log("Loading from XML format:",n.blockly),this.blocklyXml=n.blockly;const i=bce.xml.textToDom(n.blockly);Hw.domToWorkspace(i,this.blocklyWorkspace)}}async save(){const e={text:this.sourceCode};this.blocklyWorkspace&&(e.blockly=Hw.domToText(Hw.workspaceToDom(this.blocklyWorkspace)));const n=new Blob([JSON.stringify(e)],{type:"application/json"}),i=await Q4(n,{fileName:this.fileName,extensions:[".karol"]});i!==null&&(this.fileName=i.name)}clear(){this.sourceCode="",this.blocklyWorkspace!==void 0&&this.blocklyWorkspace.clear()}disposeBlocklyWorkspace(){this.blocklyWorkspace=void 0}setSourceCode(e){this.sourceCode=e,console.log("New Source: ",this.sourceCode)}initializeBlocklyWorkspace(){(!this.blocklyXml||this.blocklyXml.trim()==="")&&(this.blocklyXml=nF)}setBlocklyXmlFromReact(e){this.blocklyXml=e}}Oo([li],po.prototype,"sourceCode",2);Oo([li],po.prototype,"fileName",2);Oo([li],po.prototype,"executionState",2);Oo([li],po.prototype,"blocklyXml",2);Oo([li],po.prototype,"blocklyWorkspace",2);Oo([li],po.prototype,"stepper",2);Oo([li],po.prototype,"interruptExecution",2);Oo([Si],po.prototype,"setBlocklyXml",1);Oo([Si],po.prototype,"setInterrupted",1);Oo([Si],po.prototype,"start",1);Oo([Si],po.prototype,"pause",1);Oo([Si],po.prototype,"stop",1);Oo([Si],po.prototype,"run",1);Oo([Si],po.prototype,"load",1);Oo([Si],po.prototype,"save",1);Oo([Si],po.prototype,"clear",1);Oo([Si],po.prototype,"disposeBlocklyWorkspace",1);Oo([Si],po.prototype,"setSourceCode",1);Oo([Si],po.prototype,"initializeBlocklyWorkspace",1);Oo([Si],po.prototype,"setBlocklyXmlFromReact",1);const mhe="1.0.0",WO=new Vh(10,10,10),RI=new Sa(WO),ghe=new po(dhe);function _he(){return he.jsxs("div",{className:"App",children:[he.jsxs("div",{className:"App-header",children:[he.jsx("div",{}),he.jsxs("div",{className:"App-headline",children:["Karol Online V",mhe]}),he.jsx("div",{className:"App-copyright",children:"by Samuel and Marco van Meegen ©2022"})]}),he.jsxs("div",{className:"Main",children:[he.jsx(Oce,{model:RI,program:ghe}),he.jsxs("div",{children:[he.jsx(Cue,{karol:RI,world:WO}),he.jsx(zQ,{world:WO,karol:RI})]})]})]})}const vhe=ZV.createRoot(document.getElementById("root"));vhe.render(he.jsx(Un.StrictMode,{children:he.jsx(_he,{})}));
