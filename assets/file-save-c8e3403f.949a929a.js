var p=async(n,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let r=n;"body"in n&&(r=await async function(s,u){const o=s.getReader(),d=new ReadableStream({start:l=>async function y(){return o.read().then(({done:f,value:b})=>{if(!f)return l.enqueue(b),y();l.close()})}()}),i=new Response(d);return o.releaseLock(),new Blob([await i.blob()],{type:u})}(n.body,n.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(r);const c=()=>{typeof a=="function"&&a()},a=e.legacySetup&&e.legacySetup(c,()=>a(reject),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),c()}),t.click(),null};export{p as default};
