var l3=Object.defineProperty,a3=Object.defineProperties;var c3=Object.getOwnPropertyDescriptors;var dT=Object.getOwnPropertySymbols;var mB=Object.prototype.hasOwnProperty,gB=Object.prototype.propertyIsEnumerable;var fB=(r,e,t)=>e in r?l3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Kn=(r,e)=>{for(var t in e||(e={}))mB.call(e,t)&&fB(r,t,e[t]);if(dT)for(var t of dT(e))gB.call(e,t)&&fB(r,t,e[t]);return r},si=(r,e)=>a3(r,c3(e));var gs=(r,e)=>{var t={};for(var o in r)mB.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(r!=null&&dT)for(var o of dT(r))e.indexOf(o)<0&&gB.call(r,o)&&(t[o]=r[o]);return t};function u3(r,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(o){if(o!=="default"&&!(o in r)){var i=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,i.get?i:{enumerable:!0,get:function(){return t[o]}})}})}),Object.freeze(r)}var vs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dw(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var o=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,o.get?o:{enumerable:!0,get:function(){return r[t]}})}),e}var G={exports:{}},an={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _B=Object.getOwnPropertySymbols,h3=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable;function d3(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function f3(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var o=Object.getOwnPropertyNames(e).map(function(l){return e[l]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(l){i[l]=l}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var os=f3()?Object.assign:function(r,e){for(var t,o=d3(r),i,l=1;l<arguments.length;l++){t=Object(arguments[l]);for(var a in t)h3.call(t,a)&&(o[a]=t[a]);if(_B){i=_B(t);for(var c=0;c<i.length;c++)p3.call(t,i[c])&&(o[i[c]]=t[i[c]])}}return o};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=os,Dm=60103,zL=60106;an.Fragment=60107;an.StrictMode=60108;an.Profiler=60114;var XL=60109,jL=60110,JL=60112;an.Suspense=60113;var KL=60115,YL=60116;if(typeof Symbol=="function"&&Symbol.for){var Kl=Symbol.for;Dm=Kl("react.element"),zL=Kl("react.portal"),an.Fragment=Kl("react.fragment"),an.StrictMode=Kl("react.strict_mode"),an.Profiler=Kl("react.profiler"),XL=Kl("react.provider"),jL=Kl("react.context"),JL=Kl("react.forward_ref"),an.Suspense=Kl("react.suspense"),KL=Kl("react.memo"),YL=Kl("react.lazy")}var yB=typeof Symbol=="function"&&Symbol.iterator;function m3(r){return r===null||typeof r!="object"?null:(r=yB&&r[yB]||r["@@iterator"],typeof r=="function"?r:null)}var qL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QL={};function Lm(r,e,t){this.props=r,this.context=e,this.refs=QL,this.updater=t||qL}Lm.prototype.isReactComponent={};Lm.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Lm.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function ZL(){}ZL.prototype=Lm.prototype;function mw(r,e,t){this.props=r,this.context=e,this.refs=QL,this.updater=t||qL}var gw=mw.prototype=new ZL;gw.constructor=mw;fw(gw,Lm.prototype);gw.isPureReactComponent=!0;var vB=Array.isArray,eN=Object.prototype.hasOwnProperty,_w={current:null},tN={key:!0,ref:!0,__self:!0,__source:!0};function nN(r,e,t){var o,i={},l=null,a=null;if(e!=null)for(o in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(l=""+e.key),e)eN.call(e,o)&&!tN.hasOwnProperty(o)&&(i[o]=e[o]);var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){for(var p=Array(c),h=0;h<c;h++)p[h]=arguments[h+2];i.children=p}if(r&&r.defaultProps)for(o in c=r.defaultProps,c)i[o]===void 0&&(i[o]=c[o]);return{$$typeof:Dm,type:r,key:l,ref:a,props:i,_owner:_w.current}}function g3(r,e){return{$$typeof:Dm,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function yw(r){return typeof r=="object"&&r!==null&&r.$$typeof===Dm}function _3(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var TB=/\/+/g;function fC(r,e){return typeof r=="object"&&r!==null&&r.key!=null?_3(""+r.key):e.toString(36)}function H0(r,e,t,o,i){var l=typeof r;(l==="undefined"||l==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Dm:case zL:a=!0}}if(a)return a=r,i=i(a),r=o===""?"."+fC(a,0):o,vB(i)?(t="",r!=null&&(t=r.replace(TB,"$&/")+"/"),H0(i,e,t,"",function(h){return h})):i!=null&&(yw(i)&&(i=g3(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(TB,"$&/")+"/")+r)),e.push(i)),1;if(a=0,o=o===""?".":o+":",vB(r))for(var c=0;c<r.length;c++){l=r[c];var p=o+fC(l,c);a+=H0(l,e,t,p,i)}else if(p=m3(r),typeof p=="function")for(r=p.call(r),c=0;!(l=r.next()).done;)l=l.value,p=o+fC(l,c++),a+=H0(l,e,t,p,i);else if(l==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fT(r,e,t){if(r==null)return r;var o=[],i=0;return H0(r,o,"","",function(l){return e.call(t,l,i++)}),o}function y3(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var ss={current:null},G0={transition:0},v3={ReactCurrentDispatcher:ss,ReactCurrentBatchConfig:G0,ReactCurrentOwner:_w,assign:fw};an.Children={map:fT,forEach:function(r,e,t){fT(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return fT(r,function(){e++}),e},toArray:function(r){return fT(r,function(e){return e})||[]},only:function(r){if(!yw(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};an.Component=Lm;an.PureComponent=mw;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v3;an.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var o=fw({},r.props),i=r.key,l=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,a=_w.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var c=r.type.defaultProps;for(p in e)eN.call(e,p)&&!tN.hasOwnProperty(p)&&(o[p]=e[p]===void 0&&c!==void 0?c[p]:e[p])}var p=arguments.length-2;if(p===1)o.children=t;else if(1<p){c=Array(p);for(var h=0;h<p;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:Dm,type:r.type,key:i,ref:l,props:o,_owner:a}};an.createContext=function(r){return r={$$typeof:jL,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:XL,_context:r},r.Consumer=r};an.createElement=nN;an.createFactory=function(r){var e=nN.bind(null,r);return e.type=r,e};an.createRef=function(){return{current:null}};an.forwardRef=function(r){return{$$typeof:JL,render:r}};an.isValidElement=yw;an.lazy=function(r){return{$$typeof:YL,_payload:{_status:-1,_result:r},_init:y3}};an.memo=function(r,e){return{$$typeof:KL,type:r,compare:e===void 0?null:e}};an.startTransition=function(r){var e=G0.transition;G0.transition=1;try{r()}finally{G0.transition=e}};an.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};an.unstable_createMutableSource=function(r,e){return{_getVersion:e,_source:r,_workInProgressVersionPrimary:null,_workInProgressVersionSecondary:null}};an.useCallback=function(r,e){return ss.current.useCallback(r,e)};an.useContext=function(r){return ss.current.useContext(r)};an.useDebugValue=function(){};an.useDeferredValue=function(r){return ss.current.useDeferredValue(r)};an.useEffect=function(r,e){return ss.current.useEffect(r,e)};an.useId=function(){return ss.current.useId()};an.useImperativeHandle=function(r,e,t){return ss.current.useImperativeHandle(r,e,t)};an.useInsertionEffect=function(r,e){return ss.current.useInsertionEffect(r,e)};an.useLayoutEffect=function(r,e){return ss.current.useLayoutEffect(r,e)};an.useMemo=function(r,e){return ss.current.useMemo(r,e)};an.useReducer=function(r,e,t){return ss.current.useReducer(r,e,t)};an.useRef=function(r){return ss.current.useRef(r)};an.useState=function(r){return ss.current.useState(r)};an.useSyncExternalStore=function(r,e,t){return ss.current.useSyncExternalStore(r,e,t)};an.useTransition=function(){return ss.current.useTransition()};an.version="18.0.0-rc.0-fe905f152-20220107";G.exports=an;var zt=G.exports,T3=Object.freeze(u3({__proto__:null,[Symbol.toStringTag]:"Module",default:zt},[G.exports])),mx={exports:{}},rl={},oN={exports:{}},rN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(ae,Ee){var S=ae.length;ae.push(Ee);e:for(;0<S;){var D=S-1>>>1,H=ae[D];if(0<i(H,Ee))ae[D]=Ee,ae[S]=H,S=D;else break e}}function t(ae){return ae.length===0?null:ae[0]}function o(ae){if(ae.length===0)return null;var Ee=ae[0],S=ae.pop();if(S!==Ee){ae[0]=S;e:for(var D=0,H=ae.length,q=H>>>1;D<q;){var Q=2*(D+1)-1,de=ae[Q],je=Q+1,We=ae[je];if(0>i(de,S))je<H&&0>i(We,de)?(ae[D]=We,ae[je]=S,D=je):(ae[D]=de,ae[Q]=S,D=Q);else if(je<H&&0>i(We,S))ae[D]=We,ae[je]=S,D=je;else break e}}return Ee}function i(ae,Ee){var S=ae.sortIndex-Ee.sortIndex;return S!==0?S:ae.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();r.unstable_now=function(){return a.now()-c}}var p=[],h=[],f=1,_=null,m=3,v=!1,x=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ae){for(var Ee=t(h);Ee!==null;){if(Ee.callback===null)o(h);else if(Ee.startTime<=ae)o(h),Ee.sortIndex=Ee.expirationTime,e(p,Ee);else break;Ee=t(h)}}function R(ae){if(b=!1,M(ae),!x)if(t(p)!==null)x=!0,ee(I);else{var Ee=t(h);Ee!==null&&pe(R,Ee.startTime-ae)}}function I(ae,Ee){x=!1,b&&(b=!1,k(U),U=-1),v=!0;var S=m;try{for(M(Ee),_=t(p);_!==null&&(!(_.expirationTime>Ee)||ae&&!P());){var D=_.callback;if(typeof D=="function"){_.callback=null,m=_.priorityLevel;var H=D(_.expirationTime<=Ee);Ee=r.unstable_now(),typeof H=="function"?_.callback=H:_===t(p)&&o(p),M(Ee)}else o(p);_=t(p)}if(_!==null)var q=!0;else{var Q=t(h);Q!==null&&pe(R,Q.startTime-Ee),q=!1}return q}finally{_=null,m=S,v=!1}}var L=!1,F=null,U=-1,X=5,j=-1;function P(){return!(r.unstable_now()-j<X)}function z(){if(F!==null){var ae=r.unstable_now();j=ae;var Ee=!0;try{Ee=F(!0,ae)}finally{Ee?K():(L=!1,F=null)}}else L=!1}var K;if(typeof E=="function")K=function(){E(z)};else if(typeof MessageChannel!="undefined"){var te=new MessageChannel,oe=te.port2;te.port1.onmessage=z,K=function(){oe.postMessage(null)}}else K=function(){A(z,0)};function ee(ae){F=ae,L||(L=!0,K())}function pe(ae,Ee){U=A(function(){ae(r.unstable_now())},Ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,ee(I))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var Ee=3;break;default:Ee=m}var S=m;m=Ee;try{return ae()}finally{m=S}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,Ee){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var S=m;m=ae;try{return Ee()}finally{m=S}},r.unstable_scheduleCallback=function(ae,Ee,S){var D=r.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?D+S:D):S=D,ae){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=S+H,ae={id:f++,callback:Ee,priorityLevel:ae,startTime:S,expirationTime:H,sortIndex:-1},S>D?(ae.sortIndex=S,e(h,ae),t(p)===null&&ae===t(h)&&(b?(k(U),U=-1):b=!0,pe(R,S-D))):(ae.sortIndex=H,e(p,ae),x||v||(x=!0,ee(I))),ae},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(ae){var Ee=m;return function(){var S=m;m=Ee;try{return ae.apply(this,arguments)}finally{m=S}}}})(rN);oN.exports=rN;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=os,iN=G.exports,tl=oN.exports;function ot(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sN=new Set,W_={};function od(r,e){Kf(r,e),Kf(r+"Capture",e)}function Kf(r,e){for(W_[r]=e,r=0;r<e.length;r++)sN.add(e[r])}var Xc=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),sk=Object.prototype.hasOwnProperty,E3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,EB={},xB={};function x3(r){return sk.call(xB,r)?!0:sk.call(EB,r)?!1:E3.test(r)?xB[r]=!0:(EB[r]=!0,!1)}function S3(r,e,t,o){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function C3(r,e,t,o){if(e===null||typeof e=="undefined"||S3(r,e,t,o))return!0;if(o)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ls(r,e,t,o,i,l,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=l,this.removeEmptyString=a}var mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){mi[r]=new ls(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];mi[e]=new ls(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){mi[r]=new ls(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){mi[r]=new ls(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){mi[r]=new ls(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){mi[r]=new ls(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){mi[r]=new ls(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){mi[r]=new ls(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){mi[r]=new ls(r,5,!1,r.toLowerCase(),null,!1,!1)});var vw=/[\-:]([a-z])/g;function Tw(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(vw,Tw);mi[e]=new ls(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(vw,Tw);mi[e]=new ls(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(vw,Tw);mi[e]=new ls(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){mi[r]=new ls(r,1,!1,r.toLowerCase(),null,!1,!1)});mi.xlinkHref=new ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){mi[r]=new ls(r,1,!1,r.toLowerCase(),null,!0,!0)});function Ew(r,e,t,o){var i=mi.hasOwnProperty(e)?mi[e]:null,l=i!==null?i.type===0:o?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");l||(C3(e,t,i,o)&&(t=null),o||i===null?x3(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,o=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,o?r.setAttributeNS(o,e,t):r.setAttribute(e,t))))}var Zc=iN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c_=60103,vp=60106,Tp=60107,gx=60108,gE=60114,xw=60109,Sw=60110,_x=60112,_E=60113,yE=60120,yx=60115,Lc=60116,lN=60129,Cw=60130,lk=60131,aN=60132;if(typeof Symbol=="function"&&Symbol.for){var li=Symbol.for;c_=li("react.element"),vp=li("react.portal"),Tp=li("react.fragment"),gx=li("react.strict_mode"),gE=li("react.profiler"),xw=li("react.provider"),Sw=li("react.context"),_x=li("react.forward_ref"),_E=li("react.suspense"),yE=li("react.suspense_list"),yx=li("react.memo"),Lc=li("react.lazy"),li("react.scope"),lN=li("react.debug_trace_mode"),Cw=li("react.offscreen"),lk=li("react.legacy_hidden"),aN=li("react.cache")}var SB=typeof Symbol=="function"&&Symbol.iterator;function bg(r){return r===null||typeof r!="object"?null:(r=SB&&r[SB]||r["@@iterator"],typeof r=="function"?r:null)}var mC;function u_(r){if(mC===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);mC=e&&e[1]||""}return`
`+mC+r}var gC=!1;function _C(r,e){if(!r||gC)return"";gC=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var o=h}Reflect.construct(r,[],e)}else{try{e.call()}catch(h){o=h}r.call(e.prototype)}else{try{throw Error()}catch(h){o=h}r()}}catch(h){if(h&&o&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),l=o.stack.split(`
`),a=i.length-1,c=l.length-1;1<=a&&0<=c&&i[a]!==l[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==l[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==l[c]){var p=`
`+i[a].replace(" at new "," at ");return r.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",r.displayName)),p}while(1<=a&&0<=c);break}}}finally{gC=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?u_(r):""}function b3(r){switch(r.tag){case 5:return u_(r.type);case 16:return u_("Lazy");case 13:return u_("Suspense");case 19:return u_("SuspenseList");case 0:case 2:case 15:return r=_C(r.type,!1),r;case 11:return r=_C(r.type.render,!1),r;case 1:return r=_C(r.type,!0),r;default:return""}}function ak(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Tp:return"Fragment";case vp:return"Portal";case gE:return"Profiler";case gx:return"StrictMode";case _E:return"Suspense";case yE:return"SuspenseList";case aN:return"Cache"}if(typeof r=="object")switch(r.$$typeof){case Sw:return(r.displayName||"Context")+".Consumer";case xw:return(r._context.displayName||"Context")+".Provider";case _x:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case yx:return e=r.displayName||null,e!==null?e:ak(r.type)||"Memo";case Lc:e=r._payload,r=r._init;try{return ak(r(e))}catch{}}return null}function cN(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ak(e);case 23:return"LegacyHidden";case 8:return e===gx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ih(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function uN(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k3(r){var e=uN(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),o=""+r[e];if(!r.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,l=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){o=""+a,l.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return o},setValue:function(a){o=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function mT(r){r._valueTracker||(r._valueTracker=k3(r))}function hN(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),o="";return r&&(o=uN(r)?r.checked?"true":"false":r.value),r=o,r!==t?(e.setValue(r),!0):!1}function vE(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch{return r.body}}function ck(r,e){var t=e.checked;return Go({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function CB(r,e){var t=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;t=ih(e.value!=null?e.value:t),r._wrapperState={initialChecked:o,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pN(r,e){e=e.checked,e!=null&&Ew(r,"checked",e,!1)}function uk(r,e){pN(r,e);var t=ih(e.value),o=e.type;if(t!=null)o==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(o==="submit"||o==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?hk(r,e.type,t):e.hasOwnProperty("defaultValue")&&hk(r,e.type,ih(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function bB(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function hk(r,e,t){(e!=="number"||vE(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var h_=Array.isArray;function Lf(r,e,t,o){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&o&&(r[t].defaultSelected=!0)}else{for(t=""+ih(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,o&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function pk(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ot(91));return Go({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function kB(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ot(92));if(h_(t)){if(1<t.length)throw Error(ot(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:ih(t)}}function dN(r,e){var t=ih(e.value),o=ih(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),o!=null&&(r.defaultValue=""+o)}function AB(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function fN(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dk(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?fN(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var gT,mN=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,o,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,o,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(gT=gT||document.createElement("div"),gT.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gT.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function z_(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var T_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A3=["Webkit","ms","Moz","O"];Object.keys(T_).forEach(function(r){A3.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),T_[e]=T_[r]})});function gN(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||T_.hasOwnProperty(r)&&T_[r]?(""+e).trim():e+"px"}function _N(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var o=t.indexOf("--")===0,i=gN(t,e[t],o);t==="float"&&(t="cssFloat"),o?r.setProperty(t,i):r[t]=i}}var w3=Go({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fk(r,e){if(e){if(w3[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ot(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ot(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ot(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ot(62))}}function mk(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gk=null;function bw(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _k=null,Nf=null,$f=null;function wB(r){if(r=Fy(r)){if(typeof _k!="function")throw Error(ot(280));var e=r.stateNode;e&&(e=bx(e),_k(r.stateNode,r.type,e))}}function yN(r){Nf?$f?$f.push(r):$f=[r]:Nf=r}function vN(){if(Nf){var r=Nf,e=$f;if($f=Nf=null,wB(r),e)for(r=0;r<e.length;r++)wB(e[r])}}function TN(r,e){return r(e)}function EN(){}var yC=!1;function xN(r,e,t){if(yC)return r(e,t);yC=!0;try{return TN(r,e,t)}finally{yC=!1,(Nf!==null||$f!==null)&&(EN(),vN())}}function X_(r,e){var t=r.stateNode;if(t===null)return null;var o=bx(t);if(o===null)return null;t=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(r=r.type,o=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!o;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(ot(231,e,typeof t));return t}var yk=!1;if(Xc)try{var kg={};Object.defineProperty(kg,"passive",{get:function(){yk=!0}}),window.addEventListener("test",kg,kg),window.removeEventListener("test",kg,kg)}catch{yk=!1}function M3(r,e,t,o,i,l,a,c,p){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(f){this.onError(f)}}var E_=!1,TE=null,EE=!1,vk=null,R3={onError:function(r){E_=!0,TE=r}};function B3(r,e,t,o,i,l,a,c,p){E_=!1,TE=null,M3.apply(R3,arguments)}function I3(r,e,t,o,i,l,a,c,p){if(B3.apply(this,arguments),E_){if(E_){var h=TE;E_=!1,TE=null}else throw Error(ot(198));EE||(EE=!0,vk=h)}}function rd(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,(e.flags&4098)!==0&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function SN(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function MB(r){if(rd(r)!==r)throw Error(ot(188))}function O3(r){var e=r.alternate;if(!e){if(e=rd(r),e===null)throw Error(ot(188));return e!==r?null:r}for(var t=r,o=e;;){var i=t.return;if(i===null)break;var l=i.alternate;if(l===null){if(o=i.return,o!==null){t=o;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===t)return MB(i),r;if(l===o)return MB(i),e;l=l.sibling}throw Error(ot(188))}if(t.return!==o.return)t=i,o=l;else{for(var a=!1,c=i.child;c;){if(c===t){a=!0,t=i,o=l;break}if(c===o){a=!0,o=i,t=l;break}c=c.sibling}if(!a){for(c=l.child;c;){if(c===t){a=!0,t=l,o=i;break}if(c===o){a=!0,o=l,t=i;break}c=c.sibling}if(!a)throw Error(ot(189))}}if(t.alternate!==o)throw Error(ot(190))}if(t.tag!==3)throw Error(ot(188));return t.stateNode.current===t?r:e}function CN(r){return r=O3(r),r!==null?bN(r):null}function bN(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=bN(r);if(e!==null)return e;r=r.sibling}return null}var kN=tl.unstable_scheduleCallback,RB=tl.unstable_cancelCallback,D3=tl.unstable_shouldYield,L3=tl.unstable_requestPaint,hr=tl.unstable_now,N3=tl.unstable_getCurrentPriorityLevel,kw=tl.unstable_ImmediatePriority,AN=tl.unstable_UserBlockingPriority,xE=tl.unstable_NormalPriority,$3=tl.unstable_LowPriority,wN=tl.unstable_IdlePriority,vx=null,Wa=null;function P3(r){if(Wa&&typeof Wa.onCommitFiberRoot=="function")try{Wa.onCommitFiberRoot(vx,r,void 0,(r.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:H3,F3=Math.log,U3=Math.LN2;function H3(r){return r>>>=0,r===0?32:31-(F3(r)/U3|0)|0}var _T=64,yT=4194304;function p_(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function SE(r,e){var t=r.pendingLanes;if(t===0)return 0;var o=0,i=r.suspendedLanes,l=r.pingedLanes,a=t&268435455;if(a!==0){var c=a&~i;c!==0?o=p_(c):(l&=a,l!==0&&(o=p_(l)))}else a=t&~i,a!==0?o=p_(a):l!==0&&(o=p_(l));if(o===0)return 0;if(e!==0&&e!==o&&(e&i)===0&&(i=o&-o,l=e&-e,i>=l||i===16&&(l&4194240)!==0))return e;if((o&4)!==0&&(o|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=o;0<e;)t=31-ta(e),i=1<<t,o|=r[t],e&=~i;return o}function G3(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function vC(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Tx(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-ta(e),r[e]=t}function V3(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var o=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-ta(t),l=1<<i;e[i]=0,o[i]=-1,r[i]=-1,t&=~l}}function Aw(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var o=31-ta(t),i=1<<o;i&e|r[o]&e&&(r[o]|=e),t&=~i}}var no=0;function MN(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var RN,ww,BN,IN,ON,Ek=!1,vT=[],Ku=null,Yu=null,qu=null,j_=new Map,J_=new Map,Gu=[],W3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BB(r,e){switch(r){case"focusin":case"focusout":Ku=null;break;case"dragenter":case"dragleave":Yu=null;break;case"mouseover":case"mouseout":qu=null;break;case"pointerover":case"pointerout":j_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":J_.delete(e.pointerId)}}function Ag(r,e,t,o,i,l){return r===null||r.nativeEvent!==l?(r={blockedOn:e,domEventName:t,eventSystemFlags:o,nativeEvent:l,targetContainers:[i]},e!==null&&(e=Fy(e),e!==null&&ww(e)),r):(r.eventSystemFlags|=o,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function z3(r,e,t,o,i){switch(e){case"focusin":return Ku=Ag(Ku,r,e,t,o,i),!0;case"dragenter":return Yu=Ag(Yu,r,e,t,o,i),!0;case"mouseover":return qu=Ag(qu,r,e,t,o,i),!0;case"pointerover":var l=i.pointerId;return j_.set(l,Ag(j_.get(l)||null,r,e,t,o,i)),!0;case"gotpointercapture":return l=i.pointerId,J_.set(l,Ag(J_.get(l)||null,r,e,t,o,i)),!0}return!1}function DN(r){var e=Ep(r.target);if(e!==null){var t=rd(e);if(t!==null){if(e=t.tag,e===13){if(e=SN(t),e!==null){r.blockedOn=e,ON(r.priority,function(){BN(t)});return}}else if(e===3&&t.stateNode.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function V0(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=xk(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var o=new t.constructor(t.type,t);gk=o,t.target.dispatchEvent(o),gk=null}else return e=Fy(t),e!==null&&ww(e),r.blockedOn=t,!1;e.shift()}return!0}function IB(r,e,t){V0(r)&&t.delete(e)}function X3(){Ek=!1,Ku!==null&&V0(Ku)&&(Ku=null),Yu!==null&&V0(Yu)&&(Yu=null),qu!==null&&V0(qu)&&(qu=null),j_.forEach(IB),J_.forEach(IB)}function wg(r,e){r.blockedOn===e&&(r.blockedOn=null,Ek||(Ek=!0,tl.unstable_scheduleCallback(tl.unstable_NormalPriority,X3)))}function K_(r){function e(i){return wg(i,r)}if(0<vT.length){wg(vT[0],r);for(var t=1;t<vT.length;t++){var o=vT[t];o.blockedOn===r&&(o.blockedOn=null)}}for(Ku!==null&&wg(Ku,r),Yu!==null&&wg(Yu,r),qu!==null&&wg(qu,r),j_.forEach(e),J_.forEach(e),t=0;t<Gu.length;t++)o=Gu[t],o.blockedOn===r&&(o.blockedOn=null);for(;0<Gu.length&&(t=Gu[0],t.blockedOn===null);)DN(t),t.blockedOn===null&&Gu.shift()}var Pf=Zc.ReactCurrentBatchConfig,CE=!0;function j3(r,e,t,o){var i=no,l=Pf.transition;Pf.transition=0;try{no=1,Mw(r,e,t,o)}finally{no=i,Pf.transition=l}}function J3(r,e,t,o){var i=no,l=Pf.transition;Pf.transition=0;try{no=4,Mw(r,e,t,o)}finally{no=i,Pf.transition=l}}function Mw(r,e,t,o){if(CE){var i=xk(r,e,t,o);if(i===null)MC(r,e,o,bE,t),BB(r,o);else if(z3(i,r,e,t,o))o.stopPropagation();else if(BB(r,o),e&4&&-1<W3.indexOf(r)){for(;i!==null;){var l=Fy(i);if(l!==null&&RN(l),l=xk(r,e,t,o),l===null&&MC(r,e,o,bE,t),l===i)break;i=l}i!==null&&o.stopPropagation()}else MC(r,e,o,null,t)}}var bE=null;function xk(r,e,t,o){if(bE=null,r=bw(o),r=Ep(r),r!==null)if(e=rd(r),e===null)r=null;else if(t=e.tag,t===13){if(r=SN(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return bE=r,null}function LN(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(N3()){case kw:return 1;case AN:return 4;case xE:case $3:return 16;case wN:return 536870912;default:return 16}default:return 16}}var Vu=null,Rw=null,W0=null;function NN(){if(W0)return W0;var r,e=Rw,t=e.length,o,i="value"in Vu?Vu.value:Vu.textContent,l=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(o=1;o<=a&&e[t-o]===i[l-o];o++);return W0=i.slice(r,1<o?1-o:void 0)}function z0(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function TT(){return!0}function OB(){return!1}function il(r){function e(t,o,i,l,a){this._reactName=t,this._targetInst=i,this.type=o,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var c in r)r.hasOwnProperty(c)&&(t=r[c],this[c]=t?t(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?TT:OB,this.isPropagationStopped=OB,this}return Go(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=TT)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=TT)},persist:function(){},isPersistent:TT}),e}var Nm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bw=il(Nm),Py=Go({},Nm,{view:0,detail:0}),K3=il(Py),TC,EC,Mg,Ex=Go({},Py,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iw,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Mg&&(Mg&&r.type==="mousemove"?(TC=r.screenX-Mg.screenX,EC=r.screenY-Mg.screenY):EC=TC=0,Mg=r),TC)},movementY:function(r){return"movementY"in r?r.movementY:EC}}),DB=il(Ex),Y3=Go({},Ex,{dataTransfer:0}),q3=il(Y3),Q3=Go({},Py,{relatedTarget:0}),xC=il(Q3),Z3=Go({},Nm,{animationName:0,elapsedTime:0,pseudoElement:0}),eV=il(Z3),tV=Go({},Nm,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),nV=il(tV),oV=Go({},Nm,{data:0}),LB=il(oV),rV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lV(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=sV[r])?!!e[r]:!1}function Iw(){return lV}var aV=Go({},Py,{key:function(r){if(r.key){var e=rV[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=z0(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?iV[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iw,charCode:function(r){return r.type==="keypress"?z0(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?z0(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cV=il(aV),uV=Go({},Ex,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NB=il(uV),hV=Go({},Py,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iw}),pV=il(hV),dV=Go({},Nm,{propertyName:0,elapsedTime:0,pseudoElement:0}),fV=il(dV),mV=Go({},Ex,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),gV=il(mV),_V=[9,13,27,32],Ow=Xc&&"CompositionEvent"in window,x_=null;Xc&&"documentMode"in document&&(x_=document.documentMode);var yV=Xc&&"TextEvent"in window&&!x_,$N=Xc&&(!Ow||x_&&8<x_&&11>=x_),$B=String.fromCharCode(32),PB=!1;function PN(r,e){switch(r){case"keyup":return _V.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FN(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var yf=!1;function vV(r,e){switch(r){case"compositionend":return FN(e);case"keypress":return e.which!==32?null:(PB=!0,$B);case"textInput":return r=e.data,r===$B&&PB?null:r;default:return null}}function TV(r,e){if(yf)return r==="compositionend"||!Ow&&PN(r,e)?(r=NN(),W0=Rw=Vu=null,yf=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $N&&e.locale!=="ko"?null:e.data;default:return null}}var EV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FB(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!EV[r.type]:e==="textarea"}function UN(r,e,t,o){yN(o),e=kE(e,"onChange"),0<e.length&&(t=new Bw("onChange","change",null,t,o),r.push({event:t,listeners:e}))}var S_=null,Y_=null;function xV(r){qN(r,0)}function xx(r){var e=Ef(r);if(hN(e))return r}function SV(r,e){if(r==="change")return e}var HN=!1;if(Xc){var SC;if(Xc){var CC="oninput"in document;if(!CC){var UB=document.createElement("div");UB.setAttribute("oninput","return;"),CC=typeof UB.oninput=="function"}SC=CC}else SC=!1;HN=SC&&(!document.documentMode||9<document.documentMode)}function HB(){S_&&(S_.detachEvent("onpropertychange",GN),Y_=S_=null)}function GN(r){if(r.propertyName==="value"&&xx(Y_)){var e=[];UN(e,Y_,r,bw(r)),xN(xV,e)}}function CV(r,e,t){r==="focusin"?(HB(),S_=e,Y_=t,S_.attachEvent("onpropertychange",GN)):r==="focusout"&&HB()}function bV(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xx(Y_)}function kV(r,e){if(r==="click")return xx(e)}function AV(r,e){if(r==="input"||r==="change")return xx(e)}function wV(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Za=typeof Object.is=="function"?Object.is:wV;function q_(r,e){if(Za(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),o=Object.keys(e);if(t.length!==o.length)return!1;for(o=0;o<t.length;o++){var i=t[o];if(!sk.call(e,i)||!Za(r[i],e[i]))return!1}return!0}function GB(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function VB(r,e){var t=GB(r);r=0;for(var o;t;){if(t.nodeType===3){if(o=r+t.textContent.length,r<=e&&o>=e)return{node:t,offset:e-r};r=o}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=GB(t)}}function VN(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?VN(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function WN(){for(var r=window,e=vE();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=vE(r.document)}return e}function Dw(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function MV(r){var e=WN(),t=r.focusedElem,o=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&VN(t.ownerDocument.documentElement,t)){if(o!==null&&Dw(t)){if(e=o.start,r=o.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,l=Math.min(o.start,i);o=o.end===void 0?l:Math.min(o.end,i),!r.extend&&l>o&&(i=o,o=l,l=i),i=VB(t,l);var a=VB(t,o);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),l>o?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var RV=Xc&&"documentMode"in document&&11>=document.documentMode,vf=null,Sk=null,C_=null,Ck=!1;function WB(r,e,t){var o=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ck||vf==null||vf!==vE(o)||(o=vf,"selectionStart"in o&&Dw(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),C_&&q_(C_,o)||(C_=o,o=kE(Sk,"onSelect"),0<o.length&&(e=new Bw("onSelect","select",null,e,t),r.push({event:e,listeners:o}),e.target=vf)))}function ET(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Tf={animationend:ET("Animation","AnimationEnd"),animationiteration:ET("Animation","AnimationIteration"),animationstart:ET("Animation","AnimationStart"),transitionend:ET("Transition","TransitionEnd")},bC={},zN={};Xc&&(zN=document.createElement("div").style,"AnimationEvent"in window||(delete Tf.animationend.animation,delete Tf.animationiteration.animation,delete Tf.animationstart.animation),"TransitionEvent"in window||delete Tf.transitionend.transition);function Sx(r){if(bC[r])return bC[r];if(!Tf[r])return r;var e=Tf[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in zN)return bC[r]=e[t];return r}var XN=Sx("animationend"),jN=Sx("animationiteration"),JN=Sx("animationstart"),KN=Sx("transitionend"),YN=new Map,zB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yh(r,e){YN.set(r,e),od(e,[r])}for(var kC=0;kC<zB.length;kC++){var AC=zB[kC],BV=AC.toLowerCase(),IV=AC[0].toUpperCase()+AC.slice(1);yh(BV,"on"+IV)}yh(XN,"onAnimationEnd");yh(jN,"onAnimationIteration");yh(JN,"onAnimationStart");yh("dblclick","onDoubleClick");yh("focusin","onFocus");yh("focusout","onBlur");yh(KN,"onTransitionEnd");Kf("onMouseEnter",["mouseout","mouseover"]);Kf("onMouseLeave",["mouseout","mouseover"]);Kf("onPointerEnter",["pointerout","pointerover"]);Kf("onPointerLeave",["pointerout","pointerover"]);od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));od("onBeforeInput",["compositionend","keypress","textInput","paste"]);od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var d_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OV=new Set("cancel close invalid load scroll toggle".split(" ").concat(d_));function XB(r,e,t){var o=r.type||"unknown-event";r.currentTarget=t,I3(o,e,void 0,r),r.currentTarget=null}function qN(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var o=r[t],i=o.event;o=o.listeners;e:{var l=void 0;if(e)for(var a=o.length-1;0<=a;a--){var c=o[a],p=c.instance,h=c.currentTarget;if(c=c.listener,p!==l&&i.isPropagationStopped())break e;XB(i,c,h),l=p}else for(a=0;a<o.length;a++){if(c=o[a],p=c.instance,h=c.currentTarget,c=c.listener,p!==l&&i.isPropagationStopped())break e;XB(i,c,h),l=p}}}if(EE)throw r=vk,EE=!1,vk=null,r}function Eo(r,e){var t=e[Mk];t===void 0&&(t=e[Mk]=new Set);var o=r+"__bubble";t.has(o)||(QN(e,r,2,!1),t.add(o))}function wC(r,e,t){var o=0;e&&(o|=4),QN(t,r,o,e)}var xT="_reactListening"+Math.random().toString(36).slice(2);function Cx(r){if(!r[xT]){r[xT]=!0,sN.forEach(function(t){t!=="selectionchange"&&(OV.has(t)||wC(t,!1,r),wC(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[xT]||(e[xT]=!0,wC("selectionchange",!1,e))}}function QN(r,e,t,o){switch(LN(e)){case 1:var i=j3;break;case 4:i=J3;break;default:i=Mw}t=i.bind(null,e,t,r),i=void 0,!yk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),o?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function MC(r,e,t,o,i){var l=o;if((e&1)===0&&(e&2)===0&&o!==null)e:for(;;){if(o===null)return;var a=o.tag;if(a===3||a===4){var c=o.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=o.return;a!==null;){var p=a.tag;if((p===3||p===4)&&(p=a.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Ep(c),a===null)return;if(p=a.tag,p===5||p===6){o=l=a;continue e}c=c.parentNode}}o=o.return}xN(function(){var h=l,f=bw(t),_=[];e:{var m=YN.get(r);if(m!==void 0){var v=Bw,x=r;switch(r){case"keypress":if(z0(t)===0)break e;case"keydown":case"keyup":v=cV;break;case"focusin":x="focus",v=xC;break;case"focusout":x="blur",v=xC;break;case"beforeblur":case"afterblur":v=xC;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=DB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=q3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=pV;break;case XN:case jN:case JN:v=eV;break;case KN:v=fV;break;case"scroll":v=K3;break;case"wheel":v=gV;break;case"copy":case"cut":case"paste":v=nV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=NB}var b=(e&4)!==0,A=!b&&r==="scroll",k=b?m!==null?m+"Capture":null:m;b=[];for(var E=h,M;E!==null;){M=E;var R=M.stateNode;if(M.tag===5&&R!==null&&(M=R,k!==null&&(R=X_(E,k),R!=null&&b.push(Q_(E,R,M)))),A)break;E=E.return}0<b.length&&(m=new v(m,x,null,t,f),_.push({event:m,listeners:b}))}}if((e&7)===0){e:{if(m=r==="mouseover"||r==="pointerover",v=r==="mouseout"||r==="pointerout",m&&t!==gk&&(x=t.relatedTarget||t.fromElement)&&(Ep(x)||x[vh]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=t.relatedTarget||t.toElement,v=h,x=x?Ep(x):null,x!==null&&(A=rd(x),x!==A||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=h),v!==x)){if(b=DB,R="onMouseLeave",k="onMouseEnter",E="mouse",(r==="pointerout"||r==="pointerover")&&(b=NB,R="onPointerLeave",k="onPointerEnter",E="pointer"),A=v==null?m:Ef(v),M=x==null?m:Ef(x),m=new b(R,E+"leave",v,t,f),m.target=A,m.relatedTarget=M,R=null,Ep(f)===h&&(b=new b(k,E+"enter",x,t,f),b.target=M,b.relatedTarget=A,R=b),A=R,v&&x)t:{for(b=v,k=x,E=0,M=b;M;M=Dd(M))E++;for(M=0,R=k;R;R=Dd(R))M++;for(;0<E-M;)b=Dd(b),E--;for(;0<M-E;)k=Dd(k),M--;for(;E--;){if(b===k||k!==null&&b===k.alternate)break t;b=Dd(b),k=Dd(k)}b=null}else b=null;v!==null&&jB(_,m,v,b,!1),x!==null&&A!==null&&jB(_,A,x,b,!0)}}e:{if(m=h?Ef(h):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var I=SV;else if(FB(m))if(HN)I=AV;else{I=bV;var L=CV}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=kV);if(I&&(I=I(r,h))){UN(_,I,t,f);break e}L&&L(r,m,h),r==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&hk(m,"number",m.value)}switch(L=h?Ef(h):window,r){case"focusin":(FB(L)||L.contentEditable==="true")&&(vf=L,Sk=h,C_=null);break;case"focusout":C_=Sk=vf=null;break;case"mousedown":Ck=!0;break;case"contextmenu":case"mouseup":case"dragend":Ck=!1,WB(_,t,f);break;case"selectionchange":if(RV)break;case"keydown":case"keyup":WB(_,t,f)}var F;if(Ow)e:{switch(r){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else yf?PN(r,t)&&(U="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&($N&&t.locale!=="ko"&&(yf||U!=="onCompositionStart"?U==="onCompositionEnd"&&yf&&(F=NN()):(Vu=f,Rw="value"in Vu?Vu.value:Vu.textContent,yf=!0)),L=kE(h,U),0<L.length&&(U=new LB(U,r,null,t,f),_.push({event:U,listeners:L}),F?U.data=F:(F=FN(t),F!==null&&(U.data=F)))),(F=yV?vV(r,t):TV(r,t))&&(h=kE(h,"onBeforeInput"),0<h.length&&(f=new LB("onBeforeInput","beforeinput",null,t,f),_.push({event:f,listeners:h}),f.data=F))}qN(_,e)})}function Q_(r,e,t){return{instance:r,listener:e,currentTarget:t}}function kE(r,e){for(var t=e+"Capture",o=[];r!==null;){var i=r,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=X_(r,t),l!=null&&o.unshift(Q_(r,l,i)),l=X_(r,e),l!=null&&o.push(Q_(r,l,i))),r=r.return}return o}function Dd(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function jB(r,e,t,o,i){for(var l=e._reactName,a=[];t!==null&&t!==o;){var c=t,p=c.alternate,h=c.stateNode;if(p!==null&&p===o)break;c.tag===5&&h!==null&&(c=h,i?(p=X_(t,l),p!=null&&a.unshift(Q_(t,p,c))):i||(p=X_(t,l),p!=null&&a.push(Q_(t,p,c)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}function AE(){}var bk=null,kk=null;function ZN(r,e){switch(r){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ak(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wk=typeof setTimeout=="function"?setTimeout:void 0,DV=typeof clearTimeout=="function"?clearTimeout:void 0,JB=typeof Promise=="function"?Promise:void 0,LV=typeof queueMicrotask=="function"?queueMicrotask:typeof JB!="undefined"?function(r){return JB.resolve(null).then(r).catch(NV)}:wk;function NV(r){setTimeout(function(){throw r})}function RC(r,e){var t=e,o=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(o===0){r.removeChild(i),K_(e);return}o--}else t!=="$"&&t!=="$?"&&t!=="$!"||o++;t=i}while(t);K_(e)}function wp(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function KB(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var $m=Math.random().toString(36).slice(2),Ua="__reactFiber$"+$m,Z_="__reactProps$"+$m,vh="__reactContainer$"+$m,Mk="__reactEvents$"+$m,$V="__reactListeners$"+$m,PV="__reactHandles$"+$m;function Ep(r){var e=r[Ua];if(e)return e;for(var t=r.parentNode;t;){if(e=t[vh]||t[Ua]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=KB(r);r!==null;){if(t=r[Ua])return t;r=KB(r)}return e}r=t,t=r.parentNode}return null}function Fy(r){return r=r[Ua]||r[vh],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ef(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ot(33))}function bx(r){return r[Z_]||null}var Rk=[],xf=-1;function Th(r){return{current:r}}function Co(r){0>xf||(r.current=Rk[xf],Rk[xf]=null,xf--)}function _o(r,e){xf++,Rk[xf]=r.current,r.current=e}var sh={},$i=Th(sh),xs=Th(!1),Gp=sh;function Yf(r,e){var t=r.type.contextTypes;if(!t)return sh;var o=r.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in t)i[l]=e[l];return o&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Ss(r){return r=r.childContextTypes,r!=null}function wE(){Co(xs),Co($i)}function YB(r,e,t){if($i.current!==sh)throw Error(ot(168));_o($i,e),_o(xs,t)}function e$(r,e,t){var o=r.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return t;o=o.getChildContext();for(var i in o)if(!(i in e))throw Error(ot(108,cN(r)||"Unknown",i));return Go({},t,o)}function ME(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||sh,Gp=$i.current,_o($i,r),_o(xs,xs.current),!0}function qB(r,e,t){var o=r.stateNode;if(!o)throw Error(ot(169));t?(r=e$(r,e,Gp),o.__reactInternalMemoizedMergedChildContext=r,Co(xs),Co($i),_o($i,r)):Co(xs),_o(xs,t)}var Tl=null,kx=!1,BC=!1;function Eh(){if(!BC&&Tl!==null){BC=!0;var r=0,e=no;try{var t=Tl;for(no=1;r<t.length;r++){var o=t[r];do o=o(!0);while(o!==null)}Tl=null,kx=!1}catch(i){throw Tl!==null&&(Tl=Tl.slice(r+1)),kN(kw,Eh),i}finally{no=e,BC=!1}}return null}var FV=Zc.ReactCurrentBatchConfig;function Zl(r,e){if(r&&r.defaultProps){e=Go({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var RE=Th(null),BE=null,Sf=null,Lw=null;function Nw(){Lw=Sf=BE=null}function $w(r){var e=RE.current;Co(RE),r._currentValue=e}function Bk(r,e){for(;r!==null;){var t=r.alternate;if((r.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else r.childLanes|=e,t!==null&&(t.childLanes|=e);r=r.return}}function Ff(r,e){BE=r,Lw=Sf=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&e)!==0&&(zs=!0),r.firstContext=null)}function Il(r){var e=r._currentValue;if(Lw!==r)if(r={context:r,memoizedValue:e,next:null},Sf===null){if(BE===null)throw Error(ot(308));Sf=r,BE.dependencies={lanes:0,firstContext:r}}else Sf=Sf.next=r;return e}var Ha=null,Hu=!1;function Pw(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t$(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Qu(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function Mp(r,e){var t=r.updateQueue;t!==null&&(t=t.shared,Sr!==null&&(r.mode&1)!==0&&(bn&2)===0?(r=t.interleaved,r===null?(e.next=e,Ha===null?Ha=[t]:Ha.push(t)):(e.next=r.next,r.next=e),t.interleaved=e):(r=t.pending,r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e))}function X0(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var o=e.lanes;o&=r.pendingLanes,t|=o,e.lanes=t,Aw(r,t)}}function QB(r,e){var t=r.updateQueue,o=r.alternate;if(o!==null&&(o=o.updateQueue,t===o)){var i=null,l=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};l===null?i=l=a:l=l.next=a,t=t.next}while(t!==null);l===null?i=l=e:l=l.next=e}else i=l=e;t={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:o.shared,effects:o.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function IE(r,e,t,o){var i=r.updateQueue;Hu=!1;var l=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var p=c,h=p.next;p.next=null,a===null?l=h:a.next=h,a=p;var f=r.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=h:c.next=h,f.lastBaseUpdate=p))}if(l!==null){var _=i.baseState;a=0,f=h=p=null,c=l;do{var m=c.lane,v=c.eventTime;if((o&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=r,b=c;switch(m=e,v=t,b.tag){case 1:if(x=b.payload,typeof x=="function"){_=x.call(v,_,m);break e}_=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(v,_,m):x,m==null)break e;_=Go({},_,m);break e;case 2:Hu=!0}}c.callback!==null&&c.lane!==0&&(r.flags|=64,m=i.effects,m===null?i.effects=[c]:m.push(c))}else v={eventTime:v,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(h=f=v,p=_):f=f.next=v,a|=m;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;m=c,c=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(f===null&&(p=_),i.baseState=p,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else l===null&&(i.shared.lanes=0);em|=a,r.lanes=a,r.memoizedState=_}}function ZB(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var o=r[e],i=o.callback;if(i!==null){if(o.callback=null,o=t,typeof i!="function")throw Error(ot(191,i));i.call(o)}}}var n$=new iN.Component().refs;function Ik(r,e,t,o){e=r.memoizedState,t=t(o,e),t=t==null?e:Go({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Ax={isMounted:function(r){return(r=r._reactInternals)?rd(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var o=Cs(),i=Bp(r),l=Qu(o,i);l.payload=e,t!=null&&(l.callback=t),Mp(r,l),e=Ml(r,i,o),e!==null&&X0(e,r,i)},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var o=Cs(),i=Bp(r),l=Qu(o,i);l.tag=1,l.payload=e,t!=null&&(l.callback=t),Mp(r,l),e=Ml(r,i,o),e!==null&&X0(e,r,i)},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Cs(),o=Bp(r),i=Qu(t,o);i.tag=2,e!=null&&(i.callback=e),Mp(r,i),e=Ml(r,o,t),e!==null&&X0(e,r,o)}};function eI(r,e,t,o,i,l,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(o,l,a):e.prototype&&e.prototype.isPureReactComponent?!q_(t,o)||!q_(i,l):!0}function o$(r,e,t){var o=!1,i=sh,l=e.contextType;return typeof l=="object"&&l!==null?l=Il(l):(i=Ss(e)?Gp:$i.current,o=e.contextTypes,l=(o=o!=null)?Yf(r,i):sh),e=new e(t,l),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ax,r.stateNode=e,e._reactInternals=r,o&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=l),e}function tI(r,e,t,o){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,o),e.state!==r&&Ax.enqueueReplaceState(e,e.state,null)}function Ok(r,e,t,o){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=n$,Pw(r);var l=e.contextType;typeof l=="object"&&l!==null?i.context=Il(l):(l=Ss(e)?Gp:$i.current,i.context=Yf(r,l)),i.state=r.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Ik(r,e,l,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ax.enqueueReplaceState(i,i.state,null),IE(r,t,i,o),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}var Cf=[],bf=0,OE=null,DE=0,El=[],xl=0,Vp=null,Fc=1,Uc="";function ap(r,e){Cf[bf++]=DE,Cf[bf++]=OE,OE=r,DE=e}function r$(r,e,t){El[xl++]=Fc,El[xl++]=Uc,El[xl++]=Vp,Vp=r;var o=Fc;r=Uc;var i=32-ta(o)-1;o&=~(1<<i),t+=1;var l=32-ta(e)+i;if(30<l){var a=i-i%5;l=(o&(1<<a)-1).toString(32),o>>=a,i-=a,Fc=1<<32-ta(e)+i|t<<i|o,Uc=l+r}else Fc=1<<l|t<<i|o,Uc=r}function Fw(r){r.return!==null&&(ap(r,1),r$(r,1,0))}function Uw(r){for(;r===OE;)OE=Cf[--bf],Cf[bf]=null,DE=Cf[--bf],Cf[bf]=null;for(;r===Vp;)Vp=El[--xl],El[xl]=null,Uc=El[--xl],El[xl]=null,Fc=El[--xl],El[xl]=null}var kl=null,ea=null,Uo=!1;function i$(r,e){var t=Vs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function nI(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,kl=r,ea=wp(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,kl=r,ea=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vp!==null?{id:Fc,overflow:Uc}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Vs(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,kl=r,ea=null,!0):!1;default:return!1}}function oI(r){if((r.mode&1)!==0)throw Error(ot(418))}function Dk(r){if(Uo){var e=ea;if(e){var t=e;if(!nI(r,e)){oI(r),e=wp(t.nextSibling);var o=kl;e&&nI(r,e)?i$(o,t):(r.flags=r.flags&-4097|2,Uo=!1,kl=r)}}else oI(r),r.flags=r.flags&-4097|2,Uo=!1,kl=r}}function rI(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;kl=r}function Rg(r){if(r!==kl)return!1;if(!Uo)return rI(r),Uo=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!Ak(r.type,r.memoizedProps)),e)for(e=ea;e;)i$(r,e),e=wp(e.nextSibling);if(rI(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ot(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){ea=wp(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}ea=null}}else ea=kl?wp(r.stateNode.nextSibling):null;return!0}function ey(){ea=kl=null,Uo=!1}function Bg(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ot(309));var o=t.stateNode}if(!o)throw Error(ot(147,r));var i=o,l=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(a){var c=i.refs;c===n$&&(c=i.refs={}),a===null?delete c[l]:c[l]=a},e._stringRef=l,e)}if(typeof r!="string")throw Error(ot(284));if(!t._owner)throw Error(ot(290,r))}return r}function ST(r,e){throw r=Object.prototype.toString.call(e),Error(ot(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function iI(r){var e=r._init;return e(r._payload)}function s$(r){function e(k,E){if(r){var M=k.deletions;M===null?(k.deletions=[E],k.flags|=16):M.push(E)}}function t(k,E){if(!r)return null;for(;E!==null;)e(k,E),E=E.sibling;return null}function o(k,E){for(k=new Map;E!==null;)E.key!==null?k.set(E.key,E):k.set(E.index,E),E=E.sibling;return k}function i(k,E){return k=lh(k,E),k.index=0,k.sibling=null,k}function l(k,E,M){return k.index=M,r?(M=k.alternate,M!==null?(M=M.index,M<E?(k.flags|=2,E):M):(k.flags|=2,E)):(k.flags|=1048576,E)}function a(k){return r&&k.alternate===null&&(k.flags|=2),k}function c(k,E,M,R){return E===null||E.tag!==6?(E=NC(M,k.mode,R),E.return=k,E):(E=i(E,M),E.return=k,E)}function p(k,E,M,R){var I=M.type;return I===Tp?f(k,E,M.props.children,R,M.key):E!==null&&(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Lc&&iI(I)===E.type)?(R=i(E,M.props),R.ref=Bg(k,E,M),R.return=k,R):(R=Q0(M.type,M.key,M.props,null,k.mode,R),R.ref=Bg(k,E,M),R.return=k,R)}function h(k,E,M,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==M.containerInfo||E.stateNode.implementation!==M.implementation?(E=$C(M,k.mode,R),E.return=k,E):(E=i(E,M.children||[]),E.return=k,E)}function f(k,E,M,R,I){return E===null||E.tag!==7?(E=Ip(M,k.mode,R,I),E.return=k,E):(E=i(E,M),E.return=k,E)}function _(k,E,M){if(typeof E=="string"&&E!==""||typeof E=="number")return E=NC(""+E,k.mode,M),E.return=k,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case c_:return M=Q0(E.type,E.key,E.props,null,k.mode,M),M.ref=Bg(k,null,E),M.return=k,M;case vp:return E=$C(E,k.mode,M),E.return=k,E;case Lc:var R=E._init;return _(k,R(E._payload),M)}if(h_(E)||bg(E))return E=Ip(E,k.mode,M,null),E.return=k,E;ST(k,E)}return null}function m(k,E,M,R){var I=E!==null?E.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return I!==null?null:c(k,E,""+M,R);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case c_:return M.key===I?p(k,E,M,R):null;case vp:return M.key===I?h(k,E,M,R):null;case Lc:return I=M._init,m(k,E,I(M._payload),R)}if(h_(M)||bg(M))return I!==null?null:f(k,E,M,R,null);ST(k,M)}return null}function v(k,E,M,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return k=k.get(M)||null,c(E,k,""+R,I);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case c_:return k=k.get(R.key===null?M:R.key)||null,p(E,k,R,I);case vp:return k=k.get(R.key===null?M:R.key)||null,h(E,k,R,I);case Lc:var L=R._init;return v(k,E,M,L(R._payload),I)}if(h_(R)||bg(R))return k=k.get(M)||null,f(E,k,R,I,null);ST(E,R)}return null}function x(k,E,M,R){for(var I=null,L=null,F=E,U=E=0,X=null;F!==null&&U<M.length;U++){F.index>U?(X=F,F=null):X=F.sibling;var j=m(k,F,M[U],R);if(j===null){F===null&&(F=X);break}r&&F&&j.alternate===null&&e(k,F),E=l(j,E,U),L===null?I=j:L.sibling=j,L=j,F=X}if(U===M.length)return t(k,F),Uo&&ap(k,U),I;if(F===null){for(;U<M.length;U++)F=_(k,M[U],R),F!==null&&(E=l(F,E,U),L===null?I=F:L.sibling=F,L=F);return Uo&&ap(k,U),I}for(F=o(k,F);U<M.length;U++)X=v(F,k,U,M[U],R),X!==null&&(r&&X.alternate!==null&&F.delete(X.key===null?U:X.key),E=l(X,E,U),L===null?I=X:L.sibling=X,L=X);return r&&F.forEach(function(P){return e(k,P)}),Uo&&ap(k,U),I}function b(k,E,M,R){var I=bg(M);if(typeof I!="function")throw Error(ot(150));if(M=I.call(M),M==null)throw Error(ot(151));for(var L=I=null,F=E,U=E=0,X=null,j=M.next();F!==null&&!j.done;U++,j=M.next()){F.index>U?(X=F,F=null):X=F.sibling;var P=m(k,F,j.value,R);if(P===null){F===null&&(F=X);break}r&&F&&P.alternate===null&&e(k,F),E=l(P,E,U),L===null?I=P:L.sibling=P,L=P,F=X}if(j.done)return t(k,F),Uo&&ap(k,U),I;if(F===null){for(;!j.done;U++,j=M.next())j=_(k,j.value,R),j!==null&&(E=l(j,E,U),L===null?I=j:L.sibling=j,L=j);return Uo&&ap(k,U),I}for(F=o(k,F);!j.done;U++,j=M.next())j=v(F,k,U,j.value,R),j!==null&&(r&&j.alternate!==null&&F.delete(j.key===null?U:j.key),E=l(j,E,U),L===null?I=j:L.sibling=j,L=j);return r&&F.forEach(function(z){return e(k,z)}),Uo&&ap(k,U),I}function A(k,E,M,R){if(typeof M=="object"&&M!==null&&M.type===Tp&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case c_:e:{for(var I=M.key,L=E;L!==null;){if(L.key===I){if(I=M.type,I===Tp){if(L.tag===7){t(k,L.sibling),E=i(L,M.props.children),E.return=k,k=E;break e}}else if(L.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Lc&&iI(I)===L.type){t(k,L.sibling),E=i(L,M.props),E.ref=Bg(k,L,M),E.return=k,k=E;break e}t(k,L);break}else e(k,L);L=L.sibling}M.type===Tp?(E=Ip(M.props.children,k.mode,R,M.key),E.return=k,k=E):(R=Q0(M.type,M.key,M.props,null,k.mode,R),R.ref=Bg(k,E,M),R.return=k,k=R)}return a(k);case vp:e:{for(L=M.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===M.containerInfo&&E.stateNode.implementation===M.implementation){t(k,E.sibling),E=i(E,M.children||[]),E.return=k,k=E;break e}else{t(k,E);break}else e(k,E);E=E.sibling}E=$C(M,k.mode,R),E.return=k,k=E}return a(k);case Lc:return L=M._init,A(k,E,L(M._payload),R)}if(h_(M))return x(k,E,M,R);if(bg(M))return b(k,E,M,R);ST(k,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,E!==null&&E.tag===6?(t(k,E.sibling),E=i(E,M),E.return=k,k=E):(t(k,E),E=NC(M,k.mode,R),E.return=k,k=E),a(k)):t(k,E)}return A}var qf=s$(!0),l$=s$(!1),Uy={},za=Th(Uy),ty=Th(Uy),ny=Th(Uy);function xp(r){if(r===Uy)throw Error(ot(174));return r}function Hw(r,e){switch(_o(ny,e),_o(ty,r),_o(za,Uy),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dk(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=dk(e,r)}Co(za),_o(za,e)}function Qf(){Co(za),Co(ty),Co(ny)}function a$(r){xp(ny.current);var e=xp(za.current),t=dk(e,r.type);e!==t&&(_o(ty,r),_o(za,t))}function Gw(r){ty.current===r&&(Co(za),Co(ty))}var Fo=Th(0);function LE(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var j0=[];function Vw(){for(var r=0;r<j0.length;r++)j0[r]._workInProgressVersionPrimary=null;j0.length=0}var J0=Zc.ReactCurrentDispatcher,Al=Zc.ReactCurrentBatchConfig,Zf=0,or=null,Di=null,Xr=null,NE=!1,b_=!1,oy=0,UV=0;function ki(){throw Error(ot(321))}function Ww(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Za(r[t],e[t]))return!1;return!0}function zw(r,e,t,o,i,l){if(Zf=l,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,J0.current=r===null||r.memoizedState===null?WV:zV,r=t(o,i),b_){l=0;do{if(b_=!1,oy=0,25<=l)throw Error(ot(301));l+=1,Xr=Di=null,e.updateQueue=null,J0.current=XV,r=t(o,i)}while(b_)}if(J0.current=$E,e=Di!==null&&Di.next!==null,Zf=0,Xr=Di=or=null,NE=!1,e)throw Error(ot(300));return r}function Xw(){var r=oy!==0;return oy=0,r}function Nc(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?or.memoizedState=Xr=r:Xr=Xr.next=r,Xr}function ec(){if(Di===null){var r=or.alternate;r=r!==null?r.memoizedState:null}else r=Di.next;var e=Xr===null?or.memoizedState:Xr.next;if(e!==null)Xr=e,Di=r;else{if(r===null)throw Error(ot(310));Di=r,r={memoizedState:Di.memoizedState,baseState:Di.baseState,baseQueue:Di.baseQueue,queue:Di.queue,next:null},Xr===null?or.memoizedState=Xr=r:Xr=Xr.next=r}return Xr}function Rp(r,e){return typeof e=="function"?e(r):e}function CT(r){var e=ec(),t=e.queue;if(t===null)throw Error(ot(311));t.lastRenderedReducer=r;var o=Di,i=o.baseQueue,l=t.pending;if(l!==null){if(i!==null){var a=i.next;i.next=l.next,l.next=a}o.baseQueue=i=l,t.pending=null}if(i!==null){l=i.next,o=o.baseState;var c=a=null,p=null,h=l;do{var f=h.lane;if((Zf&f)===f)p!==null&&(p=p.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),o=h.hasEagerState?h.eagerState:r(o,h.action);else{var _={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};p===null?(c=p=_,a=o):p=p.next=_,or.lanes|=f,em|=f}h=h.next}while(h!==null&&h!==l);p===null?a=o:p.next=c,Za(o,e.memoizedState)||(zs=!0),e.memoizedState=o,e.baseState=a,e.baseQueue=p,t.lastRenderedState=o}if(r=t.interleaved,r!==null){i=r;do l=i.lane,or.lanes|=l,em|=l,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function bT(r){var e=ec(),t=e.queue;if(t===null)throw Error(ot(311));t.lastRenderedReducer=r;var o=t.dispatch,i=t.pending,l=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do l=r(l,a.action),a=a.next;while(a!==i);Za(l,e.memoizedState)||(zs=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),t.lastRenderedState=l}return[l,o]}function c$(){}function u$(r,e,t){var o=or,i=Nc();if(Uo){if(t===void 0)throw Error(ot(407));t=t()}else{if(t=e(),Sr===null)throw Error(ot(349));(Zf&30)!==0||h$(o,e,t)}i.memoizedState=t;var l={value:t,getSnapshot:e};return i.queue=l,Lk(d$.bind(null,o,l,r),[r]),o.flags|=2048,ry(9,p$.bind(null,o,l,t,e),void 0,null),t}function h$(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function p$(r,e,t,o){e.value=t,e.getSnapshot=o,f$(e)&&Ml(r,1,-1)}function d$(r,e,t){return t(function(){f$(e)&&Ml(r,1,-1)})}function f$(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Za(r,t)}catch{return!0}}function IC(r){var e=Nc();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:r},e.queue=r,r=r.dispatch=VV.bind(null,or,r),[e.memoizedState,r]}function ry(r,e,t,o){return r={tag:r,create:e,destroy:t,deps:o,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(o=t.next,t.next=r,r.next=o,e.lastEffect=r)),r}function m$(){return ec().memoizedState}function K0(r,e,t,o){var i=Nc();or.flags|=r,i.memoizedState=ry(1|e,t,void 0,o===void 0?null:o)}function wx(r,e,t,o){var i=ec();o=o===void 0?null:o;var l=void 0;if(Di!==null){var a=Di.memoizedState;if(l=a.destroy,o!==null&&Ww(o,a.deps)){i.memoizedState=ry(e,t,l,o);return}}or.flags|=r,i.memoizedState=ry(1|e,t,l,o)}function Lk(r,e){return K0(8390656,8,r,e)}function k_(r,e){return wx(2048,8,r,e)}function g$(r,e){return wx(4,2,r,e)}function _$(r,e){return wx(4,4,r,e)}function y$(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function v$(r,e,t){return t=t!=null?t.concat([r]):null,wx(4,4,y$.bind(null,e,r),t)}function jw(){}function T$(r,e){var t=ec();e=e===void 0?null:e;var o=t.memoizedState;return o!==null&&e!==null&&Ww(e,o[1])?o[0]:(t.memoizedState=[r,e],r)}function E$(r,e){var t=ec();e=e===void 0?null:e;var o=t.memoizedState;return o!==null&&e!==null&&Ww(e,o[1])?o[0]:(r=r(),t.memoizedState=[r,e],r)}function HV(r,e){var t=no;no=t!==0&&4>t?t:4,r(!0);var o=Al.transition;Al.transition=1;try{r(!1),e()}finally{no=t,Al.transition=o}}function x$(){return ec().memoizedState}function GV(r,e,t){var o=Bp(r);t={lane:o,action:t,hasEagerState:!1,eagerState:null,next:null},S$(r)?C$(e,t):(b$(r,e,t),t=Cs(),r=Ml(r,o,t),r!==null&&k$(r,e,o))}function VV(r,e,t){var o=Bp(r),i={lane:o,action:t,hasEagerState:!1,eagerState:null,next:null};if(S$(r))C$(e,i);else{b$(r,e,i);var l=r.alternate;if(r.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var a=e.lastRenderedState,c=l(a,t);if(i.hasEagerState=!0,i.eagerState=c,Za(c,a))return}catch{}finally{}t=Cs(),r=Ml(r,o,t),r!==null&&k$(r,e,o)}}function S$(r){var e=r.alternate;return r===or||e!==null&&e===or}function C$(r,e){b_=NE=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function b$(r,e,t){Sr!==null&&(r.mode&1)!==0&&(bn&2)===0?(r=e.interleaved,r===null?(t.next=t,Ha===null?Ha=[e]:Ha.push(e)):(t.next=r.next,r.next=t),e.interleaved=t):(r=e.pending,r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t)}function k$(r,e,t){if((t&4194240)!==0){var o=e.lanes;o&=r.pendingLanes,t|=o,e.lanes=t,Aw(r,t)}}var $E={readContext:Il,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},WV={readContext:Il,useCallback:function(r,e){return Nc().memoizedState=[r,e===void 0?null:e],r},useContext:Il,useEffect:Lk,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,K0(4194308,4,y$.bind(null,e,r),t)},useLayoutEffect:function(r,e){return K0(4194308,4,r,e)},useInsertionEffect:function(r,e){return K0(4,2,r,e)},useMemo:function(r,e){var t=Nc();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var o=Nc();return e=t!==void 0?t(e):e,o.memoizedState=o.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},o.queue=r,r=r.dispatch=GV.bind(null,or,r),[o.memoizedState,r]},useRef:function(r){var e=Nc();return r={current:r},e.memoizedState=r},useState:IC,useDebugValue:jw,useDeferredValue:function(r){var e=IC(r),t=e[0],o=e[1];return Lk(function(){var i=Al.transition;Al.transition=1;try{o(r)}finally{Al.transition=i}},[r]),t},useTransition:function(){var r=IC(!1),e=r[0];return r=HV.bind(null,r[1]),Nc().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:u$,useId:function(){var r=Nc(),e=Sr.identifierPrefix;if(Uo){var t=Uc,o=Fc;t=(o&~(1<<32-ta(o)-1)).toString(32)+t,e=e+"R:"+t,t=oy++,0<t&&(e+=":"+t.toString(32))}else t=UV++,e=e+"r:"+t.toString(32);return r.memoizedState=e},unstable_isNewReconciler:!1},zV={readContext:Il,useCallback:T$,useContext:Il,useEffect:k_,useImperativeHandle:v$,useInsertionEffect:g$,useLayoutEffect:_$,useMemo:E$,useReducer:CT,useRef:m$,useState:function(){return CT(Rp)},useDebugValue:jw,useDeferredValue:function(r){var e=CT(Rp),t=e[0],o=e[1];return k_(function(){var i=Al.transition;Al.transition=1;try{o(r)}finally{Al.transition=i}},[r]),t},useTransition:function(){var r=CT(Rp)[0],e=ec().memoizedState;return[r,e]},useMutableSource:c$,useSyncExternalStore:function(r,e){var t=or,o=ec(),i=e(),l=!Za(o.memoizedState,i);if(l&&(o.memoizedState=i,zs=!0),o=o.queue,k_(d$.bind(null,t,o,r),[r]),o.getSnapshot!==e||l||Xr!==null&&Xr.memoizedState.tag&1){if(t.flags|=2048,ry(9,p$.bind(null,t,o,i,e),void 0,null),Sr===null)throw Error(ot(349));(Zf&30)!==0||h$(t,e,i)}return i},useId:x$,unstable_isNewReconciler:!1},XV={readContext:Il,useCallback:T$,useContext:Il,useEffect:k_,useImperativeHandle:v$,useInsertionEffect:g$,useLayoutEffect:_$,useMemo:E$,useReducer:bT,useRef:m$,useState:function(){return bT(Rp)},useDebugValue:jw,useDeferredValue:function(r){var e=bT(Rp),t=e[0],o=e[1];return k_(function(){var i=Al.transition;Al.transition=1;try{o(r)}finally{Al.transition=i}},[r]),t},useTransition:function(){var r=bT(Rp)[0],e=ec().memoizedState;return[r,e]},useMutableSource:c$,useSyncExternalStore:u$,useId:x$,unstable_isNewReconciler:!1};function Jw(r,e){try{var t="",o=e;do t+=b3(o),o=o.return;while(o);var i=t}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:r,source:e,stack:i}}function Nk(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var jV=typeof WeakMap=="function"?WeakMap:Map;function A$(r,e,t){t=Qu(-1,t),t.tag=3,t.payload={element:null};var o=e.value;return t.callback=function(){UE||(UE=!0,Xk=o),Nk(r,e)},t}function w$(r,e,t){t=Qu(-1,t),t.tag=3;var o=r.type.getDerivedStateFromError;if(typeof o=="function"){var i=e.value;t.payload=function(){return o(i)},t.callback=function(){Nk(r,e)}}var l=r.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){Nk(r,e),typeof o!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function sI(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function lI(r,e,t,o,i){return(r.mode&1)===0?(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qu(-1,1),e.tag=2,Mp(t,e))),t.lanes|=1),r):(r.flags|=65536,r.lanes=i,r)}var M$,$k,R$,B$;M$=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$k=function(){};R$=function(r,e,t,o){var i=r.memoizedProps;if(i!==o){r=e.stateNode,xp(za.current);var l=null;switch(t){case"input":i=ck(r,i),o=ck(r,o),l=[];break;case"select":i=Go({},i,{value:void 0}),o=Go({},o,{value:void 0}),l=[];break;case"textarea":i=pk(r,i),o=pk(r,o),l=[];break;default:typeof i.onClick!="function"&&typeof o.onClick=="function"&&(r.onclick=AE)}fk(t,o);var a;t=null;for(h in i)if(!o.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(a in c)c.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(W_.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in o){var p=o[h];if(c=i!=null?i[h]:void 0,o.hasOwnProperty(h)&&p!==c&&(p!=null||c!=null))if(h==="style")if(c){for(a in c)!c.hasOwnProperty(a)||p&&p.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in p)p.hasOwnProperty(a)&&c[a]!==p[a]&&(t||(t={}),t[a]=p[a])}else t||(l||(l=[]),l.push(h,t)),t=p;else h==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,c=c?c.__html:void 0,p!=null&&c!==p&&(l=l||[]).push(h,p)):h==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(h,""+p):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(W_.hasOwnProperty(h)?(p!=null&&h==="onScroll"&&Eo("scroll",r),l||c===p||(l=[])):(l=l||[]).push(h,p))}t&&(l=l||[]).push("style",t);var h=l;(e.updateQueue=h)&&(e.flags|=4)}};B$=function(r,e,t,o){t!==o&&(e.flags|=4)};function Ig(r,e){if(!Uo)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:o.sibling=null}}function Ai(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,o=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,o|=i.subtreeFlags&14680064,o|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,o|=i.subtreeFlags,o|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=o,r.childLanes=t,e}function JV(r,e,t){var o=e.pendingProps;switch(Uw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ai(e),null;case 1:return Ss(e.type)&&wE(),Ai(e),null;case 3:return o=e.stateNode,Qf(),Co(xs),Co($i),Vw(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Rg(e)?e.flags|=4:o.isDehydrated||(e.flags|=1024)),$k(r,e),Ai(e),null;case 5:Gw(e);var i=xp(ny.current);if(t=e.type,r!==null&&e.stateNode!=null)R$(r,e,t,o,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(ot(166));return Ai(e),null}if(r=xp(za.current),Rg(e)){o=e.stateNode,t=e.type;var l=e.memoizedProps;switch(o[Ua]=e,o[Z_]=l,t){case"dialog":Eo("cancel",o),Eo("close",o);break;case"iframe":case"object":case"embed":Eo("load",o);break;case"video":case"audio":for(r=0;r<d_.length;r++)Eo(d_[r],o);break;case"source":Eo("error",o);break;case"img":case"image":case"link":Eo("error",o),Eo("load",o);break;case"details":Eo("toggle",o);break;case"input":CB(o,l),Eo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!l.multiple},Eo("invalid",o);break;case"textarea":kB(o,l),Eo("invalid",o)}fk(t,l),r=null;for(var a in l)l.hasOwnProperty(a)&&(i=l[a],a==="children"?typeof i=="string"?o.textContent!==i&&(r=["children",i]):typeof i=="number"&&o.textContent!==""+i&&(r=["children",""+i]):W_.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Eo("scroll",o));switch(t){case"input":mT(o),bB(o,l,!0);break;case"textarea":mT(o),AB(o);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(o.onclick=AE)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=fN(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof o.is=="string"?r=a.createElement(t,{is:o.is}):(r=a.createElement(t),t==="select"&&(a=r,o.multiple?a.multiple=!0:o.size&&(a.size=o.size))):r=a.createElementNS(r,t),r[Ua]=e,r[Z_]=o,M$(r,e,!1,!1),e.stateNode=r,a=mk(t,o),t){case"dialog":Eo("cancel",r),Eo("close",r),i=o;break;case"iframe":case"object":case"embed":Eo("load",r),i=o;break;case"video":case"audio":for(i=0;i<d_.length;i++)Eo(d_[i],r);i=o;break;case"source":Eo("error",r),i=o;break;case"img":case"image":case"link":Eo("error",r),Eo("load",r),i=o;break;case"details":Eo("toggle",r),i=o;break;case"input":CB(r,o),i=ck(r,o),Eo("invalid",r);break;case"option":i=o;break;case"select":r._wrapperState={wasMultiple:!!o.multiple},i=Go({},o,{value:void 0}),Eo("invalid",r);break;case"textarea":kB(r,o),i=pk(r,o),Eo("invalid",r);break;default:i=o}fk(t,i);var c=i;for(l in c)if(c.hasOwnProperty(l)){var p=c[l];l==="style"?_N(r,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&mN(r,p)):l==="children"?typeof p=="string"?(t!=="textarea"||p!=="")&&z_(r,p):typeof p=="number"&&z_(r,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(W_.hasOwnProperty(l)?p!=null&&l==="onScroll"&&Eo("scroll",r):p!=null&&Ew(r,l,p,a))}switch(t){case"input":mT(r),bB(r,o,!1);break;case"textarea":mT(r),AB(r);break;case"option":o.value!=null&&r.setAttribute("value",""+ih(o.value));break;case"select":r.multiple=!!o.multiple,l=o.value,l!=null?Lf(r,!!o.multiple,l,!1):o.defaultValue!=null&&Lf(r,!!o.multiple,o.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=AE)}ZN(t,o)&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ai(e),null;case 6:if(r&&e.stateNode!=null)B$(r,e,r.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(ot(166));t=xp(ny.current),xp(za.current),Rg(e)?(o=e.stateNode,t=e.memoizedProps,o[Ua]=e,o.nodeValue!==t&&(e.flags|=4)):(o=(t.nodeType===9?t:t.ownerDocument).createTextNode(o),o[Ua]=e,e.stateNode=o)}return Ai(e),null;case 13:if(Co(Fo),o=e.memoizedState,o!==null&&o.dehydrated!==null){if(o=Rg(e),r===null){if(!o)throw Error(ot(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ot(317));o[Ua]=e}else ey(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return Ai(e),null}return(e.flags&128)!==0?(e.lanes=t,e):(o=o!==null,t=!1,r===null?Rg(e):t=r.memoizedState!==null,o&&!t&&(e.child.flags|=8192,(e.mode&1)!==0&&(r===null||(Fo.current&1)!==0?qr===0&&(qr=3):V$())),e.updateQueue!==null&&(e.flags|=4),Ai(e),null);case 4:return Qf(),$k(r,e),r===null&&Cx(e.stateNode.containerInfo),Ai(e),null;case 10:return $w(e.type._context),Ai(e),null;case 17:return Ss(e.type)&&wE(),Ai(e),null;case 19:if(Co(Fo),l=e.memoizedState,l===null)return Ai(e),null;if(o=(e.flags&128)!==0,a=l.rendering,a===null)if(o)Ig(l,!1);else{if(qr!==0||r!==null&&(r.flags&128)!==0)for(r=e.child;r!==null;){if(a=LE(r),a!==null){for(e.flags|=128,Ig(l,!1),o=a.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=t,t=e.child;t!==null;)l=t,r=o,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=r,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,r=a.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return _o(Fo,Fo.current&1|2),e.child}r=r.sibling}l.tail!==null&&hr()>tm&&(e.flags|=128,o=!0,Ig(l,!1),e.lanes=4194304)}else{if(!o)if(r=LE(a),r!==null){if(e.flags|=128,o=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ig(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Uo)return Ai(e),null}else 2*hr()-l.renderingStartTime>tm&&t!==1073741824&&(e.flags|=128,o=!0,Ig(l,!1),e.lanes=4194304);l.isBackwards?(a.sibling=e.child,e.child=a):(t=l.last,t!==null?t.sibling=a:e.child=a,l.last=a)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=hr(),e.sibling=null,t=Fo.current,_o(Fo,o?t&1|2:t&1),e):(Ai(e),null);case 22:case 23:return eM(),t=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==t&&o.mode!=="unstable-defer-without-hiding"&&e.tag!==23&&(e.flags|=8192),t&&(e.mode&1)!==0?(Hs&1073741824)!==0&&(Ai(e),e.tag!==23&&e.subtreeFlags&6&&o.mode!=="unstable-defer-without-hiding"&&(e.flags|=8192)):Ai(e),null}throw Error(ot(156,e.tag))}var KV=Zc.ReactCurrentOwner,zs=!1;function _s(r,e,t,o){e.child=r===null?l$(e,null,t,o):qf(e,r.child,t,o)}function aI(r,e,t,o,i){t=t.render;var l=e.ref;return Ff(e,i),o=zw(r,e,t,o,l,i),t=Xw(),r!==null&&!zs?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,jc(r,e,i)):(Uo&&t&&Fw(e),e.flags|=1,_s(r,e,o,i),e.child)}function cI(r,e,t,o,i){if(r===null){var l=t.type;return typeof l=="function"&&!tM(l)&&l.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=l,I$(r,e,l,o,i)):(r=Q0(t.type,null,o,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(l=r.child,(r.lanes&i)===0){var a=l.memoizedProps;if(t=t.compare,t=t!==null?t:q_,t(a,o)&&r.ref===e.ref)return jc(r,e,i)}return e.flags|=1,r=lh(l,o),r.ref=e.ref,r.return=e,e.child=r}function I$(r,e,t,o,i){if(r!==null&&q_(r.memoizedProps,o)&&r.ref===e.ref)if(zs=!1,(r.lanes&i)!==0)(r.flags&131072)!==0&&(zs=!0);else return e.lanes=r.lanes,jc(r,e,i);return Fk(r,e,t,o,i)}function Pk(r,e,t){var o=e.pendingProps,i=o.children,l=r!==null?r.memoizedState:null;if(o.mode==="hidden"||o.mode==="unstable-defer-without-hiding")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null},_o(kf,Hs),Hs|=t;else{if((t&1073741824)===0)return r=l!==null?l.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null},e.updateQueue=null,_o(kf,Hs),Hs|=r,null;e.memoizedState={baseLanes:0,cachePool:null},o=l!==null?l.baseLanes:t,_o(kf,Hs),Hs|=o}else l!==null?(o=l.baseLanes|t,e.memoizedState=null):o=t,_o(kf,Hs),Hs|=o;return _s(r,e,i,t),e.child}function O$(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Fk(r,e,t,o,i){var l=Ss(t)?Gp:$i.current;return l=Yf(e,l),Ff(e,i),t=zw(r,e,t,o,l,i),o=Xw(),r!==null&&!zs?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,jc(r,e,i)):(Uo&&o&&Fw(e),e.flags|=1,_s(r,e,t,i),e.child)}function uI(r,e,t,o,i){if(Ss(t)){var l=!0;ME(e)}else l=!1;if(Ff(e,i),e.stateNode===null)r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),o$(e,t,o),Ok(e,t,o,i),o=!0;else if(r===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var p=a.context,h=t.contextType;typeof h=="object"&&h!==null?h=Il(h):(h=Ss(t)?Gp:$i.current,h=Yf(e,h));var f=t.getDerivedStateFromProps,_=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==o||p!==h)&&tI(e,a,o,h),Hu=!1;var m=e.memoizedState;a.state=m,IE(e,o,a,i),p=e.memoizedState,c!==o||m!==p||xs.current||Hu?(typeof f=="function"&&(Ik(e,t,f,o),p=e.memoizedState),(c=Hu||eI(e,t,c,o,m,p,h))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=p),a.props=o,a.state=p,a.context=h,o=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{a=e.stateNode,t$(r,e),c=e.memoizedProps,h=e.type===e.elementType?c:Zl(e.type,c),a.props=h,_=e.pendingProps,m=a.context,p=t.contextType,typeof p=="object"&&p!==null?p=Il(p):(p=Ss(t)?Gp:$i.current,p=Yf(e,p));var v=t.getDerivedStateFromProps;(f=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==_||m!==p)&&tI(e,a,o,p),Hu=!1,m=e.memoizedState,a.state=m,IE(e,o,a,i);var x=e.memoizedState;c!==_||m!==x||xs.current||Hu?(typeof v=="function"&&(Ik(e,t,v,o),x=e.memoizedState),(h=Hu||eI(e,t,h,o,m,x,p)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(o,x,p),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(o,x,p)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===r.memoizedProps&&m===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===r.memoizedProps&&m===r.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=x),a.props=o,a.state=x,a.context=p,o=h):(typeof a.componentDidUpdate!="function"||c===r.memoizedProps&&m===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===r.memoizedProps&&m===r.memoizedState||(e.flags|=1024),o=!1)}return Uk(r,e,t,o,l,i)}function Uk(r,e,t,o,i,l){O$(r,e);var a=(e.flags&128)!==0;if(!o&&!a)return i&&qB(e,t,!1),jc(r,e,l);o=e.stateNode,KV.current=e;var c=a&&typeof t.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,r!==null&&a?(e.child=qf(e,r.child,null,l),e.child=qf(e,null,c,l)):_s(r,e,c,l),e.memoizedState=o.state,i&&qB(e,t,!0),e.child}function D$(r){var e=r.stateNode;e.pendingContext?YB(r,e.pendingContext,e.pendingContext!==e.context):e.context&&YB(r,e.context,!1),Hw(r,e.containerInfo)}var Og={dehydrated:null,treeContext:null,retryLane:0};function Dg(r){return{baseLanes:r,cachePool:null}}function L$(r,e,t){var o=e.pendingProps,i=Fo.current,l=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=r!==null&&r.memoizedState===null?!1:(i&2)!==0),c?(l=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),_o(Fo,i&1),r===null)return Dk(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((e.mode&1)===0?e.lanes=1:r.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(r=o.children,i=o.fallback,l?(r=hI(e,r,i,t),e.child.memoizedState=Dg(t),e.memoizedState=Og,r):typeof o.unstable_expectedLoadTime=="number"?(r=hI(e,r,i,t),e.child.memoizedState=Dg(t),e.memoizedState=Og,e.lanes=4194304,r):Hk(e,r));if(i=r.memoizedState,i!==null){if(c=i.dehydrated,c!==null){if(a)return e.flags&256?(e.flags&=-257,OC(r,e,t)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(l=o.fallback,i=e.mode,o=Ix({mode:"visible",children:o.children},i,0,null),l=Ip(l,i,t,null),l.flags|=2,o.return=e,l.return=e,o.sibling=l,e.child=o,(e.mode&1)!==0&&qf(e,r.child,null,t),e.child.memoizedState=Dg(t),e.memoizedState=Og,l);if((bn&8)!==0||(e.mode&1)===0||c.data==="$!")e=OC(r,e,t);else if(o=(t&r.childLanes)!==0,zs||o){if(o=Sr,o!==null){switch(t&-t){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}o=(l&(o.suspendedLanes|t))!==0?0:l,o!==0&&o!==i.retryLane&&(i.retryLane=o,Ml(r,o,-1))}V$(),e=OC(r,e,t)}else c.data==="$?"?(e.flags|=128,e.child=r.child,e=aW.bind(null,r),c._reactRetry=e,e=null):(t=i.treeContext,ea=wp(c.nextSibling),kl=e,Uo=!0,t!==null&&(El[xl++]=Fc,El[xl++]=Uc,El[xl++]=Vp,Fc=t.id,Uc=t.overflow,Vp=e),e=Hk(e,e.pendingProps.children),e.flags|=4096);return e}return l?(o=dI(r,e,o.children,o.fallback,t),l=e.child,i=r.child.memoizedState,l.memoizedState=i===null?Dg(t):{baseLanes:i.baseLanes|t,cachePool:null},l.childLanes=r.childLanes&~t,e.memoizedState=Og,o):(t=pI(r,e,o.children,t),e.memoizedState=null,t)}return l?(o=dI(r,e,o.children,o.fallback,t),l=e.child,i=r.child.memoizedState,l.memoizedState=i===null?Dg(t):{baseLanes:i.baseLanes|t,cachePool:null},l.childLanes=r.childLanes&~t,e.memoizedState=Og,o):(t=pI(r,e,o.children,t),e.memoizedState=null,t)}function Hk(r,e){return e=Ix({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function hI(r,e,t,o){var i=r.mode,l=r.child;return e={mode:"hidden",children:e},(i&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=e):l=Ix(e,i,0,null),t=Ip(t,i,o,null),l.return=r,t.return=r,l.sibling=t,r.child=l,t}function pI(r,e,t,o){var i=r.child;return r=i.sibling,t=lh(i,{mode:"visible",children:t}),(e.mode&1)===0&&(t.lanes=o),t.return=e,t.sibling=null,r!==null&&(o=e.deletions,o===null?(e.deletions=[r],e.flags|=16):o.push(r)),e.child=t}function dI(r,e,t,o,i){var l=e.mode;r=r.child;var a=r.sibling,c={mode:"hidden",children:t};return(l&1)===0&&e.child!==r?(t=e.child,t.childLanes=0,t.pendingProps=c,e.deletions=null):(t=lh(r,c),t.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=lh(a,o):(o=Ip(o,l,i,null),o.flags|=2),o.return=e,t.return=e,t.sibling=o,e.child=t,o}function OC(r,e,t){return qf(e,r.child,null,t),r=Hk(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function fI(r,e){r.lanes|=e;var t=r.alternate;t!==null&&(t.lanes|=e),Bk(r.return,e)}function DC(r,e,t,o,i){var l=r.memoizedState;l===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:t,tailMode:i}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=o,l.tail=t,l.tailMode=i)}function N$(r,e,t){var o=e.pendingProps,i=o.revealOrder,l=o.tail;if(_s(r,e,o.children,t),o=Fo.current,(o&2)!==0)o=o&1|2,e.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fI(r,t);else if(r.tag===19)fI(r,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}o&=1}if(_o(Fo,o),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&LE(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),DC(e,!1,i,t,l);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&LE(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}DC(e,!0,t,null,l);break;case"together":DC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jc(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),em|=e.lanes,(t&e.childLanes)===0)return null;if(r!==null&&e.child!==r.child)throw Error(ot(153));if(e.child!==null){for(r=e.child,t=lh(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=lh(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function YV(r,e,t){switch(e.tag){case 3:D$(e),ey();break;case 5:a$(e);break;case 1:Ss(e.type)&&ME(e);break;case 4:Hw(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,i=e.memoizedProps.value;_o(RE,o._currentValue),o._currentValue=i;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(_o(Fo,Fo.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?L$(r,e,t):(_o(Fo,Fo.current&1),r=jc(r,e,t),r!==null?r.sibling:null);_o(Fo,Fo.current&1);break;case 19:if(o=(t&e.childLanes)!==0,(r.flags&128)!==0){if(o)return N$(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_o(Fo,Fo.current),o)break;return null;case 22:case 23:return e.lanes=0,Pk(r,e,t)}return jc(r,e,t)}function qV(r){switch(Uw(r),r.tag){case 1:Ss(r.type)&&wE();var e=r.flags;return e&65536?(r.flags=e&-65537|128,r):null;case 3:if(Qf(),Co(xs),Co($i),Vw(),e=r.flags,(e&128)!==0)throw Error(ot(285));return r.flags=e&-65537|128,r;case 5:return Gw(r),null;case 13:if(Co(Fo),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(ot(340));ey()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Co(Fo),null;case 4:return Qf(),null;case 10:return $w(r.type._context),null;case 22:case 23:return eM(),null;case 24:return null;default:return null}}var kT=!1,Sp=!1,QV=typeof WeakSet=="function"?WeakSet:Set,gt=null;function PE(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(o){Ts(r,e,o)}else t.current=null}function Gk(r,e,t){try{t()}catch(o){Ts(r,e,o)}}var mI=!1;function ZV(r,e){if(bk=CE,r=WN(),Dw(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var o=t.getSelection&&t.getSelection();if(o&&o.rangeCount!==0){t=o.anchorNode;var i=o.anchorOffset,l=o.focusNode;o=o.focusOffset;try{t.nodeType,l.nodeType}catch{t=null;break e}var a=0,c=-1,p=-1,h=0,f=0,_=r,m=null;t:for(;;){for(var v;_!==t||i!==0&&_.nodeType!==3||(c=a+i),_!==l||o!==0&&_.nodeType!==3||(p=a+o),_.nodeType===3&&(a+=_.nodeValue.length),(v=_.firstChild)!==null;)m=_,_=v;for(;;){if(_===r)break t;if(m===t&&++h===i&&(c=a),m===l&&++f===o&&(p=a),(v=_.nextSibling)!==null)break;_=m,m=_.parentNode}_=v}t=c===-1||p===-1?null:{start:c,end:p}}else t=null}t=t||{start:0,end:0}}else t=null;for(kk={focusedElem:r,selectionRange:t},CE=!1,gt=e;gt!==null;)if(e=gt,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,gt=r;else for(;gt!==null;){e=gt;try{var x=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,A=x.memoizedState,k=e.stateNode,E=k.getSnapshotBeforeUpdate(e.elementType===e.type?b:Zl(e.type,b),A);k.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var M=e.stateNode.containerInfo;if(M.nodeType===1)M.textContent="";else if(M.nodeType===9){var R=M.body;R!=null&&(R.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(I){Ts(e,e.return,I)}if(r=e.sibling,r!==null){r.return=e.return,gt=r;break}gt=e.return}return x=mI,mI=!1,x}function iy(r,e,t){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var i=o=o.next;do{if((i.tag&r)===r){var l=i.destroy;i.destroy=void 0,l!==void 0&&Gk(e,t,l)}i=i.next}while(i!==o)}}function Mx(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var o=t.create;t.destroy=o()}t=t.next}while(t!==e)}}function Vk(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function gI(r,e,t){if(Wa&&typeof Wa.onCommitFiberUnmount=="function")try{Wa.onCommitFiberUnmount(vx,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:if(r=e.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var o=r=r.next;do{var i=o,l=i.destroy;i=i.tag,l!==void 0&&((i&2)!==0||(i&4)!==0)&&Gk(e,t,l),o=o.next}while(o!==r)}break;case 1:if(PE(e,t),r=e.stateNode,typeof r.componentWillUnmount=="function")try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(a){Ts(e,t,a)}break;case 5:PE(e,t);break;case 4:P$(r,e,t)}}function $$(r){var e=r.alternate;e!==null&&(r.alternate=null,$$(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Ua],delete e[Z_],delete e[Mk],delete e[$V],delete e[PV])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function _I(r){return r.tag===5||r.tag===3||r.tag===4}function yI(r){e:{for(var e=r.return;e!==null;){if(_I(e))break e;e=e.return}throw Error(ot(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var o=!1;break;case 3:e=e.containerInfo,o=!0;break;case 4:e=e.containerInfo,o=!0;break;default:throw Error(ot(161))}t.flags&32&&(z_(e,""),t.flags&=-33);e:t:for(t=r;;){for(;t.sibling===null;){if(t.return===null||_I(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}o?Wk(r,t,e):zk(r,t,e)}function Wk(r,e,t){var o=r.tag;if(o===5||o===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=AE));else if(o!==4&&(r=r.child,r!==null))for(Wk(r,e,t),r=r.sibling;r!==null;)Wk(r,e,t),r=r.sibling}function zk(r,e,t){var o=r.tag;if(o===5||o===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(o!==4&&(r=r.child,r!==null))for(zk(r,e,t),r=r.sibling;r!==null;)zk(r,e,t),r=r.sibling}function P$(r,e,t){for(var o=e,i=!1,l,a;;){if(!i){i=o.return;e:for(;;){if(i===null)throw Error(ot(160));switch(l=i.stateNode,i.tag){case 5:a=!1;break e;case 3:l=l.containerInfo,a=!0;break e;case 4:l=l.containerInfo,a=!0;break e}i=i.return}i=!0}if(o.tag===5||o.tag===6){e:for(var c=r,p=o,h=t,f=p;;)if(gI(c,f,h),f.child!==null&&f.tag!==4)f.child.return=f,f=f.child;else{if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a?(c=l,p=o.stateNode,c.nodeType===8?c.parentNode.removeChild(p):c.removeChild(p)):l.removeChild(o.stateNode)}else if(o.tag===18)a?(c=l,p=o.stateNode,c.nodeType===8?RC(c.parentNode,p):c.nodeType===1&&RC(c,p),K_(c)):RC(l,o.stateNode);else if(o.tag===4){if(o.child!==null){l=o.stateNode.containerInfo,a=!0,o.child.return=o,o=o.child;continue}}else if(gI(r,o,t),o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return,o.tag===4&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function LC(r,e){switch(e.tag){case 0:case 11:case 14:case 15:iy(3,e,e.return),Mx(3,e),iy(5,e,e.return);return;case 1:return;case 5:var t=e.stateNode;if(t!=null){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o;r=e.type;var l=e.updateQueue;if(e.updateQueue=null,l!==null){for(r==="input"&&o.type==="radio"&&o.name!=null&&pN(t,o),mk(r,i),e=mk(r,o),i=0;i<l.length;i+=2){var a=l[i],c=l[i+1];a==="style"?_N(t,c):a==="dangerouslySetInnerHTML"?mN(t,c):a==="children"?z_(t,c):Ew(t,a,c,e)}switch(r){case"input":uk(t,o);break;case"textarea":dN(t,o);break;case"select":r=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!o.multiple,l=o.value,l!=null?Lf(t,!!o.multiple,l,!1):r!==!!o.multiple&&(o.defaultValue!=null?Lf(t,!!o.multiple,o.defaultValue,!0):Lf(t,!!o.multiple,o.multiple?[]:"",!1))}t[Z_]=o}}return;case 6:if(e.stateNode===null)throw Error(ot(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.isDehydrated&&(t.isDehydrated=!1,K_(t.containerInfo));return;case 12:return;case 13:vI(e);return;case 19:vI(e);return;case 17:return}throw Error(ot(163))}function vI(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new QV),e.forEach(function(o){var i=cW.bind(null,r,o);t.has(o)||(t.add(o),o.then(i,i))})}}function eW(r,e){for(gt=e;gt!==null;){e=gt;var t=e.deletions;if(t!==null)for(var o=0;o<t.length;o++){var i=t[o];try{P$(r,i,e);var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(U){Ts(i,e,U)}}if(t=e.child,(e.subtreeFlags&12854)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){e=gt;try{var a=e.flags;if(a&32&&z_(e.stateNode,""),a&512){var c=e.alternate;if(c!==null){var p=c.ref;p!==null&&(typeof p=="function"?p(null):p.current=null)}}if(a&8192)switch(e.tag){case 13:if(e.memoizedState!==null){var h=e.alternate;(h===null||h.memoizedState===null)&&(Qw=hr())}break;case 22:var f=e.memoizedState!==null,_=e.alternate,m=_!==null&&_.memoizedState!==null;t=e;e:{o=t,i=f;for(var v=null,x=o;;){if(x.tag===5){if(v===null){v=x;var b=x.stateNode;if(i){var A=b.style;typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"}else{var k=x.stateNode,E=x.memoizedProps.style,M=E!=null&&E.hasOwnProperty("display")?E.display:null;k.style.display=gN("display",M)}}}else if(x.tag===6)v===null&&(x.stateNode.nodeValue=i?"":x.memoizedProps);else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===o)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;v===x&&(v=null),x=x.return}v===x&&(v=null),x.sibling.return=x.return,x=x.sibling}}if(f&&!m&&(t.mode&1)!==0){gt=t;for(var R=t.child;R!==null;){for(t=gt=R;gt!==null;){o=gt;var I=o.child;switch(o.tag){case 0:case 11:case 14:case 15:iy(4,o,o.return);break;case 1:PE(o,o.return);var L=o.stateNode;if(typeof L.componentWillUnmount=="function"){var F=o.return;try{L.props=o.memoizedProps,L.state=o.memoizedState,L.componentWillUnmount()}catch(U){Ts(o,F,U)}}break;case 5:PE(o,o.return);break;case 22:if(o.memoizedState!==null){EI(t);continue}}I!==null?(I.return=o,gt=I):EI(t)}R=R.sibling}}}switch(a&4102){case 2:yI(e),e.flags&=-3;break;case 6:yI(e),e.flags&=-3,LC(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,LC(e.alternate,e);break;case 4:LC(e.alternate,e)}}catch(U){Ts(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}}}function tW(r,e,t){gt=r,F$(r)}function F$(r,e,t){for(var o=(r.mode&1)!==0;gt!==null;){var i=gt,l=i.child;if(i.tag===22&&o){var a=i.memoizedState!==null||kT;if(!a){var c=i.alternate,p=c!==null&&c.memoizedState!==null||Sp;c=kT;var h=Sp;if(kT=a,(Sp=p)&&!h)for(gt=i;gt!==null;)a=gt,p=a.child,a.tag===22&&a.memoizedState!==null?xI(i):p!==null?(p.return=a,gt=p):xI(i);for(;l!==null;)gt=l,F$(l),l=l.sibling;gt=i,kT=c,Sp=h}TI(r)}else(i.subtreeFlags&8772)!==0&&l!==null?(l.return=i,gt=l):TI(r)}}function TI(r){for(;gt!==null;){var e=gt;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Sp||Mx(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Sp)if(t===null)o.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Zl(e.type,t.memoizedProps);o.componentDidUpdate(i,t.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&ZB(e,l,o);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ZB(e,a,t)}break;case 5:var c=e.stateNode;t===null&&e.flags&4&&(t=c,ZN(e.type,e.memoizedProps)&&t.focus());break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var h=p.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&K_(f)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ot(163))}Sp||e.flags&512&&Vk(e)}catch(_){Ts(e,e.return,_)}}if(e===r){gt=null;break}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}}function EI(r){for(;gt!==null;){var e=gt;if(e===r){gt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,gt=t;break}gt=e.return}}function xI(r){for(;gt!==null;){var e=gt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Mx(4,e)}catch(p){Ts(e,t,p)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var i=e.return;try{o.componentDidMount()}catch(p){Ts(e,i,p)}}var l=e.return;try{Vk(e)}catch(p){Ts(e,l,p)}break;case 5:var a=e.return;try{Vk(e)}catch(p){Ts(e,a,p)}}}catch(p){Ts(e,e.return,p)}if(e===r){gt=null;break}var c=e.sibling;if(c!==null){c.return=e.return,gt=c;break}gt=e.return}}var nW=Math.ceil,FE=Zc.ReactCurrentDispatcher,Kw=Zc.ReactCurrentOwner,wl=Zc.ReactCurrentBatchConfig,bn=0,Sr=null,Ir=null,fi=0,Hs=0,kf=Th(0),qr=0,sy=null,em=0,Rx=0,Yw=0,qw=0,Qw=0,tm=1/0,UE=!1,Xk=null,Zu=null,AT=!1,Wu=null,HE=0,A_=0,jk=null,Y0=-1,q0=0;function Cs(){return(bn&6)!==0?hr():Y0!==-1?Y0:Y0=hr()}function Bp(r){return(r.mode&1)===0?1:(bn&2)!==0&&fi!==0?fi&-fi:FV.transition!==0?(q0===0&&(r=_T,_T<<=1,(_T&4194240)===0&&(_T=64),q0=r),q0):(r=no,r!==0||(r=window.event,r=r===void 0?16:LN(r.type)),r)}function Ml(r,e,t){if(50<A_)throw A_=0,jk=null,Error(ot(185));var o=Bx(r,e);return o===null?null:(Tx(o,e,t),(bn&2)!==0&&o===Sr?Yw|=e:(o===Sr&&((bn&2)===0&&(Rx|=e),qr===4&&Cp(o,fi)),qs(o,t),e===1&&bn===0&&(r.mode&1)===0&&(tm=hr()+500,kx&&Eh())),o)}function Bx(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}function qs(r,e){for(var t=r.callbackNode,o=r.suspendedLanes,i=r.pingedLanes,l=r.expirationTimes,a=r.pendingLanes;0<a;){var c=31-ta(a),p=1<<c,h=l[c];h===-1?((p&o)===0||(p&i)!==0)&&(l[c]=G3(p,e)):h<=e&&(r.expiredLanes|=p),a&=~p}if(o=SE(r,r===Sr?fi:0),o===0)t!==null&&RB(t),r.callbackNode=null,r.callbackPriority=0;else if(e=o&-o,r.callbackPriority!==e){if(t!=null&&RB(t),e===1)r.tag===0?(t=SI.bind(null,r),kx=!0,Tl===null?Tl=[t]:Tl.push(t)):(t=SI.bind(null,r),Tl===null?Tl=[t]:Tl.push(t)),LV(Eh),t=null;else{switch(MN(o)){case 1:t=kw;break;case 4:t=AN;break;case 16:t=xE;break;case 536870912:t=wN;break;default:t=xE}t=J$(t,U$.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function U$(r,e){if(Y0=-1,q0=0,(bn&6)!==0)throw Error(ot(327));var t=r.callbackNode;if(Hf()&&r.callbackNode!==t)return null;var o=SE(r,r===Sr?fi:0);if(o===0)return null;if((o&30)!==0||(o&r.expiredLanes)!==0||e)e=GE(r,o);else{e=o;var i=bn;bn|=2;var l=G$();(Sr!==r||fi!==e)&&(tm=hr()+500,Uf(r,e));do try{iW();break}catch(c){H$(r,c)}while(1);Nw(),FE.current=l,bn=i,Ir!==null?e=0:(Sr=null,fi=0,e=qr)}if(e!==0){if(e===2&&(i=Tk(r),i!==0&&(o=i,e=Jk(r,i))),e===1||(i=r.current.alternate,(o&30)===0&&!oW(i)&&(e=GE(r,o),e===2&&(l=Tk(r),l!==0&&(o=l,e=Jk(r,l))),e===1)))throw t=sy,Uf(r,0),Cp(r,o),qs(r,hr()),t;switch(r.finishedWork=i,r.finishedLanes=o,e){case 0:case 1:throw Error(ot(345));case 2:cp(r);break;case 3:if(Cp(r,o),(o&130023424)===o&&(e=Qw+500-hr(),10<e)){if(SE(r,0)!==0)break;if(i=r.suspendedLanes,(i&o)!==o){Cs(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=wk(cp.bind(null,r),e);break}cp(r);break;case 4:if(Cp(r,o),(o&4194240)===o)break;for(e=r.eventTimes,i=-1;0<o;){var a=31-ta(o);l=1<<a,a=e[a],a>i&&(i=a),o&=~l}if(o=i,o=hr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*nW(o/1960))-o,10<o){r.timeoutHandle=wk(cp.bind(null,r),o);break}cp(r);break;case 5:cp(r);break;default:throw Error(ot(329))}}return qs(r,hr()),r.callbackNode===t?U$.bind(null,r):null}function Jk(r,e){var t=bn;bn|=8,r.isDehydrated&&(r.isDehydrated=!1);for(var o,i=0;50>i&&(o=GE(r,e),o===2&&Yw!==0);i++);return bn=t,o}function oW(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var o=0;o<t.length;o++){var i=t[o],l=i.getSnapshot;i=i.value;try{if(!Za(l(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cp(r,e){for(e&=~qw,e&=~Rx,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-ta(e),o=1<<t;r[t]=-1,e&=~o}}function SI(r){if((bn&6)!==0)throw Error(ot(327));Hf();var e=SE(r,0);if((e&1)===0)return qs(r,hr()),null;var t=GE(r,e);if(r.tag!==0&&t===2){var o=Tk(r);o!==0&&(e=o,t=Jk(r,o))}if(t===1)throw t=sy,Uf(r,0),Cp(r,e),qs(r,hr()),t;return r.finishedWork=r.current.alternate,r.finishedLanes=e,cp(r),qs(r,hr()),null}function Zw(r,e){var t=bn;bn|=1;try{return r(e)}finally{bn=t,bn===0&&(tm=hr()+500,kx&&Eh())}}function Pm(r){Wu!==null&&Wu.tag===0&&(bn&6)===0&&Hf();var e=bn;bn|=1;var t=wl.transition,o=no;try{if(wl.transition=0,no=1,r)return r()}finally{no=o,wl.transition=t,bn=e,(bn&6)===0&&Eh()}}function eM(){Hs=kf.current,Co(kf)}function Uf(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,DV(t)),Ir!==null)for(t=Ir.return;t!==null;){var o=t;switch(Uw(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&wE();break;case 3:Qf(),Co(xs),Co($i),Vw();break;case 5:Gw(o);break;case 4:Qf();break;case 13:Co(Fo);break;case 19:Co(Fo);break;case 10:$w(o.type._context);break;case 22:case 23:eM()}t=t.return}if(Sr=r,Ir=lh(r.current,null),fi=Hs=e,qr=0,sy=null,qw=Yw=Rx=em=0,Ha!==null){for(r=0;r<Ha.length;r++)if(e=Ha[r],t=e.interleaved,t!==null){e.interleaved=null,o=t.next;var i=e.pending;if(i!==null){var l=i.next;i.next=o,t.next=l}e.pending=t}Ha=null}}function H$(r,e){do{var t=Ir;try{if(Nw(),J0.current=$E,NE){for(var o=or.memoizedState;o!==null;){var i=o.queue;i!==null&&(i.pending=null),o=o.next}NE=!1}if(Zf=0,Xr=Di=or=null,b_=!1,oy=0,Kw.current=null,t===null||t.return===null){qr=1,sy=e,Ir=null;break}e:{var l=r,a=t.return,c=t,p=e;if(e=fi,c.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var h=p,f=c,_=f.tag;if((f.mode&1)===0&&(_===0||_===11||_===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=sI(a);if(v!==null){if(v.flags&=-257,lI(v,a,c,l,e),p=void 0,c=v,c.mode&1){var x=l.pingCache;if(x===null?(x=l.pingCache=new jV,p=new Set,x.set(h,p)):(p=x.get(h),p===void 0&&(p=new Set,x.set(h,p))),!p.has(e)){p.add(e);var b=lW.bind(null,l,h,e);h.then(b,b)}}var A=c.updateQueue;if(A===null){var k=new Set;k.add(h),c.updateQueue=k}else A.add(h);break e}else p=Error(ot(411,cN(c)||"A React component"))}else if(Uo&&c.mode&1){var E=sI(a);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),lI(E,a,c,l,e);break e}}qr!==4&&(qr=2),p=Jw(p,c),l=a;do{switch(l.tag){case 3:h=p,l.flags|=65536,e&=-e,l.lanes|=e;var M=A$(l,h,e);QB(l,M);break e;case 1:h=p;var R=l.type,I=l.stateNode;if((l.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Zu===null||!Zu.has(I)))){l.flags|=65536,e&=-e,l.lanes|=e;var L=w$(l,h,e);QB(l,L);break e}}l=l.return}while(l!==null)}z$(t)}catch(F){e=F,Ir===t&&t!==null&&(Ir=t=t.return);continue}break}while(1)}function G$(){var r=FE.current;return FE.current=$E,r===null?$E:r}function V$(){(qr===0||qr===3||qr===2)&&(qr=4),Sr===null||(em&268435455)===0&&(Rx&268435455)===0||Cp(Sr,fi)}function GE(r,e){var t=bn;bn|=2;var o=G$();Sr===r&&fi===e||Uf(r,e);do try{rW();break}catch(i){H$(r,i)}while(1);if(Nw(),bn=t,FE.current=o,Ir!==null)throw Error(ot(261));return Sr=null,fi=0,qr}function rW(){for(;Ir!==null;)W$(Ir)}function iW(){for(;Ir!==null&&!D3();)W$(Ir)}function W$(r){var e=j$(r.alternate,r,Hs);r.memoizedProps=r.pendingProps,e===null?z$(r):Ir=e,Kw.current=null}function z$(r){var e=r;do{var t=e.alternate;if(r=e.return,(e.flags&32768)===0){if(t=JV(t,e,Hs),t!==null){Ir=t;return}}else{if(t=qV(e),t!==null){t.flags&=32767,Ir=t;return}r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null)}if(e=e.sibling,e!==null){Ir=e;return}Ir=e=r}while(e!==null);qr===0&&(qr=5)}function cp(r){var e=no,t=wl.transition;try{wl.transition=0,no=1,sW(r,e)}finally{wl.transition=t,no=e}return null}function sW(r,e){do Hf();while(Wu!==null);if((bn&6)!==0)throw Error(ot(327));var t=r.finishedWork,o=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(ot(177));r.callbackNode=null,r.callbackPriority=0;var i=t.lanes|t.childLanes;if(V3(r,i),r===Sr&&(Ir=Sr=null,fi=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||AT||(AT=!0,J$(xE,function(){return Hf(),null})),i=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||i){i=wl.transition,wl.transition=0;var l=no;no=1;var a=bn;bn|=4,Kw.current=null,ZV(r,t),eW(r,t),MV(kk),CE=!!bk,kk=bk=null,r.current=t,tW(t),L3(),bn=a,no=l,wl.transition=i}else r.current=t;if(AT&&(AT=!1,Wu=r,HE=o),i=r.pendingLanes,i===0&&(Zu=null),P3(t.stateNode),qs(r,hr()),UE)throw UE=!1,r=Xk,Xk=null,r;return(HE&1)!==0&&r.tag!==0&&Hf(),i=r.pendingLanes,(i&1)!==0?r===jk?A_++:(A_=0,jk=r):A_=0,Eh(),null}function Hf(){if(Wu!==null){var r=MN(HE),e=wl.transition,t=no;try{if(wl.transition=0,no=16>r?16:r,Wu===null)var o=!1;else{if(r=Wu,Wu=null,HE=0,(bn&6)!==0)throw Error(ot(331));var i=bn;for(bn|=4,gt=r.current;gt!==null;){var l=gt,a=l.child;if((gt.flags&16)!==0){var c=l.deletions;if(c!==null){for(var p=0;p<c.length;p++){var h=c[p];for(gt=h;gt!==null;){var f=gt;switch(f.tag){case 0:case 11:case 15:iy(8,f,l)}var _=f.child;if(_!==null)_.return=f,gt=_;else for(;gt!==null;){f=gt;var m=f.sibling,v=f.return;if($$(f),f===h){gt=null;break}if(m!==null){m.return=v,gt=m;break}gt=v}}}var x=l.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var A=b.sibling;b.sibling=null,b=A}while(b!==null)}}gt=l}}if((l.subtreeFlags&2064)!==0&&a!==null)a.return=l,gt=a;else e:for(;gt!==null;){if(l=gt,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:iy(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,gt=k;break e}gt=l.return}}var E=r.current;for(gt=E;gt!==null;){a=gt;var M=a.child;if((a.subtreeFlags&2064)!==0&&M!==null)M.return=a,gt=M;else e:for(a=E;gt!==null;){if(c=gt,(c.flags&2048)!==0)try{switch(c.tag){case 0:case 11:case 15:Mx(9,c)}}catch(I){Ts(c,c.return,I)}if(c===a){gt=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,gt=R;break e}gt=c.return}}if(bn=i,Eh(),Wa&&typeof Wa.onPostCommitFiberRoot=="function")try{Wa.onPostCommitFiberRoot(vx,r)}catch{}o=!0}return o}finally{no=t,wl.transition=e}}return!1}function CI(r,e,t){e=Jw(t,e),e=A$(r,e,1),Mp(r,e),e=Cs(),r=Bx(r,1),r!==null&&(Tx(r,1,e),qs(r,e))}function Ts(r,e,t){if(r.tag===3)CI(r,r,t);else for(e=r.return;e!==null;){if(e.tag===3){CI(e,r,t);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Zu===null||!Zu.has(o))){r=Jw(t,r),r=w$(e,r,1),Mp(e,r),r=Cs(),e=Bx(e,1),e!==null&&(Tx(e,1,r),qs(e,r));break}}e=e.return}}function lW(r,e,t){var o=r.pingCache;o!==null&&o.delete(e),e=Cs(),r.pingedLanes|=r.suspendedLanes&t,Sr===r&&(fi&t)===t&&(qr===4||qr===3&&(fi&130023424)===fi&&500>hr()-Qw?Uf(r,0):qw|=t),qs(r,e)}function X$(r,e){e===0&&((r.mode&1)===0?e=1:(e=yT,yT<<=1,(yT&130023424)===0&&(yT=4194304)));var t=Cs();r=Bx(r,e),r!==null&&(Tx(r,e,t),qs(r,t))}function aW(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),X$(r,t)}function cW(r,e){var t=0;switch(r.tag){case 13:var o=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:o=r.stateNode;break;default:throw Error(ot(314))}o!==null&&o.delete(e),X$(r,t)}var j$;j$=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||xs.current)zs=!0;else{if((r.lanes&t)===0&&(e.flags&128)===0)return zs=!1,YV(r,e,t);zs=(r.flags&131072)!==0}else zs=!1,Uo&&(e.flags&1048576)!==0&&r$(e,DE,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps;var i=Yf(e,$i.current);Ff(e,t),i=zw(null,e,o,r,i,t);var l=Xw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ss(o)?(l=!0,ME(e)):l=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pw(e),i.updater=Ax,e.stateNode=i,i._reactInternals=e,Ok(e,o,r,t),e=Uk(null,e,o,!0,l,t)):(e.tag=0,Uo&&l&&Fw(e),_s(null,e,i,t),e=e.child),e;case 16:o=e.elementType;e:{switch(r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,i=o._init,o=i(o._payload),e.type=o,i=e.tag=hW(o),r=Zl(o,r),i){case 0:e=Fk(null,e,o,r,t);break e;case 1:e=uI(null,e,o,r,t);break e;case 11:e=aI(null,e,o,r,t);break e;case 14:e=cI(null,e,o,Zl(o.type,r),t);break e}throw Error(ot(306,o,""))}return e;case 0:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:Zl(o,i),Fk(r,e,o,i,t);case 1:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:Zl(o,i),uI(r,e,o,i,t);case 3:if(D$(e),o=e.updateQueue,r===null||o===null)throw Error(ot(282));if(o=e.pendingProps,i=e.memoizedState.element,t$(r,e),IE(e,o,null,t),l=e.stateNode,o=e.memoizedState.element,o===i)ey(),e=jc(r,e,t);else{if((i=l.isDehydrated)&&(ea=wp(e.stateNode.containerInfo.firstChild),kl=e,i=Uo=!0),i){if(r=l.mutableSourceEagerHydrationData,r!=null)for(i=0;i<r.length;i+=2)l=r[i],l._workInProgressVersionPrimary=r[i+1],j0.push(l);for(t=l$(e,null,o,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else _s(r,e,o,t),ey();e=e.child}return e;case 5:a$(e),r===null&&Dk(e),o=e.type,i=e.pendingProps,l=r!==null?r.memoizedProps:null;var a=i.children;return Ak(o,i)?a=null:l!==null&&Ak(o,l)&&(e.flags|=32),O$(r,e),_s(r,e,a,t),e.child;case 6:return r===null&&Dk(e),null;case 13:return L$(r,e,t);case 4:return Hw(e,e.stateNode.containerInfo),o=e.pendingProps,r===null?e.child=qf(e,null,o,t):_s(r,e,o,t),e.child;case 11:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:Zl(o,i),aI(r,e,o,i,t);case 7:return _s(r,e,e.pendingProps,t),e.child;case 8:return _s(r,e,e.pendingProps.children,t),e.child;case 12:return _s(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(o=e.type._context,i=e.pendingProps,l=e.memoizedProps,a=i.value,_o(RE,o._currentValue),o._currentValue=a,l!==null)if(Za(l.value,a)){if(l.children===i.children&&!xs.current){e=jc(r,e,t);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){a=l.child;for(var p=c.firstContext;p!==null;){if(p.context===o){if(l.tag===1){p=Qu(-1,t&-t),p.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?p.next=p:(p.next=f.next,f.next=p),h.pending=p}}l.lanes|=t,p=l.alternate,p!==null&&(p.lanes|=t),Bk(l.return,t),c.lanes|=t;break}p=p.next}}else if(l.tag===10)a=l.type===e.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(ot(341));a.lanes|=t,c=a.alternate,c!==null&&(c.lanes|=t),Bk(a,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}_s(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps.children,Ff(e,t),i=Il(i),o=o(i),e.flags|=1,_s(r,e,o,t),e.child;case 14:return o=e.type,i=Zl(o,e.pendingProps),i=Zl(o.type,i),cI(r,e,o,i,t);case 15:return I$(r,e,e.type,e.pendingProps,t);case 17:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:Zl(o,i),r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ss(o)?(r=!0,ME(e)):r=!1,Ff(e,t),o$(e,o,i),Ok(e,o,i,t),Uk(null,e,o,!0,r,t);case 19:return N$(r,e,t);case 22:return Pk(r,e,t);case 23:return Pk(r,e,t)}throw Error(ot(156,e.tag))};function J$(r,e){return kN(r,e)}function uW(r,e,t,o){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(r,e,t,o){return new uW(r,e,t,o)}function tM(r){return r=r.prototype,!(!r||!r.isReactComponent)}function hW(r){if(typeof r=="function")return tM(r)?1:0;if(r!=null){if(r=r.$$typeof,r===_x)return 11;if(r===yx)return 14}return 2}function lh(r,e){var t=r.alternate;return t===null?(t=Vs(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Q0(r,e,t,o,i,l){var a=2;if(o=r,typeof r=="function")tM(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Tp:return Ip(t.children,i,l,e);case lN:a=8,i|=4;break;case gx:a=8,i|=8;break;case gE:return r=Vs(12,t,e,i|2),r.elementType=gE,r.lanes=l,r;case _E:return r=Vs(13,t,e,i),r.elementType=_E,r.lanes=l,r;case yE:return r=Vs(19,t,e,i),r.elementType=yE,r.lanes=l,r;case Cw:return Ix(t,i,l,e);case lk:return r=Vs(23,t,e,i),r.elementType=lk,r.lanes=l,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case xw:a=10;break e;case Sw:a=9;break e;case _x:a=11;break e;case yx:a=14;break e;case Lc:a=16,o=null;break e}throw Error(ot(130,r==null?r:typeof r,""))}return e=Vs(a,t,e,i),e.elementType=r,e.type=o,e.lanes=l,e}function Ip(r,e,t,o){return r=Vs(7,r,o,e),r.lanes=t,r}function Ix(r,e,t,o){return r=Vs(22,r,o,e),r.elementType=Cw,r.lanes=t,r}function NC(r,e,t){return r=Vs(6,r,null,e),r.lanes=t,r}function $C(r,e,t){return e=Vs(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function pW(r,e,t,o){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.isDehydrated=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=vC(0),this.expirationTimes=vC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vC(0),this.identifierPrefix=o,this.mutableSourceEagerHydrationData=null}function nM(r,e,t,o,i,l,a){return r=new pW(r,e,t,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vs(3,null,null,e),r.current=i,i.stateNode=r,i.memoizedState={element:null},Pw(i),r}function dW(r,e,t){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vp,key:o==null?null:""+o,children:r,containerInfo:e,implementation:t}}function ly(r,e,t,o){var i=e.current,l=Cs(),a=Bp(i);e:if(t){t=t._reactInternals;t:{if(rd(t)!==t||t.tag!==1)throw Error(ot(170));var c=t;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(Ss(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(ot(171))}if(t.tag===1){var p=t.type;if(Ss(p)){t=e$(t,p,c);break e}}t=c}else t=sh;return e.context===null?e.context=t:e.pendingContext=t,e=Qu(l,a),e.payload={element:r},o=o===void 0?null:o,o!==null&&(e.callback=o),Mp(i,e),r=Ml(i,a,l),r!==null&&X0(r,i,a),a}function PC(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function bI(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function oM(r,e){bI(r,e),(r=r.alternate)&&bI(r,e)}function fW(){return null}function rM(r){this._internalRoot=r}Ox.prototype.render=rM.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(ot(409));ly(r,e,null,null)};Ox.prototype.unmount=rM.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Pm(function(){ly(null,r,null,null)}),e[vh]=null}};function Ox(r){this._internalRoot=r}Ox.prototype.unstable_scheduleHydration=function(r){if(r){var e=IN();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Gu.length&&e!==0&&e<Gu[t].priority;t++);Gu.splice(t,0,r),t===0&&DN(r)}};function K$(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Hy(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function mW(r,e){if(!e)for(var t;t=r.lastChild;)r.removeChild(t);return e=nM(r,0,e,null,!1,!1,""),r[vh]=e.current,Cx(r.nodeType===8?r.parentNode:r),e}function Dx(r,e,t,o,i){var l=t._reactRootContainer;if(l){var a=l;if(typeof i=="function"){var c=i;i=function(){var h=PC(a);c.call(h)}}ly(e,a,r,i)}else{if(a=l=t._reactRootContainer=mW(t,o),typeof i=="function"){var p=i;i=function(){var h=PC(a);p.call(h)}}Pm(function(){ly(e,a,r,i)})}return PC(a)}RN=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.isDehydrated){var t=p_(e.pendingLanes);t!==0&&(Aw(e,t|1),qs(e,hr()),(bn&6)===0&&(tm=hr()+500,Eh()))}break;case 13:var o=Cs();Pm(function(){return Ml(r,1,o)}),oM(r,1)}};ww=function(r){if(r.tag===13){var e=Cs();Ml(r,134217728,e),oM(r,134217728)}};BN=function(r){if(r.tag===13){var e=Cs(),t=Bp(r);Ml(r,t,e),oM(r,t)}};IN=function(){return no};ON=function(r,e){var t=no;try{return no=r,e()}finally{no=t}};_k=function(r,e,t){switch(e){case"input":if(uk(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var o=t[e];if(o!==r&&o.form===r.form){var i=bx(o);if(!i)throw Error(ot(90));hN(o),uk(o,i)}}}break;case"textarea":dN(r,t);break;case"select":e=t.value,e!=null&&Lf(r,!!t.multiple,e,!1)}};TN=Zw;EN=Pm;var gW={Events:[Fy,Ef,bx,yN,vN,Zw]},Lg={findFiberByHostInstance:Ep,bundleType:0,version:"18.0.0-rc.0-fe905f152-20220107",rendererPackageName:"react-dom"},_W={bundleType:Lg.bundleType,version:Lg.version,rendererPackageName:Lg.rendererPackageName,rendererConfig:Lg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zc.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=CN(r),r===null?null:r.stateNode},findFiberByHostInstance:Lg.findFiberByHostInstance||fW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-rc.0-fe905f152-20220107"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var wT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wT.isDisabled&&wT.supportsFiber)try{vx=wT.inject(_W),Wa=wT}catch{}}rl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gW;rl.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K$(e))throw Error(ot(200));return dW(r,e,null,t)};rl.createRoot=function(r,e){if(!Hy(r))throw Error(ot(299));var t=!1,o="";return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix)),e=nM(r,1,!1,null,t,!1,o),r[vh]=e.current,Cx(r.nodeType===8?r.parentNode:r),new rM(e)};rl.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(ot(188)):(r=Object.keys(r).join(","),Error(ot(268,r)));return r=CN(e),r=r===null?null:r.stateNode,r};rl.flushSync=function(r){return Pm(r)};rl.hydrate=function(r,e,t){if(!Hy(e))throw Error(ot(200));return Dx(null,r,e,!0,t)};rl.hydrateRoot=function(r,e,t){if(!K$(r))throw Error(ot(405));var o=t!=null&&t.hydratedSources||null,i=!1,l="";if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix)),t=nM(r,1,!0,t!=null?t:null,i,!1,l),r[vh]=t.current,Cx(r),o)for(r=0;r<o.length;r++)i=o[r],l=i._getVersion,l=l(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,l]:t.mutableSourceEagerHydrationData.push(i,l);return ly(e,t,null,null),new Ox(t)};rl.render=function(r,e,t){if(!Hy(e))throw Error(ot(200));return Dx(null,r,e,!1,t)};rl.unmountComponentAtNode=function(r){if(!Hy(r))throw Error(ot(40));return r._reactRootContainer?(Pm(function(){Dx(null,null,r,!1,function(){r._reactRootContainer=null,r[vh]=null})}),!0):!1};rl.unstable_batchedUpdates=Zw;rl.unstable_renderSubtreeIntoContainer=function(r,e,t,o){if(!Hy(t))throw Error(ot(200));if(r==null||r._reactInternals===void 0)throw Error(ot(38));return Dx(r,e,t,!1,o)};rl.version="18.0.0-rc.0-fe905f152-20220107";function Y$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y$)}catch(r){console.error(r)}}Y$(),mx.exports=rl;var FC=mx.exports;function In(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var yW={};function iM(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:yW}var vW=Object.assign,VE=Object.getOwnPropertyDescriptor,Gc=Object.defineProperty,Gy=Object.prototype,Kk=[];Object.freeze(Kk);var q$={};Object.freeze(q$);var TW=typeof Proxy!="undefined",EW=Object.toString();function Q$(){TW||In("Proxy not available")}function Z$(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var Af=function(){};function sa(r){return typeof r=="function"}function Wp(r){var e=typeof r;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Lx(r){return r!==null&&typeof r=="object"}function ah(r){if(!Lx(r))return!1;var e=Object.getPrototypeOf(r);if(e==null)return!0;var t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t.toString()===EW}function eP(r){var e=r==null?void 0:r.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Nx(r,e,t){Gc(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function tP(r,e,t){Gc(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function xh(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(o){return Lx(o)&&o[t]===!0}}function Fm(r){return r instanceof Map}function Vy(r){return r instanceof Set}var nP=typeof Object.getOwnPropertySymbols!="undefined";function xW(r){var e=Object.keys(r);if(!nP)return e;var t=Object.getOwnPropertySymbols(r);return t.length?[].concat(e,t.filter(function(o){return Gy.propertyIsEnumerable.call(r,o)})):e}var $x=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:nP?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function oP(r){return r===null?null:typeof r=="object"?""+r:r}function Vc(r,e){return Gy.hasOwnProperty.call(r,e)}var SW=Object.getOwnPropertyDescriptors||function(e){var t={};return $x(e).forEach(function(o){t[o]=VE(e,o)}),t};function kI(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function sM(r,e,t){return e&&kI(r.prototype,e),t&&kI(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function nm(){return nm=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},nm.apply(this,arguments)}function rP(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Yk(r,e)}function Yk(r,e){return Yk=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o},Yk(r,e)}function AI(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function CW(r,e){if(!!r){if(typeof r=="string")return wI(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wI(r,e)}}function wI(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=r[t];return o}function wf(r,e){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=CW(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var o=0;return function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ga=Symbol("mobx-stored-annotations");function Xa(r){function e(t,o){Wy(t,o,r)}return Object.assign(e,r)}function Wy(r,e,t){Vc(r,Ga)||Nx(r,Ga,nm({},r[Ga])),OW(t)||(r[Ga][e]=t)}function bW(r){return Vc(r,Ga)||Nx(r,Ga,nm({},r[Ga])),r[Ga]}var Yt=Symbol("mobx administration"),zy=function(){function r(t){t===void 0&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Hn.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=r.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(o){return o()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(o){return o()})},e.reportObserved=function(){return CP(this)},e.reportChanged=function(){Xs(),bP(this),js()},e.toString=function(){return this.name_},r}(),lM=xh("Atom",zy);function aM(r,e,t){e===void 0&&(e=Af),t===void 0&&(t=Af);var o=new zy(r);return e!==Af&&Oz(o,e),t!==Af&&IP(o,t),o}function kW(r,e){return r===e}function AW(r,e){return fM(r,e)}function wW(r,e){return fM(r,e,1)}function MW(r,e){return Object.is?Object.is(r,e):r===e?r!==0||1/r===1/e:r!==r&&e!==e}var WE={identity:kW,structural:AW,default:MW,shallow:wW};function om(r,e,t){return hM(r)?r:Array.isArray(r)?Jr.array(r,{name:t}):ah(r)?Jr.object(r,void 0,{name:t}):Fm(r)?Jr.map(r,{name:t}):Vy(r)?Jr.set(r,{name:t}):typeof r=="function"&&!uM(r)&&!JE(r)?eP(r)?uy(r):cy(t,r):r}function RW(r,e,t){if(r==null||sm(r)||Qy(r)||Ch(r)||id(r))return r;if(Array.isArray(r))return Jr.array(r,{name:t,deep:!1});if(ah(r))return Jr.object(r,void 0,{name:t,deep:!1});if(Fm(r))return Jr.map(r,{name:t,deep:!1});if(Vy(r))return Jr.set(r,{name:t,deep:!1})}function Px(r){return r}function BW(r,e){return fM(r,e)?e:r}var IW="override";function OW(r){return r.annotationType_===IW}function Xy(r,e){return{annotationType_:r,options_:e,make_:DW,extend_:LW}}function DW(r,e,t,o){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,e,t,!1)===null?0:1;if(o===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if(uM(t.value))return 1;var l=iP(r,this,e,t,!1);return Gc(o,e,l),2}function LW(r,e,t,o){var i=iP(r,this,e,t);return r.defineProperty_(e,i,o)}function NW(r,e,t,o){e.annotationType_,o.value}function iP(r,e,t,o,i){var l,a,c,p,h,f,_;i===void 0&&(i=ut.safeDescriptors),NW(r,e,t,o);var m=o.value;if((l=e.options_)!=null&&l.bound){var v;m=m.bind((v=r.proxy_)!=null?v:r.target_)}return{value:rm((a=(c=e.options_)==null?void 0:c.name)!=null?a:t.toString(),m,(p=(h=e.options_)==null?void 0:h.autoAction)!=null?p:!1,(f=e.options_)!=null&&f.bound?(_=r.proxy_)!=null?_:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function sP(r,e){return{annotationType_:r,options_:e,make_:$W,extend_:PW}}function $W(r,e,t,o){var i;if(o===r.target_)return this.extend_(r,e,t,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Vc(r.target_,e)||!JE(r.target_[e]))&&this.extend_(r,e,t,!1)===null)return 0;if(JE(t.value))return 1;var l=lP(r,this,e,t,!1,!1);return Gc(o,e,l),2}function PW(r,e,t,o){var i,l=lP(r,this,e,t,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(e,l,o)}function FW(r,e,t,o){e.annotationType_,o.value}function lP(r,e,t,o,i,l){l===void 0&&(l=ut.safeDescriptors),FW(r,e,t,o);var a=o.value;if(JE(a)||(a=uy(a)),i){var c;a=a.bind((c=r.proxy_)!=null?c:r.target_),a.isMobXFlow=!0}return{value:a,configurable:l?r.isPlainObject_:!0,enumerable:!1,writable:!l}}function cM(r,e){return{annotationType_:r,options_:e,make_:UW,extend_:HW}}function UW(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function HW(r,e,t,o){return GW(r,this,e,t),r.defineComputedProperty_(e,nm({},this.options_,{get:t.get,set:t.set}),o)}function GW(r,e,t,o){e.annotationType_,o.get}function Fx(r,e){return{annotationType_:r,options_:e,make_:VW,extend_:WW}}function VW(r,e,t){return this.extend_(r,e,t,!1)===null?0:1}function WW(r,e,t,o){var i,l;return zW(r,this),r.defineObservableProperty_(e,t.value,(i=(l=this.options_)==null?void 0:l.enhancer)!=null?i:om,o)}function zW(r,e,t,o){e.annotationType_}var XW="true",jW=aP();function aP(r){return{annotationType_:XW,options_:r,make_:JW,extend_:KW}}function JW(r,e,t,o){var i,l;if(t.get)return Ux.make_(r,e,t,o);if(t.set){var a=rm(e.toString(),t.set);return o===r.target_?r.defineProperty_(e,{configurable:ut.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(Gc(o,e,{configurable:!0,set:a}),2)}if(o!==r.target_&&typeof t.value=="function"){var c;if(eP(t.value)){var p,h=(p=this.options_)!=null&&p.autoBind?uy.bound:uy;return h.make_(r,e,t,o)}var f=(c=this.options_)!=null&&c.autoBind?cy.bound:cy;return f.make_(r,e,t,o)}var _=((i=this.options_)==null?void 0:i.deep)===!1?Jr.ref:Jr;if(typeof t.value=="function"&&(l=this.options_)!=null&&l.autoBind){var m;t.value=t.value.bind((m=r.proxy_)!=null?m:r.target_)}return _.make_(r,e,t,o)}function KW(r,e,t,o){var i,l;if(t.get)return Ux.extend_(r,e,t,o);if(t.set)return r.defineProperty_(e,{configurable:ut.safeDescriptors?r.isPlainObject_:!0,set:rm(e.toString(),t.set)},o);if(typeof t.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;t.value=t.value.bind((a=r.proxy_)!=null?a:r.target_)}var c=((l=this.options_)==null?void 0:l.deep)===!1?Jr.ref:Jr;return c.extend_(r,e,t,o)}var YW="observable",qW="observable.ref",QW="observable.shallow",ZW="observable.struct",cP={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(cP);function MT(r){return r||cP}var uP=Fx(YW),ez=Fx(qW,{enhancer:Px}),tz=Fx(QW,{enhancer:RW}),nz=Fx(ZW,{enhancer:BW}),hP=Xa(uP);function RT(r){return r.deep===!0?om:r.deep===!1?Px:rz(r.defaultDecorator)}function oz(r){var e;return r?(e=r.defaultDecorator)!=null?e:aP(r):void 0}function rz(r){var e,t;return r&&(e=(t=r.options_)==null?void 0:t.enhancer)!=null?e:om}function pP(r,e,t){if(Wp(e)){Wy(r,e,uP);return}return hM(r)?r:ah(r)?Jr.object(r,e,t):Array.isArray(r)?Jr.array(r,e):Fm(r)?Jr.map(r,e):Vy(r)?Jr.set(r,e):typeof r=="object"&&r!==null?r:Jr.box(r,e)}Object.assign(pP,hP);var iz={box:function(e,t){var o=MT(t);return new Op(e,RT(o),o.name,!0,o.equals)},array:function(e,t){var o=MT(t);return(ut.useProxies===!1||o.proxy===!1?s4:qz)(e,RT(o),o.name)},map:function(e,t){var o=MT(t);return new FP(e,RT(o),o.name)},set:function(e,t){var o=MT(t);return new GP(e,RT(o),o.name)},object:function(e,t,o){return $z(ut.useProxies===!1||(o==null?void 0:o.proxy)===!1?Hx({},o):jz({},o),e,t)},ref:Xa(ez),shallow:Xa(tz),deep:hP,struct:Xa(nz)},Jr=vW(pP,iz),dP="computed",sz="computed.struct",fP=cM(dP),lz=cM(sz,{equals:WE.structural}),Ux=function(e,t){if(Wp(t))return Wy(e,t,fP);if(ah(e))return Xa(cM(dP,e));var o=ah(t)?t:{};return o.get=e,o.name||(o.name=e.name||""),new ay(o)};Object.assign(Ux,fP);Ux.struct=Xa(lz);var MI,RI,zE=0,az=1,cz=(MI=(RI=VE(function(){},"name"))==null?void 0:RI.configurable)!=null?MI:!1,BI={value:"action",configurable:!0,writable:!1,enumerable:!1};function rm(r,e,t,o){t===void 0&&(t=!1);function i(){return uz(r,t,e,o||this,arguments)}return i.isMobxAction=!0,cz&&(BI.value=r,Object.defineProperty(i,"name",BI)),i}function uz(r,e,t,o,i){var l=hz(r,e);try{return t.apply(o,i)}catch(a){throw l.error_=a,a}finally{pz(l)}}function hz(r,e,t,o){var i=!1,l=0,a=ut.trackingDerivation,c=!e||!a;Xs();var p=ut.allowStateChanges;c&&(Um(),p=jy(!0));var h=Gf(!0),f={runAsAction_:c,prevDerivation_:a,prevAllowStateChanges_:p,prevAllowStateReads_:h,notifySpy_:i,startTime_:l,actionId_:az++,parentActionId_:zE};return zE=f.actionId_,f}function pz(r){zE!==r.actionId_&&In(30),zE=r.parentActionId_,r.error_!==void 0&&(ut.suppressReactionErrors=!0),Jy(r.prevAllowStateChanges_),th(r.prevAllowStateReads_),js(),r.runAsAction_&&eh(r.prevDerivation_),ut.suppressReactionErrors=!1}function mP(r,e){var t=jy(r);try{return e()}finally{Jy(t)}}function jy(r){var e=ut.allowStateChanges;return ut.allowStateChanges=r,e}function Jy(r){ut.allowStateChanges=r}var gP;gP=Symbol.toPrimitive;var Op=function(r,e){rP(t,r);function t(i,l,a,c,p){var h;return a===void 0&&(a="ObservableValue"),p===void 0&&(p=WE.default),h=r.call(this,a)||this,h.enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=l,h.name_=a,h.equals=p,h.value_=l(i,void 0,a),h}var o=t.prototype;return o.dehanceValue=function(l){return this.dehancer!==void 0?this.dehancer(l):l},o.set=function(l){this.value_,l=this.prepareNewValue_(l),l!==ut.UNCHANGED&&this.setNewValue_(l)},o.prepareNewValue_=function(l){if(Cl(this)){var a=bl(this,{object:this,type:ja,newValue:l});if(!a)return ut.UNCHANGED;l=a.newValue}return l=this.enhancer(l,this.value_,this.name_),this.equals(this.value_,l)?ut.UNCHANGED:l},o.setNewValue_=function(l){var a=this.value_;this.value_=l,this.reportChanged(),na(this)&&oa(this,{type:ja,object:this,newValue:l,oldValue:a})},o.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},o.intercept_=function(l){return Yy(this,l)},o.observe_=function(l,a){return a&&l({observableKind:"value",debugObjectName:this.name_,object:this,type:ja,newValue:this.value_,oldValue:void 0}),qy(this,l)},o.raw=function(){return this.value_},o.toJSON=function(){return this.get()},o.toString=function(){return this.name_+"["+this.value_+"]"},o.valueOf=function(){return oP(this.get())},o[e]=function(){return this.valueOf()},t}(zy,gP),dz=xh("ObservableValue",Op),_P;_P=Symbol.toPrimitive;var ay=function(r){function e(o){this.dependenciesState_=Hn.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Hn.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new XE(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Dp.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,o.get||In(31),this.derivation=o.get,this.name_=o.name||"ComputedValue",o.set&&(this.setter_=rm("ComputedValue-setter",o.set)),this.equals_=o.equals||(o.compareStructural||o.struct?WE.structural:WE.default),this.scope_=o.context,this.requiresReaction_=o.requiresReaction,this.keepAlive_=!!o.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){yz(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},t.get=function(){if(this.isComputing_&&In(32,this.name_,this.derivation),ut.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)qk(this)&&(this.warnAboutUntrackedRead_(),Xs(),this.value_=this.computeValue_(!1),js());else if(CP(this),qk(this)){var i=ut.trackingContext;this.keepAlive_&&!i&&(ut.trackingContext=this),this.trackAndCompute()&&_z(this),ut.trackingContext=i}var l=this.value_;if(Z0(l))throw l.cause;return l},t.set=function(i){if(this.setter_){this.isRunningSetter_&&In(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,i)}finally{this.isRunningSetter_=!1}}else In(34,this.name_)},t.trackAndCompute=function(){var i=this.value_,l=this.dependenciesState_===Hn.NOT_TRACKING_,a=this.computeValue_(!0),c=l||Z0(i)||Z0(a)||!this.equals_(i,a);return c&&(this.value_=a),c},t.computeValue_=function(i){this.isComputing_=!0;var l=jy(!1),a;if(i)a=yP(this,this.derivation,this.scope_);else if(ut.disableErrorBoundaries===!0)a=this.derivation.call(this.scope_);else try{a=this.derivation.call(this.scope_)}catch(c){a=new XE(c)}return Jy(l),this.isComputing_=!1,a},t.suspend_=function(){this.keepAlive_||(Qk(this),this.value_=void 0)},t.observe_=function(i,l){var a=this,c=!0,p=void 0;return wz(function(){var h=a.get();if(!c||l){var f=Um();i({observableKind:"computed",debugObjectName:a.name_,type:ja,object:a,newValue:h,oldValue:p}),eh(f)}c=!1,p=h})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return oP(this.get())},t[r]=function(){return this.valueOf()},e}(_P),Ky=xh("ComputedValue",ay),Hn;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(Hn||(Hn={}));var Dp;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Dp||(Dp={}));var XE=function(e){this.cause=void 0,this.cause=e};function Z0(r){return r instanceof XE}function qk(r){switch(r.dependenciesState_){case Hn.UP_TO_DATE_:return!1;case Hn.NOT_TRACKING_:case Hn.STALE_:return!0;case Hn.POSSIBLY_STALE_:{for(var e=Gf(!0),t=Um(),o=r.observing_,i=o.length,l=0;l<i;l++){var a=o[l];if(Ky(a)){if(ut.disableErrorBoundaries)a.get();else try{a.get()}catch{return eh(t),th(e),!0}if(r.dependenciesState_===Hn.STALE_)return eh(t),th(e),!0}}return TP(r),eh(t),th(e),!1}}}function yP(r,e,t){var o=Gf(!0);TP(r),r.newObserving_=new Array(r.observing_.length+100),r.unboundDepsCount_=0,r.runId_=++ut.runId;var i=ut.trackingDerivation;ut.trackingDerivation=r,ut.inBatch++;var l;if(ut.disableErrorBoundaries===!0)l=e.call(t);else try{l=e.call(t)}catch(a){l=new XE(a)}return ut.inBatch--,ut.trackingDerivation=i,fz(r),th(o),l}function fz(r){for(var e=r.observing_,t=r.observing_=r.newObserving_,o=Hn.UP_TO_DATE_,i=0,l=r.unboundDepsCount_,a=0;a<l;a++){var c=t[a];c.diffValue_===0&&(c.diffValue_=1,i!==a&&(t[i]=c),i++),c.dependenciesState_>o&&(o=c.dependenciesState_)}for(t.length=i,r.newObserving_=null,l=e.length;l--;){var p=e[l];p.diffValue_===0&&xP(p,r),p.diffValue_=0}for(;i--;){var h=t[i];h.diffValue_===1&&(h.diffValue_=0,gz(h,r))}o!==Hn.UP_TO_DATE_&&(r.dependenciesState_=o,r.onBecomeStale_())}function Qk(r){var e=r.observing_;r.observing_=[];for(var t=e.length;t--;)xP(e[t],r);r.dependenciesState_=Hn.NOT_TRACKING_}function vP(r){var e=Um();try{return r()}finally{eh(e)}}function Um(){var r=ut.trackingDerivation;return ut.trackingDerivation=null,r}function eh(r){ut.trackingDerivation=r}function Gf(r){var e=ut.allowStateReads;return ut.allowStateReads=r,e}function th(r){ut.allowStateReads=r}function TP(r){if(r.dependenciesState_!==Hn.UP_TO_DATE_){r.dependenciesState_=Hn.UP_TO_DATE_;for(var e=r.observing_,t=e.length;t--;)e[t].lowestObserverState_=Hn.UP_TO_DATE_}}var eE=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},tE=!0,EP=!1,ut=function(){var r=iM();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(tE=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new eE().version&&(tE=!1),tE?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new eE):(setTimeout(function(){EP||In(35)},1),new eE)}();function mz(){if((ut.pendingReactions.length||ut.inBatch||ut.isRunningReactions)&&In(36),EP=!0,tE){var r=iM();--r.__mobxInstanceCount===0&&(r.__mobxGlobals=void 0),ut=new eE}}function gz(r,e){r.observers_.add(e),r.lowestObserverState_>e.dependenciesState_&&(r.lowestObserverState_=e.dependenciesState_)}function xP(r,e){r.observers_.delete(e),r.observers_.size===0&&SP(r)}function SP(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,ut.pendingUnobservations.push(r))}function Xs(){ut.inBatch++}function js(){if(--ut.inBatch===0){kP();for(var r=ut.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation_=!1,t.observers_.size===0&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof ay&&t.suspend_())}ut.pendingUnobservations=[]}}function CP(r){var e=ut.trackingDerivation;return e!==null?(e.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=r,!r.isBeingObserved_&&ut.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),!0):(r.observers_.size===0&&ut.inBatch>0&&SP(r),!1)}function bP(r){r.lowestObserverState_!==Hn.STALE_&&(r.lowestObserverState_=Hn.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===Hn.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Hn.STALE_}))}function _z(r){r.lowestObserverState_!==Hn.STALE_&&(r.lowestObserverState_=Hn.STALE_,r.observers_.forEach(function(e){e.dependenciesState_===Hn.POSSIBLY_STALE_?e.dependenciesState_=Hn.STALE_:e.dependenciesState_===Hn.UP_TO_DATE_&&(r.lowestObserverState_=Hn.UP_TO_DATE_)}))}function yz(r){r.lowestObserverState_===Hn.UP_TO_DATE_&&(r.lowestObserverState_=Hn.POSSIBLY_STALE_,r.observers_.forEach(function(e){e.dependenciesState_===Hn.UP_TO_DATE_&&(e.dependenciesState_=Hn.POSSIBLY_STALE_,e.onBecomeStale_())}))}var im=function(){function r(t,o,i,l){t===void 0&&(t="Reaction"),l===void 0&&(l=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Hn.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Dp.NONE,this.name_=t,this.onInvalidate_=o,this.errorHandler_=i,this.requiresObservable_=l}var e=r.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ut.pendingReactions.push(this),kP())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Xs(),this.isScheduled_=!1;var o=ut.trackingContext;if(ut.trackingContext=this,qk(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}ut.trackingContext=o,js()}},e.track=function(o){if(!this.isDisposed_){Xs(),this.isRunning_=!0;var i=ut.trackingContext;ut.trackingContext=this;var l=yP(this,o,void 0);ut.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Qk(this),Z0(l)&&this.reportExceptionInDerivation_(l.cause),js()}},e.reportExceptionInDerivation_=function(o){var i=this;if(this.errorHandler_){this.errorHandler_(o,this);return}if(ut.disableErrorBoundaries)throw o;var l="[mobx] uncaught error in '"+this+"'";ut.suppressReactionErrors||console.error(l,o),ut.globalReactionErrorHandlers.forEach(function(a){return a(o,i)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Xs(),Qk(this),js()))},e.getDisposer_=function(){var o=this.dispose.bind(this);return o[Yt]=this,o},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(o){o===void 0&&(o=!1),Wz(this,o)},r}(),vz=100,Zk=function(e){return e()};function kP(){ut.inBatch>0||ut.isRunningReactions||Zk(Tz)}function Tz(){ut.isRunningReactions=!0;for(var r=ut.pendingReactions,e=0;r.length>0;){++e===vz&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var t=r.splice(0),o=0,i=t.length;o<i;o++)t[o].runReaction_()}ut.isRunningReactions=!1}var jE=xh("Reaction",im);function Ez(r){var e=Zk;Zk=function(o){return r(function(){return e(o)})}}function w_(){return!1}function xz(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var AP="action",Sz="action.bound",wP="autoAction",Cz="autoAction.bound",bz="<unnamed action>",MP=Xy(AP),kz=Xy(Sz,{bound:!0}),RP=Xy(wP,{autoAction:!0}),Az=Xy(Cz,{autoAction:!0,bound:!0});function BP(r){var e=function(o,i){if(sa(o))return rm(o.name||bz,o,r);if(sa(i))return rm(o,i,r);if(Wp(i))return Wy(o,i,r?RP:MP);if(Wp(o))return Xa(Xy(r?wP:AP,{name:o,autoAction:r}))};return e}var Mf=BP(!1);Object.assign(Mf,MP);var cy=BP(!0);Object.assign(cy,RP);Mf.bound=Xa(kz);cy.bound=Xa(Az);function uM(r){return sa(r)&&r.isMobxAction===!0}function wz(r,e){var t,o;e===void 0&&(e=q$);var i=(t=(o=e)==null?void 0:o.name)!=null?t:"Autorun",l=!e.scheduler&&!e.delay,a;if(l)a=new im(i,function(){this.track(h)},e.onError,e.requiresObservable);else{var c=Rz(e),p=!1;a=new im(i,function(){p||(p=!0,c(function(){p=!1,a.isDisposed_||a.track(h)}))},e.onError,e.requiresObservable)}function h(){r(a)}return a.schedule_(),a.getDisposer_()}var Mz=function(e){return e()};function Rz(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:Mz}var Bz="onBO",Iz="onBUO";function Oz(r,e,t){return OP(Bz,r,e,t)}function IP(r,e,t){return OP(Iz,r,e,t)}function OP(r,e,t,o){var i=typeof o=="function"?ch(e,t):ch(e),l=sa(o)?o:t,a=r+"L";return i[a]?i[a].add(l):i[a]=new Set([l]),function(){var c=i[a];c&&(c.delete(l),c.size===0&&delete i[a])}}var Dz="never",BT="always",Lz="observed";function Nz(r){r.isolateGlobalState===!0&&mz();var e=r.useProxies,t=r.enforceActions;if(e!==void 0&&(ut.useProxies=e===BT?!0:e===Dz?!1:typeof Proxy!="undefined"),e==="ifavailable"&&(ut.verifyProxies=!0),t!==void 0){var o=t===BT?BT:t===Lz;ut.enforceActions=o,ut.allowStateChanges=!(o===!0||o===BT)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in r&&(ut[i]=!!r[i])}),ut.allowStateReads=!ut.observableRequiresReaction,r.reactionScheduler&&Ez(r.reactionScheduler)}function $z(r,e,t,o){var i=SW(e),l=Hx(r,o)[Yt];Xs();try{$x(i).forEach(function(a){l.extend_(a,i[a],t&&a in t?t[a]:!0)})}finally{js()}return r}function Pz(r,e){return DP(ch(r,e))}function DP(r){var e={name:r.name_};return r.observing_&&r.observing_.length>0&&(e.dependencies=Fz(r.observing_).map(DP)),e}function Fz(r){return Array.from(new Set(r))}var Uz=0;function LP(){this.message="FLOW_CANCELLED"}LP.prototype=Object.create(Error.prototype);var II=sP("flow"),Hz=sP("flow.bound",{bound:!0}),uy=Object.assign(function(e,t){if(Wp(t))return Wy(e,t,II);var o=e,i=o.name||"<unnamed flow>",l=function(){var c=this,p=arguments,h=++Uz,f=Mf(i+" - runid: "+h+" - init",o).apply(c,p),_,m=void 0,v=new Promise(function(x,b){var A=0;_=b;function k(R){m=void 0;var I;try{I=Mf(i+" - runid: "+h+" - yield "+A++,f.next).call(f,R)}catch(L){return b(L)}M(I)}function E(R){m=void 0;var I;try{I=Mf(i+" - runid: "+h+" - yield "+A++,f.throw).call(f,R)}catch(L){return b(L)}M(I)}function M(R){if(sa(R==null?void 0:R.then)){R.then(M,b);return}return R.done?x(R.value):(m=Promise.resolve(R.value),m.then(k,E))}k(void 0)});return v.cancel=Mf(i+" - runid: "+h+" - cancel",function(){try{m&&OI(m);var x=f.return(void 0),b=Promise.resolve(x.value);b.then(Af,Af),OI(b),_(new LP)}catch(A){_(A)}}),v};return l.isMobXFlow=!0,l},II);uy.bound=Xa(Hz);function OI(r){sa(r.cancel)&&r.cancel()}function JE(r){return(r==null?void 0:r.isMobXFlow)===!0}function Gz(r,e){return r?e!==void 0?sm(r)?r[Yt].values_.has(e):!1:sm(r)||!!r[Yt]||lM(r)||jE(r)||Ky(r):!1}function hM(r){return Gz(r)}function Vz(r){if(sm(r))return r[Yt].ownKeys_();In(38)}function IT(r,e,t){return r.set(e,t),t}function mf(r,e){if(r==null||typeof r!="object"||r instanceof Date||!hM(r))return r;if(dz(r)||Ky(r))return mf(r.get(),e);if(e.has(r))return e.get(r);if(Qy(r)){var t=IT(e,r,new Array(r.length));return r.forEach(function(a,c){t[c]=mf(a,e)}),t}if(id(r)){var o=IT(e,r,new Set);return r.forEach(function(a){o.add(mf(a,e))}),o}if(Ch(r)){var i=IT(e,r,new Map);return r.forEach(function(a,c){i.set(c,mf(a,e))}),i}else{var l=IT(e,r,{});return Vz(r).forEach(function(a){Gy.propertyIsEnumerable.call(r,a)&&(l[a]=mf(r[a],e))}),l}}function Bhe(r,e){return mf(r,new Map)}function Wz(){In("trace() is not available in production builds");for(var r=!1,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];typeof t[t.length-1]=="boolean"&&(r=t.pop());var i=zz(t);if(!i)return In("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===Dp.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=r?Dp.BREAK:Dp.LOG}function zz(r){switch(r.length){case 0:return ut.trackingDerivation;case 1:return ch(r[0]);case 2:return ch(r[0],r[1])}}function $c(r,e){e===void 0&&(e=void 0),Xs();try{return r.apply(e)}finally{js()}}function Ld(r){return r[Yt]}var Xz={has:function(e,t){return Ld(e).has_(t)},get:function(e,t){return Ld(e).get_(t)},set:function(e,t,o){var i;return Wp(t)?(i=Ld(e).set_(t,o,!0))!=null?i:!0:!1},deleteProperty:function(e,t){var o;return Wp(t)?(o=Ld(e).delete_(t,!0))!=null?o:!0:!1},defineProperty:function(e,t,o){var i;return(i=Ld(e).defineProperty_(t,o))!=null?i:!0},ownKeys:function(e){return Ld(e).ownKeys_()},preventExtensions:function(e){In(13)}};function jz(r,e){var t,o;return Q$(),r=Hx(r,e),(o=(t=r[Yt]).proxy_)!=null?o:t.proxy_=new Proxy(r,Xz)}function Cl(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Yy(r,e){var t=r.interceptors_||(r.interceptors_=[]);return t.push(e),Z$(function(){var o=t.indexOf(e);o!==-1&&t.splice(o,1)})}function bl(r,e){var t=Um();try{for(var o=[].concat(r.interceptors_||[]),i=0,l=o.length;i<l&&(e=o[i](e),e&&!e.type&&In(14),!!e);i++);return e}finally{eh(t)}}function na(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function qy(r,e){var t=r.changeListeners_||(r.changeListeners_=[]);return t.push(e),Z$(function(){var o=t.indexOf(e);o!==-1&&t.splice(o,1)})}function oa(r,e){var t=Um(),o=r.changeListeners_;if(!!o){o=o.slice();for(var i=0,l=o.length;i<l;i++)o[i](e);eh(t)}}function Jz(r,e,t){var o=Hx(r,t)[Yt];Xs();try{var i;(i=e)!=null||(e=bW(r)),$x(e).forEach(function(l){return o.make_(l,e[l])})}finally{js()}return r}var DI="splice",ja="update",Kz=1e4,Yz={get:function(e,t){var o=e[Yt];return t===Yt?o:t==="length"?o.getArrayLength_():typeof t=="string"&&!isNaN(t)?o.get_(parseInt(t)):Vc(KE,t)?KE[t]:e[t]},set:function(e,t,o){var i=e[Yt];return t==="length"&&i.setArrayLength_(o),typeof t=="symbol"||isNaN(t)?e[t]=o:i.set_(parseInt(t),o),!0},preventExtensions:function(){In(15)}},pM=function(){function r(t,o,i,l){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=l,this.atom_=new zy(t),this.enhancer_=function(a,c){return o(a,c,"ObservableArray[..]")}}var e=r.prototype;return e.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},e.dehanceValues_=function(o){return this.dehancer!==void 0&&o.length>0?o.map(this.dehancer):o},e.intercept_=function(o){return Yy(this,o)},e.observe_=function(o,i){return i===void 0&&(i=!1),i&&o({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),qy(this,o)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(o){(typeof o!="number"||isNaN(o)||o<0)&&In("Out of range: "+o);var i=this.values_.length;if(o!==i)if(o>i){for(var l=new Array(o-i),a=0;a<o-i;a++)l[a]=void 0;this.spliceWithArray_(i,0,l)}else this.spliceWithArray_(o,i-o)},e.updateArrayLength_=function(o,i){o!==this.lastKnownLength_&&In(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&zP(o+i+1)},e.spliceWithArray_=function(o,i,l){var a=this;this.atom_;var c=this.values_.length;if(o===void 0?o=0:o>c?o=c:o<0&&(o=Math.max(0,c+o)),arguments.length===1?i=c-o:i==null?i=0:i=Math.max(0,Math.min(i,c-o)),l===void 0&&(l=Kk),Cl(this)){var p=bl(this,{object:this.proxy_,type:DI,index:o,removedCount:i,added:l});if(!p)return Kk;i=p.removedCount,l=p.added}if(l=l.length===0?l:l.map(function(_){return a.enhancer_(_,void 0)}),this.legacyMode_){var h=l.length-i;this.updateArrayLength_(c,h)}var f=this.spliceItemsIntoValues_(o,i,l);return(i!==0||l.length!==0)&&this.notifyArraySplice_(o,l,f),this.dehanceValues_(f)},e.spliceItemsIntoValues_=function(o,i,l){if(l.length<Kz){var a;return(a=this.values_).splice.apply(a,[o,i].concat(l))}else{var c=this.values_.slice(o,o+i),p=this.values_.slice(o+i);this.values_.length+=l.length-i;for(var h=0;h<l.length;h++)this.values_[o+h]=l[h];for(var f=0;f<p.length;f++)this.values_[o+l.length+f]=p[f];return c}},e.notifyArrayChildUpdate_=function(o,i,l){var a=!this.owned_&&w_(),c=na(this),p=c||a?{observableKind:"array",object:this.proxy_,type:ja,debugObjectName:this.atom_.name_,index:o,newValue:i,oldValue:l}:null;this.atom_.reportChanged(),c&&oa(this,p)},e.notifyArraySplice_=function(o,i,l){var a=!this.owned_&&w_(),c=na(this),p=c||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:DI,index:o,removed:l,added:i,removedCount:l.length,addedCount:i.length}:null;this.atom_.reportChanged(),c&&oa(this,p)},e.get_=function(o){if(o<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[o]);console.warn("[mobx.array] Attempt to read an array index ("+o+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},e.set_=function(o,i){var l=this.values_;if(o<l.length){this.atom_;var a=l[o];if(Cl(this)){var c=bl(this,{type:ja,object:this.proxy_,index:o,newValue:i});if(!c)return;i=c.newValue}i=this.enhancer_(i,a);var p=i!==a;p&&(l[o]=i,this.notifyArrayChildUpdate_(o,i,a))}else o===l.length?this.spliceWithArray_(o,0,[i]):In(17,o,l.length)},r}();function qz(r,e,t,o){t===void 0&&(t="ObservableArray"),o===void 0&&(o=!1),Q$();var i=new pM(t,e,o,!1);tP(i.values_,Yt,i);var l=new Proxy(i.values_,Yz);if(i.proxy_=l,r&&r.length){var a=jy(!0);i.spliceWithArray_(0,0,r),Jy(a)}return l}var KE={clear:function(){return this.splice(0)},replace:function(e){var t=this[Yt];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var o=arguments.length,i=new Array(o>2?o-2:0),l=2;l<o;l++)i[l-2]=arguments[l];var a=this[Yt];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,o){return this[Yt].spliceWithArray_(e,t,o)},push:function(){for(var e=this[Yt],t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,o),e.values_.length},pop:function(){return this.splice(Math.max(this[Yt].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Yt],t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.spliceWithArray_(0,0,o),e.values_.length},reverse:function(){return ut.trackingDerivation&&In(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ut.trackingDerivation&&In(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Yt],o=t.dehanceValues_(t.values_).indexOf(e);return o>-1?(this.splice(o,1),!0):!1}};Dr("concat",eu);Dr("flat",eu);Dr("includes",eu);Dr("indexOf",eu);Dr("join",eu);Dr("lastIndexOf",eu);Dr("slice",eu);Dr("toString",eu);Dr("toLocaleString",eu);Dr("every",Sh);Dr("filter",Sh);Dr("find",Sh);Dr("findIndex",Sh);Dr("flatMap",Sh);Dr("forEach",Sh);Dr("map",Sh);Dr("some",Sh);Dr("reduce",NP);Dr("reduceRight",NP);function Dr(r,e){typeof Array.prototype[r]=="function"&&(KE[r]=e(r))}function eu(r){return function(){var e=this[Yt];e.atom_.reportObserved();var t=e.dehanceValues_(e.values_);return t[r].apply(t,arguments)}}function Sh(r){return function(e,t){var o=this,i=this[Yt];i.atom_.reportObserved();var l=i.dehanceValues_(i.values_);return l[r](function(a,c){return e.call(t,a,c,o)})}}function NP(r){return function(){var e=this,t=this[Yt];t.atom_.reportObserved();var o=t.dehanceValues_(t.values_),i=arguments[0];return arguments[0]=function(l,a,c){return i(l,a,c,e)},o[r].apply(o,arguments)}}var Qz=xh("ObservableArrayAdministration",pM);function Qy(r){return Lx(r)&&Qz(r[Yt])}var $P,PP,Zz={},zu="add",YE="delete";$P=Symbol.iterator;PP=Symbol.toStringTag;var FP=function(r,e){function t(i,l,a){var c=this;l===void 0&&(l=om),a===void 0&&(a="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Yt]=Zz,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=l,this.name_=a,sa(Map)||In(18),this.keysAtom_=aM("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,mP(!0,function(){c.merge(i)})}var o=t.prototype;return o.has_=function(l){return this.data_.has(l)},o.has=function(l){var a=this;if(!ut.trackingDerivation)return this.has_(l);var c=this.hasMap_.get(l);if(!c){var p=c=new Op(this.has_(l),Px,"ObservableMap.key?",!1);this.hasMap_.set(l,p),IP(p,function(){return a.hasMap_.delete(l)})}return c.get()},o.set=function(l,a){var c=this.has_(l);if(Cl(this)){var p=bl(this,{type:c?ja:zu,object:this,newValue:a,name:l});if(!p)return this;a=p.newValue}return c?this.updateValue_(l,a):this.addValue_(l,a),this},o.delete=function(l){var a=this;if(this.keysAtom_,Cl(this)){var c=bl(this,{type:YE,object:this,name:l});if(!c)return!1}if(this.has_(l)){var p=w_(),h=na(this),f=h||p?{observableKind:"map",debugObjectName:this.name_,type:YE,object:this,oldValue:this.data_.get(l).value_,name:l}:null;return $c(function(){var _;a.keysAtom_.reportChanged(),(_=a.hasMap_.get(l))==null||_.setNewValue_(!1);var m=a.data_.get(l);m.setNewValue_(void 0),a.data_.delete(l)}),h&&oa(this,f),!0}return!1},o.updateValue_=function(l,a){var c=this.data_.get(l);if(a=c.prepareNewValue_(a),a!==ut.UNCHANGED){var p=w_(),h=na(this),f=h||p?{observableKind:"map",debugObjectName:this.name_,type:ja,object:this,oldValue:c.value_,name:l,newValue:a}:null;c.setNewValue_(a),h&&oa(this,f)}},o.addValue_=function(l,a){var c=this;this.keysAtom_,$c(function(){var _,m=new Op(a,c.enhancer_,"ObservableMap.key",!1);c.data_.set(l,m),a=m.value_,(_=c.hasMap_.get(l))==null||_.setNewValue_(!0),c.keysAtom_.reportChanged()});var p=w_(),h=na(this),f=h||p?{observableKind:"map",debugObjectName:this.name_,type:zu,object:this,name:l,newValue:a}:null;h&&oa(this,f)},o.get=function(l){return this.has(l)?this.dehanceValue_(this.data_.get(l).get()):this.dehanceValue_(void 0)},o.dehanceValue_=function(l){return this.dehancer!==void 0?this.dehancer(l):l},o.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},o.values=function(){var l=this,a=this.keys();return hy({next:function(){var p=a.next(),h=p.done,f=p.value;return{done:h,value:h?void 0:l.get(f)}}})},o.entries=function(){var l=this,a=this.keys();return hy({next:function(){var p=a.next(),h=p.done,f=p.value;return{done:h,value:h?void 0:[f,l.get(f)]}}})},o[r]=function(){return this.entries()},o.forEach=function(l,a){for(var c=wf(this),p;!(p=c()).done;){var h=p.value,f=h[0],_=h[1];l.call(a,_,f,this)}},o.merge=function(l){var a=this;return Ch(l)&&(l=new Map(l)),$c(function(){ah(l)?xW(l).forEach(function(c){return a.set(c,l[c])}):Array.isArray(l)?l.forEach(function(c){var p=c[0],h=c[1];return a.set(p,h)}):Fm(l)?(l.constructor!==Map&&In(19,l),l.forEach(function(c,p){return a.set(p,c)})):l!=null&&In(20,l)}),this},o.clear=function(){var l=this;$c(function(){vP(function(){for(var a=wf(l.keys()),c;!(c=a()).done;){var p=c.value;l.delete(p)}})})},o.replace=function(l){var a=this;return $c(function(){for(var c=e4(l),p=new Map,h=!1,f=wf(a.data_.keys()),_;!(_=f()).done;){var m=_.value;if(!c.has(m)){var v=a.delete(m);if(v)h=!0;else{var x=a.data_.get(m);p.set(m,x)}}}for(var b=wf(c.entries()),A;!(A=b()).done;){var k=A.value,E=k[0],M=k[1],R=a.data_.has(E);if(a.set(E,M),a.data_.has(E)){var I=a.data_.get(E);p.set(E,I),R||(h=!0)}}if(!h)if(a.data_.size!==p.size)a.keysAtom_.reportChanged();else for(var L=a.data_.keys(),F=p.keys(),U=L.next(),X=F.next();!U.done;){if(U.value!==X.value){a.keysAtom_.reportChanged();break}U=L.next(),X=F.next()}a.data_=p}),this},o.toString=function(){return"[object ObservableMap]"},o.toJSON=function(){return Array.from(this)},o.observe_=function(l,a){return qy(this,l)},o.intercept_=function(l){return Yy(this,l)},sM(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:e,get:function(){return"Map"}}]),t}($P,PP),Ch=xh("ObservableMap",FP);function e4(r){if(Fm(r)||Ch(r))return r;if(Array.isArray(r))return new Map(r);if(ah(r)){var e=new Map;for(var t in r)e.set(t,r[t]);return e}else return In(21,r)}var UP,HP,t4={};UP=Symbol.iterator;HP=Symbol.toStringTag;var GP=function(r,e){function t(i,l,a){l===void 0&&(l=om),a===void 0&&(a="ObservableSet"),this.name_=void 0,this[Yt]=t4,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=a,sa(Set)||In(22),this.atom_=aM(this.name_),this.enhancer_=function(c,p){return l(c,p,a)},i&&this.replace(i)}var o=t.prototype;return o.dehanceValue_=function(l){return this.dehancer!==void 0?this.dehancer(l):l},o.clear=function(){var l=this;$c(function(){vP(function(){for(var a=wf(l.data_.values()),c;!(c=a()).done;){var p=c.value;l.delete(p)}})})},o.forEach=function(l,a){for(var c=wf(this),p;!(p=c()).done;){var h=p.value;l.call(a,h,h,this)}},o.add=function(l){var a=this;if(this.atom_,Cl(this)){var c=bl(this,{type:zu,object:this,newValue:l});if(!c)return this}if(!this.has(l)){$c(function(){a.data_.add(a.enhancer_(l,void 0)),a.atom_.reportChanged()});var p=!1,h=na(this),f=h||p?{observableKind:"set",debugObjectName:this.name_,type:zu,object:this,newValue:l}:null;h&&oa(this,f)}return this},o.delete=function(l){var a=this;if(Cl(this)){var c=bl(this,{type:YE,object:this,oldValue:l});if(!c)return!1}if(this.has(l)){var p=!1,h=na(this),f=h||p?{observableKind:"set",debugObjectName:this.name_,type:YE,object:this,oldValue:l}:null;return $c(function(){a.atom_.reportChanged(),a.data_.delete(l)}),h&&oa(this,f),!0}return!1},o.has=function(l){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(l))},o.entries=function(){var l=0,a=Array.from(this.keys()),c=Array.from(this.values());return hy({next:function(){var h=l;return l+=1,h<c.length?{value:[a[h],c[h]],done:!1}:{done:!0}}})},o.keys=function(){return this.values()},o.values=function(){this.atom_.reportObserved();var l=this,a=0,c=Array.from(this.data_.values());return hy({next:function(){return a<c.length?{value:l.dehanceValue_(c[a++]),done:!1}:{done:!0}}})},o.replace=function(l){var a=this;return id(l)&&(l=new Set(l)),$c(function(){Array.isArray(l)?(a.clear(),l.forEach(function(c){return a.add(c)})):Vy(l)?(a.clear(),l.forEach(function(c){return a.add(c)})):l!=null&&In("Cannot initialize set from "+l)}),this},o.observe_=function(l,a){return qy(this,l)},o.intercept_=function(l){return Yy(this,l)},o.toJSON=function(){return Array.from(this)},o.toString=function(){return"[object ObservableSet]"},o[r]=function(){return this.values()},sM(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:e,get:function(){return"Set"}}]),t}(UP,HP),id=xh("ObservableSet",GP),LI=Object.create(null),NI="remove",VP=function(){function r(t,o,i,l){o===void 0&&(o=new Map),l===void 0&&(l=jW),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=o,this.name_=i,this.defaultAnnotation_=l,this.keysAtom_=new zy("ObservableObject.keys"),this.isPlainObject_=ah(this.target_)}var e=r.prototype;return e.getObservablePropValue_=function(o){return this.values_.get(o).get()},e.setObservablePropValue_=function(o,i){var l=this.values_.get(o);if(l instanceof ay)return l.set(i),!0;if(Cl(this)){var a=bl(this,{type:ja,object:this.proxy_||this.target_,name:o,newValue:i});if(!a)return null;i=a.newValue}if(i=l.prepareNewValue_(i),i!==ut.UNCHANGED){var c=na(this),p=!1,h=c||p?{type:ja,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:l.value_,name:o,newValue:i}:null;l.setNewValue_(i),c&&oa(this,h)}return!0},e.get_=function(o){return ut.trackingDerivation&&!Vc(this.target_,o)&&this.has_(o),this.target_[o]},e.set_=function(o,i,l){return l===void 0&&(l=!1),Vc(this.target_,o)?this.values_.has(o)?this.setObservablePropValue_(o,i):l?Reflect.set(this.target_,o,i):(this.target_[o]=i,!0):this.extend_(o,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,l)},e.has_=function(o){if(!ut.trackingDerivation)return o in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(o);return i||(i=new Op(o in this.target_,Px,"ObservableObject.key?",!1),this.pendingKeys_.set(o,i)),i.get()},e.make_=function(o,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(o in this.target_)){var l;if((l=this.target_[Ga])!=null&&l[o])return;In(1,i.annotationType_,this.name_+"."+o.toString())}for(var a=this.target_;a&&a!==Gy;){var c=VE(a,o);if(c){var p=i.make_(this,o,c,a);if(p===0)return;if(p===1)break}a=Object.getPrototypeOf(a)}PI(this,i,o)}},e.extend_=function(o,i,l,a){if(a===void 0&&(a=!1),l===!0&&(l=this.defaultAnnotation_),l===!1)return this.defineProperty_(o,i,a);var c=l.extend_(this,o,i,a);return c&&PI(this,l,o),c},e.defineProperty_=function(o,i,l){l===void 0&&(l=!1);try{Xs();var a=this.delete_(o);if(!a)return a;if(Cl(this)){var c=bl(this,{object:this.proxy_||this.target_,name:o,type:zu,newValue:i.value});if(!c)return null;var p=c.newValue;i.value!==p&&(i=nm({},i,{value:p}))}if(l){if(!Reflect.defineProperty(this.target_,o,i))return!1}else Gc(this.target_,o,i);this.notifyPropertyAddition_(o,i.value)}finally{js()}return!0},e.defineObservableProperty_=function(o,i,l,a){a===void 0&&(a=!1);try{Xs();var c=this.delete_(o);if(!c)return c;if(Cl(this)){var p=bl(this,{object:this.proxy_||this.target_,name:o,type:zu,newValue:i});if(!p)return null;i=p.newValue}var h=$I(o),f={configurable:ut.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:h.get,set:h.set};if(a){if(!Reflect.defineProperty(this.target_,o,f))return!1}else Gc(this.target_,o,f);var _=new Op(i,l,"ObservableObject.key",!1);this.values_.set(o,_),this.notifyPropertyAddition_(o,_.value_)}finally{js()}return!0},e.defineComputedProperty_=function(o,i,l){l===void 0&&(l=!1);try{Xs();var a=this.delete_(o);if(!a)return a;if(Cl(this)){var c=bl(this,{object:this.proxy_||this.target_,name:o,type:zu,newValue:void 0});if(!c)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var p=$I(o),h={configurable:ut.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:p.get,set:p.set};if(l){if(!Reflect.defineProperty(this.target_,o,h))return!1}else Gc(this.target_,o,h);this.values_.set(o,new ay(i)),this.notifyPropertyAddition_(o,void 0)}finally{js()}return!0},e.delete_=function(o,i){if(i===void 0&&(i=!1),!Vc(this.target_,o))return!0;if(Cl(this)){var l=bl(this,{object:this.proxy_||this.target_,name:o,type:NI});if(!l)return null}try{var a,c;Xs();var p=na(this),h=!1,f=this.values_.get(o),_=void 0;if(!f&&(p||h)){var m;_=(m=VE(this.target_,o))==null?void 0:m.value}if(i){if(!Reflect.deleteProperty(this.target_,o))return!1}else delete this.target_[o];if(f&&(this.values_.delete(o),f instanceof Op&&(_=f.value_),bP(f)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(c=a.get(o))==null||c.set(o in this.target_),p||h){var v={type:NI,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:_,name:o};p&&oa(this,v)}}finally{js()}return!0},e.observe_=function(o,i){return qy(this,o)},e.intercept_=function(o){return Yy(this,o)},e.notifyPropertyAddition_=function(o,i){var l,a,c=na(this),p=!1;if(c||p){var h=c||p?{type:zu,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:o,newValue:i}:null;c&&oa(this,h)}(l=this.pendingKeys_)==null||(a=l.get(o))==null||a.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),$x(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function Hx(r,e){var t;if(Vc(r,Yt))return r;var o=(t=e==null?void 0:e.name)!=null?t:"ObservableObject",i=new VP(r,new Map,String(o),oz(e));return Nx(r,Yt,i),r}var n4=xh("ObservableObjectAdministration",VP);function $I(r){return LI[r]||(LI[r]={get:function(){return this[Yt].getObservablePropValue_(r)},set:function(t){return this[Yt].setObservablePropValue_(r,t)}})}function sm(r){return Lx(r)?n4(r[Yt]):!1}function PI(r,e,t){var o;(o=r.target_[Ga])==null||delete o[t]}var UC=0,WP=function(){};function o4(r,e){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,e):r.prototype.__proto__!==void 0?r.prototype.__proto__=e:r.prototype=e}o4(WP,Array.prototype);var dM=function(r,e,t){rP(o,r);function o(l,a,c,p){var h;c===void 0&&(c="ObservableArray"),p===void 0&&(p=!1),h=r.call(this)||this;var f=new pM(c,a,p,!0);if(f.proxy_=AI(h),tP(AI(h),Yt,f),l&&l.length){var _=jy(!0);h.spliceWithArray(0,0,l),Jy(_)}return h}var i=o.prototype;return i.concat=function(){this[Yt].atom_.reportObserved();for(var a=arguments.length,c=new Array(a),p=0;p<a;p++)c[p]=arguments[p];return Array.prototype.concat.apply(this.slice(),c.map(function(h){return Qy(h)?h.slice():h}))},i[t]=function(){var l=this,a=0;return hy({next:function(){return a<l.length?{value:l[a++],done:!1}:{done:!0,value:void 0}}})},sM(o,[{key:"length",get:function(){return this[Yt].getArrayLength_()},set:function(a){this[Yt].setArrayLength_(a)}},{key:e,get:function(){return"Array"}}]),o}(WP,Symbol.toStringTag,Symbol.iterator);Object.entries(KE).forEach(function(r){var e=r[0],t=r[1];e!=="concat"&&Nx(dM.prototype,e,t)});function r4(r){return{enumerable:!1,configurable:!0,get:function(){return this[Yt].get_(r)},set:function(t){this[Yt].set_(r,t)}}}function i4(r){Gc(dM.prototype,""+r,r4(r))}function zP(r){if(r>UC){for(var e=UC;e<r+100;e++)i4(e);UC=r}}zP(1e3);function s4(r,e,t){return new dM(r,e,t)}function ch(r,e){if(typeof r=="object"&&r!==null){if(Qy(r))return e!==void 0&&In(23),r[Yt].atom_;if(id(r))return r[Yt];if(Ch(r)){if(e===void 0)return r.keysAtom_;var t=r.data_.get(e)||r.hasMap_.get(e);return t||In(25,e,eA(r)),t}if(sm(r)){if(!e)return In(26);var o=r[Yt].values_.get(e);return o||In(27,e,eA(r)),o}if(lM(r)||Ky(r)||jE(r))return r}else if(sa(r)&&jE(r[Yt]))return r[Yt];In(28)}function XP(r,e){if(r||In(29),e!==void 0)return XP(ch(r,e));if(lM(r)||Ky(r)||jE(r)||Ch(r)||id(r))return r;if(r[Yt])return r[Yt];In(24,r)}function eA(r,e){var t;if(e!==void 0)t=ch(r,e);else{if(uM(r))return r.name;sm(r)||Ch(r)||id(r)?t=XP(r):t=ch(r)}return t.name_}var FI=Gy.toString;function fM(r,e,t){return t===void 0&&(t=-1),tA(r,e,t)}function tA(r,e,t,o,i){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var l=typeof r;if(l!=="function"&&l!=="object"&&typeof e!="object")return!1;var a=FI.call(r);if(a!==FI.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}r=UI(r),e=UI(e);var c=a==="[object Array]";if(!c){if(typeof r!="object"||typeof e!="object")return!1;var p=r.constructor,h=e.constructor;if(p!==h&&!(sa(p)&&p instanceof p&&sa(h)&&h instanceof h)&&"constructor"in r&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),o=o||[],i=i||[];for(var f=o.length;f--;)if(o[f]===r)return i[f]===e;if(o.push(r),i.push(e),c){if(f=r.length,f!==e.length)return!1;for(;f--;)if(!tA(r[f],e[f],t-1,o,i))return!1}else{var _=Object.keys(r),m;if(f=_.length,Object.keys(e).length!==f)return!1;for(;f--;)if(m=_[f],!(Vc(e,m)&&tA(r[m],e[m],t-1,o,i)))return!1}return o.pop(),i.pop(),!0}function UI(r){return Qy(r)?r.slice():Fm(r)||Ch(r)||Vy(r)||id(r)?Array.from(r.entries()):r}function hy(r){return r[Symbol.iterator]=l4,r}function l4(){return this}["Symbol","Map","Set"].forEach(function(r){var e=iM();typeof e[r]=="undefined"&&In("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:xz,extras:{getDebugName:eA},$mobx:Yt});if(!G.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Jz)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function a4(r){r()}function c4(r){r||(r=a4),Nz({reactionScheduler:r})}function u4(r){return Pz(r)}var HI=typeof FinalizationRegistry=="undefined"?void 0:FinalizationRegistry;function jP(r){var e={reaction:r,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+h4};return e}var h4=1e4,p4=1e4;function d4(r){var e=new Map,t=1,o=new r(function(l){var a=e.get(l);a&&(a.reaction.dispose(),e.delete(l))});return{addReactionToTrack:function(i,l,a){var c=t++;return o.register(a,c,i),i.current=jP(l),i.current.finalizationRegistryCleanupToken=c,e.set(c,i.current),i.current},recordReactionAsCommitted:function(i){o.unregister(i),i.current&&i.current.finalizationRegistryCleanupToken&&e.delete(i.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var f4=globalThis&&globalThis.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],o=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function m4(){var r=new Set,e;function t(){e&&(clearTimeout(e),c())}function o(){var p,h;if(r.size>0){try{for(var f=f4(r),_=f.next();!_.done;_=f.next()){var m=_.value,v=m.current;v&&(v.reaction.dispose(),m.current=null)}}catch(x){p={error:x}}finally{try{_&&!_.done&&(h=f.return)&&h.call(f)}finally{if(p)throw p.error}}r.clear()}e&&(clearTimeout(e),e=void 0)}function i(){e===void 0&&(e=setTimeout(c,p4))}function l(p){r.add(p),i()}function a(p){r.delete(p)}function c(){e=void 0;var p=Date.now();r.forEach(function(h){var f=h.current;f&&p>=f.cleanAt&&(f.reaction.dispose(),h.current=null,r.delete(h))}),r.size>0&&i()}return{addReactionToTrack:function(p,h,f){return p.current=jP(h),l(p),p.current},recordReactionAsCommitted:a,forceCleanupTimerToRunNowForTests:t,resetCleanupScheduleForTests:o}}var JP=HI?d4(HI):m4(),g4=JP.addReactionToTrack,_4=JP.recordReactionAsCommitted,GI=globalThis&&globalThis.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var o=t.call(r),i,l=[],a;try{for(;(e===void 0||e-- >0)&&!(i=o.next()).done;)l.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return l};function VI(r){return"observer".concat(r)}var y4=function(){function r(){}return r}();function v4(){return new y4}function T4(r,e){e===void 0&&(e="observed");var t=GI(zt.useState(v4),1),o=t[0],i=GI(zt.useState(),2),l=i[1],a=function(){return l([])},c=zt.useRef(null);if(!c.current)var p=new im(VI(e),function(){h.mounted?a():h.changedBeforeMount=!0}),h=g4(c,p,o);var f=c.current.reaction;zt.useDebugValue(f,u4),zt.useEffect(function(){return _4(c),c.current?(c.current.mounted=!0,c.current.changedBeforeMount&&(c.current.changedBeforeMount=!1,a())):(c.current={reaction:new im(VI(e),function(){a()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},a()),function(){c.current.reaction.dispose(),c.current=null}},[]);var _,m;if(f.track(function(){try{_=r()}catch(v){m=v}}),m)throw m;return _}var KP=typeof Symbol=="function"&&Symbol.for,WI=KP?Symbol.for("react.forward_ref"):typeof G.exports.forwardRef=="function"&&G.exports.forwardRef(function(r){return null}).$$typeof,zI=KP?Symbol.for("react.memo"):typeof G.exports.memo=="function"&&G.exports.memo(function(r){return null}).$$typeof;function E4(r,e){var t;if(zI&&r.$$typeof===zI)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var o=(t=e==null?void 0:e.forwardRef)!==null&&t!==void 0?t:!1,i=r,l=r.displayName||r.name;if(WI&&r.$$typeof===WI&&(o=!0,i=r.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a=function(c,p){return T4(function(){return i(c,p)},l)};return l!==""&&(a.displayName=l),r.contextTypes&&(a.contextTypes=r.contextTypes),o&&(a=G.exports.forwardRef(a)),a=G.exports.memo(a),S4(r,a),a}var x4={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function S4(r,e){Object.keys(r).forEach(function(t){x4[t]||Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}globalThis&&globalThis.__read;c4(mx.exports.unstable_batchedUpdates);var Gx={exports:{}},Zy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4=G.exports,YP=60103;Zy.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var XI=Symbol.for;YP=XI("react.element"),Zy.Fragment=XI("react.fragment")}var b4=Object.prototype.hasOwnProperty,k4=C4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A4={key:!0,ref:!0,__self:!0,__source:!0};function qP(r,e,t){var o,i={},l=null,a=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(o in e)b4.call(e,o)&&!A4.hasOwnProperty(o)&&(i[o]=e[o]);if(r&&r.defaultProps)for(o in e=r.defaultProps,e)i[o]===void 0&&(i[o]=e[o]);return{$$typeof:YP,type:r,key:l,ref:a,props:i,_owner:k4.current}}Zy.jsx=qP;Zy.jsxs=qP;Gx.exports=Zy;const Ge=Gx.exports.jsx,bo=Gx.exports.jsxs,Ihe=Gx.exports.Fragment;var jI=0;function w4(r){if(typeof Symbol=="function")return Symbol(r);var e="__$mobx-react "+r+" ("+jI+")";return jI++,e}var HC={};function uh(r){return HC[r]||(HC[r]=w4(r)),HC[r]}function QP(r,e){if(JI(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),o=Object.keys(e);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i++)if(!Object.hasOwnProperty.call(e,t[i])||!JI(r[t[i]],e[t[i]]))return!1;return!0}function JI(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function Pc(r,e,t){Object.hasOwnProperty.call(r,e)?r[e]=t:Object.defineProperty(r,e,{enumerable:!1,configurable:!0,writable:!0,value:t})}var KI=uh("patchMixins"),ZP=uh("patchedDefinition");function M4(r,e){var t=r[KI]=r[KI]||{},o=t[e]=t[e]||{};return o.locks=o.locks||0,o.methods=o.methods||[],o}function YI(r,e){for(var t=this,o=arguments.length,i=new Array(o>2?o-2:0),l=2;l<o;l++)i[l-2]=arguments[l];e.locks++;try{var a;return r!=null&&(a=r.apply(this,i)),a}finally{e.locks--,e.locks===0&&e.methods.forEach(function(c){c.apply(t,i)})}}function qI(r,e){var t=function(){for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];YI.call.apply(YI,[this,r,e].concat(l))};return t}function R4(r,e,t){var o=M4(r,e);o.methods.indexOf(t)<0&&o.methods.push(t);var i=Object.getOwnPropertyDescriptor(r,e);if(!(i&&i[ZP])){var l=r[e],a=eF(r,e,i?i.enumerable:void 0,o,l);Object.defineProperty(r,e,a)}}function eF(r,e,t,o,i){var l,a=qI(i,o);return l={},l[ZP]=!0,l.get=function(){return a},l.set=function(p){if(this===r)a=qI(p,o);else{var h=eF(this,e,t,o,p);Object.defineProperty(this,e,h)}},l.configurable=!0,l.enumerable=t,l}var nA=Yt||"$mobx",QI=uh("isMobXReactObserver"),tF=uh("isUnmounted"),qE=uh("skipRender"),nE=uh("isForcingUpdate");function B4(r){var e=r.prototype;if(r[QI]){var t=oE(e);console.warn("The provided component class ("+t+`) 
                has already been declared as an observer component.`)}else r[QI]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(r.__proto__!==G.exports.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=ZI;else if(e.shouldComponentUpdate!==ZI)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}e1(e,"props"),e1(e,"state");var o=e.render;if(typeof o!="function"){var i=oE(e);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return e.render=function(){return I4.call(this,o)},R4(e,"componentWillUnmount",function(){var l;if((l=this.render[nA])==null||l.dispose(),this[tF]=!0,!this.render[nA]){var a=oE(this);console.warn("The reactive render of an observer class component ("+a+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),r}function oE(r){return r.displayName||r.name||r.constructor&&(r.constructor.displayName||r.constructor.name)||"<component>"}function I4(r){var e=this;Pc(this,qE,!1),Pc(this,nE,!1);var t=oE(this),o=r.bind(this),i=!1,l=new im(t+".render()",function(){if(!i&&(i=!0,e[tF]!==!0)){var c=!0;try{Pc(e,nE,!0),e[qE]||G.exports.Component.prototype.forceUpdate.call(e),c=!1}finally{Pc(e,nE,!1),c&&l.dispose()}}});l.reactComponent=this,a[nA]=l,this.render=a;function a(){i=!1;var c=void 0,p=void 0;if(l.track(function(){try{p=mP(!1,o)}catch(h){c=h}}),c)throw c;return p}return a.call(this)}function ZI(r,e){return this.state!==e?!0:!QP(this.props,r)}function e1(r,e){var t=uh("reactProp_"+e+"_valueHolder"),o=uh("reactProp_"+e+"_atomHolder");function i(){return this[o]||Pc(this,o,aM("reactive "+e)),this[o]}Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var a=!1;return Gf&&th&&(a=Gf(!0)),i.call(this).reportObserved(),Gf&&th&&th(a),this[t]},set:function(a){!this[nE]&&!QP(this[t],a)?(Pc(this,t,a),Pc(this,qE,!0),i.call(this).reportChanged(),Pc(this,qE,!1)):Pc(this,t,a)}})}function Ohe(r){return r.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(G.exports.Component,r)||Object.prototype.isPrototypeOf.call(G.exports.PureComponent,r)?B4(r):E4(r)}if(!G.exports.Component)throw new Error("mobx-react requires React to be available");if(!Jr)throw new Error("mobx-react requires mobx to be available");/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Vx="137",up={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},hp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nF=0,oA=1,oF=2,O4=3,D4=0,mM=1,gM=2,Rf=3,hh=0,ur=1,ph=2,_M=1,L4=2,Wc=0,Vf=1,rA=2,iA=3,sA=4,rF=5,yp=100,iF=101,sF=102,lA=103,aA=104,lF=200,aF=201,cF=202,uF=203,yM=204,vM=205,hF=206,pF=207,dF=208,fF=209,mF=210,gF=0,_F=1,yF=2,QE=3,vF=4,TF=5,EF=6,xF=7,ev=0,SF=1,CF=2,Ja=0,bF=1,kF=2,AF=3,TM=4,wF=5,Wx=300,sd=301,ld=302,py=303,dy=304,Hm=306,tv=307,dh=1e3,Kr=1001,lm=1002,tr=1003,fy=1004,N4=1004,my=1005,$4=1005,So=1006,zx=1007,P4=1007,tu=1008,F4=1008,zc=1009,MF=1010,RF=1011,am=1012,BF=1013,M_=1014,Hc=1015,Lp=1016,IF=1017,OF=1018,Np=1020,DF=1021,LF=1022,di=1023,NF=1024,$F=1025,nh=1026,zp=1027,PF=1028,FF=1029,UF=1030,HF=1031,GF=1033,rE=33776,iE=33777,sE=33778,lE=33779,cA=35840,uA=35841,hA=35842,pA=35843,VF=36196,dA=37492,fA=37496,mA=37808,gA=37809,_A=37810,yA=37811,vA=37812,TA=37813,EA=37814,xA=37815,SA=37816,CA=37817,bA=37818,kA=37819,AA=37820,wA=37821,MA=36492,WF=2200,zF=2201,XF=2202,cm=2300,Xp=2301,aE=2302,bp=2400,kp=2401,gy=2402,Xx=2500,EM=2501,jF=0,JF=1,xM=2,la=3e3,qn=3001,KF=3200,YF=3201,bh=0,qF=1,U4=0,cE=7680,H4=7681,G4=7682,V4=7683,W4=34055,z4=34056,X4=5386,j4=512,J4=513,K4=514,Y4=515,q4=516,Q4=517,Z4=518,QF=519,um=35044,hm=35048,e5=35040,t5=35045,n5=35049,o5=35041,r5=35046,i5=35050,s5=35042,l5="100",RA="300 es",ZE=1035;class nu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[e]===void 0&&(o[e]=[]),o[e].indexOf(t)===-1&&o[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const o=this._listeners;return o[e]!==void 0&&o[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const l=i.indexOf(t);l!==-1&&i.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const o=this._listeners[e.type];if(o!==void 0){e.target=this;const i=o.slice(0);for(let l=0,a=i.length;l<a;l++)i[l].call(this,e);e.target=null}}}const hi=[];for(let r=0;r<256;r++)hi[r]=(r<16?"0":"")+r.toString(16);let OT=1234567;const $p=Math.PI/180,_y=180/Math.PI;function Qs(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(hi[r&255]+hi[r>>8&255]+hi[r>>16&255]+hi[r>>24&255]+"-"+hi[e&255]+hi[e>>8&255]+"-"+hi[e>>16&15|64]+hi[e>>24&255]+"-"+hi[t&63|128]+hi[t>>8&255]+"-"+hi[t>>16&255]+hi[t>>24&255]+hi[o&255]+hi[o>>8&255]+hi[o>>16&255]+hi[o>>24&255]).toUpperCase()}function pi(r,e,t){return Math.max(e,Math.min(t,r))}function SM(r,e){return(r%e+e)%e}function a5(r,e,t,o,i){return o+(r-e)*(i-o)/(t-e)}function c5(r,e,t){return r!==e?(t-r)/(e-r):0}function R_(r,e,t){return(1-t)*r+t*e}function u5(r,e,t,o){return R_(r,e,1-Math.exp(-t*o))}function h5(r,e=1){return e-Math.abs(SM(r,e*2)-e)}function p5(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function d5(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function f5(r,e){return r+Math.floor(Math.random()*(e-r+1))}function m5(r,e){return r+Math.random()*(e-r)}function g5(r){return r*(.5-Math.random())}function _5(r){return r!==void 0&&(OT=r%2147483647),OT=OT*16807%2147483647,(OT-1)/2147483646}function y5(r){return r*$p}function v5(r){return r*_y}function BA(r){return(r&r-1)===0&&r!==0}function ZF(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function e2(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function T5(r,e,t,o,i){const l=Math.cos,a=Math.sin,c=l(t/2),p=a(t/2),h=l((e+o)/2),f=a((e+o)/2),_=l((e-o)/2),m=a((e-o)/2),v=l((o-e)/2),x=a((o-e)/2);switch(i){case"XYX":r.set(c*f,p*_,p*m,c*h);break;case"YZY":r.set(p*m,c*f,p*_,c*h);break;case"ZXZ":r.set(p*_,p*m,c*f,c*h);break;case"XZX":r.set(c*f,p*x,p*v,c*h);break;case"YXY":r.set(p*v,c*f,p*x,c*h);break;case"ZYZ":r.set(p*x,p*v,c*f,c*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var ex=Object.freeze({__proto__:null,DEG2RAD:$p,RAD2DEG:_y,generateUUID:Qs,clamp:pi,euclideanModulo:SM,mapLinear:a5,inverseLerp:c5,lerp:R_,damp:u5,pingpong:h5,smoothstep:p5,smootherstep:d5,randInt:f5,randFloat:m5,randFloatSpread:g5,seededRandom:_5,degToRad:y5,radToDeg:v5,isPowerOfTwo:BA,ceilPowerOfTwo:ZF,floorPowerOfTwo:e2,setQuaternionFromProperEuler:T5});class Ve{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,o=this.y,i=e.elements;return this.x=i[0]*t+i[3]*o+i[6],this.y=i[1]*t+i[4]*o+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(e,Math.min(t,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,o=this.y-e.y;return t*t+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,o){return this.x=e.x+(t.x-e.x)*o,this.y=e.y+(t.y-e.y)*o,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,o){return o!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const o=Math.cos(t),i=Math.sin(t),l=this.x-e.x,a=this.y-e.y;return this.x=l*o-a*i+e.x,this.y=l*i+a*o+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ve.prototype.isVector2=!0;class Or{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,o,i,l,a,c,p,h){const f=this.elements;return f[0]=e,f[1]=i,f[2]=c,f[3]=t,f[4]=l,f[5]=p,f[6]=o,f[7]=a,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,o=e.elements;return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],this}extractBasis(e,t,o){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const o=e.elements,i=t.elements,l=this.elements,a=o[0],c=o[3],p=o[6],h=o[1],f=o[4],_=o[7],m=o[2],v=o[5],x=o[8],b=i[0],A=i[3],k=i[6],E=i[1],M=i[4],R=i[7],I=i[2],L=i[5],F=i[8];return l[0]=a*b+c*E+p*I,l[3]=a*A+c*M+p*L,l[6]=a*k+c*R+p*F,l[1]=h*b+f*E+_*I,l[4]=h*A+f*M+_*L,l[7]=h*k+f*R+_*F,l[2]=m*b+v*E+x*I,l[5]=m*A+v*M+x*L,l[8]=m*k+v*R+x*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],o=e[1],i=e[2],l=e[3],a=e[4],c=e[5],p=e[6],h=e[7],f=e[8];return t*a*f-t*c*h-o*l*f+o*c*p+i*l*h-i*a*p}invert(){const e=this.elements,t=e[0],o=e[1],i=e[2],l=e[3],a=e[4],c=e[5],p=e[6],h=e[7],f=e[8],_=f*a-c*h,m=c*p-f*l,v=h*l-a*p,x=t*_+o*m+i*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=_*b,e[1]=(i*h-f*o)*b,e[2]=(c*o-i*a)*b,e[3]=m*b,e[4]=(f*t-i*p)*b,e[5]=(i*l-c*t)*b,e[6]=v*b,e[7]=(o*p-h*t)*b,e[8]=(a*t-o*l)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,o,i,l,a,c){const p=Math.cos(l),h=Math.sin(l);return this.set(o*p,o*h,-o*(p*a+h*c)+a+e,-i*h,i*p,-i*(-h*a+p*c)+c+t,0,0,1),this}scale(e,t){const o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=t,o[4]*=t,o[7]*=t,this}rotate(e){const t=Math.cos(e),o=Math.sin(e),i=this.elements,l=i[0],a=i[3],c=i[6],p=i[1],h=i[4],f=i[7];return i[0]=t*l+o*p,i[3]=t*a+o*h,i[6]=t*c+o*f,i[1]=-o*l+t*p,i[4]=-o*a+t*h,i[7]=-o*c+t*f,this}translate(e,t){const o=this.elements;return o[0]+=e*o[2],o[3]+=e*o[5],o[6]+=e*o[8],o[1]+=t*o[2],o[4]+=t*o[5],o[7]+=t*o[8],this}equals(e){const t=this.elements,o=e.elements;for(let i=0;i<9;i++)if(t[i]!==o[i])return!1;return!0}fromArray(e,t=0){for(let o=0;o<9;o++)this.elements[o]=e[o+t];return this}toArray(e=[],t=0){const o=this.elements;return e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],e[t+3]=o[3],e[t+4]=o[4],e[t+5]=o[5],e[t+6]=o[6],e[t+7]=o[7],e[t+8]=o[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Or.prototype.isMatrix3=!0;function t2(r){for(let e=r.length-1;e>=0;--e)if(r[e]>65535)return!0;return!1}const E5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Bf(r,e){return new E5[r](e)}function yy(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}const n2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yl={h:0,s:0,l:0},DT={h:0,s:0,l:0};function GC(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function Wf(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function VC(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}class tt{constructor(e,t,o){return t===void 0&&o===void 0?this.set(e):this.setRGB(e,t,o)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,o){return this.r=e,this.g=t,this.b=o,this}setHSL(e,t,o){if(e=SM(e,1),t=pi(t,0,1),o=pi(o,0,1),t===0)this.r=this.g=this.b=o;else{const i=o<=.5?o*(1+t):o+t-o*t,l=2*o-i;this.r=GC(l,i,e+1/3),this.g=GC(l,i,e),this.b=GC(l,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const l=o[1],a=o[2];switch(l){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const c=parseFloat(i[1])/360,p=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(c,p,h)}break}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=o[1],l=i.length;if(l===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(l===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=n2[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wf(e.r),this.g=Wf(e.g),this.b=Wf(e.b),this}copyLinearToSRGB(e){return this.r=VC(e.r),this.g=VC(e.g),this.b=VC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,o=this.g,i=this.b,l=Math.max(t,o,i),a=Math.min(t,o,i);let c,p;const h=(a+l)/2;if(a===l)c=0,p=0;else{const f=l-a;switch(p=h<=.5?f/(l+a):f/(2-l-a),l){case t:c=(o-i)/f+(o<i?6:0);break;case o:c=(i-t)/f+2;break;case i:c=(t-o)/f+4;break}c/=6}return e.h=c,e.s=p,e.l=h,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,o){return this.getHSL(Yl),Yl.h+=e,Yl.s+=t,Yl.l+=o,this.setHSL(Yl.h,Yl.s,Yl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,o){return this.r=e.r+(t.r-e.r)*o,this.g=e.g+(t.g-e.g)*o,this.b=e.b+(t.b-e.b)*o,this}lerpHSL(e,t){this.getHSL(Yl),e.getHSL(DT);const o=R_(Yl.h,DT.h,t),i=R_(Yl.s,DT.s,t),l=R_(Yl.l,DT.l,t);return this.setHSL(o,i,l),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}tt.NAMES=n2;tt.prototype.isColor=!0;tt.prototype.r=1;tt.prototype.g=1;tt.prototype.b=1;let Nd;class kh{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nd===void 0&&(Nd=yy("canvas")),Nd.width=e.width,Nd.height=e.height;const o=Nd.getContext("2d");e instanceof ImageData?o.putImageData(e,0,0):o.drawImage(e,0,0,e.width,e.height),t=Nd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=yy("canvas");t.width=e.width,t.height=e.height;const o=t.getContext("2d");o.drawImage(e,0,0,e.width,e.height);const i=o.getImageData(0,0,e.width,e.height),l=i.data;for(let a=0;a<l.length;a++)l[a]=Wf(l[a]/255)*255;return o.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let o=0;o<t.length;o++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[o]=Math.floor(Wf(t[o]/255)*255):t[o]=Wf(t[o]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let x5=0;class Vo extends nu{constructor(e=Vo.DEFAULT_IMAGE,t=Vo.DEFAULT_MAPPING,o=Kr,i=Kr,l=So,a=tu,c=di,p=zc,h=1,f=la){super();Object.defineProperty(this,"id",{value:x5++}),this.uuid=Qs(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=o,this.wrapT=i,this.magFilter=l,this.minFilter=a,this.anisotropy=h,this.format=c,this.internalFormat=null,this.type=p,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Or,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const o={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Qs()),!t&&e.images[i.uuid]===void 0){let l;if(Array.isArray(i)){l=[];for(let a=0,c=i.length;a<c;a++)i[a].isDataTexture?l.push(WC(i[a].image)):l.push(WC(i[a]))}else l=WC(i);e.images[i.uuid]={uuid:i.uuid,url:l}}o.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),t||(e.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case dh:e.x=e.x-Math.floor(e.x);break;case Kr:e.x=e.x<0?0:1;break;case lm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case dh:e.y=e.y-Math.floor(e.y);break;case Kr:e.y=e.y<0?0:1;break;case lm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Vo.DEFAULT_IMAGE=void 0;Vo.DEFAULT_MAPPING=Wx;Vo.prototype.isTexture=!0;function WC(r){return typeof HTMLImageElement!="undefined"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap?kh.getDataURL(r):r.data?{data:Array.prototype.slice.call(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Gn{constructor(e=0,t=0,o=0,i=1){this.x=e,this.y=t,this.z=o,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,o,i){return this.x=e,this.y=t,this.z=o,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,o=this.y,i=this.z,l=this.w,a=e.elements;return this.x=a[0]*t+a[4]*o+a[8]*i+a[12]*l,this.y=a[1]*t+a[5]*o+a[9]*i+a[13]*l,this.z=a[2]*t+a[6]*o+a[10]*i+a[14]*l,this.w=a[3]*t+a[7]*o+a[11]*i+a[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,o,i,l;const p=e.elements,h=p[0],f=p[4],_=p[8],m=p[1],v=p[5],x=p[9],b=p[2],A=p[6],k=p[10];if(Math.abs(f-m)<.01&&Math.abs(_-b)<.01&&Math.abs(x-A)<.01){if(Math.abs(f+m)<.1&&Math.abs(_+b)<.1&&Math.abs(x+A)<.1&&Math.abs(h+v+k-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(h+1)/2,R=(v+1)/2,I=(k+1)/2,L=(f+m)/4,F=(_+b)/4,U=(x+A)/4;return M>R&&M>I?M<.01?(o=0,i=.707106781,l=.707106781):(o=Math.sqrt(M),i=L/o,l=F/o):R>I?R<.01?(o=.707106781,i=0,l=.707106781):(i=Math.sqrt(R),o=L/i,l=U/i):I<.01?(o=.707106781,i=.707106781,l=0):(l=Math.sqrt(I),o=F/l,i=U/l),this.set(o,i,l,t),this}let E=Math.sqrt((A-x)*(A-x)+(_-b)*(_-b)+(m-f)*(m-f));return Math.abs(E)<.001&&(E=1),this.x=(A-x)/E,this.y=(_-b)/E,this.z=(m-f)/E,this.w=Math.acos((h+v+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(e,Math.min(t,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,o){return this.x=e.x+(t.x-e.x)*o,this.y=e.y+(t.y-e.y)*o,this.z=e.z+(t.z-e.z)*o,this.w=e.w+(t.w-e.w)*o,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,o){return o!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Gn.prototype.isVector4=!0;class Zs extends nu{constructor(e,t,o={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Gn(0,0,e,t),this.scissorTest=!1,this.viewport=new Gn(0,0,e,t),this.texture=new Vo(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.internalFormat=o.internalFormat!==void 0?o.internalFormat:null,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:So,this.depthBuffer=o.depthBuffer!==void 0?o.depthBuffer:!0,this.stencilBuffer=o.stencilBuffer!==void 0?o.stencilBuffer:!1,this.depthTexture=o.depthTexture!==void 0?o.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,o=1){(this.width!==e||this.height!==t||this.depth!==o)&&(this.width=e,this.height=t,this.depth=o,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=o,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Zs.prototype.isWebGLRenderTarget=!0;class o2 extends Zs{constructor(e,t,o){super(e,t);const i=this.texture;this.texture=[];for(let l=0;l<o;l++)this.texture[l]=i.clone()}setSize(e,t,o=1){if(this.width!==e||this.height!==t||this.depth!==o){this.width=e,this.height=t,this.depth=o;for(let i=0,l=this.texture.length;i<l;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=o;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,o=e.texture.length;t<o;t++)this.texture[t]=e.texture[t].clone();return this}}o2.prototype.isWebGLMultipleRenderTargets=!0;class jx extends Zs{constructor(e,t,o={}){super(e,t,o);this.samples=4,this.ignoreDepthForMultisampleCopy=o.ignoreDepth!==void 0?o.ignoreDepth:!0,this.useRenderToTexture=o.useRenderToTexture!==void 0?o.useRenderToTexture:!1,this.useRenderbuffer=this.useRenderToTexture===!1}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}jx.prototype.isWebGLMultisampleRenderTarget=!0;class rr{constructor(e=0,t=0,o=0,i=1){this._x=e,this._y=t,this._z=o,this._w=i}static slerp(e,t,o,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),o.slerpQuaternions(e,t,i)}static slerpFlat(e,t,o,i,l,a,c){let p=o[i+0],h=o[i+1],f=o[i+2],_=o[i+3];const m=l[a+0],v=l[a+1],x=l[a+2],b=l[a+3];if(c===0){e[t+0]=p,e[t+1]=h,e[t+2]=f,e[t+3]=_;return}if(c===1){e[t+0]=m,e[t+1]=v,e[t+2]=x,e[t+3]=b;return}if(_!==b||p!==m||h!==v||f!==x){let A=1-c;const k=p*m+h*v+f*x+_*b,E=k>=0?1:-1,M=1-k*k;if(M>Number.EPSILON){const I=Math.sqrt(M),L=Math.atan2(I,k*E);A=Math.sin(A*L)/I,c=Math.sin(c*L)/I}const R=c*E;if(p=p*A+m*R,h=h*A+v*R,f=f*A+x*R,_=_*A+b*R,A===1-c){const I=1/Math.sqrt(p*p+h*h+f*f+_*_);p*=I,h*=I,f*=I,_*=I}}e[t]=p,e[t+1]=h,e[t+2]=f,e[t+3]=_}static multiplyQuaternionsFlat(e,t,o,i,l,a){const c=o[i],p=o[i+1],h=o[i+2],f=o[i+3],_=l[a],m=l[a+1],v=l[a+2],x=l[a+3];return e[t]=c*x+f*_+p*v-h*m,e[t+1]=p*x+f*m+h*_-c*v,e[t+2]=h*x+f*v+c*m-p*_,e[t+3]=f*x-c*_-p*m-h*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,o,i){return this._x=e,this._y=t,this._z=o,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const o=e._x,i=e._y,l=e._z,a=e._order,c=Math.cos,p=Math.sin,h=c(o/2),f=c(i/2),_=c(l/2),m=p(o/2),v=p(i/2),x=p(l/2);switch(a){case"XYZ":this._x=m*f*_+h*v*x,this._y=h*v*_-m*f*x,this._z=h*f*x+m*v*_,this._w=h*f*_-m*v*x;break;case"YXZ":this._x=m*f*_+h*v*x,this._y=h*v*_-m*f*x,this._z=h*f*x-m*v*_,this._w=h*f*_+m*v*x;break;case"ZXY":this._x=m*f*_-h*v*x,this._y=h*v*_+m*f*x,this._z=h*f*x+m*v*_,this._w=h*f*_-m*v*x;break;case"ZYX":this._x=m*f*_-h*v*x,this._y=h*v*_+m*f*x,this._z=h*f*x-m*v*_,this._w=h*f*_+m*v*x;break;case"YZX":this._x=m*f*_+h*v*x,this._y=h*v*_+m*f*x,this._z=h*f*x-m*v*_,this._w=h*f*_-m*v*x;break;case"XZY":this._x=m*f*_-h*v*x,this._y=h*v*_-m*f*x,this._z=h*f*x+m*v*_,this._w=h*f*_+m*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const o=t/2,i=Math.sin(o);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(o),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,o=t[0],i=t[4],l=t[8],a=t[1],c=t[5],p=t[9],h=t[2],f=t[6],_=t[10],m=o+c+_;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(f-p)*v,this._y=(l-h)*v,this._z=(a-i)*v}else if(o>c&&o>_){const v=2*Math.sqrt(1+o-c-_);this._w=(f-p)/v,this._x=.25*v,this._y=(i+a)/v,this._z=(l+h)/v}else if(c>_){const v=2*Math.sqrt(1+c-o-_);this._w=(l-h)/v,this._x=(i+a)/v,this._y=.25*v,this._z=(p+f)/v}else{const v=2*Math.sqrt(1+_-o-c);this._w=(a-i)/v,this._x=(l+h)/v,this._y=(p+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let o=e.dot(t)+1;return o<Number.EPSILON?(o=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=o):(this._x=0,this._y=-e.z,this._z=e.y,this._w=o)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=o),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pi(this.dot(e),-1,1)))}rotateTowards(e,t){const o=this.angleTo(e);if(o===0)return this;const i=Math.min(1,t/o);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const o=e._x,i=e._y,l=e._z,a=e._w,c=t._x,p=t._y,h=t._z,f=t._w;return this._x=o*f+a*c+i*h-l*p,this._y=i*f+a*p+l*c-o*h,this._z=l*f+a*h+o*p-i*c,this._w=a*f-o*c-i*p-l*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const o=this._x,i=this._y,l=this._z,a=this._w;let c=a*e._w+o*e._x+i*e._y+l*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=a,this._x=o,this._y=i,this._z=l,this;const p=1-c*c;if(p<=Number.EPSILON){const v=1-t;return this._w=v*a+t*this._w,this._x=v*o+t*this._x,this._y=v*i+t*this._y,this._z=v*l+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(p),f=Math.atan2(h,c),_=Math.sin((1-t)*f)/h,m=Math.sin(t*f)/h;return this._w=a*_+this._w*m,this._x=o*_+this._x*m,this._y=i*_+this._y*m,this._z=l*_+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,o){return this.copy(e).slerp(t,o)}random(){const e=Math.random(),t=Math.sqrt(1-e),o=Math.sqrt(e),i=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(i),o*Math.sin(l),o*Math.cos(l),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}rr.prototype.isQuaternion=!0;class Y{constructor(e=0,t=0,o=0){this.x=e,this.y=t,this.z=o}set(e,t,o){return o===void 0&&(o=this.z),this.x=e,this.y=t,this.z=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(t1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,o=this.y,i=this.z,l=e.elements;return this.x=l[0]*t+l[3]*o+l[6]*i,this.y=l[1]*t+l[4]*o+l[7]*i,this.z=l[2]*t+l[5]*o+l[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,o=this.y,i=this.z,l=e.elements,a=1/(l[3]*t+l[7]*o+l[11]*i+l[15]);return this.x=(l[0]*t+l[4]*o+l[8]*i+l[12])*a,this.y=(l[1]*t+l[5]*o+l[9]*i+l[13])*a,this.z=(l[2]*t+l[6]*o+l[10]*i+l[14])*a,this}applyQuaternion(e){const t=this.x,o=this.y,i=this.z,l=e.x,a=e.y,c=e.z,p=e.w,h=p*t+a*i-c*o,f=p*o+c*t-l*i,_=p*i+l*o-a*t,m=-l*t-a*o-c*i;return this.x=h*p+m*-l+f*-c-_*-a,this.y=f*p+m*-a+_*-l-h*-c,this.z=_*p+m*-c+h*-a-f*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,o=this.y,i=this.z,l=e.elements;return this.x=l[0]*t+l[4]*o+l[8]*i,this.y=l[1]*t+l[5]*o+l[9]*i,this.z=l[2]*t+l[6]*o+l[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(e,Math.min(t,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,o){return this.x=e.x+(t.x-e.x)*o,this.y=e.y+(t.y-e.y)*o,this.z=e.z+(t.z-e.z)*o,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const o=e.x,i=e.y,l=e.z,a=t.x,c=t.y,p=t.z;return this.x=i*p-l*c,this.y=l*a-o*p,this.z=o*c-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const o=e.dot(this)/t;return this.copy(e).multiplyScalar(o)}projectOnPlane(e){return zC.copy(this).projectOnVector(e),this.sub(zC)}reflect(e){return this.sub(zC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const o=this.dot(e)/t;return Math.acos(pi(o,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,o=this.y-e.y,i=this.z-e.z;return t*t+o*o+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,o){const i=Math.sin(t)*e;return this.x=i*Math.sin(o),this.y=Math.cos(t)*e,this.z=i*Math.cos(o),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,o){return this.x=e*Math.sin(t),this.y=o,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),o=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=o,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,o){return o!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,o=Math.sqrt(1-e**2);return this.x=o*Math.cos(t),this.y=o*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Y.prototype.isVector3=!0;const zC=new Y,t1=new rr;class Pi{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,o=1/0,i=1/0,l=-1/0,a=-1/0,c=-1/0;for(let p=0,h=e.length;p<h;p+=3){const f=e[p],_=e[p+1],m=e[p+2];f<t&&(t=f),_<o&&(o=_),m<i&&(i=m),f>l&&(l=f),_>a&&(a=_),m>c&&(c=m)}return this.min.set(t,o,i),this.max.set(l,a,c),this}setFromBufferAttribute(e){let t=1/0,o=1/0,i=1/0,l=-1/0,a=-1/0,c=-1/0;for(let p=0,h=e.count;p<h;p++){const f=e.getX(p),_=e.getY(p),m=e.getZ(p);f<t&&(t=f),_<o&&(o=_),m<i&&(i=m),f>l&&(l=f),_>a&&(a=_),m>c&&(c=m)}return this.min.set(t,o,i),this.max.set(l,a,c),this}setFromPoints(e){this.makeEmpty();for(let t=0,o=e.length;t<o;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const o=Yh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(o),this.max.copy(e).add(o),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const o=e.geometry;if(o!==void 0)if(t&&o.attributes!=null&&o.attributes.position!==void 0){const l=o.attributes.position;for(let a=0,c=l.count;a<c;a++)Yh.fromBufferAttribute(l,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Yh)}else o.boundingBox===null&&o.computeBoundingBox(),XC.copy(o.boundingBox),XC.applyMatrix4(e.matrixWorld),this.union(XC);const i=e.children;for(let l=0,a=i.length;l<a;l++)this.expandByObject(i[l],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Yh),Yh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,o;return e.normal.x>0?(t=e.normal.x*this.min.x,o=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,o=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,o+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,o+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,o+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,o+=e.normal.z*this.min.z),t<=-e.constant&&o>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ng),LT.subVectors(this.max,Ng),$d.subVectors(e.a,Ng),Pd.subVectors(e.b,Ng),Fd.subVectors(e.c,Ng),ku.subVectors(Pd,$d),Au.subVectors(Fd,Pd),qh.subVectors($d,Fd);let t=[0,-ku.z,ku.y,0,-Au.z,Au.y,0,-qh.z,qh.y,ku.z,0,-ku.x,Au.z,0,-Au.x,qh.z,0,-qh.x,-ku.y,ku.x,0,-Au.y,Au.x,0,-qh.y,qh.x,0];return!jC(t,$d,Pd,Fd,LT)||(t=[1,0,0,0,1,0,0,0,1],!jC(t,$d,Pd,Fd,LT))?!1:(NT.crossVectors(ku,Au),t=[NT.x,NT.y,NT.z],jC(t,$d,Pd,Fd,LT))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Yh.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Yh).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(kc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Pi.prototype.isBox3=!0;const kc=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Yh=new Y,XC=new Pi,$d=new Y,Pd=new Y,Fd=new Y,ku=new Y,Au=new Y,qh=new Y,Ng=new Y,LT=new Y,NT=new Y,Qh=new Y;function jC(r,e,t,o,i){for(let l=0,a=r.length-3;l<=a;l+=3){Qh.fromArray(r,l);const c=i.x*Math.abs(Qh.x)+i.y*Math.abs(Qh.y)+i.z*Math.abs(Qh.z),p=e.dot(Qh),h=t.dot(Qh),f=o.dot(Qh);if(Math.max(-Math.max(p,h,f),Math.min(p,h,f))>c)return!1}return!0}const S5=new Pi,n1=new Y,$T=new Y,JC=new Y;class cc{constructor(e=new Y,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const o=this.center;t!==void 0?o.copy(t):S5.setFromPoints(e).getCenter(o);let i=0;for(let l=0,a=e.length;l<a;l++)i=Math.max(i,o.distanceToSquared(e[l]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const o=this.center.distanceToSquared(e);return t.copy(e),o>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){JC.subVectors(e,this.center);const t=JC.lengthSq();if(t>this.radius*this.radius){const o=Math.sqrt(t),i=(o-this.radius)*.5;this.center.add(JC.multiplyScalar(i/o)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?$T.set(0,0,1).multiplyScalar(e.radius):$T.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(n1.copy(e.center).add($T)),this.expandByPoint(n1.copy(e.center).sub($T)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ac=new Y,KC=new Y,PT=new Y,wu=new Y,YC=new Y,FT=new Y,qC=new Y;class Ah{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ac)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const o=t.dot(this.direction);return o<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(o).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ac.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ac.copy(this.direction).multiplyScalar(t).add(this.origin),Ac.distanceToSquared(e))}distanceSqToSegment(e,t,o,i){KC.copy(e).add(t).multiplyScalar(.5),PT.copy(t).sub(e).normalize(),wu.copy(this.origin).sub(KC);const l=e.distanceTo(t)*.5,a=-this.direction.dot(PT),c=wu.dot(this.direction),p=-wu.dot(PT),h=wu.lengthSq(),f=Math.abs(1-a*a);let _,m,v,x;if(f>0)if(_=a*p-c,m=a*c-p,x=l*f,_>=0)if(m>=-x)if(m<=x){const b=1/f;_*=b,m*=b,v=_*(_+a*m+2*c)+m*(a*_+m+2*p)+h}else m=l,_=Math.max(0,-(a*m+c)),v=-_*_+m*(m+2*p)+h;else m=-l,_=Math.max(0,-(a*m+c)),v=-_*_+m*(m+2*p)+h;else m<=-x?(_=Math.max(0,-(-a*l+c)),m=_>0?-l:Math.min(Math.max(-l,-p),l),v=-_*_+m*(m+2*p)+h):m<=x?(_=0,m=Math.min(Math.max(-l,-p),l),v=m*(m+2*p)+h):(_=Math.max(0,-(a*l+c)),m=_>0?l:Math.min(Math.max(-l,-p),l),v=-_*_+m*(m+2*p)+h);else m=a>0?-l:l,_=Math.max(0,-(a*m+c)),v=-_*_+m*(m+2*p)+h;return o&&o.copy(this.direction).multiplyScalar(_).add(this.origin),i&&i.copy(PT).multiplyScalar(m).add(KC),v}intersectSphere(e,t){Ac.subVectors(e.center,this.origin);const o=Ac.dot(this.direction),i=Ac.dot(Ac)-o*o,l=e.radius*e.radius;if(i>l)return null;const a=Math.sqrt(l-i),c=o-a,p=o+a;return c<0&&p<0?null:c<0?this.at(p,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const o=-(this.origin.dot(e.normal)+e.constant)/t;return o>=0?o:null}intersectPlane(e,t){const o=this.distanceToPlane(e);return o===null?null:this.at(o,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let o,i,l,a,c,p;const h=1/this.direction.x,f=1/this.direction.y,_=1/this.direction.z,m=this.origin;return h>=0?(o=(e.min.x-m.x)*h,i=(e.max.x-m.x)*h):(o=(e.max.x-m.x)*h,i=(e.min.x-m.x)*h),f>=0?(l=(e.min.y-m.y)*f,a=(e.max.y-m.y)*f):(l=(e.max.y-m.y)*f,a=(e.min.y-m.y)*f),o>a||l>i||((l>o||o!==o)&&(o=l),(a<i||i!==i)&&(i=a),_>=0?(c=(e.min.z-m.z)*_,p=(e.max.z-m.z)*_):(c=(e.max.z-m.z)*_,p=(e.min.z-m.z)*_),o>p||c>i)||((c>o||o!==o)&&(o=c),(p<i||i!==i)&&(i=p),i<0)?null:this.at(o>=0?o:i,t)}intersectsBox(e){return this.intersectBox(e,Ac)!==null}intersectTriangle(e,t,o,i,l){YC.subVectors(t,e),FT.subVectors(o,e),qC.crossVectors(YC,FT);let a=this.direction.dot(qC),c;if(a>0){if(i)return null;c=1}else if(a<0)c=-1,a=-a;else return null;wu.subVectors(this.origin,e);const p=c*this.direction.dot(FT.crossVectors(wu,FT));if(p<0)return null;const h=c*this.direction.dot(YC.cross(wu));if(h<0||p+h>a)return null;const f=-c*wu.dot(qC);return f<0?null:this.at(f/a,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,o,i,l,a,c,p,h,f,_,m,v,x,b,A){const k=this.elements;return k[0]=e,k[4]=t,k[8]=o,k[12]=i,k[1]=l,k[5]=a,k[9]=c,k[13]=p,k[2]=h,k[6]=f,k[10]=_,k[14]=m,k[3]=v,k[7]=x,k[11]=b,k[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const t=this.elements,o=e.elements;return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],this}copyPosition(e){const t=this.elements,o=e.elements;return t[12]=o[12],t[13]=o[13],t[14]=o[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,o){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(e,t,o){return this.set(e.x,t.x,o.x,0,e.y,t.y,o.y,0,e.z,t.z,o.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,o=e.elements,i=1/Ud.setFromMatrixColumn(e,0).length(),l=1/Ud.setFromMatrixColumn(e,1).length(),a=1/Ud.setFromMatrixColumn(e,2).length();return t[0]=o[0]*i,t[1]=o[1]*i,t[2]=o[2]*i,t[3]=0,t[4]=o[4]*l,t[5]=o[5]*l,t[6]=o[6]*l,t[7]=0,t[8]=o[8]*a,t[9]=o[9]*a,t[10]=o[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,o=e.x,i=e.y,l=e.z,a=Math.cos(o),c=Math.sin(o),p=Math.cos(i),h=Math.sin(i),f=Math.cos(l),_=Math.sin(l);if(e.order==="XYZ"){const m=a*f,v=a*_,x=c*f,b=c*_;t[0]=p*f,t[4]=-p*_,t[8]=h,t[1]=v+x*h,t[5]=m-b*h,t[9]=-c*p,t[2]=b-m*h,t[6]=x+v*h,t[10]=a*p}else if(e.order==="YXZ"){const m=p*f,v=p*_,x=h*f,b=h*_;t[0]=m+b*c,t[4]=x*c-v,t[8]=a*h,t[1]=a*_,t[5]=a*f,t[9]=-c,t[2]=v*c-x,t[6]=b+m*c,t[10]=a*p}else if(e.order==="ZXY"){const m=p*f,v=p*_,x=h*f,b=h*_;t[0]=m-b*c,t[4]=-a*_,t[8]=x+v*c,t[1]=v+x*c,t[5]=a*f,t[9]=b-m*c,t[2]=-a*h,t[6]=c,t[10]=a*p}else if(e.order==="ZYX"){const m=a*f,v=a*_,x=c*f,b=c*_;t[0]=p*f,t[4]=x*h-v,t[8]=m*h+b,t[1]=p*_,t[5]=b*h+m,t[9]=v*h-x,t[2]=-h,t[6]=c*p,t[10]=a*p}else if(e.order==="YZX"){const m=a*p,v=a*h,x=c*p,b=c*h;t[0]=p*f,t[4]=b-m*_,t[8]=x*_+v,t[1]=_,t[5]=a*f,t[9]=-c*f,t[2]=-h*f,t[6]=v*_+x,t[10]=m-b*_}else if(e.order==="XZY"){const m=a*p,v=a*h,x=c*p,b=c*h;t[0]=p*f,t[4]=-_,t[8]=h*f,t[1]=m*_+b,t[5]=a*f,t[9]=v*_-x,t[2]=x*_-v,t[6]=c*f,t[10]=b*_+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(C5,e,b5)}lookAt(e,t,o){const i=this.elements;return Fs.subVectors(e,t),Fs.lengthSq()===0&&(Fs.z=1),Fs.normalize(),Mu.crossVectors(o,Fs),Mu.lengthSq()===0&&(Math.abs(o.z)===1?Fs.x+=1e-4:Fs.z+=1e-4,Fs.normalize(),Mu.crossVectors(o,Fs)),Mu.normalize(),UT.crossVectors(Fs,Mu),i[0]=Mu.x,i[4]=UT.x,i[8]=Fs.x,i[1]=Mu.y,i[5]=UT.y,i[9]=Fs.y,i[2]=Mu.z,i[6]=UT.z,i[10]=Fs.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const o=e.elements,i=t.elements,l=this.elements,a=o[0],c=o[4],p=o[8],h=o[12],f=o[1],_=o[5],m=o[9],v=o[13],x=o[2],b=o[6],A=o[10],k=o[14],E=o[3],M=o[7],R=o[11],I=o[15],L=i[0],F=i[4],U=i[8],X=i[12],j=i[1],P=i[5],z=i[9],K=i[13],te=i[2],oe=i[6],ee=i[10],pe=i[14],ae=i[3],Ee=i[7],S=i[11],D=i[15];return l[0]=a*L+c*j+p*te+h*ae,l[4]=a*F+c*P+p*oe+h*Ee,l[8]=a*U+c*z+p*ee+h*S,l[12]=a*X+c*K+p*pe+h*D,l[1]=f*L+_*j+m*te+v*ae,l[5]=f*F+_*P+m*oe+v*Ee,l[9]=f*U+_*z+m*ee+v*S,l[13]=f*X+_*K+m*pe+v*D,l[2]=x*L+b*j+A*te+k*ae,l[6]=x*F+b*P+A*oe+k*Ee,l[10]=x*U+b*z+A*ee+k*S,l[14]=x*X+b*K+A*pe+k*D,l[3]=E*L+M*j+R*te+I*ae,l[7]=E*F+M*P+R*oe+I*Ee,l[11]=E*U+M*z+R*ee+I*S,l[15]=E*X+M*K+R*pe+I*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],o=e[4],i=e[8],l=e[12],a=e[1],c=e[5],p=e[9],h=e[13],f=e[2],_=e[6],m=e[10],v=e[14],x=e[3],b=e[7],A=e[11],k=e[15];return x*(+l*p*_-i*h*_-l*c*m+o*h*m+i*c*v-o*p*v)+b*(+t*p*v-t*h*m+l*a*m-i*a*v+i*h*f-l*p*f)+A*(+t*h*_-t*c*v-l*a*_+o*a*v+l*c*f-o*h*f)+k*(-i*c*f-t*p*_+t*c*m+i*a*_-o*a*m+o*p*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,o){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=o),this}invert(){const e=this.elements,t=e[0],o=e[1],i=e[2],l=e[3],a=e[4],c=e[5],p=e[6],h=e[7],f=e[8],_=e[9],m=e[10],v=e[11],x=e[12],b=e[13],A=e[14],k=e[15],E=_*A*h-b*m*h+b*p*v-c*A*v-_*p*k+c*m*k,M=x*m*h-f*A*h-x*p*v+a*A*v+f*p*k-a*m*k,R=f*b*h-x*_*h+x*c*v-a*b*v-f*c*k+a*_*k,I=x*_*p-f*b*p-x*c*m+a*b*m+f*c*A-a*_*A,L=t*E+o*M+i*R+l*I;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/L;return e[0]=E*F,e[1]=(b*m*l-_*A*l-b*i*v+o*A*v+_*i*k-o*m*k)*F,e[2]=(c*A*l-b*p*l+b*i*h-o*A*h-c*i*k+o*p*k)*F,e[3]=(_*p*l-c*m*l-_*i*h+o*m*h+c*i*v-o*p*v)*F,e[4]=M*F,e[5]=(f*A*l-x*m*l+x*i*v-t*A*v-f*i*k+t*m*k)*F,e[6]=(x*p*l-a*A*l-x*i*h+t*A*h+a*i*k-t*p*k)*F,e[7]=(a*m*l-f*p*l+f*i*h-t*m*h-a*i*v+t*p*v)*F,e[8]=R*F,e[9]=(x*_*l-f*b*l-x*o*v+t*b*v+f*o*k-t*_*k)*F,e[10]=(a*b*l-x*c*l+x*o*h-t*b*h-a*o*k+t*c*k)*F,e[11]=(f*c*l-a*_*l-f*o*h+t*_*h+a*o*v-t*c*v)*F,e[12]=I*F,e[13]=(f*b*i-x*_*i+x*o*m-t*b*m-f*o*A+t*_*A)*F,e[14]=(x*c*i-a*b*i-x*o*p+t*b*p+a*o*A-t*c*A)*F,e[15]=(a*_*i-f*c*i+f*o*p-t*_*p-a*o*m+t*c*m)*F,this}scale(e){const t=this.elements,o=e.x,i=e.y,l=e.z;return t[0]*=o,t[4]*=i,t[8]*=l,t[1]*=o,t[5]*=i,t[9]*=l,t[2]*=o,t[6]*=i,t[10]*=l,t[3]*=o,t[7]*=i,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,o,i))}makeTranslation(e,t,o){return this.set(1,0,0,e,0,1,0,t,0,0,1,o,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),o=Math.sin(e);return this.set(1,0,0,0,0,t,-o,0,0,o,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),o=Math.sin(e);return this.set(t,0,o,0,0,1,0,0,-o,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),o=Math.sin(e);return this.set(t,-o,0,0,o,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const o=Math.cos(t),i=Math.sin(t),l=1-o,a=e.x,c=e.y,p=e.z,h=l*a,f=l*c;return this.set(h*a+o,h*c-i*p,h*p+i*c,0,h*c+i*p,f*c+o,f*p-i*a,0,h*p-i*c,f*p+i*a,l*p*p+o,0,0,0,0,1),this}makeScale(e,t,o){return this.set(e,0,0,0,0,t,0,0,0,0,o,0,0,0,0,1),this}makeShear(e,t,o,i,l,a){return this.set(1,o,l,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,o){const i=this.elements,l=t._x,a=t._y,c=t._z,p=t._w,h=l+l,f=a+a,_=c+c,m=l*h,v=l*f,x=l*_,b=a*f,A=a*_,k=c*_,E=p*h,M=p*f,R=p*_,I=o.x,L=o.y,F=o.z;return i[0]=(1-(b+k))*I,i[1]=(v+R)*I,i[2]=(x-M)*I,i[3]=0,i[4]=(v-R)*L,i[5]=(1-(m+k))*L,i[6]=(A+E)*L,i[7]=0,i[8]=(x+M)*F,i[9]=(A-E)*F,i[10]=(1-(m+b))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,o){const i=this.elements;let l=Ud.set(i[0],i[1],i[2]).length();const a=Ud.set(i[4],i[5],i[6]).length(),c=Ud.set(i[8],i[9],i[10]).length();this.determinant()<0&&(l=-l),e.x=i[12],e.y=i[13],e.z=i[14],ql.copy(this);const h=1/l,f=1/a,_=1/c;return ql.elements[0]*=h,ql.elements[1]*=h,ql.elements[2]*=h,ql.elements[4]*=f,ql.elements[5]*=f,ql.elements[6]*=f,ql.elements[8]*=_,ql.elements[9]*=_,ql.elements[10]*=_,t.setFromRotationMatrix(ql),o.x=l,o.y=a,o.z=c,this}makePerspective(e,t,o,i,l,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const c=this.elements,p=2*l/(t-e),h=2*l/(o-i),f=(t+e)/(t-e),_=(o+i)/(o-i),m=-(a+l)/(a-l),v=-2*a*l/(a-l);return c[0]=p,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=_,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,o,i,l,a){const c=this.elements,p=1/(t-e),h=1/(o-i),f=1/(a-l),_=(t+e)*p,m=(o+i)*h,v=(a+l)*f;return c[0]=2*p,c[4]=0,c[8]=0,c[12]=-_,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-m,c[2]=0,c[6]=0,c[10]=-2*f,c[14]=-v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,o=e.elements;for(let i=0;i<16;i++)if(t[i]!==o[i])return!1;return!0}fromArray(e,t=0){for(let o=0;o<16;o++)this.elements[o]=e[o+t];return this}toArray(e=[],t=0){const o=this.elements;return e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],e[t+3]=o[3],e[t+4]=o[4],e[t+5]=o[5],e[t+6]=o[6],e[t+7]=o[7],e[t+8]=o[8],e[t+9]=o[9],e[t+10]=o[10],e[t+11]=o[11],e[t+12]=o[12],e[t+13]=o[13],e[t+14]=o[14],e[t+15]=o[15],e}}wt.prototype.isMatrix4=!0;const Ud=new Y,ql=new wt,C5=new Y(0,0,0),b5=new Y(1,1,1),Mu=new Y,UT=new Y,Fs=new Y,o1=new wt,r1=new rr;class ad{constructor(e=0,t=0,o=0,i=ad.DefaultOrder){this._x=e,this._y=t,this._z=o,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,o,i=this._order){return this._x=e,this._y=t,this._z=o,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,o=!0){const i=e.elements,l=i[0],a=i[4],c=i[8],p=i[1],h=i[5],f=i[9],_=i[2],m=i[6],v=i[10];switch(t){case"XYZ":this._y=Math.asin(pi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-a,l)):(this._x=Math.atan2(m,h),this._z=0);break;case"YXZ":this._x=Math.asin(-pi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,v),this._z=Math.atan2(p,h)):(this._y=Math.atan2(-_,l),this._z=0);break;case"ZXY":this._x=Math.asin(pi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-_,v),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(p,l));break;case"ZYX":this._y=Math.asin(-pi(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(p,l)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(pi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-_,l)):(this._x=0,this._y=Math.atan2(c,v));break;case"XZY":this._z=Math.asin(-pi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(c,l)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,o===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,o){return o1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o1,t,o)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return r1.setFromEuler(this),this.setFromQuaternion(r1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Y(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ad.prototype.isEuler=!0;ad.DefaultOrder="XYZ";ad.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Pp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let k5=0;const i1=new Y,Hd=new rr,wc=new wt,HT=new Y,$g=new Y,A5=new Y,w5=new rr,s1=new Y(1,0,0),l1=new Y(0,1,0),a1=new Y(0,0,1),M5={type:"added"},c1={type:"removed"};class dn extends nu{constructor(){super();Object.defineProperty(this,"id",{value:k5++}),this.uuid=Qs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dn.DefaultUp.clone();const e=new Y,t=new ad,o=new rr,i=new Y(1,1,1);function l(){o.setFromEuler(t,!1)}function a(){t.setFromQuaternion(o,void 0,!1)}t._onChange(l),o._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new wt},normalMatrix:{value:new Or}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=dn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Pp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hd.setFromAxisAngle(e,t),this.quaternion.multiply(Hd),this}rotateOnWorldAxis(e,t){return Hd.setFromAxisAngle(e,t),this.quaternion.premultiply(Hd),this}rotateX(e){return this.rotateOnAxis(s1,e)}rotateY(e){return this.rotateOnAxis(l1,e)}rotateZ(e){return this.rotateOnAxis(a1,e)}translateOnAxis(e,t){return i1.copy(e).applyQuaternion(this.quaternion),this.position.add(i1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(s1,e)}translateY(e){return this.translateOnAxis(l1,e)}translateZ(e){return this.translateOnAxis(a1,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(wc.copy(this.matrixWorld).invert())}lookAt(e,t,o){e.isVector3?HT.copy(e):HT.set(e,t,o);const i=this.parent;this.updateWorldMatrix(!0,!1),$g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wc.lookAt($g,HT,this.up):wc.lookAt(HT,$g,this.up),this.quaternion.setFromRotationMatrix(wc),i&&(wc.extractRotation(i.matrixWorld),Hd.setFromRotationMatrix(wc),this.quaternion.premultiply(Hd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(M5)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(c1)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(c1)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),wc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),wc.multiply(e.parent.matrixWorld)),e.applyMatrix4(wc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let o=0,i=this.children.length;o<i;o++){const a=this.children[o].getObjectByProperty(e,t);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($g,e,A5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($g,w5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let o=0,i=t.length;o<i;o++)t[o].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let o=0,i=t.length;o<i;o++)t[o].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let o=0,i=t.length;o<i;o++)t[o].updateMatrixWorld(e)}updateWorldMatrix(e,t){const o=this.parent;if(e===!0&&o!==null&&o.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let l=0,a=i.length;l<a;l++)i[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",o={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},o.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function l(c,p){return c[p.uuid]===void 0&&(c[p.uuid]=p.toJSON(e)),p.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=l(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const p=c.shapes;if(Array.isArray(p))for(let h=0,f=p.length;h<f;h++){const _=p[h];l(e.shapes,_)}else l(e.shapes,p)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let p=0,h=this.material.length;p<h;p++)c.push(l(e.materials,this.material[p]));i.material=c}else i.material=l(e.materials,this.material);if(this.children.length>0){i.children=[];for(let c=0;c<this.children.length;c++)i.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let c=0;c<this.animations.length;c++){const p=this.animations[c];i.animations.push(l(e.animations,p))}}if(t){const c=a(e.geometries),p=a(e.materials),h=a(e.textures),f=a(e.images),_=a(e.shapes),m=a(e.skeletons),v=a(e.animations);c.length>0&&(o.geometries=c),p.length>0&&(o.materials=p),h.length>0&&(o.textures=h),f.length>0&&(o.images=f),_.length>0&&(o.shapes=_),m.length>0&&(o.skeletons=m),v.length>0&&(o.animations=v)}return o.object=i,o;function a(c){const p=[];for(const h in c){const f=c[h];delete f.metadata,p.push(f)}return p}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let o=0;o<e.children.length;o++){const i=e.children[o];this.add(i.clone())}return this}}dn.DefaultUp=new Y(0,1,0);dn.DefaultMatrixAutoUpdate=!0;dn.prototype.isObject3D=!0;const Ql=new Y,Mc=new Y,QC=new Y,Rc=new Y,Gd=new Y,Vd=new Y,u1=new Y,ZC=new Y,eb=new Y,tb=new Y;class pr{constructor(e=new Y,t=new Y,o=new Y){this.a=e,this.b=t,this.c=o}static getNormal(e,t,o,i){i.subVectors(o,t),Ql.subVectors(e,t),i.cross(Ql);const l=i.lengthSq();return l>0?i.multiplyScalar(1/Math.sqrt(l)):i.set(0,0,0)}static getBarycoord(e,t,o,i,l){Ql.subVectors(i,t),Mc.subVectors(o,t),QC.subVectors(e,t);const a=Ql.dot(Ql),c=Ql.dot(Mc),p=Ql.dot(QC),h=Mc.dot(Mc),f=Mc.dot(QC),_=a*h-c*c;if(_===0)return l.set(-2,-1,-1);const m=1/_,v=(h*p-c*f)*m,x=(a*f-c*p)*m;return l.set(1-v-x,x,v)}static containsPoint(e,t,o,i){return this.getBarycoord(e,t,o,i,Rc),Rc.x>=0&&Rc.y>=0&&Rc.x+Rc.y<=1}static getUV(e,t,o,i,l,a,c,p){return this.getBarycoord(e,t,o,i,Rc),p.set(0,0),p.addScaledVector(l,Rc.x),p.addScaledVector(a,Rc.y),p.addScaledVector(c,Rc.z),p}static isFrontFacing(e,t,o,i){return Ql.subVectors(o,t),Mc.subVectors(e,t),Ql.cross(Mc).dot(i)<0}set(e,t,o){return this.a.copy(e),this.b.copy(t),this.c.copy(o),this}setFromPointsAndIndices(e,t,o,i){return this.a.copy(e[t]),this.b.copy(e[o]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,o,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,o),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ql.subVectors(this.c,this.b),Mc.subVectors(this.a,this.b),Ql.cross(Mc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,o,i,l){return pr.getUV(e,this.a,this.b,this.c,t,o,i,l)}containsPoint(e){return pr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const o=this.a,i=this.b,l=this.c;let a,c;Gd.subVectors(i,o),Vd.subVectors(l,o),ZC.subVectors(e,o);const p=Gd.dot(ZC),h=Vd.dot(ZC);if(p<=0&&h<=0)return t.copy(o);eb.subVectors(e,i);const f=Gd.dot(eb),_=Vd.dot(eb);if(f>=0&&_<=f)return t.copy(i);const m=p*_-f*h;if(m<=0&&p>=0&&f<=0)return a=p/(p-f),t.copy(o).addScaledVector(Gd,a);tb.subVectors(e,l);const v=Gd.dot(tb),x=Vd.dot(tb);if(x>=0&&v<=x)return t.copy(l);const b=v*h-p*x;if(b<=0&&h>=0&&x<=0)return c=h/(h-x),t.copy(o).addScaledVector(Vd,c);const A=f*x-v*_;if(A<=0&&_-f>=0&&v-x>=0)return u1.subVectors(l,i),c=(_-f)/(_-f+(v-x)),t.copy(i).addScaledVector(u1,c);const k=1/(A+b+m);return a=b*k,c=m*k,t.copy(o).addScaledVector(Gd,a).addScaledVector(Vd,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let R5=0;class dr extends nu{constructor(){super();Object.defineProperty(this,"id",{value:R5++}),this.uuid=Qs(),this.name="",this.type="Material",this.fog=!0,this.blending=Vf,this.side=hh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=yM,this.blendDst=vM,this.blendEquation=yp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=QE,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=QF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cE,this.stencilZFail=cE,this.stencilZPass=cE,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const o=e[t];if(o===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=o===_M;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(o):i&&i.isVector3&&o&&o.isVector3?i.copy(o):this[t]=o}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const o={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.sheen!==void 0&&(o.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(o.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(o.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(o.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(o.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearcoat!==void 0&&(o.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(o.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(o.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(o.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,o.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(o.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(e).uuid,o.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(o.aoMap=this.aoMap.toJSON(e).uuid,o.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(e).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(e).uuid,o.normalMapType=this.normalMapType,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(e).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(o.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(o.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(o.combine=this.combine)),this.envMapIntensity!==void 0&&(o.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(o.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(o.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(o.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(o.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(o.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(o.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(o.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(o.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(o.size=this.size),this.shadowSide!==null&&(o.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==Vf&&(o.blending=this.blending),this.side!==hh&&(o.side=this.side),this.vertexColors&&(o.vertexColors=!0),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=this.transparent),o.depthFunc=this.depthFunc,o.depthTest=this.depthTest,o.depthWrite=this.depthWrite,o.colorWrite=this.colorWrite,o.stencilWrite=this.stencilWrite,o.stencilWriteMask=this.stencilWriteMask,o.stencilFunc=this.stencilFunc,o.stencilRef=this.stencilRef,o.stencilFuncMask=this.stencilFuncMask,o.stencilFail=this.stencilFail,o.stencilZFail=this.stencilZFail,o.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(o.rotation=this.rotation),this.polygonOffset===!0&&(o.polygonOffset=!0),this.polygonOffsetFactor!==0&&(o.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(o.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(o.linewidth=this.linewidth),this.dashSize!==void 0&&(o.dashSize=this.dashSize),this.gapSize!==void 0&&(o.gapSize=this.gapSize),this.scale!==void 0&&(o.scale=this.scale),this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(o.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(o.wireframe=this.wireframe),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(o.flatShading=this.flatShading),this.visible===!1&&(o.visible=!1),this.toneMapped===!1&&(o.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData);function i(l){const a=[];for(const c in l){const p=l[c];delete p.metadata,a.push(p)}return a}if(t){const l=i(e.textures),a=i(e.images);l.length>0&&(o.textures=l),a.length>0&&(o.images=a)}return o}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let o=null;if(t!==null){const i=t.length;o=new Array(i);for(let l=0;l!==i;++l)o[l]=t[l].clone()}return this.clippingPlanes=o,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}dr.prototype.isMaterial=!0;class Es extends dr{constructor(e){super();this.type="MeshBasicMaterial",this.color=new tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ev,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Es.prototype.isMeshBasicMaterial=!0;const mo=new Y,GT=new Ve;class vn{constructor(e,t,o){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=o===!0,this.usage=um,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,o){e*=this.itemSize,o*=t.itemSize;for(let i=0,l=this.itemSize;i<l;i++)this.array[e+i]=t.array[o+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let o=0;for(let i=0,l=e.length;i<l;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new tt),t[o++]=a.r,t[o++]=a.g,t[o++]=a.b}return this}copyVector2sArray(e){const t=this.array;let o=0;for(let i=0,l=e.length;i<l;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Ve),t[o++]=a.x,t[o++]=a.y}return this}copyVector3sArray(e){const t=this.array;let o=0;for(let i=0,l=e.length;i<l;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Y),t[o++]=a.x,t[o++]=a.y,t[o++]=a.z}return this}copyVector4sArray(e){const t=this.array;let o=0;for(let i=0,l=e.length;i<l;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Gn),t[o++]=a.x,t[o++]=a.y,t[o++]=a.z,t[o++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,o=this.count;t<o;t++)GT.fromBufferAttribute(this,t),GT.applyMatrix3(e),this.setXY(t,GT.x,GT.y);else if(this.itemSize===3)for(let t=0,o=this.count;t<o;t++)mo.fromBufferAttribute(this,t),mo.applyMatrix3(e),this.setXYZ(t,mo.x,mo.y,mo.z);return this}applyMatrix4(e){for(let t=0,o=this.count;t<o;t++)mo.x=this.getX(t),mo.y=this.getY(t),mo.z=this.getZ(t),mo.applyMatrix4(e),this.setXYZ(t,mo.x,mo.y,mo.z);return this}applyNormalMatrix(e){for(let t=0,o=this.count;t<o;t++)mo.x=this.getX(t),mo.y=this.getY(t),mo.z=this.getZ(t),mo.applyNormalMatrix(e),this.setXYZ(t,mo.x,mo.y,mo.z);return this}transformDirection(e){for(let t=0,o=this.count;t<o;t++)mo.x=this.getX(t),mo.y=this.getY(t),mo.z=this.getZ(t),mo.transformDirection(e),this.setXYZ(t,mo.x,mo.y,mo.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=o,this}setXYZ(e,t,o,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=o,this.array[e+2]=i,this}setXYZW(e,t,o,i,l){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=o,this.array[e+2]=i,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==um&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}vn.prototype.isBufferAttribute=!0;class r2 extends vn{constructor(e,t,o){super(new Int8Array(e),t,o)}}class i2 extends vn{constructor(e,t,o){super(new Uint8Array(e),t,o)}}class s2 extends vn{constructor(e,t,o){super(new Uint8ClampedArray(e),t,o)}}class l2 extends vn{constructor(e,t,o){super(new Int16Array(e),t,o)}}class Jx extends vn{constructor(e,t,o){super(new Uint16Array(e),t,o)}}class a2 extends vn{constructor(e,t,o){super(new Int32Array(e),t,o)}}class Kx extends vn{constructor(e,t,o){super(new Uint32Array(e),t,o)}}class c2 extends vn{constructor(e,t,o){super(new Uint16Array(e),t,o)}}c2.prototype.isFloat16BufferAttribute=!0;class Mt extends vn{constructor(e,t,o){super(new Float32Array(e),t,o)}}class u2 extends vn{constructor(e,t,o){super(new Float64Array(e),t,o)}}let B5=0;const _l=new wt,nb=new dn,Wd=new Y,Us=new Pi,Pg=new Pi,zr=new Y;class Ut extends nu{constructor(){super();Object.defineProperty(this,"id",{value:B5++}),this.uuid=Qs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(t2(e)?Kx:Jx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,o=0){this.groups.push({start:e,count:t,materialIndex:o})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const o=this.attributes.normal;if(o!==void 0){const l=new Or().getNormalMatrix(e);o.applyNormalMatrix(l),o.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _l.makeRotationFromQuaternion(e),this.applyMatrix4(_l),this}rotateX(e){return _l.makeRotationX(e),this.applyMatrix4(_l),this}rotateY(e){return _l.makeRotationY(e),this.applyMatrix4(_l),this}rotateZ(e){return _l.makeRotationZ(e),this.applyMatrix4(_l),this}translate(e,t,o){return _l.makeTranslation(e,t,o),this.applyMatrix4(_l),this}scale(e,t,o){return _l.makeScale(e,t,o),this.applyMatrix4(_l),this}lookAt(e){return nb.lookAt(e),nb.updateMatrix(),this.applyMatrix4(nb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wd).negate(),this.translate(Wd.x,Wd.y,Wd.z),this}setFromPoints(e){const t=[];for(let o=0,i=e.length;o<i;o++){const l=e[o];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new Mt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let o=0,i=t.length;o<i;o++){const l=t[o];Us.setFromBufferAttribute(l),this.morphTargetsRelative?(zr.addVectors(this.boundingBox.min,Us.min),this.boundingBox.expandByPoint(zr),zr.addVectors(this.boundingBox.max,Us.max),this.boundingBox.expandByPoint(zr)):(this.boundingBox.expandByPoint(Us.min),this.boundingBox.expandByPoint(Us.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new cc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Y,1/0);return}if(e){const o=this.boundingSphere.center;if(Us.setFromBufferAttribute(e),t)for(let l=0,a=t.length;l<a;l++){const c=t[l];Pg.setFromBufferAttribute(c),this.morphTargetsRelative?(zr.addVectors(Us.min,Pg.min),Us.expandByPoint(zr),zr.addVectors(Us.max,Pg.max),Us.expandByPoint(zr)):(Us.expandByPoint(Pg.min),Us.expandByPoint(Pg.max))}Us.getCenter(o);let i=0;for(let l=0,a=e.count;l<a;l++)zr.fromBufferAttribute(e,l),i=Math.max(i,o.distanceToSquared(zr));if(t)for(let l=0,a=t.length;l<a;l++){const c=t[l],p=this.morphTargetsRelative;for(let h=0,f=c.count;h<f;h++)zr.fromBufferAttribute(c,h),p&&(Wd.fromBufferAttribute(e,h),zr.add(Wd)),i=Math.max(i,o.distanceToSquared(zr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const o=e.array,i=t.position.array,l=t.normal.array,a=t.uv.array,c=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new vn(new Float32Array(4*c),4));const p=t.tangent.array,h=[],f=[];for(let j=0;j<c;j++)h[j]=new Y,f[j]=new Y;const _=new Y,m=new Y,v=new Y,x=new Ve,b=new Ve,A=new Ve,k=new Y,E=new Y;function M(j,P,z){_.fromArray(i,j*3),m.fromArray(i,P*3),v.fromArray(i,z*3),x.fromArray(a,j*2),b.fromArray(a,P*2),A.fromArray(a,z*2),m.sub(_),v.sub(_),b.sub(x),A.sub(x);const K=1/(b.x*A.y-A.x*b.y);!isFinite(K)||(k.copy(m).multiplyScalar(A.y).addScaledVector(v,-b.y).multiplyScalar(K),E.copy(v).multiplyScalar(b.x).addScaledVector(m,-A.x).multiplyScalar(K),h[j].add(k),h[P].add(k),h[z].add(k),f[j].add(E),f[P].add(E),f[z].add(E))}let R=this.groups;R.length===0&&(R=[{start:0,count:o.length}]);for(let j=0,P=R.length;j<P;++j){const z=R[j],K=z.start,te=z.count;for(let oe=K,ee=K+te;oe<ee;oe+=3)M(o[oe+0],o[oe+1],o[oe+2])}const I=new Y,L=new Y,F=new Y,U=new Y;function X(j){F.fromArray(l,j*3),U.copy(F);const P=h[j];I.copy(P),I.sub(F.multiplyScalar(F.dot(P))).normalize(),L.crossVectors(U,P);const K=L.dot(f[j])<0?-1:1;p[j*4]=I.x,p[j*4+1]=I.y,p[j*4+2]=I.z,p[j*4+3]=K}for(let j=0,P=R.length;j<P;++j){const z=R[j],K=z.start,te=z.count;for(let oe=K,ee=K+te;oe<ee;oe+=3)X(o[oe+0]),X(o[oe+1]),X(o[oe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let o=this.getAttribute("normal");if(o===void 0)o=new vn(new Float32Array(t.count*3),3),this.setAttribute("normal",o);else for(let m=0,v=o.count;m<v;m++)o.setXYZ(m,0,0,0);const i=new Y,l=new Y,a=new Y,c=new Y,p=new Y,h=new Y,f=new Y,_=new Y;if(e)for(let m=0,v=e.count;m<v;m+=3){const x=e.getX(m+0),b=e.getX(m+1),A=e.getX(m+2);i.fromBufferAttribute(t,x),l.fromBufferAttribute(t,b),a.fromBufferAttribute(t,A),f.subVectors(a,l),_.subVectors(i,l),f.cross(_),c.fromBufferAttribute(o,x),p.fromBufferAttribute(o,b),h.fromBufferAttribute(o,A),c.add(f),p.add(f),h.add(f),o.setXYZ(x,c.x,c.y,c.z),o.setXYZ(b,p.x,p.y,p.z),o.setXYZ(A,h.x,h.y,h.z)}else for(let m=0,v=t.count;m<v;m+=3)i.fromBufferAttribute(t,m+0),l.fromBufferAttribute(t,m+1),a.fromBufferAttribute(t,m+2),f.subVectors(a,l),_.subVectors(i,l),f.cross(_),o.setXYZ(m+0,f.x,f.y,f.z),o.setXYZ(m+1,f.x,f.y,f.z),o.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),o.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const o=this.attributes;for(const i in o){if(e.attributes[i]===void 0)continue;const a=o[i].array,c=e.attributes[i],p=c.array,h=c.itemSize*t,f=Math.min(p.length,a.length-h);for(let _=0,m=h;_<f;_++,m++)a[m]=p[_]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,o=e.count;t<o;t++)zr.fromBufferAttribute(e,t),zr.normalize(),e.setXYZ(t,zr.x,zr.y,zr.z)}toNonIndexed(){function e(c,p){const h=c.array,f=c.itemSize,_=c.normalized,m=new h.constructor(p.length*f);let v=0,x=0;for(let b=0,A=p.length;b<A;b++){c.isInterleavedBufferAttribute?v=p[b]*c.data.stride+c.offset:v=p[b]*f;for(let k=0;k<f;k++)m[x++]=h[v++]}return new vn(m,f,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ut,o=this.index.array,i=this.attributes;for(const c in i){const p=i[c],h=e(p,o);t.setAttribute(c,h)}const l=this.morphAttributes;for(const c in l){const p=[],h=l[c];for(let f=0,_=h.length;f<_;f++){const m=h[f],v=e(m,o);p.push(v)}t.morphAttributes[c]=p}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let c=0,p=a.length;c<p;c++){const h=a[c];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const p=this.parameters;for(const h in p)p[h]!==void 0&&(e[h]=p[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const o=this.attributes;for(const p in o){const h=o[p];e.data.attributes[p]=h.toJSON(e.data)}const i={};let l=!1;for(const p in this.morphAttributes){const h=this.morphAttributes[p],f=[];for(let _=0,m=h.length;_<m;_++){const v=h[_];f.push(v.toJSON(e.data))}f.length>0&&(i[p]=f,l=!0)}l&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const o=e.index;o!==null&&this.setIndex(o.clone(t));const i=e.attributes;for(const h in i){const f=i[h];this.setAttribute(h,f.clone(t))}const l=e.morphAttributes;for(const h in l){const f=[],_=l[h];for(let m=0,v=_.length;m<v;m++)f.push(_[m].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,f=a.length;h<f;h++){const _=a[h];this.addGroup(_.start,_.count,_.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const p=e.boundingSphere;return p!==null&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ut.prototype.isBufferGeometry=!0;const h1=new wt,zd=new Ah,ob=new cc,Ru=new Y,Bu=new Y,Iu=new Y,rb=new Y,ib=new Y,sb=new Y,VT=new Y,WT=new Y,zT=new Y,XT=new Ve,jT=new Ve,JT=new Ve,lb=new Y,KT=new Y;class nr extends dn{constructor(e=new Ut,t=new Es){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,o=Object.keys(t);if(o.length>0){const i=t[o[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,a=i.length;l<a;l++){const c=i[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const o=this.geometry,i=this.material,l=this.matrixWorld;if(i===void 0||(o.boundingSphere===null&&o.computeBoundingSphere(),ob.copy(o.boundingSphere),ob.applyMatrix4(l),e.ray.intersectsSphere(ob)===!1)||(h1.copy(l).invert(),zd.copy(e.ray).applyMatrix4(h1),o.boundingBox!==null&&zd.intersectsBox(o.boundingBox)===!1))return;let a;if(o.isBufferGeometry){const c=o.index,p=o.attributes.position,h=o.morphAttributes.position,f=o.morphTargetsRelative,_=o.attributes.uv,m=o.attributes.uv2,v=o.groups,x=o.drawRange;if(c!==null)if(Array.isArray(i))for(let b=0,A=v.length;b<A;b++){const k=v[b],E=i[k.materialIndex],M=Math.max(k.start,x.start),R=Math.min(c.count,Math.min(k.start+k.count,x.start+x.count));for(let I=M,L=R;I<L;I+=3){const F=c.getX(I),U=c.getX(I+1),X=c.getX(I+2);a=YT(this,E,e,zd,p,h,f,_,m,F,U,X),a&&(a.faceIndex=Math.floor(I/3),a.face.materialIndex=k.materialIndex,t.push(a))}}else{const b=Math.max(0,x.start),A=Math.min(c.count,x.start+x.count);for(let k=b,E=A;k<E;k+=3){const M=c.getX(k),R=c.getX(k+1),I=c.getX(k+2);a=YT(this,i,e,zd,p,h,f,_,m,M,R,I),a&&(a.faceIndex=Math.floor(k/3),t.push(a))}}else if(p!==void 0)if(Array.isArray(i))for(let b=0,A=v.length;b<A;b++){const k=v[b],E=i[k.materialIndex],M=Math.max(k.start,x.start),R=Math.min(p.count,Math.min(k.start+k.count,x.start+x.count));for(let I=M,L=R;I<L;I+=3){const F=I,U=I+1,X=I+2;a=YT(this,E,e,zd,p,h,f,_,m,F,U,X),a&&(a.faceIndex=Math.floor(I/3),a.face.materialIndex=k.materialIndex,t.push(a))}}else{const b=Math.max(0,x.start),A=Math.min(p.count,x.start+x.count);for(let k=b,E=A;k<E;k+=3){const M=k,R=k+1,I=k+2;a=YT(this,i,e,zd,p,h,f,_,m,M,R,I),a&&(a.faceIndex=Math.floor(k/3),t.push(a))}}}else o.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}nr.prototype.isMesh=!0;function I5(r,e,t,o,i,l,a,c){let p;if(e.side===ur?p=o.intersectTriangle(a,l,i,!0,c):p=o.intersectTriangle(i,l,a,e.side!==ph,c),p===null)return null;KT.copy(c),KT.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(KT);return h<t.near||h>t.far?null:{distance:h,point:KT.clone(),object:r}}function YT(r,e,t,o,i,l,a,c,p,h,f,_){Ru.fromBufferAttribute(i,h),Bu.fromBufferAttribute(i,f),Iu.fromBufferAttribute(i,_);const m=r.morphTargetInfluences;if(l&&m){VT.set(0,0,0),WT.set(0,0,0),zT.set(0,0,0);for(let x=0,b=l.length;x<b;x++){const A=m[x],k=l[x];A!==0&&(rb.fromBufferAttribute(k,h),ib.fromBufferAttribute(k,f),sb.fromBufferAttribute(k,_),a?(VT.addScaledVector(rb,A),WT.addScaledVector(ib,A),zT.addScaledVector(sb,A)):(VT.addScaledVector(rb.sub(Ru),A),WT.addScaledVector(ib.sub(Bu),A),zT.addScaledVector(sb.sub(Iu),A)))}Ru.add(VT),Bu.add(WT),Iu.add(zT)}r.isSkinnedMesh&&(r.boneTransform(h,Ru),r.boneTransform(f,Bu),r.boneTransform(_,Iu));const v=I5(r,e,t,o,Ru,Bu,Iu,lb);if(v){c&&(XT.fromBufferAttribute(c,h),jT.fromBufferAttribute(c,f),JT.fromBufferAttribute(c,_),v.uv=pr.getUV(lb,Ru,Bu,Iu,XT,jT,JT,new Ve)),p&&(XT.fromBufferAttribute(p,h),jT.fromBufferAttribute(p,f),JT.fromBufferAttribute(p,_),v.uv2=pr.getUV(lb,Ru,Bu,Iu,XT,jT,JT,new Ve));const x={a:h,b:f,c:_,normal:new Y,materialIndex:0};pr.getNormal(Ru,Bu,Iu,x.normal),v.face=x}return v}class Jc extends Ut{constructor(e=1,t=1,o=1,i=1,l=1,a=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:o,widthSegments:i,heightSegments:l,depthSegments:a};const c=this;i=Math.floor(i),l=Math.floor(l),a=Math.floor(a);const p=[],h=[],f=[],_=[];let m=0,v=0;x("z","y","x",-1,-1,o,t,e,a,l,0),x("z","y","x",1,-1,o,t,-e,a,l,1),x("x","z","y",1,1,e,o,t,i,a,2),x("x","z","y",1,-1,e,o,-t,i,a,3),x("x","y","z",1,-1,e,t,o,i,l,4),x("x","y","z",-1,-1,e,t,-o,i,l,5),this.setIndex(p),this.setAttribute("position",new Mt(h,3)),this.setAttribute("normal",new Mt(f,3)),this.setAttribute("uv",new Mt(_,2));function x(b,A,k,E,M,R,I,L,F,U,X){const j=R/F,P=I/U,z=R/2,K=I/2,te=L/2,oe=F+1,ee=U+1;let pe=0,ae=0;const Ee=new Y;for(let S=0;S<ee;S++){const D=S*P-K;for(let H=0;H<oe;H++){const q=H*j-z;Ee[b]=q*E,Ee[A]=D*M,Ee[k]=te,h.push(Ee.x,Ee.y,Ee.z),Ee[b]=0,Ee[A]=0,Ee[k]=L>0?1:-1,f.push(Ee.x,Ee.y,Ee.z),_.push(H/F),_.push(1-S/U),pe+=1}}for(let S=0;S<U;S++)for(let D=0;D<F;D++){const H=m+D+oe*S,q=m+D+oe*(S+1),Q=m+(D+1)+oe*(S+1),de=m+(D+1)+oe*S;p.push(H,q,de),p.push(q,Q,de),ae+=6}c.addGroup(v,ae,X),v+=ae,m+=pe}}static fromJSON(e){return new Jc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pm(r){const e={};for(const t in r){e[t]={};for(const o in r[t]){const i=r[t][o];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][o]=i.clone():Array.isArray(i)?e[t][o]=i.slice():e[t][o]=i}}return e}function Bi(r){const e={};for(let t=0;t<r.length;t++){const o=pm(r[t]);for(const i in o)e[i]=o[i]}return e}const Yx={clone:pm,merge:Bi};var O5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,D5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class tc extends dr{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=O5,this.fragmentShader=D5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pm(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const o={};for(const i in this.extensions)this.extensions[i]===!0&&(o[i]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}tc.prototype.isShaderMaterial=!0;class fh extends dn{constructor(){super();this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}fh.prototype.isCamera=!0;class go extends fh{constructor(e=50,t=1,o=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=o,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_y*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($p*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _y*2*Math.atan(Math.tan($p*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,o,i,l,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=o,this.view.offsetY=i,this.view.width=l,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan($p*.5*this.fov)/this.zoom,o=2*t,i=this.aspect*o,l=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const p=a.fullWidth,h=a.fullHeight;l+=a.offsetX*i/p,t-=a.offsetY*o/h,i*=a.width/p,o*=a.height/h}const c=this.filmOffset;c!==0&&(l+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+i,t,t-o,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}go.prototype.isPerspectiveCamera=!0;const Xd=90,jd=1;class qx extends dn{constructor(e,t,o){super();if(this.type="CubeCamera",o.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=o;const i=new go(Xd,jd,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Y(1,0,0)),this.add(i);const l=new go(Xd,jd,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Y(-1,0,0)),this.add(l);const a=new go(Xd,jd,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Y(0,1,0)),this.add(a);const c=new go(Xd,jd,e,t);c.layers=this.layers,c.up.set(0,0,-1),c.lookAt(new Y(0,-1,0)),this.add(c);const p=new go(Xd,jd,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new Y(0,0,1)),this.add(p);const h=new go(Xd,jd,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Y(0,0,-1)),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const o=this.renderTarget,[i,l,a,c,p,h]=this.children,f=e.xr.enabled,_=e.getRenderTarget();e.xr.enabled=!1;const m=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,e.setRenderTarget(o,0),e.render(t,i),e.setRenderTarget(o,1),e.render(t,l),e.setRenderTarget(o,2),e.render(t,a),e.setRenderTarget(o,3),e.render(t,c),e.setRenderTarget(o,4),e.render(t,p),o.texture.generateMipmaps=m,e.setRenderTarget(o,5),e.render(t,h),e.setRenderTarget(_),e.xr.enabled=f,o.texture.needsPMREMUpdate=!0}}class Gm extends Vo{constructor(e,t,o,i,l,a,c,p,h,f){e=e!==void 0?e:[],t=t!==void 0?t:sd;super(e,t,o,i,l,a,c,p,h,f);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Gm.prototype.isCubeTexture=!0;class Qx extends Zs{constructor(e,t,o){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=o);super(e,e,t);t=t||{},this.texture=new Gm(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:So}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=di,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const o={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Jc(5,5,5),l=new tc({name:"CubemapFromEquirect",uniforms:pm(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:ur,blending:Wc});l.uniforms.tEquirect.value=t;const a=new nr(i,l),c=t.minFilter;return t.minFilter===tu&&(t.minFilter=So),new qx(1,10,this).update(e,a),t.minFilter=c,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,o,i){const l=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,o,i);e.setRenderTarget(l)}}Qx.prototype.isWebGLCubeRenderTarget=!0;const ab=new Y,L5=new Y,N5=new Or;class $a{constructor(e=new Y(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,o,i){return this.normal.set(e,t,o),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,o){const i=ab.subVectors(o,t).cross(L5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const o=e.delta(ab),i=this.normal.dot(o);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/i;return l<0||l>1?null:t.copy(o).multiplyScalar(l).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),o=this.distanceToPoint(e.end);return t<0&&o>0||o<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const o=t||N5.getNormalMatrix(e),i=this.coplanarPoint(ab).applyMatrix4(e),l=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}$a.prototype.isPlane=!0;const Jd=new cc,qT=new Y;class nv{constructor(e=new $a,t=new $a,o=new $a,i=new $a,l=new $a,a=new $a){this.planes=[e,t,o,i,l,a]}set(e,t,o,i,l,a){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(o),c[3].copy(i),c[4].copy(l),c[5].copy(a),this}copy(e){const t=this.planes;for(let o=0;o<6;o++)t[o].copy(e.planes[o]);return this}setFromProjectionMatrix(e){const t=this.planes,o=e.elements,i=o[0],l=o[1],a=o[2],c=o[3],p=o[4],h=o[5],f=o[6],_=o[7],m=o[8],v=o[9],x=o[10],b=o[11],A=o[12],k=o[13],E=o[14],M=o[15];return t[0].setComponents(c-i,_-p,b-m,M-A).normalize(),t[1].setComponents(c+i,_+p,b+m,M+A).normalize(),t[2].setComponents(c+l,_+h,b+v,M+k).normalize(),t[3].setComponents(c-l,_-h,b-v,M-k).normalize(),t[4].setComponents(c-a,_-f,b-x,M-E).normalize(),t[5].setComponents(c+a,_+f,b+x,M+E).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Jd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Jd)}intersectsSprite(e){return Jd.center.set(0,0,0),Jd.radius=.7071067811865476,Jd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jd)}intersectsSphere(e){const t=this.planes,o=e.center,i=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(o)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let o=0;o<6;o++){const i=t[o];if(qT.x=i.normal.x>0?e.max.x:e.min.x,qT.y=i.normal.y>0?e.max.y:e.min.y,qT.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(qT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let o=0;o<6;o++)if(t[o].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function h2(){let r=null,e=!1,t=null,o=null;function i(l,a){t(l,a),o=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(o=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(o),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){r=l}}}function $5(r,e){const t=e.isWebGL2,o=new WeakMap;function i(h,f){const _=h.array,m=h.usage,v=r.createBuffer();r.bindBuffer(f,v),r.bufferData(f,_,m),h.onUploadCallback();let x=5126;return _ instanceof Float32Array?x=5126:_ instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):_ instanceof Uint16Array?h.isFloat16BufferAttribute?t?x=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):x=5123:_ instanceof Int16Array?x=5122:_ instanceof Uint32Array?x=5125:_ instanceof Int32Array?x=5124:_ instanceof Int8Array?x=5120:(_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&(x=5121),{buffer:v,type:x,bytesPerElement:_.BYTES_PER_ELEMENT,version:h.version}}function l(h,f,_){const m=f.array,v=f.updateRange;r.bindBuffer(_,h),v.count===-1?r.bufferSubData(_,0,m):(t?r.bufferSubData(_,v.offset*m.BYTES_PER_ELEMENT,m,v.offset,v.count):r.bufferSubData(_,v.offset*m.BYTES_PER_ELEMENT,m.subarray(v.offset,v.offset+v.count)),v.count=-1)}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),o.get(h)}function c(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=o.get(h);f&&(r.deleteBuffer(f.buffer),o.delete(h))}function p(h,f){if(h.isGLBufferAttribute){const m=o.get(h);(!m||m.version<h.version)&&o.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const _=o.get(h);_===void 0?o.set(h,i(h,f)):_.version<h.version&&(l(_.buffer,h,f),_.version=h.version)}return{get:a,remove:c,update:p}}class jp extends Ut{constructor(e=1,t=1,o=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:o,heightSegments:i};const l=e/2,a=t/2,c=Math.floor(o),p=Math.floor(i),h=c+1,f=p+1,_=e/c,m=t/p,v=[],x=[],b=[],A=[];for(let k=0;k<f;k++){const E=k*m-a;for(let M=0;M<h;M++){const R=M*_-l;x.push(R,-E,0),b.push(0,0,1),A.push(M/c),A.push(1-k/p)}}for(let k=0;k<p;k++)for(let E=0;E<c;E++){const M=E+h*k,R=E+h*(k+1),I=E+1+h*(k+1),L=E+1+h*k;v.push(M,R,L),v.push(R,I,L)}this.setIndex(v),this.setAttribute("position",new Mt(x,3)),this.setAttribute("normal",new Mt(b,3)),this.setAttribute("uv",new Mt(A,2))}static fromJSON(e){return new jp(e.width,e.height,e.widthSegments,e.heightSegments)}}var P5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,F5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,U5=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,H5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,G5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,V5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,W5="vec3 transformed = vec3( position );",z5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,X5=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,j5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,J5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,K5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Y5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,q5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Q5=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Z5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,t6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,n6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,o6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		return texture2D( envMap, uv ).rgb;
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,r6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,i6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,s6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,l6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,a6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,c6="gl_FragColor = linearToOutputTexel( gl_FragColor );",u6=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,h6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,p6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,d6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,f6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,y6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,v6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,T6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,E6=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,x6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,S6=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,C6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,b6=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,k6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,A6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,w6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,M6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,R6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,B6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,I6=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,O6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,D6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,L6=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,N6=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$6=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,P6=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,F6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,U6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,H6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,G6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,V6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,W6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,z6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,X6=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,j6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,J6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,K6=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Y6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,q6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Q6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Z6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,e9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,t9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,n9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,o9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,r9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,i9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,s9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,l9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,a9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,c9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,u9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,h9=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,p9=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,d9=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,f9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,m9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,g9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,_9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,y9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,v9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,T9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,E9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,x9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,S9=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,C9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,b9=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,k9=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,A9=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,w9=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,M9=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,R9=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,B9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const I9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,O9=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,D9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,L9=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,N9=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,P9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,F9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,U9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,H9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,G9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,V9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,W9=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,z9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X9=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,j9=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,K9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,q9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Q9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,tX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,iX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sX=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,aX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,yn={alphamap_fragment:P5,alphamap_pars_fragment:F5,alphatest_fragment:U5,alphatest_pars_fragment:H5,aomap_fragment:G5,aomap_pars_fragment:V5,begin_vertex:W5,beginnormal_vertex:z5,bsdfs:X5,bumpmap_pars_fragment:j5,clipping_planes_fragment:J5,clipping_planes_pars_fragment:K5,clipping_planes_pars_vertex:Y5,clipping_planes_vertex:q5,color_fragment:Q5,color_pars_fragment:Z5,color_pars_vertex:e6,color_vertex:t6,common:n6,cube_uv_reflection_fragment:o6,defaultnormal_vertex:r6,displacementmap_pars_vertex:i6,displacementmap_vertex:s6,emissivemap_fragment:l6,emissivemap_pars_fragment:a6,encodings_fragment:c6,encodings_pars_fragment:u6,envmap_fragment:h6,envmap_common_pars_fragment:p6,envmap_pars_fragment:d6,envmap_pars_vertex:f6,envmap_physical_pars_fragment:b6,envmap_vertex:m6,fog_vertex:g6,fog_pars_vertex:_6,fog_fragment:y6,fog_pars_fragment:v6,gradientmap_pars_fragment:T6,lightmap_fragment:E6,lightmap_pars_fragment:x6,lights_lambert_vertex:S6,lights_pars_begin:C6,lights_toon_fragment:k6,lights_toon_pars_fragment:A6,lights_phong_fragment:w6,lights_phong_pars_fragment:M6,lights_physical_fragment:R6,lights_physical_pars_fragment:B6,lights_fragment_begin:I6,lights_fragment_maps:O6,lights_fragment_end:D6,logdepthbuf_fragment:L6,logdepthbuf_pars_fragment:N6,logdepthbuf_pars_vertex:$6,logdepthbuf_vertex:P6,map_fragment:F6,map_pars_fragment:U6,map_particle_fragment:H6,map_particle_pars_fragment:G6,metalnessmap_fragment:V6,metalnessmap_pars_fragment:W6,morphnormal_vertex:z6,morphtarget_pars_vertex:X6,morphtarget_vertex:j6,normal_fragment_begin:J6,normal_fragment_maps:K6,normal_pars_fragment:Y6,normal_pars_vertex:q6,normal_vertex:Q6,normalmap_pars_fragment:Z6,clearcoat_normal_fragment_begin:e9,clearcoat_normal_fragment_maps:t9,clearcoat_pars_fragment:n9,output_fragment:o9,packing:r9,premultiplied_alpha_fragment:i9,project_vertex:s9,dithering_fragment:l9,dithering_pars_fragment:a9,roughnessmap_fragment:c9,roughnessmap_pars_fragment:u9,shadowmap_pars_fragment:h9,shadowmap_pars_vertex:p9,shadowmap_vertex:d9,shadowmask_pars_fragment:f9,skinbase_vertex:m9,skinning_pars_vertex:g9,skinning_vertex:_9,skinnormal_vertex:y9,specularmap_fragment:v9,specularmap_pars_fragment:T9,tonemapping_fragment:E9,tonemapping_pars_fragment:x9,transmission_fragment:S9,transmission_pars_fragment:C9,uv_pars_fragment:b9,uv_pars_vertex:k9,uv_vertex:A9,uv2_pars_fragment:w9,uv2_pars_vertex:M9,uv2_vertex:R9,worldpos_vertex:B9,background_vert:I9,background_frag:O9,cube_vert:D9,cube_frag:L9,depth_vert:N9,depth_frag:$9,distanceRGBA_vert:P9,distanceRGBA_frag:F9,equirect_vert:U9,equirect_frag:H9,linedashed_vert:G9,linedashed_frag:V9,meshbasic_vert:W9,meshbasic_frag:z9,meshlambert_vert:X9,meshlambert_frag:j9,meshmatcap_vert:J9,meshmatcap_frag:K9,meshnormal_vert:Y9,meshnormal_frag:q9,meshphong_vert:Q9,meshphong_frag:Z9,meshphysical_vert:eX,meshphysical_frag:tX,meshtoon_vert:nX,meshtoon_frag:oX,points_vert:rX,points_frag:iX,shadow_vert:sX,shadow_frag:lX,sprite_vert:aX,sprite_frag:cX},ht={common:{diffuse:{value:new tt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Or},uv2Transform:{value:new Or},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Or}},sprite:{diffuse:{value:new tt(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Or}}},ts={basic:{uniforms:Bi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.fog]),vertexShader:yn.meshbasic_vert,fragmentShader:yn.meshbasic_frag},lambert:{uniforms:Bi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.fog,ht.lights,{emissive:{value:new tt(0)}}]),vertexShader:yn.meshlambert_vert,fragmentShader:yn.meshlambert_frag},phong:{uniforms:Bi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new tt(0)},specular:{value:new tt(1118481)},shininess:{value:30}}]),vertexShader:yn.meshphong_vert,fragmentShader:yn.meshphong_frag},standard:{uniforms:Bi([ht.common,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.roughnessmap,ht.metalnessmap,ht.fog,ht.lights,{emissive:{value:new tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag},toon:{uniforms:Bi([ht.common,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.gradientmap,ht.fog,ht.lights,{emissive:{value:new tt(0)}}]),vertexShader:yn.meshtoon_vert,fragmentShader:yn.meshtoon_frag},matcap:{uniforms:Bi([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,{matcap:{value:null}}]),vertexShader:yn.meshmatcap_vert,fragmentShader:yn.meshmatcap_frag},points:{uniforms:Bi([ht.points,ht.fog]),vertexShader:yn.points_vert,fragmentShader:yn.points_frag},dashed:{uniforms:Bi([ht.common,ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yn.linedashed_vert,fragmentShader:yn.linedashed_frag},depth:{uniforms:Bi([ht.common,ht.displacementmap]),vertexShader:yn.depth_vert,fragmentShader:yn.depth_frag},normal:{uniforms:Bi([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,{opacity:{value:1}}]),vertexShader:yn.meshnormal_vert,fragmentShader:yn.meshnormal_frag},sprite:{uniforms:Bi([ht.sprite,ht.fog]),vertexShader:yn.sprite_vert,fragmentShader:yn.sprite_frag},background:{uniforms:{uvTransform:{value:new Or},t2D:{value:null}},vertexShader:yn.background_vert,fragmentShader:yn.background_frag},cube:{uniforms:Bi([ht.envmap,{opacity:{value:1}}]),vertexShader:yn.cube_vert,fragmentShader:yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yn.equirect_vert,fragmentShader:yn.equirect_frag},distanceRGBA:{uniforms:Bi([ht.common,ht.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yn.distanceRGBA_vert,fragmentShader:yn.distanceRGBA_frag},shadow:{uniforms:Bi([ht.lights,ht.fog,{color:{value:new tt(0)},opacity:{value:1}}]),vertexShader:yn.shadow_vert,fragmentShader:yn.shadow_frag}};ts.physical={uniforms:Bi([ts.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new tt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new tt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new tt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag};function uX(r,e,t,o,i,l){const a=new tt(0);let c=i===!0?0:1,p,h,f=null,_=0,m=null;function v(b,A){let k=!1,E=A.isScene===!0?A.background:null;E&&E.isTexture&&(E=e.get(E));const M=r.xr,R=M.getSession&&M.getSession();R&&R.environmentBlendMode==="additive"&&(E=null),E===null?x(a,c):E&&E.isColor&&(x(E,1),k=!0),(r.autoClear||k)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),E&&(E.isCubeTexture||E.mapping===Hm)?(h===void 0&&(h=new nr(new Jc(1,1,1),new tc({name:"BackgroundCubeMaterial",uniforms:pm(ts.cube.uniforms),vertexShader:ts.cube.vertexShader,fragmentShader:ts.cube.fragmentShader,side:ur,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(I,L,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(h)),h.material.uniforms.envMap.value=E,h.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,(f!==E||_!==E.version||m!==r.toneMapping)&&(h.material.needsUpdate=!0,f=E,_=E.version,m=r.toneMapping),b.unshift(h,h.geometry,h.material,0,0,null)):E&&E.isTexture&&(p===void 0&&(p=new nr(new jp(2,2),new tc({name:"BackgroundMaterial",uniforms:pm(ts.background.uniforms),vertexShader:ts.background.vertexShader,fragmentShader:ts.background.fragmentShader,side:hh,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(p)),p.material.uniforms.t2D.value=E,E.matrixAutoUpdate===!0&&E.updateMatrix(),p.material.uniforms.uvTransform.value.copy(E.matrix),(f!==E||_!==E.version||m!==r.toneMapping)&&(p.material.needsUpdate=!0,f=E,_=E.version,m=r.toneMapping),b.unshift(p,p.geometry,p.material,0,0,null))}function x(b,A){t.buffers.color.setClear(b.r,b.g,b.b,A,l)}return{getClearColor:function(){return a},setClearColor:function(b,A=1){a.set(b),c=A,x(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(b){c=b,x(a,c)},render:v}}function hX(r,e,t,o){const i=r.getParameter(34921),l=o.isWebGL2?null:e.get("OES_vertex_array_object"),a=o.isWebGL2||l!==null,c={},p=b(null);let h=p;function f(K,te,oe,ee,pe){let ae=!1;if(a){const Ee=x(ee,oe,te);h!==Ee&&(h=Ee,m(h.object)),ae=A(ee,pe),ae&&k(ee,pe)}else{const Ee=te.wireframe===!0;(h.geometry!==ee.id||h.program!==oe.id||h.wireframe!==Ee)&&(h.geometry=ee.id,h.program=oe.id,h.wireframe=Ee,ae=!0)}K.isInstancedMesh===!0&&(ae=!0),pe!==null&&t.update(pe,34963),ae&&(F(K,te,oe,ee),pe!==null&&r.bindBuffer(34963,t.get(pe).buffer))}function _(){return o.isWebGL2?r.createVertexArray():l.createVertexArrayOES()}function m(K){return o.isWebGL2?r.bindVertexArray(K):l.bindVertexArrayOES(K)}function v(K){return o.isWebGL2?r.deleteVertexArray(K):l.deleteVertexArrayOES(K)}function x(K,te,oe){const ee=oe.wireframe===!0;let pe=c[K.id];pe===void 0&&(pe={},c[K.id]=pe);let ae=pe[te.id];ae===void 0&&(ae={},pe[te.id]=ae);let Ee=ae[ee];return Ee===void 0&&(Ee=b(_()),ae[ee]=Ee),Ee}function b(K){const te=[],oe=[],ee=[];for(let pe=0;pe<i;pe++)te[pe]=0,oe[pe]=0,ee[pe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:oe,attributeDivisors:ee,object:K,attributes:{},index:null}}function A(K,te){const oe=h.attributes,ee=K.attributes;let pe=0;for(const ae in ee){const Ee=oe[ae],S=ee[ae];if(Ee===void 0||Ee.attribute!==S||Ee.data!==S.data)return!0;pe++}return h.attributesNum!==pe||h.index!==te}function k(K,te){const oe={},ee=K.attributes;let pe=0;for(const ae in ee){const Ee=ee[ae],S={};S.attribute=Ee,Ee.data&&(S.data=Ee.data),oe[ae]=S,pe++}h.attributes=oe,h.attributesNum=pe,h.index=te}function E(){const K=h.newAttributes;for(let te=0,oe=K.length;te<oe;te++)K[te]=0}function M(K){R(K,0)}function R(K,te){const oe=h.newAttributes,ee=h.enabledAttributes,pe=h.attributeDivisors;oe[K]=1,ee[K]===0&&(r.enableVertexAttribArray(K),ee[K]=1),pe[K]!==te&&((o.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[o.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,te),pe[K]=te)}function I(){const K=h.newAttributes,te=h.enabledAttributes;for(let oe=0,ee=te.length;oe<ee;oe++)te[oe]!==K[oe]&&(r.disableVertexAttribArray(oe),te[oe]=0)}function L(K,te,oe,ee,pe,ae){o.isWebGL2===!0&&(oe===5124||oe===5125)?r.vertexAttribIPointer(K,te,oe,pe,ae):r.vertexAttribPointer(K,te,oe,ee,pe,ae)}function F(K,te,oe,ee){if(o.isWebGL2===!1&&(K.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const pe=ee.attributes,ae=oe.getAttributes(),Ee=te.defaultAttributeValues;for(const S in ae){const D=ae[S];if(D.location>=0){let H=pe[S];if(H===void 0&&(S==="instanceMatrix"&&K.instanceMatrix&&(H=K.instanceMatrix),S==="instanceColor"&&K.instanceColor&&(H=K.instanceColor)),H!==void 0){const q=H.normalized,Q=H.itemSize,de=t.get(H);if(de===void 0)continue;const je=de.buffer,We=de.type,ze=de.bytesPerElement;if(H.isInterleavedBufferAttribute){const Oe=H.data,Ye=Oe.stride,et=H.offset;if(Oe&&Oe.isInstancedInterleavedBuffer){for(let Re=0;Re<D.locationSize;Re++)R(D.location+Re,Oe.meshPerAttribute);K.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let Re=0;Re<D.locationSize;Re++)M(D.location+Re);r.bindBuffer(34962,je);for(let Re=0;Re<D.locationSize;Re++)L(D.location+Re,Q/D.locationSize,We,q,Ye*ze,(et+Q/D.locationSize*Re)*ze)}else{if(H.isInstancedBufferAttribute){for(let Oe=0;Oe<D.locationSize;Oe++)R(D.location+Oe,H.meshPerAttribute);K.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let Oe=0;Oe<D.locationSize;Oe++)M(D.location+Oe);r.bindBuffer(34962,je);for(let Oe=0;Oe<D.locationSize;Oe++)L(D.location+Oe,Q/D.locationSize,We,q,Q*ze,Q/D.locationSize*Oe*ze)}}else if(Ee!==void 0){const q=Ee[S];if(q!==void 0)switch(q.length){case 2:r.vertexAttrib2fv(D.location,q);break;case 3:r.vertexAttrib3fv(D.location,q);break;case 4:r.vertexAttrib4fv(D.location,q);break;default:r.vertexAttrib1fv(D.location,q)}}}}I()}function U(){P();for(const K in c){const te=c[K];for(const oe in te){const ee=te[oe];for(const pe in ee)v(ee[pe].object),delete ee[pe];delete te[oe]}delete c[K]}}function X(K){if(c[K.id]===void 0)return;const te=c[K.id];for(const oe in te){const ee=te[oe];for(const pe in ee)v(ee[pe].object),delete ee[pe];delete te[oe]}delete c[K.id]}function j(K){for(const te in c){const oe=c[te];if(oe[K.id]===void 0)continue;const ee=oe[K.id];for(const pe in ee)v(ee[pe].object),delete ee[pe];delete oe[K.id]}}function P(){z(),h!==p&&(h=p,m(h.object))}function z(){p.geometry=null,p.program=null,p.wireframe=!1}return{setup:f,reset:P,resetDefaultState:z,dispose:U,releaseStatesOfGeometry:X,releaseStatesOfProgram:j,initAttributes:E,enableAttribute:M,disableUnusedAttributes:I}}function pX(r,e,t,o){const i=o.isWebGL2;let l;function a(h){l=h}function c(h,f){r.drawArrays(l,h,f),t.update(f,l,1)}function p(h,f,_){if(_===0)return;let m,v;if(i)m=r,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](l,h,f,_),t.update(f,l,_)}this.setMode=a,this.render=c,this.renderInstances=p}function dX(r,e,t){let o;function i(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");o=r.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function l(F){if(F==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";F="mediump"}return F==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext!="undefined"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&r instanceof WebGL2ComputeRenderingContext;let c=t.precision!==void 0?t.precision:"highp";const p=l(c);p!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",p,"instead."),c=p);const h=a||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,_=r.getParameter(34930),m=r.getParameter(35660),v=r.getParameter(3379),x=r.getParameter(34076),b=r.getParameter(34921),A=r.getParameter(36347),k=r.getParameter(36348),E=r.getParameter(36349),M=m>0,R=a||e.has("OES_texture_float"),I=M&&R,L=a?r.getParameter(36183):0;return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:i,getMaxPrecision:l,precision:c,logarithmicDepthBuffer:f,maxTextures:_,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:A,maxVaryings:k,maxFragmentUniforms:E,vertexTextures:M,floatFragmentTextures:R,floatVertexTextures:I,maxSamples:L}}function fX(r){const e=this;let t=null,o=0,i=!1,l=!1;const a=new $a,c=new Or,p={value:null,needsUpdate:!1};this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(_,m,v){const x=_.length!==0||m||o!==0||i;return i=m,t=f(_,v,0),o=_.length,x},this.beginShadows=function(){l=!0,f(null)},this.endShadows=function(){l=!1,h()},this.setState=function(_,m,v){const x=_.clippingPlanes,b=_.clipIntersection,A=_.clipShadows,k=r.get(_);if(!i||x===null||x.length===0||l&&!A)l?f(null):h();else{const E=l?0:o,M=E*4;let R=k.clippingState||null;p.value=R,R=f(x,m,M,v);for(let I=0;I!==M;++I)R[I]=t[I];k.clippingState=R,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=E}};function h(){p.value!==t&&(p.value=t,p.needsUpdate=o>0),e.numPlanes=o,e.numIntersection=0}function f(_,m,v,x){const b=_!==null?_.length:0;let A=null;if(b!==0){if(A=p.value,x!==!0||A===null){const k=v+b*4,E=m.matrixWorldInverse;c.getNormalMatrix(E),(A===null||A.length<k)&&(A=new Float32Array(k));for(let M=0,R=v;M!==b;++M,R+=4)a.copy(_[M]).applyMatrix4(E,c),a.normal.toArray(A,R),A[R+3]=a.constant}p.value=A,p.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,A}}function mX(r){let e=new WeakMap;function t(a,c){return c===py?a.mapping=sd:c===dy&&(a.mapping=ld),a}function o(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const c=a.mapping;if(c===py||c===dy)if(e.has(a)){const p=e.get(a).texture;return t(p,a.mapping)}else{const p=a.image;if(p&&p.height>0){const h=new Qx(p.height/2);return h.fromEquirectangularTexture(r,a),e.set(a,h),a.addEventListener("dispose",i),t(h.texture,a.mapping)}else return null}}return a}function i(a){const c=a.target;c.removeEventListener("dispose",i);const p=e.get(c);p!==void 0&&(e.delete(c),p.dispose())}function l(){e=new WeakMap}return{get:o,dispose:l}}class Ka extends fh{constructor(e=-1,t=1,o=1,i=-1,l=.1,a=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=o,this.bottom=i,this.near=l,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,o,i,l,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=o,this.view.offsetY=i,this.view.width=l,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let l=o-e,a=o+e,c=i+t,p=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=h*this.view.offsetX,a=l+h*this.view.width,c-=f*this.view.offsetY,p=c-f*this.view.height}this.projectionMatrix.makeOrthographic(l,a,c,p,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Ka.prototype.isOrthographicCamera=!0;class Vm extends tc{constructor(e){super(e);this.type="RawShaderMaterial"}}Vm.prototype.isRawShaderMaterial=!0;const zf=4,oh=8,Na=Math.pow(2,oh),p2=[.125,.215,.35,.446,.526,.582],d2=oh-zf+1+p2.length,Kd=20,cb=new Ka,{_lodPlanes:Fg,_sizeLods:p1,_sigmas:QT}=gX(),d1=new tt;let ub=null;const pp=(1+Math.sqrt(5))/2,Yd=1/pp,f1=[new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,pp,Yd),new Y(0,pp,-Yd),new Y(Yd,0,pp),new Y(-Yd,0,pp),new Y(pp,Yd,0),new Y(-pp,Yd,0)];class IA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=_X(Kd),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,o=.1,i=100){ub=this._renderer.getRenderTarget();const l=this._allocateTargets();return this._sceneToCubeUV(e,o,i,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=_1(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=g1(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<Fg.length;e++)Fg[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ub),e.scissorTest=!1,ZT(e,0,0,e.width,e.height)}_fromTexture(e,t){ub=this._renderer.getRenderTarget();const o=t||this._allocateTargets(e);return this._textureToCubeUV(e,o),this._applyPMREM(o),this._cleanup(o),o}_allocateTargets(e){const t={magFilter:So,minFilter:So,generateMipmaps:!1,type:Lp,format:di,encoding:la,depthBuffer:!1},o=m1(t);return o.depthBuffer=!e,this._pingPongRenderTarget===null&&(this._pingPongRenderTarget=m1(t)),o}_compileMaterial(e){const t=new nr(Fg[0],e);this._renderer.compile(t,cb)}_sceneToCubeUV(e,t,o,i){const c=new go(90,1,t,o),p=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,_=f.autoClear,m=f.toneMapping;f.getClearColor(d1),f.toneMapping=Ja,f.autoClear=!1;const v=new Es({name:"PMREM.Background",side:ur,depthWrite:!1,depthTest:!1}),x=new nr(new Jc,v);let b=!1;const A=e.background;A?A.isColor&&(v.color.copy(A),e.background=null,b=!0):(v.color.copy(d1),b=!0);for(let k=0;k<6;k++){const E=k%3;E===0?(c.up.set(0,p[k],0),c.lookAt(h[k],0,0)):E===1?(c.up.set(0,0,p[k]),c.lookAt(0,h[k],0)):(c.up.set(0,p[k],0),c.lookAt(0,0,h[k])),ZT(i,E*Na,k>2?Na:0,Na,Na),f.setRenderTarget(i),b&&f.render(x,c),f.render(e,c)}x.geometry.dispose(),x.material.dispose(),f.toneMapping=m,f.autoClear=_,e.background=A}_textureToCubeUV(e,t){const o=this._renderer,i=e.mapping===sd||e.mapping===ld;i?(this._cubemapShader===null&&(this._cubemapShader=_1()),this._cubemapShader.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectShader===null&&(this._equirectShader=g1());const l=i?this._cubemapShader:this._equirectShader,a=new nr(Fg[0],l),c=l.uniforms;c.envMap.value=e,i||c.texelSize.value.set(1/e.image.width,1/e.image.height),ZT(t,0,0,3*Na,2*Na),o.setRenderTarget(t),o.render(a,cb)}_applyPMREM(e){const t=this._renderer,o=t.autoClear;t.autoClear=!1;for(let i=1;i<d2;i++){const l=Math.sqrt(QT[i]*QT[i]-QT[i-1]*QT[i-1]),a=f1[(i-1)%f1.length];this._blur(e,i-1,i,l,a)}t.autoClear=o}_blur(e,t,o,i,l){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,o,i,"latitudinal",l),this._halfBlur(a,e,o,o,i,"longitudinal",l)}_halfBlur(e,t,o,i,l,a,c){const p=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,_=new nr(Fg[i],h),m=h.uniforms,v=p1[o]-1,x=isFinite(l)?Math.PI/(2*v):2*Math.PI/(2*Kd-1),b=l/x,A=isFinite(l)?1+Math.floor(f*b):Kd;A>Kd&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${Kd}`);const k=[];let E=0;for(let L=0;L<Kd;++L){const F=L/b,U=Math.exp(-F*F/2);k.push(U),L===0?E+=U:L<A&&(E+=2*U)}for(let L=0;L<k.length;L++)k[L]=k[L]/E;m.envMap.value=e.texture,m.samples.value=A,m.weights.value=k,m.latitudinal.value=a==="latitudinal",c&&(m.poleAxis.value=c),m.dTheta.value=x,m.mipInt.value=oh-o;const M=p1[i],R=3*Math.max(0,Na-2*M),I=(i===0?0:2*Na)+2*M*(i>oh-zf?i-oh+zf:0);ZT(t,R,I,3*M,2*M),p.setRenderTarget(t),p.render(_,cb)}}function gX(){const r=[],e=[],t=[];let o=oh;for(let i=0;i<d2;i++){const l=Math.pow(2,o);e.push(l);let a=1/l;i>oh-zf?a=p2[i-oh+zf-1]:i===0&&(a=0),t.push(a);const c=1/(l-1),p=-c/2,h=1+c/2,f=[p,p,h,p,h,h,p,p,h,h,p,h],_=6,m=6,v=3,x=2,b=1,A=new Float32Array(v*m*_),k=new Float32Array(x*m*_),E=new Float32Array(b*m*_);for(let R=0;R<_;R++){const I=R%3*2/3-1,L=R>2?0:-1,F=[I,L,0,I+2/3,L,0,I+2/3,L+1,0,I,L,0,I+2/3,L+1,0,I,L+1,0];A.set(F,v*m*R),k.set(f,x*m*R);const U=[R,R,R,R,R,R];E.set(U,b*m*R)}const M=new Ut;M.setAttribute("position",new vn(A,v)),M.setAttribute("uv",new vn(k,x)),M.setAttribute("faceIndex",new vn(E,b)),r.push(M),o>zf&&o--}return{_lodPlanes:r,_sizeLods:e,_sigmas:t}}function m1(r){const e=new Zs(3*Na,3*Na,r);return e.texture.mapping=Hm,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function ZT(r,e,t,o,i){r.viewport.set(e,t,o,i),r.scissor.set(e,t,o,i)}function _X(r){const e=new Float32Array(r),t=new Y(0,1,0);return new Vm({name:"SphericalGaussianBlur",defines:{n:r},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:CM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wc,depthTest:!1,depthWrite:!1})}function g1(){const r=new Ve(1,1);return new Vm({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:r}},vertexShader:CM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = texture2D ( envMap, uv ).rgb;
				uv.x += texelSize.x;
				vec3 tr = texture2D ( envMap, uv ).rgb;
				uv.y += texelSize.y;
				vec3 br = texture2D ( envMap, uv ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = texture2D ( envMap, uv ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

			}
		`,blending:Wc,depthTest:!1,depthWrite:!1})}function _1(){return new Vm({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:CM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wc,depthTest:!1,depthWrite:!1})}function CM(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function yX(r){let e=new WeakMap,t=null;function o(c){if(c&&c.isTexture){const p=c.mapping,h=p===py||p===dy,f=p===sd||p===ld;if(h||f)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let _=e.get(c);return t===null&&(t=new IA(r)),_=h?t.fromEquirectangular(c,_):t.fromCubemap(c,_),e.set(c,_),_.texture}else{if(e.has(c))return e.get(c).texture;{const _=c.image;if(h&&_&&_.height>0||f&&_&&i(_)){t===null&&(t=new IA(r));const m=h?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,m),c.addEventListener("dispose",l),m.texture}else return null}}}return c}function i(c){let p=0;const h=6;for(let f=0;f<h;f++)c[f]!==void 0&&p++;return p===h}function l(c){const p=c.target;p.removeEventListener("dispose",l);const h=e.get(p);h!==void 0&&(e.delete(p),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:o,dispose:a}}function vX(r){const e={};function t(o){if(e[o]!==void 0)return e[o];let i;switch(o){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(o)}return e[o]=i,i}return{has:function(o){return t(o)!==null},init:function(o){o.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(o){const i=t(o);return i===null&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),i}}}function TX(r,e,t,o){const i={},l=new WeakMap;function a(_){const m=_.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);m.removeEventListener("dispose",a),delete i[m.id];const v=l.get(m);v&&(e.remove(v),l.delete(m)),o.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function c(_,m){return i[m.id]===!0||(m.addEventListener("dispose",a),i[m.id]=!0,t.memory.geometries++),m}function p(_){const m=_.attributes;for(const x in m)e.update(m[x],34962);const v=_.morphAttributes;for(const x in v){const b=v[x];for(let A=0,k=b.length;A<k;A++)e.update(b[A],34962)}}function h(_){const m=[],v=_.index,x=_.attributes.position;let b=0;if(v!==null){const E=v.array;b=v.version;for(let M=0,R=E.length;M<R;M+=3){const I=E[M+0],L=E[M+1],F=E[M+2];m.push(I,L,L,F,F,I)}}else{const E=x.array;b=x.version;for(let M=0,R=E.length/3-1;M<R;M+=3){const I=M+0,L=M+1,F=M+2;m.push(I,L,L,F,F,I)}}const A=new(t2(m)?Kx:Jx)(m,1);A.version=b;const k=l.get(_);k&&e.remove(k),l.set(_,A)}function f(_){const m=l.get(_);if(m){const v=_.index;v!==null&&m.version<v.version&&h(_)}else h(_);return l.get(_)}return{get:c,update:p,getWireframeAttribute:f}}function EX(r,e,t,o){const i=o.isWebGL2;let l;function a(m){l=m}let c,p;function h(m){c=m.type,p=m.bytesPerElement}function f(m,v){r.drawElements(l,v,c,m*p),t.update(v,l,1)}function _(m,v,x){if(x===0)return;let b,A;if(i)b=r,A="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[A](l,v,c,m*p,x),t.update(v,l,x)}this.setMode=a,this.setIndex=h,this.render=f,this.renderInstances=_}function xX(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function o(l,a,c){switch(t.calls++,a){case 4:t.triangles+=c*(l/3);break;case 1:t.lines+=c*(l/2);break;case 3:t.lines+=c*(l-1);break;case 2:t.lines+=c*l;break;case 0:t.points+=c*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:o}}class Zx extends Vo{constructor(e=null,t=1,o=1,i=1){super(null);this.image={data:e,width:t,height:o,depth:i},this.magFilter=tr,this.minFilter=tr,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Zx.prototype.isDataTexture2DArray=!0;function SX(r,e){return r[0]-e[0]}function CX(r,e){return Math.abs(e[1])-Math.abs(r[1])}function y1(r,e){let t=1;const o=e.isInterleavedBufferAttribute?e.data.array:e.array;o instanceof Int8Array?t=127:o instanceof Int16Array?t=32767:o instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",o),r.divideScalar(t)}function bX(r,e,t){const o={},i=new Float32Array(8),l=new WeakMap,a=new Y,c=[];for(let h=0;h<8;h++)c[h]=[h,0];function p(h,f,_,m){const v=h.morphTargetInfluences;if(e.isWebGL2===!0){const x=f.morphAttributes.position.length;let b=l.get(f);if(b===void 0||b.count!==x){let z=function(){j.dispose(),l.delete(f),f.removeEventListener("dispose",z)};b!==void 0&&b.texture.dispose();const E=f.morphAttributes.normal!==void 0,M=f.morphAttributes.position,R=f.morphAttributes.normal||[],I=f.attributes.position.count,L=E===!0?2:1;let F=I*L,U=1;F>e.maxTextureSize&&(U=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const X=new Float32Array(F*U*4*x),j=new Zx(X,F,U,x);j.format=di,j.type=Hc,j.needsUpdate=!0;const P=L*4;for(let K=0;K<x;K++){const te=M[K],oe=R[K],ee=F*U*4*K;for(let pe=0;pe<te.count;pe++){a.fromBufferAttribute(te,pe),te.normalized===!0&&y1(a,te);const ae=pe*P;X[ee+ae+0]=a.x,X[ee+ae+1]=a.y,X[ee+ae+2]=a.z,X[ee+ae+3]=0,E===!0&&(a.fromBufferAttribute(oe,pe),oe.normalized===!0&&y1(a,oe),X[ee+ae+4]=a.x,X[ee+ae+5]=a.y,X[ee+ae+6]=a.z,X[ee+ae+7]=0)}}b={count:x,texture:j,size:new Ve(F,U)},l.set(f,b),f.addEventListener("dispose",z)}let A=0;for(let E=0;E<v.length;E++)A+=v[E];const k=f.morphTargetsRelative?1:1-A;m.getUniforms().setValue(r,"morphTargetBaseInfluence",k),m.getUniforms().setValue(r,"morphTargetInfluences",v),m.getUniforms().setValue(r,"morphTargetsTexture",b.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",b.size)}else{const x=v===void 0?0:v.length;let b=o[f.id];if(b===void 0||b.length!==x){b=[];for(let R=0;R<x;R++)b[R]=[R,0];o[f.id]=b}for(let R=0;R<x;R++){const I=b[R];I[0]=R,I[1]=v[R]}b.sort(CX);for(let R=0;R<8;R++)R<x&&b[R][1]?(c[R][0]=b[R][0],c[R][1]=b[R][1]):(c[R][0]=Number.MAX_SAFE_INTEGER,c[R][1]=0);c.sort(SX);const A=f.morphAttributes.position,k=f.morphAttributes.normal;let E=0;for(let R=0;R<8;R++){const I=c[R],L=I[0],F=I[1];L!==Number.MAX_SAFE_INTEGER&&F?(A&&f.getAttribute("morphTarget"+R)!==A[L]&&f.setAttribute("morphTarget"+R,A[L]),k&&f.getAttribute("morphNormal"+R)!==k[L]&&f.setAttribute("morphNormal"+R,k[L]),i[R]=F,E+=F):(A&&f.hasAttribute("morphTarget"+R)===!0&&f.deleteAttribute("morphTarget"+R),k&&f.hasAttribute("morphNormal"+R)===!0&&f.deleteAttribute("morphNormal"+R),i[R]=0)}const M=f.morphTargetsRelative?1:1-E;m.getUniforms().setValue(r,"morphTargetBaseInfluence",M),m.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:p}}function kX(r,e,t,o){let i=new WeakMap;function l(p){const h=o.render.frame,f=p.geometry,_=e.get(p,f);return i.get(_)!==h&&(e.update(_),i.set(_,h)),p.isInstancedMesh&&(p.hasEventListener("dispose",c)===!1&&p.addEventListener("dispose",c),t.update(p.instanceMatrix,34962),p.instanceColor!==null&&t.update(p.instanceColor,34962)),_}function a(){i=new WeakMap}function c(p){const h=p.target;h.removeEventListener("dispose",c),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:l,dispose:a}}class bM extends Vo{constructor(e=null,t=1,o=1,i=1){super(null);this.image={data:e,width:t,height:o,depth:i},this.magFilter=tr,this.minFilter=tr,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}bM.prototype.isDataTexture3D=!0;const f2=new Vo,m2=new Zx,g2=new bM,_2=new Gm,v1=[],T1=[],E1=new Float32Array(16),x1=new Float32Array(9),S1=new Float32Array(4);function Wm(r,e,t){const o=r[0];if(o<=0||o>0)return r;const i=e*t;let l=v1[i];if(l===void 0&&(l=new Float32Array(i),v1[i]=l),e!==0){o.toArray(l,0);for(let a=1,c=0;a!==e;++a)c+=t,r[a].toArray(l,c)}return l}function rs(r,e){if(r.length!==e.length)return!1;for(let t=0,o=r.length;t<o;t++)if(r[t]!==e[t])return!1;return!0}function Fi(r,e){for(let t=0,o=e.length;t<o;t++)r[t]=e[t]}function eS(r,e){let t=T1[e];t===void 0&&(t=new Int32Array(e),T1[e]=t);for(let o=0;o!==e;++o)t[o]=r.allocateTextureUnit();return t}function AX(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function wX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(rs(t,e))return;r.uniform2fv(this.addr,e),Fi(t,e)}}function MX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(rs(t,e))return;r.uniform3fv(this.addr,e),Fi(t,e)}}function RX(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(rs(t,e))return;r.uniform4fv(this.addr,e),Fi(t,e)}}function BX(r,e){const t=this.cache,o=e.elements;if(o===void 0){if(rs(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Fi(t,e)}else{if(rs(t,o))return;S1.set(o),r.uniformMatrix2fv(this.addr,!1,S1),Fi(t,o)}}function IX(r,e){const t=this.cache,o=e.elements;if(o===void 0){if(rs(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Fi(t,e)}else{if(rs(t,o))return;x1.set(o),r.uniformMatrix3fv(this.addr,!1,x1),Fi(t,o)}}function OX(r,e){const t=this.cache,o=e.elements;if(o===void 0){if(rs(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Fi(t,e)}else{if(rs(t,o))return;E1.set(o),r.uniformMatrix4fv(this.addr,!1,E1),Fi(t,o)}}function DX(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function LX(r,e){const t=this.cache;rs(t,e)||(r.uniform2iv(this.addr,e),Fi(t,e))}function NX(r,e){const t=this.cache;rs(t,e)||(r.uniform3iv(this.addr,e),Fi(t,e))}function $X(r,e){const t=this.cache;rs(t,e)||(r.uniform4iv(this.addr,e),Fi(t,e))}function PX(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function FX(r,e){const t=this.cache;rs(t,e)||(r.uniform2uiv(this.addr,e),Fi(t,e))}function UX(r,e){const t=this.cache;rs(t,e)||(r.uniform3uiv(this.addr,e),Fi(t,e))}function HX(r,e){const t=this.cache;rs(t,e)||(r.uniform4uiv(this.addr,e),Fi(t,e))}function GX(r,e,t){const o=this.cache,i=t.allocateTextureUnit();o[0]!==i&&(r.uniform1i(this.addr,i),o[0]=i),t.safeSetTexture2D(e||f2,i)}function VX(r,e,t){const o=this.cache,i=t.allocateTextureUnit();o[0]!==i&&(r.uniform1i(this.addr,i),o[0]=i),t.setTexture3D(e||g2,i)}function WX(r,e,t){const o=this.cache,i=t.allocateTextureUnit();o[0]!==i&&(r.uniform1i(this.addr,i),o[0]=i),t.safeSetTextureCube(e||_2,i)}function zX(r,e,t){const o=this.cache,i=t.allocateTextureUnit();o[0]!==i&&(r.uniform1i(this.addr,i),o[0]=i),t.setTexture2DArray(e||m2,i)}function XX(r){switch(r){case 5126:return AX;case 35664:return wX;case 35665:return MX;case 35666:return RX;case 35674:return BX;case 35675:return IX;case 35676:return OX;case 5124:case 35670:return DX;case 35667:case 35671:return LX;case 35668:case 35672:return NX;case 35669:case 35673:return $X;case 5125:return PX;case 36294:return FX;case 36295:return UX;case 36296:return HX;case 35678:case 36198:case 36298:case 36306:case 35682:return GX;case 35679:case 36299:case 36307:return VX;case 35680:case 36300:case 36308:case 36293:return WX;case 36289:case 36303:case 36311:case 36292:return zX}}function jX(r,e){r.uniform1fv(this.addr,e)}function JX(r,e){const t=Wm(e,this.size,2);r.uniform2fv(this.addr,t)}function KX(r,e){const t=Wm(e,this.size,3);r.uniform3fv(this.addr,t)}function YX(r,e){const t=Wm(e,this.size,4);r.uniform4fv(this.addr,t)}function qX(r,e){const t=Wm(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function QX(r,e){const t=Wm(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function ZX(r,e){const t=Wm(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function e8(r,e){r.uniform1iv(this.addr,e)}function t8(r,e){r.uniform2iv(this.addr,e)}function n8(r,e){r.uniform3iv(this.addr,e)}function o8(r,e){r.uniform4iv(this.addr,e)}function r8(r,e){r.uniform1uiv(this.addr,e)}function i8(r,e){r.uniform2uiv(this.addr,e)}function s8(r,e){r.uniform3uiv(this.addr,e)}function l8(r,e){r.uniform4uiv(this.addr,e)}function a8(r,e,t){const o=e.length,i=eS(t,o);r.uniform1iv(this.addr,i);for(let l=0;l!==o;++l)t.safeSetTexture2D(e[l]||f2,i[l])}function c8(r,e,t){const o=e.length,i=eS(t,o);r.uniform1iv(this.addr,i);for(let l=0;l!==o;++l)t.setTexture3D(e[l]||g2,i[l])}function u8(r,e,t){const o=e.length,i=eS(t,o);r.uniform1iv(this.addr,i);for(let l=0;l!==o;++l)t.safeSetTextureCube(e[l]||_2,i[l])}function h8(r,e,t){const o=e.length,i=eS(t,o);r.uniform1iv(this.addr,i);for(let l=0;l!==o;++l)t.setTexture2DArray(e[l]||m2,i[l])}function p8(r){switch(r){case 5126:return jX;case 35664:return JX;case 35665:return KX;case 35666:return YX;case 35674:return qX;case 35675:return QX;case 35676:return ZX;case 5124:case 35670:return e8;case 35667:case 35671:return t8;case 35668:case 35672:return n8;case 35669:case 35673:return o8;case 5125:return r8;case 36294:return i8;case 36295:return s8;case 36296:return l8;case 35678:case 36198:case 36298:case 36306:case 35682:return a8;case 35679:case 36299:case 36307:return c8;case 35680:case 36300:case 36308:case 36293:return u8;case 36289:case 36303:case 36311:case 36292:return h8}}function d8(r,e,t){this.id=r,this.addr=t,this.cache=[],this.setValue=XX(e.type)}function y2(r,e,t){this.id=r,this.addr=t,this.cache=[],this.size=e.size,this.setValue=p8(e.type)}y2.prototype.updateCache=function(r){const e=this.cache;r instanceof Float32Array&&e.length!==r.length&&(this.cache=new Float32Array(r.length)),Fi(e,r)};function v2(r){this.id=r,this.seq=[],this.map={}}v2.prototype.setValue=function(r,e,t){const o=this.seq;for(let i=0,l=o.length;i!==l;++i){const a=o[i];a.setValue(r,e[a.id],t)}};const hb=/(\w+)(\])?(\[|\.)?/g;function C1(r,e){r.seq.push(e),r.map[e.id]=e}function f8(r,e,t){const o=r.name,i=o.length;for(hb.lastIndex=0;;){const l=hb.exec(o),a=hb.lastIndex;let c=l[1];const p=l[2]==="]",h=l[3];if(p&&(c=c|0),h===void 0||h==="["&&a+2===i){C1(t,h===void 0?new d8(c,r,e):new y2(c,r,e));break}else{let _=t.map[c];_===void 0&&(_=new v2(c),C1(t,_)),t=_}}}function rh(r,e){this.seq=[],this.map={};const t=r.getProgramParameter(e,35718);for(let o=0;o<t;++o){const i=r.getActiveUniform(e,o),l=r.getUniformLocation(e,i.name);f8(i,l,this)}}rh.prototype.setValue=function(r,e,t,o){const i=this.map[e];i!==void 0&&i.setValue(r,t,o)};rh.prototype.setOptional=function(r,e,t){const o=e[t];o!==void 0&&this.setValue(r,t,o)};rh.upload=function(r,e,t,o){for(let i=0,l=e.length;i!==l;++i){const a=e[i],c=t[a.id];c.needsUpdate!==!1&&a.setValue(r,c.value,o)}};rh.seqWithValue=function(r,e){const t=[];for(let o=0,i=r.length;o!==i;++o){const l=r[o];l.id in e&&t.push(l)}return t};function b1(r,e,t){const o=r.createShader(e);return r.shaderSource(o,t),r.compileShader(o),o}let m8=0;function g8(r){const e=r.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function _8(r){switch(r){case la:return["Linear","( value )"];case qn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function k1(r,e,t){const o=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();return o&&i===""?"":t.toUpperCase()+`

`+i+`

`+g8(r.getShaderSource(e))}function y8(r,e){const t=_8(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function v8(r,e){let t;switch(e){case bF:t="Linear";break;case kF:t="Reinhard";break;case AF:t="OptimizedCineon";break;case TM:t="ACESFilmic";break;case wF:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function T8(r){return[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(f_).join(`
`)}function E8(r){const e=[];for(const t in r){const o=r[t];o!==!1&&e.push("#define "+t+" "+o)}return e.join(`
`)}function x8(r,e){const t={},o=r.getProgramParameter(e,35721);for(let i=0;i<o;i++){const l=r.getActiveAttrib(e,i),a=l.name;let c=1;l.type===35674&&(c=2),l.type===35675&&(c=3),l.type===35676&&(c=4),t[a]={type:l.type,location:r.getAttribLocation(e,a),locationSize:c}}return t}function f_(r){return r!==""}function A1(r,e){return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function w1(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const S8=/^[ \t]*#include +<([\w\d./]+)>/gm;function OA(r){return r.replace(S8,C8)}function C8(r,e){const t=yn[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return OA(t)}const b8=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,k8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function M1(r){return r.replace(k8,T2).replace(b8,A8)}function A8(r,e,t,o){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),T2(r,e,t,o)}function T2(r,e,t,o){let i="";for(let l=parseInt(e);l<parseInt(t);l++)i+=o.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return i}function R1(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function w8(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===mM?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===gM?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Rf&&(e="SHADOWMAP_TYPE_VSM"),e}function M8(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case sd:case ld:e="ENVMAP_TYPE_CUBE";break;case Hm:case tv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function R8(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case ld:case tv:e="ENVMAP_MODE_REFRACTION";break}return e}function B8(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case ev:e="ENVMAP_BLENDING_MULTIPLY";break;case SF:e="ENVMAP_BLENDING_MIX";break;case CF:e="ENVMAP_BLENDING_ADD";break}return e}function I8(r,e,t,o){const i=r.getContext(),l=t.defines;let a=t.vertexShader,c=t.fragmentShader;const p=w8(t),h=M8(t),f=R8(t),_=B8(t),m=t.isWebGL2?"":T8(t),v=E8(l),x=i.createProgram();let b,A,k=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=[v].filter(f_).join(`
`),b.length>0&&(b+=`
`),A=[m,v].filter(f_).join(`
`),A.length>0&&(A+=`
`)):(b=[R1(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(f_).join(`
`),A=[m,R1(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+_:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ja?"#define TONE_MAPPING":"",t.toneMapping!==Ja?yn.tonemapping_pars_fragment:"",t.toneMapping!==Ja?v8("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",yn.encodings_pars_fragment,y8("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(f_).join(`
`)),a=OA(a),a=A1(a,t),a=w1(a,t),c=OA(c),c=A1(c,t),c=w1(c,t),a=M1(a),c=M1(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(k=`#version 300 es
`,b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,A=["#define varying in",t.glslVersion===RA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===RA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const E=k+b+a,M=k+A+c,R=b1(i,35633,E),I=b1(i,35632,M);if(i.attachShader(x,R),i.attachShader(x,I),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),r.debug.checkShaderErrors){const U=i.getProgramInfoLog(x).trim(),X=i.getShaderInfoLog(R).trim(),j=i.getShaderInfoLog(I).trim();let P=!0,z=!0;if(i.getProgramParameter(x,35714)===!1){P=!1;const K=k1(i,R,"vertex"),te=k1(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+U+`
`+K+`
`+te)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(X===""||j==="")&&(z=!1);z&&(this.diagnostics={runnable:P,programLog:U,vertexShader:{log:X,prefix:b},fragmentShader:{log:j,prefix:A}})}i.deleteShader(R),i.deleteShader(I);let L;this.getUniforms=function(){return L===void 0&&(L=new rh(i,x)),L};let F;return this.getAttributes=function(){return F===void 0&&(F=x8(i,x)),F},this.destroy=function(){o.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=m8++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=I,this}let O8=0;class D8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,o=e.fragmentShader,i=this._getShaderStage(t),l=this._getShaderStage(o),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(l)===!1&&(a.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const o of t)o.usedTimes--,o.usedTimes===0&&this.shaderCache.delete(o);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const o=new L8;t.set(e,o)}return t.get(e)}}class L8{constructor(){this.id=O8++,this.usedTimes=0}}function N8(r,e,t,o,i,l,a){const c=new Pp,p=new D8,h=[],f=i.isWebGL2,_=i.logarithmicDepthBuffer,m=i.floatVertexTextures,v=i.maxVertexUniforms,x=i.vertexTextures;let b=i.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function k(P){const K=P.skeleton.bones;if(m)return 1024;{const oe=Math.floor((v-20)/4),ee=Math.min(oe,K.length);return ee<K.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+K.length+" bones. This GPU supports "+ee+"."),0):ee}}function E(P,z,K,te,oe){const ee=te.fog,pe=P.isMeshStandardMaterial?te.environment:null,ae=(P.isMeshStandardMaterial?t:e).get(P.envMap||pe),Ee=A[P.type],S=oe.isSkinnedMesh?k(oe):0;P.precision!==null&&(b=i.getMaxPrecision(P.precision),b!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",b,"instead."));let D,H,q,Q;if(Ee){const Oe=ts[Ee];D=Oe.vertexShader,H=Oe.fragmentShader}else D=P.vertexShader,H=P.fragmentShader,p.update(P),q=p.getVertexShaderID(P),Q=p.getFragmentShaderID(P);const de=r.getRenderTarget(),je=P.alphaTest>0,We=P.clearcoat>0;return{isWebGL2:f,shaderID:Ee,shaderName:P.type,vertexShader:D,fragmentShader:H,defines:P.defines,customVertexShaderID:q,customFragmentShaderID:Q,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:b,instancing:oe.isInstancedMesh===!0,instancingColor:oe.isInstancedMesh===!0&&oe.instanceColor!==null,supportsVertexTextures:x,outputEncoding:de===null?r.outputEncoding:de.isXRRenderTarget===!0?de.texture.encoding:la,map:!!P.map,matcap:!!P.matcap,envMap:!!ae,envMapMode:ae&&ae.mapping,envMapCubeUV:!!ae&&(ae.mapping===Hm||ae.mapping===tv),lightMap:!!P.lightMap,aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:P.normalMapType===qF,tangentSpaceNormalMap:P.normalMapType===bh,decodeVideoTexture:!!P.map&&P.map.isVideoTexture===!0&&P.map.encoding===qn,clearcoat:We,clearcoatMap:We&&!!P.clearcoatMap,clearcoatRoughnessMap:We&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:We&&!!P.clearcoatNormalMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularColorMap:!!P.specularColorMap,transparent:P.transparent,alphaMap:!!P.alphaMap,alphaTest:je,gradientMap:!!P.gradientMap,sheen:P.sheen>0,sheenColorMap:!!P.sheenColorMap,sheenRoughnessMap:!!P.sheenRoughnessMap,transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!oe.geometry&&!!oe.geometry.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!oe.geometry&&!!oe.geometry.attributes.color&&oe.geometry.attributes.color.itemSize===4,vertexUvs:!!P.map||!!P.bumpMap||!!P.normalMap||!!P.specularMap||!!P.alphaMap||!!P.emissiveMap||!!P.roughnessMap||!!P.metalnessMap||!!P.clearcoatMap||!!P.clearcoatRoughnessMap||!!P.clearcoatNormalMap||!!P.displacementMap||!!P.transmissionMap||!!P.thicknessMap||!!P.specularIntensityMap||!!P.specularColorMap||!!P.sheenColorMap||!!P.sheenRoughnessMap,uvsVertexOnly:!(!!P.map||!!P.bumpMap||!!P.normalMap||!!P.specularMap||!!P.alphaMap||!!P.emissiveMap||!!P.roughnessMap||!!P.metalnessMap||!!P.clearcoatNormalMap||P.transmission>0||!!P.transmissionMap||!!P.thicknessMap||!!P.specularIntensityMap||!!P.specularColorMap||P.sheen>0||!!P.sheenColorMap||!!P.sheenRoughnessMap)&&!!P.displacementMap,fog:!!ee,useFog:P.fog,fogExp2:ee&&ee.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:_,skinning:oe.isSkinnedMesh===!0&&S>0,maxBones:S,useVertexTexture:m,morphTargets:!!oe.geometry&&!!oe.geometry.morphAttributes.position,morphNormals:!!oe.geometry&&!!oe.geometry.morphAttributes.normal,morphTargetsCount:!!oe.geometry&&!!oe.geometry.morphAttributes.position?oe.geometry.morphAttributes.position.length:0,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:P.dithering,shadowMapEnabled:r.shadowMap.enabled&&K.length>0,shadowMapType:r.shadowMap.type,toneMapping:P.toneMapped?r.toneMapping:Ja,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===ph,flipSided:P.side===ur,depthPacking:P.depthPacking!==void 0?P.depthPacking:!1,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||o.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||o.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||o.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}}function M(P){const z=[];if(P.shaderID?z.push(P.shaderID):(z.push(P.customVertexShaderID),z.push(P.customFragmentShaderID)),P.defines!==void 0)for(const K in P.defines)z.push(K),z.push(P.defines[K]);return P.isRawShaderMaterial===!1&&(R(z,P),I(z,P),z.push(r.outputEncoding)),z.push(P.customProgramCacheKey),z.join()}function R(P,z){P.push(z.precision),P.push(z.outputEncoding),P.push(z.envMapMode),P.push(z.combine),P.push(z.vertexUvs),P.push(z.fogExp2),P.push(z.sizeAttenuation),P.push(z.maxBones),P.push(z.morphTargetsCount),P.push(z.numDirLights),P.push(z.numPointLights),P.push(z.numSpotLights),P.push(z.numHemiLights),P.push(z.numRectAreaLights),P.push(z.numDirLightShadows),P.push(z.numPointLightShadows),P.push(z.numSpotLightShadows),P.push(z.shadowMapType),P.push(z.toneMapping),P.push(z.numClippingPlanes),P.push(z.numClipIntersection)}function I(P,z){c.disableAll(),z.isWebGL2&&c.enable(0),z.supportsVertexTextures&&c.enable(1),z.instancing&&c.enable(2),z.instancingColor&&c.enable(3),z.map&&c.enable(4),z.matcap&&c.enable(5),z.envMap&&c.enable(6),z.envMapCubeUV&&c.enable(7),z.lightMap&&c.enable(8),z.aoMap&&c.enable(9),z.emissiveMap&&c.enable(10),z.bumpMap&&c.enable(11),z.normalMap&&c.enable(12),z.objectSpaceNormalMap&&c.enable(13),z.tangentSpaceNormalMap&&c.enable(14),z.clearcoat&&c.enable(15),z.clearcoatMap&&c.enable(16),z.clearcoatRoughnessMap&&c.enable(17),z.clearcoatNormalMap&&c.enable(18),z.displacementMap&&c.enable(19),z.specularMap&&c.enable(20),z.roughnessMap&&c.enable(21),z.metalnessMap&&c.enable(22),z.gradientMap&&c.enable(23),z.alphaMap&&c.enable(24),z.alphaTest&&c.enable(25),z.vertexColors&&c.enable(26),z.vertexAlphas&&c.enable(27),z.vertexUvs&&c.enable(28),z.vertexTangents&&c.enable(29),z.uvsVertexOnly&&c.enable(30),z.fog&&c.enable(31),P.push(c.mask),c.disableAll(),z.useFog&&c.enable(0),z.flatShading&&c.enable(1),z.logarithmicDepthBuffer&&c.enable(2),z.skinning&&c.enable(3),z.useVertexTexture&&c.enable(4),z.morphTargets&&c.enable(5),z.morphNormals&&c.enable(6),z.premultipliedAlpha&&c.enable(7),z.shadowMapEnabled&&c.enable(8),z.physicallyCorrectLights&&c.enable(9),z.doubleSided&&c.enable(10),z.flipSided&&c.enable(11),z.depthPacking&&c.enable(12),z.dithering&&c.enable(13),z.specularIntensityMap&&c.enable(14),z.specularColorMap&&c.enable(15),z.transmission&&c.enable(16),z.transmissionMap&&c.enable(17),z.thicknessMap&&c.enable(18),z.sheen&&c.enable(19),z.sheenColorMap&&c.enable(20),z.sheenRoughnessMap&&c.enable(21),z.decodeVideoTexture&&c.enable(22),z.transparent&&c.enable(23),P.push(c.mask)}function L(P){const z=A[P.type];let K;if(z){const te=ts[z];K=Yx.clone(te.uniforms)}else K=P.uniforms;return K}function F(P,z){let K;for(let te=0,oe=h.length;te<oe;te++){const ee=h[te];if(ee.cacheKey===z){K=ee,++K.usedTimes;break}}return K===void 0&&(K=new I8(r,z,P,l),h.push(K)),K}function U(P){if(--P.usedTimes===0){const z=h.indexOf(P);h[z]=h[h.length-1],h.pop(),P.destroy()}}function X(P){p.remove(P)}function j(){p.dispose()}return{getParameters:E,getProgramCacheKey:M,getUniforms:L,acquireProgram:F,releaseProgram:U,releaseShaderCache:X,programs:h,dispose:j}}function $8(){let r=new WeakMap;function e(l){let a=r.get(l);return a===void 0&&(a={},r.set(l,a)),a}function t(l){r.delete(l)}function o(l,a,c){r.get(l)[a]=c}function i(){r=new WeakMap}return{get:e,remove:t,update:o,dispose:i}}function P8(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function B1(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function I1(){const r=[];let e=0;const t=[],o=[],i=[];function l(){e=0,t.length=0,o.length=0,i.length=0}function a(_,m,v,x,b,A){let k=r[e];return k===void 0?(k={id:_.id,object:_,geometry:m,material:v,groupOrder:x,renderOrder:_.renderOrder,z:b,group:A},r[e]=k):(k.id=_.id,k.object=_,k.geometry=m,k.material=v,k.groupOrder=x,k.renderOrder=_.renderOrder,k.z=b,k.group=A),e++,k}function c(_,m,v,x,b,A){const k=a(_,m,v,x,b,A);v.transmission>0?o.push(k):v.transparent===!0?i.push(k):t.push(k)}function p(_,m,v,x,b,A){const k=a(_,m,v,x,b,A);v.transmission>0?o.unshift(k):v.transparent===!0?i.unshift(k):t.unshift(k)}function h(_,m){t.length>1&&t.sort(_||P8),o.length>1&&o.sort(m||B1),i.length>1&&i.sort(m||B1)}function f(){for(let _=e,m=r.length;_<m;_++){const v=r[_];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:o,transparent:i,init:l,push:c,unshift:p,finish:f,sort:h}}function F8(){let r=new WeakMap;function e(o,i){let l;return r.has(o)===!1?(l=new I1,r.set(o,[l])):i>=r.get(o).length?(l=new I1,r.get(o).push(l)):l=r.get(o)[i],l}function t(){r=new WeakMap}return{get:e,dispose:t}}function U8(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new tt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new tt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new tt,groundColor:new tt};break;case"RectAreaLight":t={color:new tt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return r[e.id]=t,t}}}function H8(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let G8=0;function V8(r,e){return(e.castShadow?1:0)-(r.castShadow?1:0)}function W8(r,e){const t=new U8,o=H8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let f=0;f<9;f++)i.probe.push(new Y);const l=new Y,a=new wt,c=new wt;function p(f,_){let m=0,v=0,x=0;for(let X=0;X<9;X++)i.probe[X].set(0,0,0);let b=0,A=0,k=0,E=0,M=0,R=0,I=0,L=0;f.sort(V8);const F=_!==!0?Math.PI:1;for(let X=0,j=f.length;X<j;X++){const P=f[X],z=P.color,K=P.intensity,te=P.distance,oe=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)m+=z.r*K*F,v+=z.g*K*F,x+=z.b*K*F;else if(P.isLightProbe)for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(P.sh.coefficients[ee],K);else if(P.isDirectionalLight){const ee=t.get(P);if(ee.color.copy(P.color).multiplyScalar(P.intensity*F),P.castShadow){const pe=P.shadow,ae=o.get(P);ae.shadowBias=pe.bias,ae.shadowNormalBias=pe.normalBias,ae.shadowRadius=pe.radius,ae.shadowMapSize=pe.mapSize,i.directionalShadow[b]=ae,i.directionalShadowMap[b]=oe,i.directionalShadowMatrix[b]=P.shadow.matrix,R++}i.directional[b]=ee,b++}else if(P.isSpotLight){const ee=t.get(P);if(ee.position.setFromMatrixPosition(P.matrixWorld),ee.color.copy(z).multiplyScalar(K*F),ee.distance=te,ee.coneCos=Math.cos(P.angle),ee.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),ee.decay=P.decay,P.castShadow){const pe=P.shadow,ae=o.get(P);ae.shadowBias=pe.bias,ae.shadowNormalBias=pe.normalBias,ae.shadowRadius=pe.radius,ae.shadowMapSize=pe.mapSize,i.spotShadow[k]=ae,i.spotShadowMap[k]=oe,i.spotShadowMatrix[k]=P.shadow.matrix,L++}i.spot[k]=ee,k++}else if(P.isRectAreaLight){const ee=t.get(P);ee.color.copy(z).multiplyScalar(K),ee.halfWidth.set(P.width*.5,0,0),ee.halfHeight.set(0,P.height*.5,0),i.rectArea[E]=ee,E++}else if(P.isPointLight){const ee=t.get(P);if(ee.color.copy(P.color).multiplyScalar(P.intensity*F),ee.distance=P.distance,ee.decay=P.decay,P.castShadow){const pe=P.shadow,ae=o.get(P);ae.shadowBias=pe.bias,ae.shadowNormalBias=pe.normalBias,ae.shadowRadius=pe.radius,ae.shadowMapSize=pe.mapSize,ae.shadowCameraNear=pe.camera.near,ae.shadowCameraFar=pe.camera.far,i.pointShadow[A]=ae,i.pointShadowMap[A]=oe,i.pointShadowMatrix[A]=P.shadow.matrix,I++}i.point[A]=ee,A++}else if(P.isHemisphereLight){const ee=t.get(P);ee.skyColor.copy(P.color).multiplyScalar(K*F),ee.groundColor.copy(P.groundColor).multiplyScalar(K*F),i.hemi[M]=ee,M++}}E>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_FLOAT_1,i.rectAreaLTC2=ht.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_HALF_1,i.rectAreaLTC2=ht.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=v,i.ambient[2]=x;const U=i.hash;(U.directionalLength!==b||U.pointLength!==A||U.spotLength!==k||U.rectAreaLength!==E||U.hemiLength!==M||U.numDirectionalShadows!==R||U.numPointShadows!==I||U.numSpotShadows!==L)&&(i.directional.length=b,i.spot.length=k,i.rectArea.length=E,i.point.length=A,i.hemi.length=M,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=I,i.pointShadowMap.length=I,i.spotShadow.length=L,i.spotShadowMap.length=L,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=I,i.spotShadowMatrix.length=L,U.directionalLength=b,U.pointLength=A,U.spotLength=k,U.rectAreaLength=E,U.hemiLength=M,U.numDirectionalShadows=R,U.numPointShadows=I,U.numSpotShadows=L,i.version=G8++)}function h(f,_){let m=0,v=0,x=0,b=0,A=0;const k=_.matrixWorldInverse;for(let E=0,M=f.length;E<M;E++){const R=f[E];if(R.isDirectionalLight){const I=i.directional[m];I.direction.setFromMatrixPosition(R.matrixWorld),l.setFromMatrixPosition(R.target.matrixWorld),I.direction.sub(l),I.direction.transformDirection(k),m++}else if(R.isSpotLight){const I=i.spot[x];I.position.setFromMatrixPosition(R.matrixWorld),I.position.applyMatrix4(k),I.direction.setFromMatrixPosition(R.matrixWorld),l.setFromMatrixPosition(R.target.matrixWorld),I.direction.sub(l),I.direction.transformDirection(k),x++}else if(R.isRectAreaLight){const I=i.rectArea[b];I.position.setFromMatrixPosition(R.matrixWorld),I.position.applyMatrix4(k),c.identity(),a.copy(R.matrixWorld),a.premultiply(k),c.extractRotation(a),I.halfWidth.set(R.width*.5,0,0),I.halfHeight.set(0,R.height*.5,0),I.halfWidth.applyMatrix4(c),I.halfHeight.applyMatrix4(c),b++}else if(R.isPointLight){const I=i.point[v];I.position.setFromMatrixPosition(R.matrixWorld),I.position.applyMatrix4(k),v++}else if(R.isHemisphereLight){const I=i.hemi[A];I.direction.setFromMatrixPosition(R.matrixWorld),I.direction.transformDirection(k),I.direction.normalize(),A++}}}return{setup:p,setupView:h,state:i}}function O1(r,e){const t=new W8(r,e),o=[],i=[];function l(){o.length=0,i.length=0}function a(_){o.push(_)}function c(_){i.push(_)}function p(_){t.setup(o,_)}function h(_){t.setupView(o,_)}return{init:l,state:{lightsArray:o,shadowsArray:i,lights:t},setupLights:p,setupLightsView:h,pushLight:a,pushShadow:c}}function z8(r,e){let t=new WeakMap;function o(l,a=0){let c;return t.has(l)===!1?(c=new O1(r,e),t.set(l,[c])):a>=t.get(l).length?(c=new O1(r,e),t.get(l).push(c)):c=t.get(l)[a],c}function i(){t=new WeakMap}return{get:o,dispose:i}}class tS extends dr{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=KF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}tS.prototype.isMeshDepthMaterial=!0;class nS extends dr{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new Y,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}nS.prototype.isMeshDistanceMaterial=!0;const X8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,j8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function E2(r,e,t){let o=new nv;const i=new Ve,l=new Ve,a=new Gn,c=new tS({depthPacking:YF}),p=new nS,h={},f=t.maxTextureSize,_={0:ur,1:hh,2:ph},m=new tc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:X8,fragmentShader:j8}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const x=new Ut;x.setAttribute("position",new vn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new nr(x,m),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mM,this.render=function(R,I,L){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||R.length===0)return;const F=r.getRenderTarget(),U=r.getActiveCubeFace(),X=r.getActiveMipmapLevel(),j=r.state;j.setBlending(Wc),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);for(let P=0,z=R.length;P<z;P++){const K=R[P],te=K.shadow;if(te===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(te.autoUpdate===!1&&te.needsUpdate===!1)continue;i.copy(te.mapSize);const oe=te.getFrameExtents();if(i.multiply(oe),l.copy(te.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(l.x=Math.floor(f/oe.x),i.x=l.x*oe.x,te.mapSize.x=l.x),i.y>f&&(l.y=Math.floor(f/oe.y),i.y=l.y*oe.y,te.mapSize.y=l.y)),te.map===null&&!te.isPointLightShadow&&this.type===Rf){const pe={minFilter:So,magFilter:So,format:di};te.map=new Zs(i.x,i.y,pe),te.map.texture.name=K.name+".shadowMap",te.mapPass=new Zs(i.x,i.y,pe),te.camera.updateProjectionMatrix()}if(te.map===null){const pe={minFilter:tr,magFilter:tr,format:di};te.map=new Zs(i.x,i.y,pe),te.map.texture.name=K.name+".shadowMap",te.camera.updateProjectionMatrix()}r.setRenderTarget(te.map),r.clear();const ee=te.getViewportCount();for(let pe=0;pe<ee;pe++){const ae=te.getViewport(pe);a.set(l.x*ae.x,l.y*ae.y,l.x*ae.z,l.y*ae.w),j.viewport(a),te.updateMatrices(K,pe),o=te.getFrustum(),M(I,L,te.camera,K,this.type)}!te.isPointLightShadow&&this.type===Rf&&k(te,L),te.needsUpdate=!1}A.needsUpdate=!1,r.setRenderTarget(F,U,X)};function k(R,I){const L=e.update(b);m.defines.VSM_SAMPLES!==R.blurSamples&&(m.defines.VSM_SAMPLES=R.blurSamples,v.defines.VSM_SAMPLES=R.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),m.uniforms.shadow_pass.value=R.map.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,r.setRenderTarget(R.mapPass),r.clear(),r.renderBufferDirect(I,null,L,m,b,null),v.uniforms.shadow_pass.value=R.mapPass.texture,v.uniforms.resolution.value=R.mapSize,v.uniforms.radius.value=R.radius,r.setRenderTarget(R.map),r.clear(),r.renderBufferDirect(I,null,L,v,b,null)}function E(R,I,L,F,U,X,j){let P=null;const z=F.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(z!==void 0?P=z:P=F.isPointLight===!0?p:c,r.localClippingEnabled&&L.clipShadows===!0&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0){const K=P.uuid,te=L.uuid;let oe=h[K];oe===void 0&&(oe={},h[K]=oe);let ee=oe[te];ee===void 0&&(ee=P.clone(),oe[te]=ee),P=ee}return P.visible=L.visible,P.wireframe=L.wireframe,j===Rf?P.side=L.shadowSide!==null?L.shadowSide:L.side:P.side=L.shadowSide!==null?L.shadowSide:_[L.side],P.alphaMap=L.alphaMap,P.alphaTest=L.alphaTest,P.clipShadows=L.clipShadows,P.clippingPlanes=L.clippingPlanes,P.clipIntersection=L.clipIntersection,P.displacementMap=L.displacementMap,P.displacementScale=L.displacementScale,P.displacementBias=L.displacementBias,P.wireframeLinewidth=L.wireframeLinewidth,P.linewidth=L.linewidth,F.isPointLight===!0&&P.isMeshDistanceMaterial===!0&&(P.referencePosition.setFromMatrixPosition(F.matrixWorld),P.nearDistance=U,P.farDistance=X),P}function M(R,I,L,F,U){if(R.visible===!1)return;if(R.layers.test(I.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&U===Rf)&&(!R.frustumCulled||o.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,R.matrixWorld);const P=e.update(R),z=R.material;if(Array.isArray(z)){const K=P.groups;for(let te=0,oe=K.length;te<oe;te++){const ee=K[te],pe=z[ee.materialIndex];if(pe&&pe.visible){const ae=E(R,P,pe,F,L.near,L.far,U);r.renderBufferDirect(L,null,P,ae,R,ee)}}}else if(z.visible){const K=E(R,P,z,F,L.near,L.far,U);r.renderBufferDirect(L,null,P,K,R,null)}}const j=R.children;for(let P=0,z=j.length;P<z;P++)M(j[P],I,L,F,U)}}function J8(r,e,t){const o=t.isWebGL2;function i(){let W=!1;const Me=new Gn;let we=null;const yt=new Gn(0,0,0,0);return{setMask:function($e){we!==$e&&!W&&(r.colorMask($e,$e,$e,$e),we=$e)},setLocked:function($e){W=$e},setClear:function($e,nt,it,Jt,$n){$n===!0&&($e*=Jt,nt*=Jt,it*=Jt),Me.set($e,nt,it,Jt),yt.equals(Me)===!1&&(r.clearColor($e,nt,it,Jt),yt.copy(Me))},reset:function(){W=!1,we=null,yt.set(-1,0,0,0)}}}function l(){let W=!1,Me=null,we=null,yt=null;return{setTest:function($e){$e?de(2929):je(2929)},setMask:function($e){Me!==$e&&!W&&(r.depthMask($e),Me=$e)},setFunc:function($e){if(we!==$e){if($e)switch($e){case gF:r.depthFunc(512);break;case _F:r.depthFunc(519);break;case yF:r.depthFunc(513);break;case QE:r.depthFunc(515);break;case vF:r.depthFunc(514);break;case TF:r.depthFunc(518);break;case EF:r.depthFunc(516);break;case xF:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);we=$e}},setLocked:function($e){W=$e},setClear:function($e){yt!==$e&&(r.clearDepth($e),yt=$e)},reset:function(){W=!1,Me=null,we=null,yt=null}}}function a(){let W=!1,Me=null,we=null,yt=null,$e=null,nt=null,it=null,Jt=null,$n=null;return{setTest:function(ce){W||(ce?de(2960):je(2960))},setMask:function(ce){Me!==ce&&!W&&(r.stencilMask(ce),Me=ce)},setFunc:function(ce,cn,Ie){(we!==ce||yt!==cn||$e!==Ie)&&(r.stencilFunc(ce,cn,Ie),we=ce,yt=cn,$e=Ie)},setOp:function(ce,cn,Ie){(nt!==ce||it!==cn||Jt!==Ie)&&(r.stencilOp(ce,cn,Ie),nt=ce,it=cn,Jt=Ie)},setLocked:function(ce){W=ce},setClear:function(ce){$n!==ce&&(r.clearStencil(ce),$n=ce)},reset:function(){W=!1,Me=null,we=null,yt=null,$e=null,nt=null,it=null,Jt=null,$n=null}}}const c=new i,p=new l,h=new a;let f={},_={},m=new WeakMap,v=[],x=null,b=!1,A=null,k=null,E=null,M=null,R=null,I=null,L=null,F=!1,U=null,X=null,j=null,P=null,z=null;const K=r.getParameter(35661);let te=!1,oe=0;const ee=r.getParameter(7938);ee.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(ee)[1]),te=oe>=1):ee.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),te=oe>=2);let pe=null,ae={};const Ee=r.getParameter(3088),S=r.getParameter(2978),D=new Gn().fromArray(Ee),H=new Gn().fromArray(S);function q(W,Me,we){const yt=new Uint8Array(4),$e=r.createTexture();r.bindTexture(W,$e),r.texParameteri(W,10241,9728),r.texParameteri(W,10240,9728);for(let nt=0;nt<we;nt++)r.texImage2D(Me+nt,0,6408,1,1,0,6408,5121,yt);return $e}const Q={};Q[3553]=q(3553,3553,1),Q[34067]=q(34067,34069,6),c.setClear(0,0,0,1),p.setClear(1),h.setClear(0),de(2929),p.setFunc(QE),Le(!1),Ke(oA),de(2884),Re(Wc);function de(W){f[W]!==!0&&(r.enable(W),f[W]=!0)}function je(W){f[W]!==!1&&(r.disable(W),f[W]=!1)}function We(W,Me){return _[W]!==Me?(r.bindFramebuffer(W,Me),_[W]=Me,o&&(W===36009&&(_[36160]=Me),W===36160&&(_[36009]=Me)),!0):!1}function ze(W,Me){let we=v,yt=!1;if(W)if(we=m.get(Me),we===void 0&&(we=[],m.set(Me,we)),W.isWebGLMultipleRenderTargets){const $e=W.texture;if(we.length!==$e.length||we[0]!==36064){for(let nt=0,it=$e.length;nt<it;nt++)we[nt]=36064+nt;we.length=$e.length,yt=!0}}else we[0]!==36064&&(we[0]=36064,yt=!0);else we[0]!==1029&&(we[0]=1029,yt=!0);yt&&(t.isWebGL2?r.drawBuffers(we):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(we))}function Oe(W){return x!==W?(r.useProgram(W),x=W,!0):!1}const Ye={[yp]:32774,[iF]:32778,[sF]:32779};if(o)Ye[lA]=32775,Ye[aA]=32776;else{const W=e.get("EXT_blend_minmax");W!==null&&(Ye[lA]=W.MIN_EXT,Ye[aA]=W.MAX_EXT)}const et={[lF]:0,[aF]:1,[cF]:768,[yM]:770,[mF]:776,[dF]:774,[hF]:772,[uF]:769,[vM]:771,[fF]:775,[pF]:773};function Re(W,Me,we,yt,$e,nt,it,Jt){if(W===Wc){b===!0&&(je(3042),b=!1);return}if(b===!1&&(de(3042),b=!0),W!==rF){if(W!==A||Jt!==F){if((k!==yp||R!==yp)&&(r.blendEquation(32774),k=yp,R=yp),Jt)switch(W){case Vf:r.blendFuncSeparate(1,771,1,771);break;case rA:r.blendFunc(1,1);break;case iA:r.blendFuncSeparate(0,769,0,1);break;case sA:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}else switch(W){case Vf:r.blendFuncSeparate(770,771,1,771);break;case rA:r.blendFunc(770,1);break;case iA:r.blendFuncSeparate(0,769,0,1);break;case sA:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}E=null,M=null,I=null,L=null,A=W,F=Jt}return}$e=$e||Me,nt=nt||we,it=it||yt,(Me!==k||$e!==R)&&(r.blendEquationSeparate(Ye[Me],Ye[$e]),k=Me,R=$e),(we!==E||yt!==M||nt!==I||it!==L)&&(r.blendFuncSeparate(et[we],et[yt],et[nt],et[it]),E=we,M=yt,I=nt,L=it),A=W,F=null}function Te(W,Me){W.side===ph?je(2884):de(2884);let we=W.side===ur;Me&&(we=!we),Le(we),W.blending===Vf&&W.transparent===!1?Re(Wc):Re(W.blending,W.blendEquation,W.blendSrc,W.blendDst,W.blendEquationAlpha,W.blendSrcAlpha,W.blendDstAlpha,W.premultipliedAlpha),p.setFunc(W.depthFunc),p.setTest(W.depthTest),p.setMask(W.depthWrite),c.setMask(W.colorWrite);const yt=W.stencilWrite;h.setTest(yt),yt&&(h.setMask(W.stencilWriteMask),h.setFunc(W.stencilFunc,W.stencilRef,W.stencilFuncMask),h.setOp(W.stencilFail,W.stencilZFail,W.stencilZPass)),qe(W.polygonOffset,W.polygonOffsetFactor,W.polygonOffsetUnits),W.alphaToCoverage===!0?de(32926):je(32926)}function Le(W){U!==W&&(W?r.frontFace(2304):r.frontFace(2305),U=W)}function Ke(W){W!==nF?(de(2884),W!==X&&(W===oA?r.cullFace(1029):W===oF?r.cullFace(1028):r.cullFace(1032))):je(2884),X=W}function Ne(W){W!==j&&(te&&r.lineWidth(W),j=W)}function qe(W,Me,we){W?(de(32823),(P!==Me||z!==we)&&(r.polygonOffset(Me,we),P=Me,z=we)):je(32823)}function lt(W){W?de(3089):je(3089)}function ue(W){W===void 0&&(W=33984+K-1),pe!==W&&(r.activeTexture(W),pe=W)}function rt(W,Me){pe===null&&ue();let we=ae[pe];we===void 0&&(we={type:void 0,texture:void 0},ae[pe]=we),(we.type!==W||we.texture!==Me)&&(r.bindTexture(W,Me||Q[W]),we.type=W,we.texture=Me)}function xt(){const W=ae[pe];W!==void 0&&W.type!==void 0&&(r.bindTexture(W.type,null),W.type=void 0,W.texture=void 0)}function ie(){try{r.compressedTexImage2D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Z(){try{r.texSubImage2D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function B(){try{r.texSubImage3D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Ae(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Ue(){try{r.texStorage2D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function ge(){try{r.texStorage3D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function _e(){try{r.texImage2D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function ke(){try{r.texImage3D.apply(r,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function me(W){D.equals(W)===!1&&(r.scissor(W.x,W.y,W.z,W.w),D.copy(W))}function Ce(W){H.equals(W)===!1&&(r.viewport(W.x,W.y,W.z,W.w),H.copy(W))}function le(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),o===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),f={},pe=null,ae={},_={},m=new WeakMap,v=[],x=null,b=!1,A=null,k=null,E=null,M=null,R=null,I=null,L=null,F=!1,U=null,X=null,j=null,P=null,z=null,D.set(0,0,r.canvas.width,r.canvas.height),H.set(0,0,r.canvas.width,r.canvas.height),c.reset(),p.reset(),h.reset()}return{buffers:{color:c,depth:p,stencil:h},enable:de,disable:je,bindFramebuffer:We,drawBuffers:ze,useProgram:Oe,setBlending:Re,setMaterial:Te,setFlipSided:Le,setCullFace:Ke,setLineWidth:Ne,setPolygonOffset:qe,setScissorTest:lt,activeTexture:ue,bindTexture:rt,unbindTexture:xt,compressedTexImage2D:ie,texImage2D:_e,texImage3D:ke,texStorage2D:Ue,texStorage3D:ge,texSubImage2D:Z,texSubImage3D:B,compressedTexSubImage2D:Ae,scissor:me,viewport:Ce,reset:le}}function K8(r,e,t,o,i,l,a){const c=i.isWebGL2,p=i.maxTextures,h=i.maxCubemapSize,f=i.maxTextureSize,_=i.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,x=new WeakMap;let b,A=!1;try{A=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function k(ie,Z){return A?new OffscreenCanvas(ie,Z):yy("canvas")}function E(ie,Z,B,Ae){let Ue=1;if((ie.width>Ae||ie.height>Ae)&&(Ue=Ae/Math.max(ie.width,ie.height)),Ue<1||Z===!0)if(typeof HTMLImageElement!="undefined"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&ie instanceof ImageBitmap){const ge=Z?e2:Math.floor,_e=ge(Ue*ie.width),ke=ge(Ue*ie.height);b===void 0&&(b=k(_e,ke));const me=B?k(_e,ke):b;return me.width=_e,me.height=ke,me.getContext("2d").drawImage(ie,0,0,_e,ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+_e+"x"+ke+")."),me}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie;return ie}function M(ie){return BA(ie.width)&&BA(ie.height)}function R(ie){return c?!1:ie.wrapS!==Kr||ie.wrapT!==Kr||ie.minFilter!==tr&&ie.minFilter!==So}function I(ie,Z){return ie.generateMipmaps&&Z&&ie.minFilter!==tr&&ie.minFilter!==So}function L(ie){r.generateMipmap(ie)}function F(ie,Z,B,Ae,Ue=!1){if(c===!1)return Z;if(ie!==null){if(r[ie]!==void 0)return r[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let ge=Z;return Z===6403&&(B===5126&&(ge=33326),B===5131&&(ge=33325),B===5121&&(ge=33321)),Z===33319&&(B===5126&&(ge=33328),B===5131&&(ge=33327),B===5121&&(ge=33323)),Z===6408&&(B===5126&&(ge=34836),B===5131&&(ge=34842),B===5121&&(ge=Ae===qn&&Ue===!1?35907:32856),B===32819&&(ge=32854),B===32820&&(ge=32855)),(ge===33325||ge===33326||ge===33327||ge===33328||ge===34842||ge===34836)&&e.get("EXT_color_buffer_float"),ge}function U(ie,Z,B){return I(ie,B)===!0||ie.isFramebufferTexture&&ie.minFilter!==tr&&ie.minFilter!==So?Math.log2(Math.max(Z.width,Z.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?Z.mipmaps.length:1}function X(ie){return ie===tr||ie===fy||ie===my?9728:9729}function j(ie){const Z=ie.target;Z.removeEventListener("dispose",j),z(Z),Z.isVideoTexture&&x.delete(Z),a.memory.textures--}function P(ie){const Z=ie.target;Z.removeEventListener("dispose",P),K(Z)}function z(ie){const Z=o.get(ie);Z.__webglInit!==void 0&&(r.deleteTexture(Z.__webglTexture),o.remove(ie))}function K(ie){const Z=ie.texture,B=o.get(ie),Ae=o.get(Z);if(!!ie){if(Ae.__webglTexture!==void 0&&(r.deleteTexture(Ae.__webglTexture),a.memory.textures--),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++)r.deleteFramebuffer(B.__webglFramebuffer[Ue]),B.__webglDepthbuffer&&r.deleteRenderbuffer(B.__webglDepthbuffer[Ue]);else r.deleteFramebuffer(B.__webglFramebuffer),B.__webglDepthbuffer&&r.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&r.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer&&r.deleteRenderbuffer(B.__webglColorRenderbuffer),B.__webglDepthRenderbuffer&&r.deleteRenderbuffer(B.__webglDepthRenderbuffer);if(ie.isWebGLMultipleRenderTargets)for(let Ue=0,ge=Z.length;Ue<ge;Ue++){const _e=o.get(Z[Ue]);_e.__webglTexture&&(r.deleteTexture(_e.__webglTexture),a.memory.textures--),o.remove(Z[Ue])}o.remove(Z),o.remove(ie)}}let te=0;function oe(){te=0}function ee(){const ie=te;return ie>=p&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+p),te+=1,ie}function pe(ie,Z){const B=o.get(ie);if(ie.isVideoTexture&&Ne(ie),ie.version>0&&B.__version!==ie.version){const Ae=ie.image;if(Ae===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(B,ie,Z);return}}t.activeTexture(33984+Z),t.bindTexture(3553,B.__webglTexture)}function ae(ie,Z){const B=o.get(ie);if(ie.version>0&&B.__version!==ie.version){de(B,ie,Z);return}t.activeTexture(33984+Z),t.bindTexture(35866,B.__webglTexture)}function Ee(ie,Z){const B=o.get(ie);if(ie.version>0&&B.__version!==ie.version){de(B,ie,Z);return}t.activeTexture(33984+Z),t.bindTexture(32879,B.__webglTexture)}function S(ie,Z){const B=o.get(ie);if(ie.version>0&&B.__version!==ie.version){je(B,ie,Z);return}t.activeTexture(33984+Z),t.bindTexture(34067,B.__webglTexture)}const D={[dh]:10497,[Kr]:33071,[lm]:33648},H={[tr]:9728,[fy]:9984,[my]:9986,[So]:9729,[zx]:9985,[tu]:9987};function q(ie,Z,B){if(B?(r.texParameteri(ie,10242,D[Z.wrapS]),r.texParameteri(ie,10243,D[Z.wrapT]),(ie===32879||ie===35866)&&r.texParameteri(ie,32882,D[Z.wrapR]),r.texParameteri(ie,10240,H[Z.magFilter]),r.texParameteri(ie,10241,H[Z.minFilter])):(r.texParameteri(ie,10242,33071),r.texParameteri(ie,10243,33071),(ie===32879||ie===35866)&&r.texParameteri(ie,32882,33071),(Z.wrapS!==Kr||Z.wrapT!==Kr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(ie,10240,X(Z.magFilter)),r.texParameteri(ie,10241,X(Z.minFilter)),Z.minFilter!==tr&&Z.minFilter!==So&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ae=e.get("EXT_texture_filter_anisotropic");if(Z.type===Hc&&e.has("OES_texture_float_linear")===!1||c===!1&&Z.type===Lp&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||o.get(Z).__currentAnisotropy)&&(r.texParameterf(ie,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,i.getMaxAnisotropy())),o.get(Z).__currentAnisotropy=Z.anisotropy)}}function Q(ie,Z){ie.__webglInit===void 0&&(ie.__webglInit=!0,Z.addEventListener("dispose",j),ie.__webglTexture=r.createTexture(),a.memory.textures++)}function de(ie,Z,B){let Ae=3553;Z.isDataTexture2DArray&&(Ae=35866),Z.isDataTexture3D&&(Ae=32879),Q(ie,Z),t.activeTexture(33984+B),t.bindTexture(Ae,ie.__webglTexture),r.pixelStorei(37440,Z.flipY),r.pixelStorei(37441,Z.premultiplyAlpha),r.pixelStorei(3317,Z.unpackAlignment),r.pixelStorei(37443,0);const Ue=R(Z)&&M(Z.image)===!1;let ge=E(Z.image,Ue,!1,f);ge=qe(Z,ge);const _e=M(ge)||c,ke=l.convert(Z.format,Z.encoding);let me=l.convert(Z.type),Ce=F(Z.internalFormat,ke,me,Z.encoding,Z.isVideoTexture);q(Ae,Z,_e);let le;const W=Z.mipmaps,Me=c&&Z.isVideoTexture!==!0,we=ie.__version===void 0,yt=U(Z,ge,_e);if(Z.isDepthTexture)Ce=6402,c?Z.type===Hc?Ce=36012:Z.type===M_?Ce=33190:Z.type===Np?Ce=35056:Ce=33189:Z.type===Hc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===nh&&Ce===6402&&Z.type!==am&&Z.type!==M_&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=am,me=l.convert(Z.type)),Z.format===zp&&Ce===6402&&(Ce=34041,Z.type!==Np&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=Np,me=l.convert(Z.type))),Me&&we?t.texStorage2D(3553,1,Ce,ge.width,ge.height):t.texImage2D(3553,0,Ce,ge.width,ge.height,0,ke,me,null);else if(Z.isDataTexture)if(W.length>0&&_e){Me&&we&&t.texStorage2D(3553,yt,Ce,W[0].width,W[0].height);for(let $e=0,nt=W.length;$e<nt;$e++)le=W[$e],Me?t.texSubImage2D(3553,0,0,0,le.width,le.height,ke,me,le.data):t.texImage2D(3553,$e,Ce,le.width,le.height,0,ke,me,le.data);Z.generateMipmaps=!1}else Me?(we&&t.texStorage2D(3553,yt,Ce,ge.width,ge.height),t.texSubImage2D(3553,0,0,0,ge.width,ge.height,ke,me,ge.data)):t.texImage2D(3553,0,Ce,ge.width,ge.height,0,ke,me,ge.data);else if(Z.isCompressedTexture){Me&&we&&t.texStorage2D(3553,yt,Ce,W[0].width,W[0].height);for(let $e=0,nt=W.length;$e<nt;$e++)le=W[$e],Z.format!==di?ke!==null?Me?t.compressedTexSubImage2D(3553,$e,0,0,le.width,le.height,ke,le.data):t.compressedTexImage2D(3553,$e,Ce,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Me?t.texSubImage2D(3553,$e,0,0,le.width,le.height,ke,me,le.data):t.texImage2D(3553,$e,Ce,le.width,le.height,0,ke,me,le.data)}else if(Z.isDataTexture2DArray)Me?(we&&t.texStorage3D(35866,yt,Ce,ge.width,ge.height,ge.depth),t.texSubImage3D(35866,0,0,0,0,ge.width,ge.height,ge.depth,ke,me,ge.data)):t.texImage3D(35866,0,Ce,ge.width,ge.height,ge.depth,0,ke,me,ge.data);else if(Z.isDataTexture3D)Me?(we&&t.texStorage3D(32879,yt,Ce,ge.width,ge.height,ge.depth),t.texSubImage3D(32879,0,0,0,0,ge.width,ge.height,ge.depth,ke,me,ge.data)):t.texImage3D(32879,0,Ce,ge.width,ge.height,ge.depth,0,ke,me,ge.data);else if(Z.isFramebufferTexture)Me&&we?t.texStorage2D(3553,yt,Ce,ge.width,ge.height):t.texImage2D(3553,0,Ce,ge.width,ge.height,0,ke,me,null);else if(W.length>0&&_e){Me&&we&&t.texStorage2D(3553,yt,Ce,W[0].width,W[0].height);for(let $e=0,nt=W.length;$e<nt;$e++)le=W[$e],Me?t.texSubImage2D(3553,$e,0,0,ke,me,le):t.texImage2D(3553,$e,Ce,ke,me,le);Z.generateMipmaps=!1}else Me?(we&&t.texStorage2D(3553,yt,Ce,ge.width,ge.height),t.texSubImage2D(3553,0,0,0,ke,me,ge)):t.texImage2D(3553,0,Ce,ke,me,ge);I(Z,_e)&&L(Ae),ie.__version=Z.version,Z.onUpdate&&Z.onUpdate(Z)}function je(ie,Z,B){if(Z.image.length!==6)return;Q(ie,Z),t.activeTexture(33984+B),t.bindTexture(34067,ie.__webglTexture),r.pixelStorei(37440,Z.flipY),r.pixelStorei(37441,Z.premultiplyAlpha),r.pixelStorei(3317,Z.unpackAlignment),r.pixelStorei(37443,0);const Ae=Z&&(Z.isCompressedTexture||Z.image[0].isCompressedTexture),Ue=Z.image[0]&&Z.image[0].isDataTexture,ge=[];for(let $e=0;$e<6;$e++)!Ae&&!Ue?ge[$e]=E(Z.image[$e],!1,!0,h):ge[$e]=Ue?Z.image[$e].image:Z.image[$e],ge[$e]=qe(Z,ge[$e]);const _e=ge[0],ke=M(_e)||c,me=l.convert(Z.format,Z.encoding),Ce=l.convert(Z.type),le=F(Z.internalFormat,me,Ce,Z.encoding),W=c&&Z.isVideoTexture!==!0,Me=ie.__version===void 0;let we=U(Z,_e,ke);q(34067,Z,ke);let yt;if(Ae){W&&Me&&t.texStorage2D(34067,we,le,_e.width,_e.height);for(let $e=0;$e<6;$e++){yt=ge[$e].mipmaps;for(let nt=0;nt<yt.length;nt++){const it=yt[nt];Z.format!==di?me!==null?W?t.compressedTexSubImage2D(34069+$e,nt,0,0,it.width,it.height,me,it.data):t.compressedTexImage2D(34069+$e,nt,le,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):W?t.texSubImage2D(34069+$e,nt,0,0,it.width,it.height,me,Ce,it.data):t.texImage2D(34069+$e,nt,le,it.width,it.height,0,me,Ce,it.data)}}}else{yt=Z.mipmaps,W&&Me&&(yt.length>0&&we++,t.texStorage2D(34067,we,le,ge[0].width,ge[0].height));for(let $e=0;$e<6;$e++)if(Ue){W?t.texSubImage2D(34069+$e,0,0,0,ge[$e].width,ge[$e].height,me,Ce,ge[$e].data):t.texImage2D(34069+$e,0,le,ge[$e].width,ge[$e].height,0,me,Ce,ge[$e].data);for(let nt=0;nt<yt.length;nt++){const Jt=yt[nt].image[$e].image;W?t.texSubImage2D(34069+$e,nt+1,0,0,Jt.width,Jt.height,me,Ce,Jt.data):t.texImage2D(34069+$e,nt+1,le,Jt.width,Jt.height,0,me,Ce,Jt.data)}}else{W?t.texSubImage2D(34069+$e,0,0,0,me,Ce,ge[$e]):t.texImage2D(34069+$e,0,le,me,Ce,ge[$e]);for(let nt=0;nt<yt.length;nt++){const it=yt[nt];W?t.texSubImage2D(34069+$e,nt+1,0,0,me,Ce,it.image[$e]):t.texImage2D(34069+$e,nt+1,le,me,Ce,it.image[$e])}}}I(Z,ke)&&L(34067),ie.__version=Z.version,Z.onUpdate&&Z.onUpdate(Z)}function We(ie,Z,B,Ae,Ue){const ge=l.convert(B.format,B.encoding),_e=l.convert(B.type),ke=F(B.internalFormat,ge,_e,B.encoding);o.get(Z).__hasExternalTextures||(Ue===32879||Ue===35866?t.texImage3D(Ue,0,ke,Z.width,Z.height,Z.depth,0,ge,_e,null):t.texImage2D(Ue,0,ke,Z.width,Z.height,0,ge,_e,null)),t.bindFramebuffer(36160,ie),Z.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,Ae,Ue,o.get(B).__webglTexture,0,Ke(Z)):r.framebufferTexture2D(36160,Ae,Ue,o.get(B).__webglTexture,0),t.bindFramebuffer(36160,null)}function ze(ie,Z,B){if(r.bindRenderbuffer(36161,ie),Z.depthBuffer&&!Z.stencilBuffer){let Ae=33189;if(B||Z.useRenderToTexture){const Ue=Z.depthTexture;Ue&&Ue.isDepthTexture&&(Ue.type===Hc?Ae=36012:Ue.type===M_&&(Ae=33190));const ge=Ke(Z);Z.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,ge,Ae,Z.width,Z.height):r.renderbufferStorageMultisample(36161,ge,Ae,Z.width,Z.height)}else r.renderbufferStorage(36161,Ae,Z.width,Z.height);r.framebufferRenderbuffer(36160,36096,36161,ie)}else if(Z.depthBuffer&&Z.stencilBuffer){const Ae=Ke(Z);B&&Z.useRenderbuffer?r.renderbufferStorageMultisample(36161,Ae,35056,Z.width,Z.height):Z.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,Ae,35056,Z.width,Z.height):r.renderbufferStorage(36161,34041,Z.width,Z.height),r.framebufferRenderbuffer(36160,33306,36161,ie)}else{const Ae=Z.isWebGLMultipleRenderTargets===!0?Z.texture[0]:Z.texture,Ue=l.convert(Ae.format,Ae.encoding),ge=l.convert(Ae.type),_e=F(Ae.internalFormat,Ue,ge,Ae.encoding),ke=Ke(Z);B&&Z.useRenderbuffer?r.renderbufferStorageMultisample(36161,ke,_e,Z.width,Z.height):Z.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,ke,_e,Z.width,Z.height):r.renderbufferStorage(36161,_e,Z.width,Z.height)}r.bindRenderbuffer(36161,null)}function Oe(ie,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ie),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!o.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),pe(Z.depthTexture,0);const Ae=o.get(Z.depthTexture).__webglTexture,Ue=Ke(Z);if(Z.depthTexture.format===nh)Z.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ae,0,Ue):r.framebufferTexture2D(36160,36096,3553,Ae,0);else if(Z.depthTexture.format===zp)Z.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ae,0,Ue):r.framebufferTexture2D(36160,33306,3553,Ae,0);else throw new Error("Unknown depthTexture format")}function Ye(ie){const Z=o.get(ie),B=ie.isWebGLCubeRenderTarget===!0;if(ie.depthTexture&&!Z.__autoAllocateDepthBuffer){if(B)throw new Error("target.depthTexture not supported in Cube render targets");Oe(Z.__webglFramebuffer,ie)}else if(B){Z.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(36160,Z.__webglFramebuffer[Ae]),Z.__webglDepthbuffer[Ae]=r.createRenderbuffer(),ze(Z.__webglDepthbuffer[Ae],ie,!1)}else t.bindFramebuffer(36160,Z.__webglFramebuffer),Z.__webglDepthbuffer=r.createRenderbuffer(),ze(Z.__webglDepthbuffer,ie,!1);t.bindFramebuffer(36160,null)}function et(ie,Z,B){const Ae=o.get(ie);Z!==void 0&&We(Ae.__webglFramebuffer,ie,ie.texture,36064,3553),B!==void 0&&Ye(ie)}function Re(ie){const Z=ie.texture,B=o.get(ie),Ae=o.get(Z);ie.addEventListener("dispose",P),ie.isWebGLMultipleRenderTargets!==!0&&(Ae.__webglTexture===void 0&&(Ae.__webglTexture=r.createTexture()),Ae.__version=Z.version,a.memory.textures++);const Ue=ie.isWebGLCubeRenderTarget===!0,ge=ie.isWebGLMultipleRenderTargets===!0,_e=Z.isDataTexture3D||Z.isDataTexture2DArray,ke=M(ie)||c;if(Ue){B.__webglFramebuffer=[];for(let me=0;me<6;me++)B.__webglFramebuffer[me]=r.createFramebuffer()}else if(B.__webglFramebuffer=r.createFramebuffer(),ge)if(i.drawBuffers){const me=ie.texture;for(let Ce=0,le=me.length;Ce<le;Ce++){const W=o.get(me[Ce]);W.__webglTexture===void 0&&(W.__webglTexture=r.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(ie.useRenderbuffer)if(c){B.__webglMultisampledFramebuffer=r.createFramebuffer(),B.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,B.__webglColorRenderbuffer);const me=l.convert(Z.format,Z.encoding),Ce=l.convert(Z.type),le=F(Z.internalFormat,me,Ce,Z.encoding),W=Ke(ie);r.renderbufferStorageMultisample(36161,W,le,ie.width,ie.height),t.bindFramebuffer(36160,B.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064,36161,B.__webglColorRenderbuffer),r.bindRenderbuffer(36161,null),ie.depthBuffer&&(B.__webglDepthRenderbuffer=r.createRenderbuffer(),ze(B.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ue){t.bindTexture(34067,Ae.__webglTexture),q(34067,Z,ke);for(let me=0;me<6;me++)We(B.__webglFramebuffer[me],ie,Z,36064,34069+me);I(Z,ke)&&L(34067),t.unbindTexture()}else if(ge){const me=ie.texture;for(let Ce=0,le=me.length;Ce<le;Ce++){const W=me[Ce],Me=o.get(W);t.bindTexture(3553,Me.__webglTexture),q(3553,W,ke),We(B.__webglFramebuffer,ie,W,36064+Ce,3553),I(W,ke)&&L(3553)}t.unbindTexture()}else{let me=3553;_e&&(c?me=Z.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(me,Ae.__webglTexture),q(me,Z,ke),We(B.__webglFramebuffer,ie,Z,36064,me),I(Z,ke)&&L(me),t.unbindTexture()}ie.depthBuffer&&Ye(ie)}function Te(ie){const Z=M(ie)||c,B=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let Ae=0,Ue=B.length;Ae<Ue;Ae++){const ge=B[Ae];if(I(ge,Z)){const _e=ie.isWebGLCubeRenderTarget?34067:3553,ke=o.get(ge).__webglTexture;t.bindTexture(_e,ke),L(_e),t.unbindTexture()}}}function Le(ie){if(ie.useRenderbuffer)if(c){const Z=ie.width,B=ie.height;let Ae=16384;const Ue=[36064],ge=ie.stencilBuffer?33306:36096;ie.depthBuffer&&Ue.push(ge),ie.ignoreDepthForMultisampleCopy||(ie.depthBuffer&&(Ae|=256),ie.stencilBuffer&&(Ae|=1024));const _e=o.get(ie);t.bindFramebuffer(36008,_e.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,_e.__webglFramebuffer),ie.ignoreDepthForMultisampleCopy&&(r.invalidateFramebuffer(36008,[ge]),r.invalidateFramebuffer(36009,[ge])),r.blitFramebuffer(0,0,Z,B,0,0,Z,B,Ae,9728),r.invalidateFramebuffer(36008,Ue),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,_e.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Ke(ie){return c&&(ie.useRenderbuffer||ie.useRenderToTexture)?Math.min(_,ie.samples):0}function Ne(ie){const Z=a.render.frame;x.get(ie)!==Z&&(x.set(ie,Z),ie.update())}function qe(ie,Z){const B=ie.encoding,Ae=ie.format,Ue=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||ie.format===ZE||B!==la&&(B===qn?c===!1?e.has("EXT_sRGB")===!0&&Ae===di?(ie.format=ZE,ie.minFilter=So,ie.generateMipmaps=!1):Z=kh.sRGBToLinear(Z):(Ae!==di||Ue!==zc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",B)),Z}let lt=!1,ue=!1;function rt(ie,Z){ie&&ie.isWebGLRenderTarget&&(lt===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),lt=!0),ie=ie.texture),pe(ie,Z)}function xt(ie,Z){ie&&ie.isWebGLCubeRenderTarget&&(ue===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ue=!0),ie=ie.texture),S(ie,Z)}this.allocateTextureUnit=ee,this.resetTextureUnits=oe,this.setTexture2D=pe,this.setTexture2DArray=ae,this.setTexture3D=Ee,this.setTextureCube=S,this.rebindTextures=et,this.setupRenderTarget=Re,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=Le,this.setupDepthRenderbuffer=Ye,this.setupFrameBufferTexture=We,this.safeSetTexture2D=rt,this.safeSetTextureCube=xt}function x2(r,e,t){const o=t.isWebGL2;function i(l,a=null){let c;if(l===zc)return 5121;if(l===IF)return 32819;if(l===OF)return 32820;if(l===MF)return 5120;if(l===RF)return 5122;if(l===am)return 5123;if(l===BF)return 5124;if(l===M_)return 5125;if(l===Hc)return 5126;if(l===Lp)return o?5131:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(l===DF)return 6406;if(l===di)return 6408;if(l===NF)return 6409;if(l===$F)return 6410;if(l===nh)return 6402;if(l===zp)return 34041;if(l===PF)return 6403;if(l===LF)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(l===ZE)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(l===FF)return 36244;if(l===UF)return 33319;if(l===HF)return 33320;if(l===GF)return 36249;if(l===rE||l===iE||l===sE||l===lE)if(a===qn)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(l===rE)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===iE)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===sE)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===lE)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(l===rE)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===iE)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===sE)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===lE)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===cA||l===uA||l===hA||l===pA)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(l===cA)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===uA)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===hA)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===pA)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===VF)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===dA||l===fA)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(l===dA)return a===qn?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(l===fA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===mA||l===gA||l===_A||l===yA||l===vA||l===TA||l===EA||l===xA||l===SA||l===CA||l===bA||l===kA||l===AA||l===wA)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(l===mA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===gA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===_A)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===yA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===vA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===TA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===EA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===xA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===SA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===CA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===bA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===kA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===AA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===wA)return a===qn?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===MA)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(l===MA)return a===qn?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(l===Np)return o?34042:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class kM extends go{constructor(e=[]){super();this.cameras=e}}kM.prototype.isArrayCamera=!0;class Va extends dn{constructor(){super();this.type="Group"}}Va.prototype.isGroup=!0;const Y8={type:"move"};class pb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Va,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Va,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Va,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,o){let i=null,l=null,a=null;const c=this._targetRay,p=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(c!==null&&(i=t.getPose(e.targetRaySpace,o),i!==null&&(c.matrix.fromArray(i.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),i.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(i.linearVelocity)):c.hasLinearVelocity=!1,i.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(i.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(Y8))),h&&e.hand){a=!0;for(const b of e.hand.values()){const A=t.getJointPose(b,o);if(h.joints[b.jointName]===void 0){const E=new Va;E.matrixAutoUpdate=!1,E.visible=!1,h.joints[b.jointName]=E,h.add(E)}const k=h.joints[b.jointName];A!==null&&(k.matrix.fromArray(A.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=A.radius),k.visible=A!==null}const f=h.joints["index-finger-tip"],_=h.joints["thumb-tip"],m=f.position.distanceTo(_.position),v=.02,x=.005;h.inputState.pinching&&m>v+x?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&m<=v-x&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else p!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,o),l!==null&&(p.matrix.fromArray(l.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),l.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(l.linearVelocity)):p.hasLinearVelocity=!1,l.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(l.angularVelocity)):p.hasAngularVelocity=!1));return c!==null&&(c.visible=i!==null),p!==null&&(p.visible=l!==null),h!==null&&(h.visible=a!==null),this}}class tx extends Vo{constructor(e,t,o,i,l,a,c,p,h,f){if(f=f!==void 0?f:nh,f!==nh&&f!==zp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");o===void 0&&f===nh&&(o=am),o===void 0&&f===zp&&(o=Np);super(null,i,l,a,c,p,f,o,h);this.image={width:e,height:t},this.magFilter=c!==void 0?c:tr,this.minFilter=p!==void 0?p:tr,this.flipY=!1,this.generateMipmaps=!1}}tx.prototype.isDepthTexture=!0;class q8 extends nu{constructor(e,t){super();const o=this;let i=null,l=1,a=null,c="local-floor";const p=e.extensions.has("WEBGL_multisampled_render_to_texture");let h=null,f=null,_=null,m=null,v=!1,x=null;const b=t.getContextAttributes();let A=null,k=null;const E=[],M=new Map,R=new go;R.layers.enable(1),R.viewport=new Gn;const I=new go;I.layers.enable(2),I.viewport=new Gn;const L=[R,I],F=new kM;F.layers.enable(1),F.layers.enable(2);let U=null,X=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(S){let D=E[S];return D===void 0&&(D=new pb,E[S]=D),D.getTargetRaySpace()},this.getControllerGrip=function(S){let D=E[S];return D===void 0&&(D=new pb,E[S]=D),D.getGripSpace()},this.getHand=function(S){let D=E[S];return D===void 0&&(D=new pb,E[S]=D),D.getHandSpace()};function j(S){const D=M.get(S.inputSource);D&&D.dispatchEvent({type:S.type,data:S.inputSource})}function P(){M.forEach(function(S,D){S.disconnect(D)}),M.clear(),U=null,X=null,e.setRenderTarget(A),m=null,_=null,f=null,i=null,k=null,Ee.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(S){l=S,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(S){c=S,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return _!==null?_:m},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(S){if(i=S,i!==null){if(A=e.getRenderTarget(),i.addEventListener("select",j),i.addEventListener("selectstart",j),i.addEventListener("selectend",j),i.addEventListener("squeeze",j),i.addEventListener("squeezestart",j),i.addEventListener("squeezeend",j),i.addEventListener("end",P),i.addEventListener("inputsourceschange",z),b.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const D={antialias:i.renderState.layers===void 0?b.antialias:!0,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:l};m=new XRWebGLLayer(i,t,D),i.updateRenderState({baseLayer:m}),k=new Zs(m.framebufferWidth,m.framebufferHeight,{format:di,type:zc,encoding:e.outputEncoding})}else{v=b.antialias;let D=null,H=null,q=null;b.depth&&(q=b.stencil?35056:33190,D=b.stencil?zp:nh,H=b.stencil?Np:am);const Q={colorFormat:e.outputEncoding===qn?35907:32856,depthFormat:q,scaleFactor:l};f=new XRWebGLBinding(i,t),_=f.createProjectionLayer(Q),i.updateRenderState({layers:[_]}),v?k=new jx(_.textureWidth,_.textureHeight,{format:di,type:zc,depthTexture:new tx(_.textureWidth,_.textureHeight,H,void 0,void 0,void 0,void 0,void 0,void 0,D),stencilBuffer:b.stencil,ignoreDepth:_.ignoreDepthValues,useRenderToTexture:p,encoding:e.outputEncoding}):k=new Zs(_.textureWidth,_.textureHeight,{format:di,type:zc,depthTexture:new tx(_.textureWidth,_.textureHeight,H,void 0,void 0,void 0,void 0,void 0,void 0,D),stencilBuffer:b.stencil,ignoreDepth:_.ignoreDepthValues,encoding:e.outputEncoding})}k.isXRRenderTarget=!0,this.setFoveation(1),a=await i.requestReferenceSpace(c),Ee.setContext(i),Ee.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"})}};function z(S){const D=i.inputSources;for(let H=0;H<E.length;H++)M.set(D[H],E[H]);for(let H=0;H<S.removed.length;H++){const q=S.removed[H],Q=M.get(q);Q&&(Q.dispatchEvent({type:"disconnected",data:q}),M.delete(q))}for(let H=0;H<S.added.length;H++){const q=S.added[H],Q=M.get(q);Q&&Q.dispatchEvent({type:"connected",data:q})}}const K=new Y,te=new Y;function oe(S,D,H){K.setFromMatrixPosition(D.matrixWorld),te.setFromMatrixPosition(H.matrixWorld);const q=K.distanceTo(te),Q=D.projectionMatrix.elements,de=H.projectionMatrix.elements,je=Q[14]/(Q[10]-1),We=Q[14]/(Q[10]+1),ze=(Q[9]+1)/Q[5],Oe=(Q[9]-1)/Q[5],Ye=(Q[8]-1)/Q[0],et=(de[8]+1)/de[0],Re=je*Ye,Te=je*et,Le=q/(-Ye+et),Ke=Le*-Ye;D.matrixWorld.decompose(S.position,S.quaternion,S.scale),S.translateX(Ke),S.translateZ(Le),S.matrixWorld.compose(S.position,S.quaternion,S.scale),S.matrixWorldInverse.copy(S.matrixWorld).invert();const Ne=je+Le,qe=We+Le,lt=Re-Ke,ue=Te+(q-Ke),rt=ze*We/qe*Ne,xt=Oe*We/qe*Ne;S.projectionMatrix.makePerspective(lt,ue,rt,xt,Ne,qe)}function ee(S,D){D===null?S.matrixWorld.copy(S.matrix):S.matrixWorld.multiplyMatrices(D.matrixWorld,S.matrix),S.matrixWorldInverse.copy(S.matrixWorld).invert()}this.updateCamera=function(S){if(i===null)return;F.near=I.near=R.near=S.near,F.far=I.far=R.far=S.far,(U!==F.near||X!==F.far)&&(i.updateRenderState({depthNear:F.near,depthFar:F.far}),U=F.near,X=F.far);const D=S.parent,H=F.cameras;ee(F,D);for(let Q=0;Q<H.length;Q++)ee(H[Q],D);F.matrixWorld.decompose(F.position,F.quaternion,F.scale),S.position.copy(F.position),S.quaternion.copy(F.quaternion),S.scale.copy(F.scale),S.matrix.copy(F.matrix),S.matrixWorld.copy(F.matrixWorld);const q=S.children;for(let Q=0,de=q.length;Q<de;Q++)q[Q].updateMatrixWorld(!0);H.length===2?oe(F,R,I):F.projectionMatrix.copy(R.projectionMatrix)},this.getCamera=function(){return F},this.getFoveation=function(){if(_!==null)return _.fixedFoveation;if(m!==null)return m.fixedFoveation},this.setFoveation=function(S){_!==null&&(_.fixedFoveation=S),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=S)};let pe=null;function ae(S,D){if(h=D.getViewerPose(a),x=D,h!==null){const q=h.views;m!==null&&(e.setRenderTargetFramebuffer(k,m.framebuffer),e.setRenderTarget(k));let Q=!1;q.length!==F.cameras.length&&(F.cameras.length=0,Q=!0);for(let de=0;de<q.length;de++){const je=q[de];let We=null;if(m!==null)We=m.getViewport(je);else{const Oe=f.getViewSubImage(_,je);We=Oe.viewport,de===0&&(e.setRenderTargetTextures(k,Oe.colorTexture,_.ignoreDepthValues?void 0:Oe.depthStencilTexture),e.setRenderTarget(k))}const ze=L[de];ze.matrix.fromArray(je.transform.matrix),ze.projectionMatrix.fromArray(je.projectionMatrix),ze.viewport.set(We.x,We.y,We.width,We.height),de===0&&F.matrix.copy(ze.matrix),Q===!0&&F.cameras.push(ze)}}const H=i.inputSources;for(let q=0;q<E.length;q++){const Q=E[q],de=H[q];Q.update(de,D,a)}pe&&pe(S,D),x=null}const Ee=new h2;Ee.setAnimationLoop(ae),this.setAnimationLoop=function(S){pe=S},this.dispose=function(){}}}function Q8(r){function e(k,E){k.fogColor.value.copy(E.color),E.isFog?(k.fogNear.value=E.near,k.fogFar.value=E.far):E.isFogExp2&&(k.fogDensity.value=E.density)}function t(k,E,M,R,I){E.isMeshBasicMaterial?o(k,E):E.isMeshLambertMaterial?(o(k,E),p(k,E)):E.isMeshToonMaterial?(o(k,E),f(k,E)):E.isMeshPhongMaterial?(o(k,E),h(k,E)):E.isMeshStandardMaterial?(o(k,E),E.isMeshPhysicalMaterial?m(k,E,I):_(k,E)):E.isMeshMatcapMaterial?(o(k,E),v(k,E)):E.isMeshDepthMaterial?(o(k,E),x(k,E)):E.isMeshDistanceMaterial?(o(k,E),b(k,E)):E.isMeshNormalMaterial?(o(k,E),A(k,E)):E.isLineBasicMaterial?(i(k,E),E.isLineDashedMaterial&&l(k,E)):E.isPointsMaterial?a(k,E,M,R):E.isSpriteMaterial?c(k,E):E.isShadowMaterial?(k.color.value.copy(E.color),k.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function o(k,E){k.opacity.value=E.opacity,E.color&&k.diffuse.value.copy(E.color),E.emissive&&k.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(k.map.value=E.map),E.alphaMap&&(k.alphaMap.value=E.alphaMap),E.specularMap&&(k.specularMap.value=E.specularMap),E.alphaTest>0&&(k.alphaTest.value=E.alphaTest);const M=r.get(E).envMap;M&&(k.envMap.value=M,k.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,k.reflectivity.value=E.reflectivity,k.ior.value=E.ior,k.refractionRatio.value=E.refractionRatio),E.lightMap&&(k.lightMap.value=E.lightMap,k.lightMapIntensity.value=E.lightMapIntensity),E.aoMap&&(k.aoMap.value=E.aoMap,k.aoMapIntensity.value=E.aoMapIntensity);let R;E.map?R=E.map:E.specularMap?R=E.specularMap:E.displacementMap?R=E.displacementMap:E.normalMap?R=E.normalMap:E.bumpMap?R=E.bumpMap:E.roughnessMap?R=E.roughnessMap:E.metalnessMap?R=E.metalnessMap:E.alphaMap?R=E.alphaMap:E.emissiveMap?R=E.emissiveMap:E.clearcoatMap?R=E.clearcoatMap:E.clearcoatNormalMap?R=E.clearcoatNormalMap:E.clearcoatRoughnessMap?R=E.clearcoatRoughnessMap:E.specularIntensityMap?R=E.specularIntensityMap:E.specularColorMap?R=E.specularColorMap:E.transmissionMap?R=E.transmissionMap:E.thicknessMap?R=E.thicknessMap:E.sheenColorMap?R=E.sheenColorMap:E.sheenRoughnessMap&&(R=E.sheenRoughnessMap),R!==void 0&&(R.isWebGLRenderTarget&&(R=R.texture),R.matrixAutoUpdate===!0&&R.updateMatrix(),k.uvTransform.value.copy(R.matrix));let I;E.aoMap?I=E.aoMap:E.lightMap&&(I=E.lightMap),I!==void 0&&(I.isWebGLRenderTarget&&(I=I.texture),I.matrixAutoUpdate===!0&&I.updateMatrix(),k.uv2Transform.value.copy(I.matrix))}function i(k,E){k.diffuse.value.copy(E.color),k.opacity.value=E.opacity}function l(k,E){k.dashSize.value=E.dashSize,k.totalSize.value=E.dashSize+E.gapSize,k.scale.value=E.scale}function a(k,E,M,R){k.diffuse.value.copy(E.color),k.opacity.value=E.opacity,k.size.value=E.size*M,k.scale.value=R*.5,E.map&&(k.map.value=E.map),E.alphaMap&&(k.alphaMap.value=E.alphaMap),E.alphaTest>0&&(k.alphaTest.value=E.alphaTest);let I;E.map?I=E.map:E.alphaMap&&(I=E.alphaMap),I!==void 0&&(I.matrixAutoUpdate===!0&&I.updateMatrix(),k.uvTransform.value.copy(I.matrix))}function c(k,E){k.diffuse.value.copy(E.color),k.opacity.value=E.opacity,k.rotation.value=E.rotation,E.map&&(k.map.value=E.map),E.alphaMap&&(k.alphaMap.value=E.alphaMap),E.alphaTest>0&&(k.alphaTest.value=E.alphaTest);let M;E.map?M=E.map:E.alphaMap&&(M=E.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),k.uvTransform.value.copy(M.matrix))}function p(k,E){E.emissiveMap&&(k.emissiveMap.value=E.emissiveMap)}function h(k,E){k.specular.value.copy(E.specular),k.shininess.value=Math.max(E.shininess,1e-4),E.emissiveMap&&(k.emissiveMap.value=E.emissiveMap),E.bumpMap&&(k.bumpMap.value=E.bumpMap,k.bumpScale.value=E.bumpScale,E.side===ur&&(k.bumpScale.value*=-1)),E.normalMap&&(k.normalMap.value=E.normalMap,k.normalScale.value.copy(E.normalScale),E.side===ur&&k.normalScale.value.negate()),E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias)}function f(k,E){E.gradientMap&&(k.gradientMap.value=E.gradientMap),E.emissiveMap&&(k.emissiveMap.value=E.emissiveMap),E.bumpMap&&(k.bumpMap.value=E.bumpMap,k.bumpScale.value=E.bumpScale,E.side===ur&&(k.bumpScale.value*=-1)),E.normalMap&&(k.normalMap.value=E.normalMap,k.normalScale.value.copy(E.normalScale),E.side===ur&&k.normalScale.value.negate()),E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias)}function _(k,E){k.roughness.value=E.roughness,k.metalness.value=E.metalness,E.roughnessMap&&(k.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(k.metalnessMap.value=E.metalnessMap),E.emissiveMap&&(k.emissiveMap.value=E.emissiveMap),E.bumpMap&&(k.bumpMap.value=E.bumpMap,k.bumpScale.value=E.bumpScale,E.side===ur&&(k.bumpScale.value*=-1)),E.normalMap&&(k.normalMap.value=E.normalMap,k.normalScale.value.copy(E.normalScale),E.side===ur&&k.normalScale.value.negate()),E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias),r.get(E).envMap&&(k.envMapIntensity.value=E.envMapIntensity)}function m(k,E,M){_(k,E),k.ior.value=E.ior,E.sheen>0&&(k.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),k.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(k.sheenColorMap.value=E.sheenColorMap),E.sheenRoughnessMap&&(k.sheenRoughnessMap.value=E.sheenRoughnessMap)),E.clearcoat>0&&(k.clearcoat.value=E.clearcoat,k.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(k.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(k.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(k.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),k.clearcoatNormalMap.value=E.clearcoatNormalMap,E.side===ur&&k.clearcoatNormalScale.value.negate())),E.transmission>0&&(k.transmission.value=E.transmission,k.transmissionSamplerMap.value=M.texture,k.transmissionSamplerSize.value.set(M.width,M.height),E.transmissionMap&&(k.transmissionMap.value=E.transmissionMap),k.thickness.value=E.thickness,E.thicknessMap&&(k.thicknessMap.value=E.thicknessMap),k.attenuationDistance.value=E.attenuationDistance,k.attenuationColor.value.copy(E.attenuationColor)),k.specularIntensity.value=E.specularIntensity,k.specularColor.value.copy(E.specularColor),E.specularIntensityMap&&(k.specularIntensityMap.value=E.specularIntensityMap),E.specularColorMap&&(k.specularColorMap.value=E.specularColorMap)}function v(k,E){E.matcap&&(k.matcap.value=E.matcap),E.bumpMap&&(k.bumpMap.value=E.bumpMap,k.bumpScale.value=E.bumpScale,E.side===ur&&(k.bumpScale.value*=-1)),E.normalMap&&(k.normalMap.value=E.normalMap,k.normalScale.value.copy(E.normalScale),E.side===ur&&k.normalScale.value.negate()),E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias)}function x(k,E){E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias)}function b(k,E){E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias),k.referencePosition.value.copy(E.referencePosition),k.nearDistance.value=E.nearDistance,k.farDistance.value=E.farDistance}function A(k,E){E.bumpMap&&(k.bumpMap.value=E.bumpMap,k.bumpScale.value=E.bumpScale,E.side===ur&&(k.bumpScale.value*=-1)),E.normalMap&&(k.normalMap.value=E.normalMap,k.normalScale.value.copy(E.normalScale),E.side===ur&&k.normalScale.value.negate()),E.displacementMap&&(k.displacementMap.value=E.displacementMap,k.displacementScale.value=E.displacementScale,k.displacementBias.value=E.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function Z8(){const r=yy("canvas");return r.style.display="block",r}function Qn(r={}){const e=r.canvas!==void 0?r.canvas:Z8(),t=r.context!==void 0?r.context:null,o=r.alpha!==void 0?r.alpha:!1,i=r.depth!==void 0?r.depth:!0,l=r.stencil!==void 0?r.stencil:!0,a=r.antialias!==void 0?r.antialias:!1,c=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,p=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,h=r.powerPreference!==void 0?r.powerPreference:"default",f=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let _=null,m=null;const v=[],x=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=la,this.physicallyCorrectLights=!1,this.toneMapping=Ja,this.toneMappingExposure=1;const b=this;let A=!1,k=0,E=0,M=null,R=-1,I=null;const L=new Gn,F=new Gn;let U=null,X=e.width,j=e.height,P=1,z=null,K=null;const te=new Gn(0,0,X,j),oe=new Gn(0,0,X,j);let ee=!1;const pe=new nv;let ae=!1,Ee=!1,S=null;const D=new wt,H=new Y,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Q(){return M===null?P:1}let de=t;function je(re,Se){for(let De=0;De<re.length;De++){const xe=re[De],Fe=e.getContext(xe,Se);if(Fe!==null)return Fe}return null}try{const re={alpha:!0,depth:i,stencil:l,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:p,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Vx}`),e.addEventListener("webglcontextlost",le,!1),e.addEventListener("webglcontextrestored",W,!1),de===null){const Se=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Se.shift(),de=je(Se,re),de===null)throw je(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}de.getShaderPrecisionFormat===void 0&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let We,ze,Oe,Ye,et,Re,Te,Le,Ke,Ne,qe,lt,ue,rt,xt,ie,Z,B,Ae,Ue,ge,_e,ke;function me(){We=new vX(de),ze=new dX(de,We,r),We.init(ze),_e=new x2(de,We,ze),Oe=new J8(de,We,ze),Ye=new xX(de),et=new $8,Re=new K8(de,We,Oe,et,ze,_e,Ye),Te=new mX(b),Le=new yX(b),Ke=new $5(de,ze),ke=new hX(de,We,Ke,ze),Ne=new TX(de,Ke,Ye,ke),qe=new kX(de,Ne,Ke,Ye),Ae=new bX(de,ze,Re),ie=new fX(et),lt=new N8(b,Te,Le,We,ze,ke,ie),ue=new Q8(et),rt=new F8,xt=new z8(We,ze),B=new uX(b,Te,Oe,qe,o,c),Z=new E2(b,qe,ze),Ue=new pX(de,We,Ye,ze),ge=new EX(de,We,Ye,ze),Ye.programs=lt.programs,b.capabilities=ze,b.extensions=We,b.properties=et,b.renderLists=rt,b.shadowMap=Z,b.state=Oe,b.info=Ye}me();const Ce=new q8(b,de);this.xr=Ce,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const re=We.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=We.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(re){re!==void 0&&(P=re,this.setSize(X,j,!1))},this.getSize=function(re){return re.set(X,j)},this.setSize=function(re,Se,De){if(Ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=re,j=Se,e.width=Math.floor(re*P),e.height=Math.floor(Se*P),De!==!1&&(e.style.width=re+"px",e.style.height=Se+"px"),this.setViewport(0,0,re,Se)},this.getDrawingBufferSize=function(re){return re.set(X*P,j*P).floor()},this.setDrawingBufferSize=function(re,Se,De){X=re,j=Se,P=De,e.width=Math.floor(re*De),e.height=Math.floor(Se*De),this.setViewport(0,0,re,Se)},this.getCurrentViewport=function(re){return re.copy(L)},this.getViewport=function(re){return re.copy(te)},this.setViewport=function(re,Se,De,xe){re.isVector4?te.set(re.x,re.y,re.z,re.w):te.set(re,Se,De,xe),Oe.viewport(L.copy(te).multiplyScalar(P).floor())},this.getScissor=function(re){return re.copy(oe)},this.setScissor=function(re,Se,De,xe){re.isVector4?oe.set(re.x,re.y,re.z,re.w):oe.set(re,Se,De,xe),Oe.scissor(F.copy(oe).multiplyScalar(P).floor())},this.getScissorTest=function(){return ee},this.setScissorTest=function(re){Oe.setScissorTest(ee=re)},this.setOpaqueSort=function(re){z=re},this.setTransparentSort=function(re){K=re},this.getClearColor=function(re){return re.copy(B.getClearColor())},this.setClearColor=function(){B.setClearColor.apply(B,arguments)},this.getClearAlpha=function(){return B.getClearAlpha()},this.setClearAlpha=function(){B.setClearAlpha.apply(B,arguments)},this.clear=function(re,Se,De){let xe=0;(re===void 0||re)&&(xe|=16384),(Se===void 0||Se)&&(xe|=256),(De===void 0||De)&&(xe|=1024),de.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",le,!1),e.removeEventListener("webglcontextrestored",W,!1),rt.dispose(),xt.dispose(),et.dispose(),Te.dispose(),Le.dispose(),qe.dispose(),ke.dispose(),lt.dispose(),Ce.dispose(),Ce.removeEventListener("sessionstart",it),Ce.removeEventListener("sessionend",Jt),S&&(S.dispose(),S=null),$n.stop()};function le(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function W(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const re=Ye.autoReset,Se=Z.enabled,De=Z.autoUpdate,xe=Z.needsUpdate,Fe=Z.type;me(),Ye.autoReset=re,Z.enabled=Se,Z.autoUpdate=De,Z.needsUpdate=xe,Z.type=Fe}function Me(re){const Se=re.target;Se.removeEventListener("dispose",Me),we(Se)}function we(re){yt(re),et.remove(re)}function yt(re){const Se=et.get(re).programs;Se!==void 0&&(Se.forEach(function(De){lt.releaseProgram(De)}),re.isShaderMaterial&&lt.releaseShaderCache(re))}this.renderBufferDirect=function(re,Se,De,xe,Fe,Pt){Se===null&&(Se=q);const Xt=Fe.isMesh&&Fe.matrixWorld.determinant()<0,nn=dc(re,Se,De,xe,Fe);Oe.setMaterial(xe,Xt);let en=De.index;const Dn=De.attributes.position;if(en===null){if(Dn===void 0||Dn.count===0)return}else if(en.count===0)return;let fn=1;xe.wireframe===!0&&(en=Ne.getWireframeAttribute(De),fn=2),ke.setup(Fe,xe,nn,De,en);let xn,ro=Ue;en!==null&&(xn=Ke.get(en),ro=ge,ro.setIndex(xn));const Ui=en!==null?en.count:Dn.count,cs=De.drawRange.start*fn,mn=De.drawRange.count*fn,at=Pt!==null?Pt.start*fn:0,zn=Pt!==null?Pt.count*fn:1/0,Wo=Math.max(cs,at),Pn=Math.min(Ui,cs+mn,at+zn)-1,wn=Math.max(0,Pn-Wo+1);if(wn!==0){if(Fe.isMesh)xe.wireframe===!0?(Oe.setLineWidth(xe.wireframeLinewidth*Q()),ro.setMode(1)):ro.setMode(4);else if(Fe.isLine){let zo=xe.linewidth;zo===void 0&&(zo=1),Oe.setLineWidth(zo*Q()),Fe.isLineSegments?ro.setMode(1):Fe.isLineLoop?ro.setMode(2):ro.setMode(3)}else Fe.isPoints?ro.setMode(0):Fe.isSprite&&ro.setMode(4);if(Fe.isInstancedMesh)ro.renderInstances(Wo,wn,Fe.count);else if(De.isInstancedBufferGeometry){const zo=Math.min(De.instanceCount,De._maxInstanceCount);ro.renderInstances(Wo,wn,zo)}else ro.render(Wo,wn)}},this.compile=function(re,Se){m=xt.get(re),m.init(),x.push(m),re.traverseVisible(function(De){De.isLight&&De.layers.test(Se.layers)&&(m.pushLight(De),De.castShadow&&m.pushShadow(De))}),m.setupLights(b.physicallyCorrectLights),re.traverse(function(De){const xe=De.material;if(xe)if(Array.isArray(xe))for(let Fe=0;Fe<xe.length;Fe++){const Pt=xe[Fe];al(Pt,re,De)}else al(xe,re,De)}),x.pop(),m=null};let $e=null;function nt(re){$e&&$e(re)}function it(){$n.stop()}function Jt(){$n.start()}const $n=new h2;$n.setAnimationLoop(nt),typeof window!="undefined"&&$n.setContext(window),this.setAnimationLoop=function(re){$e=re,Ce.setAnimationLoop(re),re===null?$n.stop():$n.start()},Ce.addEventListener("sessionstart",it),Ce.addEventListener("sessionend",Jt),this.render=function(re,Se){if(Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;re.autoUpdate===!0&&re.updateMatrixWorld(),Se.parent===null&&Se.updateMatrixWorld(),Ce.enabled===!0&&Ce.isPresenting===!0&&(Ce.cameraAutoUpdate===!0&&Ce.updateCamera(Se),Se=Ce.getCamera()),re.isScene===!0&&re.onBeforeRender(b,re,Se,M),m=xt.get(re,x.length),m.init(),x.push(m),D.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),pe.setFromProjectionMatrix(D),Ee=this.localClippingEnabled,ae=ie.init(this.clippingPlanes,Ee,Se),_=rt.get(re,v.length),_.init(),v.push(_),ce(re,Se,0,b.sortObjects),_.finish(),b.sortObjects===!0&&_.sort(z,K),ae===!0&&ie.beginShadows();const De=m.state.shadowsArray;if(Z.render(De,re,Se),ae===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset(),B.render(_,re),m.setupLights(b.physicallyCorrectLights),Se.isArrayCamera){const xe=Se.cameras;for(let Fe=0,Pt=xe.length;Fe<Pt;Fe++){const Xt=xe[Fe];cn(_,re,Xt,Xt.viewport)}}else cn(_,re,Se);M!==null&&(Re.updateMultisampleRenderTarget(M),Re.updateRenderTargetMipmap(M)),re.isScene===!0&&re.onAfterRender(b,re,Se),Oe.buffers.depth.setTest(!0),Oe.buffers.depth.setMask(!0),Oe.buffers.color.setMask(!0),Oe.setPolygonOffset(!1),ke.resetDefaultState(),R=-1,I=null,x.pop(),x.length>0?m=x[x.length-1]:m=null,v.pop(),v.length>0?_=v[v.length-1]:_=null};function ce(re,Se,De,xe){if(re.visible===!1)return;if(re.layers.test(Se.layers)){if(re.isGroup)De=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(Se);else if(re.isLight)m.pushLight(re),re.castShadow&&m.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||pe.intersectsSprite(re)){xe&&H.setFromMatrixPosition(re.matrixWorld).applyMatrix4(D);const Xt=qe.update(re),nn=re.material;nn.visible&&_.push(re,Xt,nn,De,H.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(re.isSkinnedMesh&&re.skeleton.frame!==Ye.render.frame&&(re.skeleton.update(),re.skeleton.frame=Ye.render.frame),!re.frustumCulled||pe.intersectsObject(re))){xe&&H.setFromMatrixPosition(re.matrixWorld).applyMatrix4(D);const Xt=qe.update(re),nn=re.material;if(Array.isArray(nn)){const en=Xt.groups;for(let Dn=0,fn=en.length;Dn<fn;Dn++){const xn=en[Dn],ro=nn[xn.materialIndex];ro&&ro.visible&&_.push(re,Xt,ro,De,H.z,xn)}}else nn.visible&&_.push(re,Xt,nn,De,H.z,null)}}const Pt=re.children;for(let Xt=0,nn=Pt.length;Xt<nn;Xt++)ce(Pt[Xt],Se,De,xe)}function cn(re,Se,De,xe){const Fe=re.opaque,Pt=re.transmissive,Xt=re.transparent;m.setupLightsView(De),Pt.length>0&&Ie(Fe,Se,De),xe&&Oe.viewport(L.copy(xe)),Fe.length>0&&fr(Fe,Se,De),Pt.length>0&&fr(Pt,Se,De),Xt.length>0&&fr(Xt,Se,De)}function Ie(re,Se,De){if(S===null){const Xt=a===!0&&ze.isWebGL2===!0?jx:Zs;S=new Xt(1024,1024,{generateMipmaps:!0,type:_e.convert(Lp)!==null?Lp:zc,minFilter:tu,magFilter:tr,wrapS:Kr,wrapT:Kr,useRenderToTexture:We.has("WEBGL_multisampled_render_to_texture")})}const xe=b.getRenderTarget();b.setRenderTarget(S),b.clear();const Fe=b.toneMapping;b.toneMapping=Ja,fr(re,Se,De),b.toneMapping=Fe,Re.updateMultisampleRenderTarget(S),Re.updateRenderTargetMipmap(S),b.setRenderTarget(xe)}function fr(re,Se,De){const xe=Se.isScene===!0?Se.overrideMaterial:null;for(let Fe=0,Pt=re.length;Fe<Pt;Fe++){const Xt=re[Fe],nn=Xt.object,en=Xt.geometry,Dn=xe===null?Xt.material:xe,fn=Xt.group;nn.layers.test(De.layers)&&da(nn,Se,De,en,Dn,fn)}}function da(re,Se,De,xe,Fe,Pt){re.onBeforeRender(b,Se,De,xe,Fe,Pt),re.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Fe.onBeforeRender(b,Se,De,xe,re,Pt),Fe.transparent===!0&&Fe.side===ph?(Fe.side=ur,Fe.needsUpdate=!0,b.renderBufferDirect(De,Se,xe,Fe,re,Pt),Fe.side=hh,Fe.needsUpdate=!0,b.renderBufferDirect(De,Se,xe,Fe,re,Pt),Fe.side=ph):b.renderBufferDirect(De,Se,xe,Fe,re,Pt),re.onAfterRender(b,Se,De,xe,Fe,Pt)}function al(re,Se,De){Se.isScene!==!0&&(Se=q);const xe=et.get(re),Fe=m.state.lights,Pt=m.state.shadowsArray,Xt=Fe.state.version,nn=lt.getParameters(re,Fe.state,Pt,Se,De),en=lt.getProgramCacheKey(nn);let Dn=xe.programs;xe.environment=re.isMeshStandardMaterial?Se.environment:null,xe.fog=Se.fog,xe.envMap=(re.isMeshStandardMaterial?Le:Te).get(re.envMap||xe.environment),Dn===void 0&&(re.addEventListener("dispose",Me),Dn=new Map,xe.programs=Dn);let fn=Dn.get(en);if(fn!==void 0){if(xe.currentProgram===fn&&xe.lightsStateVersion===Xt)return Ll(re,nn),fn}else nn.uniforms=lt.getUniforms(re),re.onBuild(De,nn,b),re.onBeforeCompile(nn,b),fn=lt.acquireProgram(nn,en),Dn.set(en,fn),xe.uniforms=nn.uniforms;const xn=xe.uniforms;(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(xn.clippingPlanes=ie.uniform),Ll(re,nn),xe.needsLights=lu(re),xe.lightsStateVersion=Xt,xe.needsLights&&(xn.ambientLightColor.value=Fe.state.ambient,xn.lightProbe.value=Fe.state.probe,xn.directionalLights.value=Fe.state.directional,xn.directionalLightShadows.value=Fe.state.directionalShadow,xn.spotLights.value=Fe.state.spot,xn.spotLightShadows.value=Fe.state.spotShadow,xn.rectAreaLights.value=Fe.state.rectArea,xn.ltc_1.value=Fe.state.rectAreaLTC1,xn.ltc_2.value=Fe.state.rectAreaLTC2,xn.pointLights.value=Fe.state.point,xn.pointLightShadows.value=Fe.state.pointShadow,xn.hemisphereLights.value=Fe.state.hemi,xn.directionalShadowMap.value=Fe.state.directionalShadowMap,xn.directionalShadowMatrix.value=Fe.state.directionalShadowMatrix,xn.spotShadowMap.value=Fe.state.spotShadowMap,xn.spotShadowMatrix.value=Fe.state.spotShadowMatrix,xn.pointShadowMap.value=Fe.state.pointShadowMap,xn.pointShadowMatrix.value=Fe.state.pointShadowMatrix);const ro=fn.getUniforms(),Ui=rh.seqWithValue(ro.seq,xn);return xe.currentProgram=fn,xe.uniformsList=Ui,fn}function Ll(re,Se){const De=et.get(re);De.outputEncoding=Se.outputEncoding,De.instancing=Se.instancing,De.skinning=Se.skinning,De.morphTargets=Se.morphTargets,De.morphNormals=Se.morphNormals,De.morphTargetsCount=Se.morphTargetsCount,De.numClippingPlanes=Se.numClippingPlanes,De.numIntersection=Se.numClipIntersection,De.vertexAlphas=Se.vertexAlphas,De.vertexTangents=Se.vertexTangents,De.toneMapping=Se.toneMapping}function dc(re,Se,De,xe,Fe){Se.isScene!==!0&&(Se=q),Re.resetTextureUnits();const Pt=Se.fog,Xt=xe.isMeshStandardMaterial?Se.environment:null,nn=M===null?b.outputEncoding:M.isXRRenderTarget===!0?M.texture.encoding:la,en=(xe.isMeshStandardMaterial?Le:Te).get(xe.envMap||Xt),Dn=xe.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,fn=!!xe.normalMap&&!!De.attributes.tangent,xn=!!De.morphAttributes.position,ro=!!De.morphAttributes.normal,Ui=De.morphAttributes.position?De.morphAttributes.position.length:0,cs=xe.toneMapped?b.toneMapping:Ja,mn=et.get(xe),at=m.state.lights;if(ae===!0&&(Ee===!0||re!==I)){const To=re===I&&xe.id===R;ie.setState(xe,re,To)}let zn=!1;xe.version===mn.__version?(mn.needsLights&&mn.lightsStateVersion!==at.state.version||mn.outputEncoding!==nn||Fe.isInstancedMesh&&mn.instancing===!1||!Fe.isInstancedMesh&&mn.instancing===!0||Fe.isSkinnedMesh&&mn.skinning===!1||!Fe.isSkinnedMesh&&mn.skinning===!0||mn.envMap!==en||xe.fog&&mn.fog!==Pt||mn.numClippingPlanes!==void 0&&(mn.numClippingPlanes!==ie.numPlanes||mn.numIntersection!==ie.numIntersection)||mn.vertexAlphas!==Dn||mn.vertexTangents!==fn||mn.morphTargets!==xn||mn.morphNormals!==ro||mn.toneMapping!==cs||ze.isWebGL2===!0&&mn.morphTargetsCount!==Ui)&&(zn=!0):(zn=!0,mn.__version=xe.version);let Wo=mn.currentProgram;zn===!0&&(Wo=al(xe,Se,Fe));let Pn=!1,wn=!1,zo=!1;const kn=Wo.getUniforms(),An=mn.uniforms;if(Oe.useProgram(Wo.program)&&(Pn=!0,wn=!0,zo=!0),xe.id!==R&&(R=xe.id,wn=!0),Pn||I!==re){if(kn.setValue(de,"projectionMatrix",re.projectionMatrix),ze.logarithmicDepthBuffer&&kn.setValue(de,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),I!==re&&(I=re,wn=!0,zo=!0),xe.isShaderMaterial||xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshStandardMaterial||xe.envMap){const To=kn.map.cameraPosition;To!==void 0&&To.setValue(de,H.setFromMatrixPosition(re.matrixWorld))}(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&kn.setValue(de,"isOrthographic",re.isOrthographicCamera===!0),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial||xe.isShadowMaterial||Fe.isSkinnedMesh)&&kn.setValue(de,"viewMatrix",re.matrixWorldInverse)}if(Fe.isSkinnedMesh){kn.setOptional(de,Fe,"bindMatrix"),kn.setOptional(de,Fe,"bindMatrixInverse");const To=Fe.skeleton;To&&(ze.floatVertexTextures?(To.boneTexture===null&&To.computeBoneTexture(),kn.setValue(de,"boneTexture",To.boneTexture,Re),kn.setValue(de,"boneTextureSize",To.boneTextureSize)):kn.setOptional(de,To,"boneMatrices"))}return!!De&&(De.morphAttributes.position!==void 0||De.morphAttributes.normal!==void 0)&&Ae.update(Fe,De,xe,Wo),(wn||mn.receiveShadow!==Fe.receiveShadow)&&(mn.receiveShadow=Fe.receiveShadow,kn.setValue(de,"receiveShadow",Fe.receiveShadow)),wn&&(kn.setValue(de,"toneMappingExposure",b.toneMappingExposure),mn.needsLights&&fa(An,zo),Pt&&xe.fog&&ue.refreshFogUniforms(An,Pt),ue.refreshMaterialUniforms(An,xe,P,j,S),rh.upload(de,mn.uniformsList,An,Re)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(rh.upload(de,mn.uniformsList,An,Re),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&kn.setValue(de,"center",Fe.center),kn.setValue(de,"modelViewMatrix",Fe.modelViewMatrix),kn.setValue(de,"normalMatrix",Fe.normalMatrix),kn.setValue(de,"modelMatrix",Fe.matrixWorld),Wo}function fa(re,Se){re.ambientLightColor.needsUpdate=Se,re.lightProbe.needsUpdate=Se,re.directionalLights.needsUpdate=Se,re.directionalLightShadows.needsUpdate=Se,re.pointLights.needsUpdate=Se,re.pointLightShadows.needsUpdate=Se,re.spotLights.needsUpdate=Se,re.spotLightShadows.needsUpdate=Se,re.rectAreaLights.needsUpdate=Se,re.hemisphereLights.needsUpdate=Se}function lu(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(re,Se,De){et.get(re.texture).__webglTexture=Se,et.get(re.depthTexture).__webglTexture=De;const xe=et.get(re);xe.__hasExternalTextures=!0,xe.__hasExternalTextures&&(xe.__autoAllocateDepthBuffer=De===void 0,xe.__autoAllocateDepthBuffer||re.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),re.useRenderToTexture=!1,re.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(re,Se){const De=et.get(re);De.__webglFramebuffer=Se,De.__useDefaultFramebuffer=Se===void 0},this.setRenderTarget=function(re,Se=0,De=0){M=re,k=Se,E=De;let xe=!0;if(re){const en=et.get(re);en.__useDefaultFramebuffer!==void 0?(Oe.bindFramebuffer(36160,null),xe=!1):en.__webglFramebuffer===void 0?Re.setupRenderTarget(re):en.__hasExternalTextures&&Re.rebindTextures(re,et.get(re.texture).__webglTexture,et.get(re.depthTexture).__webglTexture)}let Fe=null,Pt=!1,Xt=!1;if(re){const en=re.texture;(en.isDataTexture3D||en.isDataTexture2DArray)&&(Xt=!0);const Dn=et.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Fe=Dn[Se],Pt=!0):re.useRenderbuffer?Fe=et.get(re).__webglMultisampledFramebuffer:Fe=Dn,L.copy(re.viewport),F.copy(re.scissor),U=re.scissorTest}else L.copy(te).multiplyScalar(P).floor(),F.copy(oe).multiplyScalar(P).floor(),U=ee;if(Oe.bindFramebuffer(36160,Fe)&&ze.drawBuffers&&xe&&Oe.drawBuffers(re,Fe),Oe.viewport(L),Oe.scissor(F),Oe.setScissorTest(U),Pt){const en=et.get(re.texture);de.framebufferTexture2D(36160,36064,34069+Se,en.__webglTexture,De)}else if(Xt){const en=et.get(re.texture),Dn=Se||0;de.framebufferTextureLayer(36160,36064,en.__webglTexture,De||0,Dn)}R=-1},this.readRenderTargetPixels=function(re,Se,De,xe,Fe,Pt,Xt){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nn=et.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Xt!==void 0&&(nn=nn[Xt]),nn){Oe.bindFramebuffer(36160,nn);try{const en=re.texture,Dn=en.format,fn=en.type;if(Dn!==di&&_e.convert(Dn)!==de.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const xn=fn===Lp&&(We.has("EXT_color_buffer_half_float")||ze.isWebGL2&&We.has("EXT_color_buffer_float"));if(fn!==zc&&_e.convert(fn)!==de.getParameter(35738)&&!(fn===Hc&&(ze.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float")))&&!xn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de.checkFramebufferStatus(36160)===36053?Se>=0&&Se<=re.width-xe&&De>=0&&De<=re.height-Fe&&de.readPixels(Se,De,xe,Fe,_e.convert(Dn),_e.convert(fn),Pt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const en=M!==null?et.get(M).__webglFramebuffer:null;Oe.bindFramebuffer(36160,en)}}},this.copyFramebufferToTexture=function(re,Se,De=0){if(Se.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const xe=Math.pow(2,-De),Fe=Math.floor(Se.image.width*xe),Pt=Math.floor(Se.image.height*xe);Re.setTexture2D(Se,0),de.copyTexSubImage2D(3553,De,0,0,re.x,re.y,Fe,Pt),Oe.unbindTexture()},this.copyTextureToTexture=function(re,Se,De,xe=0){const Fe=Se.image.width,Pt=Se.image.height,Xt=_e.convert(De.format),nn=_e.convert(De.type);Re.setTexture2D(De,0),de.pixelStorei(37440,De.flipY),de.pixelStorei(37441,De.premultiplyAlpha),de.pixelStorei(3317,De.unpackAlignment),Se.isDataTexture?de.texSubImage2D(3553,xe,re.x,re.y,Fe,Pt,Xt,nn,Se.image.data):Se.isCompressedTexture?de.compressedTexSubImage2D(3553,xe,re.x,re.y,Se.mipmaps[0].width,Se.mipmaps[0].height,Xt,Se.mipmaps[0].data):de.texSubImage2D(3553,xe,re.x,re.y,Xt,nn,Se.image),xe===0&&De.generateMipmaps&&de.generateMipmap(3553),Oe.unbindTexture()},this.copyTextureToTexture3D=function(re,Se,De,xe,Fe=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pt=re.max.x-re.min.x+1,Xt=re.max.y-re.min.y+1,nn=re.max.z-re.min.z+1,en=_e.convert(xe.format),Dn=_e.convert(xe.type);let fn;if(xe.isDataTexture3D)Re.setTexture3D(xe,0),fn=32879;else if(xe.isDataTexture2DArray)Re.setTexture2DArray(xe,0),fn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}de.pixelStorei(37440,xe.flipY),de.pixelStorei(37441,xe.premultiplyAlpha),de.pixelStorei(3317,xe.unpackAlignment);const xn=de.getParameter(3314),ro=de.getParameter(32878),Ui=de.getParameter(3316),cs=de.getParameter(3315),mn=de.getParameter(32877),at=De.isCompressedTexture?De.mipmaps[0]:De.image;de.pixelStorei(3314,at.width),de.pixelStorei(32878,at.height),de.pixelStorei(3316,re.min.x),de.pixelStorei(3315,re.min.y),de.pixelStorei(32877,re.min.z),De.isDataTexture||De.isDataTexture3D?de.texSubImage3D(fn,Fe,Se.x,Se.y,Se.z,Pt,Xt,nn,en,Dn,at.data):De.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(fn,Fe,Se.x,Se.y,Se.z,Pt,Xt,nn,en,at.data)):de.texSubImage3D(fn,Fe,Se.x,Se.y,Se.z,Pt,Xt,nn,en,Dn,at),de.pixelStorei(3314,xn),de.pixelStorei(32878,ro),de.pixelStorei(3316,Ui),de.pixelStorei(3315,cs),de.pixelStorei(32877,mn),Fe===0&&xe.generateMipmaps&&de.generateMipmap(fn),Oe.unbindTexture()},this.initTexture=function(re){Re.setTexture2D(re,0),Oe.unbindTexture()},this.resetState=function(){k=0,E=0,M=null,Oe.reset(),ke.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Qn.prototype.isWebGLRenderer=!0;class S2 extends Qn{}S2.prototype.isWebGL1Renderer=!0;class ov{constructor(e,t=25e-5){this.name="",this.color=new tt(e),this.density=t}clone(){return new ov(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}ov.prototype.isFogExp2=!0;class rv{constructor(e,t=1,o=1e3){this.name="",this.color=new tt(e),this.near=t,this.far=o}clone(){return new rv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}rv.prototype.isFog=!0;class zm extends dn{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}zm.prototype.isScene=!0;class wh{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=um,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,o){e*=this.stride,o*=t.stride;for(let i=0,l=this.stride;i<l;i++)this.array[e+i]=t.array[o+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),o=new this.constructor(t,this.stride);return o.setUsage(this.usage),o}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}wh.prototype.isInterleavedBuffer=!0;const ar=new Y;class ns{constructor(e,t,o,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=o,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,o=this.data.count;t<o;t++)ar.x=this.getX(t),ar.y=this.getY(t),ar.z=this.getZ(t),ar.applyMatrix4(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyNormalMatrix(e){for(let t=0,o=this.count;t<o;t++)ar.x=this.getX(t),ar.y=this.getY(t),ar.z=this.getZ(t),ar.applyNormalMatrix(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}transformDirection(e){for(let t=0,o=this.count;t<o;t++)ar.x=this.getX(t),ar.y=this.getY(t),ar.z=this.getZ(t),ar.transformDirection(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=o,this}setXYZ(e,t,o,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=o,this.data.array[e+2]=i,this}setXYZW(e,t,o,i,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=o,this.data.array[e+2]=i,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let o=0;o<this.count;o++){const i=o*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[i+l])}return new vn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ns(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let o=0;o<this.count;o++){const i=o*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[i+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}ns.prototype.isInterleavedBufferAttribute=!0;class oS extends dr{constructor(e){super();this.type="SpriteMaterial",this.color=new tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}oS.prototype.isSpriteMaterial=!0;let qd;const Ug=new Y,Qd=new Y,Zd=new Y,ef=new Ve,Hg=new Ve,C2=new wt,e0=new Y,Gg=new Y,t0=new Y,D1=new Ve,db=new Ve,L1=new Ve;class rS extends dn{constructor(e){super();if(this.type="Sprite",qd===void 0){qd=new Ut;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new wh(t,5);qd.setIndex([0,1,2,0,2,3]),qd.setAttribute("position",new ns(o,3,0,!1)),qd.setAttribute("uv",new ns(o,2,3,!1))}this.geometry=qd,this.material=e!==void 0?e:new oS,this.center=new Ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qd.setFromMatrixScale(this.matrixWorld),C2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Zd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Qd.multiplyScalar(-Zd.z);const o=this.material.rotation;let i,l;o!==0&&(l=Math.cos(o),i=Math.sin(o));const a=this.center;n0(e0.set(-.5,-.5,0),Zd,a,Qd,i,l),n0(Gg.set(.5,-.5,0),Zd,a,Qd,i,l),n0(t0.set(.5,.5,0),Zd,a,Qd,i,l),D1.set(0,0),db.set(1,0),L1.set(1,1);let c=e.ray.intersectTriangle(e0,Gg,t0,!1,Ug);if(c===null&&(n0(Gg.set(-.5,.5,0),Zd,a,Qd,i,l),db.set(0,1),c=e.ray.intersectTriangle(e0,t0,Gg,!1,Ug),c===null))return;const p=e.ray.origin.distanceTo(Ug);p<e.near||p>e.far||t.push({distance:p,point:Ug.clone(),uv:pr.getUV(Ug,e0,Gg,t0,D1,db,L1,new Ve),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}rS.prototype.isSprite=!0;function n0(r,e,t,o,i,l){ef.subVectors(r,t).addScalar(.5).multiply(o),i!==void 0?(Hg.x=l*ef.x-i*ef.y,Hg.y=i*ef.x+l*ef.y):Hg.copy(ef),r.copy(e),r.x+=Hg.x,r.y+=Hg.y,r.applyMatrix4(C2)}const o0=new Y,N1=new Y;class b2 extends dn{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let o=0,i=t.length;o<i;o++){const l=t[o];this.addLevel(l.object.clone(),l.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const o=this.levels;let i;for(i=0;i<o.length&&!(t<o[i].distance);i++);return o.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let o,i;for(o=1,i=t.length;o<i&&!(e<t[o].distance);o++);return t[o-1].object}return null}raycast(e,t){if(this.levels.length>0){o0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(o0);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){o0.setFromMatrixPosition(e.matrixWorld),N1.setFromMatrixPosition(this.matrixWorld);const o=o0.distanceTo(N1)/e.zoom;t[0].object.visible=!0;let i,l;for(i=1,l=t.length;i<l&&o>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<l;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const o=this.levels;for(let i=0,l=o.length;i<l;i++){const a=o[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}const $1=new Y,P1=new Gn,F1=new Gn,ej=new Y,U1=new wt;class iv extends nr{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new wt,this.bindMatrixInverse=new wt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Gn,t=this.geometry.attributes.skinWeight;for(let o=0,i=t.count;o<i;o++){e.x=t.getX(o),e.y=t.getY(o),e.z=t.getZ(o),e.w=t.getW(o);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(o,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const o=this.skeleton,i=this.geometry;P1.fromBufferAttribute(i.attributes.skinIndex,e),F1.fromBufferAttribute(i.attributes.skinWeight,e),$1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const a=F1.getComponent(l);if(a!==0){const c=P1.getComponent(l);U1.multiplyMatrices(o.bones[c].matrixWorld,o.boneInverses[c]),t.addScaledVector(ej.copy($1).applyMatrix4(U1),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}iv.prototype.isSkinnedMesh=!0;class sv extends dn{constructor(){super();this.type="Bone"}}sv.prototype.isBone=!0;class Fp extends Vo{constructor(e=null,t=1,o=1,i,l,a,c,p,h=tr,f=tr,_,m){super(null,a,c,p,h,f,i,l,_,m);this.image={data:e,width:t,height:o},this.magFilter=h,this.minFilter=f,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Fp.prototype.isDataTexture=!0;const H1=new wt,tj=new wt;class lv{constructor(e=[],t=[]){this.uuid=Qs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let o=0,i=this.bones.length;o<i;o++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const o=new wt;this.bones[e]&&o.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(o)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const o=this.bones[e];o&&o.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const o=this.bones[e];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}update(){const e=this.bones,t=this.boneInverses,o=this.boneMatrices,i=this.boneTexture;for(let l=0,a=e.length;l<a;l++){const c=e[l]?e[l].matrixWorld:tj;H1.multiplyMatrices(c,t[l]),H1.toArray(o,l*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new lv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ZF(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const o=new Fp(t,e,e,di,Hc);return o.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=o,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,o=this.bones.length;t<o;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let o=0,i=e.bones.length;o<i;o++){const l=e.bones[o];let a=t[l];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),a=new sv),this.bones.push(a),this.boneInverses.push(new wt().fromArray(e.boneInverses[o]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,o=this.boneInverses;for(let i=0,l=t.length;i<l;i++){const a=t[i];e.bones.push(a.uuid);const c=o[i];e.boneInverses.push(c.toArray())}return e}}class Jp extends vn{constructor(e,t,o,i=1){typeof o=="number"&&(i=o,o=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,o);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Jp.prototype.isInstancedBufferAttribute=!0;const G1=new wt,V1=new wt,r0=[],Vg=new nr;class AM extends nr{constructor(e,t,o){super(e,t);this.instanceMatrix=new Jp(new Float32Array(o*16),16),this.instanceColor=null,this.count=o,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const o=this.matrixWorld,i=this.count;if(Vg.geometry=this.geometry,Vg.material=this.material,Vg.material!==void 0)for(let l=0;l<i;l++){this.getMatrixAt(l,G1),V1.multiplyMatrices(o,G1),Vg.matrixWorld=V1,Vg.raycast(e,r0);for(let a=0,c=r0.length;a<c;a++){const p=r0[a];p.instanceId=l,p.object=this,t.push(p)}r0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Jp(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}AM.prototype.isInstancedMesh=!0;class Lr extends dr{constructor(e){super();this.type="LineBasicMaterial",this.color=new tt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Lr.prototype.isLineBasicMaterial=!0;const W1=new Y,z1=new Y,X1=new wt,fb=new Ah,i0=new cc;class nc extends dn{constructor(e=new Ut,t=new Lr){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,o=[0];for(let i=1,l=t.count;i<l;i++)W1.fromBufferAttribute(t,i-1),z1.fromBufferAttribute(t,i),o[i]=o[i-1],o[i]+=W1.distanceTo(z1);e.setAttribute("lineDistance",new Mt(o,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const o=this.geometry,i=this.matrixWorld,l=e.params.Line.threshold,a=o.drawRange;if(o.boundingSphere===null&&o.computeBoundingSphere(),i0.copy(o.boundingSphere),i0.applyMatrix4(i),i0.radius+=l,e.ray.intersectsSphere(i0)===!1)return;X1.copy(i).invert(),fb.copy(e.ray).applyMatrix4(X1);const c=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=c*c,h=new Y,f=new Y,_=new Y,m=new Y,v=this.isLineSegments?2:1;if(o.isBufferGeometry){const x=o.index,A=o.attributes.position;if(x!==null){const k=Math.max(0,a.start),E=Math.min(x.count,a.start+a.count);for(let M=k,R=E-1;M<R;M+=v){const I=x.getX(M),L=x.getX(M+1);if(h.fromBufferAttribute(A,I),f.fromBufferAttribute(A,L),fb.distanceSqToSegment(h,f,m,_)>p)continue;m.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(m);U<e.near||U>e.far||t.push({distance:U,point:_.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else{const k=Math.max(0,a.start),E=Math.min(A.count,a.start+a.count);for(let M=k,R=E-1;M<R;M+=v){if(h.fromBufferAttribute(A,M),f.fromBufferAttribute(A,M+1),fb.distanceSqToSegment(h,f,m,_)>p)continue;m.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(m);L<e.near||L>e.far||t.push({distance:L,point:_.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else o.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,o=Object.keys(t);if(o.length>0){const i=t[o[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,a=i.length;l<a;l++){const c=i[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}nc.prototype.isLine=!0;const j1=new Y,J1=new Y;class is extends nc{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,o=[];for(let i=0,l=t.count;i<l;i+=2)j1.fromBufferAttribute(t,i),J1.fromBufferAttribute(t,i+1),o[i]=i===0?0:o[i-1],o[i+1]=o[i]+j1.distanceTo(J1);e.setAttribute("lineDistance",new Mt(o,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}is.prototype.isLineSegments=!0;class iS extends nc{constructor(e,t){super(e,t);this.type="LineLoop"}}iS.prototype.isLineLoop=!0;class Mh extends dr{constructor(e){super();this.type="PointsMaterial",this.color=new tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Mh.prototype.isPointsMaterial=!0;const K1=new wt,DA=new Ah,s0=new cc,l0=new Y;class Xm extends dn{constructor(e=new Ut,t=new Mh){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const o=this.geometry,i=this.matrixWorld,l=e.params.Points.threshold,a=o.drawRange;if(o.boundingSphere===null&&o.computeBoundingSphere(),s0.copy(o.boundingSphere),s0.applyMatrix4(i),s0.radius+=l,e.ray.intersectsSphere(s0)===!1)return;K1.copy(i).invert(),DA.copy(e.ray).applyMatrix4(K1);const c=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=c*c;if(o.isBufferGeometry){const h=o.index,_=o.attributes.position;if(h!==null){const m=Math.max(0,a.start),v=Math.min(h.count,a.start+a.count);for(let x=m,b=v;x<b;x++){const A=h.getX(x);l0.fromBufferAttribute(_,A),Y1(l0,A,p,i,e,t,this)}}else{const m=Math.max(0,a.start),v=Math.min(_.count,a.start+a.count);for(let x=m,b=v;x<b;x++)l0.fromBufferAttribute(_,x),Y1(l0,x,p,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,o=Object.keys(t);if(o.length>0){const i=t[o[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,a=i.length;l<a;l++){const c=i[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=l}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Xm.prototype.isPoints=!0;function Y1(r,e,t,o,i,l,a){const c=DA.distanceSqToPoint(r);if(c<t){const p=new Y;DA.closestPointToPoint(r,p),p.applyMatrix4(o);const h=i.ray.origin.distanceTo(p);if(h<i.near||h>i.far)return;l.push({distance:h,distanceToRay:Math.sqrt(c),point:p,index:e,face:null,object:a})}}class k2 extends Vo{constructor(e,t,o,i,l,a,c,p,h){super(e,t,o,i,l,a,c,p,h);this.minFilter=a!==void 0?a:So,this.magFilter=l!==void 0?l:So,this.generateMipmaps=!1;const f=this;function _(){f.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}k2.prototype.isVideoTexture=!0;class A2 extends Vo{constructor(e,t,o){super({width:e,height:t});this.format=o,this.magFilter=tr,this.minFilter=tr,this.generateMipmaps=!1,this.needsUpdate=!0}}A2.prototype.isFramebufferTexture=!0;class wM extends Vo{constructor(e,t,o,i,l,a,c,p,h,f,_,m){super(null,a,c,p,h,f,i,l,_,m);this.image={width:t,height:o},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}wM.prototype.isCompressedTexture=!0;class MM extends Vo{constructor(e,t,o,i,l,a,c,p,h){super(e,t,o,i,l,a,c,p,h);this.needsUpdate=!0}}MM.prototype.isCanvasTexture=!0;class dm extends Ut{constructor(e=1,t=8,o=0,i=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:o,thetaLength:i},t=Math.max(3,t);const l=[],a=[],c=[],p=[],h=new Y,f=new Ve;a.push(0,0,0),c.push(0,0,1),p.push(.5,.5);for(let _=0,m=3;_<=t;_++,m+=3){const v=o+_/t*i;h.x=e*Math.cos(v),h.y=e*Math.sin(v),a.push(h.x,h.y,h.z),c.push(0,0,1),f.x=(a[m]/e+1)/2,f.y=(a[m+1]/e+1)/2,p.push(f.x,f.y)}for(let _=1;_<=t;_++)l.push(_,_+1,0);this.setIndex(l),this.setAttribute("position",new Mt(a,3)),this.setAttribute("normal",new Mt(c,3)),this.setAttribute("uv",new Mt(p,2))}static fromJSON(e){return new dm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mh extends Ut{constructor(e=1,t=1,o=1,i=8,l=1,a=!1,c=0,p=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:o,radialSegments:i,heightSegments:l,openEnded:a,thetaStart:c,thetaLength:p};const h=this;i=Math.floor(i),l=Math.floor(l);const f=[],_=[],m=[],v=[];let x=0;const b=[],A=o/2;let k=0;E(),a===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(f),this.setAttribute("position",new Mt(_,3)),this.setAttribute("normal",new Mt(m,3)),this.setAttribute("uv",new Mt(v,2));function E(){const R=new Y,I=new Y;let L=0;const F=(t-e)/o;for(let U=0;U<=l;U++){const X=[],j=U/l,P=j*(t-e)+e;for(let z=0;z<=i;z++){const K=z/i,te=K*p+c,oe=Math.sin(te),ee=Math.cos(te);I.x=P*oe,I.y=-j*o+A,I.z=P*ee,_.push(I.x,I.y,I.z),R.set(oe,F,ee).normalize(),m.push(R.x,R.y,R.z),v.push(K,1-j),X.push(x++)}b.push(X)}for(let U=0;U<i;U++)for(let X=0;X<l;X++){const j=b[X][U],P=b[X+1][U],z=b[X+1][U+1],K=b[X][U+1];f.push(j,P,K),f.push(P,z,K),L+=6}h.addGroup(k,L,0),k+=L}function M(R){const I=x,L=new Ve,F=new Y;let U=0;const X=R===!0?e:t,j=R===!0?1:-1;for(let z=1;z<=i;z++)_.push(0,A*j,0),m.push(0,j,0),v.push(.5,.5),x++;const P=x;for(let z=0;z<=i;z++){const te=z/i*p+c,oe=Math.cos(te),ee=Math.sin(te);F.x=X*ee,F.y=A*j,F.z=X*oe,_.push(F.x,F.y,F.z),m.push(0,j,0),L.x=oe*.5+.5,L.y=ee*.5*j+.5,v.push(L.x,L.y),x++}for(let z=0;z<i;z++){const K=I+z,te=P+z;R===!0?f.push(te,te+1,K):f.push(te+1,te,K),U+=3}h.addGroup(k,U,R===!0?1:2),k+=U}}static fromJSON(e){return new mh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fm extends mh{constructor(e=1,t=1,o=8,i=1,l=!1,a=0,c=Math.PI*2){super(0,e,t,o,i,l,a,c);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:o,heightSegments:i,openEnded:l,thetaStart:a,thetaLength:c}}static fromJSON(e){return new fm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oc extends Ut{constructor(e=[],t=[],o=1,i=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:o,detail:i};const l=[],a=[];c(i),h(o),f(),this.setAttribute("position",new Mt(l,3)),this.setAttribute("normal",new Mt(l.slice(),3)),this.setAttribute("uv",new Mt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function c(E){const M=new Y,R=new Y,I=new Y;for(let L=0;L<t.length;L+=3)v(t[L+0],M),v(t[L+1],R),v(t[L+2],I),p(M,R,I,E)}function p(E,M,R,I){const L=I+1,F=[];for(let U=0;U<=L;U++){F[U]=[];const X=E.clone().lerp(R,U/L),j=M.clone().lerp(R,U/L),P=L-U;for(let z=0;z<=P;z++)z===0&&U===L?F[U][z]=X:F[U][z]=X.clone().lerp(j,z/P)}for(let U=0;U<L;U++)for(let X=0;X<2*(L-U)-1;X++){const j=Math.floor(X/2);X%2===0?(m(F[U][j+1]),m(F[U+1][j]),m(F[U][j])):(m(F[U][j+1]),m(F[U+1][j+1]),m(F[U+1][j]))}}function h(E){const M=new Y;for(let R=0;R<l.length;R+=3)M.x=l[R+0],M.y=l[R+1],M.z=l[R+2],M.normalize().multiplyScalar(E),l[R+0]=M.x,l[R+1]=M.y,l[R+2]=M.z}function f(){const E=new Y;for(let M=0;M<l.length;M+=3){E.x=l[M+0],E.y=l[M+1],E.z=l[M+2];const R=A(E)/2/Math.PI+.5,I=k(E)/Math.PI+.5;a.push(R,1-I)}x(),_()}function _(){for(let E=0;E<a.length;E+=6){const M=a[E+0],R=a[E+2],I=a[E+4],L=Math.max(M,R,I),F=Math.min(M,R,I);L>.9&&F<.1&&(M<.2&&(a[E+0]+=1),R<.2&&(a[E+2]+=1),I<.2&&(a[E+4]+=1))}}function m(E){l.push(E.x,E.y,E.z)}function v(E,M){const R=E*3;M.x=e[R+0],M.y=e[R+1],M.z=e[R+2]}function x(){const E=new Y,M=new Y,R=new Y,I=new Y,L=new Ve,F=new Ve,U=new Ve;for(let X=0,j=0;X<l.length;X+=9,j+=6){E.set(l[X+0],l[X+1],l[X+2]),M.set(l[X+3],l[X+4],l[X+5]),R.set(l[X+6],l[X+7],l[X+8]),L.set(a[j+0],a[j+1]),F.set(a[j+2],a[j+3]),U.set(a[j+4],a[j+5]),I.copy(E).add(M).add(R).divideScalar(3);const P=A(I);b(L,j+0,E,P),b(F,j+2,M,P),b(U,j+4,R,P)}}function b(E,M,R,I){I<0&&E.x===1&&(a[M]=E.x-1),R.x===0&&R.z===0&&(a[M]=I/2/Math.PI+.5)}function A(E){return Math.atan2(E.z,-E.x)}function k(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}static fromJSON(e){return new oc(e.vertices,e.indices,e.radius,e.details)}}class mm extends oc{constructor(e=1,t=0){const o=(1+Math.sqrt(5))/2,i=1/o,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-o,0,-i,o,0,i,-o,0,i,o,-i,-o,0,-i,o,0,i,-o,0,i,o,0,-o,0,-i,o,0,-i,-o,0,i,o,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,a,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mm(e.radius,e.detail)}}const a0=new Y,c0=new Y,mb=new Y,u0=new pr;class RM extends Ut{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),l=Math.cos($p*t),a=e.getIndex(),c=e.getAttribute("position"),p=a?a.count:c.count,h=[0,0,0],f=["a","b","c"],_=new Array(3),m={},v=[];for(let x=0;x<p;x+=3){a?(h[0]=a.getX(x),h[1]=a.getX(x+1),h[2]=a.getX(x+2)):(h[0]=x,h[1]=x+1,h[2]=x+2);const{a:b,b:A,c:k}=u0;if(b.fromBufferAttribute(c,h[0]),A.fromBufferAttribute(c,h[1]),k.fromBufferAttribute(c,h[2]),u0.getNormal(mb),_[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,_[1]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,_[2]=`${Math.round(k.x*i)},${Math.round(k.y*i)},${Math.round(k.z*i)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let E=0;E<3;E++){const M=(E+1)%3,R=_[E],I=_[M],L=u0[f[E]],F=u0[f[M]],U=`${R}_${I}`,X=`${I}_${R}`;X in m&&m[X]?(mb.dot(m[X].normal)<=l&&(v.push(L.x,L.y,L.z),v.push(F.x,F.y,F.z)),m[X]=null):U in m||(m[U]={index0:h[E],index1:h[M],normal:mb.clone()})}}for(const x in m)if(m[x]){const{index0:b,index1:A}=m[x];a0.fromBufferAttribute(c,b),c0.fromBufferAttribute(c,A),v.push(a0.x,a0.y,a0.z),v.push(c0.x,c0.y,c0.z)}this.setAttribute("position",new Mt(v,3))}}}class nl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const o=this.getUtoTmapping(e);return this.getPoint(o,t)}getPoints(e=5){const t=[];for(let o=0;o<=e;o++)t.push(this.getPoint(o/e));return t}getSpacedPoints(e=5){const t=[];for(let o=0;o<=e;o++)t.push(this.getPointAt(o/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let o,i=this.getPoint(0),l=0;t.push(0);for(let a=1;a<=e;a++)o=this.getPoint(a/e),l+=o.distanceTo(i),t.push(l),i=o;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const o=this.getLengths();let i=0;const l=o.length;let a;t?a=t:a=e*o[l-1];let c=0,p=l-1,h;for(;c<=p;)if(i=Math.floor(c+(p-c)/2),h=o[i]-a,h<0)c=i+1;else if(h>0)p=i-1;else{p=i;break}if(i=p,o[i]===a)return i/(l-1);const f=o[i],m=o[i+1]-f,v=(a-f)/m;return(i+v)/(l-1)}getTangent(e,t){let i=e-1e-4,l=e+1e-4;i<0&&(i=0),l>1&&(l=1);const a=this.getPoint(i),c=this.getPoint(l),p=t||(a.isVector2?new Ve:new Y);return p.copy(c).sub(a).normalize(),p}getTangentAt(e,t){const o=this.getUtoTmapping(e);return this.getTangent(o,t)}computeFrenetFrames(e,t){const o=new Y,i=[],l=[],a=[],c=new Y,p=new wt;for(let v=0;v<=e;v++){const x=v/e;i[v]=this.getTangentAt(x,new Y)}l[0]=new Y,a[0]=new Y;let h=Number.MAX_VALUE;const f=Math.abs(i[0].x),_=Math.abs(i[0].y),m=Math.abs(i[0].z);f<=h&&(h=f,o.set(1,0,0)),_<=h&&(h=_,o.set(0,1,0)),m<=h&&o.set(0,0,1),c.crossVectors(i[0],o).normalize(),l[0].crossVectors(i[0],c),a[0].crossVectors(i[0],l[0]);for(let v=1;v<=e;v++){if(l[v]=l[v-1].clone(),a[v]=a[v-1].clone(),c.crossVectors(i[v-1],i[v]),c.length()>Number.EPSILON){c.normalize();const x=Math.acos(pi(i[v-1].dot(i[v]),-1,1));l[v].applyMatrix4(p.makeRotationAxis(c,x))}a[v].crossVectors(i[v],l[v])}if(t===!0){let v=Math.acos(pi(l[0].dot(l[e]),-1,1));v/=e,i[0].dot(c.crossVectors(l[0],l[e]))>0&&(v=-v);for(let x=1;x<=e;x++)l[x].applyMatrix4(p.makeRotationAxis(i[x],v*x)),a[x].crossVectors(i[x],l[x])}return{tangents:i,normals:l,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class av extends nl{constructor(e=0,t=0,o=1,i=1,l=0,a=Math.PI*2,c=!1,p=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=o,this.yRadius=i,this.aStartAngle=l,this.aEndAngle=a,this.aClockwise=c,this.aRotation=p}getPoint(e,t){const o=t||new Ve,i=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const a=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=i;for(;l>i;)l-=i;l<Number.EPSILON&&(a?l=0:l=i),this.aClockwise===!0&&!a&&(l===i?l=-i:l=l-i);const c=this.aStartAngle+e*l;let p=this.aX+this.xRadius*Math.cos(c),h=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const f=Math.cos(this.aRotation),_=Math.sin(this.aRotation),m=p-this.aX,v=h-this.aY;p=m*f-v*_+this.aX,h=m*_+v*f+this.aY}return o.set(p,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}av.prototype.isEllipseCurve=!0;class BM extends av{constructor(e,t,o,i,l,a){super(e,t,o,o,i,l,a);this.type="ArcCurve"}}BM.prototype.isArcCurve=!0;function IM(){let r=0,e=0,t=0,o=0;function i(l,a,c,p){r=l,e=c,t=-3*l+3*a-2*c-p,o=2*l-2*a+c+p}return{initCatmullRom:function(l,a,c,p,h){i(a,c,h*(c-l),h*(p-a))},initNonuniformCatmullRom:function(l,a,c,p,h,f,_){let m=(a-l)/h-(c-l)/(h+f)+(c-a)/f,v=(c-a)/f-(p-a)/(f+_)+(p-c)/_;m*=f,v*=f,i(a,c,m,v)},calc:function(l){const a=l*l,c=a*l;return r+e*l+t*a+o*c}}}const h0=new Y,gb=new IM,_b=new IM,yb=new IM;class OM extends nl{constructor(e=[],t=!1,o="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=o,this.tension=i}getPoint(e,t=new Y){const o=t,i=this.points,l=i.length,a=(l-(this.closed?0:1))*e;let c=Math.floor(a),p=a-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:p===0&&c===l-1&&(c=l-2,p=1);let h,f;this.closed||c>0?h=i[(c-1)%l]:(h0.subVectors(i[0],i[1]).add(i[0]),h=h0);const _=i[c%l],m=i[(c+1)%l];if(this.closed||c+2<l?f=i[(c+2)%l]:(h0.subVectors(i[l-1],i[l-2]).add(i[l-1]),f=h0),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(h.distanceToSquared(_),v),b=Math.pow(_.distanceToSquared(m),v),A=Math.pow(m.distanceToSquared(f),v);b<1e-4&&(b=1),x<1e-4&&(x=b),A<1e-4&&(A=b),gb.initNonuniformCatmullRom(h.x,_.x,m.x,f.x,x,b,A),_b.initNonuniformCatmullRom(h.y,_.y,m.y,f.y,x,b,A),yb.initNonuniformCatmullRom(h.z,_.z,m.z,f.z,x,b,A)}else this.curveType==="catmullrom"&&(gb.initCatmullRom(h.x,_.x,m.x,f.x,this.tension),_b.initCatmullRom(h.y,_.y,m.y,f.y,this.tension),yb.initCatmullRom(h.z,_.z,m.z,f.z,this.tension));return o.set(gb.calc(p),_b.calc(p),yb.calc(p)),o}copy(e){super.copy(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,o=this.points.length;t<o;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const i=e.points[t];this.points.push(new Y().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}OM.prototype.isCatmullRomCurve3=!0;function q1(r,e,t,o,i){const l=(o-e)*.5,a=(i-t)*.5,c=r*r,p=r*c;return(2*t-2*o+l+a)*p+(-3*t+3*o-2*l-a)*c+l*r+t}function nj(r,e){const t=1-r;return t*t*e}function oj(r,e){return 2*(1-r)*r*e}function rj(r,e){return r*r*e}function B_(r,e,t,o){return nj(r,e)+oj(r,t)+rj(r,o)}function ij(r,e){const t=1-r;return t*t*t*e}function sj(r,e){const t=1-r;return 3*t*t*r*e}function lj(r,e){return 3*(1-r)*r*r*e}function aj(r,e){return r*r*r*e}function I_(r,e,t,o,i){return ij(r,e)+sj(r,t)+lj(r,o)+aj(r,i)}class sS extends nl{constructor(e=new Ve,t=new Ve,o=new Ve,i=new Ve){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=o,this.v3=i}getPoint(e,t=new Ve){const o=t,i=this.v0,l=this.v1,a=this.v2,c=this.v3;return o.set(I_(e,i.x,l.x,a.x,c.x),I_(e,i.y,l.y,a.y,c.y)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}sS.prototype.isCubicBezierCurve=!0;class DM extends nl{constructor(e=new Y,t=new Y,o=new Y,i=new Y){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=o,this.v3=i}getPoint(e,t=new Y){const o=t,i=this.v0,l=this.v1,a=this.v2,c=this.v3;return o.set(I_(e,i.x,l.x,a.x,c.x),I_(e,i.y,l.y,a.y,c.y),I_(e,i.z,l.z,a.z,c.z)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}DM.prototype.isCubicBezierCurve3=!0;class cv extends nl{constructor(e=new Ve,t=new Ve){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const o=t;return e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const o=t||new Ve;return o.copy(this.v2).sub(this.v1).normalize(),o}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}cv.prototype.isLineCurve=!0;class w2 extends nl{constructor(e=new Y,t=new Y){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Y){const o=t;return e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lS extends nl{constructor(e=new Ve,t=new Ve,o=new Ve){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=o}getPoint(e,t=new Ve){const o=t,i=this.v0,l=this.v1,a=this.v2;return o.set(B_(e,i.x,l.x,a.x),B_(e,i.y,l.y,a.y)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}lS.prototype.isQuadraticBezierCurve=!0;class aS extends nl{constructor(e=new Y,t=new Y,o=new Y){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=o}getPoint(e,t=new Y){const o=t,i=this.v0,l=this.v1,a=this.v2;return o.set(B_(e,i.x,l.x,a.x),B_(e,i.y,l.y,a.y),B_(e,i.z,l.z,a.z)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}aS.prototype.isQuadraticBezierCurve3=!0;class cS extends nl{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const o=t,i=this.points,l=(i.length-1)*e,a=Math.floor(l),c=l-a,p=i[a===0?a:a-1],h=i[a],f=i[a>i.length-2?i.length-1:a+1],_=i[a>i.length-3?i.length-1:a+2];return o.set(q1(c,p.x,h.x,f.x,_.x),q1(c,p.y,h.y,f.y,_.y)),o}copy(e){super.copy(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,o=this.points.length;t<o;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const i=e.points[t];this.points.push(new Ve().fromArray(i))}return this}}cS.prototype.isSplineCurve=!0;var LM=Object.freeze({__proto__:null,ArcCurve:BM,CatmullRomCurve3:OM,CubicBezierCurve:sS,CubicBezierCurve3:DM,EllipseCurve:av,LineCurve:cv,LineCurve3:w2,QuadraticBezierCurve:lS,QuadraticBezierCurve3:aS,SplineCurve:cS});class M2 extends nl{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new cv(t,e))}getPoint(e,t){const o=e*this.getLength(),i=this.getCurveLengths();let l=0;for(;l<i.length;){if(i[l]>=o){const a=i[l]-o,c=this.curves[l],p=c.getLength(),h=p===0?0:1-a/p;return c.getPointAt(h,t)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let o=0,i=this.curves.length;o<i;o++)t+=this.curves[o].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let o=0;o<=e;o++)t.push(this.getPoint(o/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let o;for(let i=0,l=this.curves;i<l.length;i++){const a=l[i],c=a&&a.isEllipseCurve?e*2:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,p=a.getPoints(c);for(let h=0;h<p.length;h++){const f=p[h];o&&o.equals(f)||(t.push(f),o=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,o=e.curves.length;t<o;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,o=this.curves.length;t<o;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,o=e.curves.length;t<o;t++){const i=e.curves[t];this.curves.push(new LM[i.type]().fromJSON(i))}return this}}class vy extends M2{constructor(e){super();this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,o=e.length;t<o;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const o=new cv(this.currentPoint.clone(),new Ve(e,t));return this.curves.push(o),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,o,i){const l=new lS(this.currentPoint.clone(),new Ve(e,t),new Ve(o,i));return this.curves.push(l),this.currentPoint.set(o,i),this}bezierCurveTo(e,t,o,i,l,a){const c=new sS(this.currentPoint.clone(),new Ve(e,t),new Ve(o,i),new Ve(l,a));return this.curves.push(c),this.currentPoint.set(l,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),o=new cS(t);return this.curves.push(o),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,o,i,l,a){const c=this.currentPoint.x,p=this.currentPoint.y;return this.absarc(e+c,t+p,o,i,l,a),this}absarc(e,t,o,i,l,a){return this.absellipse(e,t,o,o,i,l,a),this}ellipse(e,t,o,i,l,a,c,p){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,o,i,l,a,c,p),this}absellipse(e,t,o,i,l,a,c,p){const h=new av(e,t,o,i,l,a,c,p);if(this.curves.length>0){const _=h.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ra extends vy{constructor(e){super(e);this.uuid=Qs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let o=0,i=this.holes.length;o<i;o++)t[o]=this.holes[o].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,o=e.holes.length;t<o;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,o=this.holes.length;t<o;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,o=e.holes.length;t<o;t++){const i=e.holes[t];this.holes.push(new vy().fromJSON(i))}return this}}const cj={triangulate:function(r,e,t=2){const o=e&&e.length,i=o?e[0]*t:r.length;let l=R2(r,0,i,t,!0);const a=[];if(!l||l.next===l.prev)return a;let c,p,h,f,_,m,v;if(o&&(l=fj(r,e,l,t)),r.length>80*t){c=h=r[0],p=f=r[1];for(let x=t;x<i;x+=t)_=r[x],m=r[x+1],_<c&&(c=_),m<p&&(p=m),_>h&&(h=_),m>f&&(f=m);v=Math.max(h-c,f-p),v=v!==0?1/v:0}return Ty(l,a,t,c,p,v),a}};function R2(r,e,t,o,i){let l,a;if(i===bj(r,e,t,o)>0)for(l=e;l<t;l+=o)a=Q1(l,r[l],r[l+1],a);else for(l=t-o;l>=e;l-=o)a=Q1(l,r[l],r[l+1],a);return a&&uS(a,a.next)&&(xy(a),a=a.next),a}function gh(r,e){if(!r)return r;e||(e=r);let t=r,o;do if(o=!1,!t.steiner&&(uS(t,t.next)||Ho(t.prev,t,t.next)===0)){if(xy(t),t=e=t.prev,t===t.next)break;o=!0}else t=t.next;while(o||t!==e);return e}function Ty(r,e,t,o,i,l,a){if(!r)return;!a&&l&&vj(r,o,i,l);let c=r,p,h;for(;r.prev!==r.next;){if(p=r.prev,h=r.next,l?hj(r,o,i,l):uj(r)){e.push(p.i/t),e.push(r.i/t),e.push(h.i/t),xy(r),r=h.next,c=h.next;continue}if(r=h,r===c){a?a===1?(r=pj(gh(r),e,t),Ty(r,e,t,o,i,l,2)):a===2&&dj(r,e,t,o,i,l):Ty(gh(r),e,t,o,i,l,1);break}}}function uj(r){const e=r.prev,t=r,o=r.next;if(Ho(e,t,o)>=0)return!1;let i=r.next.next;for(;i!==r.prev;){if(If(e.x,e.y,t.x,t.y,o.x,o.y,i.x,i.y)&&Ho(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function hj(r,e,t,o){const i=r.prev,l=r,a=r.next;if(Ho(i,l,a)>=0)return!1;const c=i.x<l.x?i.x<a.x?i.x:a.x:l.x<a.x?l.x:a.x,p=i.y<l.y?i.y<a.y?i.y:a.y:l.y<a.y?l.y:a.y,h=i.x>l.x?i.x>a.x?i.x:a.x:l.x>a.x?l.x:a.x,f=i.y>l.y?i.y>a.y?i.y:a.y:l.y>a.y?l.y:a.y,_=LA(c,p,e,t,o),m=LA(h,f,e,t,o);let v=r.prevZ,x=r.nextZ;for(;v&&v.z>=_&&x&&x.z<=m;){if(v!==r.prev&&v!==r.next&&If(i.x,i.y,l.x,l.y,a.x,a.y,v.x,v.y)&&Ho(v.prev,v,v.next)>=0||(v=v.prevZ,x!==r.prev&&x!==r.next&&If(i.x,i.y,l.x,l.y,a.x,a.y,x.x,x.y)&&Ho(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;v&&v.z>=_;){if(v!==r.prev&&v!==r.next&&If(i.x,i.y,l.x,l.y,a.x,a.y,v.x,v.y)&&Ho(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=m;){if(x!==r.prev&&x!==r.next&&If(i.x,i.y,l.x,l.y,a.x,a.y,x.x,x.y)&&Ho(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function pj(r,e,t){let o=r;do{const i=o.prev,l=o.next.next;!uS(i,l)&&B2(i,o,o.next,l)&&Ey(i,l)&&Ey(l,i)&&(e.push(i.i/t),e.push(o.i/t),e.push(l.i/t),xy(o),xy(o.next),o=r=l),o=o.next}while(o!==r);return gh(o)}function dj(r,e,t,o,i,l){let a=r;do{let c=a.next.next;for(;c!==a.prev;){if(a.i!==c.i&&xj(a,c)){let p=I2(a,c);a=gh(a,a.next),p=gh(p,p.next),Ty(a,e,t,o,i,l),Ty(p,e,t,o,i,l);return}c=c.next}a=a.next}while(a!==r)}function fj(r,e,t,o){const i=[];let l,a,c,p,h;for(l=0,a=e.length;l<a;l++)c=e[l]*o,p=l<a-1?e[l+1]*o:r.length,h=R2(r,c,p,o,!1),h===h.next&&(h.steiner=!0),i.push(Ej(h));for(i.sort(mj),l=0;l<i.length;l++)gj(i[l],t),t=gh(t,t.next);return t}function mj(r,e){return r.x-e.x}function gj(r,e){if(e=_j(r,e),e){const t=I2(e,r);gh(e,e.next),gh(t,t.next)}}function _j(r,e){let t=e;const o=r.x,i=r.y;let l=-1/0,a;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const m=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=o&&m>l){if(l=m,m===o){if(i===t.y)return t;if(i===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(o===l)return a;const c=a,p=a.x,h=a.y;let f=1/0,_;t=a;do o>=t.x&&t.x>=p&&o!==t.x&&If(i<h?o:l,i,p,h,i<h?l:o,i,t.x,t.y)&&(_=Math.abs(i-t.y)/(o-t.x),Ey(t,r)&&(_<f||_===f&&(t.x>a.x||t.x===a.x&&yj(a,t)))&&(a=t,f=_)),t=t.next;while(t!==c);return a}function yj(r,e){return Ho(r.prev,r,e.prev)<0&&Ho(e.next,r,r.next)<0}function vj(r,e,t,o){let i=r;do i.z===null&&(i.z=LA(i.x,i.y,e,t,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,Tj(i)}function Tj(r){let e,t,o,i,l,a,c,p,h=1;do{for(t=r,r=null,l=null,a=0;t;){for(a++,o=t,c=0,e=0;e<h&&(c++,o=o.nextZ,!!o);e++);for(p=h;c>0||p>0&&o;)c!==0&&(p===0||!o||t.z<=o.z)?(i=t,t=t.nextZ,c--):(i=o,o=o.nextZ,p--),l?l.nextZ=i:r=i,i.prevZ=l,l=i;t=o}l.nextZ=null,h*=2}while(a>1);return r}function LA(r,e,t,o,i){return r=32767*(r-t)*i,e=32767*(e-o)*i,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function Ej(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function If(r,e,t,o,i,l,a,c){return(i-a)*(e-c)-(r-a)*(l-c)>=0&&(r-a)*(o-c)-(t-a)*(e-c)>=0&&(t-a)*(l-c)-(i-a)*(o-c)>=0}function xj(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!Sj(r,e)&&(Ey(r,e)&&Ey(e,r)&&Cj(r,e)&&(Ho(r.prev,r,e.prev)||Ho(r,e.prev,e))||uS(r,e)&&Ho(r.prev,r,r.next)>0&&Ho(e.prev,e,e.next)>0)}function Ho(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function uS(r,e){return r.x===e.x&&r.y===e.y}function B2(r,e,t,o){const i=d0(Ho(r,e,t)),l=d0(Ho(r,e,o)),a=d0(Ho(t,o,r)),c=d0(Ho(t,o,e));return!!(i!==l&&a!==c||i===0&&p0(r,t,e)||l===0&&p0(r,o,e)||a===0&&p0(t,r,o)||c===0&&p0(t,e,o))}function p0(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function d0(r){return r>0?1:r<0?-1:0}function Sj(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&B2(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Ey(r,e){return Ho(r.prev,r,r.next)<0?Ho(r,e,r.next)>=0&&Ho(r,r.prev,e)>=0:Ho(r,e,r.prev)<0||Ho(r,r.next,e)<0}function Cj(r,e){let t=r,o=!1;const i=(r.x+e.x)/2,l=(r.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&i<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(o=!o),t=t.next;while(t!==r);return o}function I2(r,e){const t=new NA(r.i,r.x,r.y),o=new NA(e.i,e.x,e.y),i=r.next,l=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,o.next=t,t.prev=o,l.next=o,o.prev=l,o}function Q1(r,e,t,o){const i=new NA(r,e,t);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function xy(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function NA(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bj(r,e,t,o){let i=0;for(let l=e,a=t-o;l<t;l+=o)i+=(r[a]-r[l])*(r[l+1]+r[a+1]),a=l;return i}class Ya{static area(e){const t=e.length;let o=0;for(let i=t-1,l=0;l<t;i=l++)o+=e[i].x*e[l].y-e[l].x*e[i].y;return o*.5}static isClockWise(e){return Ya.area(e)<0}static triangulateShape(e,t){const o=[],i=[],l=[];Z1(e),eO(o,e);let a=e.length;t.forEach(Z1);for(let p=0;p<t.length;p++)i.push(a),a+=t[p].length,eO(o,t[p]);const c=cj.triangulate(o,i);for(let p=0;p<c.length;p+=3)l.push(c.slice(p,p+3));return l}}function Z1(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function eO(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class rc extends Ut{constructor(e=new ra([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const o=this,i=[],l=[];for(let c=0,p=e.length;c<p;c++){const h=e[c];a(h)}this.setAttribute("position",new Mt(i,3)),this.setAttribute("uv",new Mt(l,2)),this.computeVertexNormals();function a(c){const p=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1;let _=t.depth!==void 0?t.depth:1,m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:v-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const k=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:kj;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),_=t.amount);let M,R=!1,I,L,F,U;k&&(M=k.getSpacedPoints(f),R=!0,m=!1,I=k.computeFrenetFrames(f,!1),L=new Y,F=new Y,U=new Y),m||(A=0,v=0,x=0,b=0);const X=c.extractPoints(h);let j=X.shape;const P=X.holes;if(!Ya.isClockWise(j)){j=j.reverse();for(let Re=0,Te=P.length;Re<Te;Re++){const Le=P[Re];Ya.isClockWise(Le)&&(P[Re]=Le.reverse())}}const K=Ya.triangulateShape(j,P),te=j;for(let Re=0,Te=P.length;Re<Te;Re++){const Le=P[Re];j=j.concat(Le)}function oe(Re,Te,Le){return Te||console.error("THREE.ExtrudeGeometry: vec does not exist"),Te.clone().multiplyScalar(Le).add(Re)}const ee=j.length,pe=K.length;function ae(Re,Te,Le){let Ke,Ne,qe;const lt=Re.x-Te.x,ue=Re.y-Te.y,rt=Le.x-Re.x,xt=Le.y-Re.y,ie=lt*lt+ue*ue,Z=lt*xt-ue*rt;if(Math.abs(Z)>Number.EPSILON){const B=Math.sqrt(ie),Ae=Math.sqrt(rt*rt+xt*xt),Ue=Te.x-ue/B,ge=Te.y+lt/B,_e=Le.x-xt/Ae,ke=Le.y+rt/Ae,me=((_e-Ue)*xt-(ke-ge)*rt)/(lt*xt-ue*rt);Ke=Ue+lt*me-Re.x,Ne=ge+ue*me-Re.y;const Ce=Ke*Ke+Ne*Ne;if(Ce<=2)return new Ve(Ke,Ne);qe=Math.sqrt(Ce/2)}else{let B=!1;lt>Number.EPSILON?rt>Number.EPSILON&&(B=!0):lt<-Number.EPSILON?rt<-Number.EPSILON&&(B=!0):Math.sign(ue)===Math.sign(xt)&&(B=!0),B?(Ke=-ue,Ne=lt,qe=Math.sqrt(ie)):(Ke=lt,Ne=ue,qe=Math.sqrt(ie/2))}return new Ve(Ke/qe,Ne/qe)}const Ee=[];for(let Re=0,Te=te.length,Le=Te-1,Ke=Re+1;Re<Te;Re++,Le++,Ke++)Le===Te&&(Le=0),Ke===Te&&(Ke=0),Ee[Re]=ae(te[Re],te[Le],te[Ke]);const S=[];let D,H=Ee.concat();for(let Re=0,Te=P.length;Re<Te;Re++){const Le=P[Re];D=[];for(let Ke=0,Ne=Le.length,qe=Ne-1,lt=Ke+1;Ke<Ne;Ke++,qe++,lt++)qe===Ne&&(qe=0),lt===Ne&&(lt=0),D[Ke]=ae(Le[Ke],Le[qe],Le[lt]);S.push(D),H=H.concat(D)}for(let Re=0;Re<A;Re++){const Te=Re/A,Le=v*Math.cos(Te*Math.PI/2),Ke=x*Math.sin(Te*Math.PI/2)+b;for(let Ne=0,qe=te.length;Ne<qe;Ne++){const lt=oe(te[Ne],Ee[Ne],Ke);We(lt.x,lt.y,-Le)}for(let Ne=0,qe=P.length;Ne<qe;Ne++){const lt=P[Ne];D=S[Ne];for(let ue=0,rt=lt.length;ue<rt;ue++){const xt=oe(lt[ue],D[ue],Ke);We(xt.x,xt.y,-Le)}}}const q=x+b;for(let Re=0;Re<ee;Re++){const Te=m?oe(j[Re],H[Re],q):j[Re];R?(F.copy(I.normals[0]).multiplyScalar(Te.x),L.copy(I.binormals[0]).multiplyScalar(Te.y),U.copy(M[0]).add(F).add(L),We(U.x,U.y,U.z)):We(Te.x,Te.y,0)}for(let Re=1;Re<=f;Re++)for(let Te=0;Te<ee;Te++){const Le=m?oe(j[Te],H[Te],q):j[Te];R?(F.copy(I.normals[Re]).multiplyScalar(Le.x),L.copy(I.binormals[Re]).multiplyScalar(Le.y),U.copy(M[Re]).add(F).add(L),We(U.x,U.y,U.z)):We(Le.x,Le.y,_/f*Re)}for(let Re=A-1;Re>=0;Re--){const Te=Re/A,Le=v*Math.cos(Te*Math.PI/2),Ke=x*Math.sin(Te*Math.PI/2)+b;for(let Ne=0,qe=te.length;Ne<qe;Ne++){const lt=oe(te[Ne],Ee[Ne],Ke);We(lt.x,lt.y,_+Le)}for(let Ne=0,qe=P.length;Ne<qe;Ne++){const lt=P[Ne];D=S[Ne];for(let ue=0,rt=lt.length;ue<rt;ue++){const xt=oe(lt[ue],D[ue],Ke);R?We(xt.x,xt.y+M[f-1].y,M[f-1].x+Le):We(xt.x,xt.y,_+Le)}}}Q(),de();function Q(){const Re=i.length/3;if(m){let Te=0,Le=ee*Te;for(let Ke=0;Ke<pe;Ke++){const Ne=K[Ke];ze(Ne[2]+Le,Ne[1]+Le,Ne[0]+Le)}Te=f+A*2,Le=ee*Te;for(let Ke=0;Ke<pe;Ke++){const Ne=K[Ke];ze(Ne[0]+Le,Ne[1]+Le,Ne[2]+Le)}}else{for(let Te=0;Te<pe;Te++){const Le=K[Te];ze(Le[2],Le[1],Le[0])}for(let Te=0;Te<pe;Te++){const Le=K[Te];ze(Le[0]+ee*f,Le[1]+ee*f,Le[2]+ee*f)}}o.addGroup(Re,i.length/3-Re,0)}function de(){const Re=i.length/3;let Te=0;je(te,Te),Te+=te.length;for(let Le=0,Ke=P.length;Le<Ke;Le++){const Ne=P[Le];je(Ne,Te),Te+=Ne.length}o.addGroup(Re,i.length/3-Re,1)}function je(Re,Te){let Le=Re.length;for(;--Le>=0;){const Ke=Le;let Ne=Le-1;Ne<0&&(Ne=Re.length-1);for(let qe=0,lt=f+A*2;qe<lt;qe++){const ue=ee*qe,rt=ee*(qe+1),xt=Te+Ke+ue,ie=Te+Ne+ue,Z=Te+Ne+rt,B=Te+Ke+rt;Oe(xt,ie,Z,B)}}}function We(Re,Te,Le){p.push(Re),p.push(Te),p.push(Le)}function ze(Re,Te,Le){Ye(Re),Ye(Te),Ye(Le);const Ke=i.length/3,Ne=E.generateTopUV(o,i,Ke-3,Ke-2,Ke-1);et(Ne[0]),et(Ne[1]),et(Ne[2])}function Oe(Re,Te,Le,Ke){Ye(Re),Ye(Te),Ye(Ke),Ye(Te),Ye(Le),Ye(Ke);const Ne=i.length/3,qe=E.generateSideWallUV(o,i,Ne-6,Ne-3,Ne-2,Ne-1);et(qe[0]),et(qe[1]),et(qe[3]),et(qe[1]),et(qe[2]),et(qe[3])}function Ye(Re){i.push(p[Re*3+0]),i.push(p[Re*3+1]),i.push(p[Re*3+2])}function et(Re){l.push(Re.x),l.push(Re.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,o=this.parameters.options;return Aj(t,o,e)}static fromJSON(e,t){const o=[];for(let l=0,a=e.shapes.length;l<a;l++){const c=t[e.shapes[l]];o.push(c)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new LM[i.type]().fromJSON(i)),new rc(o,e.options)}}const kj={generateTopUV:function(r,e,t,o,i){const l=e[t*3],a=e[t*3+1],c=e[o*3],p=e[o*3+1],h=e[i*3],f=e[i*3+1];return[new Ve(l,a),new Ve(c,p),new Ve(h,f)]},generateSideWallUV:function(r,e,t,o,i,l){const a=e[t*3],c=e[t*3+1],p=e[t*3+2],h=e[o*3],f=e[o*3+1],_=e[o*3+2],m=e[i*3],v=e[i*3+1],x=e[i*3+2],b=e[l*3],A=e[l*3+1],k=e[l*3+2];return Math.abs(c-f)<Math.abs(a-h)?[new Ve(a,1-p),new Ve(h,1-_),new Ve(m,1-x),new Ve(b,1-k)]:[new Ve(c,1-p),new Ve(f,1-_),new Ve(v,1-x),new Ve(A,1-k)]}};function Aj(r,e,t){if(t.shapes=[],Array.isArray(r))for(let o=0,i=r.length;o<i;o++){const l=r[o];t.shapes.push(l.uuid)}else t.shapes.push(r.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class gm extends oc{constructor(e=1,t=0){const o=(1+Math.sqrt(5))/2,i=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,l,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gm(e.radius,e.detail)}}class _m extends Ut{constructor(e=[new Ve(0,.5),new Ve(.5,0),new Ve(0,-.5)],t=12,o=0,i=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:o,phiLength:i},t=Math.floor(t),i=pi(i,0,Math.PI*2);const l=[],a=[],c=[],p=[],h=[],f=1/t,_=new Y,m=new Ve,v=new Y,x=new Y,b=new Y;let A=0,k=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:A=e[E+1].x-e[E].x,k=e[E+1].y-e[E].y,v.x=k*1,v.y=-A,v.z=k*0,b.copy(v),v.normalize(),p.push(v.x,v.y,v.z);break;case e.length-1:p.push(b.x,b.y,b.z);break;default:A=e[E+1].x-e[E].x,k=e[E+1].y-e[E].y,v.x=k*1,v.y=-A,v.z=k*0,x.copy(v),v.x+=b.x,v.y+=b.y,v.z+=b.z,v.normalize(),p.push(v.x,v.y,v.z),b.copy(x)}for(let E=0;E<=t;E++){const M=o+E*f*i,R=Math.sin(M),I=Math.cos(M);for(let L=0;L<=e.length-1;L++){_.x=e[L].x*R,_.y=e[L].y,_.z=e[L].x*I,a.push(_.x,_.y,_.z),m.x=E/t,m.y=L/(e.length-1),c.push(m.x,m.y);const F=p[3*L+0]*R,U=p[3*L+1],X=p[3*L+0]*I;h.push(F,U,X)}}for(let E=0;E<t;E++)for(let M=0;M<e.length-1;M++){const R=M+E*e.length,I=R,L=R+e.length,F=R+e.length+1,U=R+1;l.push(I,L,U),l.push(F,U,L)}this.setIndex(l),this.setAttribute("position",new Mt(a,3)),this.setAttribute("uv",new Mt(c,2)),this.setAttribute("normal",new Mt(h,3))}static fromJSON(e){return new _m(e.points,e.segments,e.phiStart,e.phiLength)}}class Kp extends oc{constructor(e=1,t=0){const o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(o,i,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Kp(e.radius,e.detail)}}class ym extends Ut{constructor(e=.5,t=1,o=8,i=1,l=0,a=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:o,phiSegments:i,thetaStart:l,thetaLength:a},o=Math.max(3,o),i=Math.max(1,i);const c=[],p=[],h=[],f=[];let _=e;const m=(t-e)/i,v=new Y,x=new Ve;for(let b=0;b<=i;b++){for(let A=0;A<=o;A++){const k=l+A/o*a;v.x=_*Math.cos(k),v.y=_*Math.sin(k),p.push(v.x,v.y,v.z),h.push(0,0,1),x.x=(v.x/t+1)/2,x.y=(v.y/t+1)/2,f.push(x.x,x.y)}_+=m}for(let b=0;b<i;b++){const A=b*(o+1);for(let k=0;k<o;k++){const E=k+A,M=E,R=E+o+1,I=E+o+2,L=E+1;c.push(M,R,L),c.push(R,I,L)}}this.setIndex(c),this.setAttribute("position",new Mt(p,3)),this.setAttribute("normal",new Mt(h,3)),this.setAttribute("uv",new Mt(f,2))}static fromJSON(e){return new ym(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Yp extends Ut{constructor(e=new ra([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const o=[],i=[],l=[],a=[];let c=0,p=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(c,p,f),c+=p,p=0;this.setIndex(o),this.setAttribute("position",new Mt(i,3)),this.setAttribute("normal",new Mt(l,3)),this.setAttribute("uv",new Mt(a,2));function h(f){const _=i.length/3,m=f.extractPoints(t);let v=m.shape;const x=m.holes;Ya.isClockWise(v)===!1&&(v=v.reverse());for(let A=0,k=x.length;A<k;A++){const E=x[A];Ya.isClockWise(E)===!0&&(x[A]=E.reverse())}const b=Ya.triangulateShape(v,x);for(let A=0,k=x.length;A<k;A++){const E=x[A];v=v.concat(E)}for(let A=0,k=v.length;A<k;A++){const E=v[A];i.push(E.x,E.y,0),l.push(0,0,1),a.push(E.x,E.y)}for(let A=0,k=b.length;A<k;A++){const E=b[A],M=E[0]+_,R=E[1]+_,I=E[2]+_;o.push(M,R,I),p+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return wj(t,e)}static fromJSON(e,t){const o=[];for(let i=0,l=e.shapes.length;i<l;i++){const a=t[e.shapes[i]];o.push(a)}return new Yp(o,e.curveSegments)}}function wj(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,o=r.length;t<o;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class qp extends Ut{constructor(e=1,t=32,o=16,i=0,l=Math.PI*2,a=0,c=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:o,phiStart:i,phiLength:l,thetaStart:a,thetaLength:c},t=Math.max(3,Math.floor(t)),o=Math.max(2,Math.floor(o));const p=Math.min(a+c,Math.PI);let h=0;const f=[],_=new Y,m=new Y,v=[],x=[],b=[],A=[];for(let k=0;k<=o;k++){const E=[],M=k/o;let R=0;k==0&&a==0?R=.5/t:k==o&&p==Math.PI&&(R=-.5/t);for(let I=0;I<=t;I++){const L=I/t;_.x=-e*Math.cos(i+L*l)*Math.sin(a+M*c),_.y=e*Math.cos(a+M*c),_.z=e*Math.sin(i+L*l)*Math.sin(a+M*c),x.push(_.x,_.y,_.z),m.copy(_).normalize(),b.push(m.x,m.y,m.z),A.push(L+R,1-M),E.push(h++)}f.push(E)}for(let k=0;k<o;k++)for(let E=0;E<t;E++){const M=f[k][E+1],R=f[k][E],I=f[k+1][E],L=f[k+1][E+1];(k!==0||a>0)&&v.push(M,R,L),(k!==o-1||p<Math.PI)&&v.push(R,I,L)}this.setIndex(v),this.setAttribute("position",new Mt(x,3)),this.setAttribute("normal",new Mt(b,3)),this.setAttribute("uv",new Mt(A,2))}static fromJSON(e){return new qp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class vm extends oc{constructor(e=1,t=0){const o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(o,i,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vm(e.radius,e.detail)}}class Tm extends Ut{constructor(e=1,t=.4,o=8,i=6,l=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:o,tubularSegments:i,arc:l},o=Math.floor(o),i=Math.floor(i);const a=[],c=[],p=[],h=[],f=new Y,_=new Y,m=new Y;for(let v=0;v<=o;v++)for(let x=0;x<=i;x++){const b=x/i*l,A=v/o*Math.PI*2;_.x=(e+t*Math.cos(A))*Math.cos(b),_.y=(e+t*Math.cos(A))*Math.sin(b),_.z=t*Math.sin(A),c.push(_.x,_.y,_.z),f.x=e*Math.cos(b),f.y=e*Math.sin(b),m.subVectors(_,f).normalize(),p.push(m.x,m.y,m.z),h.push(x/i),h.push(v/o)}for(let v=1;v<=o;v++)for(let x=1;x<=i;x++){const b=(i+1)*v+x-1,A=(i+1)*(v-1)+x-1,k=(i+1)*(v-1)+x,E=(i+1)*v+x;a.push(b,A,E),a.push(A,k,E)}this.setIndex(a),this.setAttribute("position",new Mt(c,3)),this.setAttribute("normal",new Mt(p,3)),this.setAttribute("uv",new Mt(h,2))}static fromJSON(e){return new Tm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Em extends Ut{constructor(e=1,t=.4,o=64,i=8,l=2,a=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:o,radialSegments:i,p:l,q:a},o=Math.floor(o),i=Math.floor(i);const c=[],p=[],h=[],f=[],_=new Y,m=new Y,v=new Y,x=new Y,b=new Y,A=new Y,k=new Y;for(let M=0;M<=o;++M){const R=M/o*l*Math.PI*2;E(R,l,a,e,v),E(R+.01,l,a,e,x),A.subVectors(x,v),k.addVectors(x,v),b.crossVectors(A,k),k.crossVectors(b,A),b.normalize(),k.normalize();for(let I=0;I<=i;++I){const L=I/i*Math.PI*2,F=-t*Math.cos(L),U=t*Math.sin(L);_.x=v.x+(F*k.x+U*b.x),_.y=v.y+(F*k.y+U*b.y),_.z=v.z+(F*k.z+U*b.z),p.push(_.x,_.y,_.z),m.subVectors(_,v).normalize(),h.push(m.x,m.y,m.z),f.push(M/o),f.push(I/i)}}for(let M=1;M<=o;M++)for(let R=1;R<=i;R++){const I=(i+1)*(M-1)+(R-1),L=(i+1)*M+(R-1),F=(i+1)*M+R,U=(i+1)*(M-1)+R;c.push(I,L,U),c.push(L,F,U)}this.setIndex(c),this.setAttribute("position",new Mt(p,3)),this.setAttribute("normal",new Mt(h,3)),this.setAttribute("uv",new Mt(f,2));function E(M,R,I,L,F){const U=Math.cos(M),X=Math.sin(M),j=I/R*M,P=Math.cos(j);F.x=L*(2+P)*.5*U,F.y=L*(2+P)*X*.5,F.z=L*Math.sin(j)*.5}}static fromJSON(e){return new Em(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class xm extends Ut{constructor(e=new aS(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,o=1,i=8,l=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:o,radialSegments:i,closed:l};const a=e.computeFrenetFrames(t,l);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const c=new Y,p=new Y,h=new Ve;let f=new Y;const _=[],m=[],v=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new Mt(_,3)),this.setAttribute("normal",new Mt(m,3)),this.setAttribute("uv",new Mt(v,2));function b(){for(let M=0;M<t;M++)A(M);A(l===!1?t:0),E(),k()}function A(M){f=e.getPointAt(M/t,f);const R=a.normals[M],I=a.binormals[M];for(let L=0;L<=i;L++){const F=L/i*Math.PI*2,U=Math.sin(F),X=-Math.cos(F);p.x=X*R.x+U*I.x,p.y=X*R.y+U*I.y,p.z=X*R.z+U*I.z,p.normalize(),m.push(p.x,p.y,p.z),c.x=f.x+o*p.x,c.y=f.y+o*p.y,c.z=f.z+o*p.z,_.push(c.x,c.y,c.z)}}function k(){for(let M=1;M<=t;M++)for(let R=1;R<=i;R++){const I=(i+1)*(M-1)+(R-1),L=(i+1)*M+(R-1),F=(i+1)*M+R,U=(i+1)*(M-1)+R;x.push(I,L,U),x.push(L,F,U)}}function E(){for(let M=0;M<=t;M++)for(let R=0;R<=i;R++)h.x=M/t,h.y=R/i,v.push(h.x,h.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new xm(new LM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class hS extends Ut{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],o=new Set,i=new Y,l=new Y;if(e.index!==null){const a=e.attributes.position,c=e.index;let p=e.groups;p.length===0&&(p=[{start:0,count:c.count,materialIndex:0}]);for(let h=0,f=p.length;h<f;++h){const _=p[h],m=_.start,v=_.count;for(let x=m,b=m+v;x<b;x+=3)for(let A=0;A<3;A++){const k=c.getX(x+A),E=c.getX(x+(A+1)%3);i.fromBufferAttribute(a,k),l.fromBufferAttribute(a,E),tO(i,l,o)===!0&&(t.push(i.x,i.y,i.z),t.push(l.x,l.y,l.z))}}}else{const a=e.attributes.position;for(let c=0,p=a.count/3;c<p;c++)for(let h=0;h<3;h++){const f=3*c+h,_=3*c+(h+1)%3;i.fromBufferAttribute(a,f),l.fromBufferAttribute(a,_),tO(i,l,o)===!0&&(t.push(i.x,i.y,i.z),t.push(l.x,l.y,l.z))}}this.setAttribute("position",new Mt(t,3))}}}function tO(r,e,t){const o=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(o)===!0||t.has(i)===!0?!1:(t.add(o,i),!0)}var nO=Object.freeze({__proto__:null,BoxGeometry:Jc,BoxBufferGeometry:Jc,CircleGeometry:dm,CircleBufferGeometry:dm,ConeGeometry:fm,ConeBufferGeometry:fm,CylinderGeometry:mh,CylinderBufferGeometry:mh,DodecahedronGeometry:mm,DodecahedronBufferGeometry:mm,EdgesGeometry:RM,ExtrudeGeometry:rc,ExtrudeBufferGeometry:rc,IcosahedronGeometry:gm,IcosahedronBufferGeometry:gm,LatheGeometry:_m,LatheBufferGeometry:_m,OctahedronGeometry:Kp,OctahedronBufferGeometry:Kp,PlaneGeometry:jp,PlaneBufferGeometry:jp,PolyhedronGeometry:oc,PolyhedronBufferGeometry:oc,RingGeometry:ym,RingBufferGeometry:ym,ShapeGeometry:Yp,ShapeBufferGeometry:Yp,SphereGeometry:qp,SphereBufferGeometry:qp,TetrahedronGeometry:vm,TetrahedronBufferGeometry:vm,TorusGeometry:Tm,TorusBufferGeometry:Tm,TorusKnotGeometry:Em,TorusKnotBufferGeometry:Em,TubeGeometry:xm,TubeBufferGeometry:xm,WireframeGeometry:hS});class NM extends dr{constructor(e){super();this.type="ShadowMaterial",this.color=new tt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}NM.prototype.isShadowMaterial=!0;class cd extends dr{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}cd.prototype.isMeshStandardMaterial=!0;class ou extends cd{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new tt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}ou.prototype.isMeshPhysicalMaterial=!0;class $M extends dr{constructor(e){super();this.type="MeshPhongMaterial",this.color=new tt(16777215),this.specular=new tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ev,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}$M.prototype.isMeshPhongMaterial=!0;class PM extends dr{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}PM.prototype.isMeshToonMaterial=!0;class FM extends dr{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}FM.prototype.isMeshNormalMaterial=!0;class UM extends dr{constructor(e){super();this.type="MeshLambertMaterial",this.color=new tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ev,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}UM.prototype.isMeshLambertMaterial=!0;class HM extends dr{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bh,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}HM.prototype.isMeshMatcapMaterial=!0;class GM extends Lr{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}GM.prototype.isLineDashedMaterial=!0;var Mj=Object.freeze({__proto__:null,ShadowMaterial:NM,SpriteMaterial:oS,RawShaderMaterial:Vm,ShaderMaterial:tc,PointsMaterial:Mh,MeshPhysicalMaterial:ou,MeshStandardMaterial:cd,MeshPhongMaterial:$M,MeshToonMaterial:PM,MeshNormalMaterial:FM,MeshLambertMaterial:UM,MeshDepthMaterial:tS,MeshDistanceMaterial:nS,MeshBasicMaterial:Es,MeshMatcapMaterial:HM,LineDashedMaterial:GM,LineBasicMaterial:Lr,Material:dr});const xo={arraySlice:function(r,e,t){return xo.isTypedArray(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)},convertArray:function(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(r){function e(i,l){return r[i]-r[l]}const t=r.length,o=new Array(t);for(let i=0;i!==t;++i)o[i]=i;return o.sort(e),o},sortedArray:function(r,e,t){const o=r.length,i=new r.constructor(o);for(let l=0,a=0;a!==o;++l){const c=t[l]*e;for(let p=0;p!==e;++p)i[a++]=r[c+p]}return i},flattenJSON:function(r,e,t,o){let i=1,l=r[0];for(;l!==void 0&&l[o]===void 0;)l=r[i++];if(l===void 0)return;let a=l[o];if(a!==void 0)if(Array.isArray(a))do a=l[o],a!==void 0&&(e.push(l.time),t.push.apply(t,a)),l=r[i++];while(l!==void 0);else if(a.toArray!==void 0)do a=l[o],a!==void 0&&(e.push(l.time),a.toArray(t,t.length)),l=r[i++];while(l!==void 0);else do a=l[o],a!==void 0&&(e.push(l.time),t.push(a)),l=r[i++];while(l!==void 0)},subclip:function(r,e,t,o,i=30){const l=r.clone();l.name=e;const a=[];for(let p=0;p<l.tracks.length;++p){const h=l.tracks[p],f=h.getValueSize(),_=[],m=[];for(let v=0;v<h.times.length;++v){const x=h.times[v]*i;if(!(x<t||x>=o)){_.push(h.times[v]);for(let b=0;b<f;++b)m.push(h.values[v*f+b])}}_.length!==0&&(h.times=xo.convertArray(_,h.times.constructor),h.values=xo.convertArray(m,h.values.constructor),a.push(h))}l.tracks=a;let c=1/0;for(let p=0;p<l.tracks.length;++p)c>l.tracks[p].times[0]&&(c=l.tracks[p].times[0]);for(let p=0;p<l.tracks.length;++p)l.tracks[p].shift(-1*c);return l.resetDuration(),l},makeClipAdditive:function(r,e=0,t=r,o=30){o<=0&&(o=30);const i=t.tracks.length,l=e/o;for(let a=0;a<i;++a){const c=t.tracks[a],p=c.ValueTypeName;if(p==="bool"||p==="string")continue;const h=r.tracks.find(function(k){return k.name===c.name&&k.ValueTypeName===p});if(h===void 0)continue;let f=0;const _=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=_/3);let m=0;const v=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const x=c.times.length-1;let b;if(l<=c.times[0]){const k=f,E=_-f;b=xo.arraySlice(c.values,k,E)}else if(l>=c.times[x]){const k=x*_+f,E=k+_-f;b=xo.arraySlice(c.values,k,E)}else{const k=c.createInterpolant(),E=f,M=_-f;k.evaluate(l),b=xo.arraySlice(k.resultBuffer,E,M)}p==="quaternion"&&new rr().fromArray(b).normalize().conjugate().toArray(b);const A=h.times.length;for(let k=0;k<A;++k){const E=k*v+m;if(p==="quaternion")rr.multiplyQuaternionsFlat(h.values,E,b,0,h.values,E);else{const M=v-m*2;for(let R=0;R<M;++R)h.values[E+R]-=b[R]}}}return r.blendMode=EM,r}};class ic{constructor(e,t,o,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(o),this.sampleValues=t,this.valueSize=o,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let o=this._cachedIndex,i=t[o],l=t[o-1];e:{t:{let a;n:{o:if(!(e<i)){for(let c=o+2;;){if(i===void 0){if(e<l)break o;return o=t.length,this._cachedIndex=o,this.afterEnd_(o-1,e,l)}if(o===c)break;if(l=i,i=t[++o],e<i)break t}a=t.length;break n}if(!(e>=l)){const c=t[1];e<c&&(o=2,l=c);for(let p=o-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(o===p)break;if(i=l,l=t[--o-1],e>=l)break t}a=o,o=0;break n}break e}for(;o<a;){const c=o+a>>>1;e<t[c]?a=c:o=c+1}if(i=t[o],l=t[o-1],l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return o=t.length,this._cachedIndex=o,this.afterEnd_(o-1,l,e)}this._cachedIndex=o,this.intervalChanged_(o,l,i)}return this.interpolate_(o,l,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,o=this.sampleValues,i=this.valueSize,l=e*i;for(let a=0;a!==i;++a)t[a]=o[l+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}ic.prototype.beforeStart_=ic.prototype.copySampleValue_;ic.prototype.afterEnd_=ic.prototype.copySampleValue_;class O2 extends ic{constructor(e,t,o,i){super(e,t,o,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bp,endingEnd:bp}}intervalChanged_(e,t,o){const i=this.parameterPositions;let l=e-2,a=e+1,c=i[l],p=i[a];if(c===void 0)switch(this.getSettings_().endingStart){case kp:l=e,c=2*t-o;break;case gy:l=i.length-2,c=t+i[l]-i[l+1];break;default:l=e,c=o}if(p===void 0)switch(this.getSettings_().endingEnd){case kp:a=e,p=2*o-t;break;case gy:a=1,p=o+i[1]-i[0];break;default:a=e-1,p=t}const h=(o-t)*.5,f=this.valueSize;this._weightPrev=h/(t-c),this._weightNext=h/(p-o),this._offsetPrev=l*f,this._offsetNext=a*f}interpolate_(e,t,o,i){const l=this.resultBuffer,a=this.sampleValues,c=this.valueSize,p=e*c,h=p-c,f=this._offsetPrev,_=this._offsetNext,m=this._weightPrev,v=this._weightNext,x=(o-t)/(i-t),b=x*x,A=b*x,k=-m*A+2*m*b-m*x,E=(1+m)*A+(-1.5-2*m)*b+(-.5+m)*x+1,M=(-1-v)*A+(1.5+v)*b+.5*x,R=v*A-v*b;for(let I=0;I!==c;++I)l[I]=k*a[f+I]+E*a[h+I]+M*a[p+I]+R*a[_+I];return l}}class VM extends ic{constructor(e,t,o,i){super(e,t,o,i)}interpolate_(e,t,o,i){const l=this.resultBuffer,a=this.sampleValues,c=this.valueSize,p=e*c,h=p-c,f=(o-t)/(i-t),_=1-f;for(let m=0;m!==c;++m)l[m]=a[h+m]*_+a[p+m]*f;return l}}class D2 extends ic{constructor(e,t,o,i){super(e,t,o,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ca{constructor(e,t,o,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xo.convertArray(t,this.TimeBufferType),this.values=xo.convertArray(o,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let o;if(t.toJSON!==this.toJSON)o=t.toJSON(e);else{o={name:e.name,times:xo.convertArray(e.times,Array),values:xo.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(o.interpolation=i)}return o.type=e.ValueTypeName,o}InterpolantFactoryMethodDiscrete(e){return new D2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new O2(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cm:t=this.InterpolantFactoryMethodDiscrete;break;case Xp:t=this.InterpolantFactoryMethodLinear;break;case aE:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(o);return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cm;case this.InterpolantFactoryMethodLinear:return Xp;case this.InterpolantFactoryMethodSmooth:return aE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let o=0,i=t.length;o!==i;++o)t[o]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let o=0,i=t.length;o!==i;++o)t[o]*=e}return this}trim(e,t){const o=this.times,i=o.length;let l=0,a=i-1;for(;l!==i&&o[l]<e;)++l;for(;a!==-1&&o[a]>t;)--a;if(++a,l!==0||a!==i){l>=a&&(a=Math.max(a,1),l=a-1);const c=this.getValueSize();this.times=xo.arraySlice(o,l,a),this.values=xo.arraySlice(this.values,l*c,a*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const o=this.times,i=this.values,l=o.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let c=0;c!==l;c++){const p=o[c];if(typeof p=="number"&&isNaN(p)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,p),e=!1;break}if(a!==null&&a>p){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,p,a),e=!1;break}a=p}if(i!==void 0&&xo.isTypedArray(i))for(let c=0,p=i.length;c!==p;++c){const h=i[c];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,h),e=!1;break}}return e}optimize(){const e=xo.arraySlice(this.times),t=xo.arraySlice(this.values),o=this.getValueSize(),i=this.getInterpolation()===aE,l=e.length-1;let a=1;for(let c=1;c<l;++c){let p=!1;const h=e[c],f=e[c+1];if(h!==f&&(c!==1||h!==e[0]))if(i)p=!0;else{const _=c*o,m=_-o,v=_+o;for(let x=0;x!==o;++x){const b=t[_+x];if(b!==t[m+x]||b!==t[v+x]){p=!0;break}}}if(p){if(c!==a){e[a]=e[c];const _=c*o,m=a*o;for(let v=0;v!==o;++v)t[m+v]=t[_+v]}++a}}if(l>0){e[a]=e[l];for(let c=l*o,p=a*o,h=0;h!==o;++h)t[p+h]=t[c+h];++a}return a!==e.length?(this.times=xo.arraySlice(e,0,a),this.values=xo.arraySlice(t,0,a*o)):(this.times=e,this.values=t),this}clone(){const e=xo.arraySlice(this.times,0),t=xo.arraySlice(this.values,0),o=this.constructor,i=new o(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ca.prototype.TimeBufferType=Float32Array;ca.prototype.ValueBufferType=Float32Array;ca.prototype.DefaultInterpolation=Xp;class ud extends ca{}ud.prototype.ValueTypeName="bool";ud.prototype.ValueBufferType=Array;ud.prototype.DefaultInterpolation=cm;ud.prototype.InterpolantFactoryMethodLinear=void 0;ud.prototype.InterpolantFactoryMethodSmooth=void 0;class WM extends ca{}WM.prototype.ValueTypeName="color";class Sm extends ca{}Sm.prototype.ValueTypeName="number";class L2 extends ic{constructor(e,t,o,i){super(e,t,o,i)}interpolate_(e,t,o,i){const l=this.resultBuffer,a=this.sampleValues,c=this.valueSize,p=(o-t)/(i-t);let h=e*c;for(let f=h+c;h!==f;h+=4)rr.slerpFlat(l,0,a,h-c,a,h,p);return l}}class _h extends ca{InterpolantFactoryMethodLinear(e){return new L2(this.times,this.values,this.getValueSize(),e)}}_h.prototype.ValueTypeName="quaternion";_h.prototype.DefaultInterpolation=Xp;_h.prototype.InterpolantFactoryMethodSmooth=void 0;class hd extends ca{}hd.prototype.ValueTypeName="string";hd.prototype.ValueBufferType=Array;hd.prototype.DefaultInterpolation=cm;hd.prototype.InterpolantFactoryMethodLinear=void 0;hd.prototype.InterpolantFactoryMethodSmooth=void 0;class Cm extends ca{}Cm.prototype.ValueTypeName="vector";class bm{constructor(e,t=-1,o,i=Xx){this.name=e,this.tracks=o,this.duration=t,this.blendMode=i,this.uuid=Qs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],o=e.tracks,i=1/(e.fps||1);for(let a=0,c=o.length;a!==c;++a)t.push(Bj(o[a]).scale(i));const l=new this(e.name,e.duration,t,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const t=[],o=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,a=o.length;l!==a;++l)t.push(ca.toJSON(o[l]));return i}static CreateFromMorphTargetSequence(e,t,o,i){const l=t.length,a=[];for(let c=0;c<l;c++){let p=[],h=[];p.push((c+l-1)%l,c,(c+1)%l),h.push(0,1,0);const f=xo.getKeyframeOrder(p);p=xo.sortedArray(p,1,f),h=xo.sortedArray(h,1,f),!i&&p[0]===0&&(p.push(l),h.push(h[0])),a.push(new Sm(".morphTargetInfluences["+t[c].name+"]",p,h).scale(1/o))}return new this(e,-1,a)}static findByName(e,t){let o=e;if(!Array.isArray(e)){const i=e;o=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<o.length;i++)if(o[i].name===t)return o[i];return null}static CreateClipsFromMorphTargetSequences(e,t,o){const i={},l=/^([\w-]*?)([\d]+)$/;for(let c=0,p=e.length;c<p;c++){const h=e[c],f=h.name.match(l);if(f&&f.length>1){const _=f[1];let m=i[_];m||(i[_]=m=[]),m.push(h)}}const a=[];for(const c in i)a.push(this.CreateFromMorphTargetSequence(c,i[c],t,o));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const o=function(_,m,v,x,b){if(v.length!==0){const A=[],k=[];xo.flattenJSON(v,A,k,x),A.length!==0&&b.push(new _(m,A,k))}},i=[],l=e.name||"default",a=e.fps||30,c=e.blendMode;let p=e.length||-1;const h=e.hierarchy||[];for(let _=0;_<h.length;_++){const m=h[_].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let b=0;b<m[x].morphTargets.length;b++)v[m[x].morphTargets[b]]=-1;for(const b in v){const A=[],k=[];for(let E=0;E!==m[x].morphTargets.length;++E){const M=m[x];A.push(M.time),k.push(M.morphTarget===b?1:0)}i.push(new Sm(".morphTargetInfluence["+b+"]",A,k))}p=v.length*(a||1)}else{const v=".bones["+t[_].name+"]";o(Cm,v+".position",m,"pos",i),o(_h,v+".quaternion",m,"rot",i),o(Cm,v+".scale",m,"scl",i)}}return i.length===0?null:new this(l,p,i,c)}resetDuration(){const e=this.tracks;let t=0;for(let o=0,i=e.length;o!==i;++o){const l=this.tracks[o];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Rj(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sm;case"vector":case"vector2":case"vector3":case"vector4":return Cm;case"color":return WM;case"quaternion":return _h;case"bool":case"boolean":return ud;case"string":return hd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Bj(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Rj(r.type);if(r.times===void 0){const t=[],o=[];xo.flattenJSON(r.keys,t,o,"value"),r.times=t,r.values=o}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Qp={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class zM{constructor(e,t,o){const i=this;let l=!1,a=0,c=0,p;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=o,this.itemStart=function(f){c++,l===!1&&i.onStart!==void 0&&i.onStart(f,a,c),l=!0},this.itemEnd=function(f){a++,i.onProgress!==void 0&&i.onProgress(f,a,c),a===c&&(l=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return p?p(f):f},this.setURLModifier=function(f){return p=f,this},this.addHandler=function(f,_){return h.push(f,_),this},this.removeHandler=function(f){const _=h.indexOf(f);return _!==-1&&h.splice(_,2),this},this.getHandler=function(f){for(let _=0,m=h.length;_<m;_+=2){const v=h[_],x=h[_+1];if(v.global&&(v.lastIndex=0),v.test(f))return x}return null}}}const N2=new zM;class gi{constructor(e){this.manager=e!==void 0?e:N2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const o=this;return new Promise(function(i,l){o.load(e,i,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Bc={};class As extends gi{constructor(e){super(e)}load(e,t,o,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=Qp.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(l),this.manager.itemEnd(e)},0),l;if(Bc[e]!==void 0){Bc[e].push({onLoad:t,onProgress:o,onError:i});return}Bc[e]=[],Bc[e].push({onLoad:t,onProgress:o,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,p=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||h.body.getReader===void 0)return h;const f=Bc[e],_=h.body.getReader(),m=h.headers.get("Content-Length"),v=m?parseInt(m):0,x=v!==0;let b=0;const A=new ReadableStream({start(k){E();function E(){_.read().then(({done:M,value:R})=>{if(M)k.close();else{b+=R.byteLength;const I=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:v});for(let L=0,F=f.length;L<F;L++){const U=f[L];U.onProgress&&U.onProgress(I)}k.enqueue(R),E()}})}}});return new Response(A)}else throw Error(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`)}).then(h=>{switch(p){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,c));case"json":return h.json();default:if(c===void 0)return h.text();{const _=/charset="?([^;"\s]*)"?/i.exec(c),m=_&&_[1]?_[1].toLowerCase():void 0,v=new TextDecoder(m);return h.arrayBuffer().then(x=>v.decode(x))}}}).then(h=>{Qp.add(e,h);const f=Bc[e];delete Bc[e];for(let _=0,m=f.length;_<m;_++){const v=f[_];v.onLoad&&v.onLoad(h)}}).catch(h=>{const f=Bc[e];if(f===void 0)throw this.manager.itemError(e),h;delete Bc[e];for(let _=0,m=f.length;_<m;_++){const v=f[_];v.onError&&v.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ij extends gi{constructor(e){super(e)}load(e,t,o,i){const l=this,a=new As(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{t(l.parse(JSON.parse(c)))}catch(p){i?i(p):console.error(p),l.manager.itemError(e)}},o,i)}parse(e){const t=[];for(let o=0;o<e.length;o++){const i=bm.parse(e[o]);t.push(i)}return t}}class Oj extends gi{constructor(e){super(e)}load(e,t,o,i){const l=this,a=[],c=new wM,p=new As(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(l.withCredentials);let h=0;function f(_){p.load(e[_],function(m){const v=l.parse(m,!0);a[_]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},h+=1,h===6&&(v.mipmapCount===1&&(c.minFilter=So),c.image=a,c.format=v.format,c.needsUpdate=!0,t&&t(c))},o,i)}if(Array.isArray(e))for(let _=0,m=e.length;_<m;++_)f(_);else p.load(e,function(_){const m=l.parse(_,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let x=0;x<v;x++){a[x]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)a[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+b]),a[x].format=m.format,a[x].width=m.width,a[x].height=m.height}c.image=a}else c.image.width=m.width,c.image.height=m.height,c.mipmaps=m.mipmaps;m.mipmapCount===1&&(c.minFilter=So),c.format=m.format,c.needsUpdate=!0,t&&t(c)},o,i);return c}}class Sy extends gi{constructor(e){super(e)}load(e,t,o,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,a=Qp.get(e);if(a!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(a),l.manager.itemEnd(e)},0),a;const c=yy("img");function p(){f(),Qp.add(e,this),t&&t(this),l.manager.itemEnd(e)}function h(_){f(),i&&i(_),l.manager.itemError(e),l.manager.itemEnd(e)}function f(){c.removeEventListener("load",p,!1),c.removeEventListener("error",h,!1)}return c.addEventListener("load",p,!1),c.addEventListener("error",h,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),l.manager.itemStart(e),c.src=e,c}}class $2 extends gi{constructor(e){super(e)}load(e,t,o,i){const l=new Gm,a=new Sy(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let c=0;function p(h){a.load(e[h],function(f){l.images[h]=f,c++,c===6&&(l.needsUpdate=!0,t&&t(l))},void 0,i)}for(let h=0;h<e.length;++h)p(h);return l}}class P2 extends gi{constructor(e){super(e)}load(e,t,o,i){const l=this,a=new Fp,c=new As(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(l.withCredentials),c.load(e,function(p){const h=l.parse(p);!h||(h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Kr,a.wrapT=h.wrapT!==void 0?h.wrapT:Kr,a.magFilter=h.magFilter!==void 0?h.magFilter:So,a.minFilter=h.minFilter!==void 0?h.minFilter:So,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.encoding!==void 0&&(a.encoding=h.encoding),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=tu),h.mipmapCount===1&&(a.minFilter=So),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h))},o,i),a}}class XM extends gi{constructor(e){super(e)}load(e,t,o,i){const l=new Vo,a=new Sy(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(c){l.image=c,l.needsUpdate=!0,t!==void 0&&t(l)},o,i),l}}class aa extends dn{constructor(e,t=1){super();this.type="Light",this.color=new tt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}aa.prototype.isLight=!0;class jM extends aa{constructor(e,t,o){super(e,o);this.type="HemisphereLight",this.position.copy(dn.DefaultUp),this.updateMatrix(),this.groundColor=new tt(t)}copy(e){return aa.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}jM.prototype.isHemisphereLight=!0;const oO=new wt,rO=new Y,iO=new Y;class JM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new nv,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new Gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,o=this.matrix;rO.setFromMatrixPosition(e.matrixWorld),t.position.copy(rO),iO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(iO),t.updateMatrixWorld(),oO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oO),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(t.projectionMatrix),o.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class F2 extends JM{constructor(){super(new go(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,o=_y*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;(o!==t.fov||i!==t.aspect||l!==t.far)&&(t.fov=o,t.aspect=i,t.far=l,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}F2.prototype.isSpotLightShadow=!0;class pS extends aa{constructor(e,t,o=0,i=Math.PI/3,l=0,a=1){super(e,t);this.type="SpotLight",this.position.copy(dn.DefaultUp),this.updateMatrix(),this.target=new dn,this.distance=o,this.angle=i,this.penumbra=l,this.decay=a,this.shadow=new F2}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}pS.prototype.isSpotLight=!0;const sO=new wt,Wg=new Y,vb=new Y;class U2 extends JM{constructor(){super(new go(90,1,.5,500));this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new Gn(2,1,1,1),new Gn(0,1,1,1),new Gn(3,1,1,1),new Gn(1,1,1,1),new Gn(3,0,1,1),new Gn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const o=this.camera,i=this.matrix,l=e.distance||o.far;l!==o.far&&(o.far=l,o.updateProjectionMatrix()),Wg.setFromMatrixPosition(e.matrixWorld),o.position.copy(Wg),vb.copy(o.position),vb.add(this._cubeDirections[t]),o.up.copy(this._cubeUps[t]),o.lookAt(vb),o.updateMatrixWorld(),i.makeTranslation(-Wg.x,-Wg.y,-Wg.z),sO.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sO)}}U2.prototype.isPointLightShadow=!0;class dS extends aa{constructor(e,t,o=0,i=1){super(e,t);this.type="PointLight",this.distance=o,this.decay=i,this.shadow=new U2}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}dS.prototype.isPointLight=!0;class H2 extends JM{constructor(){super(new Ka(-5,5,5,-5,.5,500))}}H2.prototype.isDirectionalLightShadow=!0;class fS extends aa{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(dn.DefaultUp),this.updateMatrix(),this.target=new dn,this.shadow=new H2}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}fS.prototype.isDirectionalLight=!0;class KM extends aa{constructor(e,t){super(e,t);this.type="AmbientLight"}}KM.prototype.isAmbientLight=!0;class YM extends aa{constructor(e,t,o=10,i=10){super(e,t);this.type="RectAreaLight",this.width=o,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}YM.prototype.isRectAreaLight=!0;class qM{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const o=e.x,i=e.y,l=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*l),t.addScaledVector(a[3],.488603*o),t.addScaledVector(a[4],1.092548*(o*i)),t.addScaledVector(a[5],1.092548*(i*l)),t.addScaledVector(a[6],.315392*(3*l*l-1)),t.addScaledVector(a[7],1.092548*(o*l)),t.addScaledVector(a[8],.546274*(o*o-i*i)),t}getIrradianceAt(e,t){const o=e.x,i=e.y,l=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*l),t.addScaledVector(a[3],2*.511664*o),t.addScaledVector(a[4],2*.429043*o*i),t.addScaledVector(a[5],2*.429043*i*l),t.addScaledVector(a[6],.743125*l*l-.247708),t.addScaledVector(a[7],2*.429043*o*l),t.addScaledVector(a[8],.429043*(o*o-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let o=0;o<9;o++)this.coefficients[o].addScaledVector(e.coefficients[o],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let o=0;o<9;o++)this.coefficients[o].lerp(e.coefficients[o],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const o=this.coefficients;for(let i=0;i<9;i++)o[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const o=this.coefficients;for(let i=0;i<9;i++)o[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const o=e.x,i=e.y,l=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*l,t[3]=.488603*o,t[4]=1.092548*o*i,t[5]=1.092548*i*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*o*l,t[8]=.546274*(o*o-i*i)}}qM.prototype.isSphericalHarmonics3=!0;class uv extends aa{constructor(e=new qM,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}uv.prototype.isLightProbe=!0;class G2 extends gi{constructor(e){super(e);this.textures={}}load(e,t,o,i){const l=this,a=new As(l.manager);a.setPath(l.path),a.setRequestHeader(l.requestHeader),a.setWithCredentials(l.withCredentials),a.load(e,function(c){try{t(l.parse(JSON.parse(c)))}catch(p){i?i(p):console.error(p),l.manager.itemError(e)}},o,i)}parse(e){const t=this.textures;function o(l){return t[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),t[l]}const i=new Mj[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new tt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const l in e.uniforms){const a=e.uniforms[l];switch(i.uniforms[l]={},a.type){case"t":i.uniforms[l].value=o(a.value);break;case"c":i.uniforms[l].value=new tt().setHex(a.value);break;case"v2":i.uniforms[l].value=new Ve().fromArray(a.value);break;case"v3":i.uniforms[l].value=new Y().fromArray(a.value);break;case"v4":i.uniforms[l].value=new Gn().fromArray(a.value);break;case"m3":i.uniforms[l].value=new Or().fromArray(a.value);break;case"m4":i.uniforms[l].value=new wt().fromArray(a.value);break;default:i.uniforms[l].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const l in e.extensions)i.extensions[l]=e.extensions[l];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=o(e.map)),e.matcap!==void 0&&(i.matcap=o(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=o(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=o(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=o(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let l=e.normalScale;Array.isArray(l)===!1&&(l=[l,l]),i.normalScale=new Ve().fromArray(l)}return e.displacementMap!==void 0&&(i.displacementMap=o(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=o(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=o(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=o(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=o(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=o(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=o(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=o(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=o(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=o(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=o(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=o(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=o(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=o(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ve().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(i.transmissionMap=o(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=o(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=o(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=o(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}}class ia{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let o=0,i=e.length;o<i;o++)t+=String.fromCharCode(e[o]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mS extends Ut{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}mS.prototype.isInstancedBufferGeometry=!0;class V2 extends gi{constructor(e){super(e)}load(e,t,o,i){const l=this,a=new As(l.manager);a.setPath(l.path),a.setRequestHeader(l.requestHeader),a.setWithCredentials(l.withCredentials),a.load(e,function(c){try{t(l.parse(JSON.parse(c)))}catch(p){i?i(p):console.error(p),l.manager.itemError(e)}},o,i)}parse(e){const t={},o={};function i(v,x){if(t[x]!==void 0)return t[x];const A=v.interleavedBuffers[x],k=l(v,A.buffer),E=Bf(A.type,k),M=new wh(E,A.stride);return M.uuid=A.uuid,t[x]=M,M}function l(v,x){if(o[x]!==void 0)return o[x];const A=v.arrayBuffers[x],k=new Uint32Array(A).buffer;return o[x]=k,k}const a=e.isInstancedBufferGeometry?new mS:new Ut,c=e.data.index;if(c!==void 0){const v=Bf(c.type,c.array);a.setIndex(new vn(v,1))}const p=e.data.attributes;for(const v in p){const x=p[v];let b;if(x.isInterleavedBufferAttribute){const A=i(e.data,x.data);b=new ns(A,x.itemSize,x.offset,x.normalized)}else{const A=Bf(x.type,x.array),k=x.isInstancedBufferAttribute?Jp:vn;b=new k(A,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),x.updateRange!==void 0&&(b.updateRange.offset=x.updateRange.offset,b.updateRange.count=x.updateRange.count),a.setAttribute(v,b)}const h=e.data.morphAttributes;if(h)for(const v in h){const x=h[v],b=[];for(let A=0,k=x.length;A<k;A++){const E=x[A];let M;if(E.isInterleavedBufferAttribute){const R=i(e.data,E.data);M=new ns(R,E.itemSize,E.offset,E.normalized)}else{const R=Bf(E.type,E.array);M=new vn(R,E.itemSize,E.normalized)}E.name!==void 0&&(M.name=E.name),b.push(M)}a.morphAttributes[v]=b}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let v=0,x=_.length;v!==x;++v){const b=_[v];a.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const v=new Y;m.center!==void 0&&v.fromArray(m.center),a.boundingSphere=new cc(v,m.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Dj extends gi{constructor(e){super(e)}load(e,t,o,i){const l=this,a=this.path===""?ia.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const c=new As(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(p){let h=null;try{h=JSON.parse(p)}catch(_){i!==void 0&&i(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}l.parse(h,t)},o,i)}async loadAsync(e,t){const o=this,i=this.path===""?ia.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const l=new As(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials);const a=await l.loadAsync(e,t),c=JSON.parse(a),p=c.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await o.parseAsync(c)}parse(e,t){const o=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),c=this.parseTextures(e.textures,a),p=this.parseMaterials(e.materials,c),h=this.parseObject(e.object,l,p,c,o),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),t!==void 0){let _=!1;for(const m in a)if(a[m]instanceof HTMLImageElement){_=!0;break}_===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,o),l=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,l),c=this.parseMaterials(e.materials,a),p=this.parseObject(e.object,i,c,a,t),h=this.parseSkeletons(e.skeletons,p);return this.bindSkeletons(p,h),p}parseShapes(e){const t={};if(e!==void 0)for(let o=0,i=e.length;o<i;o++){const l=new ra().fromJSON(e[o]);t[l.uuid]=l}return t}parseSkeletons(e,t){const o={},i={};if(t.traverse(function(l){l.isBone&&(i[l.uuid]=l)}),e!==void 0)for(let l=0,a=e.length;l<a;l++){const c=new lv().fromJSON(e[l],i);o[c.uuid]=c}return o}parseGeometries(e,t){const o={};if(e!==void 0){const i=new V2;for(let l=0,a=e.length;l<a;l++){let c;const p=e[l];switch(p.type){case"BufferGeometry":case"InstancedBufferGeometry":c=i.parse(p);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:p.type in nO?c=nO[p.type].fromJSON(p,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${p.type}"`)}c.uuid=p.uuid,p.name!==void 0&&(c.name=p.name),c.isBufferGeometry===!0&&p.userData!==void 0&&(c.userData=p.userData),o[p.uuid]=c}}return o}parseMaterials(e,t){const o={},i={};if(e!==void 0){const l=new G2;l.setTextures(t);for(let a=0,c=e.length;a<c;a++){const p=e[a];if(p.type==="MultiMaterial"){const h=[];for(let f=0;f<p.materials.length;f++){const _=p.materials[f];o[_.uuid]===void 0&&(o[_.uuid]=l.parse(_)),h.push(o[_.uuid])}i[p.uuid]=h}else o[p.uuid]===void 0&&(o[p.uuid]=l.parse(p)),i[p.uuid]=o[p.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let o=0;o<e.length;o++){const i=e[o],l=bm.parse(i);t[l.uuid]=l}return t}parseImages(e,t){const o=this,i={};let l;function a(p){return o.manager.itemStart(p),l.load(p,function(){o.manager.itemEnd(p)},void 0,function(){o.manager.itemError(p),o.manager.itemEnd(p)})}function c(p){if(typeof p=="string"){const h=p,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:o.resourcePath+h;return a(f)}else return p.data?{data:Bf(p.type,p.data),width:p.width,height:p.height}:null}if(e!==void 0&&e.length>0){const p=new zM(t);l=new Sy(p),l.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h<f;h++){const _=e[h],m=_.url;if(Array.isArray(m)){i[_.uuid]=[];for(let v=0,x=m.length;v<x;v++){const b=m[v],A=c(b);A!==null&&(A instanceof HTMLImageElement?i[_.uuid].push(A):i[_.uuid].push(new Fp(A.data,A.width,A.height)))}}else{const v=c(_.url);v!==null&&(i[_.uuid]=v)}}}return i}async parseImagesAsync(e){const t=this,o={};let i;async function l(a){if(typeof a=="string"){const c=a,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await i.loadAsync(p)}else return a.data?{data:Bf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new Sy(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,c=e.length;a<c;a++){const p=e[a],h=p.url;if(Array.isArray(h)){o[p.uuid]=[];for(let f=0,_=h.length;f<_;f++){const m=h[f],v=await l(m);v!==null&&(v instanceof HTMLImageElement?o[p.uuid].push(v):o[p.uuid].push(new Fp(v.data,v.width,v.height)))}}else{const f=await l(p.url);f!==null&&(o[p.uuid]=f)}}}return o}parseTextures(e,t){function o(l,a){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),a[l])}const i={};if(e!==void 0)for(let l=0,a=e.length;l<a;l++){const c=e[l];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);let p;const h=t[c.image];Array.isArray(h)?(p=new Gm(h),h.length===6&&(p.needsUpdate=!0)):(h&&h.data?p=new Fp(h.data,h.width,h.height):p=new Vo(h),h&&(p.needsUpdate=!0)),p.uuid=c.uuid,c.name!==void 0&&(p.name=c.name),c.mapping!==void 0&&(p.mapping=o(c.mapping,Lj)),c.offset!==void 0&&p.offset.fromArray(c.offset),c.repeat!==void 0&&p.repeat.fromArray(c.repeat),c.center!==void 0&&p.center.fromArray(c.center),c.rotation!==void 0&&(p.rotation=c.rotation),c.wrap!==void 0&&(p.wrapS=o(c.wrap[0],lO),p.wrapT=o(c.wrap[1],lO)),c.format!==void 0&&(p.format=c.format),c.type!==void 0&&(p.type=c.type),c.encoding!==void 0&&(p.encoding=c.encoding),c.minFilter!==void 0&&(p.minFilter=o(c.minFilter,aO)),c.magFilter!==void 0&&(p.magFilter=o(c.magFilter,aO)),c.anisotropy!==void 0&&(p.anisotropy=c.anisotropy),c.flipY!==void 0&&(p.flipY=c.flipY),c.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(p.unpackAlignment=c.unpackAlignment),c.userData!==void 0&&(p.userData=c.userData),i[c.uuid]=p}return i}parseObject(e,t,o,i,l){let a;function c(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function p(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let x=0,b=m.length;x<b;x++){const A=m[x];o[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),v.push(o[A])}return v}return o[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),o[m]}}function h(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),i[m]}let f,_;switch(e.type){case"Scene":a=new zm,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new tt(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new rv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new ov(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new go(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ka(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new KM(e.color,e.intensity);break;case"DirectionalLight":a=new fS(e.color,e.intensity);break;case"PointLight":a=new dS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new YM(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new pS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new jM(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new uv().fromJSON(e);break;case"SkinnedMesh":f=c(e.geometry),_=p(e.material),a=new iv(f,_),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":f=c(e.geometry),_=p(e.material),a=new nr(f,_);break;case"InstancedMesh":f=c(e.geometry),_=p(e.material);const m=e.count,v=e.instanceMatrix,x=e.instanceColor;a=new AM(f,_,m),a.instanceMatrix=new Jp(new Float32Array(v.array),16),x!==void 0&&(a.instanceColor=new Jp(new Float32Array(x.array),x.itemSize));break;case"LOD":a=new b2;break;case"Line":a=new nc(c(e.geometry),p(e.material));break;case"LineLoop":a=new iS(c(e.geometry),p(e.material));break;case"LineSegments":a=new is(c(e.geometry),p(e.material));break;case"PointCloud":case"Points":a=new Xm(c(e.geometry),p(e.material));break;case"Sprite":a=new rS(p(e.material));break;case"Group":a=new Va;break;case"Bone":a=new sv;break;default:a=new dn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)a.add(this.parseObject(m[v],t,o,i,l))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const x=m[v];a.animations.push(l[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const x=m[v],b=a.getObjectByProperty("uuid",x.object);b!==void 0&&a.addLevel(b,x.distance)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(o){if(o.isSkinnedMesh===!0&&o.skeleton!==void 0){const i=t[o.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",o.skeleton):o.bind(i,o.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const Lj={UVMapping:Wx,CubeReflectionMapping:sd,CubeRefractionMapping:ld,EquirectangularReflectionMapping:py,EquirectangularRefractionMapping:dy,CubeUVReflectionMapping:Hm,CubeUVRefractionMapping:tv},lO={RepeatWrapping:dh,ClampToEdgeWrapping:Kr,MirroredRepeatWrapping:lm},aO={NearestFilter:tr,NearestMipmapNearestFilter:fy,NearestMipmapLinearFilter:my,LinearFilter:So,LinearMipmapNearestFilter:zx,LinearMipmapLinearFilter:tu};class QM extends gi{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,o,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,a=Qp.get(e);if(a!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(a),l.manager.itemEnd(e)},0),a;const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(p){Qp.add(e,p),t&&t(p),l.manager.itemEnd(e)}).catch(function(p){i&&i(p),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}QM.prototype.isImageBitmapLoader=!0;let f0;const ZM={getContext:function(){return f0===void 0&&(f0=new(window.AudioContext||window.webkitAudioContext)),f0},setContext:function(r){f0=r}};class W2 extends gi{constructor(e){super(e)}load(e,t,o,i){const l=this,a=new As(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const p=c.slice(0);ZM.getContext().decodeAudioData(p,function(f){t(f)})}catch(p){i?i(p):console.error(p),l.manager.itemError(e)}},o,i)}}class z2 extends uv{constructor(e,t,o=1){super(void 0,o);const i=new tt().set(e),l=new tt().set(t),a=new Y(i.r,i.g,i.b),c=new Y(l.r,l.g,l.b),p=Math.sqrt(Math.PI),h=p*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(c).multiplyScalar(p),this.sh.coefficients[1].copy(a).sub(c).multiplyScalar(h)}}z2.prototype.isHemisphereLightProbe=!0;class X2 extends uv{constructor(e,t=1){super(void 0,t);const o=new tt().set(e);this.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI))}}X2.prototype.isAmbientLightProbe=!0;const cO=new wt,uO=new wt,Zh=new wt;class Nj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new go,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new go,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Zh.copy(e.projectionMatrix);const i=t.eyeSep/2,l=i*t.near/t.focus,a=t.near*Math.tan($p*t.fov*.5)/t.zoom;let c,p;uO.elements[12]=-i,cO.elements[12]=i,c=-a*t.aspect+l,p=a*t.aspect+l,Zh.elements[0]=2*t.near/(p-c),Zh.elements[8]=(p+c)/(p-c),this.cameraL.projectionMatrix.copy(Zh),c=-a*t.aspect-l,p=a*t.aspect-l,Zh.elements[0]=2*t.near/(p-c),Zh.elements[8]=(p+c)/(p-c),this.cameraR.projectionMatrix.copy(Zh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(uO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(cO)}}class eR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=hO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hO(){return(typeof performance=="undefined"?Date:performance).now()}const ep=new Y,pO=new rr,$j=new Y,tp=new Y;class Pj extends dn{constructor(){super();this.type="AudioListener",this.context=ZM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,o=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ep,pO,$j),tp.set(0,0,-1).applyQuaternion(pO),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ep.x,i),t.positionY.linearRampToValueAtTime(ep.y,i),t.positionZ.linearRampToValueAtTime(ep.z,i),t.forwardX.linearRampToValueAtTime(tp.x,i),t.forwardY.linearRampToValueAtTime(tp.y,i),t.forwardZ.linearRampToValueAtTime(tp.z,i),t.upX.linearRampToValueAtTime(o.x,i),t.upY.linearRampToValueAtTime(o.y,i),t.upZ.linearRampToValueAtTime(o.z,i)}else t.setPosition(ep.x,ep.y,ep.z),t.setOrientation(tp.x,tp.y,tp.z,o.x,o.y,o.z)}}class tR extends dn{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const np=new Y,dO=new rr,Fj=new Y,op=new Y;class Uj extends tR{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,o){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=o,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(np,dO,Fj),op.set(0,0,1).applyQuaternion(dO);const t=this.panner;if(t.positionX){const o=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(np.x,o),t.positionY.linearRampToValueAtTime(np.y,o),t.positionZ.linearRampToValueAtTime(np.z,o),t.orientationX.linearRampToValueAtTime(op.x,o),t.orientationY.linearRampToValueAtTime(op.y,o),t.orientationZ.linearRampToValueAtTime(op.z,o)}else t.setPosition(np.x,np.y,np.z),t.setOrientation(op.x,op.y,op.z)}}class j2{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let o=0;o<t.length;o++)e+=t[o];return e/t.length}}class J2{constructor(e,t,o){this.binding=e,this.valueSize=o;let i,l,a;switch(t){case"quaternion":i=this._slerp,l=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(o*6),this._workIndex=5;break;case"string":case"bool":i=this._select,l=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(o*5);break;default:i=this._lerp,l=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(o*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=l,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const o=this.buffer,i=this.valueSize,l=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let c=0;c!==i;++c)o[l+c]=o[c];a=t}else{a+=t;const c=t/a;this._mixBufferRegion(o,l,0,c,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,o=this.valueSize,i=o*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,o),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,o=this.buffer,i=e*t+t,l=this.cumulativeWeight,a=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const p=t*this._origIndex;this._mixBufferRegion(o,i,p,1-l,t)}a>0&&this._mixBufferRegionAdditive(o,i,this._addIndex*t,1,t);for(let p=t,h=t+t;p!==h;++p)if(o[p]!==o[p+t]){c.setValue(o,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,o=this.valueSize,i=o*this._origIndex;e.getValue(t,i);for(let l=o,a=i;l!==a;++l)t[l]=t[i+l%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let o=e;o<t;o++)this.buffer[o]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let o=0;o<this.valueSize;o++)this.buffer[t+o]=this.buffer[e+o]}_select(e,t,o,i,l){if(i>=.5)for(let a=0;a!==l;++a)e[t+a]=e[o+a]}_slerp(e,t,o,i){rr.slerpFlat(e,t,e,t,e,o,i)}_slerpAdditive(e,t,o,i,l){const a=this._workIndex*l;rr.multiplyQuaternionsFlat(e,a,e,t,e,o),rr.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,o,i,l){const a=1-i;for(let c=0;c!==l;++c){const p=t+c;e[p]=e[p]*a+e[o+c]*i}}_lerpAdditive(e,t,o,i,l){for(let a=0;a!==l;++a){const c=t+a;e[c]=e[c]+e[o+a]*i}}}const nR="\\[\\]\\.:\\/",Hj=new RegExp("["+nR+"]","g"),oR="[^"+nR+"]",Gj="[^"+nR.replace("\\.","")+"]",Vj=/((?:WC+[\/:])*)/.source.replace("WC",oR),Wj=/(WCOD+)?/.source.replace("WCOD",Gj),zj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oR),Xj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oR),jj=new RegExp("^"+Vj+Wj+zj+Xj+"$"),Jj=["material","materials","bones"];class Kj{constructor(e,t,o){const i=o||Rn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const o=this._targetGroup.nCachedObjects_,i=this._bindings[o];i!==void 0&&i.getValue(e,t)}setValue(e,t){const o=this._bindings;for(let i=this._targetGroup.nCachedObjects_,l=o.length;i!==l;++i)o[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,o=e.length;t!==o;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,o=e.length;t!==o;++t)e[t].unbind()}}class Rn{constructor(e,t,o){this.path=t,this.parsedPath=o||Rn.parseTrackName(t),this.node=Rn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,o){return e&&e.isAnimationObjectGroup?new Rn.Composite(e,t,o):new Rn(e,t,o)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Hj,"")}static parseTrackName(e){const t=jj.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const o={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=o.nodeName&&o.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const l=o.nodeName.substring(i+1);Jj.indexOf(l)!==-1&&(o.nodeName=o.nodeName.substring(0,i),o.objectName=l)}if(o.propertyName===null||o.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return o}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const o=e.skeleton.getBoneByName(t);if(o!==void 0)return o}if(e.children){const o=function(l){for(let a=0;a<l.length;a++){const c=l[a];if(c.name===t||c.uuid===t)return c;const p=o(c.children);if(p)return p}return null},i=o(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const o=this.resolvedProperty;for(let i=0,l=o.length;i!==l;++i)e[t++]=o[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const o=this.resolvedProperty;for(let i=0,l=o.length;i!==l;++i)o[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const o=this.resolvedProperty;for(let i=0,l=o.length;i!==l;++i)o[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const o=this.resolvedProperty;for(let i=0,l=o.length;i!==l;++i)o[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,o=t.objectName,i=t.propertyName;let l=t.propertyIndex;if(e||(e=Rn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(o){let h=t.objectIndex;switch(o){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;default:if(e[o]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[o]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[i];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(l!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}p=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=l}else a.fromArray!==void 0&&a.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(p=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rn.Composite=Kj;Rn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rn.prototype.GetterByBindingType=[Rn.prototype._getValue_direct,Rn.prototype._getValue_array,Rn.prototype._getValue_arrayElement,Rn.prototype._getValue_toArray];Rn.prototype.SetterByBindingTypeAndVersioning=[[Rn.prototype._setValue_direct,Rn.prototype._setValue_direct_setNeedsUpdate,Rn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_array,Rn.prototype._setValue_array_setNeedsUpdate,Rn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_arrayElement,Rn.prototype._setValue_arrayElement_setNeedsUpdate,Rn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_fromArray,Rn.prototype._setValue_fromArray_setNeedsUpdate,Rn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class K2{constructor(){this.uuid=Qs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let o=0,i=arguments.length;o!==i;++o)e[arguments[o].uuid]=o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,o=this._paths,i=this._parsedPaths,l=this._bindings,a=l.length;let c,p=e.length,h=this.nCachedObjects_;for(let f=0,_=arguments.length;f!==_;++f){const m=arguments[f],v=m.uuid;let x=t[v];if(x===void 0){x=p++,t[v]=x,e.push(m);for(let b=0,A=a;b!==A;++b)l[b].push(new Rn(m,o[b],i[b]))}else if(x<h){c=e[x];const b=--h,A=e[b];t[A.uuid]=x,e[x]=A,t[v]=b,e[b]=m;for(let k=0,E=a;k!==E;++k){const M=l[k],R=M[b];let I=M[x];M[x]=R,I===void 0&&(I=new Rn(m,o[k],i[k])),M[b]=I}}else e[x]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,o=this._bindings,i=o.length;let l=this.nCachedObjects_;for(let a=0,c=arguments.length;a!==c;++a){const p=arguments[a],h=p.uuid,f=t[h];if(f!==void 0&&f>=l){const _=l++,m=e[_];t[m.uuid]=f,e[f]=m,t[h]=_,e[_]=p;for(let v=0,x=i;v!==x;++v){const b=o[v],A=b[_],k=b[f];b[f]=A,b[_]=k}}}this.nCachedObjects_=l}uncache(){const e=this._objects,t=this._indicesByUUID,o=this._bindings,i=o.length;let l=this.nCachedObjects_,a=e.length;for(let c=0,p=arguments.length;c!==p;++c){const h=arguments[c],f=h.uuid,_=t[f];if(_!==void 0)if(delete t[f],_<l){const m=--l,v=e[m],x=--a,b=e[x];t[v.uuid]=_,e[_]=v,t[b.uuid]=m,e[m]=b,e.pop();for(let A=0,k=i;A!==k;++A){const E=o[A],M=E[m],R=E[x];E[_]=M,E[m]=R,E.pop()}}else{const m=--a,v=e[m];m>0&&(t[v.uuid]=_),e[_]=v,e.pop();for(let x=0,b=i;x!==b;++x){const A=o[x];A[_]=A[m],A.pop()}}}this.nCachedObjects_=l}subscribe_(e,t){const o=this._bindingsIndicesByPath;let i=o[e];const l=this._bindings;if(i!==void 0)return l[i];const a=this._paths,c=this._parsedPaths,p=this._objects,h=p.length,f=this.nCachedObjects_,_=new Array(h);i=l.length,o[e]=i,a.push(e),c.push(t),l.push(_);for(let m=f,v=p.length;m!==v;++m){const x=p[m];_[m]=new Rn(x,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,o=t[e];if(o!==void 0){const i=this._paths,l=this._parsedPaths,a=this._bindings,c=a.length-1,p=a[c],h=e[c];t[h]=o,a[o]=p,a.pop(),l[o]=l[c],l.pop(),i[o]=i[c],i.pop()}}}K2.prototype.isAnimationObjectGroup=!0;class Yj{constructor(e,t,o=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=o,this.blendMode=i;const l=t.tracks,a=l.length,c=new Array(a),p={endingStart:bp,endingEnd:bp};for(let h=0;h!==a;++h){const f=l[h].createInterpolant(null);c[h]=f,f.settings=p}this._interpolantSettings=p,this._interpolants=c,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,o){if(e.fadeOut(t),this.fadeIn(t),o){const i=this._clip.duration,l=e._clip.duration,a=l/i,c=i/l;e.warp(1,a,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,o){return e.crossFadeFrom(this,t,o)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,o){const i=this._mixer,l=i.time,a=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=i._lendControlInterpolant(),this._timeScaleInterpolant=c);const p=c.parameterPositions,h=c.sampleValues;return p[0]=l,p[1]=l+o,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,o,i){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const p=(e-l)*o;if(p<0||o===0)return;this._startTime=null,t=o*p}t*=this._updateTimeScale(e);const a=this._updateTime(t),c=this._updateWeight(e);if(c>0){const p=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case EM:for(let f=0,_=p.length;f!==_;++f)p[f].evaluate(a),h[f].accumulateAdditive(c);break;case Xx:default:for(let f=0,_=p.length;f!==_;++f)p[f].evaluate(a),h[f].accumulate(i,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const o=this._weightInterpolant;if(o!==null){const i=o.evaluate(e)[0];t*=i,e>o.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const o=this._timeScaleInterpolant;o!==null&&(t*=o.evaluate(e)[0],e>o.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,o=this.loop;let i=this.time+e,l=this._loopCount;const a=o===XF;if(e===0)return l===-1?i:a&&(l&1)===1?t-i:i;if(o===WF){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const c=Math.floor(i/t);i-=t*c,l+=Math.abs(c);const p=this.repetitions-l;if(p<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(p===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=l,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=i;if(a&&(l&1)===1)return t-i}return i}_setEndings(e,t,o){const i=this._interpolantSettings;o?(i.endingStart=kp,i.endingEnd=kp):(e?i.endingStart=this.zeroSlopeAtStart?kp:bp:i.endingStart=gy,t?i.endingEnd=this.zeroSlopeAtEnd?kp:bp:i.endingEnd=gy)}_scheduleFading(e,t,o){const i=this._mixer,l=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const c=a.parameterPositions,p=a.sampleValues;return c[0]=l,p[0]=t,c[1]=l+e,p[1]=o,this}}class Y2 extends nu{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const o=e._localRoot||this._root,i=e._clip.tracks,l=i.length,a=e._propertyBindings,c=e._interpolants,p=o.uuid,h=this._bindingsByRootAndName;let f=h[p];f===void 0&&(f={},h[p]=f);for(let _=0;_!==l;++_){const m=i[_],v=m.name;let x=f[v];if(x!==void 0)++x.referenceCount,a[_]=x;else{if(x=a[_],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,p,v));continue}const b=t&&t._propertyBindings[_].binding.parsedPath;x=new J2(Rn.create(o,v,b),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,p,v),a[_]=x}c[_].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const o=(e._localRoot||this._root).uuid,i=e._clip.uuid,l=this._actionsByClip[i];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,i,o)}const t=e._propertyBindings;for(let o=0,i=t.length;o!==i;++o){const l=t[o];l.useCount++===0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let o=0,i=t.length;o!==i;++o){const l=t[o];--l.useCount===0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,o){const i=this._actions,l=this._actionsByClip;let a=l[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=a;else{const c=a.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[o]=e}_removeInactiveAction(e){const t=this._actions,o=t[t.length-1],i=e._cacheIndex;o._cacheIndex=i,t[i]=o,t.pop(),e._cacheIndex=null;const l=e._clip.uuid,a=this._actionsByClip,c=a[l],p=c.knownActions,h=p[p.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,p[f]=h,p.pop(),e._byClipCacheIndex=null;const _=c.actionByRoot,m=(e._localRoot||this._root).uuid;delete _[m],p.length===0&&delete a[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let o=0,i=t.length;o!==i;++o){const l=t[o];--l.referenceCount===0&&this._removeInactiveBinding(l)}}_lendAction(e){const t=this._actions,o=e._cacheIndex,i=this._nActiveActions++,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=o,t[o]=l}_takeBackAction(e){const t=this._actions,o=e._cacheIndex,i=--this._nActiveActions,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=o,t[o]=l}_addInactiveBinding(e,t,o){const i=this._bindingsByRootAndName,l=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[o]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const t=this._bindings,o=e.binding,i=o.rootNode.uuid,l=o.path,a=this._bindingsByRootAndName,c=a[i],p=t[t.length-1],h=e._cacheIndex;p._cacheIndex=h,t[h]=p,t.pop(),delete c[l],Object.keys(c).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,o=e._cacheIndex,i=this._nActiveBindings++,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=o,t[o]=l}_takeBackBinding(e){const t=this._bindings,o=e._cacheIndex,i=--this._nActiveBindings,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=o,t[o]=l}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let o=e[t];return o===void 0&&(o=new VM(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),o.__cacheIndex=t,e[t]=o),o}_takeBackControlInterpolant(e){const t=this._controlInterpolants,o=e.__cacheIndex,i=--this._nActiveControlInterpolants,l=t[i];e.__cacheIndex=i,t[i]=e,l.__cacheIndex=o,t[o]=l}clipAction(e,t,o){const i=t||this._root,l=i.uuid;let a=typeof e=="string"?bm.findByName(i,e):e;const c=a!==null?a.uuid:e,p=this._actionsByClip[c];let h=null;if(o===void 0&&(a!==null?o=a.blendMode:o=Xx),p!==void 0){const _=p.actionByRoot[l];if(_!==void 0&&_.blendMode===o)return _;h=p.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const f=new Yj(this,a,t,o);return this._bindAction(f,h),this._addInactiveAction(f,c,l),f}existingAction(e,t){const o=t||this._root,i=o.uuid,l=typeof e=="string"?bm.findByName(o,e):e,a=l?l.uuid:e,c=this._actionsByClip[a];return c!==void 0&&c.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let o=t-1;o>=0;--o)e[o].stop();return this}update(e){e*=this.timeScale;const t=this._actions,o=this._nActiveActions,i=this.time+=e,l=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==o;++h)t[h]._update(i,e,l,a);const c=this._bindings,p=this._nActiveBindings;for(let h=0;h!==p;++h)c[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,o=e.uuid,i=this._actionsByClip,l=i[o];if(l!==void 0){const a=l.knownActions;for(let c=0,p=a.length;c!==p;++c){const h=a[c];this._deactivateAction(h);const f=h._cacheIndex,_=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,_._cacheIndex=f,t[f]=_,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[o]}}uncacheRoot(e){const t=e.uuid,o=this._actionsByClip;for(const a in o){const c=o[a].actionByRoot,p=c[t];p!==void 0&&(this._deactivateAction(p),this._removeInactiveAction(p))}const i=this._bindingsByRootAndName,l=i[t];if(l!==void 0)for(const a in l){const c=l[a];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const o=this.existingAction(e,t);o!==null&&(this._deactivateAction(o),this._removeInactiveAction(o))}}Y2.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class gS{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new gS(this.value.clone===void 0?this.value:this.value.clone())}}class Cy extends wh{constructor(e,t,o=1){super(e,t);this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Cy.prototype.isInstancedInterleavedBuffer=!0;class q2{constructor(e,t,o,i,l){this.buffer=e,this.type=t,this.itemSize=o,this.elementSize=i,this.count=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}q2.prototype.isGLBufferAttribute=!0;class rR{constructor(e,t,o=0,i=1/0){this.ray=new Ah(e,t),this.near=o,this.far=i,this.camera=null,this.layers=new Pp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,o=[]){return $A(e,this,o,t),o.sort(fO),o}intersectObjects(e,t=!0,o=[]){for(let i=0,l=e.length;i<l;i++)$A(e[i],this,o,t);return o.sort(fO),o}}function fO(r,e){return r.distance-e.distance}function $A(r,e,t,o){if(r.layers.test(e.layers)&&r.raycast(e,t),o===!0){const i=r.children;for(let l=0,a=i.length;l<a;l++)$A(i[l],e,t,!0)}}class PA{constructor(e=1,t=0,o=0){return this.radius=e,this.phi=t,this.theta=o,this}set(e,t,o){return this.radius=e,this.phi=t,this.theta=o,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,o){return this.radius=Math.sqrt(e*e+t*t+o*o),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,o),this.phi=Math.acos(pi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class qj{constructor(e=1,t=0,o=0){return this.radius=e,this.theta=t,this.y=o,this}set(e,t,o){return this.radius=e,this.theta=t,this.y=o,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,o){return this.radius=Math.sqrt(e*e+o*o),this.theta=Math.atan2(e,o),this.y=t,this}clone(){return new this.constructor().copy(this)}}const mO=new Ve;class jm{constructor(e=new Ve(1/0,1/0),t=new Ve(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,o=e.length;t<o;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const o=mO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(o),this.max.copy(e).add(o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return mO.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}jm.prototype.isBox2=!0;const gO=new Y,m0=new Y;class iR{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){gO.subVectors(e,this.start),m0.subVectors(this.end,this.start);const o=m0.dot(m0);let l=m0.dot(gO)/o;return t&&(l=pi(l,0,1)),l}closestPointToPoint(e,t,o){const i=this.closestPointToPointParameter(e,t);return this.delta(o).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _O=new Y;class Qj extends dn{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const o=new Ut,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,c=1,p=32;a<p;a++,c++){const h=a/p*Math.PI*2,f=c/p*Math.PI*2;i.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}o.setAttribute("position",new Mt(i,3));const l=new Lr({fog:!1,toneMapped:!1});this.cone=new is(o,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_O.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_O),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ou=new Y,g0=new wt,Tb=new wt;class Q2 extends is{constructor(e){const t=Z2(e),o=new Ut,i=[],l=[],a=new tt(0,0,1),c=new tt(0,1,0);for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),l.push(a.r,a.g,a.b),l.push(c.r,c.g,c.b))}o.setAttribute("position",new Mt(i,3)),o.setAttribute("color",new Mt(l,3));const p=new Lr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(o,p);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,o=this.geometry,i=o.getAttribute("position");Tb.copy(this.root.matrixWorld).invert();for(let l=0,a=0;l<t.length;l++){const c=t[l];c.parent&&c.parent.isBone&&(g0.multiplyMatrices(Tb,c.matrixWorld),Ou.setFromMatrixPosition(g0),i.setXYZ(a,Ou.x,Ou.y,Ou.z),g0.multiplyMatrices(Tb,c.parent.matrixWorld),Ou.setFromMatrixPosition(g0),i.setXYZ(a+1,Ou.x,Ou.y,Ou.z),a+=2)}o.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Z2(r){const e=[];r&&r.isBone&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,Z2(r.children[t]));return e}class Zj extends nr{constructor(e,t,o){const i=new qp(t,4,2),l=new Es({wireframe:!0,fog:!1,toneMapped:!1});super(i,l);this.light=e,this.light.updateMatrixWorld(),this.color=o,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eJ=new Y,yO=new tt,vO=new tt;class tJ extends dn{constructor(e,t,o){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o;const i=new Kp(t);i.rotateY(Math.PI*.5),this.material=new Es({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const l=i.getAttribute("position"),a=new Float32Array(l.count*3);i.setAttribute("color",new vn(a,3)),this.add(new nr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");yO.copy(this.light.color),vO.copy(this.light.groundColor);for(let o=0,i=t.count;o<i;o++){const l=o<i/2?yO:vO;t.setXYZ(o,l.r,l.g,l.b)}t.needsUpdate=!0}e.lookAt(eJ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class eU extends is{constructor(e=10,t=10,o=4473924,i=8947848){o=new tt(o),i=new tt(i);const l=t/2,a=e/t,c=e/2,p=[],h=[];for(let m=0,v=0,x=-c;m<=t;m++,x+=a){p.push(-c,0,x,c,0,x),p.push(x,0,-c,x,0,c);const b=m===l?o:i;b.toArray(h,v),v+=3,b.toArray(h,v),v+=3,b.toArray(h,v),v+=3,b.toArray(h,v),v+=3}const f=new Ut;f.setAttribute("position",new Mt(p,3)),f.setAttribute("color",new Mt(h,3));const _=new Lr({vertexColors:!0,toneMapped:!1});super(f,_);this.type="GridHelper"}}class nJ extends is{constructor(e=10,t=16,o=8,i=64,l=4473924,a=8947848){l=new tt(l),a=new tt(a);const c=[],p=[];for(let _=0;_<=t;_++){const m=_/t*(Math.PI*2),v=Math.sin(m)*e,x=Math.cos(m)*e;c.push(0,0,0),c.push(v,0,x);const b=_&1?l:a;p.push(b.r,b.g,b.b),p.push(b.r,b.g,b.b)}for(let _=0;_<=o;_++){const m=_&1?l:a,v=e-e/o*_;for(let x=0;x<i;x++){let b=x/i*(Math.PI*2),A=Math.sin(b)*v,k=Math.cos(b)*v;c.push(A,0,k),p.push(m.r,m.g,m.b),b=(x+1)/i*(Math.PI*2),A=Math.sin(b)*v,k=Math.cos(b)*v,c.push(A,0,k),p.push(m.r,m.g,m.b)}}const h=new Ut;h.setAttribute("position",new Mt(c,3)),h.setAttribute("color",new Mt(p,3));const f=new Lr({vertexColors:!0,toneMapped:!1});super(h,f);this.type="PolarGridHelper"}}const TO=new Y,_0=new Y,EO=new Y;class oJ extends dn{constructor(e,t,o){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,t===void 0&&(t=1);let i=new Ut;i.setAttribute("position",new Mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const l=new Lr({fog:!1,toneMapped:!1});this.lightPlane=new nc(i,l),this.add(this.lightPlane),i=new Ut,i.setAttribute("position",new Mt([0,0,0,0,0,1],3)),this.targetLine=new nc(i,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){TO.setFromMatrixPosition(this.light.matrixWorld),_0.setFromMatrixPosition(this.light.target.matrixWorld),EO.subVectors(_0,TO),this.lightPlane.lookAt(_0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_0),this.targetLine.scale.z=EO.length()}}const y0=new Y,er=new fh;class rJ extends is{constructor(e){const t=new Ut,o=new Lr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],l=[],a={},c=new tt(16755200),p=new tt(16711680),h=new tt(43775),f=new tt(16777215),_=new tt(3355443);m("n1","n2",c),m("n2","n4",c),m("n4","n3",c),m("n3","n1",c),m("f1","f2",c),m("f2","f4",c),m("f4","f3",c),m("f3","f1",c),m("n1","f1",c),m("n2","f2",c),m("n3","f3",c),m("n4","f4",c),m("p","n1",p),m("p","n2",p),m("p","n3",p),m("p","n4",p),m("u1","u2",h),m("u2","u3",h),m("u3","u1",h),m("c","t",f),m("p","c",_),m("cn1","cn2",_),m("cn3","cn4",_),m("cf1","cf2",_),m("cf3","cf4",_);function m(x,b,A){v(x,A),v(b,A)}function v(x,b){i.push(0,0,0),l.push(b.r,b.g,b.b),a[x]===void 0&&(a[x]=[]),a[x].push(i.length/3-1)}t.setAttribute("position",new Mt(i,3)),t.setAttribute("color",new Mt(l,3));super(t,o);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){const e=this.geometry,t=this.pointMap,o=1,i=1;er.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cr("c",t,e,er,0,0,-1),cr("t",t,e,er,0,0,1),cr("n1",t,e,er,-o,-i,-1),cr("n2",t,e,er,o,-i,-1),cr("n3",t,e,er,-o,i,-1),cr("n4",t,e,er,o,i,-1),cr("f1",t,e,er,-o,-i,1),cr("f2",t,e,er,o,-i,1),cr("f3",t,e,er,-o,i,1),cr("f4",t,e,er,o,i,1),cr("u1",t,e,er,o*.7,i*1.1,-1),cr("u2",t,e,er,-o*.7,i*1.1,-1),cr("u3",t,e,er,0,i*2,-1),cr("cf1",t,e,er,-o,0,1),cr("cf2",t,e,er,o,0,1),cr("cf3",t,e,er,0,-i,1),cr("cf4",t,e,er,0,i,1),cr("cn1",t,e,er,-o,0,-1),cr("cn2",t,e,er,o,0,-1),cr("cn3",t,e,er,0,-i,-1),cr("cn4",t,e,er,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function cr(r,e,t,o,i,l,a){y0.set(i,l,a).unproject(o);const c=e[r];if(c!==void 0){const p=t.getAttribute("position");for(let h=0,f=c.length;h<f;h++)p.setXYZ(c[h],y0.x,y0.y,y0.z)}}const v0=new Pi;class tU extends is{constructor(e,t=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),l=new Ut;l.setIndex(new vn(o,1)),l.setAttribute("position",new vn(i,3));super(l,new Lr({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&v0.setFromObject(this.object),v0.isEmpty())return;const t=v0.min,o=v0.max,i=this.geometry.attributes.position,l=i.array;l[0]=o.x,l[1]=o.y,l[2]=o.z,l[3]=t.x,l[4]=o.y,l[5]=o.z,l[6]=t.x,l[7]=t.y,l[8]=o.z,l[9]=o.x,l[10]=t.y,l[11]=o.z,l[12]=o.x,l[13]=o.y,l[14]=t.z,l[15]=t.x,l[16]=o.y,l[17]=t.z,l[18]=t.x,l[19]=t.y,l[20]=t.z,l[21]=o.x,l[22]=t.y,l[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return is.prototype.copy.call(this,e),this.object=e.object,this}}class iJ extends is{constructor(e,t=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new Ut;l.setIndex(new vn(o,1)),l.setAttribute("position",new Mt(i,3));super(l,new Lr({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class sJ extends nc{constructor(e,t=1,o=16776960){const i=o,l=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new Ut;a.setAttribute("position",new Mt(l,3)),a.computeBoundingSphere();super(a,new Lr({color:i,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],p=new Ut;p.setAttribute("position",new Mt(c,3)),p.computeBoundingSphere(),this.add(new nr(p,new Es({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ur:hh,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const xO=new Y;let T0,Eb;class lJ extends dn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),o=1,i=16776960,l=o*.2,a=l*.2){super();this.type="ArrowHelper",T0===void 0&&(T0=new Ut,T0.setAttribute("position",new Mt([0,0,0,0,1,0],3)),Eb=new mh(0,.5,1,5,1),Eb.translate(0,-.5,0)),this.position.copy(t),this.line=new nc(T0,new Lr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new nr(Eb,new Es({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(o,l,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xO.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xO,t)}}setLength(e,t=e*.2,o=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(o,t,o),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class nU extends is{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ut;i.setAttribute("position",new Mt(t,3)),i.setAttribute("color",new Mt(o,3));const l=new Lr({vertexColors:!0,toneMapped:!1});super(i,l);this.type="AxesHelper"}setColors(e,t,o){const i=new tt,l=this.geometry.attributes.color.array;return i.set(e),i.toArray(l,0),i.toArray(l,3),i.set(t),i.toArray(l,6),i.toArray(l,9),i.set(o),i.toArray(l,12),i.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aJ{constructor(){this.type="ShapePath",this.color=new tt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new vy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,o,i){return this.currentPath.quadraticCurveTo(e,t,o,i),this}bezierCurveTo(e,t,o,i,l,a){return this.currentPath.bezierCurveTo(e,t,o,i,l,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function o(E){const M=[];for(let R=0,I=E.length;R<I;R++){const L=E[R],F=new ra;F.curves=L.curves,M.push(F)}return M}function i(E,M){const R=M.length;let I=!1;for(let L=R-1,F=0;F<R;L=F++){let U=M[L],X=M[F],j=X.x-U.x,P=X.y-U.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(U=M[F],j=-j,X=M[L],P=-P),E.y<U.y||E.y>X.y)continue;if(E.y===U.y){if(E.x===U.x)return!0}else{const z=P*(E.x-U.x)-j*(E.y-U.y);if(z===0)return!0;if(z<0)continue;I=!I}}else{if(E.y!==U.y)continue;if(X.x<=E.x&&E.x<=U.x||U.x<=E.x&&E.x<=X.x)return!0}}return I}const l=Ya.isClockWise,a=this.subPaths;if(a.length===0)return[];if(t===!0)return o(a);let c,p,h;const f=[];if(a.length===1)return p=a[0],h=new ra,h.curves=p.curves,f.push(h),f;let _=!l(a[0].getPoints());_=e?!_:_;const m=[],v=[];let x=[],b=0,A;v[b]=void 0,x[b]=[];for(let E=0,M=a.length;E<M;E++)p=a[E],A=p.getPoints(),c=l(A),c=e?!c:c,c?(!_&&v[b]&&b++,v[b]={s:new ra,p:A},v[b].s.curves=p.curves,_&&b++,x[b]=[]):x[b].push({h:p,p:A[0]});if(!v[0])return o(a);if(v.length>1){let E=!1;const M=[];for(let R=0,I=v.length;R<I;R++)m[R]=[];for(let R=0,I=v.length;R<I;R++){const L=x[R];for(let F=0;F<L.length;F++){const U=L[F];let X=!0;for(let j=0;j<v.length;j++)i(U.p,v[j].p)&&(R!==j&&M.push({froms:R,tos:j,hole:F}),X?(X=!1,m[j].push(U)):E=!0);X&&m[R].push(U)}}M.length>0&&(E||(x=m))}let k;for(let E=0,M=v.length;E<M;E++){h=v[E].s,f.push(h),k=x[E];for(let R=0,I=k.length;R<I;R++)h.holes.push(k[R].h)}return f}}const oU=new Float32Array(1),cJ=new Int32Array(oU.buffer);class uJ{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),oU[0]=e;const t=cJ[0];let o=t>>16&32768,i=t>>12&2047;const l=t>>23&255;return l<103?o:l>142?(o|=31744,o|=(l==255?0:1)&&t&8388607,o):l<113?(i|=2048,o|=(i>>114-l)+(i>>113-l&1),o):(o|=l-112<<10|i>>1,o+=i&1,o)}}const hJ=0,pJ=1,dJ=0,fJ=1,mJ=2;function gJ(r){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),r}function _J(r=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),r.isMultiMaterial=!0,r.materials=r,r.clone=function(){return r.slice()},r}function yJ(r,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Xm(r,e)}function vJ(r){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new rS(r)}function TJ(r,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Xm(r,e)}function EJ(r){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Mh(r)}function xJ(r){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Mh(r)}function SJ(r){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Mh(r)}function CJ(r,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Y(r,e,t)}function bJ(r,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new vn(r,e).setUsage(hm)}function kJ(r,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new r2(r,e)}function AJ(r,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new i2(r,e)}function wJ(r,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new s2(r,e)}function MJ(r,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new l2(r,e)}function RJ(r,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Jx(r,e)}function BJ(r,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new a2(r,e)}function IJ(r,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Kx(r,e)}function OJ(r,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Mt(r,e)}function DJ(r,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new u2(r,e)}nl.create=function(r,e){return console.log("THREE.Curve.create() has been deprecated"),r.prototype=Object.create(nl.prototype),r.prototype.constructor=r,r.prototype.getPoint=e,r};vy.prototype.fromPoints=function(r){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(r)};function LJ(r){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new nU(r)}function NJ(r,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new tU(r,e)}function $J(r,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new is(new RM(r.geometry),new Lr({color:e!==void 0?e:16777215}))}eU.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Q2.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function PJ(r,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new is(new hS(r.geometry),new Lr({color:e!==void 0?e:16777215}))}gi.prototype.extractUrlBase=function(r){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ia.extractUrlBase(r)};gi.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function FJ(r){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new As(r)}function UJ(r){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new P2(r)}jm.prototype.center=function(r){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(r)};jm.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};jm.prototype.isIntersectionBox=function(r){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};jm.prototype.size=function(r){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(r)};Pi.prototype.center=function(r){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(r)};Pi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Pi.prototype.isIntersectionBox=function(r){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};Pi.prototype.isIntersectionSphere=function(r){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)};Pi.prototype.size=function(r){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(r)};cc.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};nv.prototype.setFromMatrix=function(r){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(r)};iR.prototype.center=function(r){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(r)};Or.prototype.flattenToArrayOffset=function(r,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,e)};Or.prototype.multiplyVector3=function(r){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)};Or.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Or.prototype.applyToBufferAttribute=function(r){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)};Or.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Or.prototype.getInverse=function(r){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(r).invert()};wt.prototype.extractPosition=function(r){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)};wt.prototype.flattenToArrayOffset=function(r,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,e)};wt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Y().setFromMatrixColumn(this,3)};wt.prototype.setRotationFromQuaternion=function(r){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)};wt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};wt.prototype.multiplyVector3=function(r){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};wt.prototype.multiplyVector4=function(r){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};wt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};wt.prototype.rotateAxis=function(r){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)};wt.prototype.crossVector=function(r){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};wt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};wt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};wt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};wt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};wt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};wt.prototype.applyToBufferAttribute=function(r){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};wt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};wt.prototype.makeFrustum=function(r,e,t,o,i,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(r,e,o,t,i,l)};wt.prototype.getInverse=function(r){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(r).invert()};$a.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)};rr.prototype.multiplyVector3=function(r){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)};rr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Ah.prototype.isIntersectionBox=function(r){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};Ah.prototype.isIntersectionPlane=function(r){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(r)};Ah.prototype.isIntersectionSphere=function(r){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)};pr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};pr.prototype.barycoordFromPoint=function(r,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(r,e)};pr.prototype.midpoint=function(r){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(r)};pr.prototypenormal=function(r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(r)};pr.prototype.plane=function(r){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(r)};pr.barycoordFromPoint=function(r,e,t,o,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pr.getBarycoord(r,e,t,o,i)};pr.normal=function(r,e,t,o){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pr.getNormal(r,e,t,o)};ra.prototype.extractAllPoints=function(r){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(r)};ra.prototype.extrude=function(r){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new rc(this,r)};ra.prototype.makeGeometry=function(r){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yp(this,r)};Ve.prototype.fromAttribute=function(r,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,e,t)};Ve.prototype.distanceToManhattan=function(r){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)};Ve.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Y.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};Y.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};Y.prototype.getPositionFromMatrix=function(r){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)};Y.prototype.getScaleFromMatrix=function(r){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)};Y.prototype.getColumnFromMatrix=function(r,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,r)};Y.prototype.applyProjection=function(r){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(r)};Y.prototype.fromAttribute=function(r,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,e,t)};Y.prototype.distanceToManhattan=function(r){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)};Y.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Gn.prototype.fromAttribute=function(r,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,e,t)};Gn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};dn.prototype.getChildByName=function(r){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)};dn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};dn.prototype.translate=function(r,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,r)};dn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};dn.prototype.applyMatrix=function(r){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)};Object.defineProperties(dn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(r){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=r}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});nr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(nr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),jF},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});iv.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};go.prototype.setLens=function(r,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(r)};Object.defineProperties(aa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(r){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=r}},shadowCameraLeft:{set:function(r){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=r}},shadowCameraRight:{set:function(r){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=r}},shadowCameraTop:{set:function(r){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=r}},shadowCameraBottom:{set:function(r){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=r}},shadowCameraNear:{set:function(r){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=r}},shadowCameraFar:{set:function(r){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=r}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(r){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=r}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(r){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=r}},shadowMapHeight:{set:function(r){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=r}}});Object.defineProperties(vn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===hm},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(hm)}}});vn.prototype.setDynamic=function(r){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?hm:um),this};vn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},vn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ut.prototype.addIndex=function(r){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(r)};Ut.prototype.addAttribute=function(r,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(r,new vn(arguments[1],arguments[2]))):r==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(r,e)};Ut.prototype.addDrawCall=function(r,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(r,e)};Ut.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Ut.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Ut.prototype.removeAttribute=function(r){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(r)};Ut.prototype.applyMatrix=function(r){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)};Object.defineProperties(Ut.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});wh.prototype.setDynamic=function(r){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?hm:um),this};wh.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};rc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};rc.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};rc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};zm.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};gS.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(dr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new tt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===_M}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(r){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=r}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(tc.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(r){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=r}}});Qn.prototype.clearTarget=function(r,e,t,o){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(r),this.clear(e,t,o)};Qn.prototype.animate=function(r){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(r)};Qn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Qn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Qn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Qn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Qn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Qn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Qn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Qn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Qn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Qn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Qn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Qn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Qn.prototype.enableScissorTest=function(r){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(r)};Qn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Qn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Qn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Qn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Qn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Qn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Qn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Qn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Qn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Qn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Qn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=r}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=r}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(r){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=r===!0?qn:la}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(E2.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function HJ(r,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Qx(r,t)}Object.defineProperties(Zs.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=r}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=r}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=r}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=r}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(r){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=r}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(r){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=r}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(r){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=r}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(r){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=r}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(r){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=r}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(r){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=r}}});tR.prototype.load=function(r){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new W2().load(r,function(o){e.setBuffer(o)}),this};j2.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};qx.prototype.updateCubeMap=function(r,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,e)};qx.prototype.clear=function(r,e,t,o){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(r,e,t,o)};kh.crossOrigin=void 0;kh.loadTexture=function(r,e,t,o){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new XM;i.setCrossOrigin(this.crossOrigin);const l=i.load(r,t,void 0,o);return e&&(l.mapping=e),l};kh.loadTextureCube=function(r,e,t,o){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new $2;i.setCrossOrigin(this.crossOrigin);const l=i.load(r,t,void 0,o);return e&&(l.mapping=e),l};kh.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};kh.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function GJ(){console.error("THREE.CanvasRenderer has been removed")}function VJ(){console.error("THREE.JSONLoader has been removed.")}const WJ={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function zJ(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function XJ(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new Ut}function jJ(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new Ut}function JJ(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function KJ(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function YJ(){console.error("THREE.ImmediateRenderObject has been removed.")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Vx}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Vx);var qJ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:TM,AddEquation:yp,AddOperation:CF,AdditiveAnimationBlendMode:EM,AdditiveBlending:rA,AlphaFormat:DF,AlwaysDepth:_F,AlwaysStencilFunc:QF,AmbientLight:KM,AmbientLightProbe:X2,AnimationClip:bm,AnimationLoader:Ij,AnimationMixer:Y2,AnimationObjectGroup:K2,AnimationUtils:xo,ArcCurve:BM,ArrayCamera:kM,ArrowHelper:lJ,Audio:tR,AudioAnalyser:j2,AudioContext:ZM,AudioListener:Pj,AudioLoader:W2,AxesHelper:nU,AxisHelper:LJ,BackSide:ur,BasicDepthPacking:KF,BasicShadowMap:D4,BinaryTextureLoader:UJ,Bone:sv,BooleanKeyframeTrack:ud,BoundingBoxHelper:NJ,Box2:jm,Box3:Pi,Box3Helper:iJ,BoxBufferGeometry:Jc,BoxGeometry:Jc,BoxHelper:tU,BufferAttribute:vn,BufferGeometry:Ut,BufferGeometryLoader:V2,ByteType:MF,Cache:Qp,Camera:fh,CameraHelper:rJ,CanvasRenderer:GJ,CanvasTexture:MM,CatmullRomCurve3:OM,CineonToneMapping:AF,CircleBufferGeometry:dm,CircleGeometry:dm,ClampToEdgeWrapping:Kr,Clock:eR,Color:tt,ColorKeyframeTrack:WM,CompressedTexture:wM,CompressedTextureLoader:Oj,ConeBufferGeometry:fm,ConeGeometry:fm,CubeCamera:qx,CubeReflectionMapping:sd,CubeRefractionMapping:ld,CubeTexture:Gm,CubeTextureLoader:$2,CubeUVReflectionMapping:Hm,CubeUVRefractionMapping:tv,CubicBezierCurve:sS,CubicBezierCurve3:DM,CubicInterpolant:O2,CullFaceBack:oA,CullFaceFront:oF,CullFaceFrontBack:O4,CullFaceNone:nF,Curve:nl,CurvePath:M2,CustomBlending:rF,CustomToneMapping:wF,CylinderBufferGeometry:mh,CylinderGeometry:mh,Cylindrical:qj,DataTexture:Fp,DataTexture2DArray:Zx,DataTexture3D:bM,DataTextureLoader:P2,DataUtils:uJ,DecrementStencilOp:V4,DecrementWrapStencilOp:z4,DefaultLoadingManager:N2,DepthFormat:nh,DepthStencilFormat:zp,DepthTexture:tx,DirectionalLight:fS,DirectionalLightHelper:oJ,DiscreteInterpolant:D2,DodecahedronBufferGeometry:mm,DodecahedronGeometry:mm,DoubleSide:ph,DstAlphaFactor:hF,DstColorFactor:dF,DynamicBufferAttribute:bJ,DynamicCopyUsage:i5,DynamicDrawUsage:hm,DynamicReadUsage:n5,EdgesGeometry:RM,EdgesHelper:$J,EllipseCurve:av,EqualDepth:vF,EqualStencilFunc:K4,EquirectangularReflectionMapping:py,EquirectangularRefractionMapping:dy,Euler:ad,EventDispatcher:nu,ExtrudeBufferGeometry:rc,ExtrudeGeometry:rc,FaceColors:fJ,FileLoader:As,FlatShading:_M,Float16BufferAttribute:c2,Float32Attribute:OJ,Float32BufferAttribute:Mt,Float64Attribute:DJ,Float64BufferAttribute:u2,FloatType:Hc,Fog:rv,FogExp2:ov,Font:KJ,FontLoader:JJ,FramebufferTexture:A2,FrontSide:hh,Frustum:nv,GLBufferAttribute:q2,GLSL1:l5,GLSL3:RA,GreaterDepth:EF,GreaterEqualDepth:TF,GreaterEqualStencilFunc:Z4,GreaterStencilFunc:q4,GridHelper:eU,Group:Va,HalfFloatType:Lp,HemisphereLight:jM,HemisphereLightHelper:tJ,HemisphereLightProbe:z2,IcosahedronBufferGeometry:gm,IcosahedronGeometry:gm,ImageBitmapLoader:QM,ImageLoader:Sy,ImageUtils:kh,ImmediateRenderObject:YJ,IncrementStencilOp:G4,IncrementWrapStencilOp:W4,InstancedBufferAttribute:Jp,InstancedBufferGeometry:mS,InstancedInterleavedBuffer:Cy,InstancedMesh:AM,Int16Attribute:MJ,Int16BufferAttribute:l2,Int32Attribute:BJ,Int32BufferAttribute:a2,Int8Attribute:kJ,Int8BufferAttribute:r2,IntType:BF,InterleavedBuffer:wh,InterleavedBufferAttribute:ns,Interpolant:ic,InterpolateDiscrete:cm,InterpolateLinear:Xp,InterpolateSmooth:aE,InvertStencilOp:X4,JSONLoader:VJ,KeepStencilOp:cE,KeyframeTrack:ca,LOD:b2,LatheBufferGeometry:_m,LatheGeometry:_m,Layers:Pp,LensFlare:zJ,LessDepth:yF,LessEqualDepth:QE,LessEqualStencilFunc:Y4,LessStencilFunc:J4,Light:aa,LightProbe:uv,Line:nc,Line3:iR,LineBasicMaterial:Lr,LineCurve:cv,LineCurve3:w2,LineDashedMaterial:GM,LineLoop:iS,LinePieces:pJ,LineSegments:is,LineStrip:hJ,LinearEncoding:la,LinearFilter:So,LinearInterpolant:VM,LinearMipMapLinearFilter:F4,LinearMipMapNearestFilter:P4,LinearMipmapLinearFilter:tu,LinearMipmapNearestFilter:zx,LinearToneMapping:bF,Loader:gi,LoaderUtils:ia,LoadingManager:zM,LoopOnce:WF,LoopPingPong:XF,LoopRepeat:zF,LuminanceAlphaFormat:$F,LuminanceFormat:NF,MOUSE:up,Material:dr,MaterialLoader:G2,Math:ex,MathUtils:ex,Matrix3:Or,Matrix4:wt,MaxEquation:aA,Mesh:nr,MeshBasicMaterial:Es,MeshDepthMaterial:tS,MeshDistanceMaterial:nS,MeshFaceMaterial:gJ,MeshLambertMaterial:UM,MeshMatcapMaterial:HM,MeshNormalMaterial:FM,MeshPhongMaterial:$M,MeshPhysicalMaterial:ou,MeshStandardMaterial:cd,MeshToonMaterial:PM,MinEquation:lA,MirroredRepeatWrapping:lm,MixOperation:SF,MultiMaterial:_J,MultiplyBlending:sA,MultiplyOperation:ev,NearestFilter:tr,NearestMipMapLinearFilter:$4,NearestMipMapNearestFilter:N4,NearestMipmapLinearFilter:my,NearestMipmapNearestFilter:fy,NeverDepth:gF,NeverStencilFunc:j4,NoBlending:Wc,NoColors:dJ,NoToneMapping:Ja,NormalAnimationBlendMode:Xx,NormalBlending:Vf,NotEqualDepth:xF,NotEqualStencilFunc:Q4,NumberKeyframeTrack:Sm,Object3D:dn,ObjectLoader:Dj,ObjectSpaceNormalMap:qF,OctahedronBufferGeometry:Kp,OctahedronGeometry:Kp,OneFactor:aF,OneMinusDstAlphaFactor:pF,OneMinusDstColorFactor:fF,OneMinusSrcAlphaFactor:vM,OneMinusSrcColorFactor:uF,OrthographicCamera:Ka,PCFShadowMap:mM,PCFSoftShadowMap:gM,PMREMGenerator:IA,ParametricGeometry:XJ,Particle:vJ,ParticleBasicMaterial:xJ,ParticleSystem:TJ,ParticleSystemMaterial:SJ,Path:vy,PerspectiveCamera:go,Plane:$a,PlaneBufferGeometry:jp,PlaneGeometry:jp,PlaneHelper:sJ,PointCloud:yJ,PointCloudMaterial:EJ,PointLight:dS,PointLightHelper:Zj,Points:Xm,PointsMaterial:Mh,PolarGridHelper:nJ,PolyhedronBufferGeometry:oc,PolyhedronGeometry:oc,PositionalAudio:Uj,PropertyBinding:Rn,PropertyMixer:J2,QuadraticBezierCurve:lS,QuadraticBezierCurve3:aS,Quaternion:rr,QuaternionKeyframeTrack:_h,QuaternionLinearInterpolant:L2,REVISION:Vx,RGBADepthPacking:YF,RGBAFormat:di,RGBAIntegerFormat:GF,RGBA_ASTC_10x10_Format:kA,RGBA_ASTC_10x5_Format:SA,RGBA_ASTC_10x6_Format:CA,RGBA_ASTC_10x8_Format:bA,RGBA_ASTC_12x10_Format:AA,RGBA_ASTC_12x12_Format:wA,RGBA_ASTC_4x4_Format:mA,RGBA_ASTC_5x4_Format:gA,RGBA_ASTC_5x5_Format:_A,RGBA_ASTC_6x5_Format:yA,RGBA_ASTC_6x6_Format:vA,RGBA_ASTC_8x5_Format:TA,RGBA_ASTC_8x6_Format:EA,RGBA_ASTC_8x8_Format:xA,RGBA_BPTC_Format:MA,RGBA_ETC2_EAC_Format:fA,RGBA_PVRTC_2BPPV1_Format:pA,RGBA_PVRTC_4BPPV1_Format:hA,RGBA_S3TC_DXT1_Format:iE,RGBA_S3TC_DXT3_Format:sE,RGBA_S3TC_DXT5_Format:lE,RGBFormat:LF,RGB_ETC1_Format:VF,RGB_ETC2_Format:dA,RGB_PVRTC_2BPPV1_Format:uA,RGB_PVRTC_4BPPV1_Format:cA,RGB_S3TC_DXT1_Format:rE,RGFormat:UF,RGIntegerFormat:HF,RawShaderMaterial:Vm,Ray:Ah,Raycaster:rR,RectAreaLight:YM,RedFormat:PF,RedIntegerFormat:FF,ReinhardToneMapping:kF,RepeatWrapping:dh,ReplaceStencilOp:H4,ReverseSubtractEquation:sF,RingBufferGeometry:ym,RingGeometry:ym,Scene:zm,SceneUtils:WJ,ShaderChunk:yn,ShaderLib:ts,ShaderMaterial:tc,ShadowMaterial:NM,Shape:ra,ShapeBufferGeometry:Yp,ShapeGeometry:Yp,ShapePath:aJ,ShapeUtils:Ya,ShortType:RF,Skeleton:lv,SkeletonHelper:Q2,SkinnedMesh:iv,SmoothShading:L4,Sphere:cc,SphereBufferGeometry:qp,SphereGeometry:qp,Spherical:PA,SphericalHarmonics3:qM,SplineCurve:cS,SpotLight:pS,SpotLightHelper:Qj,Sprite:rS,SpriteMaterial:oS,SrcAlphaFactor:yM,SrcAlphaSaturateFactor:mF,SrcColorFactor:cF,StaticCopyUsage:r5,StaticDrawUsage:um,StaticReadUsage:t5,StereoCamera:Nj,StreamCopyUsage:s5,StreamDrawUsage:e5,StreamReadUsage:o5,StringKeyframeTrack:hd,SubtractEquation:iF,SubtractiveBlending:iA,TOUCH:hp,TangentSpaceNormalMap:bh,TetrahedronBufferGeometry:vm,TetrahedronGeometry:vm,TextGeometry:jJ,Texture:Vo,TextureLoader:XM,TorusBufferGeometry:Tm,TorusGeometry:Tm,TorusKnotBufferGeometry:Em,TorusKnotGeometry:Em,Triangle:pr,TriangleFanDrawMode:xM,TriangleStripDrawMode:JF,TrianglesDrawMode:jF,TubeBufferGeometry:xm,TubeGeometry:xm,UVMapping:Wx,Uint16Attribute:RJ,Uint16BufferAttribute:Jx,Uint32Attribute:IJ,Uint32BufferAttribute:Kx,Uint8Attribute:AJ,Uint8BufferAttribute:i2,Uint8ClampedAttribute:wJ,Uint8ClampedBufferAttribute:s2,Uniform:gS,UniformsLib:ht,UniformsUtils:Yx,UnsignedByteType:zc,UnsignedInt248Type:Np,UnsignedIntType:M_,UnsignedShort4444Type:IF,UnsignedShort5551Type:OF,UnsignedShortType:am,VSMShadowMap:Rf,Vector2:Ve,Vector3:Y,Vector4:Gn,VectorKeyframeTrack:Cm,Vertex:CJ,VertexColors:mJ,VideoTexture:k2,WebGL1Renderer:S2,WebGLCubeRenderTarget:Qx,WebGLMultipleRenderTargets:o2,WebGLMultisampleRenderTarget:jx,WebGLRenderTarget:Zs,WebGLRenderTargetCube:HJ,WebGLRenderer:Qn,WebGLUtils:x2,WireframeGeometry:hS,WireframeHelper:PJ,WrapAroundEnding:gy,XHRLoader:FJ,ZeroCurvatureEnding:bp,ZeroFactor:lF,ZeroSlopeEnding:kp,ZeroStencilOp:U4,_SRGBAFormat:ZE,sRGBEncoding:qn});function QJ(r){let e;const t=new Set,o=(h,f)=>{const _=typeof h=="function"?h(e):h;if(_!==e){const m=e;e=f?_:Object.assign({},e,_),t.forEach(v=>v(e,m))}},i=()=>e,l=(h,f=i,_=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function v(){const x=f(e);if(!_(m,x)){const b=m;h(m=x,b)}}return t.add(v),()=>t.delete(v)},p={setState:o,getState:i,subscribe:(h,f,_)=>f||_?l(h,f,_):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=r(o,i,p),p}const ZJ=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),SO=ZJ?G.exports.useEffect:G.exports.useLayoutEffect;function eK(r){const e=typeof r=="function"?QJ(r):r,t=(o=e.getState,i=Object.is)=>{const[,l]=G.exports.useReducer(A=>A+1,0),a=e.getState(),c=G.exports.useRef(a),p=G.exports.useRef(o),h=G.exports.useRef(i),f=G.exports.useRef(!1),_=G.exports.useRef();_.current===void 0&&(_.current=o(a));let m,v=!1;(c.current!==a||p.current!==o||h.current!==i||f.current)&&(m=o(a),v=!i(_.current,m)),SO(()=>{v&&(_.current=m),c.current=a,p.current=o,h.current=i,f.current=!1});const x=G.exports.useRef(a);SO(()=>{const A=()=>{try{const E=e.getState(),M=p.current(E);h.current(_.current,M)||(c.current=E,_.current=M,l())}catch{f.current=!0,l()}},k=e.subscribe(A);return e.getState()!==x.current&&A(),k},[]);const b=v?m:_.current;return G.exports.useDebugValue(b),b};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const o=[t,e];return{next(){const i=o.length<=0;return{value:o.shift(),done:i}}}},t}var rU={exports:{}},iU={exports:{}},O_={exports:{}},sU={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){var e,t,o,i;if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();r.unstable_now=function(){return a.now()-c}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var p=null,h=null,f=function(){if(p!==null)try{var D=r.unstable_now();p(!0,D),p=null}catch(H){throw setTimeout(f,0),H}};e=function(D){p!==null?setTimeout(e,0,D):(p=D,setTimeout(f,0))},t=function(D,H){h=setTimeout(D,H)},o=function(){clearTimeout(h)},r.unstable_shouldYield=function(){return!1},i=r.unstable_forceFrameRate=function(){}}else{var _=window.setTimeout,m=window.clearTimeout;if(typeof console!="undefined"){var v=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof v!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var x=!1,b=null,A=-1,k=5,E=0;r.unstable_shouldYield=function(){return r.unstable_now()>=E},i=function(){},r.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5};var M=new MessageChannel,R=M.port2;M.port1.onmessage=function(){if(b!==null){var D=r.unstable_now();E=D+k;try{b(!0,D)?R.postMessage(null):(x=!1,b=null)}catch(H){throw R.postMessage(null),H}}else x=!1},e=function(D){b=D,x||(x=!0,R.postMessage(null))},t=function(D,H){A=_(function(){D(r.unstable_now())},H)},o=function(){m(A),A=-1}}function I(D,H){var q=D.length;D.push(H);e:for(;;){var Q=q-1>>>1,de=D[Q];if(de!==void 0&&0<U(de,H))D[Q]=H,D[q]=de,q=Q;else break e}}function L(D){return D=D[0],D===void 0?null:D}function F(D){var H=D[0];if(H!==void 0){var q=D.pop();if(q!==H){D[0]=q;e:for(var Q=0,de=D.length;Q<de;){var je=2*(Q+1)-1,We=D[je],ze=je+1,Oe=D[ze];if(We!==void 0&&0>U(We,q))Oe!==void 0&&0>U(Oe,We)?(D[Q]=Oe,D[ze]=q,Q=ze):(D[Q]=We,D[je]=q,Q=je);else if(Oe!==void 0&&0>U(Oe,q))D[Q]=Oe,D[ze]=q,Q=ze;else break e}}return H}return null}function U(D,H){var q=D.sortIndex-H.sortIndex;return q!==0?q:D.id-H.id}var X=[],j=[],P=1,z=null,K=3,te=!1,oe=!1,ee=!1;function pe(D){for(var H=L(j);H!==null;){if(H.callback===null)F(j);else if(H.startTime<=D)F(j),H.sortIndex=H.expirationTime,I(X,H);else break;H=L(j)}}function ae(D){if(ee=!1,pe(D),!oe)if(L(X)!==null)oe=!0,e(Ee);else{var H=L(j);H!==null&&t(ae,H.startTime-D)}}function Ee(D,H){oe=!1,ee&&(ee=!1,o()),te=!0;var q=K;try{for(pe(H),z=L(X);z!==null&&(!(z.expirationTime>H)||D&&!r.unstable_shouldYield());){var Q=z.callback;if(typeof Q=="function"){z.callback=null,K=z.priorityLevel;var de=Q(z.expirationTime<=H);H=r.unstable_now(),typeof de=="function"?z.callback=de:z===L(X)&&F(X),pe(H)}else F(X);z=L(X)}if(z!==null)var je=!0;else{var We=L(j);We!==null&&t(ae,We.startTime-H),je=!1}return je}finally{z=null,K=q,te=!1}}var S=i;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(D){D.callback=null},r.unstable_continueExecution=function(){oe||te||(oe=!0,e(Ee))},r.unstable_getCurrentPriorityLevel=function(){return K},r.unstable_getFirstCallbackNode=function(){return L(X)},r.unstable_next=function(D){switch(K){case 1:case 2:case 3:var H=3;break;default:H=K}var q=K;K=H;try{return D()}finally{K=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=S,r.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=K;K=D;try{return H()}finally{K=q}},r.unstable_scheduleCallback=function(D,H,q){var Q=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Q+q:Q):q=Q,D){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=q+de,D={id:P++,callback:H,priorityLevel:D,startTime:q,expirationTime:de,sortIndex:-1},q>Q?(D.sortIndex=q,I(j,D),L(X)===null&&D===L(j)&&(ee?o():ee=!0,t(ae,q-Q))):(D.sortIndex=de,I(X,D),oe||te||(oe=!0,e(Ee))),D},r.unstable_wrapCallback=function(D){var H=K;return function(){var q=K;K=H;try{return D.apply(this,arguments)}finally{K=q}}}})(sU);O_.exports=sU;/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){r.exports=function(t){var o={},i=os,l=G.exports,a=O_.exports;function c(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)y+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=60103,f=60106,_=60107,m=60108,v=60114,x=60109,b=60110,A=60112,k=60113,E=60120,M=60115,R=60116,I=60121,L=60129,F=60130,U=60131;if(typeof Symbol=="function"&&Symbol.for){var X=Symbol.for;h=X("react.element"),f=X("react.portal"),_=X("react.fragment"),m=X("react.strict_mode"),v=X("react.profiler"),x=X("react.provider"),b=X("react.context"),A=X("react.forward_ref"),k=X("react.suspense"),E=X("react.suspense_list"),M=X("react.memo"),R=X("react.lazy"),I=X("react.block"),X("react.scope"),L=X("react.debug_trace_mode"),F=X("react.offscreen"),U=X("react.legacy_hidden")}var j=typeof Symbol=="function"&&Symbol.iterator;function P(g){return g===null||typeof g!="object"?null:(g=j&&g[j]||g["@@iterator"],typeof g=="function"?g:null)}function z(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case _:return"Fragment";case f:return"Portal";case v:return"Profiler";case m:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case b:return(g.displayName||"Context")+".Consumer";case x:return(g._context.displayName||"Context")+".Provider";case A:var y=g.render;return y=y.displayName||y.name||"",g.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case M:return z(g.type);case I:return z(g._render);case R:y=g._payload,g=g._init;try{return z(g(y))}catch{}}return null}function K(g){var y=g,C=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,(y.flags&1026)!==0&&(C=y.return),g=y.return;while(g)}return y.tag===3?C:null}function te(g){if(K(g)!==g)throw Error(c(188))}function oe(g){var y=g.alternate;if(!y){if(y=K(g),y===null)throw Error(c(188));return y!==g?null:g}for(var C=g,O=y;;){var $=C.return;if($===null)break;var V=$.alternate;if(V===null){if(O=$.return,O!==null){C=O;continue}break}if($.child===V.child){for(V=$.child;V;){if(V===C)return te($),g;if(V===O)return te($),y;V=V.sibling}throw Error(c(188))}if(C.return!==O.return)C=$,O=V;else{for(var se=!1,ye=$.child;ye;){if(ye===C){se=!0,C=$,O=V;break}if(ye===O){se=!0,O=$,C=V;break}ye=ye.sibling}if(!se){for(ye=V.child;ye;){if(ye===C){se=!0,C=V,O=$;break}if(ye===O){se=!0,O=V,C=$;break}ye=ye.sibling}if(!se)throw Error(c(189))}}if(C.alternate!==O)throw Error(c(190))}if(C.tag!==3)throw Error(c(188));return C.stateNode.current===C?g:y}function ee(g){if(g=oe(g),!g)return null;for(var y=g;;){if(y.tag===5||y.tag===6)return y;if(y.child)y.child.return=y,y=y.child;else{if(y===g)break;for(;!y.sibling;){if(!y.return||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}}return null}function pe(g){if(g=oe(g),!g)return null;for(var y=g;;){if(y.tag===5||y.tag===6)return y;if(y.child&&y.tag!==4)y.child.return=y,y=y.child;else{if(y===g)break;for(;!y.sibling;){if(!y.return||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}}return null}function ae(g,y){for(var C=g.alternate;y!==null;){if(y===g||y===C)return!0;y=y.return}return!1}var Ee=t.getPublicInstance,S=t.getRootHostContext,D=t.getChildHostContext,H=t.prepareForCommit,q=t.resetAfterCommit,Q=t.createInstance,de=t.appendInitialChild,je=t.finalizeInitialChildren,We=t.prepareUpdate,ze=t.shouldSetTextContent,Oe=t.createTextInstance,Ye=t.scheduleTimeout,et=t.cancelTimeout,Re=t.noTimeout,Te=t.isPrimaryRenderer,Le=t.supportsMutation,Ke=t.supportsPersistence,Ne=t.supportsHydration,qe=t.getInstanceFromNode,lt=t.makeOpaqueHydratingObject,ue=t.makeClientId,rt=t.beforeActiveInstanceBlur,xt=t.afterActiveInstanceBlur,ie=t.preparePortalMount,Z=t.supportsTestSelectors,B=t.findFiberRoot,Ae=t.getBoundingRect,Ue=t.getTextContent,ge=t.isHiddenSubtree,_e=t.matchAccessibilityRole,ke=t.setFocusIfFocusable,me=t.setupIntersectionObserver,Ce=t.appendChild,le=t.appendChildToContainer,W=t.commitTextUpdate,Me=t.commitMount,we=t.commitUpdate,yt=t.insertBefore,$e=t.insertInContainerBefore,nt=t.removeChild,it=t.removeChildFromContainer,Jt=t.resetTextContent,$n=t.hideInstance,ce=t.hideTextInstance,cn=t.unhideInstance,Ie=t.unhideTextInstance,fr=t.clearContainer,da=t.cloneInstance,al=t.createContainerChildSet,Ll=t.appendChildToContainerChildSet,dc=t.finalizeContainerChildren,fa=t.replaceContainerChildren,lu=t.cloneHiddenInstance,re=t.cloneHiddenTextInstance,Se=t.canHydrateInstance,De=t.canHydrateTextInstance,xe=t.isSuspenseInstancePending,Fe=t.isSuspenseInstanceFallback,Pt=t.getNextHydratableSibling,Xt=t.getFirstHydratableChild,nn=t.hydrateInstance,en=t.hydrateTextInstance,Dn=t.getNextHydratableInstanceAfterSuspenseInstance,fn=t.commitHydratedContainer,xn=t.commitHydratedSuspenseInstance,ro;function Ui(g){if(ro===void 0)try{throw Error()}catch(C){var y=C.stack.trim().match(/\n( *(at )?)/);ro=y&&y[1]||""}return`
`+ro+g}var cs=!1;function mn(g,y){if(!g||cs)return"";cs=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Pe){var O=Pe}Reflect.construct(g,[],y)}else{try{y.call()}catch(Pe){O=Pe}g.call(y.prototype)}else{try{throw Error()}catch(Pe){O=Pe}g()}}catch(Pe){if(Pe&&O&&typeof Pe.stack=="string"){for(var $=Pe.stack.split(`
`),V=O.stack.split(`
`),se=$.length-1,ye=V.length-1;1<=se&&0<=ye&&$[se]!==V[ye];)ye--;for(;1<=se&&0<=ye;se--,ye--)if($[se]!==V[ye]){if(se!==1||ye!==1)do if(se--,ye--,0>ye||$[se]!==V[ye])return`
`+$[se].replace(" at new "," at ");while(1<=se&&0<=ye);break}}}finally{cs=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?Ui(g):""}var at=[],zn=-1;function Wo(g){return{current:g}}function Pn(g){0>zn||(g.current=at[zn],at[zn]=null,zn--)}function wn(g,y){zn++,at[zn]=g.current,g.current=y}var zo={},kn=Wo(zo),An=Wo(!1),To=zo;function au(g,y){var C=g.type.contextTypes;if(!C)return zo;var O=g.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===y)return O.__reactInternalMemoizedMaskedChildContext;var $={},V;for(V in C)$[V]=y[V];return O&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=$),$}function _i(g){return g=g.childContextTypes,g!=null}function mr(){Pn(An),Pn(kn)}function _t(g,y,C){if(kn.current!==zo)throw Error(c(168));wn(kn,y),wn(An,C)}function $r(g,y,C){var O=g.stateNode;if(g=y.childContextTypes,typeof O.getChildContext!="function")return C;O=O.getChildContext();for(var $ in O)if(!($ in g))throw Error(c(108,z(y)||"Unknown",$));return i({},C,O)}function dt(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||zo,To=kn.current,wn(kn,g),wn(An,An.current),!0}function Ct(g,y,C){var O=g.stateNode;if(!O)throw Error(c(169));C?(g=$r(g,y,To),O.__reactInternalMemoizedMergedChildContext=g,Pn(An),Pn(kn),wn(kn,g)):Pn(An),wn(An,C)}var Ms=null,ir=null,Nl=a.unstable_now;Nl();var Xo=0,Vt=8;function $l(g){if((1&g)!==0)return Vt=15,1;if((2&g)!==0)return Vt=14,2;if((4&g)!==0)return Vt=13,4;var y=24&g;return y!==0?(Vt=12,y):(g&32)!==0?(Vt=11,32):(y=192&g,y!==0?(Vt=10,y):(g&256)!==0?(Vt=9,256):(y=3584&g,y!==0?(Vt=8,y):(g&4096)!==0?(Vt=7,4096):(y=4186112&g,y!==0?(Vt=6,y):(y=62914560&g,y!==0?(Vt=5,y):g&67108864?(Vt=4,67108864):(g&134217728)!==0?(Vt=3,134217728):(y=805306368&g,y!==0?(Vt=2,y):(1073741824&g)!==0?(Vt=1,1073741824):(Vt=8,g))))))}function ig(g){switch(g){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function so(g){switch(g){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(c(358,g))}}function ma(g,y){var C=g.pendingLanes;if(C===0)return Vt=0;var O=0,$=0,V=g.expiredLanes,se=g.suspendedLanes,ye=g.pingedLanes;if(V!==0)O=V,$=Vt=15;else if(V=C&134217727,V!==0){var Pe=V&~se;Pe!==0?(O=$l(Pe),$=Vt):(ye&=V,ye!==0&&(O=$l(ye),$=Vt))}else V=C&~se,V!==0?(O=$l(V),$=Vt):ye!==0&&(O=$l(ye),$=Vt);if(O===0)return 0;if(O=31-ga(O),O=C&((0>O?0:1<<O)<<1)-1,y!==0&&y!==O&&(y&se)===0){if($l(y),$<=Vt)return y;Vt=$}if(y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=O;0<y;)C=31-ga(y),$=1<<C,O|=g[C],y&=~$;return O}function jo(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function fd(g,y){switch(g){case 15:return 1;case 14:return 2;case 12:return g=cu(24&~y),g===0?fd(10,y):g;case 10:return g=cu(192&~y),g===0?fd(8,y):g;case 8:return g=cu(3584&~y),g===0&&(g=cu(4186112&~y),g===0&&(g=512)),g;case 2:return y=cu(805306368&~y),y===0&&(y=268435456),y}throw Error(c(358,g))}function cu(g){return g&-g}function sg(g){for(var y=[],C=0;31>C;C++)y.push(g);return y}function md(g,y,C){g.pendingLanes|=y;var O=y-1;g.suspendedLanes&=O,g.pingedLanes&=O,g=g.eventTimes,y=31-ga(y),g[y]=C}var ga=Math.clz32?Math.clz32:Ov,tC=Math.log,nC=Math.LN2;function Ov(g){return g===0?32:31-(tC(g)/nC|0)|0}var Dv=a.unstable_runWithPriority,lg=a.unstable_scheduleCallback,ag=a.unstable_cancelCallback,oC=a.unstable_shouldYield,Lv=a.unstable_requestPaint,cg=a.unstable_now,rC=a.unstable_getCurrentPriorityLevel,gd=a.unstable_ImmediatePriority,Nv=a.unstable_UserBlockingPriority,ug=a.unstable_NormalPriority,$v=a.unstable_LowPriority,Pv=a.unstable_IdlePriority,uu={},us=Lv!==void 0?Lv:function(){},sr=null,Hi=null,fc=!1,Lh=cg(),kr=1e4>Lh?cg:function(){return cg()-Lh};function hu(){switch(rC()){case gd:return 99;case Nv:return 98;case ug:return 97;case $v:return 96;case Pv:return 95;default:throw Error(c(332))}}function Fv(g){switch(g){case 99:return gd;case 98:return Nv;case 97:return ug;case 96:return $v;case 95:return Pv;default:throw Error(c(332))}}function Pl(g,y){return g=Fv(g),Dv(g,y)}function Ar(g,y,C){return g=Fv(g),lg(g,y,C)}function ko(){if(Hi!==null){var g=Hi;Hi=null,ag(g)}_d()}function _d(){if(!fc&&sr!==null){fc=!0;var g=0;try{var y=sr;Pl(99,function(){for(;g<y.length;g++){var C=y[g];do C=C(!0);while(C!==null)}}),sr=null}catch(C){throw sr!==null&&(sr=sr.slice(g+1)),lg(gd,ko),C}finally{fc=!1}}}var ne=p.ReactCurrentBatchConfig;function Rs(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Oo=typeof Object.is=="function"?Object.is:Rs,cl=Object.prototype.hasOwnProperty;function ul(g,y){if(Oo(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var C=Object.keys(g),O=Object.keys(y);if(C.length!==O.length)return!1;for(O=0;O<C.length;O++)if(!cl.call(y,C[O])||!Oo(g[C[O]],y[C[O]]))return!1;return!0}function Sn(g){switch(g.tag){case 5:return Ui(g.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return g=mn(g.type,!1),g;case 11:return g=mn(g.type.render,!1),g;case 22:return g=mn(g.type._render,!1),g;case 1:return g=mn(g.type,!0),g;default:return""}}function Gi(g,y){if(g&&g.defaultProps){y=i({},y),g=g.defaultProps;for(var C in g)y[C]===void 0&&(y[C]=g[C]);return y}return y}var pu=Wo(null),fe=null,qt=null,du=null;function Fn(){du=qt=fe=null}function ei(g,y){g=g.type._context,Te?(wn(pu,g._currentValue),g._currentValue=y):(wn(pu,g._currentValue2),g._currentValue2=y)}function hg(g){var y=pu.current;Pn(pu),g=g.type._context,Te?g._currentValue=y:g._currentValue2=y}function Uv(g,y){for(;g!==null;){var C=g.alternate;if((g.childLanes&y)===y){if(C===null||(C.childLanes&y)===y)break;C.childLanes|=y}else g.childLanes|=y,C!==null&&(C.childLanes|=y);g=g.return}}function fu(g,y){fe=g,du=qt=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&y)!==0&&(Ds=!0),g.firstContext=null)}function hs(g,y){if(du!==g&&y!==!1&&y!==0)if((typeof y!="number"||y===1073741823)&&(du=g,y=1073741823),y={context:g,observedBits:y,next:null},qt===null){if(fe===null)throw Error(c(308));qt=y,fe.dependencies={lanes:0,firstContext:y,responders:null}}else qt=qt.next=y;return Te?g._currentValue:g._currentValue2}var _a=!1;function Pr(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function wr(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function gr(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function hl(g,y){if(g=g.updateQueue,g!==null){g=g.shared;var C=g.pending;C===null?y.next=y:(y.next=C.next,C.next=y),g.pending=y}}function Nh(g,y){var C=g.updateQueue,O=g.alternate;if(O!==null&&(O=O.updateQueue,C===O)){var $=null,V=null;if(C=C.firstBaseUpdate,C!==null){do{var se={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};V===null?$=V=se:V=V.next=se,C=C.next}while(C!==null);V===null?$=V=y:V=V.next=y}else $=V=y;C={baseState:O.baseState,firstBaseUpdate:$,lastBaseUpdate:V,shared:O.shared,effects:O.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=y:g.next=y,C.lastBaseUpdate=y}function mu(g,y,C,O){var $=g.updateQueue;_a=!1;var V=$.firstBaseUpdate,se=$.lastBaseUpdate,ye=$.shared.pending;if(ye!==null){$.shared.pending=null;var Pe=ye,st=Pe.next;Pe.next=null,se===null?V=st:se.next=st,se=Pe;var Nt=g.alternate;if(Nt!==null){Nt=Nt.updateQueue;var n=Nt.lastBaseUpdate;n!==se&&(n===null?Nt.firstBaseUpdate=st:n.next=st,Nt.lastBaseUpdate=Pe)}}if(V!==null){n=$.baseState,se=0,Nt=st=Pe=null;do{ye=V.lane;var s=V.eventTime;if((O&ye)===ye){Nt!==null&&(Nt=Nt.next={eventTime:s,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var u=g,d=V;switch(ye=y,s=C,d.tag){case 1:if(u=d.payload,typeof u=="function"){n=u.call(s,n,ye);break e}n=u;break e;case 3:u.flags=u.flags&-4097|64;case 0:if(u=d.payload,ye=typeof u=="function"?u.call(s,n,ye):u,ye==null)break e;n=i({},n,ye);break e;case 2:_a=!0}}V.callback!==null&&(g.flags|=32,ye=$.effects,ye===null?$.effects=[V]:ye.push(V))}else s={eventTime:s,lane:ye,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Nt===null?(st=Nt=s,Pe=n):Nt=Nt.next=s,se|=ye;if(V=V.next,V===null){if(ye=$.shared.pending,ye===null)break;V=ye.next,ye.next=null,$.lastBaseUpdate=ye,$.shared.pending=null}}while(1);Nt===null&&(Pe=n),$.baseState=Pe,$.firstBaseUpdate=st,$.lastBaseUpdate=Nt,jn|=se,g.lanes=se,g.memoizedState=n}}function pg(g,y,C){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var O=g[y],$=O.callback;if($!==null){if(O.callback=null,O=C,typeof $!="function")throw Error(c(191,$));$.call(O)}}}var dg=new l.Component().refs;function un(g,y,C,O){y=g.memoizedState,C=C(O,y),C=C==null?y:i({},y,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var yd={isMounted:function(g){return(g=g._reactInternals)?K(g)===g:!1},enqueueSetState:function(g,y,C){g=g._reactInternals;var O=Rr(),$=ho(g),V=gr(O,$);V.payload=y,C!=null&&(V.callback=C),hl(g,V),Mo(g,$,O)},enqueueReplaceState:function(g,y,C){g=g._reactInternals;var O=Rr(),$=ho(g),V=gr(O,$);V.tag=1,V.payload=y,C!=null&&(V.callback=C),hl(g,V),Mo(g,$,O)},enqueueForceUpdate:function(g,y){g=g._reactInternals;var C=Rr(),O=ho(g),$=gr(C,O);$.tag=2,y!=null&&($.callback=y),hl(g,$),Mo(g,O,C)}};function Hv(g,y,C,O,$,V,se){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(O,V,se):y.prototype&&y.prototype.isPureReactComponent?!ul(C,O)||!ul($,V):!0}function Gv(g,y,C){var O=!1,$=zo,V=y.contextType;return typeof V=="object"&&V!==null?V=hs(V):($=_i(y)?To:kn.current,O=y.contextTypes,V=(O=O!=null)?au(g,$):zo),y=new y(C,V),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=yd,g.stateNode=y,y._reactInternals=g,O&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=$,g.__reactInternalMemoizedMaskedChildContext=V),y}function Vv(g,y,C,O){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(C,O),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(C,O),y.state!==g&&yd.enqueueReplaceState(y,y.state,null)}function Ao(g,y,C,O){var $=g.stateNode;$.props=C,$.state=g.memoizedState,$.refs=dg,Pr(g);var V=y.contextType;typeof V=="object"&&V!==null?$.context=hs(V):(V=_i(y)?To:kn.current,$.context=au(g,V)),mu(g,C,$,O),$.state=g.memoizedState,V=y.getDerivedStateFromProps,typeof V=="function"&&(un(g,y,V,C),$.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(y=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),y!==$.state&&yd.enqueueReplaceState($,$.state,null),mu(g,C,$,O),$.state=g.memoizedState),typeof $.componentDidMount=="function"&&(g.flags|=4)}var $h=Array.isArray;function gu(g,y,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(c(309));var O=C.stateNode}if(!O)throw Error(c(147,g));var $=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===$?y.ref:(y=function(V){var se=O.refs;se===dg&&(se=O.refs={}),V===null?delete se[$]:se[$]=V},y._stringRef=$,y)}if(typeof g!="string")throw Error(c(284));if(!C._owner)throw Error(c(290,g))}return g}function Ph(g,y){if(g.type!=="textarea")throw Error(c(31,Object.prototype.toString.call(y)==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":y))}function Bs(g){function y(w,N){if(g){var J=w.lastEffect;J!==null?(J.nextEffect=N,w.lastEffect=N):w.firstEffect=w.lastEffect=N,N.nextEffect=null,N.flags=8}}function C(w,N){if(!g)return null;for(;N!==null;)y(w,N),N=N.sibling;return null}function O(w,N){for(w=new Map;N!==null;)N.key!==null?w.set(N.key,N):w.set(N.index,N),N=N.sibling;return w}function $(w,N){return w=Ra(w,N),w.index=0,w.sibling=null,w}function V(w,N,J){return w.index=J,g?(J=w.alternate,J!==null?(J=J.index,J<N?(w.flags=2,N):J):(w.flags=2,N)):N}function se(w){return g&&w.alternate===null&&(w.flags=2),w}function ye(w,N,J,ve){return N===null||N.tag!==6?(N=Od(J,w.mode,ve),N.return=w,N):(N=$(N,J),N.return=w,N)}function Pe(w,N,J,ve){return N!==null&&N.elementType===J.type?(ve=$(N,J.props),ve.ref=gu(w,N,J),ve.return=w,ve):(ve=Id(J.type,J.key,J.props,null,w.mode,ve),ve.ref=gu(w,N,J),ve.return=w,ve)}function st(w,N,J,ve){return N===null||N.tag!==4||N.stateNode.containerInfo!==J.containerInfo||N.stateNode.implementation!==J.implementation?(N=Zo(J,w.mode,ve),N.return=w,N):(N=$(N,J.children||[]),N.return=w,N)}function Nt(w,N,J,ve,He){return N===null||N.tag!==7?(N=bc(J,w.mode,ve,He),N.return=w,N):(N=$(N,J),N.return=w,N)}function n(w,N,J){if(typeof N=="string"||typeof N=="number")return N=Od(""+N,w.mode,J),N.return=w,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case h:return J=Id(N.type,N.key,N.props,null,w.mode,J),J.ref=gu(w,null,N),J.return=w,J;case f:return N=Zo(N,w.mode,J),N.return=w,N}if($h(N)||P(N))return N=bc(N,w.mode,J,null),N.return=w,N;Ph(w,N)}return null}function s(w,N,J,ve){var He=N!==null?N.key:null;if(typeof J=="string"||typeof J=="number")return He!==null?null:ye(w,N,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case h:return J.key===He?J.type===_?Nt(w,N,J.props.children,ve,He):Pe(w,N,J,ve):null;case f:return J.key===He?st(w,N,J,ve):null}if($h(J)||P(J))return He!==null?null:Nt(w,N,J,ve,null);Ph(w,J)}return null}function u(w,N,J,ve,He){if(typeof ve=="string"||typeof ve=="number")return w=w.get(J)||null,ye(N,w,""+ve,He);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case h:return w=w.get(ve.key===null?J:ve.key)||null,ve.type===_?Nt(N,w,ve.props.children,He,ve.key):Pe(N,w,ve,He);case f:return w=w.get(ve.key===null?J:ve.key)||null,st(N,w,ve,He)}if($h(ve)||P(ve))return w=w.get(J)||null,Nt(N,w,ve,He,null);Ph(N,ve)}return null}function d(w,N,J,ve){for(var He=null,Tt=null,bt=N,Gt=N=0,Vn=null;bt!==null&&Gt<J.length;Gt++){bt.index>Gt?(Vn=bt,bt=null):Vn=bt.sibling;var Kt=s(w,bt,J[Gt],ve);if(Kt===null){bt===null&&(bt=Vn);break}g&&bt&&Kt.alternate===null&&y(w,bt),N=V(Kt,N,Gt),Tt===null?He=Kt:Tt.sibling=Kt,Tt=Kt,bt=Vn}if(Gt===J.length)return C(w,bt),He;if(bt===null){for(;Gt<J.length;Gt++)bt=n(w,J[Gt],ve),bt!==null&&(N=V(bt,N,Gt),Tt===null?He=bt:Tt.sibling=bt,Tt=bt);return He}for(bt=O(w,bt);Gt<J.length;Gt++)Vn=u(bt,w,Gt,J[Gt],ve),Vn!==null&&(g&&Vn.alternate!==null&&bt.delete(Vn.key===null?Gt:Vn.key),N=V(Vn,N,Gt),Tt===null?He=Vn:Tt.sibling=Vn,Tt=Vn);return g&&bt.forEach(function(Qi){return y(w,Qi)}),He}function T(w,N,J,ve){var He=P(J);if(typeof He!="function")throw Error(c(150));if(J=He.call(J),J==null)throw Error(c(151));for(var Tt=He=null,bt=N,Gt=N=0,Vn=null,Kt=J.next();bt!==null&&!Kt.done;Gt++,Kt=J.next()){bt.index>Gt?(Vn=bt,bt=null):Vn=bt.sibling;var Qi=s(w,bt,Kt.value,ve);if(Qi===null){bt===null&&(bt=Vn);break}g&&bt&&Qi.alternate===null&&y(w,bt),N=V(Qi,N,Gt),Tt===null?He=Qi:Tt.sibling=Qi,Tt=Qi,bt=Vn}if(Kt.done)return C(w,bt),He;if(bt===null){for(;!Kt.done;Gt++,Kt=J.next())Kt=n(w,Kt.value,ve),Kt!==null&&(N=V(Kt,N,Gt),Tt===null?He=Kt:Tt.sibling=Kt,Tt=Kt);return He}for(bt=O(w,bt);!Kt.done;Gt++,Kt=J.next())Kt=u(bt,w,Gt,Kt.value,ve),Kt!==null&&(g&&Kt.alternate!==null&&bt.delete(Kt.key===null?Gt:Kt.key),N=V(Kt,N,Gt),Tt===null?He=Kt:Tt.sibling=Kt,Tt=Kt);return g&&bt.forEach(function(dC){return y(w,dC)}),He}return function(w,N,J,ve){var He=typeof J=="object"&&J!==null&&J.type===_&&J.key===null;He&&(J=J.props.children);var Tt=typeof J=="object"&&J!==null;if(Tt)switch(J.$$typeof){case h:e:{for(Tt=J.key,He=N;He!==null;){if(He.key===Tt){switch(He.tag){case 7:if(J.type===_){C(w,He.sibling),N=$(He,J.props.children),N.return=w,w=N;break e}break;default:if(He.elementType===J.type){C(w,He.sibling),N=$(He,J.props),N.ref=gu(w,He,J),N.return=w,w=N;break e}}C(w,He);break}else y(w,He);He=He.sibling}J.type===_?(N=bc(J.props.children,w.mode,ve,J.key),N.return=w,w=N):(ve=Id(J.type,J.key,J.props,null,w.mode,ve),ve.ref=gu(w,N,J),ve.return=w,w=ve)}return se(w);case f:e:{for(He=J.key;N!==null;){if(N.key===He)if(N.tag===4&&N.stateNode.containerInfo===J.containerInfo&&N.stateNode.implementation===J.implementation){C(w,N.sibling),N=$(N,J.children||[]),N.return=w,w=N;break e}else{C(w,N);break}else y(w,N);N=N.sibling}N=Zo(J,w.mode,ve),N.return=w,w=N}return se(w)}if(typeof J=="string"||typeof J=="number")return J=""+J,N!==null&&N.tag===6?(C(w,N.sibling),N=$(N,J),N.return=w,w=N):(C(w,N),N=Od(J,w.mode,ve),N.return=w,w=N),se(w);if($h(J))return d(w,N,J,ve);if(P(J))return T(w,N,J,ve);if(Tt&&Ph(w,J),typeof J=="undefined"&&!He)switch(w.tag){case 1:case 22:case 0:case 11:case 15:throw Error(c(152,z(w.type)||"Component"))}return C(w,N)}}var Vi=Bs(!0),ya=Bs(!1),mc={},ps=Wo(mc),Fh=Wo(mc),ti=Wo(mc);function lr(g){if(g===mc)throw Error(c(174));return g}function Do(g,y){wn(ti,y),wn(Fh,g),wn(ps,mc),g=S(y),Pn(ps),wn(ps,g)}function _r(){Pn(ps),Pn(Fh),Pn(ti)}function pl(g){var y=lr(ti.current),C=lr(ps.current);y=D(C,g.type,y),C!==y&&(wn(Fh,g),wn(ps,y))}function ft(g){Fh.current===g&&(Pn(ps),Pn(Fh))}var wo=Wo(0);function vd(g){for(var y=g;y!==null;){if(y.tag===13){var C=y.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||xe(C)||Fe(C)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&64)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Fl=null,gc=null,yr=!1;function vt(g,y){var C=bi(5,null,null,0);C.elementType="DELETED",C.type="DELETED",C.stateNode=y,C.return=g,C.flags=8,g.lastEffect!==null?(g.lastEffect.nextEffect=C,g.lastEffect=C):g.firstEffect=g.lastEffect=C}function _u(g,y){switch(g.tag){case 5:return y=Se(y,g.type,g.pendingProps),y!==null?(g.stateNode=y,!0):!1;case 6:return y=De(y,g.pendingProps),y!==null?(g.stateNode=y,!0):!1;case 13:return!1;default:return!1}}function Qe(g){if(yr){var y=gc;if(y){var C=y;if(!_u(g,y)){if(y=Pt(C),!y||!_u(g,y)){g.flags=g.flags&-1025|2,yr=!1,Fl=g;return}vt(Fl,C)}Fl=g,gc=Xt(y)}else g.flags=g.flags&-1025|2,yr=!1,Fl=g}}function yi(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Fl=g}function Fr(g){if(!Ne||g!==Fl)return!1;if(!yr)return yi(g),yr=!0,!1;var y=g.type;if(g.tag!==5||y!=="head"&&y!=="body"&&!ze(y,g.memoizedProps))for(y=gc;y;)vt(g,y),y=Pt(y);if(yi(g),g.tag===13){if(!Ne)throw Error(c(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(c(317));gc=Dn(g)}else gc=Fl?Pt(g.stateNode):null;return!0}function Wi(){Ne&&(gc=Fl=null,yr=!1)}var Is=[];function fg(){for(var g=0;g<Is.length;g++){var y=Is[g];Te?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}Is.length=0}var tn=p.ReactCurrentDispatcher,lo=p.ReactCurrentBatchConfig,zi=0,rn=null,Ur=null,ao=null,$t=!1,Ze=!1;function gn(){throw Error(c(321))}function Zn(g,y){if(y===null)return!1;for(var C=0;C<y.length&&C<g.length;C++)if(!Oo(g[C],y[C]))return!1;return!0}function va(g,y,C,O,$,V){if(zi=V,rn=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,tn.current=g===null||g.memoizedState===null?eo:No,g=C(O,$),Ze){V=0;do{if(Ze=!1,!(25>V))throw Error(c(301));V+=1,ao=Ur=null,y.updateQueue=null,tn.current=hn,g=C(O,$)}while(Ze)}if(tn.current=ji,y=Ur!==null&&Ur.next!==null,zi=0,ao=Ur=rn=null,$t=!1,y)throw Error(c(300));return g}function Os(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ao===null?rn.memoizedState=ao=g:ao=ao.next=g,ao}function dl(){if(Ur===null){var g=rn.alternate;g=g!==null?g.memoizedState:null}else g=Ur.next;var y=ao===null?rn.memoizedState:ao.next;if(y!==null)ao=y,Ur=g;else{if(g===null)throw Error(c(310));Ur=g,g={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},ao===null?rn.memoizedState=ao=g:ao=ao.next=g}return ao}function Xi(g,y){return typeof y=="function"?y(g):y}function Uh(g){var y=dl(),C=y.queue;if(C===null)throw Error(c(311));C.lastRenderedReducer=g;var O=Ur,$=O.baseQueue,V=C.pending;if(V!==null){if($!==null){var se=$.next;$.next=V.next,V.next=se}O.baseQueue=$=V,C.pending=null}if($!==null){$=$.next,O=O.baseState;var ye=se=V=null,Pe=$;do{var st=Pe.lane;if((zi&st)===st)ye!==null&&(ye=ye.next={lane:0,action:Pe.action,eagerReducer:Pe.eagerReducer,eagerState:Pe.eagerState,next:null}),O=Pe.eagerReducer===g?Pe.eagerState:g(O,Pe.action);else{var Nt={lane:st,action:Pe.action,eagerReducer:Pe.eagerReducer,eagerState:Pe.eagerState,next:null};ye===null?(se=ye=Nt,V=O):ye=ye.next=Nt,rn.lanes|=st,jn|=st}Pe=Pe.next}while(Pe!==null&&Pe!==$);ye===null?V=O:ye.next=se,Oo(O,y.memoizedState)||(Ds=!0),y.memoizedState=O,y.baseState=V,y.baseQueue=ye,C.lastRenderedState=O}return[y.memoizedState,C.dispatch]}function Ta(g){var y=dl(),C=y.queue;if(C===null)throw Error(c(311));C.lastRenderedReducer=g;var O=C.dispatch,$=C.pending,V=y.memoizedState;if($!==null){C.pending=null;var se=$=$.next;do V=g(V,se.action),se=se.next;while(se!==$);Oo(V,y.memoizedState)||(Ds=!0),y.memoizedState=V,y.baseQueue===null&&(y.baseState=V),C.lastRenderedState=V}return[V,O]}function Hr(g,y,C){var O=y._getVersion;O=O(y._source);var $=Te?y._workInProgressVersionPrimary:y._workInProgressVersionSecondary;if($!==null?g=$===O:(g=g.mutableReadLanes,(g=(zi&g)===g)&&(Te?y._workInProgressVersionPrimary=O:y._workInProgressVersionSecondary=O,Is.push(y))),g)return C(y._source);throw Is.push(y),Error(c(350))}function yu(g,y,C,O){var $=sn;if($===null)throw Error(c(349));var V=y._getVersion,se=V(y._source),ye=tn.current,Pe=ye.useState(function(){return Hr($,y,C)}),st=Pe[1],Nt=Pe[0];Pe=ao;var n=g.memoizedState,s=n.refs,u=s.getSnapshot,d=n.source;n=n.subscribe;var T=rn;return g.memoizedState={refs:s,source:y,subscribe:O},ye.useEffect(function(){s.getSnapshot=C,s.setSnapshot=st;var w=V(y._source);if(!Oo(se,w)){w=C(y._source),Oo(Nt,w)||(st(w),w=ho(T),$.mutableReadLanes|=w&$.pendingLanes),w=$.mutableReadLanes,$.entangledLanes|=w;for(var N=$.entanglements,J=w;0<J;){var ve=31-ga(J),He=1<<ve;N[ve]|=w,J&=~He}}},[C,y,O]),ye.useEffect(function(){return O(y._source,function(){var w=s.getSnapshot,N=s.setSnapshot;try{N(w(y._source));var J=ho(T);$.mutableReadLanes|=J&$.pendingLanes}catch(ve){N(function(){throw ve})}})},[y,O]),Oo(u,C)&&Oo(d,y)&&Oo(n,O)||(g={pending:null,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:Nt},g.dispatch=st=Ca.bind(null,rn,g),Pe.queue=g,Pe.baseQueue=null,Nt=Hr($,y,C),Pe.memoizedState=Pe.baseState=Nt),Nt}function Ea(g,y,C){var O=dl();return yu(O,g,y,C)}function xa(g){var y=Os();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g=y.queue={pending:null,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:g},g=g.dispatch=Ca.bind(null,rn,g),[y.memoizedState,g]}function Be(g,y,C,O){return g={tag:g,create:y,destroy:C,deps:O,next:null},y=rn.updateQueue,y===null?(y={lastEffect:null},rn.updateQueue=y,y.lastEffect=g.next=g):(C=y.lastEffect,C===null?y.lastEffect=g.next=g:(O=C.next,C.next=g,g.next=O,y.lastEffect=g)),g}function Hh(g){var y=Os();return g={current:g},y.memoizedState=g}function ds(){return dl().memoizedState}function _n(g,y,C,O){var $=Os();rn.flags|=g,$.memoizedState=Be(1|y,C,void 0,O===void 0?null:O)}function mg(g,y,C,O){var $=dl();O=O===void 0?null:O;var V=void 0;if(Ur!==null){var se=Ur.memoizedState;if(V=se.destroy,O!==null&&Zn(O,se.deps)){Be(y,C,V,O);return}}rn.flags|=g,$.memoizedState=Be(1|y,C,V,O)}function Wv(g,y){return _n(516,4,g,y)}function Td(g,y){return mg(516,4,g,y)}function Gh(g,y){return mg(4,2,g,y)}function Vh(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function Lo(g,y,C){return C=C!=null?C.concat([g]):null,mg(4,2,Vh.bind(null,y,g),C)}function vu(){}function Sa(g,y){var C=dl();y=y===void 0?null:y;var O=C.memoizedState;return O!==null&&y!==null&&Zn(y,O[1])?O[0]:(C.memoizedState=[g,y],g)}function Tu(g,y){var C=dl();y=y===void 0?null:y;var O=C.memoizedState;return O!==null&&y!==null&&Zn(y,O[1])?O[0]:(g=g(),C.memoizedState=[g,y],g)}function _c(g,y){var C=hu();Pl(98>C?98:C,function(){g(!0)}),Pl(97<C?97:C,function(){var O=lo.transition;lo.transition=1;try{g(!1),y()}finally{lo.transition=O}})}function Ca(g,y,C){var O=Rr(),$=ho(g),V={lane:$,action:C,eagerReducer:null,eagerState:null,next:null},se=y.pending;if(se===null?V.next=V:(V.next=se.next,se.next=V),y.pending=V,se=g.alternate,g===rn||se!==null&&se===rn)Ze=$t=!0;else{if(g.lanes===0&&(se===null||se.lanes===0)&&(se=y.lastRenderedReducer,se!==null))try{var ye=y.lastRenderedState,Pe=se(ye,C);if(V.eagerReducer=se,V.eagerState=Pe,Oo(Pe,ye))return}catch{}finally{}Mo(g,$,O)}}var ji={readContext:hs,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useOpaqueIdentifier:gn,unstable_isNewReconciler:!1},eo={readContext:hs,useCallback:function(g,y){return Os().memoizedState=[g,y===void 0?null:y],g},useContext:hs,useEffect:Wv,useImperativeHandle:function(g,y,C){return C=C!=null?C.concat([g]):null,_n(4,2,Vh.bind(null,y,g),C)},useLayoutEffect:function(g,y){return _n(4,2,g,y)},useMemo:function(g,y){var C=Os();return y=y===void 0?null:y,g=g(),C.memoizedState=[g,y],g},useReducer:function(g,y,C){var O=Os();return y=C!==void 0?C(y):y,O.memoizedState=O.baseState=y,g=O.queue={pending:null,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},g=g.dispatch=Ca.bind(null,rn,g),[O.memoizedState,g]},useRef:Hh,useState:xa,useDebugValue:vu,useDeferredValue:function(g){var y=xa(g),C=y[0],O=y[1];return Wv(function(){var $=lo.transition;lo.transition=1;try{O(g)}finally{lo.transition=$}},[g]),C},useTransition:function(){var g=xa(!1),y=g[0];return g=_c.bind(null,g[1]),Hh(g),[g,y]},useMutableSource:function(g,y,C){var O=Os();return O.memoizedState={refs:{getSnapshot:y,setSnapshot:null},source:g,subscribe:C},yu(O,g,y,C)},useOpaqueIdentifier:function(){if(yr){var g=!1,y=lt(function(){throw g||(g=!0,C(ue())),Error(c(355))}),C=xa(y)[1];return(rn.mode&2)===0&&(rn.flags|=516,Be(5,function(){C(ue())},void 0,null)),y}return y=ue(),xa(y),y},unstable_isNewReconciler:!1},No={readContext:hs,useCallback:Sa,useContext:hs,useEffect:Td,useImperativeHandle:Lo,useLayoutEffect:Gh,useMemo:Tu,useReducer:Uh,useRef:ds,useState:function(){return Uh(Xi)},useDebugValue:vu,useDeferredValue:function(g){var y=Uh(Xi),C=y[0],O=y[1];return Td(function(){var $=lo.transition;lo.transition=1;try{O(g)}finally{lo.transition=$}},[g]),C},useTransition:function(){var g=Uh(Xi)[0];return[ds().current,g]},useMutableSource:Ea,useOpaqueIdentifier:function(){return Uh(Xi)[0]},unstable_isNewReconciler:!1},hn={readContext:hs,useCallback:Sa,useContext:hs,useEffect:Td,useImperativeHandle:Lo,useLayoutEffect:Gh,useMemo:Tu,useReducer:Ta,useRef:ds,useState:function(){return Ta(Xi)},useDebugValue:vu,useDeferredValue:function(g){var y=Ta(Xi),C=y[0],O=y[1];return Td(function(){var $=lo.transition;lo.transition=1;try{O(g)}finally{lo.transition=$}},[g]),C},useTransition:function(){var g=Ta(Xi)[0];return[ds().current,g]},useMutableSource:Ea,useOpaqueIdentifier:function(){return Ta(Xi)[0]},unstable_isNewReconciler:!1},yc=p.ReactCurrentOwner,Ds=!1;function vi(g,y,C,O){y.child=g===null?ya(y,null,C,O):Vi(y,g.child,C,O)}function zv(g,y,C,O,$){C=C.render;var V=y.ref;return fu(y,$),O=va(g,y,C,O,V,$),g!==null&&!Ds?(y.updateQueue=g.updateQueue,y.flags&=-517,g.lanes&=~$,Ft(g,y,$)):(y.flags|=1,vi(g,y,O,$),y.child)}function gg(g,y,C,O,$,V){if(g===null){var se=C.type;return typeof se=="function"&&!Kh(se)&&se.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(y.tag=15,y.type=se,Ed(g,y,se,O,$,V)):(g=Id(C.type,null,O,y,y.mode,V),g.ref=y.ref,g.return=y,y.child=g)}return se=g.child,($&V)===0&&($=se.memoizedProps,C=C.compare,C=C!==null?C:ul,C($,O)&&g.ref===y.ref)?Ft(g,y,V):(y.flags|=1,g=Ra(se,O),g.ref=y.ref,g.return=y,y.child=g)}function Ed(g,y,C,O,$,V){if(g!==null&&ul(g.memoizedProps,O)&&g.ref===y.ref)if(Ds=!1,(V&$)!==0)(g.flags&16384)!==0&&(Ds=!0);else return y.lanes=g.lanes,Ft(g,y,V);return _g(g,y,C,O,V)}function xd(g,y,C){var O=y.pendingProps,$=O.children,V=g!==null?g.memoizedState:null;if(O.mode==="hidden"||O.mode==="unstable-defer-without-hiding")if((y.mode&4)===0)y.memoizedState={baseLanes:0},ms(y,C);else if((C&1073741824)!==0)y.memoizedState={baseLanes:0},ms(y,V!==null?V.baseLanes:C);else return g=V!==null?V.baseLanes|C:C,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g},ms(y,g),null;else V!==null?(O=V.baseLanes|C,y.memoizedState=null):O=C,ms(y,O);return vi(g,y,$,C),y.child}function Sd(g,y){var C=y.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(y.flags|=128)}function _g(g,y,C,O,$){var V=_i(C)?To:kn.current;return V=au(y,V),fu(y,$),C=va(g,y,C,O,V,$),g!==null&&!Ds?(y.updateQueue=g.updateQueue,y.flags&=-517,g.lanes&=~$,Ft(g,y,$)):(y.flags|=1,vi(g,y,C,$),y.child)}function Xv(g,y,C,O,$){if(_i(C)){var V=!0;dt(y)}else V=!1;if(fu(y,$),y.stateNode===null)g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),Gv(y,C,O),Ao(y,C,O,$),O=!0;else if(g===null){var se=y.stateNode,ye=y.memoizedProps;se.props=ye;var Pe=se.context,st=C.contextType;typeof st=="object"&&st!==null?st=hs(st):(st=_i(C)?To:kn.current,st=au(y,st));var Nt=C.getDerivedStateFromProps,n=typeof Nt=="function"||typeof se.getSnapshotBeforeUpdate=="function";n||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ye!==O||Pe!==st)&&Vv(y,se,O,st),_a=!1;var s=y.memoizedState;se.state=s,mu(y,O,se,$),Pe=y.memoizedState,ye!==O||s!==Pe||An.current||_a?(typeof Nt=="function"&&(un(y,C,Nt,O),Pe=y.memoizedState),(ye=_a||Hv(y,C,ye,O,s,Pe,st))?(n||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(y.flags|=4)):(typeof se.componentDidMount=="function"&&(y.flags|=4),y.memoizedProps=O,y.memoizedState=Pe),se.props=O,se.state=Pe,se.context=st,O=ye):(typeof se.componentDidMount=="function"&&(y.flags|=4),O=!1)}else{se=y.stateNode,wr(g,y),ye=y.memoizedProps,st=y.type===y.elementType?ye:Gi(y.type,ye),se.props=st,n=y.pendingProps,s=se.context,Pe=C.contextType,typeof Pe=="object"&&Pe!==null?Pe=hs(Pe):(Pe=_i(C)?To:kn.current,Pe=au(y,Pe));var u=C.getDerivedStateFromProps;(Nt=typeof u=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ye!==n||s!==Pe)&&Vv(y,se,O,Pe),_a=!1,s=y.memoizedState,se.state=s,mu(y,O,se,$);var d=y.memoizedState;ye!==n||s!==d||An.current||_a?(typeof u=="function"&&(un(y,C,u,O),d=y.memoizedState),(st=_a||Hv(y,C,st,O,s,d,Pe))?(Nt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(O,d,Pe),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(O,d,Pe)),typeof se.componentDidUpdate=="function"&&(y.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(y.flags|=256)):(typeof se.componentDidUpdate!="function"||ye===g.memoizedProps&&s===g.memoizedState||(y.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||ye===g.memoizedProps&&s===g.memoizedState||(y.flags|=256),y.memoizedProps=O,y.memoizedState=d),se.props=O,se.state=d,se.context=Pe,O=st):(typeof se.componentDidUpdate!="function"||ye===g.memoizedProps&&s===g.memoizedState||(y.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||ye===g.memoizedProps&&s===g.memoizedState||(y.flags|=256),O=!1)}return yg(g,y,C,O,V,$)}function yg(g,y,C,O,$,V){Sd(g,y);var se=(y.flags&64)!==0;if(!O&&!se)return $&&Ct(y,C,!1),Ft(g,y,V);O=y.stateNode,yc.current=y;var ye=se&&typeof C.getDerivedStateFromError!="function"?null:O.render();return y.flags|=1,g!==null&&se?(y.child=Vi(y,g.child,null,V),y.child=Vi(y,null,ye,V)):vi(g,y,ye,V),y.memoizedState=O.state,$&&Ct(y,C,!0),y.child}function jv(g){var y=g.stateNode;y.pendingContext?_t(g,y.pendingContext,y.pendingContext!==y.context):y.context&&_t(g,y.context,!1),Do(g,y.containerInfo)}var Ht={dehydrated:null,retryLane:0};function Ls(g,y,C){var O=y.pendingProps,$=wo.current,V=!1,se;return(se=(y.flags&64)!==0)||(se=g!==null&&g.memoizedState===null?!1:($&2)!==0),se?(V=!0,y.flags&=-65):g!==null&&g.memoizedState===null||O.fallback===void 0||O.unstable_avoidThisFallback===!0||($|=1),wn(wo,$&1),g===null?(O.fallback!==void 0&&Qe(y),g=O.children,$=O.fallback,V?(g=Je(y,g,$,C),y.child.memoizedState={baseLanes:C},y.memoizedState=Ht,g):typeof O.unstable_expectedLoadTime=="number"?(g=Je(y,g,$,C),y.child.memoizedState={baseLanes:C},y.memoizedState=Ht,y.lanes=33554432,g):(C=Cg({mode:"visible",children:g},y.mode,C,null),C.return=y,y.child=C)):g.memoizedState!==null?V?(O=Jv(g,y,O.children,O.fallback,C),V=y.child,$=g.child.memoizedState,V.memoizedState=$===null?{baseLanes:C}:{baseLanes:$.baseLanes|C},V.childLanes=g.childLanes&~C,y.memoizedState=Ht,O):(C=on(g,y,O.children,C),y.memoizedState=null,C):V?(O=Jv(g,y,O.children,O.fallback,C),V=y.child,$=g.child.memoizedState,V.memoizedState=$===null?{baseLanes:C}:{baseLanes:$.baseLanes|C},V.childLanes=g.childLanes&~C,y.memoizedState=Ht,O):(C=on(g,y,O.children,C),y.memoizedState=null,C)}function Je(g,y,C,O){var $=g.mode,V=g.child;return y={mode:"hidden",children:y},($&2)===0&&V!==null?(V.childLanes=0,V.pendingProps=y):V=Cg(y,$,0,null),C=bc(C,$,O,null),V.return=g,C.return=g,V.sibling=C,g.child=V,C}function on(g,y,C,O){var $=g.child;return g=$.sibling,C=Ra($,{mode:"visible",children:C}),(y.mode&2)===0&&(C.lanes=O),C.return=y,C.sibling=null,g!==null&&(g.nextEffect=null,g.flags=8,y.firstEffect=y.lastEffect=g),y.child=C}function Jv(g,y,C,O,$){var V=y.mode,se=g.child;g=se.sibling;var ye={mode:"hidden",children:C};return(V&2)===0&&y.child!==se?(C=y.child,C.childLanes=0,C.pendingProps=ye,se=C.lastEffect,se!==null?(y.firstEffect=C.firstEffect,y.lastEffect=se,se.nextEffect=null):y.firstEffect=y.lastEffect=null):C=Ra(se,ye),g!==null?O=Ra(g,O):(O=bc(O,V,$,null),O.flags|=2),O.return=y,C.return=y,C.sibling=O,y.child=C,O}function Kv(g,y){g.lanes|=y;var C=g.alternate;C!==null&&(C.lanes|=y),Uv(g.return,y)}function vg(g,y,C,O,$,V){var se=g.memoizedState;se===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:O,tail:C,tailMode:$,lastEffect:V}:(se.isBackwards=y,se.rendering=null,se.renderingStartTime=0,se.last=O,se.tail=C,se.tailMode=$,se.lastEffect=V)}function Yv(g,y,C){var O=y.pendingProps,$=O.revealOrder,V=O.tail;if(vi(g,y,O.children,C),O=wo.current,(O&2)!==0)O=O&1|2,y.flags|=64;else{if(g!==null&&(g.flags&64)!==0)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&Kv(g,C);else if(g.tag===19)Kv(g,C);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}O&=1}if(wn(wo,O),(y.mode&2)===0)y.memoizedState=null;else switch($){case"forwards":for(C=y.child,$=null;C!==null;)g=C.alternate,g!==null&&vd(g)===null&&($=C),C=C.sibling;C=$,C===null?($=y.child,y.child=null):($=C.sibling,C.sibling=null),vg(y,!1,$,C,V,y.lastEffect);break;case"backwards":for(C=null,$=y.child,y.child=null;$!==null;){if(g=$.alternate,g!==null&&vd(g)===null){y.child=$;break}g=$.sibling,$.sibling=C,C=$,$=g}vg(y,!0,C,null,V,y.lastEffect);break;case"together":vg(y,!1,null,null,void 0,y.lastEffect);break;default:y.memoizedState=null}return y.child}function Ft(g,y,C){if(g!==null&&(y.dependencies=g.dependencies),jn|=y.lanes,(C&y.childLanes)!==0){if(g!==null&&y.child!==g.child)throw Error(c(153));if(y.child!==null){for(g=y.child,C=Ra(g,g.pendingProps),y.child=C,C.return=y;g.sibling!==null;)g=g.sibling,C=C.sibling=Ra(g,g.pendingProps),C.return=y;C.sibling=null}return y.child}return null}function vr(g){g.flags|=4}var Ji,Jo,ba,fs;if(Le)Ji=function(g,y){for(var C=y.child;C!==null;){if(C.tag===5||C.tag===6)de(g,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Jo=function(){},ba=function(g,y,C,O,$){if(g=g.memoizedProps,g!==O){var V=y.stateNode,se=lr(ps.current);C=We(V,C,g,O,$,se),(y.updateQueue=C)&&vr(y)}},fs=function(g,y,C,O){C!==O&&vr(y)};else if(Ke){Ji=function(g,y,C,O){for(var $=y.child;$!==null;){if($.tag===5){var V=$.stateNode;C&&O&&(V=lu(V,$.type,$.memoizedProps,$)),de(g,V)}else if($.tag===6)V=$.stateNode,C&&O&&(V=re(V,$.memoizedProps,$)),de(g,V);else if($.tag!==4){if($.tag===13&&($.flags&4)!==0&&(V=$.memoizedState!==null)){var se=$.child;if(se!==null&&(se.child!==null&&(se.child.return=se,Ji(g,se,!0,V)),V=se.sibling,V!==null)){V.return=$,$=V;continue}}if($.child!==null){$.child.return=$,$=$.child;continue}}if($===y)break;for(;$.sibling===null;){if($.return===null||$.return===y)return;$=$.return}$.sibling.return=$.return,$=$.sibling}};var Xe=function(g,y,C,O){for(var $=y.child;$!==null;){if($.tag===5){var V=$.stateNode;C&&O&&(V=lu(V,$.type,$.memoizedProps,$)),Ll(g,V)}else if($.tag===6)V=$.stateNode,C&&O&&(V=re(V,$.memoizedProps,$)),Ll(g,V);else if($.tag!==4){if($.tag===13&&($.flags&4)!==0&&(V=$.memoizedState!==null)){var se=$.child;if(se!==null&&(se.child!==null&&(se.child.return=se,Xe(g,se,!0,V)),V=se.sibling,V!==null)){V.return=$,$=V;continue}}if($.child!==null){$.child.return=$,$=$.child;continue}}if($===y)break;for(;$.sibling===null;){if($.return===null||$.return===y)return;$=$.return}$.sibling.return=$.return,$=$.sibling}};Jo=function(g){var y=g.stateNode;if(g.firstEffect!==null){var C=y.containerInfo,O=al(C);Xe(O,g,!1,!1),y.pendingChildren=O,vr(g),dc(C,O)}},ba=function(g,y,C,O,$){var V=g.stateNode,se=g.memoizedProps;if((g=y.firstEffect===null)&&se===O)y.stateNode=V;else{var ye=y.stateNode,Pe=lr(ps.current),st=null;se!==O&&(st=We(ye,C,se,O,$,Pe)),g&&st===null?y.stateNode=V:(V=da(V,st,C,se,O,y,g,ye),je(V,C,O,$,Pe)&&vr(y),y.stateNode=V,g?vr(y):Ji(V,y,!1,!1))}},fs=function(g,y,C,O){C!==O?(g=lr(ti.current),C=lr(ps.current),y.stateNode=Oe(O,g,C,y),vr(y)):y.stateNode=g.stateNode}}else Jo=function(){},ba=function(){},fs=function(){};function Tr(g,y){if(!yr)switch(g.tailMode){case"hidden":y=g.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var O=null;C!==null;)C.alternate!==null&&(O=C),C=C.sibling;O===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:O.sibling=null}}function Ul(g,y,C){var O=y.pendingProps;switch(y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return _i(y.type)&&mr(),null;case 3:return _r(),Pn(An),Pn(kn),fg(),O=y.stateNode,O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(g===null||g.child===null)&&(Fr(y)?vr(y):O.hydrate||(y.flags|=256)),Jo(y),null;case 5:ft(y);var $=lr(ti.current);if(C=y.type,g!==null&&y.stateNode!=null)ba(g,y,C,O,$),g.ref!==y.ref&&(y.flags|=128);else{if(!O){if(y.stateNode===null)throw Error(c(166));return null}if(g=lr(ps.current),Fr(y)){if(!Ne)throw Error(c(175));g=nn(y.stateNode,y.type,y.memoizedProps,$,g,y),y.updateQueue=g,g!==null&&vr(y)}else{var V=Q(C,O,$,g,y);Ji(V,y,!1,!1),y.stateNode=V,je(V,C,O,$,g)&&vr(y)}y.ref!==null&&(y.flags|=128)}return null;case 6:if(g&&y.stateNode!=null)fs(g,y,g.memoizedProps,O);else{if(typeof O!="string"&&y.stateNode===null)throw Error(c(166));if(g=lr(ti.current),$=lr(ps.current),Fr(y)){if(!Ne)throw Error(c(176));en(y.stateNode,y.memoizedProps,y)&&vr(y)}else y.stateNode=Oe(O,g,$,y)}return null;case 13:return Pn(wo),O=y.memoizedState,(y.flags&64)!==0?(y.lanes=C,y):(O=O!==null,$=!1,g===null?y.memoizedProps.fallback!==void 0&&Fr(y):$=g.memoizedState!==null,O&&!$&&(y.mode&2)!==0&&(g===null&&y.memoizedProps.unstable_avoidThisFallback!==!0||(wo.current&1)!==0?Ko===0&&(Ko=3):((Ko===0||Ko===3)&&(Ko=4),sn===null||(jn&134217727)===0&&($o&134217727)===0||Su(sn,Ot))),Ke&&O&&(y.flags|=4),Le&&(O||$)&&(y.flags|=4),null);case 4:return _r(),Jo(y),g===null&&ie(y.stateNode.containerInfo),null;case 10:return hg(y),null;case 17:return _i(y.type)&&mr(),null;case 19:if(Pn(wo),O=y.memoizedState,O===null)return null;if($=(y.flags&64)!==0,V=O.rendering,V===null)if($)Tr(O,!1);else{if(Ko!==0||g!==null&&(g.flags&64)!==0)for(g=y.child;g!==null;){if(V=vd(g),V!==null){for(y.flags|=64,Tr(O,!1),g=V.updateQueue,g!==null&&(y.updateQueue=g,y.flags|=4),O.lastEffect===null&&(y.firstEffect=null),y.lastEffect=O.lastEffect,g=C,O=y.child;O!==null;)$=O,C=g,$.flags&=2,$.nextEffect=null,$.firstEffect=null,$.lastEffect=null,V=$.alternate,V===null?($.childLanes=0,$.lanes=C,$.child=null,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=V.childLanes,$.lanes=V.lanes,$.child=V.child,$.memoizedProps=V.memoizedProps,$.memoizedState=V.memoizedState,$.updateQueue=V.updateQueue,$.type=V.type,C=V.dependencies,$.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),O=O.sibling;return wn(wo,wo.current&1|2),y.child}g=g.sibling}O.tail!==null&&kr()>Ei&&(y.flags|=64,$=!0,Tr(O,!1),y.lanes=33554432)}else{if(!$)if(g=vd(V),g!==null){if(y.flags|=64,$=!0,g=g.updateQueue,g!==null&&(y.updateQueue=g,y.flags|=4),Tr(O,!0),O.tail===null&&O.tailMode==="hidden"&&!V.alternate&&!yr)return y=y.lastEffect=O.lastEffect,y!==null&&(y.nextEffect=null),null}else 2*kr()-O.renderingStartTime>Ei&&C!==1073741824&&(y.flags|=64,$=!0,Tr(O,!1),y.lanes=33554432);O.isBackwards?(V.sibling=y.child,y.child=V):(g=O.last,g!==null?g.sibling=V:y.child=V,O.last=V)}return O.tail!==null?(g=O.tail,O.rendering=g,O.tail=g.sibling,O.lastEffect=y.lastEffect,O.renderingStartTime=kr(),g.sibling=null,y=wo.current,wn(wo,$?y&1|2:y&1),g):null;case 23:case 24:return qi(),g!==null&&g.memoizedState!==null!=(y.memoizedState!==null)&&O.mode!=="unstable-defer-without-hiding"&&(y.flags|=4),null}throw Error(c(156,y.tag))}function io(g){switch(g.tag){case 1:_i(g.type)&&mr();var y=g.flags;return y&4096?(g.flags=y&-4097|64,g):null;case 3:if(_r(),Pn(An),Pn(kn),fg(),y=g.flags,(y&64)!==0)throw Error(c(285));return g.flags=y&-4097|64,g;case 5:return ft(g),null;case 13:return Pn(wo),y=g.flags,y&4096?(g.flags=y&-4097|64,g):null;case 19:return Pn(wo),null;case 4:return _r(),null;case 10:return hg(g),null;case 23:case 24:return qi(),null;default:return null}}function Hl(g,y){try{var C="",O=y;do C+=Sn(O),O=O.return;while(O);var $=C}catch(V){$=`
Error generating stack: `+V.message+`
`+V.stack}return{value:g,source:y,stack:$}}function Ns(g,y){try{console.error(y.value)}catch(C){setTimeout(function(){throw C})}}var Gl=typeof WeakMap=="function"?WeakMap:Map;function qv(g,y,C){C=gr(-1,C),C.tag=3,C.payload={element:null};var O=y.value;return C.callback=function(){ka||(ka=!0,Wh=O),Ns(g,y)},C}function Mr(g,y,C){C=gr(-1,C),C.tag=3;var O=g.type.getDerivedStateFromError;if(typeof O=="function"){var $=y.value;C.payload=function(){return Ns(g,y),O($)}}var V=g.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(C.callback=function(){typeof O!="function"&&(fl===null?fl=new Set([this]):fl.add(this),Ns(g,y));var se=y.stack;this.componentDidCatch(y.value,{componentStack:se!==null?se:""})}),C}var be=typeof WeakSet=="function"?WeakSet:Set;function Qv(g){var y=g.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(C){pn(g,C)}else y.current=null}function iC(g,y){switch(y.tag){case 0:case 11:case 15:case 22:return;case 1:if(y.flags&256&&g!==null){var C=g.memoizedProps,O=g.memoizedState;g=y.stateNode,y=g.getSnapshotBeforeUpdate(y.elementType===y.type?C:Gi(y.type,C),O),g.__reactInternalSnapshotBeforeUpdate=y}return;case 3:Le&&y.flags&256&&fr(y.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(c(163))}function Zv(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&g)===g){var O=C.destroy;C.destroy=void 0,O!==void 0&&O()}C=C.next}while(C!==y)}}function sC(g,y,C){switch(C.tag){case 0:case 11:case 15:case 22:if(y=C.updateQueue,y=y!==null?y.lastEffect:null,y!==null){g=y=y.next;do{if((g.tag&3)===3){var O=g.create;g.destroy=O()}g=g.next}while(g!==y)}if(y=C.updateQueue,y=y!==null?y.lastEffect:null,y!==null){g=y=y.next;do{var $=g;O=$.next,$=$.tag,($&4)!==0&&($&1)!==0&&(Ro(C,g),Po(C,g)),g=O}while(g!==y)}return;case 1:g=C.stateNode,C.flags&4&&(y===null?g.componentDidMount():(O=C.elementType===C.type?y.memoizedProps:Gi(C.type,y.memoizedProps),g.componentDidUpdate(O,y.memoizedState,g.__reactInternalSnapshotBeforeUpdate))),y=C.updateQueue,y!==null&&pg(C,y,g);return;case 3:if(y=C.updateQueue,y!==null){if(g=null,C.child!==null)switch(C.child.tag){case 5:g=Ee(C.child.stateNode);break;case 1:g=C.child.stateNode}pg(C,y,g)}return;case 5:g=C.stateNode,y===null&&C.flags&4&&Me(g,C.type,C.memoizedProps,C);return;case 6:return;case 4:return;case 12:return;case 13:Ne&&C.memoizedState===null&&(C=C.alternate,C!==null&&(C=C.memoizedState,C!==null&&(C=C.dehydrated,C!==null&&xn(C))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(c(163))}function eT(g,y){if(Le)for(var C=g;;){if(C.tag===5){var O=C.stateNode;y?$n(O):cn(C.stateNode,C.memoizedProps)}else if(C.tag===6)O=C.stateNode,y?ce(O):Ie(O,C.memoizedProps);else if((C.tag!==23&&C.tag!==24||C.memoizedState===null||C===g)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function Tg(g,y){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(Ms,y)}catch{}switch(y.tag){case 0:case 11:case 14:case 15:case 22:if(g=y.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var C=g=g.next;do{var O=C,$=O.destroy;if(O=O.tag,$!==void 0)if((O&4)!==0)Ro(y,C);else{O=y;try{$()}catch(V){pn(O,V)}}C=C.next}while(C!==g)}break;case 1:if(Qv(y),g=y.stateNode,typeof g.componentWillUnmount=="function")try{g.props=y.memoizedProps,g.state=y.memoizedState,g.componentWillUnmount()}catch(V){pn(y,V)}break;case 5:Qv(y);break;case 4:Le?Wl(g,y):Ke&&Ke&&(y=y.stateNode.containerInfo,g=al(y),fa(y,g))}}function tT(g,y){for(var C=y;;)if(Tg(g,C),C.child===null||Le&&C.tag===4){if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else C.child.return=C,C=C.child}function nT(g){g.alternate=null,g.child=null,g.dependencies=null,g.firstEffect=null,g.lastEffect=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.return=null,g.updateQueue=null}function oT(g){return g.tag===5||g.tag===3||g.tag===4}function rT(g){if(Le){e:{for(var y=g.return;y!==null;){if(oT(y))break e;y=y.return}throw Error(c(160))}var C=y;switch(y=C.stateNode,C.tag){case 5:var O=!1;break;case 3:y=y.containerInfo,O=!0;break;case 4:y=y.containerInfo,O=!0;break;default:throw Error(c(161))}C.flags&16&&(Jt(y),C.flags&=-17);e:t:for(C=g;;){for(;C.sibling===null;){if(C.return===null||oT(C.return)){C=null;break e}C=C.return}for(C.sibling.return=C.return,C=C.sibling;C.tag!==5&&C.tag!==6&&C.tag!==18;){if(C.flags&2||C.child===null||C.tag===4)continue t;C.child.return=C,C=C.child}if(!(C.flags&2)){C=C.stateNode;break e}}O?Vl(g,C,y):Eg(g,C,y)}}function Vl(g,y,C){var O=g.tag,$=O===5||O===6;if($)g=$?g.stateNode:g.stateNode.instance,y?$e(C,g,y):le(C,g);else if(O!==4&&(g=g.child,g!==null))for(Vl(g,y,C),g=g.sibling;g!==null;)Vl(g,y,C),g=g.sibling}function Eg(g,y,C){var O=g.tag,$=O===5||O===6;if($)g=$?g.stateNode:g.stateNode.instance,y?yt(C,g,y):Ce(C,g);else if(O!==4&&(g=g.child,g!==null))for(Eg(g,y,C),g=g.sibling;g!==null;)Eg(g,y,C),g=g.sibling}function Wl(g,y){for(var C=y,O=!1,$,V;;){if(!O){O=C.return;e:for(;;){if(O===null)throw Error(c(160));switch($=O.stateNode,O.tag){case 5:V=!1;break e;case 3:$=$.containerInfo,V=!0;break e;case 4:$=$.containerInfo,V=!0;break e}O=O.return}O=!0}if(C.tag===5||C.tag===6)tT(g,C),V?it($,C.stateNode):nt($,C.stateNode);else if(C.tag===4){if(C.child!==null){$=C.stateNode.containerInfo,V=!0,C.child.return=C,C=C.child;continue}}else if(Tg(g,C),C.child!==null){C.child.return=C,C=C.child;continue}if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return,C.tag===4&&(O=!1)}C.sibling.return=C.return,C=C.sibling}}function zl(g,y){if(Le){switch(y.tag){case 0:case 11:case 14:case 15:case 22:Zv(3,y);return;case 1:return;case 5:var C=y.stateNode;if(C!=null){var O=y.memoizedProps;g=g!==null?g.memoizedProps:O;var $=y.type,V=y.updateQueue;y.updateQueue=null,V!==null&&we(C,V,$,g,O,y)}return;case 6:if(y.stateNode===null)throw Error(c(162));C=y.memoizedProps,W(y.stateNode,g!==null?g.memoizedProps:C,C);return;case 3:Ne&&(y=y.stateNode,y.hydrate&&(y.hydrate=!1,fn(y.containerInfo)));return;case 12:return;case 13:iT(y),Bt(y);return;case 19:Bt(y);return;case 17:return;case 23:case 24:eT(y,y.memoizedState!==null);return}throw Error(c(163))}switch(y.tag){case 0:case 11:case 14:case 15:case 22:Zv(3,y);return;case 12:return;case 13:iT(y),Bt(y);return;case 19:Bt(y);return;case 3:Ne&&(C=y.stateNode,C.hydrate&&(C.hydrate=!1,fn(C.containerInfo)));break;case 23:case 24:return}e:if(Ke){switch(y.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:y=y.stateNode,fa(y.containerInfo,y.pendingChildren);break e}throw Error(c(163))}}function iT(g){g.memoizedState!==null&&(to=kr(),Le&&eT(g.child,!0))}function Bt(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new be),y.forEach(function(O){var $=Br.bind(null,g,O);C.has(O)||(C.add(O),O.then($,$))})}}function Gr(g,y){return g!==null&&(g=g.memoizedState,g===null||g.dehydrated!==null)?(y=y.memoizedState,y!==null&&y.dehydrated===null):!1}var Cd=0,bd=1,kd=2,Ti=3,Wt=4;if(typeof Symbol=="function"&&Symbol.for){var ni=Symbol.for;Cd=ni("selector.component"),bd=ni("selector.has_pseudo_class"),kd=ni("selector.role"),Ti=ni("selector.test_id"),Wt=ni("selector.text")}function Xn(g){var y=qe(g);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(c(364));return y}if(g=B(g),g===null)throw Error(c(362));return g.stateNode.current}function xg(g,y){switch(y.$$typeof){case Cd:if(g.type===y.value)return!0;break;case bd:e:{y=y.value,g=[g,0];for(var C=0;C<g.length;){var O=g[C++],$=g[C++],V=y[$];if(O.tag!==5||!ge(O)){for(;V!=null&&xg(O,V);)$++,V=y[$];if($===y.length){y=!0;break e}else for(O=O.child;O!==null;)g.push(O,$),O=O.sibling}}y=!1}return y;case kd:if(g.tag===5&&_e(g.stateNode,y.value))return!0;break;case Wt:if((g.tag===5||g.tag===6)&&(g=Ue(g),g!==null&&0<=g.indexOf(y.value)))return!0;break;case Ti:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(c(365,y))}return!1}function Sg(g){switch(g.$$typeof){case Cd:return"<"+(z(g.value)||"Unknown")+">";case bd:return":has("+(Sg(g)||"")+")";case kd:return'[role="'+g.value+'"]';case Wt:return'"'+g.value+'"';case Ti:return'[data-testname="'+g.value+'"]';default:throw Error(c(365,g))}}function sT(g,y){var C=[];g=[g,0];for(var O=0;O<g.length;){var $=g[O++],V=g[O++],se=y[V];if($.tag!==5||!ge($)){for(;se!=null&&xg($,se);)V++,se=y[V];if(V===y.length)C.push($);else for($=$.child;$!==null;)g.push($,V),$=$.sibling}}return C}function $s(g,y){if(!Z)throw Error(c(363));g=Xn(g),g=sT(g,y),y=[],g=Array.from(g);for(var C=0;C<g.length;){var O=g[C++];if(O.tag===5)ge(O)||y.push(O.stateNode);else for(O=O.child;O!==null;)g.push(O),O=O.sibling}return y}var It=null;function oi(g){if(It===null)try{var y=("require"+Math.random()).slice(0,7);It=(r&&r[y]).call(r,"timers").setImmediate}catch{It=function(O){var $=new MessageChannel;$.port1.onmessage=O,$.port2.postMessage(void 0)}}return It(g)}var lC=Math.ceil,Ad=p.ReactCurrentDispatcher,wd=p.ReactCurrentOwner,Cn=p.IsSomeRendererActing,mt=0,sn=null,co=null,Ot=0,Et=0,Xl=Wo(0),Ko=0,vc=null,Yo=0,jn=0,$o=0,qo=0,jl=null,to=0,Ei=1/0;function Er(){Ei=kr()+500}var pt=null,ka=!1,Wh=null,fl=null,Aa=!1,wa=null,Ma=90,Eu=[],Tc=[],ri=null,Jl=0,xu=null,Vr=-1,xi=0,Si=0,Jn=null,Ki=!1;function Rr(){return(mt&48)!==0?kr():Vr!==-1?Vr:Vr=kr()}function ho(g){if(g=g.mode,(g&2)===0)return 1;if((g&4)===0)return hu()===99?1:2;if(xi===0&&(xi=Yo),ne.transition!==0){Si!==0&&(Si=jl!==null?jl.pendingLanes:0),g=xi;var y=4186112&~Si;return y&=-y,y===0&&(g=4186112&~g,y=g&-g,y===0&&(y=8192)),y}return g=hu(),(mt&4)!==0&&g===98?g=fd(12,xi):(g=ig(g),g=fd(g,xi)),g}function Mo(g,y,C){if(50<Jl)throw Jl=0,xu=null,Error(c(185));if(g=Yi(g,y),g===null)return null;md(g,y,C),g===sn&&($o|=y,Ko===4&&Su(g,Ot));var O=hu();y===1?(mt&8)!==0&&(mt&48)===0?zh(g):(Ci(g,C),mt===0&&(Er(),ko())):((mt&4)===0||O!==98&&O!==99||(ri===null?ri=new Set([g]):ri.add(g)),Ci(g,C)),jl=g}function Yi(g,y){g.lanes|=y;var C=g.alternate;for(C!==null&&(C.lanes|=y),C=g,g=g.return;g!==null;)g.childLanes|=y,C=g.alternate,C!==null&&(C.childLanes|=y),C=g,g=g.return;return C.tag===3?C.stateNode:null}function Ci(g,y){for(var C=g.callbackNode,O=g.suspendedLanes,$=g.pingedLanes,V=g.expirationTimes,se=g.pendingLanes;0<se;){var ye=31-ga(se),Pe=1<<ye,st=V[ye];if(st===-1){if((Pe&O)===0||(Pe&$)!==0){st=y,$l(Pe);var Nt=Vt;V[ye]=10<=Nt?st+250:6<=Nt?st+5e3:-1}}else st<=y&&(g.expiredLanes|=Pe);se&=~Pe}if(O=ma(g,g===sn?Ot:0),y=Vt,O===0)C!==null&&(C!==uu&&ag(C),g.callbackNode=null,g.callbackPriority=0);else{if(C!==null){if(g.callbackPriority===y)return;C!==uu&&ag(C)}y===15?(C=zh.bind(null,g),sr===null?(sr=[C],Hi=lg(gd,_d)):sr.push(C),C=uu):y===14?C=Ar(99,zh.bind(null,g)):(C=so(y),C=Ar(C,lT.bind(null,g))),g.callbackPriority=y,g.callbackNode=C}}function lT(g){if(Vr=-1,Si=xi=0,(mt&48)!==0)throw Error(c(327));var y=g.callbackNode;if(Qo()&&g.callbackNode!==y)return null;var C=ma(g,g===sn?Ot:0);if(C===0)return null;var O=C,$=mt;mt|=16;var V=gl();(sn!==g||Ot!==O)&&(Er(),ii(g,O));do try{cT();break}catch(ye){Ps(g,ye)}while(1);if(Fn(),Ad.current=V,mt=$,co!==null?O=0:(sn=null,Ot=0,O=Ko),(Yo&$o)!==0)ii(g,0);else if(O!==0){if(O===2&&(mt|=64,g.hydrate&&(g.hydrate=!1,fr(g.containerInfo)),C=jo(g),C!==0&&(O=Un(g,C))),O===1)throw y=vc,ii(g,0),Su(g,C),Ci(g,kr()),y;switch(g.finishedWork=g.current.alternate,g.finishedLanes=C,O){case 0:case 1:throw Error(c(345));case 2:xc(g);break;case 3:if(Su(g,C),(C&62914560)===C&&(O=to+500-kr(),10<O)){if(ma(g,0)!==0)break;if($=g.suspendedLanes,($&C)!==C){Rr(),g.pingedLanes|=g.suspendedLanes&$;break}g.timeoutHandle=Ye(xc.bind(null,g),O);break}xc(g);break;case 4:if(Su(g,C),(C&4186112)===C)break;for(O=g.eventTimes,$=-1;0<C;){var se=31-ga(C);V=1<<se,se=O[se],se>$&&($=se),C&=~V}if(C=$,C=kr()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*lC(C/1960))-C,10<C){g.timeoutHandle=Ye(xc.bind(null,g),C);break}xc(g);break;case 5:xc(g);break;default:throw Error(c(329))}}return Ci(g,kr()),g.callbackNode===y?lT.bind(null,g):null}function Su(g,y){for(y&=~qo,y&=~$o,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var C=31-ga(y),O=1<<C;g[C]=-1,y&=~O}}function zh(g){if((mt&48)!==0)throw Error(c(327));if(Qo(),g===sn&&(g.expiredLanes&Ot)!==0){var y=Ot,C=Un(g,y);(Yo&$o)!==0&&(y=ma(g,y),C=Un(g,y))}else y=ma(g,0),C=Un(g,y);if(g.tag!==0&&C===2&&(mt|=64,g.hydrate&&(g.hydrate=!1,fr(g.containerInfo)),y=jo(g),y!==0&&(C=Un(g,y))),C===1)throw C=vc,ii(g,0),Su(g,y),Ci(g,kr()),C;return g.finishedWork=g.current.alternate,g.finishedLanes=y,xc(g),Ci(g,kr()),null}function Wr(){if(ri!==null){var g=ri;ri=null,g.forEach(function(y){y.expiredLanes|=24&y.pendingLanes,Ci(y,kr())})}ko()}function Ec(g,y){var C=mt;mt|=1;try{return g(y)}finally{mt=C,mt===0&&(Er(),ko())}}function ml(g,y){var C=mt;if((C&48)!==0)return g(y);mt|=1;try{if(g)return Pl(99,g.bind(null,y))}finally{mt=C,ko()}}function ms(g,y){wn(Xl,Et),Et|=y,Yo|=y}function qi(){Et=Xl.current,Pn(Xl)}function ii(g,y){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==Re&&(g.timeoutHandle=Re,et(C)),co!==null)for(C=co.return;C!==null;){var O=C;switch(O.tag){case 1:O=O.type.childContextTypes,O!=null&&mr();break;case 3:_r(),Pn(An),Pn(kn),fg();break;case 5:ft(O);break;case 4:_r();break;case 13:Pn(wo);break;case 19:Pn(wo);break;case 10:hg(O);break;case 23:case 24:qi()}C=C.return}sn=g,co=Ra(g.current,null),Ot=Et=Yo=y,Ko=0,vc=null,qo=$o=jn=0}function Ps(g,y){do{var C=co;try{if(Fn(),tn.current=ji,$t){for(var O=rn.memoizedState;O!==null;){var $=O.queue;$!==null&&($.pending=null),O=O.next}$t=!1}if(zi=0,ao=Ur=rn=null,Ze=!1,wd.current=null,C===null||C.return===null){Ko=1,vc=y,co=null;break}e:{var V=g,se=C.return,ye=C,Pe=y;if(y=Ot,ye.flags|=2048,ye.firstEffect=ye.lastEffect=null,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var st=Pe;if((ye.mode&2)===0){var Nt=ye.alternate;Nt?(ye.updateQueue=Nt.updateQueue,ye.memoizedState=Nt.memoizedState,ye.lanes=Nt.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var n=(wo.current&1)!==0,s=se;do{var u;if(u=s.tag===13){var d=s.memoizedState;if(d!==null)u=d.dehydrated!==null;else{var T=s.memoizedProps;u=T.fallback===void 0?!1:T.unstable_avoidThisFallback!==!0?!0:!n}}if(u){var w=s.updateQueue;if(w===null){var N=new Set;N.add(st),s.updateQueue=N}else w.add(st);if((s.mode&2)===0){if(s.flags|=64,ye.flags|=16384,ye.flags&=-2981,ye.tag===1)if(ye.alternate===null)ye.tag=17;else{var J=gr(-1,1);J.tag=2,hl(ye,J)}ye.lanes|=1;break e}Pe=void 0,ye=y;var ve=V.pingCache;if(ve===null?(ve=V.pingCache=new Gl,Pe=new Set,ve.set(st,Pe)):(Pe=ve.get(st),Pe===void 0&&(Pe=new Set,ve.set(st,Pe))),!Pe.has(ye)){Pe.add(ye);var He=kt.bind(null,V,st,ye);st.then(He,He)}s.flags|=4096,s.lanes=y;break e}s=s.return}while(s!==null);Pe=Error((z(ye.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ko!==5&&(Ko=2),Pe=Hl(Pe,ye),s=se;do{switch(s.tag){case 3:V=Pe,s.flags|=4096,y&=-y,s.lanes|=y;var Tt=qv(s,V,y);Nh(s,Tt);break e;case 1:V=Pe;var bt=s.type,Gt=s.stateNode;if((s.flags&64)===0&&(typeof bt.getDerivedStateFromError=="function"||Gt!==null&&typeof Gt.componentDidCatch=="function"&&(fl===null||!fl.has(Gt)))){s.flags|=4096,y&=-y,s.lanes|=y;var Vn=Mr(s,V,y);Nh(s,Vn);break e}}s=s.return}while(s!==null)}Xh(C)}catch(Kt){y=Kt,co===C&&C!==null&&(co=C=C.return);continue}break}while(1)}function gl(){var g=Ad.current;return Ad.current=ji,g===null?ji:g}function Un(g,y){var C=mt;mt|=16;var O=gl();sn===g&&Ot===y||ii(g,y);do try{aT();break}catch($){Ps(g,$)}while(1);if(Fn(),mt=C,Ad.current=O,co!==null)throw Error(c(261));return sn=null,Ot=0,Ko}function aT(){for(;co!==null;)Md(co)}function cT(){for(;co!==null&&!oC();)Md(co)}function Md(g){var y=jh(g.alternate,g,Et);g.memoizedProps=g.pendingProps,y===null?Xh(g):co=y,wd.current=null}function Xh(g){var y=g;do{var C=y.alternate;if(g=y.return,(y.flags&2048)===0){if(C=Ul(C,y,Et),C!==null){co=C;return}if(C=y,C.tag!==24&&C.tag!==23||C.memoizedState===null||(Et&1073741824)!==0||(C.mode&4)===0){for(var O=0,$=C.child;$!==null;)O|=$.lanes|$.childLanes,$=$.sibling;C.childLanes=O}g!==null&&(g.flags&2048)===0&&(g.firstEffect===null&&(g.firstEffect=y.firstEffect),y.lastEffect!==null&&(g.lastEffect!==null&&(g.lastEffect.nextEffect=y.firstEffect),g.lastEffect=y.lastEffect),1<y.flags&&(g.lastEffect!==null?g.lastEffect.nextEffect=y:g.firstEffect=y,g.lastEffect=y))}else{if(C=io(y),C!==null){C.flags&=2047,co=C;return}g!==null&&(g.firstEffect=g.lastEffect=null,g.flags|=2048)}if(y=y.sibling,y!==null){co=y;return}co=y=g}while(y!==null);Ko===0&&(Ko=5)}function xc(g){var y=hu();return Pl(99,aC.bind(null,g,y)),null}function aC(g,y){do Qo();while(wa!==null);if((mt&48)!==0)throw Error(c(327));var C=g.finishedWork;if(C===null)return null;if(g.finishedWork=null,g.finishedLanes=0,C===g.current)throw Error(c(177));g.callbackNode=null;var O=C.lanes|C.childLanes,$=O,V=g.pendingLanes&~$;g.pendingLanes=$,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=$,g.mutableReadLanes&=$,g.entangledLanes&=$,$=g.entanglements;for(var se=g.eventTimes,ye=g.expirationTimes;0<V;){var Pe=31-ga(V),st=1<<Pe;$[Pe]=0,se[Pe]=-1,ye[Pe]=-1,V&=~st}if(ri!==null&&(O&24)===0&&ri.has(g)&&ri.delete(g),g===sn&&(co=sn=null,Ot=0),1<C.flags?C.lastEffect!==null?(C.lastEffect.nextEffect=C,O=C.firstEffect):O=C:O=C.firstEffect,O!==null){$=mt,mt|=32,wd.current=null,Jn=H(g.containerInfo),Ki=!1,pt=O;do try{po()}catch(N){if(pt===null)throw Error(c(330));pn(pt,N),pt=pt.nextEffect}while(pt!==null);Jn=null,pt=O;do try{for(se=g;pt!==null;){var Nt=pt.flags;if(Nt&16&&Le&&Jt(pt.stateNode),Nt&128){var n=pt.alternate;if(n!==null){var s=n.ref;s!==null&&(typeof s=="function"?s(null):s.current=null)}}switch(Nt&1038){case 2:rT(pt),pt.flags&=-3;break;case 6:rT(pt),pt.flags&=-3,zl(pt.alternate,pt);break;case 1024:pt.flags&=-1025;break;case 1028:pt.flags&=-1025,zl(pt.alternate,pt);break;case 4:zl(pt.alternate,pt);break;case 8:ye=se,V=pt,Le?Wl(ye,V):tT(ye,V);var u=V.alternate;nT(V),u!==null&&nT(u)}pt=pt.nextEffect}}catch(N){if(pt===null)throw Error(c(330));pn(pt,N),pt=pt.nextEffect}while(pt!==null);Ki&&xt(),q(g.containerInfo),g.current=C,pt=O;do try{for(Nt=g;pt!==null;){var d=pt.flags;if(d&36&&sC(Nt,pt.alternate,pt),d&128){n=void 0;var T=pt.ref;if(T!==null){var w=pt.stateNode;switch(pt.tag){case 5:n=Ee(w);break;default:n=w}typeof T=="function"?T(n):T.current=n}}pt=pt.nextEffect}}catch(N){if(pt===null)throw Error(c(330));pn(pt,N),pt=pt.nextEffect}while(pt!==null);pt=null,us(),mt=$}else g.current=C;if(Aa)Aa=!1,wa=g,Ma=y;else for(pt=O;pt!==null;)y=pt.nextEffect,pt.nextEffect=null,pt.flags&8&&(d=pt,d.sibling=null,d.stateNode=null),pt=y;if(O=g.pendingLanes,O===0&&(fl=null),O===1?g===xu?Jl++:(Jl=0,xu=g):Jl=0,C=C.stateNode,ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(Ms,C,void 0,(C.current.flags&64)===64)}catch{}if(Ci(g,kr()),ka)throw ka=!1,g=Wh,Wh=null,g;return(mt&8)!==0||ko(),null}function po(){for(;pt!==null;){var g=pt.alternate;Ki||Jn===null||((pt.flags&8)!==0?ae(pt,Jn)&&(Ki=!0,rt()):pt.tag===13&&Gr(g,pt)&&ae(pt,Jn)&&(Ki=!0,rt()));var y=pt.flags;(y&256)!==0&&iC(g,pt),(y&512)===0||Aa||(Aa=!0,Ar(97,function(){return Qo(),null})),pt=pt.nextEffect}}function Qo(){if(Ma!==90){var g=97<Ma?97:Ma;return Ma=90,Pl(g,cC)}return!1}function Po(g,y){Eu.push(y,g),Aa||(Aa=!0,Ar(97,function(){return Qo(),null}))}function Ro(g,y){Tc.push(y,g),Aa||(Aa=!0,Ar(97,function(){return Qo(),null}))}function cC(){if(wa===null)return!1;var g=wa;if(wa=null,(mt&48)!==0)throw Error(c(331));var y=mt;mt|=32;var C=Tc;Tc=[];for(var O=0;O<C.length;O+=2){var $=C[O],V=C[O+1],se=$.destroy;if($.destroy=void 0,typeof se=="function")try{se()}catch(Pe){if(V===null)throw Error(c(330));pn(V,Pe)}}for(C=Eu,Eu=[],O=0;O<C.length;O+=2){$=C[O],V=C[O+1];try{var ye=$.create;$.destroy=ye()}catch(Pe){if(V===null)throw Error(c(330));pn(V,Pe)}}for(ye=g.current.firstEffect;ye!==null;)g=ye.nextEffect,ye.nextEffect=null,ye.flags&8&&(ye.sibling=null,ye.stateNode=null),ye=g;return mt=y,ko(),!0}function fo(g,y,C){y=Hl(C,y),y=qv(g,y,1),hl(g,y),y=Rr(),g=Yi(g,1),g!==null&&(md(g,1,y),Ci(g,y))}function pn(g,y){if(g.tag===3)fo(g,g,y);else for(var C=g.return;C!==null;){if(C.tag===3){fo(C,g,y);break}else if(C.tag===1){var O=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(fl===null||!fl.has(O))){g=Hl(y,g);var $=Mr(C,g,1);if(hl(C,$),$=Rr(),C=Yi(C,1),C!==null)md(C,1,$),Ci(C,$);else if(typeof O.componentDidCatch=="function"&&(fl===null||!fl.has(O)))try{O.componentDidCatch(y,g)}catch{}break}}C=C.return}}function kt(g,y,C){var O=g.pingCache;O!==null&&O.delete(y),y=Rr(),g.pingedLanes|=g.suspendedLanes&C,sn===g&&(Ot&C)===C&&(Ko===4||Ko===3&&(Ot&62914560)===Ot&&500>kr()-to?ii(g,0):qo|=C),Ci(g,y)}function Br(g,y){var C=g.stateNode;C!==null&&C.delete(y),y=0,y===0&&(y=g.mode,(y&2)===0?y=1:(y&4)===0?y=hu()===99?1:2:(xi===0&&(xi=Yo),y=cu(62914560&~xi),y===0&&(y=4194304))),C=Rr(),g=Yi(g,y),g!==null&&(md(g,y,C),Ci(g,C))}var jh;jh=function(g,y,C){var O=y.lanes;if(g!==null)if(g.memoizedProps!==y.pendingProps||An.current)Ds=!0;else if((C&O)!==0)Ds=(g.flags&16384)!==0;else{switch(Ds=!1,y.tag){case 3:jv(y),Wi();break;case 5:pl(y);break;case 1:_i(y.type)&&dt(y);break;case 4:Do(y,y.stateNode.containerInfo);break;case 10:ei(y,y.memoizedProps.value);break;case 13:if(y.memoizedState!==null)return(C&y.child.childLanes)!==0?Ls(g,y,C):(wn(wo,wo.current&1),y=Ft(g,y,C),y!==null?y.sibling:null);wn(wo,wo.current&1);break;case 19:if(O=(C&y.childLanes)!==0,(g.flags&64)!==0){if(O)return Yv(g,y,C);y.flags|=64}var $=y.memoizedState;if($!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),wn(wo,wo.current),O)break;return null;case 23:case 24:return y.lanes=0,xd(g,y,C)}return Ft(g,y,C)}else Ds=!1;switch(y.lanes=0,y.tag){case 2:if(O=y.type,g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),g=y.pendingProps,$=au(y,kn.current),fu(y,C),$=va(null,y,O,g,$,C),y.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){if(y.tag=1,y.memoizedState=null,y.updateQueue=null,_i(O)){var V=!0;dt(y)}else V=!1;y.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,Pr(y);var se=O.getDerivedStateFromProps;typeof se=="function"&&un(y,O,se,g),$.updater=yd,y.stateNode=$,$._reactInternals=y,Ao(y,O,g,C),y=yg(null,y,O,!0,V,C)}else y.tag=0,vi(null,y,$,C),y=y.child;return y;case 16:$=y.elementType;e:{switch(g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),g=y.pendingProps,V=$._init,$=V($._payload),y.type=$,V=y.tag=uC($),g=Gi($,g),V){case 0:y=_g(null,y,$,g,C);break e;case 1:y=Xv(null,y,$,g,C);break e;case 11:y=zv(null,y,$,g,C);break e;case 14:y=gg(null,y,$,Gi($.type,g),O,C);break e}throw Error(c(306,$,""))}return y;case 0:return O=y.type,$=y.pendingProps,$=y.elementType===O?$:Gi(O,$),_g(g,y,O,$,C);case 1:return O=y.type,$=y.pendingProps,$=y.elementType===O?$:Gi(O,$),Xv(g,y,O,$,C);case 3:if(jv(y),O=y.updateQueue,g===null||O===null)throw Error(c(282));if(O=y.pendingProps,$=y.memoizedState,$=$!==null?$.element:null,wr(g,y),mu(y,O,null,C),O=y.memoizedState.element,O===$)Wi(),y=Ft(g,y,C);else{if($=y.stateNode,(V=$.hydrate)&&(Ne?(gc=Xt(y.stateNode.containerInfo),Fl=y,V=yr=!0):V=!1),V){if(Ne&&(g=$.mutableSourceEagerHydrationData,g!=null))for($=0;$<g.length;$+=2)V=g[$],se=g[$+1],Te?V._workInProgressVersionPrimary=se:V._workInProgressVersionSecondary=se,Is.push(V);for(C=ya(y,null,O,C),y.child=C;C;)C.flags=C.flags&-3|1024,C=C.sibling}else vi(g,y,O,C),Wi();y=y.child}return y;case 5:return pl(y),g===null&&Qe(y),O=y.type,$=y.pendingProps,V=g!==null?g.memoizedProps:null,se=$.children,ze(O,$)?se=null:V!==null&&ze(O,V)&&(y.flags|=16),Sd(g,y),vi(g,y,se,C),y.child;case 6:return g===null&&Qe(y),null;case 13:return Ls(g,y,C);case 4:return Do(y,y.stateNode.containerInfo),O=y.pendingProps,g===null?y.child=Vi(y,null,O,C):vi(g,y,O,C),y.child;case 11:return O=y.type,$=y.pendingProps,$=y.elementType===O?$:Gi(O,$),zv(g,y,O,$,C);case 7:return vi(g,y,y.pendingProps,C),y.child;case 8:return vi(g,y,y.pendingProps.children,C),y.child;case 12:return vi(g,y,y.pendingProps.children,C),y.child;case 10:e:{if(O=y.type._context,$=y.pendingProps,se=y.memoizedProps,V=$.value,ei(y,V),se!==null){var ye=se.value;if(V=Oo(ye,V)?0:(typeof O._calculateChangedBits=="function"?O._calculateChangedBits(ye,V):1073741823)|0,V===0){if(se.children===$.children&&!An.current){y=Ft(g,y,C);break e}}else for(ye=y.child,ye!==null&&(ye.return=y);ye!==null;){var Pe=ye.dependencies;if(Pe!==null){se=ye.child;for(var st=Pe.firstContext;st!==null;){if(st.context===O&&(st.observedBits&V)!==0){ye.tag===1&&(st=gr(-1,C&-C),st.tag=2,hl(ye,st)),ye.lanes|=C,st=ye.alternate,st!==null&&(st.lanes|=C),Uv(ye.return,C),Pe.lanes|=C;break}st=st.next}}else se=ye.tag===10&&ye.type===y.type?null:ye.child;if(se!==null)se.return=ye;else for(se=ye;se!==null;){if(se===y){se=null;break}if(ye=se.sibling,ye!==null){ye.return=se.return,se=ye;break}se=se.return}ye=se}}vi(g,y,$.children,C),y=y.child}return y;case 9:return $=y.type,V=y.pendingProps,O=V.children,fu(y,C),$=hs($,V.unstable_observedBits),O=O($),y.flags|=1,vi(g,y,O,C),y.child;case 14:return $=y.type,V=Gi($,y.pendingProps),V=Gi($.type,V),gg(g,y,$,V,O,C);case 15:return Ed(g,y,y.type,y.pendingProps,O,C);case 17:return O=y.type,$=y.pendingProps,$=y.elementType===O?$:Gi(O,$),g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2),y.tag=1,_i(O)?(g=!0,dt(y)):g=!1,fu(y,C),Gv(y,O,$),Ao(y,O,$,C),yg(null,y,O,!0,g,C);case 19:return Yv(g,y,C);case 23:return xd(g,y,C);case 24:return xd(g,y,C)}throw Error(c(156,y.tag))};var Rd={current:!1},Qt=a.unstable_flushAllWithoutAsserting,Sc=typeof Qt=="function";function Cu(){if(Qt!==void 0)return Qt();for(var g=!1;Qo();)g=!0;return g}function Cc(g){try{Cu(),oi(function(){Cu()?Cc(g):g()})}catch(y){g(y)}}var Jh=0,uT=!1;function Bd(g,y,C,O){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(g,y,C,O){return new Bd(g,y,C,O)}function Kh(g){return g=g.prototype,!(!g||!g.isReactComponent)}function uC(g){if(typeof g=="function")return Kh(g)?1:0;if(g!=null){if(g=g.$$typeof,g===A)return 11;if(g===M)return 14}return 2}function Ra(g,y){var C=g.alternate;return C===null?(C=bi(g.tag,y,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=y,C.type=g.type,C.flags=0,C.nextEffect=null,C.firstEffect=null,C.lastEffect=null),C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,y=g.dependencies,C.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function Id(g,y,C,O,$,V){var se=2;if(O=g,typeof g=="function")Kh(g)&&(se=1);else if(typeof g=="string")se=5;else e:switch(g){case _:return bc(C.children,$,V,y);case L:se=8,$|=16;break;case m:se=8,$|=1;break;case v:return g=bi(12,C,y,$|8),g.elementType=v,g.type=v,g.lanes=V,g;case k:return g=bi(13,C,y,$),g.type=k,g.elementType=k,g.lanes=V,g;case E:return g=bi(19,C,y,$),g.elementType=E,g.lanes=V,g;case F:return Cg(C,$,V,y);case U:return g=bi(24,C,y,$),g.elementType=U,g.lanes=V,g;default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case x:se=10;break e;case b:se=9;break e;case A:se=11;break e;case M:se=14;break e;case R:se=16,O=null;break e;case I:se=22;break e}throw Error(c(130,g==null?g:typeof g,""))}return y=bi(se,C,y,$),y.elementType=g,y.type=O,y.lanes=V,y}function bc(g,y,C,O){return g=bi(7,g,O,y),g.lanes=C,g}function Cg(g,y,C,O){return g=bi(23,g,O,y),g.elementType=F,g.lanes=C,g}function Od(g,y,C){return g=bi(6,g,null,y),g.lanes=C,g}function Zo(g,y,C){return y=bi(4,g.children!==null?g.children:[],g.key,y),y.lanes=C,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function hC(g,y,C){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Re,this.pendingContext=this.context=null,this.hydrate=C,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=sg(0),this.expirationTimes=sg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sg(0),Ne&&(this.mutableSourceEagerHydrationData=null)}function Ba(g){var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(c(188)):Error(c(268,Object.keys(g)));return g=ee(y),g===null?null:g.stateNode}function hT(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<y?C:y}}function bu(g,y){hT(g,y),(g=g.alternate)&&hT(g,y)}function pC(g){return g=ee(g),g===null?null:g.stateNode}function pT(){return null}return o.IsThisRendererActing=Rd,o.act=function(g){function y(){Jh--,Cn.current=C,Rd.current=O}uT===!1&&(uT=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Jh++;var C=Cn.current,O=Rd.current;Cn.current=!0,Rd.current=!0;try{var $=Ec(g)}catch(V){throw y(),V}if($!==null&&typeof $=="object"&&typeof $.then=="function")return{then:function(V,se){$.then(function(){1<Jh||Sc===!0&&C===!0?(y(),V()):Cc(function(ye){y(),ye?se(ye):V()})},function(ye){y(),se(ye)})}};try{Jh!==1||Sc!==!1&&C!==!1||Cu(),y()}catch(V){throw y(),V}return{then:function(V){V()}}},o.attemptContinuousHydration=function(g){if(g.tag===13){var y=Rr();Mo(g,67108864,y),bu(g,67108864)}},o.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var y=Rr(),C=ho(g);Mo(g,C,y),bu(g,C)}},o.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.hydrate){var C=$l(y.pendingLanes);y.expiredLanes|=C&y.pendingLanes,Ci(y,kr()),(mt&48)===0&&(Er(),ko())}break;case 13:var O=Rr();ml(function(){return Mo(g,1,O)}),bu(g,4)}},o.attemptUserBlockingHydration=function(g){if(g.tag===13){var y=Rr();Mo(g,4,y),bu(g,4)}},o.batchedEventUpdates=function(g,y){var C=mt;mt|=2;try{return g(y)}finally{mt=C,mt===0&&(Er(),ko())}},o.batchedUpdates=Ec,o.createComponentSelector=function(g){return{$$typeof:Cd,value:g}},o.createContainer=function(g,y,C){return g=new hC(g,y,C),y=bi(3,null,null,y===2?7:y===1?3:0),g.current=y,y.stateNode=g,Pr(y),g},o.createHasPsuedoClassSelector=function(g){return{$$typeof:bd,value:g}},o.createPortal=function(g,y,C){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:O==null?null:""+O,children:g,containerInfo:y,implementation:C}},o.createRoleSelector=function(g){return{$$typeof:kd,value:g}},o.createTestNameSelector=function(g){return{$$typeof:Ti,value:g}},o.createTextSelector=function(g){return{$$typeof:Wt,value:g}},o.deferredUpdates=function(g){return Pl(97,g)},o.discreteUpdates=function(g,y,C,O,$){var V=mt;mt|=4;try{return Pl(98,g.bind(null,y,C,O,$))}finally{mt=V,mt===0&&(Er(),ko())}},o.findAllNodes=$s,o.findBoundingRects=function(g,y){if(!Z)throw Error(c(363));y=$s(g,y),g=[];for(var C=0;C<y.length;C++)g.push(Ae(y[C]));for(y=g.length-1;0<y;y--){C=g[y];for(var O=C.x,$=O+C.width,V=C.y,se=V+C.height,ye=y-1;0<=ye;ye--)if(y!==ye){var Pe=g[ye],st=Pe.x,Nt=st+Pe.width,n=Pe.y,s=n+Pe.height;if(O>=st&&V>=n&&$<=Nt&&se<=s){g.splice(y,1);break}else if(O!==st||C.width!==Pe.width||s<V||n>se){if(!(V!==n||C.height!==Pe.height||Nt<O||st>$)){st>O&&(Pe.width+=st-O,Pe.x=O),Nt<$&&(Pe.width=$-st),g.splice(y,1);break}}else{n>V&&(Pe.height+=n-V,Pe.y=V),s<se&&(Pe.height=se-n),g.splice(y,1);break}}}return g},o.findHostInstance=Ba,o.findHostInstanceWithNoPortals=function(g){return g=pe(g),g===null?null:g.tag===20?g.stateNode.instance:g.stateNode},o.findHostInstanceWithWarning=function(g){return Ba(g)},o.flushControlled=function(g){var y=mt;mt|=1;try{Pl(99,g)}finally{mt=y,mt===0&&(Er(),ko())}},o.flushDiscreteUpdates=function(){(mt&49)===0&&(Wr(),Qo())},o.flushPassiveEffects=Qo,o.flushSync=ml,o.focusWithin=function(g,y){if(!Z)throw Error(c(363));for(g=Xn(g),y=sT(g,y),y=Array.from(y),g=0;g<y.length;){var C=y[g++];if(!ge(C)){if(C.tag===5&&ke(C.stateNode))return!0;for(C=C.child;C!==null;)y.push(C),C=C.sibling}}return!1},o.getCurrentUpdateLanePriority=function(){return Xo},o.getFindAllNodesFailureDescription=function(g,y){if(!Z)throw Error(c(363));var C=0,O=[];g=[Xn(g),0];for(var $=0;$<g.length;){var V=g[$++],se=g[$++],ye=y[se];if((V.tag!==5||!ge(V))&&(xg(V,ye)&&(O.push(Sg(ye)),se++,se>C&&(C=se)),se<y.length))for(V=V.child;V!==null;)g.push(V,se),V=V.sibling}if(C<y.length){for(g=[];C<y.length;C++)g.push(Sg(y[C]));return`findAllNodes was able to match part of the selector:
  `+(O.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},o.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return Ee(g.child.stateNode);default:return g.child.stateNode}},o.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:pC,findFiberByHostInstance:g.findFiberByHostInstance||pT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")g=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y.isDisabled&&y.supportsFiber)try{Ms=y.inject(g),ir=y}catch{}g=!0}return g},o.observeVisibleRects=function(g,y,C,O){if(!Z)throw Error(c(363));g=$s(g,y);var $=me(g,C,O).disconnect;return{disconnect:function(){$()}}},o.registerMutableSourceForHydration=function(g,y){var C=y._getVersion;C=C(y._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[y,C]:g.mutableSourceEagerHydrationData.push(y,C)},o.runWithPriority=function(g,y){var C=Xo;try{return Xo=g,y()}finally{Xo=C}},o.shouldSuspend=function(){return!1},o.unbatchedUpdates=function(g,y){var C=mt;mt&=-2,mt|=8;try{return g(y)}finally{mt=C,mt===0&&(Er(),ko())}},o.updateContainer=function(g,y,C,O){var $=y.current,V=Rr(),se=ho($);e:if(C){C=C._reactInternals;t:{if(K(C)!==C||C.tag!==1)throw Error(c(170));var ye=C;do{switch(ye.tag){case 3:ye=ye.stateNode.context;break t;case 1:if(_i(ye.type)){ye=ye.stateNode.__reactInternalMemoizedMergedChildContext;break t}}ye=ye.return}while(ye!==null);throw Error(c(171))}if(C.tag===1){var Pe=C.type;if(_i(Pe)){C=$r(C,Pe,ye);break e}}C=ye}else C=zo;return y.context===null?y.context=C:y.pendingContext=C,y=gr(V,se),y.payload={element:g},O=O===void 0?null:O,O!==null&&(y.callback=O),hl($,y),Mo($,se,V),se},o}})(iU);rU.exports=iU.exports;var tK=rU.exports,sR=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,i,l;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),o=l.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[i]))return!1;for(i=o;i--!==0;){var a=l[i];if(!r(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const _S=[];function lU(r,e,t,o=0,i=!1){for(const a of e)if(sR(t,a.args)){if(i)return;if(a.error)throw a.error;if(a.response)return a.response;throw a.promise}const l={args:t,promise:r(...t).then(a=>l.response=a!=null?a:!0).catch(a=>l.error=a!=null?a:"unknown error").then(()=>{o>0&&setTimeout(()=>{const a=e.indexOf(l);a!==-1&&e.splice(a,1)},o)})};if(e.push(l),!i)throw l.promise}function nK(r,...e){if(e===void 0||e.length===0)r.splice(0,r.length);else{const t=r.find(o=>sR(e,o.args));if(t){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}}function Kc(r,...e){return lU(r,_S,e,Kc.lifespan)}Kc.lifespan=0;Kc.clear=(...r)=>nK(_S,...r);Kc.preload=(r,...e)=>void lU(r,_S,e,Kc.lifespan,!0);Kc.peek=(...r)=>{var e;return(e=_S.find(t=>sR(r,t.args)))==null?void 0:e.response};function aU(r){return function(e){r.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function FA(r,e,t){var o,i,l,a,c;e==null&&(e=100);function p(){var f=Date.now()-a;f<e&&f>=0?o=setTimeout(p,e-f):(o=null,t||(c=r.apply(l,i),l=i=null))}var h=function(){l=this,i=arguments,a=Date.now();var f=t&&!o;return o||(o=setTimeout(p,e)),f&&(c=r.apply(l,i),l=i=null),c};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.flush=function(){o&&(c=r.apply(l,i),l=i=null,clearTimeout(o),o=null)},h}FA.debounce=FA;var CO=FA;function oK(r){let{debounce:e,scroll:t,polyfill:o,offsetSize:i}=r===void 0?{debounce:0,scroll:!1,offsetSize:!1}:r;const l=o||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,c]=G.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),p=G.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),h=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,_=G.exports.useRef(!1);G.exports.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[m,v,x]=G.exports.useMemo(()=>{const E=()=>{if(!p.current.element)return;const{left:M,top:R,width:I,height:L,bottom:F,right:U,x:X,y:j}=p.current.element.getBoundingClientRect(),P={left:M,top:R,width:I,height:L,bottom:F,right:U,x:X,y:j};p.current.element instanceof HTMLElement&&i&&(P.height=p.current.element.offsetHeight,P.width=p.current.element.offsetWidth),Object.freeze(P),_.current&&!lK(p.current.lastBounds,P)&&c(p.current.lastBounds=P)};return[E,f?CO(E,f):E,h?CO(E,h):E]},[c,i,h,f]);function b(){p.current.scrollContainers&&(p.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",x,!0)),p.current.scrollContainers=null),p.current.resizeObserver&&(p.current.resizeObserver.disconnect(),p.current.resizeObserver=null)}function A(){!p.current.element||(p.current.resizeObserver=new l(x),p.current.resizeObserver.observe(p.current.element),t&&p.current.scrollContainers&&p.current.scrollContainers.forEach(E=>E.addEventListener("scroll",x,{capture:!0,passive:!0})))}const k=E=>{!E||E===p.current.element||(b(),p.current.element=E,p.current.scrollContainers=cU(E),A())};return iK(x,Boolean(t)),rK(v),G.exports.useEffect(()=>{b(),A()},[t,x,v]),G.exports.useEffect(()=>b,[]),[k,a,m]}function rK(r){G.exports.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function iK(r,e){G.exports.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function cU(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:o,overflowY:i}=window.getComputedStyle(r);return[t,o,i].some(l=>l==="auto"||l==="scroll")&&e.push(r),[...e,...cU(r.parentElement)]}const sK=["x","y","top","bottom","left","right","width","height"],lK=(r,e)=>sK.every(t=>r[t]===e[t]),uo={obj:r=>r===Object(r)&&!uo.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e){if(typeof r!=typeof e||!!r!=!!e)return!1;if(uo.str(r)||uo.num(r)||uo.obj(r))return r===e;if(uo.arr(r)&&r==e)return!0;let t;for(t in r)if(!(t in e))return!1;for(t in e)if(r[t]!==e[t])return!1;return uo.und(t)?r===e:!0}};function xb(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function uU(r,e,t,o){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(o),i.target.releasePointerCapture(o)))}function aK(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(o=>o!==e),t.initialHits=t.initialHits.filter(o=>o!==e),t.hovered.forEach((o,i)=>{(o.eventObject===e||o.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((o,i)=>{uU(t.capturedMap,e,o,i)})}function cK(r){const e=new Y;function t(_){var m,v,x,b;const A=r.getState(),{raycaster:k,mouse:E,camera:M,size:R}=A,I=k.computeOffsets==null?void 0:k.computeOffsets(_,A),L=(m=I==null?void 0:I.offsetX)!=null?m:_.offsetX,F=(v=I==null?void 0:I.offsetY)!=null?v:_.offsetY,U=(x=I==null?void 0:I.width)!=null?x:R.width,X=(b=I==null?void 0:I.height)!=null?b:R.height;E.set(L/U*2-1,-(F/X)*2+1),k.setFromCamera(E,M)}function o(_){const{internal:m}=r.getState(),v=_.offsetX-m.initialClick[0],x=_.offsetY-m.initialClick[1];return Math.round(Math.sqrt(v*v+x*x))}function i(_){return _.filter(m=>["Move","Over","Enter","Out","Leave"].some(v=>{var x;return(x=m.__r3f)==null?void 0:x.handlers["onPointer"+v]}))}function l(_){const m=r.getState(),{raycaster:v,internal:x}=m;if(!v.enabled)return[];const b=new Set,A=[],k=_?_(x.interaction):x.interaction;let E=v.intersectObjects(k,!0).filter(R=>{const I=xb(R);return b.has(I)?!1:(b.add(I),!0)});v.filter&&(E=v.filter(E,m));for(const R of E){let I=R.object;for(;I;){var M;(M=I.__r3f)!=null&&M.eventCount&&A.push(si(Kn({},R),{eventObject:I})),I=I.parent}}return A}function a(_,m){const{internal:v}=r.getState();if("pointerId"in m&&v.capturedMap.has(m.pointerId))for(let x of v.capturedMap.get(m.pointerId).values())_.push(x.intersection);return _}function c(_,m,v,x){const{raycaster:b,mouse:A,camera:k,internal:E}=r.getState();if(_.length){const M=e.set(A.x,A.y,0).unproject(k),R={stopped:!1};for(const I of _){const L=P=>{var z,K;return(z=(K=E.capturedMap.get(P))==null?void 0:K.has(I.eventObject))!=null?z:!1},F=P=>{const z={intersection:I,target:m.target};E.capturedMap.has(P)?E.capturedMap.get(P).set(I.eventObject,z):E.capturedMap.set(P,new Map([[I.eventObject,z]])),m.target.setPointerCapture(P)},U=P=>{const z=E.capturedMap.get(P);z&&uU(E.capturedMap,I.eventObject,z,P)};let X={};for(let P in m){let z=m[P];typeof z!="function"&&(X[P]=z)}let j=si(Kn(Kn({},I),X),{spaceX:A.x,spaceY:A.y,intersections:_,stopped:R.stopped,delta:v,unprojectedPoint:M,ray:b.ray,camera:k,stopPropagation:()=>{const P="pointerId"in m&&E.capturedMap.get(m.pointerId);if((!P||P.has(I.eventObject))&&(j.stopped=R.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(z=>z.eventObject===I.eventObject))){const z=_.slice(0,_.indexOf(I));p([...z,I])}},target:{hasPointerCapture:L,setPointerCapture:F,releasePointerCapture:U},currentTarget:{hasPointerCapture:L,setPointerCapture:F,releasePointerCapture:U},sourceEvent:m,nativeEvent:m});if(x(j),R.stopped===!0)break}}return _}function p(_){const{internal:m}=r.getState();Array.from(m.hovered.values()).forEach(v=>{if(!_.length||!_.find(x=>x.object===v.object&&x.index===v.index&&x.instanceId===v.instanceId)){const b=v.eventObject.__r3f,A=b==null?void 0:b.handlers;if(m.hovered.delete(xb(v)),b!=null&&b.eventCount){const k=si(Kn({},v),{intersections:_||[]});A.onPointerOut==null||A.onPointerOut(k),A.onPointerLeave==null||A.onPointerLeave(k)}}})}const h=_=>{switch(_){case"onPointerLeave":case"onPointerCancel":return()=>p([]);case"onLostPointerCapture":return m=>{const{internal:v}=r.getState();"pointerId"in m&&!v.capturedMap.has(m.pointerId)&&(v.capturedMap.delete(m.pointerId),p([]))}}return m=>{const{onPointerMissed:v,internal:x}=r.getState();t(m),x.lastEvent.current=m;const b=_==="onPointerMove",A=_==="onClick"||_==="onContextMenu"||_==="onDoubleClick",E=a(l(b?i:void 0),m),M=A?o(m):0;_==="onPointerDown"&&(x.initialClick=[m.offsetX,m.offsetY],x.initialHits=E.map(R=>R.eventObject)),A&&!E.length&&M<=2&&(f(m,x.interaction),v&&v(m)),b&&p(E),c(E,m,M,R=>{const I=R.eventObject,L=I.__r3f,F=L==null?void 0:L.handlers;if(!!(L!=null&&L.eventCount))if(b){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const U=xb(R),X=x.hovered.get(U);X?X.stopped&&R.stopPropagation():(x.hovered.set(U,R),F.onPointerOver==null||F.onPointerOver(R),F.onPointerEnter==null||F.onPointerEnter(R))}F.onPointerMove==null||F.onPointerMove(R)}else{const U=F[_];U?(!A||x.initialHits.includes(I))&&(f(m,x.interaction.filter(X=>!x.initialHits.includes(X))),U(R)):A&&x.initialHits.includes(I)&&f(m,x.interaction.filter(X=>!x.initialHits.includes(X)))}})}};function f(_,m){m.forEach(v=>{var x;return(x=v.__r3f)==null||x.handlers.onPointerMissed==null?void 0:x.handlers.onPointerMissed(_)})}return{handlePointer:h}}const uK=r=>r&&!!r.memoized&&!!r.changes,nx=r=>r&&!!r.getState,Sb=(r,e)=>{var t,o;return{root:nx(r)?r:(t=(o=r.__r3f)==null?void 0:o.root)!=null?t:e.__r3f.root,container:nx(r)?r.getState().scene:r}},bO="__default",hK={};let pK={};function dK(r,e){return!!(uo.arr(r)&&uo.equ(r,e)||r===e)}function gf(r,e){const t=r;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f=Kn({root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e)),r}function fK(r){function e(m,L,U={},I=!1){var F=L,{children:v,key:x,ref:b}=F,A=gs(F,["children","key","ref"]);var X=U,{children:k,key:E,ref:M}=X,R=gs(X,["children","key","ref"]);var j;const P=(j=m==null?void 0:m.__r3f)!=null?j:{},z=Object.entries(A),K=[];if(I){const oe=Object.keys(R);for(let ee=0;ee<oe.length;ee++)A.hasOwnProperty(oe[ee])||z.unshift([oe[ee],bO+"remove"])}z.forEach(([oe,ee])=>{var pe;if((pe=m.__r3f)!=null&&pe.primitive&&oe==="object"||dK(ee,R[oe]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(oe))return K.push([oe,ee,!0,[]]);let ae=[];oe.includes("-")&&(ae=oe.split("-")),K.push([oe,ee,!1,ae])});const te=Kn({},A);return P.memoizedProps&&P.memoizedProps.args&&(te.args=P.memoizedProps.args),P.memoizedProps&&P.memoizedProps.attach&&(te.attach=P.memoizedProps.attach),{accumulative:I,memoized:te,changes:K}}function t(m,v){var x,b,A;const k=(x=m==null?void 0:m.__r3f)!=null?x:{},E=k.root,M=(b=E==null||E.getState==null?void 0:E.getState())!=null?b:{},{memoized:R,changes:I}=uK(v)?v:e(m,v),L=k.eventCount;if(m.__r3f&&(m.__r3f.memoizedProps=R),I.forEach(([F,U,X,j])=>{var P;let z=m,K=z[F];if(j.length&&(K=j.reduce((oe,ee)=>oe[ee],m),!(K&&K.set))){const[oe,...ee]=j.reverse();z=ee.reverse().reduce((pe,ae)=>pe[ae],m),F=oe}if(U===bO+"remove")if(K&&K.constructor)U=new K.constructor(R.args);else if(z.constructor){const oe=new z.constructor(z.__r3f.memoizedProps.args);U=oe[K],oe.dispose&&oe.dispose()}else U=0;const te=(M==null||(P=M.gl)==null?void 0:P.outputEncoding)===la;if(X)U?k.handlers[F]=U:delete k.handlers[F],k.eventCount=Object.keys(k.handlers).length;else if(K&&K.set&&(K.copy||K instanceof Pp)){if(Array.isArray(U))K.fromArray?K.fromArray(U):K.set(...U);else if(K.copy&&U&&U.constructor&&K.constructor.name===U.constructor.name)K.copy(U);else if(U!==void 0){const oe=K instanceof tt;!oe&&K.setScalar?K.setScalar(U):K instanceof Pp&&U instanceof Pp?K.mask=U.mask:K.set(U),!te&&oe&&K.convertSRGBToLinear()}}else z[F]=U,!te&&z[F]instanceof Vo&&(z[F].encoding=qn);o(m)}),k.parent&&M.internal&&m.raycast&&L!==k.eventCount){const F=M.internal.interaction.indexOf(m);F>-1&&M.internal.interaction.splice(F,1),k.eventCount&&M.internal.interaction.push(m)}return I.length&&(A=m.__r3f)!=null&&A.parent&&i(m),m}function o(m){var v,x;const b=(v=m.__r3f)==null||(x=v.root)==null||x.getState==null?void 0:x.getState();b&&b.internal.frames===0&&b.invalidate()}function i(m){m.onUpdate==null||m.onUpdate(m)}function l(m,E,b,A,k){var M=E,{args:v=[]}=M,x=gs(M,["args"]);let R=`${m[0].toUpperCase()}${m.slice(1)}`,I;if(!nx(b)&&k){const L=F=>F.return?L(F.return):F.stateNode&&F.stateNode.containerInfo;b=L(k)}if(!b||!nx(b))throw`No valid root for ${R}!`;if(m==="primitive"){if(x.object===void 0)throw"Primitives without 'object' are invalid!";const L=x.object;I=gf(L,{root:b,primitive:!0})}else{const L=pK[R]||qJ[R];if(!L)throw`${R} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(v))throw"The args prop must be an array!";I=gf(new L(...v),{root:b,memoizedProps:{args:v.length===0?null:v}})}return"attachFns"in x||(R.endsWith("Geometry")?x=Kn({attach:"geometry"},x):R.endsWith("Material")&&(x=Kn({attach:"material"},x))),t(I,x),I}function a(m,v){let x=!1;if(v){if(v.attachArray)uo.arr(m[v.attachArray])||(m[v.attachArray]=[]),m[v.attachArray].push(v);else if(v.attachObject)uo.obj(m[v.attachObject[0]])||(m[v.attachObject[0]]={}),m[v.attachObject[0]][v.attachObject[1]]=v;else if(v.attach&&!uo.fun(v.attach))m[v.attach]=v;else if(uo.arr(v.attachFns)){const[b]=v.attachFns;uo.str(b)&&uo.fun(m[b])?m[b](v):uo.fun(b)&&b(v,m)}else v.isObject3D&&m.isObject3D&&(m.add(v),x=!0);x||m.__r3f.objects.push(v),v.__r3f||gf(v,{}),v.__r3f.parent=m,i(v),o(v)}}function c(m,v,x){let b=!1;if(v){if(v.attachArray){const A=m[v.attachArray];uo.arr(A)||(m[v.attachArray]=[]),A.splice(A.indexOf(x),0,v)}else{if(v.attachObject||v.attach&&!uo.fun(v.attach))return a(m,v);if(v.isObject3D&&m.isObject3D){v.parent=m,v.dispatchEvent({type:"added"});const A=m.children.filter(E=>E!==v),k=A.indexOf(x);m.children=[...A.slice(0,k),v,...A.slice(k)],b=!0}}b||m.__r3f.objects.push(v),v.__r3f||gf(v,{}),v.__r3f.parent=m,i(v),o(v)}}function p(m,v,x=!1){m&&[...m].forEach(b=>h(v,b,x))}function h(m,v,x){if(v){var b,A;if(v.__r3f&&(v.__r3f.parent=null),(b=m.__r3f)!=null&&b.objects&&(m.__r3f.objects=m.__r3f.objects.filter(I=>I!==v)),v.attachArray)m[v.attachArray]=m[v.attachArray].filter(I=>I!==v);else if(v.attachObject)delete m[v.attachObject[0]][v.attachObject[1]];else if(v.attach&&!uo.fun(v.attach)&&m[v.attach]===v)m[v.attach]=null;else if(uo.arr(v.attachFns)){const[,I]=v.attachFns;uo.str(I)&&uo.fun(m[I])?m[I](v):uo.fun(I)&&I(v,m)}else if(v.isObject3D&&m.isObject3D){var k;m.remove(v),(k=v.__r3f)!=null&&k.root&&aK(v.__r3f.root,v)}const M=(A=v.__r3f)==null?void 0:A.primitive,R=x===void 0?v.dispose!==null&&!M:x;if(!M){var E;p((E=v.__r3f)==null?void 0:E.objects,v,R),p(v.children,v,R)}v.__r3f&&(delete v.__r3f.root,delete v.__r3f.objects,delete v.__r3f.handlers,delete v.__r3f.memoizedProps,M||delete v.__r3f),R&&v.dispose&&v.type!=="Scene"&&O_.exports.unstable_runWithPriority(O_.exports.unstable_IdlePriority,()=>{try{v.dispose()}catch{}}),o(m)}}function f(m,v,x,b){var A;const k=(A=m.__r3f)==null?void 0:A.parent;if(!k)return;const E=l(v,x,m.__r3f.root);v!=="primitive"&&m.children&&(m.children.forEach(M=>a(E,M)),m.children=[]),m.__r3f.objects.forEach(M=>a(E,M)),m.__r3f.objects=[],h(k,m),a(k,E),E.raycast&&E.__r3f.eventCount&&E.__r3f.root.getState().internal.interaction.push(E),[b,b.alternate].forEach(M=>{M!==null&&(M.stateNode=E,M.ref&&(typeof M.ref=="function"?M.ref(E):M.ref.current=E))})}return{reconciler:tK({now:O_.exports.unstable_now,createInstance:l,removeChild:h,appendChild:a,appendInitialChild:a,insertBefore:c,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:uo.fun(setTimeout)?setTimeout:void 0,cancelTimeout:uo.fun(clearTimeout)?clearTimeout:void 0,setTimeout:uo.fun(setTimeout)?setTimeout:void 0,clearTimeout:uo.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(m,v)=>{const{container:x,root:b}=Sb(m,v);x.__r3f.root=b,a(x,v)},removeChildFromContainer:(m,v)=>h(Sb(m,v).container,v),insertInContainerBefore:(m,v,x)=>c(Sb(m,v).container,v,x),prepareUpdate(m,v,x,b){if(m.__r3f.primitive&&b.object&&b.object!==m)return[!0];{const A=b,{args:E=[],children:M}=A,R=gs(A,["args","children"]),k=x,{args:I=[],children:L}=k,F=gs(k,["args","children"]);if(!Array.isArray(E))throw"The args prop must be an array!";if(E.some((X,j)=>X!==I[j]))return[!0];const U=e(m,R,F,!0);if(U.changes.length)return[!1,U];if(m.attach&&typeof m.attach!="function"){const j=m.__r3f.parent;j&&j[m.attach]!==m&&a(j,m)}return null}},commitUpdate(m,[v,x],b,A,k,E){v?f(m,b,k,E):t(m,x)},hideInstance(m){m.isObject3D&&(m.visible=!1,o(m))},unhideInstance(m,v){(m.isObject3D&&v.visible==null||v.visible)&&(m.visible=!0,o(m))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(m){return m},getRootHostContext(m){return hK},getChildHostContext(m){return m},createTextInstance(){},finalizeInitialChildren(m){var v;return!!((v=m==null?void 0:m.__r3f)!=null?v:{}).handlers},commitMount(m){var v;const x=(v=m==null?void 0:m.__r3f)!=null?v:{};m.raycast&&x.handlers&&x.eventCount&&m.__r3f.root.getState().internal.interaction.push(m)},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(m){gf(m)},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:t}}const mK=r=>!!(r!=null&&r.render),kO=r=>r&&r.isOrthographicCamera;function UA(r){return Array.isArray(r)?Math.min(Math.max(r[0],window.devicePixelRatio),r[1]):r}const hU=G.exports.createContext(null),gK=(r,e,t,o)=>{const{gl:i,size:l,shadows:a=!1,linear:c=!1,flat:p=!1,vr:h=!1,orthographic:f=!1,frameloop:_="always",dpr:m=1,performance:v,clock:x=new eR,raycaster:b,camera:A,onPointerMissed:k}=o;a&&(i.shadowMap.enabled=!0,typeof a=="object"?Object.assign(i.shadowMap,a):i.shadowMap.type=gM),c&&(i.outputEncoding=la),p&&(i.toneMapping=Ja),_==="never"&&(x.stop(),x.elapsedTime=0);const E=eK((L,F)=>{const U=new rR,S=b||{},{params:X}=S,j=gs(S,["params"]);r(U,si(Kn({enabled:!0},j),{params:Kn(Kn({},U.params),X)}));const P=A instanceof fh,z=P?A:f?new Ka(0,0,0,0,.1,1e3):new go(75,0,.1,1e3);P||(z.position.z=5,A&&r(z,A),A!=null&&A.rotation||z.lookAt(0,0,0));const K=UA(m),te=new Y,oe=new Y,ee=new Y;function pe(D=F().camera,H=oe,q=F().size){const{width:Q,height:de}=q,je=Q/de;H instanceof Y?ee.copy(H):ee.set(...H);const We=D.getWorldPosition(te).distanceTo(ee);if(kO(D))return{width:Q/D.zoom,height:de/D.zoom,factor:1,distance:We,aspect:je};{const ze=D.fov*Math.PI/180,Oe=2*Math.tan(ze/2)*We,Ye=Oe*(Q/de);return{width:Ye,height:Oe,factor:Q/Ye,distance:We,aspect:je}}}let ae;const Ee=D=>L(H=>({performance:si(Kn({},H.performance),{current:D})}));return{gl:i,set:L,get:F,invalidate:()=>e(F()),advance:(D,H)=>t(D,H,F()),linear:c,flat:p,scene:gf(new zm),camera:z,controls:null,raycaster:U,clock:x,mouse:new Ve,vr:h,frameloop:_,onPointerMissed:k,performance:si(Kn({current:1,min:.5,max:1,debounce:200},v),{regress:()=>{const D=F();ae&&clearTimeout(ae),D.performance.current!==D.performance.min&&Ee(D.performance.min),ae=setTimeout(()=>Ee(F().performance.max),D.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:K,dpr:K,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:pe},setSize:(D,H)=>{const q={width:D,height:H};L(Q=>({size:q,viewport:Kn(Kn({},Q.viewport),pe(z,oe,q))}))},setDpr:D=>L(H=>({viewport:si(Kn({},H.viewport),{dpr:UA(D)})})),setFrameloop:(D="always")=>L(()=>({frameloop:D})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:o,lastEvent:G.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(D,H=0)=>(L(({internal:q})=>({internal:si(Kn({},q),{priority:q.priority+(H>0?1:0),subscribers:[...q.subscribers,{ref:D,priority:H}].sort((Q,de)=>Q.priority-de.priority)})})),()=>{L(({internal:q})=>({internal:si(Kn({},q),{priority:q.priority-(H>0?1:0),subscribers:q.subscribers.filter(Q=>Q.ref!==D)})}))})}}}),M=E.getState();let R=M.size,I=M.viewport.dpr;return E.subscribe(()=>{const{camera:L,size:F,viewport:U,internal:X}=E.getState();(F!==R||U.dpr!==I)&&(!L.manual&&!(X.lastProps.camera instanceof fh)&&(kO(L)?(L.left=F.width/-2,L.right=F.width/2,L.top=F.height/2,L.bottom=F.height/-2):L.aspect=F.width/F.height,L.updateProjectionMatrix(),L.updateMatrixWorld()),i.setPixelRatio(U.dpr),i.setSize(F.width,F.height),R=F,I=U.dpr)}),l&&M.setSize(l.width,l.height),E.subscribe(L=>e(L)),E};let Xu,AO=[],wO=[],_K=[];function zg(r,e){for(Xu=0;Xu<r.length;Xu++)r[Xu](e)}function Cb(r,e){let t=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(t=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),Xu=0;Xu<e.internal.subscribers.length;Xu++)e.internal.subscribers[Xu].ref.current(e,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function yK(r){let e=!1,t;function o(a){if(e=!0,t=0,zg(AO,a),r.forEach(c=>{const p=c.store.getState();p.internal.active&&(p.frameloop==="always"||p.internal.frames>0)&&(t+=Cb(a,p))}),zg(wO,a),t>0)return requestAnimationFrame(o);zg(_K,a),e=!1}function i(a){if(!a)return r.forEach(c=>i(c.store.getState()));a.vr||!a.internal.active||a.frameloop==="never"||(a.internal.frames=Math.min(60,a.internal.frames+1),e||(e=!0,requestAnimationFrame(o)))}function l(a,c=!0,p){c&&zg(AO,a),p?Cb(a,p):r.forEach(h=>Cb(a,h.store.getState())),c&&zg(wO,a)}return{loop:o,invalidate:i,advance:l}}function vK(r){const{handlePointer:e}=cK(r),t={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(t).reduce((o,i)=>si(Kn({},o),{[i]:e(i)}),{}),connect:o=>{var i;const{set:l,events:a}=r.getState();a.disconnect==null||a.disconnect(),l(c=>({events:si(Kn({},c.events),{connected:o})})),Object.entries((i=a==null?void 0:a.handlers)!=null?i:[]).forEach(([c,p])=>{const[h,f]=t[c];o.addEventListener(h,p,{passive:f})})},disconnect:()=>{const{set:o,events:i}=r.getState();if(i.connected){var l;Object.entries((l=i.handlers)!=null?l:[]).forEach(([a,c])=>{if(i&&i.connected instanceof HTMLElement){const[p]=t[a];i.connected.removeEventListener(p,c)}}),o(a=>({events:si(Kn({},a.events),{connected:!1})}))}}}}const HA=typeof window!="undefined"?G.exports.useLayoutEffect:G.exports.useEffect;function TK({set:r}){return HA(()=>(r(new Promise(()=>null)),()=>r(!1)),[]),null}class pU extends G.exports.Component{constructor(...e){super(...e);this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}pU.getDerivedStateFromError=()=>({error:!0});const Lhe=G.exports.forwardRef(function(_,f){var m=_,{children:e,fallback:t,tabIndex:o,resize:i,id:l,style:a,className:c,events:p}=m,h=gs(m,["children","fallback","tabIndex","resize","id","style","className","events"]);const[v,{width:x,height:b}]=oK(Kn({scroll:!0,debounce:{scroll:50,resize:0}},i)),A=G.exports.useRef(null),[k,E]=G.exports.useState(!1),[M,R]=G.exports.useState(!1);if(k)throw k;if(M)throw M;return HA(()=>{x>0&&b>0&&CK(G.exports.createElement(pU,{set:R},G.exports.createElement(G.exports.Suspense,{fallback:G.exports.createElement(TK,{set:E})},e)),A.current,si(Kn({},h),{size:{width:x,height:b},events:p||vK}))},[x,b,e]),HA(()=>{const I=A.current;return()=>gU(I)},[]),G.exports.createElement("div",{ref:v,id:l,className:c,tabIndex:o,style:Kn({position:"relative",width:"100%",height:"100%",overflow:"hidden"},a)},G.exports.createElement("canvas",{ref:aU([A,f]),style:{display:"block"}},t))});function dU(){const r=G.exports.useContext(hU);if(!r)throw"R3F hooks can only be used within the Canvas component!";return r}function jr(r=t=>t,e){return dU()(r,e)}function fU(r,e=0){const t=dU().getState().internal.subscribe,o=G.exports.useRef(r);return G.exports.useLayoutEffect(()=>void(o.current=r),[r]),G.exports.useLayoutEffect(()=>t(o,e),[e,t]),null}function EK(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function mU(r,e){return function(t,...o){const i=new t;return r&&r(i),Promise.all(o.map(l=>new Promise((a,c)=>i.load(l,p=>{p.scene&&Object.assign(p,EK(p.scene)),a(p)},e,p=>c(`Could not load ${l}: ${p.message}`)))))}}function hv(r,e,t,o){const i=Array.isArray(e)?e:[e],l=Kc(mU(t,o),r,...i);return Array.isArray(e)?l:l[0]}hv.preload=function(r,e,t){const o=Array.isArray(e)?e:[e];return Kc.preload(mU(t),r,...o)};hv.clear=function(r,e){const t=Array.isArray(e)?e:[e];return Kc.clear(r,...t)};const by=new Map,MO=["legacy","blocking","concurrent"],{invalidate:xK,advance:RO}=yK(by),{reconciler:km,applyProps:lR}=fK(),SK=(r,e)=>{const t=typeof r=="function"?r(e):r;if(mK(t))return t;const o=new Qn(Kn({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},r));return o.outputEncoding=qn,o.toneMapping=TM,r&&lR(o,r),o};function CK(r,e,p={}){var h=p,{gl:t,size:o,mode:i=MO[1],events:l,onCreated:a}=h,c=gs(h,["gl","size","mode","events","onCreated"]);var f;if(!o){var _,m,v,x;o={width:(_=(m=e.parentElement)==null?void 0:m.clientWidth)!=null?_:0,height:(v=(x=e.parentElement)==null?void 0:x.clientHeight)!=null?v:0}}let b=by.get(e),A=b==null?void 0:b.fiber,k=b==null?void 0:b.store,E=(f=k)==null?void 0:f.getState();if(A&&E&&(c.dpr!==void 0&&!uo.equ(E.viewport.dpr,UA(c.dpr))&&E.setDpr(c.dpr),(E.size.width!==o.width||E.size.height!==o.height)&&E.setSize(o.width,o.height),E.frameloop!==c.frameloop&&E.setFrameloop(c.frameloop),c.linear!==E.internal.lastProps.linear&&(gU(e),A=void 0)),!A){const M=SK(t,e);c.vr&&(M.xr.enabled=!0,M.setAnimationLoop(I=>RO(I,!0))),k=gK(lR,xK,RO,Kn({gl:M,size:o},c));const R=k.getState();A=km.createContainer(k,MO.indexOf(i),!1,null),by.set(e,{fiber:A,store:k}),l&&R.set({events:l(k)})}if(k&&A)return km.updateContainer(G.exports.createElement(bK,{store:k,element:r,onCreated:a,target:e}),A,null,()=>{}),k;throw"Error creating root!"}function bK({store:r,element:e,onCreated:t,target:o}){return G.exports.useEffect(()=>{const i=r.getState();i.set(l=>({internal:si(Kn({},l.internal),{active:!0})})),i.events.connect==null||i.events.connect(o),t&&t(i)},[]),G.exports.createElement(hU.Provider,{value:r},e)}function gU(r,e){const t=by.get(r),o=t==null?void 0:t.fiber;if(o){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),km.updateContainer(null,o,null,()=>{i&&setTimeout(()=>{var l,a,c;i.events.disconnect==null||i.events.disconnect(),(l=i.gl)==null||(a=l.renderLists)==null||a.dispose==null||a.dispose(),(c=i.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),kK(i),by.delete(r),e&&e(r)},500)})}}function kK(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const o in r){var e,t;(e=(t=o).dispose)==null||e.call(t),delete r[o]}}km.act;function AK(r,e){return km.createPortal(r,e,null,null)}km.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});function ol(){return ol=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},ol.apply(this,arguments)}function ct(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const BO=(r,e)=>(r%e+e)%e;class wK extends nu{constructor(e,t){super();ct(this,"object",void 0),ct(this,"domElement",void 0),ct(this,"enabled",!0),ct(this,"target",new Y),ct(this,"minDistance",0),ct(this,"maxDistance",1/0),ct(this,"minZoom",0),ct(this,"maxZoom",1/0),ct(this,"minPolarAngle",0),ct(this,"maxPolarAngle",Math.PI),ct(this,"minAzimuthAngle",-1/0),ct(this,"maxAzimuthAngle",1/0),ct(this,"enableDamping",!1),ct(this,"dampingFactor",.05),ct(this,"enableZoom",!0),ct(this,"zoomSpeed",1),ct(this,"enableRotate",!0),ct(this,"rotateSpeed",1),ct(this,"enablePan",!0),ct(this,"panSpeed",1),ct(this,"screenSpacePanning",!0),ct(this,"keyPanSpeed",7),ct(this,"autoRotate",!1),ct(this,"autoRotateSpeed",2),ct(this,"reverseOrbit",!1),ct(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ct(this,"mouseButtons",{LEFT:up.ROTATE,MIDDLE:up.DOLLY,RIGHT:up.PAN}),ct(this,"touches",{ONE:hp.ROTATE,TWO:hp.DOLLY_PAN}),ct(this,"target0",void 0),ct(this,"position0",void 0),ct(this,"zoom0",void 0),ct(this,"_domElementKeyEvents",null),ct(this,"getPolarAngle",void 0),ct(this,"getAzimuthalAngle",void 0),ct(this,"setPolarAngle",void 0),ct(this,"setAzimuthalAngle",void 0),ct(this,"getDistance",void 0),ct(this,"listenToKeyEvents",void 0),ct(this,"saveState",void 0),ct(this,"reset",void 0),ct(this,"update",void 0),ct(this,"connect",void 0),ct(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof go?this.object.zoom:1,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=le=>{let W=BO(le,2*Math.PI),Me=f.phi;Me<0&&(Me+=2*Math.PI),W<0&&(W+=2*Math.PI);let we=Math.abs(W-Me);2*Math.PI-we<we&&(W<Me?W+=2*Math.PI:Me+=2*Math.PI),_.phi=W-Me,o.update()},this.setAzimuthalAngle=le=>{let W=BO(le,2*Math.PI),Me=f.theta;Me<0&&(Me+=2*Math.PI),W<0&&(W+=2*Math.PI);let we=Math.abs(W-Me);2*Math.PI-we<we&&(W<Me?W+=2*Math.PI:Me+=2*Math.PI),_.theta=W-Me,o.update()},this.getDistance=()=>o.object.position.distanceTo(o.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",B),this._domElementKeyEvents=le},this.saveState=()=>{o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object instanceof go?o.object.zoom:1},this.reset=()=>{o.target.copy(o.target0),o.object.position.copy(o.position0),o.object instanceof go&&(o.object.zoom=o.zoom0,o.object.updateProjectionMatrix()),o.dispatchEvent(i),o.update(),p=c.NONE},this.update=(()=>{const le=new Y,W=new rr().setFromUnitVectors(e.up,new Y(0,1,0)),Me=W.clone().invert(),we=new Y,yt=new rr,$e=2*Math.PI;return function(){const it=o.object.position;le.copy(it).sub(o.target),le.applyQuaternion(W),f.setFromVector3(le),o.autoRotate&&p===c.NONE&&z(j()),o.enableDamping?(f.theta+=_.theta*o.dampingFactor,f.phi+=_.phi*o.dampingFactor):(f.theta+=_.theta,f.phi+=_.phi);let Jt=o.minAzimuthAngle,$n=o.maxAzimuthAngle;return isFinite(Jt)&&isFinite($n)&&(Jt<-Math.PI?Jt+=$e:Jt>Math.PI&&(Jt-=$e),$n<-Math.PI?$n+=$e:$n>Math.PI&&($n-=$e),Jt<=$n?f.theta=Math.max(Jt,Math.min($n,f.theta)):f.theta=f.theta>(Jt+$n)/2?Math.max(Jt,f.theta):Math.min($n,f.theta)),f.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=m,f.radius=Math.max(o.minDistance,Math.min(o.maxDistance,f.radius)),o.enableDamping===!0?o.target.addScaledVector(v,o.dampingFactor):o.target.add(v),le.setFromSpherical(f),le.applyQuaternion(Me),it.copy(o.target).add(le),o.object.lookAt(o.target),o.enableDamping===!0?(_.theta*=1-o.dampingFactor,_.phi*=1-o.dampingFactor,v.multiplyScalar(1-o.dampingFactor)):(_.set(0,0,0),v.set(0,0,0)),m=1,x||we.distanceToSquared(o.object.position)>h||8*(1-yt.dot(o.object.quaternion))>h?(o.dispatchEvent(i),we.copy(o.object.position),yt.copy(o.object.quaternion),x=!1,!0):!1}})(),this.connect=le=>{le===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.domElement=le,o.domElement.style.touchAction="none",o.domElement.addEventListener("contextmenu",ge),o.domElement.addEventListener("pointerdown",qe),o.domElement.addEventListener("pointercancel",rt),o.domElement.addEventListener("wheel",Z)},this.dispose=()=>{var le,W,Me,we,yt,$e;(le=o.domElement)===null||le===void 0||le.removeEventListener("contextmenu",ge),(W=o.domElement)===null||W===void 0||W.removeEventListener("pointerdown",qe),(Me=o.domElement)===null||Me===void 0||Me.removeEventListener("pointercancel",rt),(we=o.domElement)===null||we===void 0||we.removeEventListener("wheel",Z),(yt=o.domElement)===null||yt===void 0||yt.ownerDocument.removeEventListener("pointermove",lt),($e=o.domElement)===null||$e===void 0||$e.ownerDocument.removeEventListener("pointerup",ue),o._domElementKeyEvents!==null&&o._domElementKeyEvents.removeEventListener("keydown",B)};const o=this,i={type:"change"},l={type:"start"},a={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let p=c.NONE;const h=1e-6,f=new PA,_=new PA;let m=1;const v=new Y;let x=!1;const b=new Ve,A=new Ve,k=new Ve,E=new Ve,M=new Ve,R=new Ve,I=new Ve,L=new Ve,F=new Ve,U=[],X={};function j(){return 2*Math.PI/60/60*o.autoRotateSpeed}function P(){return Math.pow(.95,o.zoomSpeed)}function z(le){o.reverseOrbit?_.theta+=le:_.theta-=le}function K(le){o.reverseOrbit?_.phi+=le:_.phi-=le}const te=(()=>{const le=new Y;return function(Me,we){le.setFromMatrixColumn(we,0),le.multiplyScalar(-Me),v.add(le)}})(),oe=(()=>{const le=new Y;return function(Me,we){o.screenSpacePanning===!0?le.setFromMatrixColumn(we,1):(le.setFromMatrixColumn(we,0),le.crossVectors(o.object.up,le)),le.multiplyScalar(Me),v.add(le)}})(),ee=(()=>{const le=new Y;return function(Me,we){const yt=o.domElement;if(yt&&o.object instanceof go&&o.object.isPerspectiveCamera){const $e=o.object.position;le.copy($e).sub(o.target);let nt=le.length();nt*=Math.tan(o.object.fov/2*Math.PI/180),te(2*Me*nt/yt.clientHeight,o.object.matrix),oe(2*we*nt/yt.clientHeight,o.object.matrix)}else yt&&o.object instanceof Ka&&o.object.isOrthographicCamera?(te(Me*(o.object.right-o.object.left)/o.object.zoom/yt.clientWidth,o.object.matrix),oe(we*(o.object.top-o.object.bottom)/o.object.zoom/yt.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}})();function pe(le){o.object instanceof go&&o.object.isPerspectiveCamera?m/=le:o.object instanceof Ka&&o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*le)),o.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function ae(le){o.object instanceof go&&o.object.isPerspectiveCamera?m*=le:o.object instanceof Ka&&o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/le)),o.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function Ee(le){b.set(le.clientX,le.clientY)}function S(le){I.set(le.clientX,le.clientY)}function D(le){E.set(le.clientX,le.clientY)}function H(le){A.set(le.clientX,le.clientY),k.subVectors(A,b).multiplyScalar(o.rotateSpeed);const W=o.domElement;W&&(z(2*Math.PI*k.x/W.clientHeight),K(2*Math.PI*k.y/W.clientHeight)),b.copy(A),o.update()}function q(le){L.set(le.clientX,le.clientY),F.subVectors(L,I),F.y>0?pe(P()):F.y<0&&ae(P()),I.copy(L),o.update()}function Q(le){M.set(le.clientX,le.clientY),R.subVectors(M,E).multiplyScalar(o.panSpeed),ee(R.x,R.y),E.copy(M),o.update()}function de(le){le.deltaY<0?ae(P()):le.deltaY>0&&pe(P()),o.update()}function je(le){let W=!1;switch(le.code){case o.keys.UP:ee(0,o.keyPanSpeed),W=!0;break;case o.keys.BOTTOM:ee(0,-o.keyPanSpeed),W=!0;break;case o.keys.LEFT:ee(o.keyPanSpeed,0),W=!0;break;case o.keys.RIGHT:ee(-o.keyPanSpeed,0),W=!0;break}W&&(le.preventDefault(),o.update())}function We(){if(U.length==1)b.set(U[0].pageX,U[0].pageY);else{const le=.5*(U[0].pageX+U[1].pageX),W=.5*(U[0].pageY+U[1].pageY);b.set(le,W)}}function ze(){if(U.length==1)E.set(U[0].pageX,U[0].pageY);else{const le=.5*(U[0].pageX+U[1].pageX),W=.5*(U[0].pageY+U[1].pageY);E.set(le,W)}}function Oe(){const le=U[0].pageX-U[1].pageX,W=U[0].pageY-U[1].pageY,Me=Math.sqrt(le*le+W*W);I.set(0,Me)}function Ye(){o.enableZoom&&Oe(),o.enablePan&&ze()}function et(){o.enableZoom&&Oe(),o.enableRotate&&We()}function Re(le){if(U.length==1)A.set(le.pageX,le.pageY);else{const Me=Ce(le),we=.5*(le.pageX+Me.x),yt=.5*(le.pageY+Me.y);A.set(we,yt)}k.subVectors(A,b).multiplyScalar(o.rotateSpeed);const W=o.domElement;W&&(z(2*Math.PI*k.x/W.clientHeight),K(2*Math.PI*k.y/W.clientHeight)),b.copy(A)}function Te(le){if(U.length==1)M.set(le.pageX,le.pageY);else{const W=Ce(le),Me=.5*(le.pageX+W.x),we=.5*(le.pageY+W.y);M.set(Me,we)}R.subVectors(M,E).multiplyScalar(o.panSpeed),ee(R.x,R.y),E.copy(M)}function Le(le){const W=Ce(le),Me=le.pageX-W.x,we=le.pageY-W.y,yt=Math.sqrt(Me*Me+we*we);L.set(0,yt),F.set(0,Math.pow(L.y/I.y,o.zoomSpeed)),pe(F.y),I.copy(L)}function Ke(le){o.enableZoom&&Le(le),o.enablePan&&Te(le)}function Ne(le){o.enableZoom&&Le(le),o.enableRotate&&Re(le)}function qe(le){if(o.enabled!==!1){if(U.length===0){var W,Me;(W=o.domElement)===null||W===void 0||W.ownerDocument.addEventListener("pointermove",lt),(Me=o.domElement)===null||Me===void 0||Me.ownerDocument.addEventListener("pointerup",ue)}_e(le),le.pointerType==="touch"?Ae(le):xt(le)}}function lt(le){o.enabled!==!1&&(le.pointerType==="touch"?Ue(le):ie(le))}function ue(le){if(ke(le),U.length===0){var W,Me,we;(W=o.domElement)===null||W===void 0||W.releasePointerCapture(le.pointerId),(Me=o.domElement)===null||Me===void 0||Me.ownerDocument.removeEventListener("pointermove",lt),(we=o.domElement)===null||we===void 0||we.ownerDocument.removeEventListener("pointerup",ue)}o.dispatchEvent(a),p=c.NONE}function rt(le){ke(le)}function xt(le){let W;switch(le.button){case 0:W=o.mouseButtons.LEFT;break;case 1:W=o.mouseButtons.MIDDLE;break;case 2:W=o.mouseButtons.RIGHT;break;default:W=-1}switch(W){case up.DOLLY:if(o.enableZoom===!1)return;S(le),p=c.DOLLY;break;case up.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(o.enablePan===!1)return;D(le),p=c.PAN}else{if(o.enableRotate===!1)return;Ee(le),p=c.ROTATE}break;case up.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(o.enableRotate===!1)return;Ee(le),p=c.ROTATE}else{if(o.enablePan===!1)return;D(le),p=c.PAN}break;default:p=c.NONE}p!==c.NONE&&o.dispatchEvent(l)}function ie(le){if(o.enabled!==!1)switch(p){case c.ROTATE:if(o.enableRotate===!1)return;H(le);break;case c.DOLLY:if(o.enableZoom===!1)return;q(le);break;case c.PAN:if(o.enablePan===!1)return;Q(le);break}}function Z(le){o.enabled===!1||o.enableZoom===!1||p!==c.NONE&&p!==c.ROTATE||(le.preventDefault(),o.dispatchEvent(l),de(le),o.dispatchEvent(a))}function B(le){o.enabled===!1||o.enablePan===!1||je(le)}function Ae(le){switch(me(le),U.length){case 1:switch(o.touches.ONE){case hp.ROTATE:if(o.enableRotate===!1)return;We(),p=c.TOUCH_ROTATE;break;case hp.PAN:if(o.enablePan===!1)return;ze(),p=c.TOUCH_PAN;break;default:p=c.NONE}break;case 2:switch(o.touches.TWO){case hp.DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;Ye(),p=c.TOUCH_DOLLY_PAN;break;case hp.DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;et(),p=c.TOUCH_DOLLY_ROTATE;break;default:p=c.NONE}break;default:p=c.NONE}p!==c.NONE&&o.dispatchEvent(l)}function Ue(le){switch(me(le),p){case c.TOUCH_ROTATE:if(o.enableRotate===!1)return;Re(le),o.update();break;case c.TOUCH_PAN:if(o.enablePan===!1)return;Te(le),o.update();break;case c.TOUCH_DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;Ke(le),o.update();break;case c.TOUCH_DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;Ne(le),o.update();break;default:p=c.NONE}}function ge(le){o.enabled!==!1&&le.preventDefault()}function _e(le){U.push(le)}function ke(le){delete X[le.pointerId];for(let W=0;W<U.length;W++)if(U[W].pointerId==le.pointerId){U.splice(W,1);return}}function me(le){let W=X[le.pointerId];W===void 0&&(W=new Ve,X[le.pointerId]=W),W.set(le.pageX,le.pageY)}function Ce(le){const W=le.pointerId===U[0].pointerId?U[1]:U[0];return X[W.pointerId]}t!==void 0&&this.connect(t),this.update()}}class aR extends gi{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new IK(t)}),this.register(function(t){return new PK(t)}),this.register(function(t){return new FK(t)}),this.register(function(t){return new OK(t)}),this.register(function(t){return new DK(t)}),this.register(function(t){return new LK(t)}),this.register(function(t){return new NK(t)}),this.register(function(t){return new $K(t)}),this.register(function(t){return new RK(t)}),this.register(function(t){return new UK(t)})}load(e,t,o,i){const l=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=ia.extractUrlBase(e),this.manager.itemStart(e);const c=function(h){i?i(h):console.error(h),l.manager.itemError(e),l.manager.itemEnd(e)},p=new As(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(e,function(h){try{l.parse(h,a,function(f){t(f),l.manager.itemEnd(e)},c)}catch(f){c(f)}},o,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,o,i){let l;const a={},c={};if(typeof e=="string")l=e;else if(ia.decodeText(new Uint8Array(e,0,4))===_U){try{a[Mn.KHR_BINARY_GLTF]=new HK(e)}catch(_){i&&i(_);return}l=a[Mn.KHR_BINARY_GLTF].content}else l=ia.decodeText(new Uint8Array(e));const p=JSON.parse(l);if(p.asset===void 0||p.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new ZK(p,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const _=this.pluginCallbacks[f](h);c[_.name]=_,a[_.name]=!0}if(p.extensionsUsed)for(let f=0;f<p.extensionsUsed.length;++f){const _=p.extensionsUsed[f],m=p.extensionsRequired||[];switch(_){case Mn.KHR_MATERIALS_UNLIT:a[_]=new BK;break;case Mn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[_]=new WK;break;case Mn.KHR_DRACO_MESH_COMPRESSION:a[_]=new GK(p,this.dracoLoader);break;case Mn.KHR_TEXTURE_TRANSFORM:a[_]=new VK;break;case Mn.KHR_MESH_QUANTIZATION:a[_]=new zK;break;default:m.indexOf(_)>=0&&c[_]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}h.setExtensions(a),h.setPlugins(c),h.parse(o,i)}parseAsync(e,t){const o=this;return new Promise(function(i,l){o.parse(e,t,i,l)})}}function MK(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Mn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class RK{constructor(e){this.parser=e,this.name=Mn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let o=0,i=t.length;o<i;o++){const l=t[o];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(e){const t=this.parser,o="light:"+e;let i=t.cache.get(o);if(i)return i;const l=t.json,p=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let h;const f=new tt(16777215);p.color!==void 0&&f.fromArray(p.color);const _=p.range!==void 0?p.range:0;switch(p.type){case"directional":h=new fS(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new dS(f),h.distance=_;break;case"spot":h=new pS(f),h.distance=_,p.spot=p.spot||{},p.spot.innerConeAngle=p.spot.innerConeAngle!==void 0?p.spot.innerConeAngle:0,p.spot.outerConeAngle=p.spot.outerConeAngle!==void 0?p.spot.outerConeAngle:Math.PI/4,h.angle=p.spot.outerConeAngle,h.penumbra=1-p.spot.innerConeAngle/p.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+p.type)}return h.position.set(0,0,0),h.decay=2,p.intensity!==void 0&&(h.intensity=p.intensity),h.name=t.createUniqueName(p.name||"light_"+e),i=Promise.resolve(h),t.cache.add(o,i),i}createNodeAttachment(e){const t=this,o=this.parser,l=o.json.nodes[e],c=(l.extensions&&l.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(p){return o._getNodeRef(t.cache,c,p)})}}class BK{constructor(){this.name=Mn.KHR_MATERIALS_UNLIT}getMaterialType(){return Es}extendParams(e,t,o){const i=[];e.color=new tt(1,1,1),e.opacity=1;const l=t.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const a=l.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}l.baseColorTexture!==void 0&&i.push(o.assignTexture(e,"map",l.baseColorTexture))}return Promise.all(i)}}class IK{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:ou}extendMaterialParams(e,t){const o=this.parser,i=o.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const l=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&l.push(o.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&l.push(o.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(l.push(o.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const c=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ve(c,c)}return Promise.all(l)}}class OK{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_SHEEN}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:ou}extendMaterialParams(e,t){const o=this.parser,i=o.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const l=[];t.sheenColor=new tt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&l.push(o.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),a.sheenRoughnessTexture!==void 0&&l.push(o.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(l)}}class DK{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:ou}extendMaterialParams(e,t){const o=this.parser,i=o.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const l=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&l.push(o.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(l)}}class LK{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_VOLUME}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:ou}extendMaterialParams(e,t){const o=this.parser,i=o.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const l=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&l.push(o.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const c=a.attenuationColor||[1,1,1];return t.attenuationColor=new tt(c[0],c[1],c[2]),Promise.all(l)}}class NK{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_IOR}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:ou}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const l=i.extensions[this.name];return t.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}}class $K{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:ou}extendMaterialParams(e,t){const o=this.parser,i=o.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const l=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&l.push(o.assignTexture(t,"specularIntensityMap",a.specularTexture));const c=a.specularColorFactor||[1,1,1];return t.specularColor=new tt(c[0],c[1],c[2]),a.specularColorTexture!==void 0&&l.push(o.assignTexture(t,"specularColorMap",a.specularColorTexture).then(function(p){p.encoding=qn})),Promise.all(l)}}class PK{constructor(e){this.parser=e,this.name=Mn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,o=t.json,i=o.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const l=i.extensions[this.name],a=o.images[l.source],c=t.options.ktx2Loader;if(!c){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,c)}}class FK{constructor(e){this.parser=e,this.name=Mn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,o=this.parser,i=o.json,l=i.textures[e];if(!l.extensions||!l.extensions[t])return null;const a=l.extensions[t],c=i.images[a.source];let p=o.textureLoader;if(c.uri){const h=o.options.manager.getHandler(c.uri);h!==null&&(p=h)}return this.detectSupport().then(function(h){if(h)return o.loadTextureImage(e,c,p);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class UK{constructor(e){this.name=Mn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,o=t.bufferViews[e];if(o.extensions&&o.extensions[this.name]){const i=o.extensions[this.name],l=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([l,a.ready]).then(function(c){const p=i.byteOffset||0,h=i.byteLength||0,f=i.count,_=i.byteStride,m=new ArrayBuffer(f*_),v=new Uint8Array(c[0],p,h);return a.decodeGltfBuffer(new Uint8Array(m),f,_,v,i.mode,i.filter),m})}else return null}}const _U="glTF",Xg=12,IO={JSON:1313821514,BIN:5130562};class HK{constructor(e){this.name=Mn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Xg);if(this.header={magic:ia.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==_U)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-Xg,i=new DataView(e,Xg);let l=0;for(;l<o;){const a=i.getUint32(l,!0);l+=4;const c=i.getUint32(l,!0);if(l+=4,c===IO.JSON){const p=new Uint8Array(e,Xg+l,a);this.content=ia.decodeText(p)}else if(c===IO.BIN){const p=Xg+l;this.body=e.slice(p,p+a)}l+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Mn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const o=this.json,i=this.dracoLoader,l=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,c={},p={},h={};for(const f in a){const _=VA[f]||f.toLowerCase();c[_]=a[f]}for(const f in e.attributes){const _=VA[f]||f.toLowerCase();if(a[f]!==void 0){const m=o.accessors[e.attributes[f]],v=ky[m.componentType];h[_]=v,p[_]=m.normalized===!0}}return t.getDependency("bufferView",l).then(function(f){return new Promise(function(_){i.decodeDracoFile(f,function(m){for(const v in m.attributes){const x=m.attributes[v],b=p[v];b!==void 0&&(x.normalized=b)}_(m)},c,h)})})}}class VK{constructor(){this.name=Mn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GA extends cd{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),o=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),c={specular:{value:new tt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=c,this.onBeforeCompile=function(p){for(const h in c)p.uniforms[h]=c[h];p.fragmentShader=p.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return c.specular.value},set:function(p){c.specular.value=p}},specularMap:{get:function(){return c.specularMap.value},set:function(p){c.specularMap.value=p,p?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return c.glossiness.value},set:function(p){c.glossiness.value=p}},glossinessMap:{get:function(){return c.glossinessMap.value},set:function(p){c.glossinessMap.value=p,p?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class WK{constructor(){this.name=Mn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return GA}extendParams(e,t,o){const i=t.extensions[this.name];e.color=new tt(1,1,1),e.opacity=1;const l=[];if(Array.isArray(i.diffuseFactor)){const a=i.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(i.diffuseTexture!==void 0&&l.push(o.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new tt(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new tt(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const a=i.specularGlossinessTexture;l.push(o.assignTexture(e,"glossinessMap",a)),l.push(o.assignTexture(e,"specularMap",a))}return Promise.all(l)}createMaterial(e){const t=new GA(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=bh,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class zK{constructor(){this.name=Mn.KHR_MESH_QUANTIZATION}}class Zp extends ic{constructor(e,t,o,i){super(e,t,o,i)}copySampleValue_(e){const t=this.resultBuffer,o=this.sampleValues,i=this.valueSize,l=e*i*3+i;for(let a=0;a!==i;a++)t[a]=o[l+a];return t}}Zp.prototype.beforeStart_=Zp.prototype.copySampleValue_;Zp.prototype.afterEnd_=Zp.prototype.copySampleValue_;Zp.prototype.interpolate_=function(r,e,t,o){const i=this.resultBuffer,l=this.sampleValues,a=this.valueSize,c=a*2,p=a*3,h=o-e,f=(t-e)/h,_=f*f,m=_*f,v=r*p,x=v-p,b=-2*m+3*_,A=m-_,k=1-b,E=A-_+f;for(let M=0;M!==a;M++){const R=l[x+M+a],I=l[x+M+c]*h,L=l[v+M+a],F=l[v+M]*h;i[M]=k*R+E*I+b*L+A*F}return i};const XK=new rr;class jK extends Zp{interpolate_(e,t,o,i){const l=super.interpolate_(e,t,o,i);return XK.fromArray(l).normalize().toArray(l),l}}const Ic={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ky={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OO={9728:tr,9729:So,9984:fy,9985:zx,9986:my,9987:tu},DO={33071:Kr,33648:lm,10497:dh},LO={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Du={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},JK={CUBICSPLINE:void 0,LINEAR:Xp,STEP:cm},bb={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function KK(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new cd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:hh})),r.DefaultMaterial}function jg(r,e,t){for(const o in t.extensions)r[o]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[o]=t.extensions[o])}function dp(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function YK(r,e,t){let o=!1,i=!1;for(let c=0,p=e.length;c<p;c++){const h=e[c];if(h.POSITION!==void 0&&(o=!0),h.NORMAL!==void 0&&(i=!0),o&&i)break}if(!o&&!i)return Promise.resolve(r);const l=[],a=[];for(let c=0,p=e.length;c<p;c++){const h=e[c];if(o){const f=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):r.attributes.position;l.push(f)}if(i){const f=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):r.attributes.normal;a.push(f)}}return Promise.all([Promise.all(l),Promise.all(a)]).then(function(c){const p=c[0],h=c[1];return o&&(r.morphAttributes.position=p),i&&(r.morphAttributes.normal=h),r.morphTargetsRelative=!0,r})}function qK(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,o=e.weights.length;t<o;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let o=0,i=t.length;o<i;o++)r.morphTargetDictionary[t[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function QK(r){const e=r.extensions&&r.extensions[Mn.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+NO(e.attributes):t=r.indices+":"+NO(r.attributes)+":"+r.mode,t}function NO(r){let e="";const t=Object.keys(r).sort();for(let o=0,i=t.length;o<i;o++)e+=t[o]+":"+r[t[o]]+";";return e}function WA(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class ZK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new MK,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!1?this.textureLoader=new QM(this.options.manager):this.textureLoader=new XM(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new As(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const o=this,i=this.json,l=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(a){const c={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:o,userData:{}};jg(l,c,i),dp(c,i),Promise.all(o._invokeAll(function(p){return p.afterRoot&&p.afterRoot(c)})).then(function(){e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],o=this.json.meshes||[];for(let i=0,l=t.length;i<l;i++){const a=t[i].joints;for(let c=0,p=a.length;c<p;c++)e[a[c]].isBone=!0}for(let i=0,l=e.length;i<l;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(o[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,o){if(e.refs[t]<=1)return o;const i=o.clone(),l=(a,c)=>{const p=this.associations.get(a);p!=null&&this.associations.set(c,p);for(const[h,f]of a.children.entries())l(f,c.children[h])};return l(o,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let o=0;o<t.length;o++){const i=e(t[o]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const o=[];for(let i=0;i<t.length;i++){const l=e(t[i]);l&&o.push(l)}return o}getDependency(e,t){const o=e+":"+t;let i=this.cache.get(o);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(o,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const o=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(l,a){return o.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],o=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Mn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(l,a){o.load(ia.resolveURL(t.uri,i.path),l,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(o){const i=t.byteLength||0,l=t.byteOffset||0;return o.slice(l,l+i)})}loadAccessor(e){const t=this,o=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const l=[];return i.bufferView!==void 0?l.push(this.getDependency("bufferView",i.bufferView)):l.push(null),i.sparse!==void 0&&(l.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(l).then(function(a){const c=a[0],p=LO[i.type],h=ky[i.componentType],f=h.BYTES_PER_ELEMENT,_=f*p,m=i.byteOffset||0,v=i.bufferView!==void 0?o.bufferViews[i.bufferView].byteStride:void 0,x=i.normalized===!0;let b,A;if(v&&v!==_){const k=Math.floor(m/v),E="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+k+":"+i.count;let M=t.cache.get(E);M||(b=new h(c,k*v,i.count*v/f),M=new wh(b,v/f),t.cache.add(E,M)),A=new ns(M,p,m%v/f,x)}else c===null?b=new h(i.count*p):b=new h(c,m,i.count*p),A=new vn(b,p,x);if(i.sparse!==void 0){const k=LO.SCALAR,E=ky[i.sparse.indices.componentType],M=i.sparse.indices.byteOffset||0,R=i.sparse.values.byteOffset||0,I=new E(a[1],M,i.sparse.count*k),L=new h(a[2],R,i.sparse.count*p);c!==null&&(A=new vn(A.array.slice(),A.itemSize,A.normalized));for(let F=0,U=I.length;F<U;F++){const X=I[F];if(A.setX(X,L[F*p]),p>=2&&A.setY(X,L[F*p+1]),p>=3&&A.setZ(X,L[F*p+2]),p>=4&&A.setW(X,L[F*p+3]),p>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,o=this.options,i=t.textures[e],l=t.images[i.source];let a=this.textureLoader;if(l.uri){const c=o.manager.getHandler(l.uri);c!==null&&(a=c)}return this.loadTextureImage(e,l,a)}loadTextureImage(e,t,o){const i=this,l=this.json,a=this.options,c=l.textures[e],p=(t.uri||t.bufferView)+":"+c.sampler;if(this.textureCache[p])return this.textureCache[p];const h=self.URL||self.webkitURL;let f=t.uri||"",_=!1;if(t.bufferView!==void 0)f=i.getDependency("bufferView",t.bufferView).then(function(v){_=!0;const x=new Blob([v],{type:t.mimeType});return f=h.createObjectURL(x),f});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(v){return new Promise(function(x,b){let A=x;o.isImageBitmapLoader===!0&&(A=function(k){const E=new Vo(k);E.needsUpdate=!0,x(E)}),o.load(ia.resolveURL(v,a.path),A,void 0,b)})}).then(function(v){_===!0&&h.revokeObjectURL(f),v.flipY=!1,c.name&&(v.name=c.name);const b=(l.samplers||{})[c.sampler]||{};return v.magFilter=OO[b.magFilter]||So,v.minFilter=OO[b.minFilter]||tu,v.wrapS=DO[b.wrapS]||dh,v.wrapT=DO[b.wrapT]||dh,i.associations.set(v,{textures:e}),v}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",f),null});return this.textureCache[p]=m,m}assignTexture(e,t,o){const i=this;return this.getDependency("texture",o.index).then(function(l){if(o.texCoord!==void 0&&o.texCoord!=0&&!(t==="aoMap"&&o.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+o.texCoord+" for texture "+t+" not yet supported."),i.extensions[Mn.KHR_TEXTURE_TRANSFORM]){const a=o.extensions!==void 0?o.extensions[Mn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=i.associations.get(l);l=i.extensions[Mn.KHR_TEXTURE_TRANSFORM].extendTexture(l,a),i.associations.set(l,c)}}return e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let o=e.material;const i=t.attributes.tangent===void 0,l=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+o.uuid;let p=this.cache.get(c);p||(p=new Mh,dr.prototype.copy.call(p,o),p.color.copy(o.color),p.map=o.map,p.sizeAttenuation=!1,this.cache.add(c,p)),o=p}else if(e.isLine){const c="LineBasicMaterial:"+o.uuid;let p=this.cache.get(c);p||(p=new Lr,dr.prototype.copy.call(p,o),p.color.copy(o.color),this.cache.add(c,p)),o=p}if(i||l||a){let c="ClonedMaterial:"+o.uuid+":";o.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),i&&(c+="derivative-tangents:"),l&&(c+="vertex-colors:"),a&&(c+="flat-shading:");let p=this.cache.get(c);p||(p=o.clone(),l&&(p.vertexColors=!0),a&&(p.flatShading=!0),i&&(p.normalScale&&(p.normalScale.y*=-1),p.clearcoatNormalScale&&(p.clearcoatNormalScale.y*=-1)),this.cache.add(c,p),this.associations.set(p,this.associations.get(o))),o=p}o.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=o}getMaterialType(){return cd}loadMaterial(e){const t=this,o=this.json,i=this.extensions,l=o.materials[e];let a;const c={},p=l.extensions||{},h=[];if(p[Mn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const _=i[Mn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=_.getMaterialType(),h.push(_.extendParams(c,l,t))}else if(p[Mn.KHR_MATERIALS_UNLIT]){const _=i[Mn.KHR_MATERIALS_UNLIT];a=_.getMaterialType(),h.push(_.extendParams(c,l,t))}else{const _=l.pbrMetallicRoughness||{};if(c.color=new tt(1,1,1),c.opacity=1,Array.isArray(_.baseColorFactor)){const m=_.baseColorFactor;c.color.fromArray(m),c.opacity=m[3]}_.baseColorTexture!==void 0&&h.push(t.assignTexture(c,"map",_.baseColorTexture)),c.metalness=_.metallicFactor!==void 0?_.metallicFactor:1,c.roughness=_.roughnessFactor!==void 0?_.roughnessFactor:1,_.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(c,"metalnessMap",_.metallicRoughnessTexture)),h.push(t.assignTexture(c,"roughnessMap",_.metallicRoughnessTexture))),a=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,c)})))}l.doubleSided===!0&&(c.side=ph);const f=l.alphaMode||bb.OPAQUE;if(f===bb.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,f===bb.MASK&&(c.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&a!==Es&&(h.push(t.assignTexture(c,"normalMap",l.normalTexture)),c.normalScale=new Ve(1,1),l.normalTexture.scale!==void 0)){const _=l.normalTexture.scale;c.normalScale.set(_,_)}return l.occlusionTexture!==void 0&&a!==Es&&(h.push(t.assignTexture(c,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&a!==Es&&(c.emissive=new tt().fromArray(l.emissiveFactor)),l.emissiveTexture!==void 0&&a!==Es&&h.push(t.assignTexture(c,"emissiveMap",l.emissiveTexture)),Promise.all(h).then(function(){let _;return a===GA?_=i[Mn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):_=new a(c),l.name&&(_.name=l.name),_.map&&(_.map.encoding=qn),_.emissiveMap&&(_.emissiveMap.encoding=qn),dp(_,l),t.associations.set(_,{materials:e}),l.extensions&&jg(i,_,l),_})}createUniqueName(e){const t=Rn.sanitizeNodeName(e||"");let o=t;for(let i=1;this.nodeNamesUsed[o];++i)o=t+"_"+i;return this.nodeNamesUsed[o]=!0,o}loadGeometries(e){const t=this,o=this.extensions,i=this.primitiveCache;function l(c){return o[Mn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(p){return $O(p,c,t)})}const a=[];for(let c=0,p=e.length;c<p;c++){const h=e[c],f=QK(h),_=i[f];if(_)a.push(_.promise);else{let m;h.extensions&&h.extensions[Mn.KHR_DRACO_MESH_COMPRESSION]?m=l(h):m=$O(new Ut,h,t),i[f]={primitive:h,promise:m},a.push(m)}}return Promise.all(a)}loadMesh(e){const t=this,o=this.json,i=this.extensions,l=o.meshes[e],a=l.primitives,c=[];for(let p=0,h=a.length;p<h;p++){const f=a[p].material===void 0?KK(this.cache):this.getDependency("material",a[p].material);c.push(f)}return c.push(t.loadGeometries(a)),Promise.all(c).then(function(p){const h=p.slice(0,p.length-1),f=p[p.length-1],_=[];for(let v=0,x=f.length;v<x;v++){const b=f[v],A=a[v];let k;const E=h[v];if(A.mode===Ic.TRIANGLES||A.mode===Ic.TRIANGLE_STRIP||A.mode===Ic.TRIANGLE_FAN||A.mode===void 0)k=l.isSkinnedMesh===!0?new iv(b,E):new nr(b,E),k.isSkinnedMesh===!0&&!k.geometry.attributes.skinWeight.normalized&&k.normalizeSkinWeights(),A.mode===Ic.TRIANGLE_STRIP?k.geometry=PO(k.geometry,JF):A.mode===Ic.TRIANGLE_FAN&&(k.geometry=PO(k.geometry,xM));else if(A.mode===Ic.LINES)k=new is(b,E);else if(A.mode===Ic.LINE_STRIP)k=new nc(b,E);else if(A.mode===Ic.LINE_LOOP)k=new iS(b,E);else if(A.mode===Ic.POINTS)k=new Xm(b,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(k.geometry.morphAttributes).length>0&&qK(k,l),k.name=t.createUniqueName(l.name||"mesh_"+e),dp(k,l),A.extensions&&jg(i,k,A),t.assignFinalMaterial(k),_.push(k)}for(let v=0,x=_.length;v<x;v++)t.associations.set(_[v],{meshes:e,primitives:v});if(_.length===1)return _[0];const m=new Va;t.associations.set(m,{meshes:e});for(let v=0,x=_.length;v<x;v++)m.add(_[v]);return m})}loadCamera(e){let t;const o=this.json.cameras[e],i=o[o.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return o.type==="perspective"?t=new go(ex.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):o.type==="orthographic"&&(t=new Ka(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),o.name&&(t.name=this.createUniqueName(o.name)),dp(t,o),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],o={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(o):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return o.inverseBindMatrices=i,o})}loadAnimation(e){const o=this.json.animations[e],i=[],l=[],a=[],c=[],p=[];for(let h=0,f=o.channels.length;h<f;h++){const _=o.channels[h],m=o.samplers[_.sampler],v=_.target,x=v.node!==void 0?v.node:v.id,b=o.parameters!==void 0?o.parameters[m.input]:m.input,A=o.parameters!==void 0?o.parameters[m.output]:m.output;i.push(this.getDependency("node",x)),l.push(this.getDependency("accessor",b)),a.push(this.getDependency("accessor",A)),c.push(m),p.push(v)}return Promise.all([Promise.all(i),Promise.all(l),Promise.all(a),Promise.all(c),Promise.all(p)]).then(function(h){const f=h[0],_=h[1],m=h[2],v=h[3],x=h[4],b=[];for(let k=0,E=f.length;k<E;k++){const M=f[k],R=_[k],I=m[k],L=v[k],F=x[k];if(M===void 0)continue;M.updateMatrix(),M.matrixAutoUpdate=!0;let U;switch(Du[F.path]){case Du.weights:U=Sm;break;case Du.rotation:U=_h;break;case Du.position:case Du.scale:default:U=Cm;break}const X=M.name?M.name:M.uuid,j=L.interpolation!==void 0?JK[L.interpolation]:Xp,P=[];Du[F.path]===Du.weights?M.traverse(function(K){K.morphTargetInfluences&&P.push(K.name?K.name:K.uuid)}):P.push(X);let z=I.array;if(I.normalized){const K=WA(z.constructor),te=new Float32Array(z.length);for(let oe=0,ee=z.length;oe<ee;oe++)te[oe]=z[oe]*K;z=te}for(let K=0,te=P.length;K<te;K++){const oe=new U(P[K]+"."+Du[F.path],R.array,z,j);L.interpolation==="CUBICSPLINE"&&(oe.createInterpolant=function(pe){const ae=this instanceof _h?jK:Zp;return new ae(this.times,this.values,this.getValueSize()/3,pe)},oe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),b.push(oe)}}const A=o.name?o.name:"animation_"+e;return new bm(A,void 0,b)})}createNodeMesh(e){const t=this.json,o=this,i=t.nodes[e];return i.mesh===void 0?null:o.getDependency("mesh",i.mesh).then(function(l){const a=o._getNodeRef(o.meshCache,i.mesh,l);return i.weights!==void 0&&a.traverse(function(c){if(!!c.isMesh)for(let p=0,h=i.weights.length;p<h;p++)c.morphTargetInfluences[p]=i.weights[p]}),a})}loadNode(e){const t=this.json,o=this.extensions,i=this,l=t.nodes[e],a=l.name?i.createUniqueName(l.name):"";return function(){const c=[],p=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return p&&c.push(p),l.camera!==void 0&&c.push(i.getDependency("camera",l.camera).then(function(h){return i._getNodeRef(i.cameraCache,l.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){c.push(h)}),Promise.all(c)}().then(function(c){let p;if(l.isBone===!0?p=new sv:c.length>1?p=new Va:c.length===1?p=c[0]:p=new dn,p!==c[0])for(let h=0,f=c.length;h<f;h++)p.add(c[h]);if(l.name&&(p.userData.name=l.name,p.name=a),dp(p,l),l.extensions&&jg(o,p,l),l.matrix!==void 0){const h=new wt;h.fromArray(l.matrix),p.applyMatrix4(h)}else l.translation!==void 0&&p.position.fromArray(l.translation),l.rotation!==void 0&&p.quaternion.fromArray(l.rotation),l.scale!==void 0&&p.scale.fromArray(l.scale);return i.associations.has(p)||i.associations.set(p,{}),i.associations.get(p).nodes=e,p})}loadScene(e){const t=this.json,o=this.extensions,i=this.json.scenes[e],l=this,a=new Va;i.name&&(a.name=l.createUniqueName(i.name)),dp(a,i),i.extensions&&jg(o,a,i);const c=i.nodes||[],p=[];for(let h=0,f=c.length;h<f;h++)p.push(yU(c[h],a,t,l));return Promise.all(p).then(function(){const h=f=>{const _=new Map;for(const[m,v]of l.associations)(m instanceof dr||m instanceof Vo)&&_.set(m,v);return f.traverse(m=>{const v=l.associations.get(m);v!=null&&_.set(m,v)}),_};return l.associations=h(a),a})}}function yU(r,e,t,o){const i=t.nodes[r];return o.getDependency("node",r).then(function(l){if(i.skin===void 0)return l;let a;return o.getDependency("skin",i.skin).then(function(c){a=c;const p=[];for(let h=0,f=a.joints.length;h<f;h++)p.push(o.getDependency("node",a.joints[h]));return Promise.all(p)}).then(function(c){return l.traverse(function(p){if(!p.isMesh)return;const h=[],f=[];for(let _=0,m=c.length;_<m;_++){const v=c[_];if(v){h.push(v);const x=new wt;a.inverseBindMatrices!==void 0&&x.fromArray(a.inverseBindMatrices.array,_*16),f.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[_])}p.bind(new lv(h,f),p.matrixWorld)}),l})}).then(function(l){e.add(l);const a=[];if(i.children){const c=i.children;for(let p=0,h=c.length;p<h;p++){const f=c[p];a.push(yU(f,l,t,o))}}return Promise.all(a)})}function eY(r,e,t){const o=e.attributes,i=new Pi;if(o.POSITION!==void 0){const c=t.json.accessors[o.POSITION],p=c.min,h=c.max;if(p!==void 0&&h!==void 0){if(i.set(new Y(p[0],p[1],p[2]),new Y(h[0],h[1],h[2])),c.normalized){const f=WA(ky[c.componentType]);i.min.multiplyScalar(f),i.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=e.targets;if(l!==void 0){const c=new Y,p=new Y;for(let h=0,f=l.length;h<f;h++){const _=l[h];if(_.POSITION!==void 0){const m=t.json.accessors[_.POSITION],v=m.min,x=m.max;if(v!==void 0&&x!==void 0){if(p.setX(Math.max(Math.abs(v[0]),Math.abs(x[0]))),p.setY(Math.max(Math.abs(v[1]),Math.abs(x[1]))),p.setZ(Math.max(Math.abs(v[2]),Math.abs(x[2]))),m.normalized){const b=WA(ky[m.componentType]);p.multiplyScalar(b)}c.max(p)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}r.boundingBox=i;const a=new cc;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=a}function $O(r,e,t){const o=e.attributes,i=[];function l(a,c){return t.getDependency("accessor",a).then(function(p){r.setAttribute(c,p)})}for(const a in o){const c=VA[a]||a.toLowerCase();c in r.attributes||i.push(l(o[a],c))}if(e.indices!==void 0&&!r.index){const a=t.getDependency("accessor",e.indices).then(function(c){r.setIndex(c)});i.push(a)}return dp(r,e),eY(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?YK(r,e.targets,t):r})}function PO(r,e){let t=r.getIndex();if(t===null){const a=[],c=r.getAttribute("position");if(c!==void 0){for(let p=0;p<c.count;p++)a.push(p);r.setIndex(a),t=r.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const o=t.count-2,i=[];if(e===xM)for(let a=1;a<=o;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<o;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=r.clone();return l.setIndex(i),l}const kb=new WeakMap;class tY extends gi{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,o,i){const l=new As(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,a=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,c).then(t).catch(i)},o,i)}decodeDracoFile(e,t,o,i){const l={attributeIDs:o||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!o};this.decodeGeometry(e,l).then(t)}decodeGeometry(e,t){for(const p in t.attributeTypes){const h=t.attributeTypes[p];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[p]=h.name)}const o=JSON.stringify(t);if(kb.has(e)){const p=kb.get(e);if(p.key===o)return p.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const l=this.workerNextTaskID++,a=e.byteLength,c=this._getWorker(l,a).then(p=>(i=p,new Promise((h,f)=>{i._callbacks[l]={resolve:h,reject:f},i.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))).then(p=>this._createGeometry(p.geometry));return c.catch(()=>!0).then(()=>{i&&l&&this._releaseTask(i,l)}),kb.set(e,{key:o,promise:c}),c}_createGeometry(e){const t=new Ut;e.index&&t.setIndex(new vn(e.index.array,1));for(let o=0;o<e.attributes.length;o++){const i=e.attributes[o],l=i.name,a=i.array,c=i.itemSize;t.setAttribute(l,new vn(a,c))}return t}_loadLibrary(e,t){const o=new As(this.manager);return o.setPath(this.decoderPath),o.setResponseType(t),o.setWithCredentials(this.withCredentials),new Promise((i,l)=>{o.load(e,i,void 0,l)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(o=>{const i=o[0];e||(this.decoderConfig.wasmBinary=o[1]);const l=nY.toString(),a=["/* draco decoder */",i,"","/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(l){const a=l.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,l){return i._taskLoad>l._taskLoad?-1:1});const o=this.workerPool[this.workerPool.length-1];return o._taskCosts[e]=t,o._taskLoad+=t,o})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function nY(){let r,e;onmessage=function(a){const c=a.data;switch(c.type){case"init":r=c.decoderConfig,e=new Promise(function(f){r.onModuleLoaded=function(_){f({draco:_})},DracoDecoderModule(r)});break;case"decode":const p=c.buffer,h=c.taskConfig;e.then(f=>{const _=f.draco,m=new _.Decoder,v=new _.DecoderBuffer;v.Init(new Int8Array(p),p.byteLength);try{const x=t(_,m,v,h),b=x.attributes.map(A=>A.array.buffer);x.index&&b.push(x.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:x},b)}catch(x){console.error(x),self.postMessage({type:"error",id:c.id,error:x.message})}finally{_.destroy(v),_.destroy(m)}});break}};function t(a,c,p,h){const f=h.attributeIDs,_=h.attributeTypes;let m,v;const x=c.GetEncodedGeometryType(p);if(x===a.TRIANGULAR_MESH)m=new a.Mesh,v=c.DecodeBufferToMesh(p,m);else if(x===a.POINT_CLOUD)m=new a.PointCloud,v=c.DecodeBufferToPointCloud(p,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const b={index:null,attributes:[]};for(const A in f){const k=self[_[A]];let E,M;if(h.useUniqueIDs)M=f[A],E=c.GetAttributeByUniqueId(m,M);else{if(M=c.GetAttributeId(m,a[f[A]]),M===-1)continue;E=c.GetAttribute(m,M)}b.attributes.push(i(a,c,m,A,k,E))}return x===a.TRIANGULAR_MESH&&(b.index=o(a,c,m)),a.destroy(m),b}function o(a,c,p){const f=p.num_faces()*3,_=f*4,m=a._malloc(_);c.GetTrianglesUInt32Array(p,_,m);const v=new Uint32Array(a.HEAPF32.buffer,m,f).slice();return a._free(m),{array:v,itemSize:1}}function i(a,c,p,h,f,_){const m=_.num_components(),x=p.num_points()*m,b=x*f.BYTES_PER_ELEMENT,A=l(a,f),k=a._malloc(b);c.GetAttributeDataArrayForAllPoints(p,_,A,b,k);const E=new f(a.HEAPF32.buffer,k,x).slice();return a._free(k),{name:h,array:E,itemSize:m}}function l(a,c){switch(c){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}class vU extends mS{constructor(){super();ct(this,"isLineSegmentsGeometry",!0),ct(this,"type","LineSegmentsGeometry"),ct(this,"boundingBox",null),ct(this,"boundingSphere",null),ct(this,"box",new Pi),ct(this,"vector",new Y);const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],o=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(o),this.setAttribute("position",new Mt(e,3)),this.setAttribute("uv",new Mt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,o=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),o.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;if(e instanceof Float32Array)t=e;else if(Array.isArray(e))t=new Float32Array(e);else return console.error("LineSegmentsGeometry.setPosition requires either a Float32Array or regular array of numbers"),this;const o=new Cy(t,6,1);return this.setAttribute("instanceStart",new ns(o,3,0)),this.setAttribute("instanceEnd",new ns(o,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;if(e instanceof Float32Array)t=e;else if(Array.isArray(e))t=new Float32Array(e);else return console.error("LineSegmentsGeometry.setColors requires either a Float32Array or regular array of numbers"),this;const o=new Cy(t,6,1);return this.setAttribute("instanceColorStart",new ns(o,3,0)),this.setAttribute("instanceColorEnd",new ns(o,3,3)),this}fromWireframeGeometry(e){return this.setPositions(Array.from(e.attributes.position.array)),this}fromEdgesGeometry(e){return this.setPositions(Array.from(e.attributes.position.array)),this}fromMesh(e){return this.fromWireframeGeometry(new hS(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return t.isBufferGeometry&&this.setPositions(Array.from(t.attributes.position.array)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),this.box.setFromBufferAttribute(t),this.boundingBox.union(this.box))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new cc),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const o=this.boundingSphere.center;this.boundingBox&&this.boundingBox.getCenter(o);let i=0;for(let l=0,a=e.count;l<a;l++)this.vector.fromBufferAttribute(e,l),i=Math.max(i,o.distanceToSquared(this.vector)),this.vector.fromBufferAttribute(t,l),i=Math.max(i,o.distanceToSquared(this.vector));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}class TU extends vU{constructor(){super();ct(this,"type","LineGeometry"),ct(this,"isLineGeometry",!0),ct(this,"setColors",e=>{const t=e.length-3,o=new Float32Array(2*t);for(let i=0;i<t;i+=3)o[2*i]=e[i],o[2*i+1]=e[i+1],o[2*i+2]=e[i+2],o[2*i+3]=e[i+3],o[2*i+4]=e[i+4],o[2*i+5]=e[i+5];return super.setColors(o),this}),ct(this,"fromLine",e=>{const t=e.geometry;return t.isBufferGeometry&&this.setPositions(Array.from(t.attributes.position.array)),this}),ct(this,"copy",()=>this)}setPositions(e){const t=e.length-3,o=new Float32Array(2*t);for(let i=0;i<t;i+=3)o[2*i]=e[i],o[2*i+1]=e[i+1],o[2*i+2]=e[i+2],o[2*i+3]=e[i+3],o[2*i+4]=e[i+4],o[2*i+5]=e[i+5];return super.setPositions(o),this}}const oY={linewidth:{value:1},resolution:{value:new Ve(1,1)},dashScale:{value:1},dashSize:{value:1},dashOffset:{value:0},gapSize:{value:1},opacity:{value:1}};ts.line={uniforms:Yx.merge([ht.common,ht.fog,oY]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float dashOffset;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef ALPHA_TO_COVERAGE

			// artifacts appear on some hardware if a derivative is taken within a conditional
			float a = vUv.x;
			float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
			float len2 = a * a + b * b;
			float dlen = fwidth( len2 );

			if ( abs( vUv.y ) > 1.0 ) {

				alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

			}

			#else

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class cR extends tc{constructor(e={}){super({uniforms:Yx.clone(ts.line.uniforms),vertexShader:ts.line.vertexShader,fragmentShader:ts.line.fragmentShader,clipping:!0});ct(this,"isLineMaterial",!0),ct(this,"dashed",!1),ct(this,"color",new tt(0)),ct(this,"lineWidth",0),ct(this,"dashScale",0),ct(this,"dashOffset",0),ct(this,"dashSize",0),ct(this,"opacity",0),ct(this,"resolution",new Ve),ct(this,"alphaToCoverage",!1),Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){const o=new tt(t);this.uniforms.diffuse.value=o.getHex()}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),t?(this.defines.ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),t?this.defines.USE_DASH="":delete this.defines.USE_DASH}}}),this.setValues(e)}}class rY extends nr{constructor(e=new vU,t=new cR({color:Math.random()*16777215})){super(e,t);ct(this,"type","LineSegments2"),ct(this,"isLineSegments2",!0),ct(this,"distStart",new Y),ct(this,"distEnd",new Y),ct(this,"computeLineDistances",()=>{const o=this.geometry,i=o.attributes.instanceStart,l=o.attributes.instanceEnd,a=new Float32Array(2*i.data.count);for(let p=0,h=0,f=i.data.count;p<f;p++,h+=2)this.distStart.fromBufferAttribute(i,p),this.distEnd.fromBufferAttribute(l,p),a[h]=h===0?0:a[h-1],a[h+1]=a[h]+this.distStart.distanceTo(this.distEnd);const c=new Cy(a,2,1);return o.setAttribute("instanceDistanceStart",new ns(c,1,0)),o.setAttribute("instanceDistanceEnd",new ns(c,1,1)),this}),ct(this,"rayStart",new Gn),ct(this,"rayEnd",new Gn),ct(this,"ssOrigin",new Gn),ct(this,"ssOrigin3",new Y),ct(this,"mvMatrix",new wt),ct(this,"line",new iR),ct(this,"closestPoint",new Y),ct(this,"raycast",(o,i)=>{o.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');const l=0,a=o.ray,c=o.camera,p=c.projectionMatrix,h=this.geometry,f=this.material,_=f.resolution,m=f.linewidth+l,v=h.attributes.instanceStart,x=h.attributes.instanceEnd,b=-c.near;a.at(1,this.ssOrigin),this.ssOrigin.w=1,this.ssOrigin.applyMatrix4(c.matrixWorldInverse),this.ssOrigin.applyMatrix4(p),this.ssOrigin.multiplyScalar(1/this.ssOrigin.w),this.ssOrigin.x*=_.x/2,this.ssOrigin.y*=_.y/2,this.ssOrigin.z=0,this.ssOrigin3.set(this.ssOrigin.x,this.ssOrigin.y,this.ssOrigin.z);const A=this.matrixWorld;this.mvMatrix.multiplyMatrices(c.matrixWorldInverse,A);for(let k=0,E=v.count;k<E;k++){if(this.rayStart.fromBufferAttribute(v,k),this.rayEnd.fromBufferAttribute(x,k),this.rayStart.w=1,this.rayEnd.w=1,this.rayStart.applyMatrix4(this.mvMatrix),this.rayEnd.applyMatrix4(this.mvMatrix),this.rayStart.z>b&&this.rayEnd.z>b)continue;if(this.rayStart.z>b){const U=this.rayStart.z-this.rayEnd.z,X=(this.rayStart.z-b)/U;this.rayStart.lerp(this.rayEnd,X)}else if(this.rayEnd.z>b){const U=this.rayEnd.z-this.rayStart.z,X=(this.rayEnd.z-b)/U;this.rayEnd.lerp(this.rayStart,X)}this.rayStart.applyMatrix4(p),this.rayEnd.applyMatrix4(p),this.rayStart.multiplyScalar(1/this.rayStart.w),this.rayEnd.multiplyScalar(1/this.rayEnd.w),this.rayStart.x*=_.x/2,this.rayStart.y*=_.y/2,this.rayEnd.x*=_.x/2,this.rayEnd.y*=_.y/2,this.line.start.set(this.rayStart.x,this.rayStart.y,this.rayStart.z),this.line.start.z=0,this.line.end.set(this.rayEnd.x,this.rayEnd.y,this.rayEnd.z),this.line.end.z=0;const R=this.line.closestPointToPointParameter(this.ssOrigin3,!0);this.line.at(R,this.closestPoint);const I=ex.lerp(this.rayStart.z,this.rayEnd.z,R),L=I>=-1&&I<=1,F=this.ssOrigin3.distanceTo(this.closestPoint)<m*.5;if(L&&F){this.line.start.fromBufferAttribute(v,k),this.line.end.fromBufferAttribute(x,k),this.line.start.applyMatrix4(A),this.line.end.applyMatrix4(A);const U=new Y,X=new Y;a.distanceSqToSegment(this.line.start,this.line.end,X,U),i.push({distance:a.origin.distanceTo(X),point:X,face:null,faceIndex:k,object:this,uv:void 0,pointOnLine:U})}}})}}class iY extends rY{constructor(e=new TU,t=new cR({color:Math.random()*16777215})){super(e,t);ct(this,"type","Line2"),ct(this,"isLine2",!0)}}let E0;const Ab=()=>{if(E0)return E0;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),o=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=r;WebAssembly.validate(t)&&(i=e);let l;const a=WebAssembly.instantiate(c(i),{}).then(_=>{l=_.instance,l.exports.__wasm_call_ctors()});function c(_){const m=new Uint8Array(_.length);for(let x=0;x<_.length;++x){const b=_.charCodeAt(x);m[x]=b>96?b-71:b>64?b-65:b>47?b+4:b>46?63:62}let v=0;for(let x=0;x<_.length;++x)m[v++]=m[x]<60?o[m[x]]:(m[x]-60)*64+m[++x];return m.buffer.slice(0,v)}function p(_,m,v,x,b,A){const k=l.exports.sbrk,E=v+3&-4,M=k(E*x),R=k(b.length),I=new Uint8Array(l.exports.memory.buffer);I.set(b,R);const L=_(M,v,x,R,b.length);if(L===0&&A&&A(M,E,x),m.set(I.subarray(M,M+v*x)),k(M-k(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return E0={ready:a,supported:!0,decodeVertexBuffer(_,m,v,x,b){p(l.exports.meshopt_decodeVertexBuffer,_,m,v,x,l.exports[h[b]])},decodeIndexBuffer(_,m,v,x){p(l.exports.meshopt_decodeIndexBuffer,_,m,v,x)},decodeIndexSequence(_,m,v,x){p(l.exports.meshopt_decodeIndexSequence,_,m,v,x)},decodeGltfBuffer(_,m,v,x,b,A){p(l.exports[f[b]],_,m,v,x,l.exports[h[A]])}},E0},Nhe=G.exports.forwardRef(function(p,c){var h=p,{points:e,color:t="black",vertexColors:o,lineWidth:i,dashed:l}=h,a=gs(h,["points","color","vertexColors","lineWidth","dashed"]);const[f]=G.exports.useState(()=>new iY),[_]=G.exports.useState(()=>new cR),[m]=G.exports.useState(()=>new Ve(512,512)),v=G.exports.useMemo(()=>{const x=new TU,b=e.map(A=>A instanceof Y?A.toArray():A);if(x.setPositions(b.flat()),o){const A=o.map(k=>k instanceof tt?k.toArray():k);x.setColors(A.flat())}return x},[e,o]);return G.exports.useLayoutEffect(()=>{f.computeLineDistances()},[e,f]),G.exports.useLayoutEffect(()=>{l?_.defines.USE_DASH="":delete _.defines.USE_DASH,_.needsUpdate=!0},[l,_]),G.exports.useEffect(()=>()=>v.dispose(),[v]),G.exports.createElement("primitive",ol({object:f,ref:c},a),G.exports.createElement("primitive",{object:v,attach:"geometry"}),G.exports.createElement("primitive",ol({object:_,attach:"material",color:t,vertexColors:Boolean(o),resolution:m,linewidth:i,dashed:l},a)))}),sY=G.exports.forwardRef((o,t)=>{var i=o,{makeDefault:r}=i,e=gs(i,["makeDefault"]);const l=jr(({set:h})=>h),a=jr(({camera:h})=>h),c=jr(({size:h})=>h),p=G.exports.useRef();return G.exports.useLayoutEffect(()=>{p.current&&!e.manual&&p.current.updateProjectionMatrix()},[c,e]),G.exports.useLayoutEffect(()=>{if(r&&p.current){const h=a;return l(()=>({camera:p.current})),()=>l(()=>({camera:h}))}},[a,p,r,l]),G.exports.createElement("orthographicCamera",ol({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:aU([p,t])},e))}),$he=G.exports.forwardRef((f,h)=>{var _=f,{makeDefault:r,camera:e,regress:t,domElement:o,enableDamping:i=!0,onChange:l,onStart:a,onEnd:c}=_,p=gs(_,["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"]);const m=jr(({invalidate:L})=>L),v=jr(({camera:L})=>L),x=jr(({gl:L})=>L),b=jr(({events:L})=>L),A=jr(({set:L})=>L),k=jr(({get:L})=>L),E=jr(({performance:L})=>L),M=e||v,R=o||(typeof b.connected!="boolean"?b.connected:x.domElement),I=G.exports.useMemo(()=>new wK(M),[M]);return fU(()=>{I.enabled&&I.update()}),G.exports.useEffect(()=>{const L=F=>{m(),t&&E.regress(),l&&l(F)};return I.connect(R),I.addEventListener("change",L),a&&I.addEventListener("start",a),c&&I.addEventListener("end",c),()=>{I.removeEventListener("change",L),a&&I.removeEventListener("start",a),c&&I.removeEventListener("end",c),I.dispose()}},[R,l,a,c,t,I,m]),G.exports.useEffect(()=>{if(r){const L=k().controls;return A({controls:I}),()=>A({controls:L})}},[r,I]),G.exports.createElement("primitive",ol({ref:h,object:I,enableDamping:i},p))});function lY(r,e){const t=jr(i=>i.mouse),[o]=G.exports.useState(()=>{const i=new rR;return e&&lR(i,e,{}),function(l,a){i.setFromCamera(t,r instanceof fh?r:r.current);const c=this.constructor.prototype.raycast.bind(this);c&&c(i,a)}});return o}const EU=G.exports.createContext({}),xU=()=>G.exports.useContext(EU),aY=2*Math.PI,FO=new dn,UO=new wt,[tf,wb]=[new rr,new rr],HO=new Y,GO=new Y,Phe=({alignment:r="bottom-right",margin:e=[80,80],renderPriority:t=0,onUpdate:o,onTarget:i,children:l})=>{const a=jr(({size:P})=>P),c=jr(({camera:P})=>P),p=jr(({controls:P})=>P),h=jr(({gl:P})=>P),f=jr(({scene:P})=>P),_=jr(({invalidate:P})=>P),m=G.exports.useRef(),v=G.exports.useRef(),x=G.exports.useRef(null),[b]=G.exports.useState(()=>new zm),A=G.exports.useRef(!1),k=G.exports.useRef(0),E=G.exports.useRef(new Y(0,0,0)),M=P=>{A.current=!0,(p||i)&&(E.current=(p==null?void 0:p.target)||(i==null?void 0:i())),k.current=c.position.distanceTo(HO),tf.copy(c.quaternion),GO.copy(P).multiplyScalar(k.current).add(HO),FO.lookAt(GO),wb.copy(FO.quaternion),_()},R=P=>{if(!A.current)return;if(tf.angleTo(wb)<.01){A.current=!1;return}const z=P*aY;tf.rotateTowards(wb,z),c.position.set(0,0,1).applyQuaternion(tf).multiplyScalar(k.current).add(E.current),c.up.set(0,1,0).applyQuaternion(tf).normalize(),c.quaternion.copy(tf),o?o():p&&p.update(),_()};G.exports.useEffect(()=>(f.background&&(m.current=f.background,f.background=null,b.background=m.current),()=>{m.current&&(f.background=m.current)}),[]);const I=()=>{var P;UO.copy(c.matrix).invert(),(P=v.current)==null||P.quaternion.setFromRotationMatrix(UO)};fU((P,z)=>{x.current&&v.current&&(R(z),I(),h.autoClear=!1,h.clearDepth(),h.render(b,x.current))},t);const L={tweenCamera:M,raycast:lY(x)},[F,U]=e,X=r.endsWith("-left")?-a.width/2+F:a.width/2-F,j=r.startsWith("top-")?a.height/2-U:-a.height/2+U;return AK(G.exports.createElement(EU.Provider,{value:L},G.exports.createElement(sY,{ref:x,makeDefault:!1,position:[0,0,200]}),G.exports.createElement("group",{ref:v,position:[X,j,0]},l)),b)},m_={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},cY=["Right","Left","Top","Bottom","Front","Back"],SU=r=>new Y(...r).multiplyScalar(.38),uY=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(SU),hY=[.25,.25,.25],CU=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(SU),pY=CU.map(r=>r.toArray().map(e=>e==0?.5:.25)),dY=({hover:r,index:e,font:t="20px Inter var, Arial, sans-serif",faces:o=cY,color:i=m_.bg,hoverColor:l=m_.hover,textColor:a=m_.text,strokeColor:c=m_.stroke,opacity:p=1})=>{const h=jr(_=>_.gl),f=G.exports.useMemo(()=>{const _=document.createElement("canvas");_.width=128,_.height=128;const m=_.getContext("2d");return m.fillStyle=i,m.fillRect(0,0,_.width,_.height),m.strokeStyle=c,m.strokeRect(0,0,_.width,_.height),m.font=t,m.textAlign="center",m.fillStyle=a,m.fillText(o[e].toUpperCase(),64,76),new MM(_)},[e,o,t,i,a,c]);return G.exports.createElement("meshLambertMaterial",{map:f,"map-anisotropy":h.capabilities.getMaxAnisotropy()||1,attachArray:"material",color:r?l:"white",transparent:!0,opacity:p})},fY=r=>{const{tweenCamera:e,raycast:t}=xU(),[o,i]=G.exports.useState(null),l=p=>{p.stopPropagation(),i(null)},a=p=>{p.stopPropagation(),e(p.face.normal)},c=p=>{p.stopPropagation(),i(Math.floor(p.faceIndex/2))};return G.exports.createElement("mesh",{raycast:t,onPointerOut:l,onPointerMove:c,onClick:r.onClick||a},[...Array(6)].map((p,h)=>G.exports.createElement(dY,ol({key:h,index:h,hover:o===h},r))),G.exports.createElement("boxGeometry",null))},VO=({onClick:r,dimensions:e,position:t,hoverColor:o=m_.hover})=>{const{tweenCamera:i,raycast:l}=xU(),[a,c]=G.exports.useState(!1),p=_=>{_.stopPropagation(),c(!1)},h=_=>{_.stopPropagation(),c(!0)},f=_=>{_.stopPropagation(),i(t)};return G.exports.createElement("mesh",{scale:1.01,position:t,raycast:l,onPointerOver:h,onPointerOut:p,onClick:r||f},G.exports.createElement("meshBasicMaterial",{color:a?o:"white",transparent:!0,opacity:.6,visible:a}),G.exports.createElement("boxGeometry",{args:e}))},Fhe=r=>G.exports.createElement("group",{scale:[60,60,60]},G.exports.createElement(fY,r),CU.map((e,t)=>G.exports.createElement(VO,ol({key:t,position:e,dimensions:pY[t]},r))),uY.map((e,t)=>G.exports.createElement(VO,ol({key:t,position:e,dimensions:hY},r))),G.exports.createElement("ambientLight",{intensity:.5}),G.exports.createElement("pointLight",{position:[10,10,10],intensity:.5}));let x0=null;function bU(r,e,t){return o=>{t&&t(o),r&&(x0||(x0=new tY),x0.setDecoderPath(typeof r=="string"?r:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),o.setDRACOLoader(x0)),e&&o.setMeshoptDecoder(typeof Ab=="function"?Ab():Ab)}}function kU(r,e=!0,t=!0,o){return hv(aR,r,bU(e,t,o))}kU.preload=(r,e=!0,t=!0,o)=>hv.preload(aR,r,bU(e,t,o));kU.clear=r=>hv.clear(aR,r);function mY(r){const e=r+"BufferGeometry";return G.exports.forwardRef((a,l)=>{var c=a,{args:t,children:o}=c,i=gs(c,["args","children"]);return G.exports.createElement("mesh",ol({ref:l},i),G.exports.createElement(e,{attach:"geometry",args:t}),o)})}const Uhe=mY("plane"),Da=1e-5;function gY(r,e,t){const o=new ra,i=t-Da;return o.absarc(Da,Da,Da,-Math.PI/2,-Math.PI,!0),o.absarc(Da,e-i*2,Da,Math.PI,Math.PI/2,!0),o.absarc(r-i*2,e-i*2,Da,Math.PI/2,0,!0),o.absarc(r-i*2,Da,Da,0,-Math.PI/2,!0),o}const Hhe=G.exports.forwardRef(function(f,h){var _=f,{args:[e=1,t=1,o=1]=[],radius:i=.05,steps:l=1,smoothness:a=4,children:c}=_,p=gs(_,["args","radius","steps","smoothness","children"]);const m=G.exports.useMemo(()=>gY(e,t,i),[e,t,i]),v=G.exports.useMemo(()=>({depth:o-i*2,bevelEnabled:!0,bevelSegments:a*2,steps:l,bevelSize:i-Da,bevelThickness:i,curveSegments:a}),[o,i,a]),x=G.exports.useRef();return G.exports.useLayoutEffect(()=>{x.current&&x.current.center()},[m,v]),G.exports.createElement("mesh",ol({ref:h},p),G.exports.createElement("extrudeBufferGeometry",{attach:"geometry",ref:x,args:[m,v]}),c)});var AU={exports:{}},_Y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yY=_Y,vY=yY;function wU(){}function MU(){}MU.resetWarningCache=wU;var TY=function(){function r(o,i,l,a,c,p){if(p!==vY){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MU,resetWarningCache:wU};return t.PropTypes=t,t};AU.exports=TY();var Lt=AU.exports;const EY={black:"#000",white:"#fff"};var Ay=EY;const xY={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var nf=xY;const SY={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var of=SY;const CY={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var rf=CY;const bY={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var sf=bY;const kY={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var lf=kY;const AY={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Jg=AY;const wY={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var MY=wY;function he(){return he=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},he.apply(this,arguments)}function jt(r,e){if(r==null)return{};var t={},o=Object.keys(r),i,l;for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function RU(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var RY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,BY=RU(function(r){return RY.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91});function IY(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function OY(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var BU=function(){function r(t){var o=this;this._insertTag=function(i){var l;o.tags.length===0?o.insertionPoint?l=o.insertionPoint.nextSibling:o.prepend?l=o.container.firstChild:l=o.before:l=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(i,l),o.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(o){o.forEach(this._insertTag)},e.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(OY(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var l=IY(i);try{l.insertRule(o,l.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(o));this.ctr++},e.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},r}(),Ri="-ms-",ox="-moz-",Wn="-webkit-",IU="comm",uR="rule",hR="decl",DY="@import",OU="@keyframes",LY=Math.abs,yS=String.fromCharCode,NY=Object.assign;function $Y(r,e){return(((e<<2^ys(r,0))<<2^ys(r,1))<<2^ys(r,2))<<2^ys(r,3)}function DU(r){return r.trim()}function PY(r,e){return(r=e.exec(r))?r[0]:r}function Yn(r,e,t){return r.replace(e,t)}function zA(r,e){return r.indexOf(e)}function ys(r,e){return r.charCodeAt(e)|0}function wy(r,e,t){return r.slice(e,t)}function Pa(r){return r.length}function pR(r){return r.length}function S0(r,e){return e.push(r),r}function FY(r,e){return r.map(e).join("")}var vS=1,Am=1,LU=0,ws=0,xr=0,Jm="";function TS(r,e,t,o,i,l,a){return{value:r,root:e,parent:t,type:o,props:i,children:l,line:vS,column:Am,length:a,return:""}}function Kg(r,e){return NY(TS("",null,null,"",null,null,0),r,{length:-r.length},e)}function UY(){return xr}function HY(){return xr=ws>0?ys(Jm,--ws):0,Am--,xr===10&&(Am=1,vS--),xr}function el(){return xr=ws<LU?ys(Jm,ws++):0,Am++,xr===10&&(Am=1,vS++),xr}function qa(){return ys(Jm,ws)}function uE(){return ws}function pv(r,e){return wy(Jm,r,e)}function My(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NU(r){return vS=Am=1,LU=Pa(Jm=r),ws=0,[]}function $U(r){return Jm="",r}function hE(r){return DU(pv(ws-1,XA(r===91?r+2:r===40?r+1:r)))}function GY(r){for(;(xr=qa())&&xr<33;)el();return My(r)>2||My(xr)>3?"":" "}function VY(r,e){for(;--e&&el()&&!(xr<48||xr>102||xr>57&&xr<65||xr>70&&xr<97););return pv(r,uE()+(e<6&&qa()==32&&el()==32))}function XA(r){for(;el();)switch(xr){case r:return ws;case 34:case 39:r!==34&&r!==39&&XA(xr);break;case 40:r===41&&XA(r);break;case 92:el();break}return ws}function WY(r,e){for(;el()&&r+xr!==47+10;)if(r+xr===42+42&&qa()===47)break;return"/*"+pv(e,ws-1)+"*"+yS(r===47?r:el())}function zY(r){for(;!My(qa());)el();return pv(r,ws)}function XY(r){return $U(pE("",null,null,null,[""],r=NU(r),0,[0],r))}function pE(r,e,t,o,i,l,a,c,p){for(var h=0,f=0,_=a,m=0,v=0,x=0,b=1,A=1,k=1,E=0,M="",R=i,I=l,L=o,F=M;A;)switch(x=E,E=el()){case 40:if(x!=108&&F.charCodeAt(_-1)==58){zA(F+=Yn(hE(E),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:F+=hE(E);break;case 9:case 10:case 13:case 32:F+=GY(x);break;case 92:F+=VY(uE()-1,7);continue;case 47:switch(qa()){case 42:case 47:S0(jY(WY(el(),uE()),e,t),p);break;default:F+="/"}break;case 123*b:c[h++]=Pa(F)*k;case 125*b:case 59:case 0:switch(E){case 0:case 125:A=0;case 59+f:v>0&&Pa(F)-_&&S0(v>32?zO(F+";",o,t,_-1):zO(Yn(F," ","")+";",o,t,_-2),p);break;case 59:F+=";";default:if(S0(L=WO(F,e,t,h,f,i,c,M,R=[],I=[],_),l),E===123)if(f===0)pE(F,e,L,L,R,l,_,c,I);else switch(m){case 100:case 109:case 115:pE(r,L,L,o&&S0(WO(r,L,L,0,0,i,c,M,i,R=[],_),I),i,I,_,c,o?R:I);break;default:pE(F,L,L,L,[""],I,0,c,I)}}h=f=v=0,b=k=1,M=F="",_=a;break;case 58:_=1+Pa(F),v=x;default:if(b<1){if(E==123)--b;else if(E==125&&b++==0&&HY()==125)continue}switch(F+=yS(E),E*b){case 38:k=f>0?1:(F+="\f",-1);break;case 44:c[h++]=(Pa(F)-1)*k,k=1;break;case 64:qa()===45&&(F+=hE(el())),m=qa(),f=_=Pa(M=F+=zY(uE())),E++;break;case 45:x===45&&Pa(F)==2&&(b=0)}}return l}function WO(r,e,t,o,i,l,a,c,p,h,f){for(var _=i-1,m=i===0?l:[""],v=pR(m),x=0,b=0,A=0;x<o;++x)for(var k=0,E=wy(r,_+1,_=LY(b=a[x])),M=r;k<v;++k)(M=DU(b>0?m[k]+" "+E:Yn(E,/&\f/g,m[k])))&&(p[A++]=M);return TS(r,e,t,i===0?uR:c,p,h,f)}function jY(r,e,t){return TS(r,e,t,IU,yS(UY()),wy(r,2,-2),0)}function zO(r,e,t,o){return TS(r,e,t,hR,wy(r,0,o),wy(r,o+1,-1),o)}function PU(r,e){switch($Y(r,e)){case 5103:return Wn+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wn+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Wn+r+ox+r+Ri+r+r;case 6828:case 4268:return Wn+r+Ri+r+r;case 6165:return Wn+r+Ri+"flex-"+r+r;case 5187:return Wn+r+Yn(r,/(\w+).+(:[^]+)/,Wn+"box-$1$2"+Ri+"flex-$1$2")+r;case 5443:return Wn+r+Ri+"flex-item-"+Yn(r,/flex-|-self/,"")+r;case 4675:return Wn+r+Ri+"flex-line-pack"+Yn(r,/align-content|flex-|-self/,"")+r;case 5548:return Wn+r+Ri+Yn(r,"shrink","negative")+r;case 5292:return Wn+r+Ri+Yn(r,"basis","preferred-size")+r;case 6060:return Wn+"box-"+Yn(r,"-grow","")+Wn+r+Ri+Yn(r,"grow","positive")+r;case 4554:return Wn+Yn(r,/([^-])(transform)/g,"$1"+Wn+"$2")+r;case 6187:return Yn(Yn(Yn(r,/(zoom-|grab)/,Wn+"$1"),/(image-set)/,Wn+"$1"),r,"")+r;case 5495:case 3959:return Yn(r,/(image-set\([^]*)/,Wn+"$1$`$1");case 4968:return Yn(Yn(r,/(.+:)(flex-)?(.*)/,Wn+"box-pack:$3"+Ri+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wn+r+r;case 4095:case 3583:case 4068:case 2532:return Yn(r,/(.+)-inline(.+)/,Wn+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pa(r)-1-e>6)switch(ys(r,e+1)){case 109:if(ys(r,e+4)!==45)break;case 102:return Yn(r,/(.+:)(.+)-([^]+)/,"$1"+Wn+"$2-$3$1"+ox+(ys(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~zA(r,"stretch")?PU(Yn(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(ys(r,e+1)!==115)break;case 6444:switch(ys(r,Pa(r)-3-(~zA(r,"!important")&&10))){case 107:return Yn(r,":",":"+Wn)+r;case 101:return Yn(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wn+(ys(r,14)===45?"inline-":"")+"box$3$1"+Wn+"$2$3$1"+Ri+"$2box$3")+r}break;case 5936:switch(ys(r,e+11)){case 114:return Wn+r+Ri+Yn(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Wn+r+Ri+Yn(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Wn+r+Ri+Yn(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Wn+r+Ri+r+r}return r}function Xf(r,e){for(var t="",o=pR(r),i=0;i<o;i++)t+=e(r[i],i,r,e)||"";return t}function JY(r,e,t,o){switch(r.type){case DY:case hR:return r.return=r.return||r.value;case IU:return"";case OU:return r.return=r.value+"{"+Xf(r.children,o)+"}";case uR:r.value=r.props.join(",")}return Pa(t=Xf(r.children,o))?r.return=r.value+"{"+t+"}":""}function KY(r){var e=pR(r);return function(t,o,i,l){for(var a="",c=0;c<e;c++)a+=r[c](t,o,i,l)||"";return a}}function YY(r){return function(e){e.root||(e=e.return)&&r(e)}}function qY(r,e,t,o){if(r.length>-1&&!r.return)switch(r.type){case hR:r.return=PU(r.value,r.length);break;case OU:return Xf([Kg(r,{value:Yn(r.value,"@","@"+Wn)})],o);case uR:if(r.length)return FY(r.props,function(i){switch(PY(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xf([Kg(r,{props:[Yn(i,/:(read-\w+)/,":"+ox+"$1")]})],o);case"::placeholder":return Xf([Kg(r,{props:[Yn(i,/:(plac\w+)/,":"+Wn+"input-$1")]}),Kg(r,{props:[Yn(i,/:(plac\w+)/,":"+ox+"$1")]}),Kg(r,{props:[Yn(i,/:(plac\w+)/,Ri+"input-$1")]})],o)}return""})}}var QY=function(e,t,o){for(var i=0,l=0;i=l,l=qa(),i===38&&l===12&&(t[o]=1),!My(l);)el();return pv(e,ws)},ZY=function(e,t){var o=-1,i=44;do switch(My(i)){case 0:i===38&&qa()===12&&(t[o]=1),e[o]+=QY(ws-1,t,o);break;case 2:e[o]+=hE(i);break;case 4:if(i===44){e[++o]=qa()===58?"&\f":"",t[o]=e[o].length;break}default:e[o]+=yS(i)}while(i=el());return e},e7=function(e,t){return $U(ZY(NU(e),t))},XO=new WeakMap,t7=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,o=e.parent,i=e.column===o.column&&e.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!XO.get(o))&&!i){XO.set(e,!0);for(var l=[],a=e7(t,l),c=o.props,p=0,h=0;p<a.length;p++)for(var f=0;f<c.length;f++,h++)e.props[h]=l[p]?a[p].replace(/&\f/g,c[f]):c[f]+" "+a[p]}}},n7=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}},o7=[qY],r7=function(e){var t=e.key;if(t==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(b){var A=b.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||o7,l={},a,c=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(b){for(var A=b.getAttribute("data-emotion").split(" "),k=1;k<A.length;k++)l[A[k]]=!0;c.push(b)});var p,h=[t7,n7];{var f,_=[JY,YY(function(b){f.insert(b)})],m=KY(h.concat(i,_)),v=function(A){return Xf(XY(A),m)};p=function(A,k,E,M){f=E,v(A?A+"{"+k.styles+"}":k.styles),M&&(x.inserted[k.name]=!0)}}var x={key:t,sheet:new BU({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:l,registered:{},insert:p};return x.sheet.hydrate(c),x},FU={exports:{}},oo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr=typeof Symbol=="function"&&Symbol.for,dR=Zr?Symbol.for("react.element"):60103,fR=Zr?Symbol.for("react.portal"):60106,ES=Zr?Symbol.for("react.fragment"):60107,xS=Zr?Symbol.for("react.strict_mode"):60108,SS=Zr?Symbol.for("react.profiler"):60114,CS=Zr?Symbol.for("react.provider"):60109,bS=Zr?Symbol.for("react.context"):60110,mR=Zr?Symbol.for("react.async_mode"):60111,kS=Zr?Symbol.for("react.concurrent_mode"):60111,AS=Zr?Symbol.for("react.forward_ref"):60112,wS=Zr?Symbol.for("react.suspense"):60113,i7=Zr?Symbol.for("react.suspense_list"):60120,MS=Zr?Symbol.for("react.memo"):60115,RS=Zr?Symbol.for("react.lazy"):60116,s7=Zr?Symbol.for("react.block"):60121,l7=Zr?Symbol.for("react.fundamental"):60117,a7=Zr?Symbol.for("react.responder"):60118,c7=Zr?Symbol.for("react.scope"):60119;function sl(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case dR:switch(r=r.type,r){case mR:case kS:case ES:case SS:case xS:case wS:return r;default:switch(r=r&&r.$$typeof,r){case bS:case AS:case RS:case MS:case CS:return r;default:return e}}case fR:return e}}}function UU(r){return sl(r)===kS}oo.AsyncMode=mR;oo.ConcurrentMode=kS;oo.ContextConsumer=bS;oo.ContextProvider=CS;oo.Element=dR;oo.ForwardRef=AS;oo.Fragment=ES;oo.Lazy=RS;oo.Memo=MS;oo.Portal=fR;oo.Profiler=SS;oo.StrictMode=xS;oo.Suspense=wS;oo.isAsyncMode=function(r){return UU(r)||sl(r)===mR};oo.isConcurrentMode=UU;oo.isContextConsumer=function(r){return sl(r)===bS};oo.isContextProvider=function(r){return sl(r)===CS};oo.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===dR};oo.isForwardRef=function(r){return sl(r)===AS};oo.isFragment=function(r){return sl(r)===ES};oo.isLazy=function(r){return sl(r)===RS};oo.isMemo=function(r){return sl(r)===MS};oo.isPortal=function(r){return sl(r)===fR};oo.isProfiler=function(r){return sl(r)===SS};oo.isStrictMode=function(r){return sl(r)===xS};oo.isSuspense=function(r){return sl(r)===wS};oo.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===ES||r===kS||r===SS||r===xS||r===wS||r===i7||typeof r=="object"&&r!==null&&(r.$$typeof===RS||r.$$typeof===MS||r.$$typeof===CS||r.$$typeof===bS||r.$$typeof===AS||r.$$typeof===l7||r.$$typeof===a7||r.$$typeof===c7||r.$$typeof===s7)};oo.typeOf=sl;FU.exports=oo;var HU=FU.exports,u7={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},GU={};GU[HU.ForwardRef]=u7;GU[HU.Memo]=h7;var p7=!0;function d7(r,e,t){var o="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):o+=i+" "}),o}var VU=function(e,t,o){var i=e.key+"-"+t.name;if((o===!1||p7===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles),e.inserted[t.name]===void 0){var l=t;do e.insert(t===l?"."+i:"",l,e.sheet,!0),l=l.next;while(l!==void 0)}};function f7(r){for(var e=0,t,o=0,i=r.length;i>=4;++o,i-=4)t=r.charCodeAt(o)&255|(r.charCodeAt(++o)&255)<<8|(r.charCodeAt(++o)&255)<<16|(r.charCodeAt(++o)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(o+2)&255)<<16;case 2:e^=(r.charCodeAt(o+1)&255)<<8;case 1:e^=r.charCodeAt(o)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var m7={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},g7=/[A-Z]|^ms/g,_7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,WU=function(e){return e.charCodeAt(1)===45},jO=function(e){return e!=null&&typeof e!="boolean"},Mb=RU(function(r){return WU(r)?r:r.replace(g7,"-$&").toLowerCase()}),JO=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(_7,function(o,i,l){return Fa={name:i,styles:l,next:Fa},i})}return m7[e]!==1&&!WU(e)&&typeof t=="number"&&t!==0?t+"px":t};function Ry(r,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return Fa={name:t.name,styles:t.styles,next:Fa},t.name;if(t.styles!==void 0){var o=t.next;if(o!==void 0)for(;o!==void 0;)Fa={name:o.name,styles:o.styles,next:Fa},o=o.next;var i=t.styles+";";return i}return y7(r,e,t)}case"function":{if(r!==void 0){var l=Fa,a=t(r);return Fa=l,Ry(r,e,a)}break}}if(e==null)return t;var c=e[t];return c!==void 0?c:t}function y7(r,e,t){var o="";if(Array.isArray(t))for(var i=0;i<t.length;i++)o+=Ry(r,e,t[i])+";";else for(var l in t){var a=t[l];if(typeof a!="object")e!=null&&e[a]!==void 0?o+=l+"{"+e[a]+"}":jO(a)&&(o+=Mb(l)+":"+JO(l,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var c=0;c<a.length;c++)jO(a[c])&&(o+=Mb(l)+":"+JO(l,a[c])+";");else{var p=Ry(r,e,a);switch(l){case"animation":case"animationName":{o+=Mb(l)+":"+p+";";break}default:o+=l+"{"+p+"}"}}}return o}var KO=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Fa,gR=function(e,t,o){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,l="";Fa=void 0;var a=e[0];a==null||a.raw===void 0?(i=!1,l+=Ry(o,t,a)):l+=a[0];for(var c=1;c<e.length;c++)l+=Ry(o,t,e[c]),i&&(l+=a[c]);KO.lastIndex=0;for(var p="",h;(h=KO.exec(l))!==null;)p+="-"+h[1];var f=f7(l)+p;return{name:f,styles:l,next:Fa}},zU=G.exports.createContext(typeof HTMLElement!="undefined"?r7({key:"css"}):null);zU.Provider;var XU=function(e){return G.exports.forwardRef(function(t,o){var i=G.exports.useContext(zU);return e(t,i,o)})},jU=G.exports.createContext({}),v7=XU(function(r,e){var t=r.styles,o=gR([t],void 0,G.exports.useContext(jU)),i=G.exports.useRef();return G.exports.useLayoutEffect(function(){var l=e.key+"-global",a=new BU({key:l,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),c=!1,p=document.querySelector('style[data-emotion="'+l+" "+o.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),p!==null&&(c=!0,p.setAttribute("data-emotion",l),a.hydrate([p])),i.current=[a,c],function(){a.flush()}},[e]),G.exports.useLayoutEffect(function(){var l=i.current,a=l[0],c=l[1];if(c){l[1]=!1;return}if(o.next!==void 0&&VU(e,o.next,!0),a.tags.length){var p=a.tags[a.tags.length-1].nextElementSibling;a.before=p,a.flush()}e.insert("",o,a,!1)},[e,o.name]),null});function T7(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return gR(e)}var _R=function(){var e=T7.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},E7=BY,x7=function(e){return e!=="theme"},YO=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?E7:x7},qO=function(e,t,o){var i;if(t){var l=t.shouldForwardProp;i=e.__emotion_forwardProp&&l?function(a){return e.__emotion_forwardProp(a)&&l(a)}:l}return typeof i!="function"&&o&&(i=e.__emotion_forwardProp),i},S7=function(){return null},C7=function r(e,t){var o=e.__emotion_real===e,i=o&&e.__emotion_base||e,l,a;t!==void 0&&(l=t.label,a=t.target);var c=qO(e,t,o),p=c||YO(i),h=!p("as");return function(){var f=arguments,_=o&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(l!==void 0&&_.push("label:"+l+";"),f[0]==null||f[0].raw===void 0)_.push.apply(_,f);else{_.push(f[0][0]);for(var m=f.length,v=1;v<m;v++)_.push(f[v],f[0][v])}var x=XU(function(b,A,k){var E=h&&b.as||i,M="",R=[],I=b;if(b.theme==null){I={};for(var L in b)I[L]=b[L];I.theme=G.exports.useContext(jU)}typeof b.className=="string"?M=d7(A.registered,R,b.className):b.className!=null&&(M=b.className+" ");var F=gR(_.concat(R),A.registered,I);VU(A,F,typeof E=="string"),M+=A.key+"-"+F.name,a!==void 0&&(M+=" "+a);var U=h&&c===void 0?YO(E):p,X={};for(var j in b)h&&j==="as"||U(j)&&(X[j]=b[j]);X.className=M,X.ref=k;var P=G.exports.createElement(E,X),z=G.exports.createElement(S7,null);return G.exports.createElement(G.exports.Fragment,null,z,P)});return x.displayName=l!==void 0?l:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=i,x.__emotion_styles=_,x.__emotion_forwardProp=c,Object.defineProperty(x,"toString",{value:function(){return"."+a}}),x.withComponent=function(b,A){return r(b,ol({},t,A,{shouldForwardProp:qO(x,A,!0)})).apply(void 0,_)},x}},b7=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jA=C7.bind();b7.forEach(function(r){jA[r]=jA(r)});var k7=jA;function A7(r){return r==null||Object.keys(r).length===0}function w7(r){const{styles:e,defaultTheme:t={}}=r;return Ge(v7,{styles:typeof e=="function"?i=>e(A7(i)?t:i):e})}/** @license MUI v5.4.2
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function M7(r,e){return k7(r,e)}function rx(){return rx=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},rx.apply(this,arguments)}function g_(r){return r!==null&&typeof r=="object"&&r.constructor===Object}function Rl(r,e,t={clone:!0}){const o=t.clone?rx({},r):r;return g_(r)&&g_(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(g_(e[i])&&i in r&&g_(r[i])?o[i]=Rl(r[i],e[i],t):o[i]=e[i])}),o}function ed(r){let e="https://mui.com/production-error/?code="+r;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+r+"; visit "+e+" for the full message."}var vo={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=60103,IS=60106,dv=60107,fv=60108,mv=60114,gv=60109,_v=60110,yv=60112,vv=60113,yR=60120,Tv=60115,Ev=60116,JU=60121,KU=60122,YU=60117,qU=60129,QU=60131;if(typeof Symbol=="function"&&Symbol.for){var ai=Symbol.for;BS=ai("react.element"),IS=ai("react.portal"),dv=ai("react.fragment"),fv=ai("react.strict_mode"),mv=ai("react.profiler"),gv=ai("react.provider"),_v=ai("react.context"),yv=ai("react.forward_ref"),vv=ai("react.suspense"),yR=ai("react.suspense_list"),Tv=ai("react.memo"),Ev=ai("react.lazy"),JU=ai("react.block"),KU=ai("react.server.block"),YU=ai("react.fundamental"),qU=ai("react.debug_trace_mode"),QU=ai("react.legacy_hidden")}function ua(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case BS:switch(r=r.type,r){case dv:case mv:case fv:case vv:case yR:return r;default:switch(r=r&&r.$$typeof,r){case _v:case yv:case Ev:case Tv:case gv:return r;default:return e}}case IS:return e}}}var R7=gv,B7=BS,I7=yv,O7=dv,D7=Ev,L7=Tv,N7=IS,$7=mv,P7=fv,F7=vv;vo.ContextConsumer=_v;vo.ContextProvider=R7;vo.Element=B7;vo.ForwardRef=I7;vo.Fragment=O7;vo.Lazy=D7;vo.Memo=L7;vo.Portal=N7;vo.Profiler=$7;vo.StrictMode=P7;vo.Suspense=F7;vo.isAsyncMode=function(){return!1};vo.isConcurrentMode=function(){return!1};vo.isContextConsumer=function(r){return ua(r)===_v};vo.isContextProvider=function(r){return ua(r)===gv};vo.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===BS};vo.isForwardRef=function(r){return ua(r)===yv};vo.isFragment=function(r){return ua(r)===dv};vo.isLazy=function(r){return ua(r)===Ev};vo.isMemo=function(r){return ua(r)===Tv};vo.isPortal=function(r){return ua(r)===IS};vo.isProfiler=function(r){return ua(r)===mv};vo.isStrictMode=function(r){return ua(r)===fv};vo.isSuspense=function(r){return ua(r)===vv};vo.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===dv||r===mv||r===qU||r===fv||r===vv||r===yR||r===QU||typeof r=="object"&&r!==null&&(r.$$typeof===Ev||r.$$typeof===Tv||r.$$typeof===gv||r.$$typeof===_v||r.$$typeof===yv||r.$$typeof===YU||r.$$typeof===JU||r[0]===KU)};vo.typeOf=ua;function Dt(r){if(typeof r!="string")throw new Error(ed(7));return r.charAt(0).toUpperCase()+r.slice(1)}function QO(...r){return r.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function By(r,e=166){let t;function o(...i){const l=()=>{r.apply(this,i)};clearTimeout(t),t=setTimeout(l,e)}return o.clear=()=>{clearTimeout(t)},o}function Rb(r,e){return G.exports.isValidElement(r)&&e.indexOf(r.type.muiName)!==-1}function Qr(r){return r&&r.ownerDocument||document}function Yc(r){return Qr(r).defaultView||window}function ix(r,e){typeof r=="function"?r(e):r&&(r.current=e)}const U7=typeof window!="undefined"?G.exports.useLayoutEffect:G.exports.useEffect;var sc=U7;let ZO=0;function H7(r){const[e,t]=G.exports.useState(r),o=r||e;return G.exports.useEffect(()=>{e==null&&(ZO+=1,t(`mui-${ZO}`))},[e]),o}const eD=T3["useId"];function vR(r){if(eD!==void 0){const e=eD();return r!=null?r:e}return H7(r)}function sx({controlled:r,default:e,name:t,state:o="value"}){const{current:i}=G.exports.useRef(r!==void 0),[l,a]=G.exports.useState(e),c=i?r:l,p=G.exports.useCallback(h=>{i||a(h)},[]);return[c,p]}function Js(r){const e=G.exports.useRef(r);return sc(()=>{e.current=r}),G.exports.useCallback((...t)=>(0,e.current)(...t),[])}function yo(r,e){return G.exports.useMemo(()=>r==null&&e==null?null:t=>{ix(r,t),ix(e,t)},[r,e])}let OS=!0,JA=!1,tD;const G7={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function V7(r){const{type:e,tagName:t}=r;return!!(t==="INPUT"&&G7[e]&&!r.readOnly||t==="TEXTAREA"&&!r.readOnly||r.isContentEditable)}function W7(r){r.metaKey||r.altKey||r.ctrlKey||(OS=!0)}function Bb(){OS=!1}function z7(){this.visibilityState==="hidden"&&JA&&(OS=!0)}function X7(r){r.addEventListener("keydown",W7,!0),r.addEventListener("mousedown",Bb,!0),r.addEventListener("pointerdown",Bb,!0),r.addEventListener("touchstart",Bb,!0),r.addEventListener("visibilitychange",z7,!0)}function j7(r){const{target:e}=r;try{return e.matches(":focus-visible")}catch{}return OS||V7(e)}function TR(){const r=G.exports.useCallback(i=>{i!=null&&X7(i.ownerDocument)},[]),e=G.exports.useRef(!1);function t(){return e.current?(JA=!0,window.clearTimeout(tD),tD=window.setTimeout(()=>{JA=!1},100),e.current=!1,!0):!1}function o(i){return j7(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:o,onBlur:t,ref:r}}function ZU(r){const e=r.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let af;function eH(){if(af)return af;const r=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",r.appendChild(e),r.dir="rtl",r.style.fontSize="14px",r.style.width="4px",r.style.height="1px",r.style.position="absolute",r.style.top="-1000px",r.style.overflow="scroll",document.body.appendChild(r),af="reverse",r.scrollLeft>0?af="default":(r.scrollLeft=1,r.scrollLeft===0&&(af="negative")),document.body.removeChild(r),af}function nD(r,e){const t=r.scrollLeft;if(e!=="rtl")return t;switch(eH()){case"negative":return r.scrollWidth-r.clientWidth+t;case"reverse":return r.scrollWidth-r.clientWidth-t;default:return t}}const J7={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var K7=J7;function tH(r,e){const t=rx({},e);return Object.keys(r).forEach(o=>{t[o]===void 0&&(t[o]=r[o])}),t}function Ks(){return Ks=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Ks.apply(this,arguments)}function D_(r,e){return e?Rl(r,e,{clone:!1}):r}const ER={xs:0,sm:600,md:900,lg:1200,xl:1536},oD={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${ER[r]}px)`};function ha(r,e,t){const o=r.theme||{};if(Array.isArray(e)){const l=o.breakpoints||oD;return e.reduce((a,c,p)=>(a[l.up(l.keys[p])]=t(e[p]),a),{})}if(typeof e=="object"){const l=o.breakpoints||oD;return Object.keys(e).reduce((a,c)=>{if(Object.keys(l.values||ER).indexOf(c)!==-1){const p=l.up(c);a[p]=t(e[c],c)}else{const p=c;a[p]=e[p]}return a},{})}return t(e)}function Y7(r={}){var e;return(r==null||(e=r.keys)==null?void 0:e.reduce((o,i)=>{const l=r.up(i);return o[l]={},o},{}))||{}}function q7(r,e){return r.reduce((t,o)=>{const i=t[o];return(!i||Object.keys(i).length===0)&&delete t[o],t},e)}function Q7(r,e){if(typeof r!="object")return{};const t={},o=Object.keys(e);return Array.isArray(r)?o.forEach((i,l)=>{l<r.length&&(t[i]=!0)}):o.forEach(i=>{r[i]!=null&&(t[i]=!0)}),t}function DS({values:r,breakpoints:e,base:t}){const o=t||Q7(r,e),i=Object.keys(o);if(i.length===0)return r;let l;return i.reduce((a,c,p)=>(Array.isArray(r)?(a[c]=r[p]!=null?r[p]:r[l],l=p):(a[c]=r[c]!=null?r[c]:r[l]||r,l=c),a),{})}function xR(r,e){return!e||typeof e!="string"?null:e.split(".").reduce((t,o)=>t&&t[o]?t[o]:null,r)}function rD(r,e,t,o=t){let i;return typeof r=="function"?i=r(t):Array.isArray(r)?i=r[t]||o:i=xR(r,t)||o,e&&(i=e(i)),i}function At(r){const{prop:e,cssProperty:t=r.prop,themeKey:o,transform:i}=r,l=a=>{if(a[e]==null)return null;const c=a[e],p=a.theme,h=xR(p,o)||{};return ha(a,c,_=>{let m=rD(h,i,_);return _===m&&typeof _=="string"&&(m=rD(h,i,`${e}${_==="default"?"":Dt(_)}`,_)),t===!1?m:{[t]:m}})};return l.propTypes={},l.filterProps=[e],l}function Rh(...r){const e=r.reduce((o,i)=>(i.filterProps.forEach(l=>{o[l]=i}),o),{}),t=o=>Object.keys(o).reduce((i,l)=>e[l]?D_(i,e[l](o)):i,{});return t.propTypes={},t.filterProps=r.reduce((o,i)=>o.concat(i.filterProps),[]),t}function Z7(r){const e={};return t=>(e[t]===void 0&&(e[t]=r(t)),e[t])}const eq={m:"margin",p:"padding"},tq={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},iD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},nq=Z7(r=>{if(r.length>2)if(iD[r])r=iD[r];else return[r];const[e,t]=r.split(""),o=eq[e],i=tq[t]||"";return Array.isArray(i)?i.map(l=>o+l):[o+i]}),oq=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],rq=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],nH=[...oq,...rq];function xv(r,e,t,o){const i=xR(r,e)||t;return typeof i=="number"?l=>typeof l=="string"?l:i*l:Array.isArray(i)?l=>typeof l=="string"?l:i[l]:typeof i=="function"?i:()=>{}}function oH(r){return xv(r,"spacing",8)}function Sv(r,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),o=r(t);return e>=0?o:typeof o=="number"?-o:`-${o}`}function iq(r,e){return t=>r.reduce((o,i)=>(o[i]=Sv(e,t),o),{})}function sq(r,e,t,o){if(e.indexOf(t)===-1)return null;const i=nq(t),l=iq(i,o),a=r[t];return ha(r,a,l)}function lq(r,e){const t=oH(r.theme);return Object.keys(r).map(o=>sq(r,e,o,t)).reduce(D_,{})}function LS(r){return lq(r,nH)}LS.propTypes={};LS.filterProps=nH;function Cv(r){return typeof r!="number"?r:`${r}px solid`}const aq=At({prop:"border",themeKey:"borders",transform:Cv}),cq=At({prop:"borderTop",themeKey:"borders",transform:Cv}),uq=At({prop:"borderRight",themeKey:"borders",transform:Cv}),hq=At({prop:"borderBottom",themeKey:"borders",transform:Cv}),pq=At({prop:"borderLeft",themeKey:"borders",transform:Cv}),dq=At({prop:"borderColor",themeKey:"palette"}),fq=At({prop:"borderTopColor",themeKey:"palette"}),mq=At({prop:"borderRightColor",themeKey:"palette"}),gq=At({prop:"borderBottomColor",themeKey:"palette"}),_q=At({prop:"borderLeftColor",themeKey:"palette"}),SR=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const e=xv(r.theme,"shape.borderRadius",4),t=o=>({borderRadius:Sv(e,o)});return ha(r,r.borderRadius,t)}return null};SR.propTypes={};SR.filterProps=["borderRadius"];const yq=Rh(aq,cq,uq,hq,pq,dq,fq,mq,gq,_q,SR);var rH=yq;const vq=At({prop:"displayPrint",cssProperty:!1,transform:r=>({"@media print":{display:r}})}),Tq=At({prop:"display"}),Eq=At({prop:"overflow"}),xq=At({prop:"textOverflow"}),Sq=At({prop:"visibility"}),Cq=At({prop:"whiteSpace"});var iH=Rh(vq,Tq,Eq,xq,Sq,Cq);const bq=At({prop:"flexBasis"}),kq=At({prop:"flexDirection"}),Aq=At({prop:"flexWrap"}),wq=At({prop:"justifyContent"}),Mq=At({prop:"alignItems"}),Rq=At({prop:"alignContent"}),Bq=At({prop:"order"}),Iq=At({prop:"flex"}),Oq=At({prop:"flexGrow"}),Dq=At({prop:"flexShrink"}),Lq=At({prop:"alignSelf"}),Nq=At({prop:"justifyItems"}),$q=At({prop:"justifySelf"}),Pq=Rh(bq,kq,Aq,wq,Mq,Rq,Bq,Iq,Oq,Dq,Lq,Nq,$q);var sH=Pq;const CR=r=>{if(r.gap!==void 0&&r.gap!==null){const e=xv(r.theme,"spacing",8),t=o=>({gap:Sv(e,o)});return ha(r,r.gap,t)}return null};CR.propTypes={};CR.filterProps=["gap"];const bR=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const e=xv(r.theme,"spacing",8),t=o=>({columnGap:Sv(e,o)});return ha(r,r.columnGap,t)}return null};bR.propTypes={};bR.filterProps=["columnGap"];const kR=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const e=xv(r.theme,"spacing",8),t=o=>({rowGap:Sv(e,o)});return ha(r,r.rowGap,t)}return null};kR.propTypes={};kR.filterProps=["rowGap"];const Fq=At({prop:"gridColumn"}),Uq=At({prop:"gridRow"}),Hq=At({prop:"gridAutoFlow"}),Gq=At({prop:"gridAutoColumns"}),Vq=At({prop:"gridAutoRows"}),Wq=At({prop:"gridTemplateColumns"}),zq=At({prop:"gridTemplateRows"}),Xq=At({prop:"gridTemplateAreas"}),jq=At({prop:"gridArea"}),Jq=Rh(CR,bR,kR,Fq,Uq,Hq,Gq,Vq,Wq,zq,Xq,jq);var lH=Jq;const Kq=At({prop:"color",themeKey:"palette"}),Yq=At({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),qq=At({prop:"backgroundColor",themeKey:"palette"}),Qq=Rh(Kq,Yq,qq);var aH=Qq;const Zq=At({prop:"position"}),eQ=At({prop:"zIndex",themeKey:"zIndex"}),tQ=At({prop:"top"}),nQ=At({prop:"right"}),oQ=At({prop:"bottom"}),rQ=At({prop:"left"});var cH=Rh(Zq,eQ,tQ,nQ,oQ,rQ);const iQ=At({prop:"boxShadow",themeKey:"shadows"});var uH=iQ;function Bh(r){return r<=1&&r!==0?`${r*100}%`:r}const sQ=At({prop:"width",transform:Bh}),hH=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const e=t=>{var o,i,l;return{maxWidth:((o=r.theme)==null||(i=o.breakpoints)==null||(l=i.values)==null?void 0:l[t])||ER[t]||Bh(t)}};return ha(r,r.maxWidth,e)}return null};hH.filterProps=["maxWidth"];const lQ=At({prop:"minWidth",transform:Bh}),aQ=At({prop:"height",transform:Bh}),cQ=At({prop:"maxHeight",transform:Bh}),uQ=At({prop:"minHeight",transform:Bh});At({prop:"size",cssProperty:"width",transform:Bh});At({prop:"size",cssProperty:"height",transform:Bh});const hQ=At({prop:"boxSizing"}),pQ=Rh(sQ,hH,lQ,aQ,cQ,uQ,hQ);var pH=pQ;const dQ=At({prop:"fontFamily",themeKey:"typography"}),fQ=At({prop:"fontSize",themeKey:"typography"}),mQ=At({prop:"fontStyle",themeKey:"typography"}),gQ=At({prop:"fontWeight",themeKey:"typography"}),_Q=At({prop:"letterSpacing"}),yQ=At({prop:"textTransform"}),vQ=At({prop:"lineHeight"}),TQ=At({prop:"textAlign"}),EQ=At({prop:"typography",cssProperty:!1,themeKey:"typography"}),xQ=Rh(EQ,dQ,fQ,mQ,gQ,_Q,vQ,TQ,yQ);var dH=xQ;const sD={borders:rH.filterProps,display:iH.filterProps,flexbox:sH.filterProps,grid:lH.filterProps,positions:cH.filterProps,palette:aH.filterProps,shadows:uH.filterProps,sizing:pH.filterProps,spacing:LS.filterProps,typography:dH.filterProps},fH={borders:rH,display:iH,flexbox:sH,grid:lH,positions:cH,palette:aH,shadows:uH,sizing:pH,spacing:LS,typography:dH},SQ=Object.keys(sD).reduce((r,e)=>(sD[e].forEach(t=>{r[t]=fH[e]}),r),{});function CQ(...r){const e=r.reduce((o,i)=>o.concat(Object.keys(i)),[]),t=new Set(e);return r.every(o=>t.size===Object.keys(o).length)}function bQ(r,e){return typeof r=="function"?r(e):r}function kQ(r=fH){const e=Object.keys(r).reduce((i,l)=>(r[l].filterProps.forEach(a=>{i[a]=r[l]}),i),{});function t(i,l,a){const c={[i]:l,theme:a},p=e[i];return p?p(c):{[i]:l}}function o(i){const{sx:l,theme:a={}}=i||{};if(!l)return null;function c(p){let h=p;if(typeof p=="function")h=p(a);else if(typeof p!="object")return p;if(!h)return null;const f=Y7(a.breakpoints),_=Object.keys(f);let m=f;return Object.keys(h).forEach(v=>{const x=bQ(h[v],a);if(x!=null)if(typeof x=="object")if(e[v])m=D_(m,t(v,x,a));else{const b=ha({theme:a},x,A=>({[v]:A}));CQ(b,x)?m[v]=o({sx:x,theme:a}):m=D_(m,b)}else m=D_(m,t(v,x,a))}),q7(_,m)}return Array.isArray(l)?l.map(c):c(l)}return o}const mH=kQ();mH.filterProps=["sx"];var AQ=mH;function Up(r,e){if(r==null)return{};var t={},o=Object.keys(r),i,l;for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}const wQ=["sx"],MQ=r=>{const e={systemProps:{},otherProps:{}};return Object.keys(r).forEach(t=>{SQ[t]?e.systemProps[t]=r[t]:e.otherProps[t]=r[t]}),e};function gH(r){const{sx:e}=r,t=Up(r,wQ),{systemProps:o,otherProps:i}=MQ(t);let l;return Array.isArray(e)?l=[o,...e]:typeof e=="function"?l=(...a)=>{const c=e(...a);return g_(c)?Ks({},o,c):o}:l=Ks({},o,e),Ks({},i,{sx:l})}function _H(r){var e,t,o="";if(typeof r=="string"||typeof r=="number")o+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=_H(r[e]))&&(o&&(o+=" "),o+=t);else for(e in r)r[e]&&(o&&(o+=" "),o+=e);return o}function Rt(){for(var r=0,e,t,o="";r<arguments.length;)(e=arguments[r++])&&(t=_H(e))&&(o&&(o+=" "),o+=t);return o}const RQ=["values","unit","step"],BQ=r=>{const e=Object.keys(r).map(t=>({key:t,val:r[t]}))||[];return e.sort((t,o)=>t.val-o.val),e.reduce((t,o)=>Ks({},t,{[o.key]:o.val}),{})};function IQ(r){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:o=5}=r,i=Up(r,RQ),l=BQ(e),a=Object.keys(l);function c(m){return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t})`}function p(m){return`@media (max-width:${(typeof e[m]=="number"?e[m]:m)-o/100}${t})`}function h(m,v){const x=a.indexOf(v);return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t}) and (max-width:${(x!==-1&&typeof e[a[x]]=="number"?e[a[x]]:v)-o/100}${t})`}function f(m){return a.indexOf(m)+1<a.length?h(m,a[a.indexOf(m)+1]):c(m)}function _(m){const v=a.indexOf(m);return v===0?c(a[1]):v===a.length-1?p(a[v]):h(m,a[a.indexOf(m)+1]).replace("@media","@media not all and")}return Ks({keys:a,values:l,up:c,down:p,between:h,only:f,not:_,unit:t},i)}const OQ={borderRadius:4};var DQ=OQ;function LQ(r=8){if(r.mui)return r;const e=oH({spacing:r}),t=(...o)=>(o.length===0?[1]:o).map(l=>{const a=e(l);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}const NQ=["breakpoints","palette","spacing","shape"];function AR(r={},...e){const{breakpoints:t={},palette:o={},spacing:i,shape:l={}}=r,a=Up(r,NQ),c=IQ(t),p=LQ(i);let h=Rl({breakpoints:c,direction:"ltr",components:{},palette:Ks({mode:"light"},o),spacing:p,shape:Ks({},DQ,l)},a);return h=e.reduce((f,_)=>Rl(f,_),h),h}const $Q=G.exports.createContext(null);var PQ=$Q;function FQ(){return G.exports.useContext(PQ)}function UQ(r){return Object.keys(r).length===0}function yH(r=null){const e=FQ();return!e||UQ(e)?r:e}const HQ=AR();function vH(r=HQ){return yH(r)}const GQ=["variant"];function lD(r){return r.length===0}function TH(r){const{variant:e}=r,t=Up(r,GQ);let o=e||"";return Object.keys(t).sort().forEach(i=>{i==="color"?o+=lD(o)?r[i]:Dt(r[i]):o+=`${lD(o)?i:Dt(i)}${Dt(r[i].toString())}`}),o}const VQ=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],WQ=["theme"],zQ=["theme"];function Yg(r){return Object.keys(r).length===0}const XQ=(r,e)=>e.components&&e.components[r]&&e.components[r].styleOverrides?e.components[r].styleOverrides:null,jQ=(r,e)=>{let t=[];e&&e.components&&e.components[r]&&e.components[r].variants&&(t=e.components[r].variants);const o={};return t.forEach(i=>{const l=TH(i.props);o[l]=i.style}),o},JQ=(r,e,t,o)=>{var i,l;const{ownerState:a={}}=r,c=[],p=t==null||(i=t.components)==null||(l=i[o])==null?void 0:l.variants;return p&&p.forEach(h=>{let f=!0;Object.keys(h.props).forEach(_=>{a[_]!==h.props[_]&&r[_]!==h.props[_]&&(f=!1)}),f&&c.push(e[TH(h.props)])}),c};function L_(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const KQ=AR();function YQ(r={}){const{defaultTheme:e=KQ,rootShouldForwardProp:t=L_,slotShouldForwardProp:o=L_,styleFunctionSx:i=AQ}=r;return(l,a={})=>{const{name:c,slot:p,skipVariantsResolver:h,skipSx:f,overridesResolver:_}=a,m=Up(a,VQ),v=h!==void 0?h:p&&p!=="Root"||!1,x=f||!1;let b,A=L_;p==="Root"?A=t:p&&(A=o);const k=M7(l,Ks({shouldForwardProp:A,label:b},m)),E=(M,...R)=>{const I=R?R.map(X=>typeof X=="function"&&X.__emotion_real!==X?j=>{let{theme:P}=j,z=Up(j,WQ);return X(Ks({theme:Yg(P)?e:P},z))}:X):[];let L=M;c&&_&&I.push(X=>{const j=Yg(X.theme)?e:X.theme,P=XQ(c,j);if(P){const z={};return Object.entries(P).forEach(([K,te])=>{z[K]=typeof te=="function"?te(X):te}),_(X,z)}return null}),c&&!v&&I.push(X=>{const j=Yg(X.theme)?e:X.theme;return JQ(X,jQ(c,j),j,c)}),x||I.push(X=>{const j=Yg(X.theme)?e:X.theme;return i(Ks({},X,{theme:j}))});const F=I.length-R.length;if(Array.isArray(M)&&F>0){const X=new Array(F).fill("");L=[...M,...X],L.raw=[...M.raw,...X]}else typeof M=="function"&&(L=X=>{let{theme:j}=X,P=Up(X,zQ);return M(Ks({theme:Yg(j)?e:j},P))});return k(L,...I)};return k.withConfig&&(E.withConfig=k.withConfig),E}}function qQ(r){const{theme:e,name:t,props:o}=r;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?o:tH(e.components[t].defaultProps,o)}function QQ({props:r,name:e,defaultTheme:t}){const o=vH(t);return qQ({theme:o,name:e,props:r})}function wR(r,e=0,t=1){return Math.min(Math.max(e,r),t)}function ZQ(r){r=r.substr(1);const e=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let t=r.match(e);return t&&t[0].length===1&&(t=t.map(o=>o+o)),t?`rgb${t.length===4?"a":""}(${t.map((o,i)=>i<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function td(r){if(r.type)return r;if(r.charAt(0)==="#")return td(ZQ(r));const e=r.indexOf("("),t=r.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error(ed(9,r));let o=r.substring(e+1,r.length-1),i;if(t==="color"){if(o=o.split(" "),i=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].substr(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(ed(10,i))}else o=o.split(",");return o=o.map(l=>parseFloat(l)),{type:t,values:o,colorSpace:i}}function NS(r){const{type:e,colorSpace:t}=r;let{values:o}=r;return e.indexOf("rgb")!==-1?o=o.map((i,l)=>l<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),e.indexOf("color")!==-1?o=`${t} ${o.join(" ")}`:o=`${o.join(", ")}`,`${e}(${o})`}function eZ(r){r=td(r);const{values:e}=r,t=e[0],o=e[1]/100,i=e[2]/100,l=o*Math.min(i,1-i),a=(h,f=(h+t/30)%12)=>i-l*Math.max(Math.min(f-3,9-f,1),-1);let c="rgb";const p=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return r.type==="hsla"&&(c+="a",p.push(e[3])),NS({type:c,values:p})}function aD(r){r=td(r);let e=r.type==="hsl"?td(eZ(r)).values:r.values;return e=e.map(t=>(r.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function tZ(r,e){const t=aD(r),o=aD(e);return(Math.max(t,o)+.05)/(Math.min(t,o)+.05)}function Ni(r,e){return r=td(r),e=wR(e),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${e}`:r.values[3]=e,NS(r)}function EH(r,e){if(r=td(r),e=wR(e),r.type.indexOf("hsl")!==-1)r.values[2]*=1-e;else if(r.type.indexOf("rgb")!==-1||r.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)r.values[t]*=1-e;return NS(r)}function xH(r,e){if(r=td(r),e=wR(e),r.type.indexOf("hsl")!==-1)r.values[2]+=(100-r.values[2])*e;else if(r.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)r.values[t]+=(255-r.values[t])*e;else if(r.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)r.values[t]+=(1-r.values[t])*e;return NS(r)}function Zt(){return Zt=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Zt.apply(this,arguments)}function Ws(r){return typeof r=="string"}function yl(r,e={},t){return Ws(r)?e:Zt({},e,{ownerState:Zt({},e.ownerState,t)})}function Km(r,e){if(r==null)return{};var t={},o=Object.keys(r),i,l;for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function Ln(r,e,t){const o={};return Object.keys(r).forEach(i=>{o[i]=r[i].reduce((l,a)=>(a&&(t&&t[a]&&l.push(t[a]),l.push(e(a))),l),[]).join(" ")}),o}const cD=r=>r,nZ=()=>{let r=cD;return{configure(e){r=e},generate(e){return r(e)},reset(){r=cD}}},oZ=nZ();var rZ=oZ;const iZ={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function On(r,e){return iZ[e]||`${rZ.generate(r)}-${e}`}function En(r,e){const t={};return e.forEach(o=>{t[o]=On(r,o)}),t}function sZ(r){return On("MuiBackdrop",r)}En("MuiBackdrop",["root","invisible"]);const lZ=["classes","className","invisible","component","components","componentsProps","theme"],aZ=r=>{const{classes:e,invisible:t}=r;return Ln({root:["root",t&&"invisible"]},sZ,e)},cZ=G.exports.forwardRef(function(e,t){const{classes:o,className:i,invisible:l=!1,component:a="div",components:c={},componentsProps:p={},theme:h}=e,f=Km(e,lZ),_=Zt({},e,{classes:o,invisible:l}),m=aZ(_),v=c.Root||a,x=p.root||{};return Ge(v,Zt({"aria-hidden":!0},x,!Ws(v)&&{as:a,ownerState:Zt({},_,x.ownerState),theme:h},{ref:t},f,{className:Rt(m.root,x.className,i)}))});var uZ=cZ;function hZ(r){return typeof r=="function"?r():r}const pZ=G.exports.forwardRef(function(e,t){const{children:o,container:i,disablePortal:l=!1}=e,[a,c]=G.exports.useState(null),p=yo(G.exports.isValidElement(o)?o.ref:null,t);return sc(()=>{l||c(hZ(i)||document.body)},[i,l]),sc(()=>{if(a&&!l)return ix(t,a),()=>{ix(t,null)}},[t,a,l]),l?G.exports.isValidElement(o)?G.exports.cloneElement(o,{ref:p}):o:a&&mx.exports.createPortal(o,a)});var SH=pZ;function dZ(r){const e=Qr(r);return e.body===r?Yc(r).innerWidth>e.documentElement.clientWidth:r.scrollHeight>r.clientHeight}function N_(r,e){e?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")}function uD(r){return parseInt(Yc(r).getComputedStyle(r).paddingRight,10)||0}function hD(r,e,t,o=[],i){const l=[e,t,...o],a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(r.children,c=>{l.indexOf(c)===-1&&a.indexOf(c.tagName)===-1&&N_(c,i)})}function Ib(r,e){let t=-1;return r.some((o,i)=>e(o)?(t=i,!0):!1),t}function fZ(r,e){const t=[],o=r.container;if(!e.disableScrollLock){if(dZ(o)){const p=ZU(Qr(o));t.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${uD(o)+p}px`;const h=Qr(o).querySelectorAll(".mui-fixed");[].forEach.call(h,f=>{t.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${uD(f)+p}px`})}const l=o.parentElement,a=Yc(o),c=(l==null?void 0:l.nodeName)==="HTML"&&a.getComputedStyle(l).overflowY==="scroll"?l:o;t.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{t.forEach(({value:l,el:a,property:c})=>{l?a.style.setProperty(c,l):a.style.removeProperty(c)})}}function mZ(r){const e=[];return[].forEach.call(r.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class gZ{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let o=this.modals.indexOf(e);if(o!==-1)return o;o=this.modals.length,this.modals.push(e),e.modalRef&&N_(e.modalRef,!1);const i=mZ(t);hD(t,e.mount,e.modalRef,i,!0);const l=Ib(this.containers,a=>a.container===t);return l!==-1?(this.containers[l].modals.push(e),o):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),o)}mount(e,t){const o=Ib(this.containers,l=>l.modals.indexOf(e)!==-1),i=this.containers[o];i.restore||(i.restore=fZ(i,t))}remove(e){const t=this.modals.indexOf(e);if(t===-1)return t;const o=Ib(this.containers,l=>l.modals.indexOf(e)!==-1),i=this.containers[o];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),i.modals.length===0)i.restore&&i.restore(),e.modalRef&&N_(e.modalRef,!0),hD(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(o,1);else{const l=i.modals[i.modals.length-1];l.modalRef&&N_(l.modalRef,!1)}return t}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const _Z=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function yZ(r){const e=parseInt(r.getAttribute("tabindex"),10);return Number.isNaN(e)?r.contentEditable==="true"||(r.nodeName==="AUDIO"||r.nodeName==="VIDEO"||r.nodeName==="DETAILS")&&r.getAttribute("tabindex")===null?0:r.tabIndex:e}function vZ(r){if(r.tagName!=="INPUT"||r.type!=="radio"||!r.name)return!1;const e=o=>r.ownerDocument.querySelector(`input[type="radio"]${o}`);let t=e(`[name="${r.name}"]:checked`);return t||(t=e(`[name="${r.name}"]`)),t!==r}function TZ(r){return!(r.disabled||r.tagName==="INPUT"&&r.type==="hidden"||vZ(r))}function EZ(r){const e=[],t=[];return Array.from(r.querySelectorAll(_Z)).forEach((o,i)=>{const l=yZ(o);l===-1||!TZ(o)||(l===0?e.push(o):t.push({documentOrder:i,tabIndex:l,node:o}))}),t.sort((o,i)=>o.tabIndex===i.tabIndex?o.documentOrder-i.documentOrder:o.tabIndex-i.tabIndex).map(o=>o.node).concat(e)}function xZ(){return!0}function SZ(r){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:o=!1,disableRestoreFocus:i=!1,getTabbable:l=EZ,isEnabled:a=xZ,open:c}=r,p=G.exports.useRef(),h=G.exports.useRef(null),f=G.exports.useRef(null),_=G.exports.useRef(null),m=G.exports.useRef(null),v=G.exports.useRef(!1),x=G.exports.useRef(null),b=yo(e.ref,x),A=G.exports.useRef(null);G.exports.useEffect(()=>{!c||!x.current||(v.current=!t)},[t,c]),G.exports.useEffect(()=>{if(!c||!x.current)return;const M=Qr(x.current);return x.current.contains(M.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex",-1),v.current&&x.current.focus()),()=>{i||(_.current&&_.current.focus&&(p.current=!0,_.current.focus()),_.current=null)}},[c]),G.exports.useEffect(()=>{if(!c||!x.current)return;const M=Qr(x.current),R=F=>{const{current:U}=x;if(U!==null){if(!M.hasFocus()||o||!a()||p.current){p.current=!1;return}if(!U.contains(M.activeElement)){if(F&&m.current!==F.target||M.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!v.current)return;let P=[];if((M.activeElement===h.current||M.activeElement===f.current)&&(P=l(x.current)),P.length>0){var X,j;const z=Boolean(((X=A.current)==null?void 0:X.shiftKey)&&((j=A.current)==null?void 0:j.key)==="Tab"),K=P[0],te=P[P.length-1];z?te.focus():K.focus()}else U.focus()}}},I=F=>{A.current=F,!(o||!a()||F.key!=="Tab")&&M.activeElement===x.current&&F.shiftKey&&(p.current=!0,f.current.focus())};M.addEventListener("focusin",R),M.addEventListener("keydown",I,!0);const L=setInterval(()=>{M.activeElement.tagName==="BODY"&&R()},50);return()=>{clearInterval(L),M.removeEventListener("focusin",R),M.removeEventListener("keydown",I,!0)}},[t,o,i,a,c,l]);const k=M=>{_.current===null&&(_.current=M.relatedTarget),v.current=!0,m.current=M.target;const R=e.props.onFocus;R&&R(M)},E=M=>{_.current===null&&(_.current=M.relatedTarget),v.current=!0};return bo(G.exports.Fragment,{children:[Ge("div",{tabIndex:0,onFocus:E,ref:h,"data-test":"sentinelStart"}),G.exports.cloneElement(e,{ref:b,onFocus:k}),Ge("div",{tabIndex:0,onFocus:E,ref:f,"data-test":"sentinelEnd"})]})}function CZ(r){return On("MuiModal",r)}En("MuiModal",["root","hidden"]);const bZ=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"],kZ=r=>{const{open:e,exited:t,classes:o}=r;return Ln({root:["root",!e&&t&&"hidden"]},CZ,o)};function AZ(r){return typeof r=="function"?r():r}function wZ(r){return r.children?r.children.props.hasOwnProperty("in"):!1}const MZ=new gZ,RZ=G.exports.forwardRef(function(e,t){const{BackdropComponent:o,BackdropProps:i,children:l,classes:a,className:c,closeAfterTransition:p=!1,component:h="div",components:f={},componentsProps:_={},container:m,disableAutoFocus:v=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:b=!1,disablePortal:A=!1,disableRestoreFocus:k=!1,disableScrollLock:E=!1,hideBackdrop:M=!1,keepMounted:R=!1,manager:I=MZ,onBackdropClick:L,onClose:F,onKeyDown:U,open:X,theme:j,onTransitionEnter:P,onTransitionExited:z}=e,K=Km(e,bZ),[te,oe]=G.exports.useState(!0),ee=G.exports.useRef({}),pe=G.exports.useRef(null),ae=G.exports.useRef(null),Ee=yo(ae,t),S=wZ(e),D=()=>Qr(pe.current),H=()=>(ee.current.modalRef=ae.current,ee.current.mountNode=pe.current,ee.current),q=()=>{I.mount(H(),{disableScrollLock:E}),ae.current.scrollTop=0},Q=Js(()=>{const qe=AZ(m)||D().body;I.add(H(),qe),ae.current&&q()}),de=G.exports.useCallback(()=>I.isTopModal(H()),[I]),je=Js(qe=>{pe.current=qe,!!qe&&(X&&de()?q():N_(ae.current,!0))}),We=G.exports.useCallback(()=>{I.remove(H())},[I]);G.exports.useEffect(()=>()=>{We()},[We]),G.exports.useEffect(()=>{X?Q():(!S||!p)&&We()},[X,We,S,p,Q]);const ze=Zt({},e,{classes:a,closeAfterTransition:p,disableAutoFocus:v,disableEnforceFocus:x,disableEscapeKeyDown:b,disablePortal:A,disableRestoreFocus:k,disableScrollLock:E,exited:te,hideBackdrop:M,keepMounted:R}),Oe=kZ(ze);if(!R&&!X&&(!S||te))return null;const Ye=()=>{oe(!1),P&&P()},et=()=>{oe(!0),z&&z(),p&&We()},Re=qe=>{qe.target===qe.currentTarget&&(L&&L(qe),F&&F(qe,"backdropClick"))},Te=qe=>{U&&U(qe),!(qe.key!=="Escape"||!de())&&(b||(qe.stopPropagation(),F&&F(qe,"escapeKeyDown")))},Le={};l.props.tabIndex===void 0&&(Le.tabIndex="-1"),S&&(Le.onEnter=QO(Ye,l.props.onEnter),Le.onExited=QO(et,l.props.onExited));const Ke=f.Root||h,Ne=_.root||{};return Ge(SH,{ref:je,container:m,disablePortal:A,children:bo(Ke,Zt({role:"presentation"},Ne,!Ws(Ke)&&{as:h,ownerState:Zt({},ze,Ne.ownerState),theme:j},K,{ref:Ee,onKeyDown:Te,className:Rt(Oe.root,Ne.className,c),children:[!M&&o?Ge(o,Zt({open:X,onClick:Re},i)):null,Ge(SZ,{disableEnforceFocus:x,disableAutoFocus:v,disableRestoreFocus:k,isEnabled:de,open:X,children:G.exports.cloneElement(l,Le)})]}))})});var BZ=RZ,bs="top",Ol="bottom",Dl="right",ks="left",MR="auto",bv=[bs,Ol,Dl,ks],wm="start",Iy="end",IZ="clippingParents",CH="viewport",qg="popper",OZ="reference",pD=bv.reduce(function(r,e){return r.concat([e+"-"+wm,e+"-"+Iy])},[]),bH=[].concat(bv,[MR]).reduce(function(r,e){return r.concat([e,e+"-"+wm,e+"-"+Iy])},[]),DZ="beforeRead",LZ="read",NZ="afterRead",$Z="beforeMain",PZ="main",FZ="afterMain",UZ="beforeWrite",HZ="write",GZ="afterWrite",VZ=[DZ,LZ,NZ,$Z,PZ,FZ,UZ,HZ,GZ];function lc(r){return r?(r.nodeName||"").toLowerCase():null}function pa(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function Mm(r){var e=pa(r).Element;return r instanceof e||r instanceof Element}function Bl(r){var e=pa(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function kH(r){if(typeof ShadowRoot=="undefined")return!1;var e=pa(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function WZ(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var o=e.styles[t]||{},i=e.attributes[t]||{},l=e.elements[t];!Bl(l)||!lc(l)||(Object.assign(l.style,o),Object.keys(i).forEach(function(a){var c=i[a];c===!1?l.removeAttribute(a):l.setAttribute(a,c===!0?"":c)}))})}function zZ(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(o){var i=e.elements[o],l=e.attributes[o]||{},a=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:t[o]),c=a.reduce(function(p,h){return p[h]="",p},{});!Bl(i)||!lc(i)||(Object.assign(i.style,c),Object.keys(l).forEach(function(p){i.removeAttribute(p)}))})}}var XZ={name:"applyStyles",enabled:!0,phase:"write",fn:WZ,effect:zZ,requires:["computeStyles"]};function Qa(r){return r.split("-")[0]}var Hp=Math.max,lx=Math.min,Rm=Math.round;function Bm(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),o=1,i=1;if(Bl(r)&&e){var l=r.offsetHeight,a=r.offsetWidth;a>0&&(o=Rm(t.width)/a||1),l>0&&(i=Rm(t.height)/l||1)}return{width:t.width/o,height:t.height/i,top:t.top/i,right:t.right/o,bottom:t.bottom/i,left:t.left/o,x:t.left/o,y:t.top/i}}function RR(r){var e=Bm(r),t=r.offsetWidth,o=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:o}}function AH(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&kH(t)){var o=e;do{if(o&&r.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function qc(r){return pa(r).getComputedStyle(r)}function jZ(r){return["table","td","th"].indexOf(lc(r))>=0}function Ih(r){return((Mm(r)?r.ownerDocument:r.document)||window.document).documentElement}function $S(r){return lc(r)==="html"?r:r.assignedSlot||r.parentNode||(kH(r)?r.host:null)||Ih(r)}function dD(r){return!Bl(r)||qc(r).position==="fixed"?null:r.offsetParent}function JZ(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Bl(r)){var o=qc(r);if(o.position==="fixed")return null}for(var i=$S(r);Bl(i)&&["html","body"].indexOf(lc(i))<0;){var l=qc(i);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||e&&l.willChange==="filter"||e&&l.filter&&l.filter!=="none")return i;i=i.parentNode}return null}function kv(r){for(var e=pa(r),t=dD(r);t&&jZ(t)&&qc(t).position==="static";)t=dD(t);return t&&(lc(t)==="html"||lc(t)==="body"&&qc(t).position==="static")?e:t||JZ(r)||e}function BR(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function $_(r,e,t){return Hp(r,lx(e,t))}function KZ(r,e,t){var o=$_(r,e,t);return o>t?t:o}function wH(){return{top:0,right:0,bottom:0,left:0}}function MH(r){return Object.assign({},wH(),r)}function RH(r,e){return e.reduce(function(t,o){return t[o]=r,t},{})}var YZ=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,MH(typeof e!="number"?e:RH(e,bv))};function qZ(r){var e,t=r.state,o=r.name,i=r.options,l=t.elements.arrow,a=t.modifiersData.popperOffsets,c=Qa(t.placement),p=BR(c),h=[ks,Dl].indexOf(c)>=0,f=h?"height":"width";if(!(!l||!a)){var _=YZ(i.padding,t),m=RR(l),v=p==="y"?bs:ks,x=p==="y"?Ol:Dl,b=t.rects.reference[f]+t.rects.reference[p]-a[p]-t.rects.popper[f],A=a[p]-t.rects.reference[p],k=kv(l),E=k?p==="y"?k.clientHeight||0:k.clientWidth||0:0,M=b/2-A/2,R=_[v],I=E-m[f]-_[x],L=E/2-m[f]/2+M,F=$_(R,L,I),U=p;t.modifiersData[o]=(e={},e[U]=F,e.centerOffset=F-L,e)}}function QZ(r){var e=r.state,t=r.options,o=t.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!AH(e.elements.popper,i)||(e.elements.arrow=i))}var ZZ={name:"arrow",enabled:!0,phase:"main",fn:qZ,effect:QZ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Im(r){return r.split("-")[1]}var eee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tee(r){var e=r.x,t=r.y,o=window,i=o.devicePixelRatio||1;return{x:Rm(e*i)/i||0,y:Rm(t*i)/i||0}}function fD(r){var e,t=r.popper,o=r.popperRect,i=r.placement,l=r.variation,a=r.offsets,c=r.position,p=r.gpuAcceleration,h=r.adaptive,f=r.roundOffsets,_=r.isFixed,m=a.x,v=m===void 0?0:m,x=a.y,b=x===void 0?0:x,A=typeof f=="function"?f({x:v,y:b}):{x:v,y:b};v=A.x,b=A.y;var k=a.hasOwnProperty("x"),E=a.hasOwnProperty("y"),M=ks,R=bs,I=window;if(h){var L=kv(t),F="clientHeight",U="clientWidth";if(L===pa(t)&&(L=Ih(t),qc(L).position!=="static"&&c==="absolute"&&(F="scrollHeight",U="scrollWidth")),L=L,i===bs||(i===ks||i===Dl)&&l===Iy){R=Ol;var X=_&&I.visualViewport?I.visualViewport.height:L[F];b-=X-o.height,b*=p?1:-1}if(i===ks||(i===bs||i===Ol)&&l===Iy){M=Dl;var j=_&&I.visualViewport?I.visualViewport.width:L[U];v-=j-o.width,v*=p?1:-1}}var P=Object.assign({position:c},h&&eee),z=f===!0?tee({x:v,y:b}):{x:v,y:b};if(v=z.x,b=z.y,p){var K;return Object.assign({},P,(K={},K[R]=E?"0":"",K[M]=k?"0":"",K.transform=(I.devicePixelRatio||1)<=1?"translate("+v+"px, "+b+"px)":"translate3d("+v+"px, "+b+"px, 0)",K))}return Object.assign({},P,(e={},e[R]=E?b+"px":"",e[M]=k?v+"px":"",e.transform="",e))}function nee(r){var e=r.state,t=r.options,o=t.gpuAcceleration,i=o===void 0?!0:o,l=t.adaptive,a=l===void 0?!0:l,c=t.roundOffsets,p=c===void 0?!0:c,h={placement:Qa(e.placement),variation:Im(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fD(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:p})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fD(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var oee={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:nee,data:{}},C0={passive:!0};function ree(r){var e=r.state,t=r.instance,o=r.options,i=o.scroll,l=i===void 0?!0:i,a=o.resize,c=a===void 0?!0:a,p=pa(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return l&&h.forEach(function(f){f.addEventListener("scroll",t.update,C0)}),c&&p.addEventListener("resize",t.update,C0),function(){l&&h.forEach(function(f){f.removeEventListener("scroll",t.update,C0)}),c&&p.removeEventListener("resize",t.update,C0)}}var iee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ree,data:{}},see={left:"right",right:"left",bottom:"top",top:"bottom"};function dE(r){return r.replace(/left|right|bottom|top/g,function(e){return see[e]})}var lee={start:"end",end:"start"};function mD(r){return r.replace(/start|end/g,function(e){return lee[e]})}function IR(r){var e=pa(r),t=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:t,scrollTop:o}}function OR(r){return Bm(Ih(r)).left+IR(r).scrollLeft}function aee(r){var e=pa(r),t=Ih(r),o=e.visualViewport,i=t.clientWidth,l=t.clientHeight,a=0,c=0;return o&&(i=o.width,l=o.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=o.offsetLeft,c=o.offsetTop)),{width:i,height:l,x:a+OR(r),y:c}}function cee(r){var e,t=Ih(r),o=IR(r),i=(e=r.ownerDocument)==null?void 0:e.body,l=Hp(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Hp(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-o.scrollLeft+OR(r),p=-o.scrollTop;return qc(i||t).direction==="rtl"&&(c+=Hp(t.clientWidth,i?i.clientWidth:0)-l),{width:l,height:a,x:c,y:p}}function DR(r){var e=qc(r),t=e.overflow,o=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+o)}function BH(r){return["html","body","#document"].indexOf(lc(r))>=0?r.ownerDocument.body:Bl(r)&&DR(r)?r:BH($S(r))}function P_(r,e){var t;e===void 0&&(e=[]);var o=BH(r),i=o===((t=r.ownerDocument)==null?void 0:t.body),l=pa(o),a=i?[l].concat(l.visualViewport||[],DR(o)?o:[]):o,c=e.concat(a);return i?c:c.concat(P_($S(a)))}function KA(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function uee(r){var e=Bm(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function gD(r,e){return e===CH?KA(aee(r)):Mm(e)?uee(e):KA(cee(Ih(r)))}function hee(r){var e=P_($S(r)),t=["absolute","fixed"].indexOf(qc(r).position)>=0,o=t&&Bl(r)?kv(r):r;return Mm(o)?e.filter(function(i){return Mm(i)&&AH(i,o)&&lc(i)!=="body"}):[]}function pee(r,e,t){var o=e==="clippingParents"?hee(r):[].concat(e),i=[].concat(o,[t]),l=i[0],a=i.reduce(function(c,p){var h=gD(r,p);return c.top=Hp(h.top,c.top),c.right=lx(h.right,c.right),c.bottom=lx(h.bottom,c.bottom),c.left=Hp(h.left,c.left),c},gD(r,l));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function IH(r){var e=r.reference,t=r.element,o=r.placement,i=o?Qa(o):null,l=o?Im(o):null,a=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,p;switch(i){case bs:p={x:a,y:e.y-t.height};break;case Ol:p={x:a,y:e.y+e.height};break;case Dl:p={x:e.x+e.width,y:c};break;case ks:p={x:e.x-t.width,y:c};break;default:p={x:e.x,y:e.y}}var h=i?BR(i):null;if(h!=null){var f=h==="y"?"height":"width";switch(l){case wm:p[h]=p[h]-(e[f]/2-t[f]/2);break;case Iy:p[h]=p[h]+(e[f]/2-t[f]/2);break}}return p}function Oy(r,e){e===void 0&&(e={});var t=e,o=t.placement,i=o===void 0?r.placement:o,l=t.boundary,a=l===void 0?IZ:l,c=t.rootBoundary,p=c===void 0?CH:c,h=t.elementContext,f=h===void 0?qg:h,_=t.altBoundary,m=_===void 0?!1:_,v=t.padding,x=v===void 0?0:v,b=MH(typeof x!="number"?x:RH(x,bv)),A=f===qg?OZ:qg,k=r.rects.popper,E=r.elements[m?A:f],M=pee(Mm(E)?E:E.contextElement||Ih(r.elements.popper),a,p),R=Bm(r.elements.reference),I=IH({reference:R,element:k,strategy:"absolute",placement:i}),L=KA(Object.assign({},k,I)),F=f===qg?L:R,U={top:M.top-F.top+b.top,bottom:F.bottom-M.bottom+b.bottom,left:M.left-F.left+b.left,right:F.right-M.right+b.right},X=r.modifiersData.offset;if(f===qg&&X){var j=X[i];Object.keys(U).forEach(function(P){var z=[Dl,Ol].indexOf(P)>=0?1:-1,K=[bs,Ol].indexOf(P)>=0?"y":"x";U[P]+=j[K]*z})}return U}function dee(r,e){e===void 0&&(e={});var t=e,o=t.placement,i=t.boundary,l=t.rootBoundary,a=t.padding,c=t.flipVariations,p=t.allowedAutoPlacements,h=p===void 0?bH:p,f=Im(o),_=f?c?pD:pD.filter(function(x){return Im(x)===f}):bv,m=_.filter(function(x){return h.indexOf(x)>=0});m.length===0&&(m=_);var v=m.reduce(function(x,b){return x[b]=Oy(r,{placement:b,boundary:i,rootBoundary:l,padding:a})[Qa(b)],x},{});return Object.keys(v).sort(function(x,b){return v[x]-v[b]})}function fee(r){if(Qa(r)===MR)return[];var e=dE(r);return[mD(r),e,mD(e)]}function mee(r){var e=r.state,t=r.options,o=r.name;if(!e.modifiersData[o]._skip){for(var i=t.mainAxis,l=i===void 0?!0:i,a=t.altAxis,c=a===void 0?!0:a,p=t.fallbackPlacements,h=t.padding,f=t.boundary,_=t.rootBoundary,m=t.altBoundary,v=t.flipVariations,x=v===void 0?!0:v,b=t.allowedAutoPlacements,A=e.options.placement,k=Qa(A),E=k===A,M=p||(E||!x?[dE(A)]:fee(A)),R=[A].concat(M).reduce(function(Q,de){return Q.concat(Qa(de)===MR?dee(e,{placement:de,boundary:f,rootBoundary:_,padding:h,flipVariations:x,allowedAutoPlacements:b}):de)},[]),I=e.rects.reference,L=e.rects.popper,F=new Map,U=!0,X=R[0],j=0;j<R.length;j++){var P=R[j],z=Qa(P),K=Im(P)===wm,te=[bs,Ol].indexOf(z)>=0,oe=te?"width":"height",ee=Oy(e,{placement:P,boundary:f,rootBoundary:_,altBoundary:m,padding:h}),pe=te?K?Dl:ks:K?Ol:bs;I[oe]>L[oe]&&(pe=dE(pe));var ae=dE(pe),Ee=[];if(l&&Ee.push(ee[z]<=0),c&&Ee.push(ee[pe]<=0,ee[ae]<=0),Ee.every(function(Q){return Q})){X=P,U=!1;break}F.set(P,Ee)}if(U)for(var S=x?3:1,D=function(de){var je=R.find(function(We){var ze=F.get(We);if(ze)return ze.slice(0,de).every(function(Oe){return Oe})});if(je)return X=je,"break"},H=S;H>0;H--){var q=D(H);if(q==="break")break}e.placement!==X&&(e.modifiersData[o]._skip=!0,e.placement=X,e.reset=!0)}}var gee={name:"flip",enabled:!0,phase:"main",fn:mee,requiresIfExists:["offset"],data:{_skip:!1}};function _D(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function yD(r){return[bs,Dl,Ol,ks].some(function(e){return r[e]>=0})}function _ee(r){var e=r.state,t=r.name,o=e.rects.reference,i=e.rects.popper,l=e.modifiersData.preventOverflow,a=Oy(e,{elementContext:"reference"}),c=Oy(e,{altBoundary:!0}),p=_D(a,o),h=_D(c,i,l),f=yD(p),_=yD(h);e.modifiersData[t]={referenceClippingOffsets:p,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:_},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":_})}var yee={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_ee};function vee(r,e,t){var o=Qa(r),i=[ks,bs].indexOf(o)>=0?-1:1,l=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,a=l[0],c=l[1];return a=a||0,c=(c||0)*i,[ks,Dl].indexOf(o)>=0?{x:c,y:a}:{x:a,y:c}}function Tee(r){var e=r.state,t=r.options,o=r.name,i=t.offset,l=i===void 0?[0,0]:i,a=bH.reduce(function(f,_){return f[_]=vee(_,e.rects,l),f},{}),c=a[e.placement],p=c.x,h=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=p,e.modifiersData.popperOffsets.y+=h),e.modifiersData[o]=a}var Eee={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Tee};function xee(r){var e=r.state,t=r.name;e.modifiersData[t]=IH({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var See={name:"popperOffsets",enabled:!0,phase:"read",fn:xee,data:{}};function Cee(r){return r==="x"?"y":"x"}function bee(r){var e=r.state,t=r.options,o=r.name,i=t.mainAxis,l=i===void 0?!0:i,a=t.altAxis,c=a===void 0?!1:a,p=t.boundary,h=t.rootBoundary,f=t.altBoundary,_=t.padding,m=t.tether,v=m===void 0?!0:m,x=t.tetherOffset,b=x===void 0?0:x,A=Oy(e,{boundary:p,rootBoundary:h,padding:_,altBoundary:f}),k=Qa(e.placement),E=Im(e.placement),M=!E,R=BR(k),I=Cee(R),L=e.modifiersData.popperOffsets,F=e.rects.reference,U=e.rects.popper,X=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,j=typeof X=="number"?{mainAxis:X,altAxis:X}:Object.assign({mainAxis:0,altAxis:0},X),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(!!L){if(l){var K,te=R==="y"?bs:ks,oe=R==="y"?Ol:Dl,ee=R==="y"?"height":"width",pe=L[R],ae=pe+A[te],Ee=pe-A[oe],S=v?-U[ee]/2:0,D=E===wm?F[ee]:U[ee],H=E===wm?-U[ee]:-F[ee],q=e.elements.arrow,Q=v&&q?RR(q):{width:0,height:0},de=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:wH(),je=de[te],We=de[oe],ze=$_(0,F[ee],Q[ee]),Oe=M?F[ee]/2-S-ze-je-j.mainAxis:D-ze-je-j.mainAxis,Ye=M?-F[ee]/2+S+ze+We+j.mainAxis:H+ze+We+j.mainAxis,et=e.elements.arrow&&kv(e.elements.arrow),Re=et?R==="y"?et.clientTop||0:et.clientLeft||0:0,Te=(K=P==null?void 0:P[R])!=null?K:0,Le=pe+Oe-Te-Re,Ke=pe+Ye-Te,Ne=$_(v?lx(ae,Le):ae,pe,v?Hp(Ee,Ke):Ee);L[R]=Ne,z[R]=Ne-pe}if(c){var qe,lt=R==="x"?bs:ks,ue=R==="x"?Ol:Dl,rt=L[I],xt=I==="y"?"height":"width",ie=rt+A[lt],Z=rt-A[ue],B=[bs,ks].indexOf(k)!==-1,Ae=(qe=P==null?void 0:P[I])!=null?qe:0,Ue=B?ie:rt-F[xt]-U[xt]-Ae+j.altAxis,ge=B?rt+F[xt]+U[xt]-Ae-j.altAxis:Z,_e=v&&B?KZ(Ue,rt,ge):$_(v?Ue:ie,rt,v?ge:Z);L[I]=_e,z[I]=_e-rt}e.modifiersData[o]=z}}var kee={name:"preventOverflow",enabled:!0,phase:"main",fn:bee,requiresIfExists:["offset"]};function Aee(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function wee(r){return r===pa(r)||!Bl(r)?IR(r):Aee(r)}function Mee(r){var e=r.getBoundingClientRect(),t=Rm(e.width)/r.offsetWidth||1,o=Rm(e.height)/r.offsetHeight||1;return t!==1||o!==1}function Ree(r,e,t){t===void 0&&(t=!1);var o=Bl(e),i=Bl(e)&&Mee(e),l=Ih(e),a=Bm(r,i),c={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(o||!o&&!t)&&((lc(e)!=="body"||DR(l))&&(c=wee(e)),Bl(e)?(p=Bm(e,!0),p.x+=e.clientLeft,p.y+=e.clientTop):l&&(p.x=OR(l))),{x:a.left+c.scrollLeft-p.x,y:a.top+c.scrollTop-p.y,width:a.width,height:a.height}}function Bee(r){var e=new Map,t=new Set,o=[];r.forEach(function(l){e.set(l.name,l)});function i(l){t.add(l.name);var a=[].concat(l.requires||[],l.requiresIfExists||[]);a.forEach(function(c){if(!t.has(c)){var p=e.get(c);p&&i(p)}}),o.push(l)}return r.forEach(function(l){t.has(l.name)||i(l)}),o}function Iee(r){var e=Bee(r);return VZ.reduce(function(t,o){return t.concat(e.filter(function(i){return i.phase===o}))},[])}function Oee(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function Dee(r){var e=r.reduce(function(t,o){var i=t[o.name];return t[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,t},{});return Object.keys(e).map(function(t){return e[t]})}var vD={placement:"bottom",modifiers:[],strategy:"absolute"};function TD(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Lee(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,o=t===void 0?[]:t,i=e.defaultOptions,l=i===void 0?vD:i;return function(c,p,h){h===void 0&&(h=l);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},vD,l),modifiersData:{},elements:{reference:c,popper:p},attributes:{},styles:{}},_=[],m=!1,v={state:f,setOptions:function(k){var E=typeof k=="function"?k(f.options):k;b(),f.options=Object.assign({},l,f.options,E),f.scrollParents={reference:Mm(c)?P_(c):c.contextElement?P_(c.contextElement):[],popper:P_(p)};var M=Iee(Dee([].concat(o,f.options.modifiers)));return f.orderedModifiers=M.filter(function(R){return R.enabled}),x(),v.update()},forceUpdate:function(){if(!m){var k=f.elements,E=k.reference,M=k.popper;if(!!TD(E,M)){f.rects={reference:Ree(E,kv(M),f.options.strategy==="fixed"),popper:RR(M)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(j){return f.modifiersData[j.name]=Object.assign({},j.data)});for(var R=0;R<f.orderedModifiers.length;R++){if(f.reset===!0){f.reset=!1,R=-1;continue}var I=f.orderedModifiers[R],L=I.fn,F=I.options,U=F===void 0?{}:F,X=I.name;typeof L=="function"&&(f=L({state:f,options:U,name:X,instance:v})||f)}}}},update:Oee(function(){return new Promise(function(A){v.forceUpdate(),A(f)})}),destroy:function(){b(),m=!0}};if(!TD(c,p))return v;v.setOptions(h).then(function(A){!m&&h.onFirstUpdate&&h.onFirstUpdate(A)});function x(){f.orderedModifiers.forEach(function(A){var k=A.name,E=A.options,M=E===void 0?{}:E,R=A.effect;if(typeof R=="function"){var I=R({state:f,name:k,instance:v,options:M}),L=function(){};_.push(I||L)}})}function b(){_.forEach(function(A){return A()}),_=[]}return v}}var Nee=[iee,See,oee,XZ,Eee,gee,kee,ZZ,yee],$ee=Lee({defaultModifiers:Nee});const Pee=["anchorEl","children","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],Fee=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function Uee(r,e){if(e==="ltr")return r;switch(r){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return r}}function YA(r){return typeof r=="function"?r():r}const Hee={},Gee=G.exports.forwardRef(function(e,t){const{anchorEl:o,children:i,direction:l,disablePortal:a,modifiers:c,open:p,placement:h,popperOptions:f,popperRef:_,TransitionProps:m}=e,v=Km(e,Pee),x=G.exports.useRef(null),b=yo(x,t),A=G.exports.useRef(null),k=yo(A,_),E=G.exports.useRef(k);sc(()=>{E.current=k},[k]),G.exports.useImperativeHandle(_,()=>A.current,[]);const M=Uee(h,l),[R,I]=G.exports.useState(M);G.exports.useEffect(()=>{A.current&&A.current.forceUpdate()}),sc(()=>{if(!o||!p)return;const F=j=>{I(j.placement)};YA(o);let U=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:j})=>{F(j)}}];c!=null&&(U=U.concat(c)),f&&f.modifiers!=null&&(U=U.concat(f.modifiers));const X=$ee(YA(o),x.current,Zt({placement:M},f,{modifiers:U}));return E.current(X),()=>{X.destroy(),E.current(null)}},[o,a,c,p,f,M]);const L={placement:R};return m!==null&&(L.TransitionProps=m),Ge("div",Zt({ref:b,role:"tooltip"},v,{children:typeof i=="function"?i(L):i}))}),Vee=G.exports.forwardRef(function(e,t){const{anchorEl:o,children:i,container:l,direction:a="ltr",disablePortal:c=!1,keepMounted:p=!1,modifiers:h,open:f,placement:_="bottom",popperOptions:m=Hee,popperRef:v,style:x,transition:b=!1}=e,A=Km(e,Fee),[k,E]=G.exports.useState(!0),M=()=>{E(!1)},R=()=>{E(!0)};if(!p&&!f&&(!b||k))return null;const I=l||(o?Qr(YA(o)).body:void 0);return Ge(SH,{disablePortal:c,container:I,children:Ge(Gee,Zt({anchorEl:o,direction:a,disablePortal:c,modifiers:h,ref:t,open:b?!k:f,placement:_,popperOptions:m,popperRef:v},A,{style:Zt({position:"fixed",top:0,left:0,display:!f&&p&&(!b||k)?"none":null},x),TransitionProps:b?{in:f,onEnter:M,onExited:R}:null,children:i}))})});var Wee=Vee;function __(r){return On("MuiSlider",r)}const zee=En("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);var fE=zee;const Xee=r=>{const{open:e}=r;return{offset:Rt(e&&fE.valueLabelOpen),circle:fE.valueLabelCircle,label:fE.valueLabelLabel}};function OH(r){const{children:e,className:t,value:o,theme:i}=r,l=Xee(r);return G.exports.cloneElement(e,{className:Rt(e.props.className)},bo(G.exports.Fragment,{children:[e.props.children,Ge("span",{className:Rt(l.offset,t),theme:i,"aria-hidden":!0,children:Ge("span",{className:l.circle,children:Ge("span",{className:l.label,children:o})})})]}))}const jee=2;function DH(r,e){return r-e}function Qg(r,e,t){return r==null?e:Math.min(Math.max(e,r),t)}function ED(r,e){var t;const{index:o}=(t=r.reduce((i,l,a)=>{const c=Math.abs(e-l);return i===null||c<i.distance||c===i.distance?{distance:c,index:a}:i},null))!=null?t:{};return o}function b0(r,e){if(e.current!==void 0&&r.changedTouches){const t=r;for(let o=0;o<t.changedTouches.length;o+=1){const i=t.changedTouches[o];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:r.clientX,y:r.clientY}}function ax(r,e,t){return(r-e)*100/(t-e)}function Jee(r,e,t){return(t-e)*r+e}function Kee(r){if(Math.abs(r)<1){const t=r.toExponential().split("e-"),o=t[0].split(".")[1];return(o?o.length:0)+parseInt(t[1],10)}const e=r.toString().split(".")[1];return e?e.length:0}function Yee(r,e,t){const o=Math.round((r-t)/e)*e+t;return Number(o.toFixed(Kee(e)))}function xD({values:r,newValue:e,index:t}){const o=r.slice();return o[t]=e,o.sort(DH)}function k0({sliderRef:r,activeIndex:e,setActive:t}){var o,i;const l=Qr(r.current);if(!((o=r.current)!=null&&o.contains(l.activeElement))||Number(l==null||(i=l.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var a;(a=r.current)==null||a.querySelector(`[type="range"][data-index="${e}"]`).focus()}t&&t(e)}const qee={horizontal:{offset:r=>({left:`${r}%`}),leap:r=>({width:`${r}%`})},"horizontal-reverse":{offset:r=>({right:`${r}%`}),leap:r=>({width:`${r}%`})},vertical:{offset:r=>({bottom:`${r}%`}),leap:r=>({height:`${r}%`})}},Qee=r=>r;let A0;function Ob(){return A0===void 0&&(typeof CSS!="undefined"&&typeof CSS.supports=="function"?A0=CSS.supports("touch-action","none"):A0=!0),A0}function Zee(r){const{ref:e,"aria-labelledby":t,defaultValue:o,disableSwap:i=!1,disabled:l=!1,marks:a=!1,max:c=100,min:p=0,name:h,onChange:f,onChangeCommitted:_,orientation:m="horizontal",scale:v=Qee,step:x=1,tabIndex:b,value:A,isRtl:k=!1}=r,E=G.exports.useRef(),[M,R]=G.exports.useState(-1),[I,L]=G.exports.useState(-1),[F,U]=G.exports.useState(!1),X=G.exports.useRef(0),[j,P]=sx({controlled:A,default:o!=null?o:p,name:"Slider"}),z=f&&((B,Ae,Ue)=>{const ge=B.nativeEvent||B,_e=new ge.constructor(ge.type,ge);Object.defineProperty(_e,"target",{writable:!0,value:{value:Ae,name:h}}),f(_e,Ae,Ue)}),K=Array.isArray(j);let te=K?j.slice().sort(DH):[j];te=te.map(B=>Qg(B,p,c));const oe=a===!0&&x!==null?[...Array(Math.floor((c-p)/x)+1)].map((B,Ae)=>({value:p+x*Ae})):a||[],ee=oe.map(B=>B.value),{isFocusVisibleRef:pe,onBlur:ae,onFocus:Ee,ref:S}=TR(),[D,H]=G.exports.useState(-1),q=G.exports.useRef(),Q=yo(S,q),de=yo(e,Q),je=B=>Ae=>{var Ue;const ge=Number(Ae.currentTarget.getAttribute("data-index"));Ee(Ae),pe.current===!0&&H(ge),L(ge),B==null||(Ue=B.onFocus)==null||Ue.call(B,Ae)},We=B=>Ae=>{var Ue;ae(Ae),pe.current===!1&&H(-1),L(-1),B==null||(Ue=B.onBlur)==null||Ue.call(B,Ae)};sc(()=>{if(l&&q.current.contains(document.activeElement)){var B;(B=document.activeElement)==null||B.blur()}},[l]),l&&M!==-1&&R(-1),l&&D!==-1&&H(-1);const ze=B=>Ae=>{var Ue;(Ue=B.onChange)==null||Ue.call(B,Ae);const ge=Number(Ae.currentTarget.getAttribute("data-index")),_e=te[ge],ke=ee.indexOf(_e);let me=Ae.target.valueAsNumber;if(oe&&x==null&&(me=me<_e?ee[ke-1]:ee[ke+1]),me=Qg(me,p,c),oe&&x==null){const Ce=ee.indexOf(te[ge]);me=me<te[ge]?ee[Ce-1]:ee[Ce+1]}if(K){i&&(me=Qg(me,te[ge-1]||-1/0,te[ge+1]||1/0));const Ce=me;me=xD({values:te,newValue:me,index:ge});let le=ge;i||(le=me.indexOf(Ce)),k0({sliderRef:q,activeIndex:le})}P(me),H(ge),z&&z(Ae,me,ge),_&&_(Ae,me)},Oe=G.exports.useRef();let Ye=m;k&&m==="horizontal"&&(Ye+="-reverse");const et=({finger:B,move:Ae=!1,values:Ue})=>{const{current:ge}=q,{width:_e,height:ke,bottom:me,left:Ce}=ge.getBoundingClientRect();let le;Ye.indexOf("vertical")===0?le=(me-B.y)/ke:le=(B.x-Ce)/_e,Ye.indexOf("-reverse")!==-1&&(le=1-le);let W;if(W=Jee(le,p,c),x)W=Yee(W,x,p);else{const we=ED(ee,W);W=ee[we]}W=Qg(W,p,c);let Me=0;if(K){Ae?Me=Oe.current:Me=ED(Ue,W),i&&(W=Qg(W,Ue[Me-1]||-1/0,Ue[Me+1]||1/0));const we=W;W=xD({values:Ue,newValue:W,index:Me}),i&&Ae||(Me=W.indexOf(we),Oe.current=Me)}return{newValue:W,activeIndex:Me}},Re=Js(B=>{const Ae=b0(B,E);if(!Ae)return;if(X.current+=1,B.type==="mousemove"&&B.buttons===0){Te(B);return}const{newValue:Ue,activeIndex:ge}=et({finger:Ae,move:!0,values:te});k0({sliderRef:q,activeIndex:ge,setActive:R}),P(Ue),!F&&X.current>jee&&U(!0),z&&z(B,Ue,ge)}),Te=Js(B=>{const Ae=b0(B,E);if(U(!1),!Ae)return;const{newValue:Ue}=et({finger:Ae,values:te});R(-1),B.type==="touchend"&&L(-1),_&&_(B,Ue),E.current=void 0,Ke()}),Le=Js(B=>{Ob()||B.preventDefault();const Ae=B.changedTouches[0];Ae!=null&&(E.current=Ae.identifier);const Ue=b0(B,E);if(Ue!==!1){const{newValue:_e,activeIndex:ke}=et({finger:Ue,values:te});k0({sliderRef:q,activeIndex:ke,setActive:R}),P(_e),z&&z(B,_e,ke)}X.current=0;const ge=Qr(q.current);ge.addEventListener("touchmove",Re),ge.addEventListener("touchend",Te)}),Ke=G.exports.useCallback(()=>{const B=Qr(q.current);B.removeEventListener("mousemove",Re),B.removeEventListener("mouseup",Te),B.removeEventListener("touchmove",Re),B.removeEventListener("touchend",Te)},[Te,Re]);G.exports.useEffect(()=>{const{current:B}=q;return B.addEventListener("touchstart",Le,{passive:Ob()}),()=>{B.removeEventListener("touchstart",Le,{passive:Ob()}),Ke()}},[Ke,Le]),G.exports.useEffect(()=>{l&&Ke()},[l,Ke]);const Ne=B=>Ae=>{var Ue;if((Ue=B.onMouseDown)==null||Ue.call(B,Ae),Ae.defaultPrevented||Ae.button!==0)return;Ae.preventDefault();const ge=b0(Ae,E);if(ge!==!1){const{newValue:ke,activeIndex:me}=et({finger:ge,values:te});k0({sliderRef:q,activeIndex:me,setActive:R}),P(ke),z&&z(Ae,ke,me)}X.current=0;const _e=Qr(q.current);_e.addEventListener("mousemove",Re),_e.addEventListener("mouseup",Te)},qe=ax(K?te[0]:p,p,c),lt=ax(te[te.length-1],p,c)-qe,ue=B=>{const Ae={onMouseDown:Ne(B||{})},Ue=Zt({},B,Ae);return Zt({ref:de},Ue)},rt=B=>Ae=>{var Ue;(Ue=B.onMouseOver)==null||Ue.call(B,Ae);const ge=Number(Ae.currentTarget.getAttribute("data-index"));L(ge)},xt=B=>Ae=>{var Ue;(Ue=B.onMouseLeave)==null||Ue.call(B,Ae),L(-1)};return{axis:Ye,axisProps:qee,getRootProps:ue,getHiddenInputProps:B=>{const Ae={onChange:ze(B||{}),onFocus:je(B||{}),onBlur:We(B||{})},Ue=Zt({},B,Ae);return Zt({tabIndex:b,"aria-labelledby":t,"aria-orientation":m,"aria-valuemax":v(c),"aria-valuemin":v(p),name:h,type:"range",min:r.min,max:r.max,step:r.step,disabled:l},Ue,{style:Zt({},K7,{direction:k?"rtl":"ltr",width:"100%",height:"100%"})})},getThumbProps:B=>{const Ae={onMouseOver:rt(B||{}),onMouseLeave:xt(B||{})},Ue=Zt({},B,Ae);return Zt({},Ue)},dragging:F,marks:oe,values:te,active:M,focusVisible:D,open:I,range:K,trackOffset:qe,trackLeap:lt}}const ete=["aria-label","aria-valuetext","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"],SD=r=>r,tte=r=>{const{disabled:e,dragging:t,marked:o,orientation:i,track:l,classes:a}=r;return Ln({root:["root",e&&"disabled",t&&"dragging",o&&"marked",i==="vertical"&&"vertical",l==="inverted"&&"trackInverted",l===!1&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},__,a)},nte=({children:r})=>r,ote=G.exports.forwardRef(function(e,t){var o,i,l,a,c,p,h;const{"aria-label":f,"aria-valuetext":_,className:m,component:v,classes:x,disableSwap:b=!1,disabled:A=!1,getAriaLabel:k,getAriaValueText:E,marks:M=!1,max:R=100,min:I=0,onMouseDown:L,orientation:F="horizontal",scale:U=SD,step:X=1,track:j="normal",valueLabelDisplay:P="off",valueLabelFormat:z=SD,isRtl:K=!1,components:te={},componentsProps:oe={}}=e,ee=Km(e,ete),pe=Zt({},e,{mark:M,classes:x,disabled:A,isRtl:K,max:R,min:I,orientation:F,scale:U,step:X,track:j,valueLabelDisplay:P,valueLabelFormat:z}),{axisProps:ae,getRootProps:Ee,getHiddenInputProps:S,getThumbProps:D,open:H,active:q,axis:Q,range:de,focusVisible:je,dragging:We,marks:ze,values:Oe,trackOffset:Ye,trackLeap:et}=Zee(Zt({},pe,{ref:t}));pe.marked=ze.length>0&&ze.some(Ce=>Ce.label),pe.dragging=We;const Re=(o=v!=null?v:te.Root)!=null?o:"span",Te=yl(Re,Zt({},ee,oe.root),pe),Le=(i=te.Rail)!=null?i:"span",Ke=yl(Le,oe.rail,pe),Ne=(l=te.Track)!=null?l:"span",qe=yl(Ne,oe.track,pe),lt=Zt({},ae[Q].offset(Ye),ae[Q].leap(et)),ue=(a=te.Thumb)!=null?a:"span",rt=yl(ue,oe.thumb,pe),xt=(c=te.ValueLabel)!=null?c:OH,ie=yl(xt,oe.valueLabel,pe),Z=(p=te.Mark)!=null?p:"span",B=yl(Z,oe.mark,pe),Ae=(h=te.MarkLabel)!=null?h:"span",Ue=yl(Ae,oe.markLabel,pe),ge=te.Input||"input",_e=yl(ge,oe.input,pe),ke=S(),me=tte(pe);return bo(Re,Zt({},Te,Ee({onMouseDown:L}),{className:Rt(me.root,Te.className,m),children:[Ge(Le,Zt({},Ke,{className:Rt(me.rail,Ke.className)})),Ge(Ne,Zt({},qe,{className:Rt(me.track,qe.className),style:Zt({},lt,qe.style)})),ze.map((Ce,le)=>{const W=ax(Ce.value,I,R),Me=ae[Q].offset(W);let we;return j===!1?we=Oe.indexOf(Ce.value)!==-1:we=j==="normal"&&(de?Ce.value>=Oe[0]&&Ce.value<=Oe[Oe.length-1]:Ce.value<=Oe[0])||j==="inverted"&&(de?Ce.value<=Oe[0]||Ce.value>=Oe[Oe.length-1]:Ce.value>=Oe[0]),bo(G.exports.Fragment,{children:[Ge(Z,Zt({"data-index":le},B,!Ws(Z)&&{markActive:we},{style:Zt({},Me,B.style),className:Rt(me.mark,B.className,we&&me.markActive)})),Ce.label!=null?Ge(Ae,Zt({"aria-hidden":!0,"data-index":le},Ue,!Ws(Ae)&&{markLabelActive:we},{style:Zt({},Me,Ue.style),className:Rt(me.markLabel,Ue.className,we&&me.markLabelActive),children:Ce.label})):null]},Ce.value)}),Oe.map((Ce,le)=>{const W=ax(Ce,I,R),Me=ae[Q].offset(W),we=P==="off"?nte:xt;return Ge(G.exports.Fragment,{children:Ge(we,Zt({},!Ws(we)&&{valueLabelFormat:z,valueLabelDisplay:P,value:typeof z=="function"?z(U(Ce),le):z,index:le,open:H===le||q===le||P==="on",disabled:A},ie,{className:Rt(me.valueLabel,ie.className),children:Ge(ue,Zt({"data-index":le},rt,D(),{className:Rt(me.thumb,rt.className,q===le&&me.active,je===le&&me.focusVisible)},!Ws(ue)&&{ownerState:Zt({},pe,rt.ownerState)},{style:Zt({},Me,{pointerEvents:b&&q!==le?"none":void 0},rt.style),children:Ge(ge,Zt({},ke,{"data-index":le,"aria-label":k?k(le):f,"aria-valuenow":U(Ce),"aria-valuetext":E?E(U(Ce),le):_,value:Oe[le]},!Ws(ge)&&{ownerState:Zt({},pe,_e.ownerState)},_e,{style:Zt({},ke.style,_e.style)}))}))}))},le)})]}))});var rte=ote;const ite=["onChange","maxRows","minRows","style","value"];function w0(r,e){return parseInt(r[e],10)||0}const ste={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}},lte=G.exports.forwardRef(function(e,t){const{onChange:o,maxRows:i,minRows:l=1,style:a,value:c}=e,p=Km(e,ite),{current:h}=G.exports.useRef(c!=null),f=G.exports.useRef(null),_=yo(t,f),m=G.exports.useRef(null),v=G.exports.useRef(0),[x,b]=G.exports.useState({}),A=G.exports.useCallback(()=>{const E=f.current,R=Yc(E).getComputedStyle(E);if(R.width==="0px")return;const I=m.current;I.style.width=R.width,I.value=E.value||e.placeholder||"x",I.value.slice(-1)===`
`&&(I.value+=" ");const L=R["box-sizing"],F=w0(R,"padding-bottom")+w0(R,"padding-top"),U=w0(R,"border-bottom-width")+w0(R,"border-top-width"),X=I.scrollHeight;I.value="x";const j=I.scrollHeight;let P=X;l&&(P=Math.max(Number(l)*j,P)),i&&(P=Math.min(Number(i)*j,P)),P=Math.max(P,j);const z=P+(L==="border-box"?F+U:0),K=Math.abs(P-X)<=1;b(te=>v.current<20&&(z>0&&Math.abs((te.outerHeightStyle||0)-z)>1||te.overflow!==K)?(v.current+=1,{overflow:K,outerHeightStyle:z}):te)},[i,l,e.placeholder]);G.exports.useEffect(()=>{const E=By(()=>{v.current=0,A()}),M=Yc(f.current);M.addEventListener("resize",E);let R;return typeof ResizeObserver!="undefined"&&(R=new ResizeObserver(E),R.observe(f.current)),()=>{E.clear(),M.removeEventListener("resize",E),R&&R.disconnect()}},[A]),sc(()=>{A()}),G.exports.useEffect(()=>{v.current=0},[c]);const k=E=>{v.current=0,h||A(),o&&o(E)};return bo(G.exports.Fragment,{children:[Ge("textarea",Zt({value:c,onChange:k,ref:_,rows:l,style:Zt({height:x.outerHeightStyle,overflow:x.overflow?"hidden":null},a)},p)),Ge("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:m,tabIndex:-1,style:Zt({},ste.shadow,a,{padding:0})})]})});var ate=lte;function cte(r,e,t){return he({toolbar:{minHeight:56,[`${r.up("xs")} and (orientation: landscape)`]:{minHeight:48},[r.up("sm")]:{minHeight:64}}},t)}const ute=["mode","contrastThreshold","tonalOffset"],CD={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ay.white,default:Ay.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Db={text:{primary:Ay.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ay.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function bD(r,e,t,o){const i=o.light||o,l=o.dark||o*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=xH(r.main,i):e==="dark"&&(r.dark=EH(r.main,l)))}function hte(r="light"){return r==="dark"?{main:rf[200],light:rf[50],dark:rf[400]}:{main:rf[700],light:rf[400],dark:rf[800]}}function pte(r="light"){return r==="dark"?{main:of[200],light:of[50],dark:of[400]}:{main:of[500],light:of[300],dark:of[700]}}function dte(r="light"){return r==="dark"?{main:nf[500],light:nf[300],dark:nf[700]}:{main:nf[700],light:nf[400],dark:nf[800]}}function fte(r="light"){return r==="dark"?{main:sf[400],light:sf[300],dark:sf[700]}:{main:sf[700],light:sf[500],dark:sf[900]}}function mte(r="light"){return r==="dark"?{main:lf[400],light:lf[300],dark:lf[700]}:{main:lf[800],light:lf[500],dark:lf[900]}}function gte(r="light"){return r==="dark"?{main:Jg[400],light:Jg[300],dark:Jg[700]}:{main:"#ed6c02",light:Jg[500],dark:Jg[900]}}function _te(r){const{mode:e="light",contrastThreshold:t=3,tonalOffset:o=.2}=r,i=jt(r,ute),l=r.primary||hte(e),a=r.secondary||pte(e),c=r.error||dte(e),p=r.info||fte(e),h=r.success||mte(e),f=r.warning||gte(e);function _(b){return tZ(b,Db.text.primary)>=t?Db.text.primary:CD.text.primary}const m=({color:b,name:A,mainShade:k=500,lightShade:E=300,darkShade:M=700})=>{if(b=he({},b),!b.main&&b[k]&&(b.main=b[k]),!b.hasOwnProperty("main"))throw new Error(ed(11,A?` (${A})`:"",k));if(typeof b.main!="string")throw new Error(ed(12,A?` (${A})`:"",JSON.stringify(b.main)));return bD(b,"light",E,o),bD(b,"dark",M,o),b.contrastText||(b.contrastText=_(b.main)),b},v={dark:Db,light:CD};return Rl(he({common:Ay,mode:e,primary:m({color:l,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:c,name:"error"}),warning:m({color:f,name:"warning"}),info:m({color:p,name:"info"}),success:m({color:h,name:"success"}),grey:MY,contrastThreshold:t,getContrastText:_,augmentColor:m,tonalOffset:o},v[e]),i)}const yte=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function vte(r){return Math.round(r*1e5)/1e5}const kD={textTransform:"uppercase"},AD='"Roboto", "Helvetica", "Arial", sans-serif';function Tte(r,e){const t=typeof e=="function"?e(r):e,{fontFamily:o=AD,fontSize:i=14,fontWeightLight:l=300,fontWeightRegular:a=400,fontWeightMedium:c=500,fontWeightBold:p=700,htmlFontSize:h=16,allVariants:f,pxToRem:_}=t,m=jt(t,yte),v=i/14,x=_||(k=>`${k/h*v}rem`),b=(k,E,M,R,I)=>he({fontFamily:o,fontWeight:k,fontSize:x(E),lineHeight:M},o===AD?{letterSpacing:`${vte(R/E)}em`}:{},I,f),A={h1:b(l,96,1.167,-1.5),h2:b(l,60,1.2,-.5),h3:b(a,48,1.167,0),h4:b(a,34,1.235,.25),h5:b(a,24,1.334,0),h6:b(c,20,1.6,.15),subtitle1:b(a,16,1.75,.15),subtitle2:b(c,14,1.57,.1),body1:b(a,16,1.5,.15),body2:b(a,14,1.43,.15),button:b(c,14,1.75,.4,kD),caption:b(a,12,1.66,.4),overline:b(a,12,2.66,1,kD)};return Rl(he({htmlFontSize:h,pxToRem:x,fontFamily:o,fontSize:i,fontWeightLight:l,fontWeightRegular:a,fontWeightMedium:c,fontWeightBold:p},A),m,{clone:!1})}const Ete=.2,xte=.14,Ste=.12;function Bo(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${Ete})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${xte})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${Ste})`].join(",")}const Cte=["none",Bo(0,2,1,-1,0,1,1,0,0,1,3,0),Bo(0,3,1,-2,0,2,2,0,0,1,5,0),Bo(0,3,3,-2,0,3,4,0,0,1,8,0),Bo(0,2,4,-1,0,4,5,0,0,1,10,0),Bo(0,3,5,-1,0,5,8,0,0,1,14,0),Bo(0,3,5,-1,0,6,10,0,0,1,18,0),Bo(0,4,5,-2,0,7,10,1,0,2,16,1),Bo(0,5,5,-3,0,8,10,1,0,3,14,2),Bo(0,5,6,-3,0,9,12,1,0,3,16,2),Bo(0,6,6,-3,0,10,14,1,0,4,18,3),Bo(0,6,7,-4,0,11,15,1,0,4,20,3),Bo(0,7,8,-4,0,12,17,2,0,5,22,4),Bo(0,7,8,-4,0,13,19,2,0,5,24,4),Bo(0,7,9,-4,0,14,21,2,0,5,26,4),Bo(0,8,9,-5,0,15,22,2,0,6,28,5),Bo(0,8,10,-5,0,16,24,2,0,6,30,5),Bo(0,8,11,-5,0,17,26,2,0,6,32,5),Bo(0,9,11,-5,0,18,28,2,0,7,34,6),Bo(0,9,12,-6,0,19,29,2,0,7,36,6),Bo(0,10,13,-6,0,20,31,3,0,8,38,7),Bo(0,10,13,-6,0,21,33,3,0,8,40,7),Bo(0,10,14,-6,0,22,35,3,0,8,42,7),Bo(0,11,14,-7,0,23,36,3,0,9,44,8),Bo(0,11,15,-7,0,24,38,3,0,9,46,8)];var bte=Cte;const kte=["duration","easing","delay"],Ate={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Dy={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function wD(r){return`${Math.round(r)}ms`}function wte(r){if(!r)return 0;const e=r/36;return Math.round((4+15*e**.25+e/5)*10)}function Mte(r){const e=he({},Ate,r.easing),t=he({},Dy,r.duration);return he({getAutoHeightDuration:wte,create:(i=["all"],l={})=>{const{duration:a=t.standard,easing:c=e.easeInOut,delay:p=0}=l;return jt(l,kte),(Array.isArray(i)?i:[i]).map(h=>`${h} ${typeof a=="string"?a:wD(a)} ${c} ${typeof p=="string"?p:wD(p)}`).join(",")}},r,{easing:e,duration:t})}const Rte={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var Bte=Rte;const Ite=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Ote(r={},...e){const{mixins:t={},palette:o={},transitions:i={},typography:l={}}=r,a=jt(r,Ite),c=_te(o),p=AR(r);let h=Rl(p,{mixins:cte(p.breakpoints,p.spacing,t),palette:c,shadows:bte.slice(),typography:Tte(c,l),transitions:Mte(i),zIndex:he({},Bte)});return h=Rl(h,a),h=e.reduce((f,_)=>Rl(f,_),h),h}const Dte=Ote();var PS=Dte;function pd(){return vH(PS)}function Nn({props:r,name:e}){return QQ({props:r,name:e,defaultTheme:PS})}const uc=r=>L_(r)&&r!=="classes",LR=L_,Lte=YQ({defaultTheme:PS,rootShouldForwardProp:uc});var St=Lte;function Nte(r){return On("MuiSvgIcon",r)}En("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const $te=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Pte=r=>{const{color:e,fontSize:t,classes:o}=r,i={root:["root",e!=="inherit"&&`color${Dt(e)}`,`fontSize${Dt(t)}`]};return Ln(i,Nte,o)},Fte=St("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="inherit"&&e[`color${Dt(t.color)}`],e[`fontSize${Dt(t.fontSize)}`]]}})(({theme:r,ownerState:e})=>{var t,o,i,l,a,c,p,h,f,_,m,v,x,b,A,k,E;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(t=r.transitions)==null||(o=t.create)==null?void 0:o.call(t,"fill",{duration:(i=r.transitions)==null||(l=i.duration)==null?void 0:l.shorter}),fontSize:{inherit:"inherit",small:((a=r.typography)==null||(c=a.pxToRem)==null?void 0:c.call(a,20))||"1.25rem",medium:((p=r.typography)==null||(h=p.pxToRem)==null?void 0:h.call(p,24))||"1.5rem",large:((f=r.typography)==null||(_=f.pxToRem)==null?void 0:_.call(f,35))||"2.1875"}[e.fontSize],color:(m=(v=r.palette)==null||(x=v[e.color])==null?void 0:x.main)!=null?m:{action:(b=r.palette)==null||(A=b.action)==null?void 0:A.active,disabled:(k=r.palette)==null||(E=k.action)==null?void 0:E.disabled,inherit:void 0}[e.color]}}),LH=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiSvgIcon"}),{children:i,className:l,color:a="inherit",component:c="svg",fontSize:p="medium",htmlColor:h,inheritViewBox:f=!1,titleAccess:_,viewBox:m="0 0 24 24"}=o,v=jt(o,$te),x=he({},o,{color:a,component:c,fontSize:p,inheritViewBox:f,viewBox:m}),b={};f||(b.viewBox=m);const A=Pte(x);return bo(Fte,he({as:c,className:Rt(A.root,l),ownerState:x,focusable:"false",color:h,"aria-hidden":_?void 0:!0,role:_?"img":void 0,ref:t},b,v,{children:[i,_?Ge("title",{children:_}):null]}))});LH.muiName="SvgIcon";var MD=LH;function Cr(r,e){const t=(o,i)=>Ge(MD,he({"data-testid":`${e}Icon`,ref:i},o,{children:r}));return t.muiName=MD.muiName,G.exports.memo(G.exports.forwardRef(t))}function NH(r,e){if(r==null)return{};var t={},o=Object.keys(r),i,l;for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function qA(r,e){return qA=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o},qA(r,e)}function $H(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,qA(r,e)}var RD={disabled:!1},cx=zt.createContext(null),y_="unmounted",fp="exited",mp="entering",_f="entered",QA="exiting",ru=function(r){$H(e,r);function e(o,i){var l;l=r.call(this,o,i)||this;var a=i,c=a&&!a.isMounting?o.enter:o.appear,p;return l.appearStatus=null,o.in?c?(p=fp,l.appearStatus=mp):p=_f:o.unmountOnExit||o.mountOnEnter?p=y_:p=fp,l.state={status:p},l.nextCallback=null,l}e.getDerivedStateFromProps=function(i,l){var a=i.in;return a&&l.status===y_?{status:fp}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var l=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==mp&&a!==_f&&(l=mp):(a===mp||a===_f)&&(l=QA)}this.updateStatus(!1,l)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,l,a,c;return l=a=c=i,i!=null&&typeof i!="number"&&(l=i.exit,a=i.enter,c=i.appear!==void 0?i.appear:a),{exit:l,enter:a,appear:c}},t.updateStatus=function(i,l){i===void 0&&(i=!1),l!==null?(this.cancelNextCallback(),l===mp?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===fp&&this.setState({status:y_})},t.performEnter=function(i){var l=this,a=this.props.enter,c=this.context?this.context.isMounting:i,p=this.props.nodeRef?[c]:[FC.findDOMNode(this),c],h=p[0],f=p[1],_=this.getTimeouts(),m=c?_.appear:_.enter;if(!i&&!a||RD.disabled){this.safeSetState({status:_f},function(){l.props.onEntered(h)});return}this.props.onEnter(h,f),this.safeSetState({status:mp},function(){l.props.onEntering(h,f),l.onTransitionEnd(m,function(){l.safeSetState({status:_f},function(){l.props.onEntered(h,f)})})})},t.performExit=function(){var i=this,l=this.props.exit,a=this.getTimeouts(),c=this.props.nodeRef?void 0:FC.findDOMNode(this);if(!l||RD.disabled){this.safeSetState({status:fp},function(){i.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:QA},function(){i.props.onExiting(c),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:fp},function(){i.props.onExited(c)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,l){l=this.setNextCallback(l),this.setState(i,l)},t.setNextCallback=function(i){var l=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,l.nextCallback=null,i(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(i,l){this.setNextCallback(l);var a=this.props.nodeRef?this.props.nodeRef.current:FC.findDOMNode(this),c=i==null&&!this.props.addEndListener;if(!a||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],h=p[0],f=p[1];this.props.addEndListener(h,f)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===y_)return null;var l=this.props,a=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var c=NH(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return zt.createElement(cx.Provider,{value:null},typeof a=="function"?a(i,c):zt.cloneElement(zt.Children.only(a),c))},e}(zt.Component);ru.contextType=cx;ru.propTypes={};function cf(){}ru.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cf,onEntering:cf,onEntered:cf,onExit:cf,onExiting:cf,onExited:cf};ru.UNMOUNTED=y_;ru.EXITED=fp;ru.ENTERING=mp;ru.ENTERED=_f;ru.EXITING=QA;var PH=ru;function Ute(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function NR(r,e){var t=function(l){return e&&G.exports.isValidElement(l)?e(l):l},o=Object.create(null);return r&&G.exports.Children.map(r,function(i){return i}).forEach(function(i){o[i.key]=t(i)}),o}function Hte(r,e){r=r||{},e=e||{};function t(f){return f in e?e[f]:r[f]}var o=Object.create(null),i=[];for(var l in r)l in e?i.length&&(o[l]=i,i=[]):i.push(l);var a,c={};for(var p in e){if(o[p])for(a=0;a<o[p].length;a++){var h=o[p][a];c[o[p][a]]=t(h)}c[p]=t(p)}for(a=0;a<i.length;a++)c[i[a]]=t(i[a]);return c}function Ap(r,e,t){return t[e]!=null?t[e]:r.props[e]}function Gte(r,e){return NR(r.children,function(t){return G.exports.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Ap(t,"appear",r),enter:Ap(t,"enter",r),exit:Ap(t,"exit",r)})})}function Vte(r,e,t){var o=NR(r.children),i=Hte(e,o);return Object.keys(i).forEach(function(l){var a=i[l];if(!!G.exports.isValidElement(a)){var c=l in e,p=l in o,h=e[l],f=G.exports.isValidElement(h)&&!h.props.in;p&&(!c||f)?i[l]=G.exports.cloneElement(a,{onExited:t.bind(null,a),in:!0,exit:Ap(a,"exit",r),enter:Ap(a,"enter",r)}):!p&&c&&!f?i[l]=G.exports.cloneElement(a,{in:!1}):p&&c&&G.exports.isValidElement(h)&&(i[l]=G.exports.cloneElement(a,{onExited:t.bind(null,a),in:h.props.in,exit:Ap(a,"exit",r),enter:Ap(a,"enter",r)}))}}),i}var Wte=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},zte={component:"div",childFactory:function(e){return e}},$R=function(r){$H(e,r);function e(o,i){var l;l=r.call(this,o,i)||this;var a=l.handleExited.bind(Ute(l));return l.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},l}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,l){var a=l.children,c=l.handleExited,p=l.firstRender;return{children:p?Gte(i,c):Vte(i,a,c),firstRender:!1}},t.handleExited=function(i,l){var a=NR(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(l),this.mounted&&this.setState(function(c){var p=ol({},c.children);return delete p[i.key],{children:p}}))},t.render=function(){var i=this.props,l=i.component,a=i.childFactory,c=NH(i,["component","childFactory"]),p=this.state.contextValue,h=Wte(this.state.children).map(a);return delete c.appear,delete c.enter,delete c.exit,l===null?zt.createElement(cx.Provider,{value:p},h):zt.createElement(cx.Provider,{value:p},zt.createElement(l,c,h))},e}(zt.Component);$R.propTypes={};$R.defaultProps=zte;var Xte=$R;const FH=r=>r.scrollTop;function ux(r,e){var t,o;const{timeout:i,easing:l,style:a={}}=r;return{duration:(t=a.transitionDuration)!=null?t:typeof i=="number"?i:i[e.mode]||0,easing:(o=a.transitionTimingFunction)!=null?o:typeof l=="object"?l[e.mode]:l,delay:a.transitionDelay}}function jte(r){return On("MuiPaper",r)}En("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Jte=["className","component","elevation","square","variant"],BD=r=>{let e;return r<1?e=5.11916*r**2:e=4.5*Math.log(r+1)+2,(e/100).toFixed(2)},Kte=r=>{const{square:e,elevation:t,variant:o,classes:i}=r,l={root:["root",o,!e&&"rounded",o==="elevation"&&`elevation${t}`]};return Ln(l,jte,i)},Yte=St("div",{name:"MuiPaper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:r,ownerState:e})=>he({backgroundColor:r.palette.background.paper,color:r.palette.text.primary,transition:r.transitions.create("box-shadow")},!e.square&&{borderRadius:r.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${r.palette.divider}`},e.variant==="elevation"&&he({boxShadow:r.shadows[e.elevation]},r.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Ni("#fff",BD(e.elevation))}, ${Ni("#fff",BD(e.elevation))})`}))),qte=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiPaper"}),{className:i,component:l="div",elevation:a=1,square:c=!1,variant:p="elevation"}=o,h=jt(o,Jte),f=he({},o,{component:l,elevation:a,square:c,variant:p}),_=Kte(f);return Ge(Yte,he({as:l,ownerState:f,className:Rt(_.root,i),ref:t},h))});var FS=qte;function Qte(r){const{className:e,classes:t,pulsate:o=!1,rippleX:i,rippleY:l,rippleSize:a,in:c,onExited:p,timeout:h}=r,[f,_]=G.exports.useState(!1),m=Rt(e,t.ripple,t.rippleVisible,o&&t.ripplePulsate),v={width:a,height:a,top:-(a/2)+l,left:-(a/2)+i},x=Rt(t.child,f&&t.childLeaving,o&&t.childPulsate);return!c&&!f&&_(!0),G.exports.useEffect(()=>{if(!c&&p!=null){const b=setTimeout(p,h);return()=>{clearTimeout(b)}}},[p,c,h]),Ge("span",{className:m,style:v,children:Ge("span",{className:x})})}const Zte=En("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var vl=Zte;const ene=["center","classes","className"];let US=r=>r,ID,OD,DD,LD;const ZA=550,tne=80,nne=_R(ID||(ID=US`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),one=_R(OD||(OD=US`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),rne=_R(DD||(DD=US`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),ine=St("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),sne=St(Qte,{name:"MuiTouchRipple",slot:"Ripple"})(LD||(LD=US`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),vl.rippleVisible,nne,ZA,({theme:r})=>r.transitions.easing.easeInOut,vl.ripplePulsate,({theme:r})=>r.transitions.duration.shorter,vl.child,vl.childLeaving,one,ZA,({theme:r})=>r.transitions.easing.easeInOut,vl.childPulsate,rne,({theme:r})=>r.transitions.easing.easeInOut),lne=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:l={},className:a}=o,c=jt(o,ene),[p,h]=G.exports.useState([]),f=G.exports.useRef(0),_=G.exports.useRef(null);G.exports.useEffect(()=>{_.current&&(_.current(),_.current=null)},[p]);const m=G.exports.useRef(!1),v=G.exports.useRef(null),x=G.exports.useRef(null),b=G.exports.useRef(null);G.exports.useEffect(()=>()=>{clearTimeout(v.current)},[]);const A=G.exports.useCallback(R=>{const{pulsate:I,rippleX:L,rippleY:F,rippleSize:U,cb:X}=R;h(j=>[...j,Ge(sne,{classes:{ripple:Rt(l.ripple,vl.ripple),rippleVisible:Rt(l.rippleVisible,vl.rippleVisible),ripplePulsate:Rt(l.ripplePulsate,vl.ripplePulsate),child:Rt(l.child,vl.child),childLeaving:Rt(l.childLeaving,vl.childLeaving),childPulsate:Rt(l.childPulsate,vl.childPulsate)},timeout:ZA,pulsate:I,rippleX:L,rippleY:F,rippleSize:U},f.current)]),f.current+=1,_.current=X},[l]),k=G.exports.useCallback((R={},I={},L)=>{const{pulsate:F=!1,center:U=i||I.pulsate,fakeElement:X=!1}=I;if(R.type==="mousedown"&&m.current){m.current=!1;return}R.type==="touchstart"&&(m.current=!0);const j=X?null:b.current,P=j?j.getBoundingClientRect():{width:0,height:0,left:0,top:0};let z,K,te;if(U||R.clientX===0&&R.clientY===0||!R.clientX&&!R.touches)z=Math.round(P.width/2),K=Math.round(P.height/2);else{const{clientX:oe,clientY:ee}=R.touches?R.touches[0]:R;z=Math.round(oe-P.left),K=Math.round(ee-P.top)}if(U)te=Math.sqrt((2*P.width**2+P.height**2)/3),te%2===0&&(te+=1);else{const oe=Math.max(Math.abs((j?j.clientWidth:0)-z),z)*2+2,ee=Math.max(Math.abs((j?j.clientHeight:0)-K),K)*2+2;te=Math.sqrt(oe**2+ee**2)}R.touches?x.current===null&&(x.current=()=>{A({pulsate:F,rippleX:z,rippleY:K,rippleSize:te,cb:L})},v.current=setTimeout(()=>{x.current&&(x.current(),x.current=null)},tne)):A({pulsate:F,rippleX:z,rippleY:K,rippleSize:te,cb:L})},[i,A]),E=G.exports.useCallback(()=>{k({},{pulsate:!0})},[k]),M=G.exports.useCallback((R,I)=>{if(clearTimeout(v.current),R.type==="touchend"&&x.current){x.current(),x.current=null,v.current=setTimeout(()=>{M(R,I)});return}x.current=null,h(L=>L.length>0?L.slice(1):L),_.current=I},[]);return G.exports.useImperativeHandle(t,()=>({pulsate:E,start:k,stop:M}),[E,k,M]),Ge(ine,he({className:Rt(l.root,vl.root,a),ref:b},c,{children:Ge(Xte,{component:null,exit:!0,children:p})}))});var ane=lne;function cne(r){return On("MuiButtonBase",r)}const une=En("MuiButtonBase",["root","disabled","focusVisible"]);var hne=une;const pne=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],dne=r=>{const{disabled:e,focusVisible:t,focusVisibleClassName:o,classes:i}=r,a=Ln({root:["root",e&&"disabled",t&&"focusVisible"]},cne,i);return t&&o&&(a.root+=` ${o}`),a},fne=St("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${hne.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),mne=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:l=!1,children:a,className:c,component:p="button",disabled:h=!1,disableRipple:f=!1,disableTouchRipple:_=!1,focusRipple:m=!1,LinkComponent:v="a",onBlur:x,onClick:b,onContextMenu:A,onDragLeave:k,onFocus:E,onFocusVisible:M,onKeyDown:R,onKeyUp:I,onMouseDown:L,onMouseLeave:F,onMouseUp:U,onTouchEnd:X,onTouchMove:j,onTouchStart:P,tabIndex:z=0,TouchRippleProps:K,touchRippleRef:te,type:oe}=o,ee=jt(o,pne),pe=G.exports.useRef(null),ae=G.exports.useRef(null),Ee=yo(ae,te),{isFocusVisibleRef:S,onFocus:D,onBlur:H,ref:q}=TR(),[Q,de]=G.exports.useState(!1);h&&Q&&de(!1),G.exports.useImperativeHandle(i,()=>({focusVisible:()=>{de(!0),pe.current.focus()}}),[]),G.exports.useEffect(()=>{Q&&m&&!f&&ae.current.pulsate()},[f,m,Q]);function je(me,Ce,le=_){return Js(W=>(Ce&&Ce(W),!le&&ae.current&&ae.current[me](W),!0))}const We=je("start",L),ze=je("stop",A),Oe=je("stop",k),Ye=je("stop",U),et=je("stop",me=>{Q&&me.preventDefault(),F&&F(me)}),Re=je("start",P),Te=je("stop",X),Le=je("stop",j),Ke=je("stop",me=>{H(me),S.current===!1&&de(!1),x&&x(me)},!1),Ne=Js(me=>{pe.current||(pe.current=me.currentTarget),D(me),S.current===!0&&(de(!0),M&&M(me)),E&&E(me)}),qe=()=>{const me=pe.current;return p&&p!=="button"&&!(me.tagName==="A"&&me.href)},lt=G.exports.useRef(!1),ue=Js(me=>{m&&!lt.current&&Q&&ae.current&&me.key===" "&&(lt.current=!0,ae.current.stop(me,()=>{ae.current.start(me)})),me.target===me.currentTarget&&qe()&&me.key===" "&&me.preventDefault(),R&&R(me),me.target===me.currentTarget&&qe()&&me.key==="Enter"&&!h&&(me.preventDefault(),b&&b(me))}),rt=Js(me=>{m&&me.key===" "&&ae.current&&Q&&!me.defaultPrevented&&(lt.current=!1,ae.current.stop(me,()=>{ae.current.pulsate(me)})),I&&I(me),b&&me.target===me.currentTarget&&qe()&&me.key===" "&&!me.defaultPrevented&&b(me)});let xt=p;xt==="button"&&(ee.href||ee.to)&&(xt=v);const ie={};xt==="button"?(ie.type=oe===void 0?"button":oe,ie.disabled=h):(!ee.href&&!ee.to&&(ie.role="button"),h&&(ie["aria-disabled"]=h));const Z=yo(q,pe),B=yo(t,Z),[Ae,Ue]=G.exports.useState(!1);G.exports.useEffect(()=>{Ue(!0)},[]);const ge=Ae&&!f&&!h,_e=he({},o,{centerRipple:l,component:p,disabled:h,disableRipple:f,disableTouchRipple:_,focusRipple:m,tabIndex:z,focusVisible:Q}),ke=dne(_e);return bo(fne,he({as:xt,className:Rt(ke.root,c),ownerState:_e,onBlur:Ke,onClick:b,onContextMenu:ze,onFocus:Ne,onKeyDown:ue,onKeyUp:rt,onMouseDown:We,onMouseLeave:et,onMouseUp:Ye,onDragLeave:Oe,onTouchEnd:Te,onTouchMove:Le,onTouchStart:Re,ref:B,tabIndex:h?-1:z,type:oe},ie,ee,{children:[a,ge?Ge(ane,he({ref:Ee,center:l},K)):null]}))});var Av=mne;function gne(r){return On("MuiIconButton",r)}const _ne=En("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var yne=_ne;const vne=["edge","children","className","color","disabled","disableFocusRipple","size"],Tne=r=>{const{classes:e,disabled:t,color:o,edge:i,size:l}=r,a={root:["root",t&&"disabled",o!=="default"&&`color${Dt(o)}`,i&&`edge${Dt(i)}`,`size${Dt(l)}`]};return Ln(a,gne,e)},Ene=St(Av,{name:"MuiIconButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="default"&&e[`color${Dt(t.color)}`],t.edge&&e[`edge${Dt(t.edge)}`],e[`size${Dt(t.size)}`]]}})(({theme:r,ownerState:e})=>he({textAlign:"center",flex:"0 0 auto",fontSize:r.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:r.palette.action.active,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:Ni(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:r,ownerState:e})=>he({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&he({color:r.palette[e.color].main},!e.disableRipple&&{"&:hover":{backgroundColor:Ni(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),e.size==="small"&&{padding:5,fontSize:r.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:r.typography.pxToRem(28)},{[`&.${yne.disabled}`]:{backgroundColor:"transparent",color:r.palette.action.disabled}})),xne=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiIconButton"}),{edge:i=!1,children:l,className:a,color:c="default",disabled:p=!1,disableFocusRipple:h=!1,size:f="medium"}=o,_=jt(o,vne),m=he({},o,{edge:i,color:c,disabled:p,disableFocusRipple:h,size:f}),v=Tne(m);return Ge(Ene,he({className:Rt(v.root,a),centerRipple:!0,focusRipple:!h,disabled:p,ref:t,ownerState:m},_,{children:l}))});var Ghe=xne;function Sne(r){return On("MuiTypography",r)}En("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Cne=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],bne=r=>{const{align:e,gutterBottom:t,noWrap:o,paragraph:i,variant:l,classes:a}=r,c={root:["root",l,r.align!=="inherit"&&`align${Dt(e)}`,t&&"gutterBottom",o&&"noWrap",i&&"paragraph"]};return Ln(c,Sne,a)},kne=St("span",{name:"MuiTypography",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Dt(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:r,ownerState:e})=>he({margin:0},e.variant&&r.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),ND={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ane={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},wne=r=>Ane[r]||r,Mne=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiTypography"}),i=wne(o.color),l=gH(he({},o,{color:i})),{align:a="inherit",className:c,component:p,gutterBottom:h=!1,noWrap:f=!1,paragraph:_=!1,variant:m="body1",variantMapping:v=ND}=l,x=jt(l,Cne),b=he({},l,{align:a,color:i,className:c,component:p,gutterBottom:h,noWrap:f,paragraph:_,variant:m,variantMapping:v}),A=p||(_?"p":v[m]||ND[m])||"span",k=bne(b);return Ge(kne,he({as:A,ref:t,ownerState:b,className:Rt(k.root,c)},x))});var Rne=Mne;const Bne=G.exports.forwardRef(function(e,t){const o=yH();return Ge(Wee,he({direction:o==null?void 0:o.direction},e,{ref:t}))});var UH=Bne;function Ine(r){return On("MuiInput",r)}const One=En("MuiInput",["root","formControl","focused","disabled","colorSecondary","underline","error","sizeSmall","multiline","fullWidth","input","inputSizeSmall","inputMultiline","inputTypeSearch"]);var M0=One;function Dne(r){return On("MuiInputBase",r)}const Lne=En("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var ew=Lne;function Nne(r){return On("MuiOutlinedInput",r)}const $ne=En("MuiOutlinedInput",["root","colorSecondary","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","notchedOutline","input","inputSizeSmall","inputMultiline","inputAdornedStart","inputAdornedEnd"]);var Lu=$ne;function Pne(r){return On("MuiFilledInput",r)}const Fne=En("MuiFilledInput",["root","colorSecondary","underline","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","hiddenLabel","input","inputSizeSmall","inputHiddenLabel","inputMultiline","inputAdornedStart","inputAdornedEnd"]);var uf=Fne,Une=Cr(Ge("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");const Hne=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Gne={entering:{opacity:1},entered:{opacity:1}},Vne={enter:Dy.enteringScreen,exit:Dy.leavingScreen},Wne=G.exports.forwardRef(function(e,t){const{addEndListener:o,appear:i=!0,children:l,easing:a,in:c,onEnter:p,onEntered:h,onEntering:f,onExit:_,onExited:m,onExiting:v,style:x,timeout:b=Vne,TransitionComponent:A=PH}=e,k=jt(e,Hne),E=pd(),M=G.exports.useRef(null),R=yo(l.ref,t),I=yo(M,R),L=te=>oe=>{if(te){const ee=M.current;oe===void 0?te(ee):te(ee,oe)}},F=L(f),U=L((te,oe)=>{FH(te);const ee=ux({style:x,timeout:b,easing:a},{mode:"enter"});te.style.webkitTransition=E.transitions.create("opacity",ee),te.style.transition=E.transitions.create("opacity",ee),p&&p(te,oe)}),X=L(h),j=L(v),P=L(te=>{const oe=ux({style:x,timeout:b,easing:a},{mode:"exit"});te.style.webkitTransition=E.transitions.create("opacity",oe),te.style.transition=E.transitions.create("opacity",oe),_&&_(te)}),z=L(m);return Ge(A,he({appear:i,in:c,nodeRef:M,onEnter:U,onEntered:X,onEntering:F,onExit:P,onExited:z,onExiting:j,addEndListener:te=>{o&&o(M.current,te)},timeout:b},k,{children:(te,oe)=>G.exports.cloneElement(l,he({style:he({opacity:0,visibility:te==="exited"&&!c?"hidden":void 0},Gne[te],x,l.props.style),ref:I},oe))}))});var HH=Wne;const zne=["children","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],Xne=r=>{const{classes:e}=r;return e},jne=St("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.invisible&&e.invisible]}})(({ownerState:r})=>he({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},r.invisible&&{backgroundColor:"transparent"})),Jne=G.exports.forwardRef(function(e,t){var o;const i=Nn({props:e,name:"MuiBackdrop"}),{children:l,components:a={},componentsProps:c={},className:p,invisible:h=!1,open:f,transitionDuration:_,TransitionComponent:m=HH}=i,v=jt(i,zne),x=he({},i,{invisible:h}),b=Xne(x);return Ge(m,he({in:f,timeout:_},v,{children:Ge(uZ,{className:p,invisible:h,components:he({Root:jne},a),componentsProps:{root:he({},c.root,(!a.Root||!Ws(a.Root))&&{ownerState:he({},(o=c.root)==null?void 0:o.ownerState)})},classes:b,ref:t,children:l})}))});var GH=Jne;const Kne=r=>!r||!Ws(r);var R0=Kne;function Yne(r){return On("MuiButton",r)}const qne=En("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var B0=qne;const Qne=G.exports.createContext({});var Zne=Qne;const eoe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],toe=r=>{const{color:e,disableElevation:t,fullWidth:o,size:i,variant:l,classes:a}=r,c={root:["root",l,`${l}${Dt(e)}`,`size${Dt(i)}`,`${l}Size${Dt(i)}`,e==="inherit"&&"colorInherit",t&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Dt(i)}`],endIcon:["endIcon",`iconSize${Dt(i)}`]},p=Ln(c,Yne,a);return he({},a,p)},VH=r=>he({},r.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},r.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},r.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),noe=St(Av,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${Dt(t.color)}`],e[`size${Dt(t.size)}`],e[`${t.variant}Size${Dt(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:r,ownerState:e})=>he({},r.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:r.shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":he({textDecoration:"none",backgroundColor:Ni(r.palette.text.primary,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:Ni(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${r.palette[e.color].main}`,backgroundColor:Ni(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:r.palette.grey.A100,boxShadow:r.shadows[4],"@media (hover: none)":{boxShadow:r.shadows[2],backgroundColor:r.palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:r.palette[e.color].dark,"@media (hover: none)":{backgroundColor:r.palette[e.color].main}}),"&:active":he({},e.variant==="contained"&&{boxShadow:r.shadows[8]}),[`&.${B0.focusVisible}`]:he({},e.variant==="contained"&&{boxShadow:r.shadows[6]}),[`&.${B0.disabled}`]:he({color:r.palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${r.palette.action.disabledBackground}`},e.variant==="outlined"&&e.color==="secondary"&&{border:`1px solid ${r.palette.action.disabled}`},e.variant==="contained"&&{color:r.palette.action.disabled,boxShadow:r.shadows[0],backgroundColor:r.palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:r.palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:`1px solid ${r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},e.variant==="outlined"&&e.color!=="inherit"&&{color:r.palette[e.color].main,border:`1px solid ${Ni(r.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:r.palette.getContrastText(r.palette.grey[300]),backgroundColor:r.palette.grey[300],boxShadow:r.shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:r.palette[e.color].contrastText,backgroundColor:r.palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:r.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:r.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:r.typography.pxToRem(15)},e.fullWidth&&{width:"100%"}),({ownerState:r})=>r.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${B0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${B0.disabled}`]:{boxShadow:"none"}}),ooe=St("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.startIcon,e[`iconSize${Dt(t.size)}`]]}})(({ownerState:r})=>he({display:"inherit",marginRight:8,marginLeft:-4},r.size==="small"&&{marginLeft:-2},VH(r))),roe=St("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.endIcon,e[`iconSize${Dt(t.size)}`]]}})(({ownerState:r})=>he({display:"inherit",marginRight:-4,marginLeft:8},r.size==="small"&&{marginRight:-2},VH(r))),ioe=G.exports.forwardRef(function(e,t){const o=G.exports.useContext(Zne),i=tH(o,e),l=Nn({props:i,name:"MuiButton"}),{children:a,color:c="primary",component:p="button",className:h,disabled:f=!1,disableElevation:_=!1,disableFocusRipple:m=!1,endIcon:v,focusVisibleClassName:x,fullWidth:b=!1,size:A="medium",startIcon:k,type:E,variant:M="text"}=l,R=jt(l,eoe),I=he({},l,{color:c,component:p,disabled:f,disableElevation:_,disableFocusRipple:m,fullWidth:b,size:A,type:E,variant:M}),L=toe(I),F=k&&Ge(ooe,{className:L.startIcon,ownerState:I,children:k}),U=v&&Ge(roe,{className:L.endIcon,ownerState:I,children:v});return bo(noe,he({ownerState:I,className:Rt(h,o.className),component:p,disabled:f,focusRipple:!m,focusVisibleClassName:Rt(L.focusVisible,x),ref:t,type:E},R,{classes:L,children:[F,a,U]}))});var Vhe=ioe;const soe=G.exports.createContext();var PR=soe;function Ym(){return G.exports.useContext(PR)}function loe(r){return Ge(w7,he({},r,{defaultTheme:PS}))}const aoe=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],coe=r=>r.classes,uoe=St("div",{name:"MuiModal",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:r,ownerState:e})=>he({position:"fixed",zIndex:r.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),hoe=St(GH,{name:"MuiModal",slot:"Backdrop",overridesResolver:(r,e)=>e.backdrop})({zIndex:-1}),poe=G.exports.forwardRef(function(e,t){var o;const i=Nn({name:"MuiModal",props:e}),{BackdropComponent:l=hoe,closeAfterTransition:a=!1,children:c,components:p={},componentsProps:h={},disableAutoFocus:f=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:m=!1,disablePortal:v=!1,disableRestoreFocus:x=!1,disableScrollLock:b=!1,hideBackdrop:A=!1,keepMounted:k=!1}=i,E=jt(i,aoe),[M,R]=G.exports.useState(!0),I={closeAfterTransition:a,disableAutoFocus:f,disableEnforceFocus:_,disableEscapeKeyDown:m,disablePortal:v,disableRestoreFocus:x,disableScrollLock:b,hideBackdrop:A,keepMounted:k},L=he({},i,I,{exited:M}),F=coe(L);return Ge(BZ,he({components:he({Root:uoe},p),componentsProps:{root:he({},h.root,(!p.Root||!Ws(p.Root))&&{ownerState:he({},(o=h.root)==null?void 0:o.ownerState)})},BackdropComponent:l,onTransitionEnter:()=>R(!1),onTransitionExited:()=>R(!0),ref:t},E,{classes:F},I,{children:c}))});var WH=poe;function doe(r){return On("MuiDialog",r)}const foe=En("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var Lb=foe;const moe=G.exports.createContext({});var zH=moe;const goe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],_oe=St(GH,{name:"MuiDialog",slot:"Backdrop",overrides:(r,e)=>e.backdrop})({zIndex:-1}),yoe=r=>{const{classes:e,scroll:t,maxWidth:o,fullWidth:i,fullScreen:l}=r,a={root:["root"],container:["container",`scroll${Dt(t)}`],paper:["paper",`paperScroll${Dt(t)}`,`paperWidth${Dt(String(o))}`,i&&"paperFullWidth",l&&"paperFullScreen"]};return Ln(a,doe,e)},voe=St(WH,{name:"MuiDialog",slot:"Root",overridesResolver:(r,e)=>e.root})({"@media print":{position:"absolute !important"}}),Toe=St("div",{name:"MuiDialog",slot:"Container",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.container,e[`scroll${Dt(t.scroll)}`]]}})(({ownerState:r})=>he({height:"100%","@media print":{height:"auto"},outline:0},r.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},r.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Eoe=St(FS,{name:"MuiDialog",slot:"Paper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.paper,e[`scrollPaper${Dt(t.scroll)}`],e[`paperWidth${Dt(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:r,ownerState:e})=>he({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:r.breakpoints.unit==="px"?Math.max(r.breakpoints.values.xs,444):`${r.breakpoints.values.xs}${r.breakpoints.unit}`,[`&.${Lb.paperScrollBody}`]:{[r.breakpoints.down(Math.max(r.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth!=="xs"&&{maxWidth:`${r.breakpoints.values[e.maxWidth]}${r.breakpoints.unit}`,[`&.${Lb.paperScrollBody}`]:{[r.breakpoints.down(r.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Lb.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),xoe={enter:Dy.enteringScreen,exit:Dy.leavingScreen},Soe=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiDialog"}),{"aria-describedby":i,"aria-labelledby":l,BackdropComponent:a,BackdropProps:c,children:p,className:h,disableEscapeKeyDown:f=!1,fullScreen:_=!1,fullWidth:m=!1,maxWidth:v="sm",onBackdropClick:x,onClose:b,open:A,PaperComponent:k=FS,PaperProps:E={},scroll:M="paper",TransitionComponent:R=HH,transitionDuration:I=xoe,TransitionProps:L}=o,F=jt(o,goe),U=he({},o,{disableEscapeKeyDown:f,fullScreen:_,fullWidth:m,maxWidth:v,scroll:M}),X=yoe(U),j=G.exports.useRef(),P=oe=>{j.current=oe.target===oe.currentTarget},z=oe=>{!j.current||(j.current=null,x&&x(oe),b&&b(oe,"backdropClick"))},K=vR(l),te=G.exports.useMemo(()=>({titleId:K}),[K]);return Ge(voe,he({className:Rt(X.root,h),BackdropProps:he({transitionDuration:I,as:a},c),closeAfterTransition:!0,BackdropComponent:_oe,disableEscapeKeyDown:f,onClose:b,open:A,ref:t,onClick:z,ownerState:U},F,{children:Ge(R,he({appear:!0,in:A,timeout:I,role:"presentation"},L,{children:Ge(Toe,{className:Rt(X.container),onMouseDown:P,ownerState:U,children:Ge(Eoe,he({as:k,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":K},E,{className:Rt(X.paper,E.className),ownerState:U,children:Ge(zH.Provider,{value:te,children:p})}))})}))}))});var Whe=Soe;function Coe(r){return On("MuiDialogActions",r)}En("MuiDialogActions",["root","spacing"]);const boe=["className","disableSpacing"],koe=r=>{const{classes:e,disableSpacing:t}=r;return Ln({root:["root",!t&&"spacing"]},Coe,e)},Aoe=St("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableSpacing&&e.spacing]}})(({ownerState:r})=>he({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!r.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),woe=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:l=!1}=o,a=jt(o,boe),c=he({},o,{disableSpacing:l}),p=koe(c);return Ge(Aoe,he({className:Rt(p.root,i),ownerState:c,ref:t},a))});var zhe=woe;function Moe(r){return On("MuiDialogContent",r)}En("MuiDialogContent",["root","dividers"]);function Roe(r){return On("MuiDialogTitle",r)}const Boe=En("MuiDialogTitle",["root"]);var Ioe=Boe;const Ooe=["className","dividers"],Doe=r=>{const{classes:e,dividers:t}=r;return Ln({root:["root",t&&"dividers"]},Moe,e)},Loe=St("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.dividers&&e.dividers]}})(({theme:r,ownerState:e})=>he({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${r.palette.divider}`,borderBottom:`1px solid ${r.palette.divider}`}:{[`.${Ioe.root} + &`]:{paddingTop:0}})),Noe=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiDialogContent"}),{className:i,dividers:l=!1}=o,a=jt(o,Ooe),c=he({},o,{dividers:l}),p=Doe(c);return Ge(Loe,he({className:Rt(p.root,i),ownerState:c,ref:t},a))});var Xhe=Noe;const $oe=["className","id"],Poe=r=>{const{classes:e}=r;return Ln({root:["root"]},Roe,e)},Foe=St(Rne,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(r,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),Uoe=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiDialogTitle"}),{className:i,id:l}=o,a=jt(o,$oe),c=o,p=Poe(c),{titleId:h=l}=G.exports.useContext(zH);return Ge(Foe,he({component:"h2",className:Rt(p.root,i),ownerState:c,ref:t,variant:"h6",id:h},a))});var jhe=Uoe;const Hoe=En("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var $D=Hoe;function qm({props:r,states:e,muiFormControl:t}){return e.reduce((o,i)=>(o[i]=r[i],t&&typeof r[i]=="undefined"&&(o[i]=t[i]),o),{})}function PD(r){return r!=null&&!(Array.isArray(r)&&r.length===0)}function FR(r,e=!1){return r&&(PD(r.value)&&r.value!==""||e&&PD(r.defaultValue)&&r.defaultValue!=="")}function Goe(r){return r.startAdornment}const Voe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],HS=(r,e)=>{const{ownerState:t}=r;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Dt(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},GS=(r,e)=>{const{ownerState:t}=r;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},Woe=r=>{const{classes:e,color:t,disabled:o,error:i,endAdornment:l,focused:a,formControl:c,fullWidth:p,hiddenLabel:h,multiline:f,size:_,startAdornment:m,type:v}=r,x={root:["root",`color${Dt(t)}`,o&&"disabled",i&&"error",p&&"fullWidth",a&&"focused",c&&"formControl",_==="small"&&"sizeSmall",f&&"multiline",m&&"adornedStart",l&&"adornedEnd",h&&"hiddenLabel"],input:["input",o&&"disabled",v==="search"&&"inputTypeSearch",f&&"inputMultiline",_==="small"&&"inputSizeSmall",h&&"inputHiddenLabel",m&&"inputAdornedStart",l&&"inputAdornedEnd"]};return Ln(x,Dne,e)},VS=St("div",{name:"MuiInputBase",slot:"Root",overridesResolver:HS})(({theme:r,ownerState:e})=>he({},r.typography.body1,{color:r.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ew.disabled}`]:{color:r.palette.text.disabled,cursor:"default"}},e.multiline&&he({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),WS=St("input",{name:"MuiInputBase",slot:"Input",overridesResolver:GS})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light",o={color:"currentColor",opacity:t?.42:.5,transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})},i={opacity:"0 !important"},l={opacity:t?.42:.5};return he({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ew.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus:-ms-input-placeholder":l,"&:focus::-ms-input-placeholder":l},[`&.${ew.disabled}`]:{opacity:1,WebkitTextFillColor:r.palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),zoe=Ge(loe,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Xoe=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:l,autoFocus:a,className:c,components:p={},componentsProps:h={},defaultValue:f,disabled:_,disableInjectingGlobalStyles:m,endAdornment:v,fullWidth:x=!1,id:b,inputComponent:A="input",inputProps:k={},inputRef:E,maxRows:M,minRows:R,multiline:I=!1,name:L,onBlur:F,onChange:U,onClick:X,onFocus:j,onKeyDown:P,onKeyUp:z,placeholder:K,readOnly:te,renderSuffix:oe,rows:ee,startAdornment:pe,type:ae="text",value:Ee}=o,S=jt(o,Voe),D=k.value!=null?k.value:Ee,{current:H}=G.exports.useRef(D!=null),q=G.exports.useRef(),Q=G.exports.useCallback(ge=>{},[]),de=yo(k.ref,Q),je=yo(E,de),We=yo(q,je),[ze,Oe]=G.exports.useState(!1),Ye=Ym(),et=qm({props:o,muiFormControl:Ye,states:["color","disabled","error","hiddenLabel","size","required","filled"]});et.focused=Ye?Ye.focused:ze,G.exports.useEffect(()=>{!Ye&&_&&ze&&(Oe(!1),F&&F())},[Ye,_,ze,F]);const Re=Ye&&Ye.onFilled,Te=Ye&&Ye.onEmpty,Le=G.exports.useCallback(ge=>{FR(ge)?Re&&Re():Te&&Te()},[Re,Te]);sc(()=>{H&&Le({value:D})},[D,Le,H]);const Ke=ge=>{if(et.disabled){ge.stopPropagation();return}j&&j(ge),k.onFocus&&k.onFocus(ge),Ye&&Ye.onFocus?Ye.onFocus(ge):Oe(!0)},Ne=ge=>{F&&F(ge),k.onBlur&&k.onBlur(ge),Ye&&Ye.onBlur?Ye.onBlur(ge):Oe(!1)},qe=(ge,..._e)=>{if(!H){const ke=ge.target||q.current;if(ke==null)throw new Error(ed(1));Le({value:ke.value})}k.onChange&&k.onChange(ge,..._e),U&&U(ge,..._e)};G.exports.useEffect(()=>{Le(q.current)},[]);const lt=ge=>{q.current&&ge.currentTarget===ge.target&&q.current.focus(),X&&X(ge)};let ue=A,rt=k;I&&ue==="input"&&(ee?rt=he({type:void 0,minRows:ee,maxRows:ee},rt):rt=he({type:void 0,maxRows:M,minRows:R},rt),ue=ate);const xt=ge=>{Le(ge.animationName==="mui-auto-fill-cancel"?q.current:{value:"x"})};G.exports.useEffect(()=>{Ye&&Ye.setAdornedStart(Boolean(pe))},[Ye,pe]);const ie=he({},o,{color:et.color||"primary",disabled:et.disabled,endAdornment:v,error:et.error,focused:et.focused,formControl:Ye,fullWidth:x,hiddenLabel:et.hiddenLabel,multiline:I,size:et.size,startAdornment:pe,type:ae}),Z=Woe(ie),B=p.Root||VS,Ae=h.root||{},Ue=p.Input||WS;return rt=he({},rt,h.input),bo(G.exports.Fragment,{children:[!m&&zoe,bo(B,he({},Ae,!Ws(B)&&{ownerState:he({},ie,Ae.ownerState)},{ref:t,onClick:lt},S,{className:Rt(Z.root,Ae.className,c),children:[pe,Ge(PR.Provider,{value:null,children:Ge(Ue,he({ownerState:ie,"aria-invalid":et.error,"aria-describedby":i,autoComplete:l,autoFocus:a,defaultValue:f,disabled:et.disabled,id:b,onAnimationStart:xt,name:L,placeholder:K,readOnly:te,required:et.required,rows:ee,value:D,onKeyDown:P,onKeyUp:z,type:ae},rt,!Ws(Ue)&&{as:ue,ownerState:he({},ie,rt.ownerState)},{ref:We,className:Rt(Z.input,rt.className),onBlur:Ne,onChange:qe,onFocus:Ke}))}),v,oe?oe(he({},et,{startAdornment:pe})):null]}))]})});var UR=Xoe;const joe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],Joe=r=>{const{classes:e,disableUnderline:t}=r,i=Ln({root:["root",!t&&"underline"],input:["input"]},Pne,e);return he({},e,i)},Koe=St(VS,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...HS(r,e),!t.disableUnderline&&e.underline]}})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light",o=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return he({position:"relative",backgroundColor:i,borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:i}},[`&.${uf.focused}`]:{backgroundColor:i},[`&.${uf.disabled}`]:{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${r.palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${uf.focused}:after`]:{transform:"scaleX(1)"},[`&.${uf.error}:after`]:{borderBottomColor:r.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${uf.disabled}):before`]:{borderBottom:`1px solid ${r.palette.text.primary}`},[`&.${uf.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&he({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),Yoe=St(WS,{name:"MuiFilledInput",slot:"Input",overridesResolver:GS})(({theme:r,ownerState:e})=>he({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9})),XH=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiFilledInput"}),{components:i={},componentsProps:l,fullWidth:a=!1,inputComponent:c="input",multiline:p=!1,type:h="text"}=o,f=jt(o,joe),_=he({},o,{fullWidth:a,inputComponent:c,multiline:p,type:h}),m=Joe(o),v={root:{ownerState:_},input:{ownerState:_}},x=l?Rl(l,v):v;return Ge(UR,he({components:he({Root:Koe,Input:Yoe},i),componentsProps:x,fullWidth:a,inputComponent:c,multiline:p,ref:t,type:h},f,{classes:m}))});XH.muiName="Input";var jH=XH;function qoe(r){return On("MuiFormControl",r)}En("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Qoe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Zoe=r=>{const{classes:e,margin:t,fullWidth:o}=r,i={root:["root",t!=="none"&&`margin${Dt(t)}`,o&&"fullWidth"]};return Ln(i,qoe,e)},ere=St("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:r},e)=>he({},e.root,e[`margin${Dt(r.margin)}`],r.fullWidth&&e.fullWidth)})(({ownerState:r})=>he({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},r.margin==="normal"&&{marginTop:16,marginBottom:8},r.margin==="dense"&&{marginTop:8,marginBottom:4},r.fullWidth&&{width:"100%"})),tre=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiFormControl"}),{children:i,className:l,color:a="primary",component:c="div",disabled:p=!1,error:h=!1,focused:f,fullWidth:_=!1,hiddenLabel:m=!1,margin:v="none",required:x=!1,size:b="medium",variant:A="outlined"}=o,k=jt(o,Qoe),E=he({},o,{color:a,component:c,disabled:p,error:h,fullWidth:_,hiddenLabel:m,margin:v,required:x,size:b,variant:A}),M=Zoe(E),[R,I]=G.exports.useState(()=>{let oe=!1;return i&&G.exports.Children.forEach(i,ee=>{if(!Rb(ee,["Input","Select"]))return;const pe=Rb(ee,["Select"])?ee.props.input:ee;pe&&Goe(pe.props)&&(oe=!0)}),oe}),[L,F]=G.exports.useState(()=>{let oe=!1;return i&&G.exports.Children.forEach(i,ee=>{!Rb(ee,["Input","Select"])||FR(ee.props,!0)&&(oe=!0)}),oe}),[U,X]=G.exports.useState(!1);p&&U&&X(!1);const j=f!==void 0&&!p?f:U;let P;const z=G.exports.useCallback(()=>{F(!0)},[]),K=G.exports.useCallback(()=>{F(!1)},[]),te={adornedStart:R,setAdornedStart:I,color:a,disabled:p,error:h,filled:L,focused:j,fullWidth:_,hiddenLabel:m,size:b,onBlur:()=>{X(!1)},onEmpty:K,onFilled:z,onFocus:()=>{X(!0)},registerEffect:P,required:x,variant:A};return Ge(PR.Provider,{value:te,children:Ge(ere,he({as:c,ownerState:E,className:Rt(M.root,l),ref:t},k,{children:i}))})});var nre=tre;function ore(r){return On("MuiFormHelperText",r)}const rre=En("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var FD=rre,UD;const ire=["children","className","component","disabled","error","filled","focused","margin","required","variant"],sre=r=>{const{classes:e,contained:t,size:o,disabled:i,error:l,filled:a,focused:c,required:p}=r,h={root:["root",i&&"disabled",l&&"error",o&&`size${Dt(o)}`,t&&"contained",c&&"focused",a&&"filled",p&&"required"]};return Ln(h,ore,e)},lre=St("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size&&e[`size${Dt(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:r,ownerState:e})=>he({color:r.palette.text.secondary},r.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${FD.disabled}`]:{color:r.palette.text.disabled},[`&.${FD.error}`]:{color:r.palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),are=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiFormHelperText"}),{children:i,className:l,component:a="p"}=o,c=jt(o,ire),p=Ym(),h=qm({props:o,muiFormControl:p,states:["variant","size","disabled","error","filled","focused","required"]}),f=he({},o,{component:a,contained:h.variant==="filled"||h.variant==="outlined",variant:h.variant,size:h.size,disabled:h.disabled,error:h.error,filled:h.filled,focused:h.focused,required:h.required}),_=sre(f);return Ge(lre,he({as:a,ownerState:f,className:Rt(_.root,l),ref:t},c,{children:i===" "?UD||(UD=Ge("span",{className:"notranslate",children:"\u200B"})):i}))});var cre=are;function ure(r){return On("MuiFormLabel",r)}const hre=En("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);var F_=hre;const pre=["children","className","color","component","disabled","error","filled","focused","required"],dre=r=>{const{classes:e,color:t,focused:o,disabled:i,error:l,filled:a,required:c}=r,p={root:["root",`color${Dt(t)}`,i&&"disabled",l&&"error",a&&"filled",o&&"focused",c&&"required"],asterisk:["asterisk",l&&"error"]};return Ln(p,ure,e)},fre=St("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:r},e)=>he({},e.root,r.color==="secondary"&&e.colorSecondary,r.filled&&e.filled)})(({theme:r,ownerState:e})=>he({color:r.palette.text.secondary},r.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${F_.focused}`]:{color:r.palette[e.color].main},[`&.${F_.disabled}`]:{color:r.palette.text.disabled},[`&.${F_.error}`]:{color:r.palette.error.main}})),mre=St("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(r,e)=>e.asterisk})(({theme:r})=>({[`&.${F_.error}`]:{color:r.palette.error.main}})),gre=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiFormLabel"}),{children:i,className:l,component:a="label"}=o,c=jt(o,pre),p=Ym(),h=qm({props:o,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),f=he({},o,{color:h.color||"primary",component:a,disabled:h.disabled,error:h.error,filled:h.filled,focused:h.focused,required:h.required}),_=dre(f);return bo(fre,he({as:a,ownerState:f,className:Rt(_.root,l),ref:t},c,{children:[i,h.required&&bo(mre,{ownerState:f,"aria-hidden":!0,className:_.asterisk,children:["\u2009","*"]})]}))});var _re=gre;const yre=G.exports.createContext();var HD=yre;function vre(r){return On("MuiGrid",r)}const Tre=[0,1,2,3,4,5,6,7,8,9,10],Ere=["column-reverse","column","row-reverse","row"],xre=["nowrap","wrap-reverse","wrap"],Zg=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],HR=En("MuiGrid",["root","container","item","zeroMinWidth",...Tre.map(r=>`spacing-xs-${r}`),...Ere.map(r=>`direction-xs-${r}`),...xre.map(r=>`wrap-xs-${r}`),...Zg.map(r=>`grid-xs-${r}`),...Zg.map(r=>`grid-sm-${r}`),...Zg.map(r=>`grid-md-${r}`),...Zg.map(r=>`grid-lg-${r}`),...Zg.map(r=>`grid-xl-${r}`)]),Sre=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function jf(r){const e=parseFloat(r);return`${e}${String(r).replace(String(e),"")||"px"}`}function Cre({theme:r,ownerState:e}){let t;return r.breakpoints.keys.reduce((o,i)=>{let l={};if(e[i]&&(t=e[i]),!t)return o;if(t===!0)l={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")l={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=DS({values:e.columns,breakpoints:r.breakpoints.values}),c=typeof a=="object"?a[i]:a;if(c==null)return o;const p=`${Math.round(t/c*1e8)/1e6}%`;let h={};if(e.container&&e.item&&e.columnSpacing!==0){const f=r.spacing(e.columnSpacing);if(f!=="0px"){const _=`calc(${p} + ${jf(f)})`;h={flexBasis:_,maxWidth:_}}}l=he({flexBasis:p,flexGrow:0,maxWidth:p},h)}return r.breakpoints.values[i]===0?Object.assign(o,l):o[r.breakpoints.up(i)]=l,o},{})}function bre({theme:r,ownerState:e}){const t=DS({values:e.direction,breakpoints:r.breakpoints.values});return ha({theme:r},t,o=>{const i={flexDirection:o};return o.indexOf("column")===0&&(i[`& > .${HR.item}`]={maxWidth:"none"}),i})}function kre({theme:r,ownerState:e}){const{container:t,rowSpacing:o}=e;let i={};if(t&&o!==0){const l=DS({values:o,breakpoints:r.breakpoints.values});i=ha({theme:r},l,a=>{const c=r.spacing(a);return c!=="0px"?{marginTop:`-${jf(c)}`,[`& > .${HR.item}`]:{paddingTop:jf(c)}}:{}})}return i}function Are({theme:r,ownerState:e}){const{container:t,columnSpacing:o}=e;let i={};if(t&&o!==0){const l=DS({values:o,breakpoints:r.breakpoints.values});i=ha({theme:r},l,a=>{const c=r.spacing(a);return c!=="0px"?{width:`calc(100% + ${jf(c)})`,marginLeft:`-${jf(c)}`,[`& > .${HR.item}`]:{paddingLeft:jf(c)}}:{}})}return i}function JH(r,e,t={}){if(!e||!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[t[`spacing-xs-${String(r)}`]||`spacing-xs-${String(r)}`];const{xs:o,sm:i,md:l,lg:a,xl:c}=r;return[Number(o)>0&&(t[`spacing-xs-${String(o)}`]||`spacing-xs-${String(o)}`),Number(i)>0&&(t[`spacing-sm-${String(i)}`]||`spacing-sm-${String(i)}`),Number(l)>0&&(t[`spacing-md-${String(l)}`]||`spacing-md-${String(l)}`),Number(a)>0&&(t[`spacing-lg-${String(a)}`]||`spacing-lg-${String(a)}`),Number(c)>0&&(t[`spacing-xl-${String(c)}`]||`spacing-xl-${String(c)}`)]}const wre=St("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,e)=>{const{container:t,direction:o,item:i,lg:l,md:a,sm:c,spacing:p,wrap:h,xl:f,xs:_,zeroMinWidth:m}=r.ownerState;return[e.root,t&&e.container,i&&e.item,m&&e.zeroMinWidth,...JH(p,t,e),o!=="row"&&e[`direction-xs-${String(o)}`],h!=="wrap"&&e[`wrap-xs-${String(h)}`],_!==!1&&e[`grid-xs-${String(_)}`],c!==!1&&e[`grid-sm-${String(c)}`],a!==!1&&e[`grid-md-${String(a)}`],l!==!1&&e[`grid-lg-${String(l)}`],f!==!1&&e[`grid-xl-${String(f)}`]]}})(({ownerState:r})=>he({boxSizing:"border-box"},r.container&&{display:"flex",flexWrap:"wrap",width:"100%"},r.item&&{margin:0},r.zeroMinWidth&&{minWidth:0},r.wrap!=="wrap"&&{flexWrap:r.wrap}),bre,kre,Are,Cre),Mre=r=>{const{classes:e,container:t,direction:o,item:i,lg:l,md:a,sm:c,spacing:p,wrap:h,xl:f,xs:_,zeroMinWidth:m}=r,v={root:["root",t&&"container",i&&"item",m&&"zeroMinWidth",...JH(p,t),o!=="row"&&`direction-xs-${String(o)}`,h!=="wrap"&&`wrap-xs-${String(h)}`,_!==!1&&`grid-xs-${String(_)}`,c!==!1&&`grid-sm-${String(c)}`,a!==!1&&`grid-md-${String(a)}`,l!==!1&&`grid-lg-${String(l)}`,f!==!1&&`grid-xl-${String(f)}`]};return Ln(v,vre,e)},Rre=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiGrid"}),i=gH(o),{className:l,columns:a,columnSpacing:c,component:p="div",container:h=!1,direction:f="row",item:_=!1,lg:m=!1,md:v=!1,rowSpacing:x,sm:b=!1,spacing:A=0,wrap:k="wrap",xl:E=!1,xs:M=!1,zeroMinWidth:R=!1}=i,I=jt(i,Sre),L=x||A,F=c||A,U=G.exports.useContext(HD),X=a||U||12,j=he({},i,{columns:X,container:h,direction:f,item:_,lg:m,md:v,sm:b,rowSpacing:L,columnSpacing:F,wrap:k,xl:E,xs:M,zeroMinWidth:R}),P=Mre(j);return(K=>X!==12?Ge(HD.Provider,{value:X,children:K}):K)(Ge(wre,he({ownerState:j,className:Rt(P.root,l),as:p,ref:t},I)))});var Jhe=Rre;const Bre=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function tw(r){return`scale(${r}, ${r**2})`}const Ire={entering:{opacity:1,transform:tw(1)},entered:{opacity:1,transform:"none"}},KH=G.exports.forwardRef(function(e,t){const{addEndListener:o,appear:i=!0,children:l,easing:a,in:c,onEnter:p,onEntered:h,onEntering:f,onExit:_,onExited:m,onExiting:v,style:x,timeout:b="auto",TransitionComponent:A=PH}=e,k=jt(e,Bre),E=G.exports.useRef(),M=G.exports.useRef(),R=pd(),I=G.exports.useRef(null),L=yo(l.ref,t),F=yo(I,L),U=ee=>pe=>{if(ee){const ae=I.current;pe===void 0?ee(ae):ee(ae,pe)}},X=U(f),j=U((ee,pe)=>{FH(ee);const{duration:ae,delay:Ee,easing:S}=ux({style:x,timeout:b,easing:a},{mode:"enter"});let D;b==="auto"?(D=R.transitions.getAutoHeightDuration(ee.clientHeight),M.current=D):D=ae,ee.style.transition=[R.transitions.create("opacity",{duration:D,delay:Ee}),R.transitions.create("transform",{duration:D*.666,delay:Ee,easing:S})].join(","),p&&p(ee,pe)}),P=U(h),z=U(v),K=U(ee=>{const{duration:pe,delay:ae,easing:Ee}=ux({style:x,timeout:b,easing:a},{mode:"exit"});let S;b==="auto"?(S=R.transitions.getAutoHeightDuration(ee.clientHeight),M.current=S):S=pe,ee.style.transition=[R.transitions.create("opacity",{duration:S,delay:ae}),R.transitions.create("transform",{duration:S*.666,delay:ae||S*.333,easing:Ee})].join(","),ee.style.opacity="0",ee.style.transform=tw(.75),_&&_(ee)}),te=U(m),oe=ee=>{b==="auto"&&(E.current=setTimeout(ee,M.current||0)),o&&o(I.current,ee)};return G.exports.useEffect(()=>()=>{clearTimeout(E.current)},[]),Ge(A,he({appear:i,in:c,nodeRef:I,onEnter:j,onEntered:P,onEntering:X,onExit:K,onExited:te,onExiting:z,addEndListener:oe,timeout:b==="auto"?null:b},k,{children:(ee,pe)=>G.exports.cloneElement(l,he({style:he({opacity:0,transform:tw(.75),visibility:ee==="exited"&&!c?"hidden":void 0},Ire[ee],x,l.props.style),ref:F},pe))}))});KH.muiSupportAuto=!0;var nw=KH;const Ore=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],Dre=r=>{const{classes:e,disableUnderline:t}=r,i=Ln({root:["root",!t&&"underline"],input:["input"]},Ine,e);return he({},e,i)},Lre=St(VS,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...HS(r,e),!t.disableUnderline&&e.underline]}})(({theme:r,ownerState:e})=>{const o=r.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return he({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${r.palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${M0.focused}:after`]:{transform:"scaleX(1)"},[`&.${M0.error}:after`]:{borderBottomColor:r.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${M0.disabled}):before`]:{borderBottom:`2px solid ${r.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${o}`}},[`&.${M0.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Nre=St(WS,{name:"MuiInput",slot:"Input",overridesResolver:GS})({}),YH=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiInput"}),{disableUnderline:i,components:l={},componentsProps:a,fullWidth:c=!1,inputComponent:p="input",multiline:h=!1,type:f="text"}=o,_=jt(o,Ore),m=Dre(o),x={root:{ownerState:{disableUnderline:i}}},b=a?Rl(a,x):x;return Ge(UR,he({components:he({Root:Lre,Input:Nre},l),componentsProps:b,fullWidth:c,inputComponent:p,multiline:h,ref:t,type:f},_,{classes:m}))});YH.muiName="Input";var qH=YH;function $re(r){return On("MuiInputLabel",r)}En("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Pre=["disableAnimation","margin","shrink","variant"],Fre=r=>{const{classes:e,formControl:t,size:o,shrink:i,disableAnimation:l,variant:a,required:c}=r,h=Ln({root:["root",t&&"formControl",!l&&"animated",i&&"shrink",o==="small"&&"sizeSmall",a],asterisk:[c&&"asterisk"]},$re,e);return he({},e,h)},Ure=St(_re,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${F_.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,e[t.variant]]}})(({theme:r,ownerState:e})=>he({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:r.transitions.create(["color","transform","max-width"],{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut})},e.variant==="filled"&&he({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&he({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&he({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))),Hre=G.exports.forwardRef(function(e,t){const o=Nn({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:l}=o,a=jt(o,Pre),c=Ym();let p=l;typeof p=="undefined"&&c&&(p=c.filled||c.focused||c.adornedStart);const h=qm({props:o,muiFormControl:c,states:["size","variant","required"]}),f=he({},o,{disableAnimation:i,formControl:c,shrink:p,size:h.size,variant:h.variant,required:h.required}),_=Fre(f);return Ge(Ure,he({"data-shrink":p,ownerState:f,ref:t},a,{classes:_}))});var Gre=Hre;const Vre=G.exports.createContext({});var ow=Vre;function Wre(r){return On("MuiList",r)}En("MuiList",["root","padding","dense","subheader"]);const zre=["children","className","component","dense","disablePadding","subheader"],Xre=r=>{const{classes:e,disablePadding:t,dense:o,subheader:i}=r;return Ln({root:["root",!t&&"padding",o&&"dense",i&&"subheader"]},Wre,e)},jre=St("ul",{name:"MuiList",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:r})=>he({listStyle:"none",margin:0,padding:0,position:"relative"},!r.disablePadding&&{paddingTop:8,paddingBottom:8},r.subheader&&{paddingTop:0})),Jre=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiList"}),{children:i,className:l,component:a="ul",dense:c=!1,disablePadding:p=!1,subheader:h}=o,f=jt(o,zre),_=G.exports.useMemo(()=>({dense:c}),[c]),m=he({},o,{component:a,dense:c,disablePadding:p}),v=Xre(m);return Ge(ow.Provider,{value:_,children:bo(jre,he({as:a,className:Rt(v.root,l),ref:t,ownerState:m},f,{children:[h,i]}))})});var Kre=Jre;const Yre=En("MuiListItemIcon",["root","alignItemsFlexStart"]);var GD=Yre;const qre=En("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var VD=qre;const Qre=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Nb(r,e,t){return r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:r.firstChild}function WD(r,e,t){return r===e?t?r.firstChild:r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:r.lastChild}function QH(r,e){if(e===void 0)return!0;let t=r.innerText;return t===void 0&&(t=r.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function e_(r,e,t,o,i,l){let a=!1,c=i(r,e,e?t:!1);for(;c;){if(c===r.firstChild){if(a)return!1;a=!0}const p=o?!1:c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||!QH(c,l)||p)c=i(r,c,t);else return c.focus(),!0}return!1}const Zre=G.exports.forwardRef(function(e,t){const{actions:o,autoFocus:i=!1,autoFocusItem:l=!1,children:a,className:c,disabledItemsFocusable:p=!1,disableListWrap:h=!1,onKeyDown:f,variant:_="selectedMenu"}=e,m=jt(e,Qre),v=G.exports.useRef(null),x=G.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});sc(()=>{i&&v.current.focus()},[i]),G.exports.useImperativeHandle(o,()=>({adjustStyleForScrollbar:(M,R)=>{const I=!v.current.style.width;if(M.clientHeight<v.current.clientHeight&&I){const L=`${ZU(Qr(M))}px`;v.current.style[R.direction==="rtl"?"paddingLeft":"paddingRight"]=L,v.current.style.width=`calc(100% + ${L})`}return v.current}}),[]);const b=M=>{const R=v.current,I=M.key,L=Qr(R).activeElement;if(I==="ArrowDown")M.preventDefault(),e_(R,L,h,p,Nb);else if(I==="ArrowUp")M.preventDefault(),e_(R,L,h,p,WD);else if(I==="Home")M.preventDefault(),e_(R,null,h,p,Nb);else if(I==="End")M.preventDefault(),e_(R,null,h,p,WD);else if(I.length===1){const F=x.current,U=I.toLowerCase(),X=performance.now();F.keys.length>0&&(X-F.lastTime>500?(F.keys=[],F.repeating=!0,F.previousKeyMatched=!0):F.repeating&&U!==F.keys[0]&&(F.repeating=!1)),F.lastTime=X,F.keys.push(U);const j=L&&!F.repeating&&QH(L,F);F.previousKeyMatched&&(j||e_(R,L,!1,p,Nb,F))?M.preventDefault():F.previousKeyMatched=!1}f&&f(M)},A=yo(v,t);let k=-1;G.exports.Children.forEach(a,(M,R)=>{!G.exports.isValidElement(M)||M.props.disabled||(_==="selectedMenu"&&M.props.selected||k===-1)&&(k=R)});const E=G.exports.Children.map(a,(M,R)=>{if(R===k){const I={};return l&&(I.autoFocus=!0),M.props.tabIndex===void 0&&_==="selectedMenu"&&(I.tabIndex=0),G.exports.cloneElement(M,I)}return M});return Ge(Kre,he({role:"menu",ref:A,className:c,onKeyDown:b,tabIndex:i?0:-1},m,{children:E}))});var eie=Zre;function tie(r){return On("MuiPopover",r)}En("MuiPopover",["root","paper"]);const nie=["onEntering"],oie=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function zD(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.height/2:e==="bottom"&&(t=r.height),t}function XD(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.width/2:e==="right"&&(t=r.width),t}function jD(r){return[r.horizontal,r.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function $b(r){return typeof r=="function"?r():r}const rie=r=>{const{classes:e}=r;return Ln({root:["root"],paper:["paper"]},tie,e)},iie=St(WH,{name:"MuiPopover",slot:"Root",overridesResolver:(r,e)=>e.root})({}),sie=St(FS,{name:"MuiPopover",slot:"Paper",overridesResolver:(r,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),lie=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiPopover"}),{action:i,anchorEl:l,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:p="anchorEl",children:h,className:f,container:_,elevation:m=8,marginThreshold:v=16,open:x,PaperProps:b={},transformOrigin:A={vertical:"top",horizontal:"left"},TransitionComponent:k=nw,transitionDuration:E="auto",TransitionProps:{onEntering:M}={}}=o,R=jt(o.TransitionProps,nie),I=jt(o,oie),L=G.exports.useRef(),F=yo(L,b.ref),U=he({},o,{anchorOrigin:a,anchorReference:p,elevation:m,marginThreshold:v,PaperProps:b,transformOrigin:A,TransitionComponent:k,transitionDuration:E,TransitionProps:R}),X=rie(U),j=G.exports.useCallback(()=>{if(p==="anchorPosition")return c;const pe=$b(l),Ee=(pe&&pe.nodeType===1?pe:Qr(L.current).body).getBoundingClientRect();return{top:Ee.top+zD(Ee,a.vertical),left:Ee.left+XD(Ee,a.horizontal)}},[l,a.horizontal,a.vertical,c,p]),P=G.exports.useCallback(pe=>({vertical:zD(pe,A.vertical),horizontal:XD(pe,A.horizontal)}),[A.horizontal,A.vertical]),z=G.exports.useCallback(pe=>{const ae={width:pe.offsetWidth,height:pe.offsetHeight},Ee=P(ae);if(p==="none")return{top:null,left:null,transformOrigin:jD(Ee)};const S=j();let D=S.top-Ee.vertical,H=S.left-Ee.horizontal;const q=D+ae.height,Q=H+ae.width,de=Yc($b(l)),je=de.innerHeight-v,We=de.innerWidth-v;if(D<v){const ze=D-v;D-=ze,Ee.vertical+=ze}else if(q>je){const ze=q-je;D-=ze,Ee.vertical+=ze}if(H<v){const ze=H-v;H-=ze,Ee.horizontal+=ze}else if(Q>We){const ze=Q-We;H-=ze,Ee.horizontal+=ze}return{top:`${Math.round(D)}px`,left:`${Math.round(H)}px`,transformOrigin:jD(Ee)}},[l,p,j,P,v]),K=G.exports.useCallback(()=>{const pe=L.current;if(!pe)return;const ae=z(pe);ae.top!==null&&(pe.style.top=ae.top),ae.left!==null&&(pe.style.left=ae.left),pe.style.transformOrigin=ae.transformOrigin},[z]),te=(pe,ae)=>{M&&M(pe,ae),K()};G.exports.useEffect(()=>{x&&K()}),G.exports.useImperativeHandle(i,()=>x?{updatePosition:()=>{K()}}:null,[x,K]),G.exports.useEffect(()=>{if(!x)return;const pe=By(()=>{K()}),ae=Yc(l);return ae.addEventListener("resize",pe),()=>{pe.clear(),ae.removeEventListener("resize",pe)}},[l,x,K]);let oe=E;E==="auto"&&!k.muiSupportAuto&&(oe=void 0);const ee=_||(l?Qr($b(l)).body:void 0);return Ge(iie,he({BackdropProps:{invisible:!0},className:Rt(X.root,f),container:ee,open:x,ref:t,ownerState:U},I,{children:Ge(k,he({appear:!0,in:x,onEntering:te,timeout:oe},R,{children:Ge(sie,he({elevation:m},b,{ref:F,className:Rt(X.paper,b.className),children:h}))}))}))});var aie=lie;function cie(r){return On("MuiMenu",r)}En("MuiMenu",["root","paper","list"]);const uie=["onEntering"],hie=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],pie={vertical:"top",horizontal:"right"},die={vertical:"top",horizontal:"left"},fie=r=>{const{classes:e}=r;return Ln({root:["root"],paper:["paper"],list:["list"]},cie,e)},mie=St(aie,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(r,e)=>e.root})({}),gie=St(FS,{name:"MuiMenu",slot:"Paper",overridesResolver:(r,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_ie=St(eie,{name:"MuiMenu",slot:"List",overridesResolver:(r,e)=>e.list})({outline:0}),yie=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:l,disableAutoFocusItem:a=!1,MenuListProps:c={},onClose:p,open:h,PaperProps:f={},PopoverClasses:_,transitionDuration:m="auto",TransitionProps:{onEntering:v}={},variant:x="selectedMenu"}=o,b=jt(o.TransitionProps,uie),A=jt(o,hie),k=pd(),E=k.direction==="rtl",M=he({},o,{autoFocus:i,disableAutoFocusItem:a,MenuListProps:c,onEntering:v,PaperProps:f,transitionDuration:m,TransitionProps:b,variant:x}),R=fie(M),I=i&&!a&&h,L=G.exports.useRef(null),F=(j,P)=>{L.current&&L.current.adjustStyleForScrollbar(j,k),v&&v(j,P)},U=j=>{j.key==="Tab"&&(j.preventDefault(),p&&p(j,"tabKeyDown"))};let X=-1;return G.exports.Children.map(l,(j,P)=>{!G.exports.isValidElement(j)||j.props.disabled||(x==="selectedMenu"&&j.props.selected||X===-1)&&(X=P)}),Ge(mie,he({classes:_,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?pie:die,PaperProps:he({component:gie},f,{classes:he({},f.classes,{root:R.paper})}),className:R.root,open:h,ref:t,transitionDuration:m,TransitionProps:he({onEntering:F},b),ownerState:M},A,{children:Ge(_ie,he({onKeyDown:U,actions:L,autoFocus:i&&(X===-1||a),autoFocusItem:I,variant:x},c,{className:Rt(R.list,c.className),children:l}))}))});var vie=yie;function Tie(r){return On("MuiMenuItem",r)}const Eie=En("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var t_=Eie;const xie=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],Sie=(r,e)=>{const{ownerState:t}=r;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},Cie=r=>{const{disabled:e,dense:t,divider:o,disableGutters:i,selected:l,classes:a}=r,p=Ln({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",o&&"divider",l&&"selected"]},Tie,a);return he({},a,p)},bie=St(Av,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Sie})(({theme:r,ownerState:e})=>he({},r.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${r.palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:r.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${t_.selected}`]:{backgroundColor:Ni(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${t_.focusVisible}`]:{backgroundColor:Ni(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}},[`&.${t_.selected}:hover`]:{backgroundColor:Ni(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:Ni(r.palette.primary.main,r.palette.action.selectedOpacity)}},[`&.${t_.focusVisible}`]:{backgroundColor:r.palette.action.focus},[`&.${t_.disabled}`]:{opacity:r.palette.action.disabledOpacity},[`& + .${$D.root}`]:{marginTop:r.spacing(1),marginBottom:r.spacing(1)},[`& + .${$D.inset}`]:{marginLeft:52},[`& .${VD.root}`]:{marginTop:0,marginBottom:0},[`& .${VD.inset}`]:{paddingLeft:36},[`& .${GD.root}`]:{minWidth:36}},!e.dense&&{[r.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&he({minHeight:32,paddingTop:4,paddingBottom:4},r.typography.body2,{[`& .${GD.root} svg`]:{fontSize:"1.25rem"}}))),kie=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:l="li",dense:a=!1,divider:c=!1,disableGutters:p=!1,focusVisibleClassName:h,role:f="menuitem",tabIndex:_}=o,m=jt(o,xie),v=G.exports.useContext(ow),x={dense:a||v.dense||!1,disableGutters:p},b=G.exports.useRef(null);sc(()=>{i&&b.current&&b.current.focus()},[i]);const A=he({},o,{dense:x.dense,divider:c,disableGutters:p}),k=Cie(o),E=yo(b,t);let M;return o.disabled||(M=_!==void 0?_:-1),Ge(ow.Provider,{value:x,children:Ge(bie,he({ref:E,role:f,tabIndex:M,component:l,focusVisibleClassName:Rt(k.focusVisible,h)},m,{ownerState:A,classes:k}))})});var Khe=kie;function Aie(r){return On("MuiNativeSelect",r)}const wie=En("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var GR=wie;const Mie=["className","disabled","IconComponent","inputRef","variant"],Rie=r=>{const{classes:e,variant:t,disabled:o,multiple:i,open:l}=r,a={select:["select",t,o&&"disabled",i&&"multiple"],icon:["icon",`icon${Dt(t)}`,l&&"iconOpen",o&&"disabled"]};return Ln(a,Aie,e)},ZH=({ownerState:r,theme:e})=>he({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},[`&.${GR.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},r.variant==="filled"&&{"&&&":{paddingRight:32}},r.variant==="outlined"&&{borderRadius:e.shape.borderRadius,"&:focus":{borderRadius:e.shape.borderRadius},"&&&":{paddingRight:32}}),Bie=St("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:uc,overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.select,e[t.variant],{[`&.${GR.multiple}`]:e.multiple}]}})(ZH),eG=({ownerState:r,theme:e})=>he({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:e.palette.action.active,[`&.${GR.disabled}`]:{color:e.palette.action.disabled}},r.open&&{transform:"rotate(180deg)"},r.variant==="filled"&&{right:7},r.variant==="outlined"&&{right:7}),Iie=St("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${Dt(t.variant)}`],t.open&&e.iconOpen]}})(eG),Oie=G.exports.forwardRef(function(e,t){const{className:o,disabled:i,IconComponent:l,inputRef:a,variant:c="standard"}=e,p=jt(e,Mie),h=he({},e,{disabled:i,variant:c}),f=Rie(h);return bo(G.exports.Fragment,{children:[Ge(Bie,he({ownerState:h,className:Rt(f.select,o),disabled:i,ref:a||t},p)),e.multiple?null:Ge(Iie,{as:l,ownerState:h,className:f.icon})]})});var Die=Oie,JD;const Lie=["children","classes","className","label","notched"],Nie=St("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),$ie=St("legend")(({ownerState:r,theme:e})=>he({float:"unset"},!r.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},r.withLabel&&he({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},r.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Pie(r){const{className:e,label:t,notched:o}=r,i=jt(r,Lie),l=t!=null&&t!=="",a=he({},r,{notched:o,withLabel:l});return Ge(Nie,he({"aria-hidden":!0,className:e,ownerState:a},i,{children:Ge($ie,{ownerState:a,children:l?Ge("span",{children:t}):JD||(JD=Ge("span",{className:"notranslate",children:"\u200B"}))})}))}const Fie=["components","fullWidth","inputComponent","label","multiline","notched","type"],Uie=r=>{const{classes:e}=r,o=Ln({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Nne,e);return he({},e,o)},Hie=St(VS,{shouldForwardProp:r=>uc(r)||r==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:HS})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return he({position:"relative",borderRadius:r.shape.borderRadius,[`&:hover .${Lu.notchedOutline}`]:{borderColor:r.palette.text.primary},"@media (hover: none)":{[`&:hover .${Lu.notchedOutline}`]:{borderColor:t}},[`&.${Lu.focused} .${Lu.notchedOutline}`]:{borderColor:r.palette[e.color].main,borderWidth:2},[`&.${Lu.error} .${Lu.notchedOutline}`]:{borderColor:r.palette.error.main},[`&.${Lu.disabled} .${Lu.notchedOutline}`]:{borderColor:r.palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&he({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Gie=St(Pie,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(r,e)=>e.notchedOutline})(({theme:r})=>({borderColor:r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"})),Vie=St(WS,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:GS})(({theme:r,ownerState:e})=>he({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),tG=G.exports.forwardRef(function(e,t){var o;const i=Nn({props:e,name:"MuiOutlinedInput"}),{components:l={},fullWidth:a=!1,inputComponent:c="input",label:p,multiline:h=!1,notched:f,type:_="text"}=i,m=jt(i,Fie),v=Uie(i),x=Ym(),b=qm({props:i,muiFormControl:x,states:["required"]});return Ge(UR,he({components:he({Root:Hie,Input:Vie},l),renderSuffix:A=>Ge(Gie,{className:v.notchedOutline,label:p!=null&&p!==""&&b.required?o||(o=bo(G.exports.Fragment,{children:[p,"\xA0","*"]})):p,notched:typeof f!="undefined"?f:Boolean(A.startAdornment||A.filled||A.focused)}),fullWidth:a,inputComponent:c,multiline:h,ref:t,type:_},m,{classes:he({},v,{notchedOutline:null})}))});tG.muiName="Input";var nG=tG;function Wie(r){return On("MuiSelect",r)}const zie=En("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var I0=zie,KD;const Xie=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],jie=St("div",{name:"MuiSelect",slot:"Select",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`&.${I0.select}`]:e.select},{[`&.${I0.select}`]:e[t.variant]},{[`&.${I0.multiple}`]:e.multiple}]}})(ZH,{[`&.${I0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Jie=St("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${Dt(t.variant)}`],t.open&&e.iconOpen]}})(eG),Kie=St("input",{shouldForwardProp:r=>LR(r)&&r!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(r,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function YD(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}function Yie(r){return r==null||typeof r=="string"&&!r.trim()}const qie=r=>{const{classes:e,variant:t,disabled:o,multiple:i,open:l}=r,a={select:["select",t,o&&"disabled",i&&"multiple"],icon:["icon",`icon${Dt(t)}`,l&&"iconOpen",o&&"disabled"],nativeInput:["nativeInput"]};return Ln(a,Wie,e)},Qie=G.exports.forwardRef(function(e,t){const{"aria-describedby":o,"aria-label":i,autoFocus:l,autoWidth:a,children:c,className:p,defaultOpen:h,defaultValue:f,disabled:_,displayEmpty:m,IconComponent:v,inputRef:x,labelId:b,MenuProps:A={},multiple:k,name:E,onBlur:M,onChange:R,onClose:I,onFocus:L,onOpen:F,open:U,readOnly:X,renderValue:j,SelectDisplayProps:P={},tabIndex:z,value:K,variant:te="standard"}=e,oe=jt(e,Xie),[ee,pe]=sx({controlled:K,default:f,name:"Select"}),[ae,Ee]=sx({controlled:U,default:h,name:"Select"}),S=G.exports.useRef(null),D=G.exports.useRef(null),[H,q]=G.exports.useState(null),{current:Q}=G.exports.useRef(U!=null),[de,je]=G.exports.useState(),We=yo(t,x),ze=G.exports.useCallback(_e=>{D.current=_e,_e&&q(_e)},[]);G.exports.useImperativeHandle(We,()=>({focus:()=>{D.current.focus()},node:S.current,value:ee}),[ee]),G.exports.useEffect(()=>{h&&ae&&H&&!Q&&(je(a?null:H.clientWidth),D.current.focus())},[H,a]),G.exports.useEffect(()=>{l&&D.current.focus()},[l]),G.exports.useEffect(()=>{if(!b)return;const _e=Qr(D.current).getElementById(b);if(_e){const ke=()=>{getSelection().isCollapsed&&D.current.focus()};return _e.addEventListener("click",ke),()=>{_e.removeEventListener("click",ke)}}},[b]);const Oe=(_e,ke)=>{_e?F&&F(ke):I&&I(ke),Q||(je(a?null:H.clientWidth),Ee(_e))},Ye=_e=>{_e.button===0&&(_e.preventDefault(),D.current.focus(),Oe(!0,_e))},et=_e=>{Oe(!1,_e)},Re=G.exports.Children.toArray(c),Te=_e=>{const ke=Re.map(Ce=>Ce.props.value).indexOf(_e.target.value);if(ke===-1)return;const me=Re[ke];pe(me.props.value),R&&R(_e,me)},Le=_e=>ke=>{let me;if(!!ke.currentTarget.hasAttribute("tabindex")){if(k){me=Array.isArray(ee)?ee.slice():[];const Ce=ee.indexOf(_e.props.value);Ce===-1?me.push(_e.props.value):me.splice(Ce,1)}else me=_e.props.value;if(_e.props.onClick&&_e.props.onClick(ke),ee!==me&&(pe(me),R)){const Ce=ke.nativeEvent||ke,le=new Ce.constructor(Ce.type,Ce);Object.defineProperty(le,"target",{writable:!0,value:{value:me,name:E}}),R(le,_e)}k||Oe(!1,ke)}},Ke=_e=>{X||[" ","ArrowUp","ArrowDown","Enter"].indexOf(_e.key)!==-1&&(_e.preventDefault(),Oe(!0,_e))},Ne=H!==null&&ae,qe=_e=>{!Ne&&M&&(Object.defineProperty(_e,"target",{writable:!0,value:{value:ee,name:E}}),M(_e))};delete oe["aria-invalid"];let lt,ue;const rt=[];let xt=!1;(FR({value:ee})||m)&&(j?lt=j(ee):xt=!0);const ie=Re.map(_e=>{if(!G.exports.isValidElement(_e))return null;let ke;if(k){if(!Array.isArray(ee))throw new Error(ed(2));ke=ee.some(me=>YD(me,_e.props.value)),ke&&xt&&rt.push(_e.props.children)}else ke=YD(ee,_e.props.value),ke&&xt&&(ue=_e.props.children);return G.exports.cloneElement(_e,{"aria-selected":ke?"true":"false",onClick:Le(_e),onKeyUp:me=>{me.key===" "&&me.preventDefault(),_e.props.onKeyUp&&_e.props.onKeyUp(me)},role:"option",selected:ke,value:void 0,"data-value":_e.props.value})});xt&&(k?rt.length===0?lt=null:lt=rt.reduce((_e,ke,me)=>(_e.push(ke),me<rt.length-1&&_e.push(", "),_e),[]):lt=ue);let Z=de;!a&&Q&&H&&(Z=H.clientWidth);let B;typeof z!="undefined"?B=z:B=_?null:0;const Ae=P.id||(E?`mui-component-select-${E}`:void 0),Ue=he({},e,{variant:te,value:ee,open:Ne}),ge=qie(Ue);return bo(G.exports.Fragment,{children:[Ge(jie,he({ref:ze,tabIndex:B,role:"button","aria-disabled":_?"true":void 0,"aria-expanded":Ne?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,Ae].filter(Boolean).join(" ")||void 0,"aria-describedby":o,onKeyDown:Ke,onMouseDown:_||X?null:Ye,onBlur:qe,onFocus:L},P,{ownerState:Ue,className:Rt(ge.select,p,P.className),id:Ae,children:Yie(lt)?KD||(KD=Ge("span",{className:"notranslate",children:"\u200B"})):lt})),Ge(Kie,he({value:Array.isArray(ee)?ee.join(","):ee,name:E,ref:S,"aria-hidden":!0,onChange:Te,tabIndex:-1,disabled:_,className:ge.nativeInput,autoFocus:l,ownerState:Ue},oe)),Ge(Jie,{as:v,className:ge.icon,ownerState:Ue}),Ge(vie,he({id:`menu-${E||""}`,anchorEl:H,open:Ne,onClose:et,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},A,{MenuListProps:he({"aria-labelledby":b,role:"listbox",disableListWrap:!0},A.MenuListProps),PaperProps:he({},A.PaperProps,{style:he({minWidth:Z},A.PaperProps!=null?A.PaperProps.style:null)}),children:ie}))]})});var Zie=Qie,qD,QD;const ese=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],tse=r=>{const{classes:e}=r;return e},VR={name:"MuiSelect",overridesResolver:(r,e)=>e.root,shouldForwardProp:r=>uc(r)&&r!=="variant",slot:"Root"},nse=St(qH,VR)(""),ose=St(nG,VR)(""),rse=St(jH,VR)(""),oG=G.exports.forwardRef(function(e,t){const o=Nn({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:l,classes:a={},className:c,defaultOpen:p=!1,displayEmpty:h=!1,IconComponent:f=Une,id:_,input:m,inputProps:v,label:x,labelId:b,MenuProps:A,multiple:k=!1,native:E=!1,onClose:M,onOpen:R,open:I,renderValue:L,SelectDisplayProps:F,variant:U="outlined"}=o,X=jt(o,ese),j=E?Die:Zie,P=Ym(),K=qm({props:o,muiFormControl:P,states:["variant"]}).variant||U,te=m||{standard:qD||(qD=Ge(nse,{})),outlined:Ge(ose,{label:x}),filled:QD||(QD=Ge(rse,{}))}[K],oe=he({},o,{variant:K,classes:a}),ee=tse(oe),pe=yo(t,te.ref);return G.exports.cloneElement(te,he({inputComponent:j,inputProps:he({children:l,IconComponent:f,variant:K,type:void 0,multiple:k},E?{id:_}:{autoWidth:i,defaultOpen:p,displayEmpty:h,labelId:b,MenuProps:A,onClose:M,onOpen:R,open:I,renderValue:L,SelectDisplayProps:he({id:_},F)},v,{classes:v?Rl(ee,v.classes):ee},m?m.props.inputProps:{})},k&&E&&K==="outlined"?{notched:!0}:{},{ref:pe,className:Rt(te.props.className,c),variant:K},X))});oG.muiName="Select";var ise=oG;const sse=["component","components","componentsProps","color","size"],ju=he({},fE,En("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),lse=St("span",{name:"MuiSlider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r,o=t.marksProp===!0&&t.step!==null?[...Array(Math.floor((t.max-t.min)/t.step)+1)].map((l,a)=>({value:t.min+t.step*a})):t.marksProp||[],i=o.length>0&&o.some(l=>l.label);return[e.root,e[`color${Dt(t.color)}`],t.size!=="medium"&&e[`size${Dt(t.size)}`],i&&e.marked,t.orientation==="vertical"&&e.vertical,t.track==="inverted"&&e.trackInverted,t.track===!1&&e.trackFalse]}})(({theme:r,ownerState:e})=>he({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:r.palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&he({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&he({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${ju.disabled}`]:{pointerEvents:"none",cursor:"default",color:r.palette.grey[400]},[`&.${ju.dragging}`]:{[`& .${ju.thumb}, & .${ju.track}`]:{transition:"none"}}})),ase=St("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(r,e)=>e.rail})(({ownerState:r})=>he({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},r.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},r.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},r.track==="inverted"&&{opacity:1})),cse=St("span",{name:"MuiSlider",slot:"Track",overridesResolver:(r,e)=>e.track})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light"?xH(r.palette[e.color].main,.62):EH(r.palette[e.color].main,.5);return he({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:r.transitions.create(["left","width","bottom","height"],{duration:r.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:t,borderColor:t})}),use=St("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.thumb,e[`thumbColor${Dt(t.color)}`],t.size!=="medium"&&e[`thumbSize${Dt(t.size)}`]]}})(({theme:r,ownerState:e})=>he({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:r.transitions.create(["box-shadow","left","bottom"],{duration:r.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":he({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:r.shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${ju.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${Ni(r.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${ju.active}`]:{boxShadow:`0px 0px 0px 14px ${Ni(r.palette[e.color].main,.16)}`},[`&.${ju.disabled}`]:{"&:hover":{boxShadow:"none"}}})),hse=St(OH,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(r,e)=>e.valueLabel})(({theme:r,ownerState:e})=>he({[`&.${ju.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},r.typography.body2,{fontWeight:500,transition:r.transitions.create(["transform"],{duration:r.transitions.duration.shortest}),top:-10,transformOrigin:"bottom center",transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:r.palette.grey[600],borderRadius:2,color:r.palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.size==="small"&&{fontSize:r.typography.pxToRem(12),padding:"0.25rem 0.5rem"},{"&:before":{position:"absolute",content:'""',width:8,height:8,bottom:0,left:"50%",transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit"}})),pse=St("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:r=>LR(r)&&r!=="markActive",overridesResolver:(r,e)=>e.mark})(({theme:r,ownerState:e,markActive:t})=>he({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},t&&{backgroundColor:r.palette.background.paper,opacity:.8})),dse=St("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:r=>LR(r)&&r!=="markLabelActive",overridesResolver:(r,e)=>e.markLabel})(({theme:r,ownerState:e,markLabelActive:t})=>he({},r.typography.body2,{color:r.palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},t&&{color:r.palette.text.primary})),fse=r=>{const{color:e,size:t,classes:o={}}=r;return he({},o,{root:Rt(o.root,__(`color${Dt(e)}`),o[`color${Dt(e)}`],t&&[__(`size${Dt(t)}`),o[`size${Dt(t)}`]]),thumb:Rt(o.thumb,__(`thumbColor${Dt(e)}`),o[`thumbColor${Dt(e)}`],t&&[__(`thumbSize${Dt(t)}`),o[`thumbSize${Dt(t)}`]])})},mse=G.exports.forwardRef(function(e,t){var o,i,l,a;const c=Nn({props:e,name:"MuiSlider"}),h=pd().direction==="rtl",{component:f="span",components:_={},componentsProps:m={},color:v="primary",size:x="medium"}=c,b=jt(c,sse),A=he({},c,{color:v,size:x}),k=fse(A);return Ge(rte,he({},b,{isRtl:h,components:he({Root:lse,Rail:ase,Track:cse,Thumb:use,ValueLabel:hse,Mark:pse,MarkLabel:dse},_),componentsProps:he({},m,{root:he({},m.root,R0(_.Root)&&{as:f,ownerState:he({},(o=m.root)==null?void 0:o.ownerState,{color:v,size:x})}),thumb:he({},m.thumb,R0(_.Thumb)&&{ownerState:he({},(i=m.thumb)==null?void 0:i.ownerState,{color:v,size:x})}),track:he({},m.track,R0(_.Track)&&{ownerState:he({},(l=m.track)==null?void 0:l.ownerState,{color:v,size:x})}),valueLabel:he({},m.valueLabel,R0(_.ValueLabel)&&{ownerState:he({},(a=m.valueLabel)==null?void 0:a.ownerState,{color:v,size:x})})}),classes:k,ref:t}))});var Yhe=mse;function gse(r){return On("MuiTooltip",r)}const _se=En("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);var Ju=_se;const yse=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function vse(r){return Math.round(r*1e5)/1e5}const Tse=r=>{const{classes:e,disableInteractive:t,arrow:o,touch:i,placement:l}=r,a={popper:["popper",!t&&"popperInteractive",o&&"popperArrow"],tooltip:["tooltip",o&&"tooltipArrow",i&&"touch",`tooltipPlacement${Dt(l.split("-")[0])}`],arrow:["arrow"]};return Ln(a,gse,e)},Ese=St(UH,{name:"MuiTooltip",slot:"Popper",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.popper,!t.disableInteractive&&e.popperInteractive,t.arrow&&e.popperArrow,!t.open&&e.popperClose]}})(({theme:r,ownerState:e,open:t})=>he({zIndex:r.zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!t&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Ju.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ju.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ju.arrow}`]:he({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ju.arrow}`]:he({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),xse=St("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.tooltip,t.touch&&e.touch,t.arrow&&e.tooltipArrow,e[`tooltipPlacement${Dt(t.placement.split("-")[0])}`]]}})(({theme:r,ownerState:e})=>he({backgroundColor:Ni(r.palette.grey[700],.92),borderRadius:r.shape.borderRadius,color:r.palette.common.white,fontFamily:r.typography.fontFamily,padding:"4px 8px",fontSize:r.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:r.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:r.typography.pxToRem(14),lineHeight:`${vse(16/14)}em`,fontWeight:r.typography.fontWeightRegular},{[`.${Ju.popper}[data-popper-placement*="left"] &`]:he({transformOrigin:"right center"},e.isRtl?he({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):he({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Ju.popper}[data-popper-placement*="right"] &`]:he({transformOrigin:"left center"},e.isRtl?he({marginRight:"14px"},e.touch&&{marginRight:"24px"}):he({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Ju.popper}[data-popper-placement*="top"] &`]:he({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Ju.popper}[data-popper-placement*="bottom"] &`]:he({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),Sse=St("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(r,e)=>e.arrow})(({theme:r})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:Ni(r.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let O0=!1,Pb=null;function D0(r,e){return t=>{e&&e(t),r(t)}}const Cse=G.exports.forwardRef(function(e,t){var o,i,l,a,c,p;const h=Nn({props:e,name:"MuiTooltip"}),{arrow:f=!1,children:_,components:m={},componentsProps:v={},describeChild:x=!1,disableFocusListener:b=!1,disableHoverListener:A=!1,disableInteractive:k=!1,disableTouchListener:E=!1,enterDelay:M=100,enterNextDelay:R=0,enterTouchDelay:I=700,followCursor:L=!1,id:F,leaveDelay:U=0,leaveTouchDelay:X=1500,onClose:j,onOpen:P,open:z,placement:K="bottom",PopperComponent:te,PopperProps:oe={},title:ee,TransitionComponent:pe=nw,TransitionProps:ae}=h,Ee=jt(h,yse),S=pd(),D=S.direction==="rtl",[H,q]=G.exports.useState(),[Q,de]=G.exports.useState(null),je=G.exports.useRef(!1),We=k||L,ze=G.exports.useRef(),Oe=G.exports.useRef(),Ye=G.exports.useRef(),et=G.exports.useRef(),[Re,Te]=sx({controlled:z,default:!1,name:"Tooltip",state:"open"});let Le=Re;const Ke=vR(F),Ne=G.exports.useRef(),qe=G.exports.useCallback(()=>{Ne.current!==void 0&&(document.body.style.WebkitUserSelect=Ne.current,Ne.current=void 0),clearTimeout(et.current)},[]);G.exports.useEffect(()=>()=>{clearTimeout(ze.current),clearTimeout(Oe.current),clearTimeout(Ye.current),qe()},[qe]);const lt=xe=>{clearTimeout(Pb),O0=!0,Te(!0),P&&!Le&&P(xe)},ue=Js(xe=>{clearTimeout(Pb),Pb=setTimeout(()=>{O0=!1},800+U),Te(!1),j&&Le&&j(xe),clearTimeout(ze.current),ze.current=setTimeout(()=>{je.current=!1},S.transitions.duration.shortest)}),rt=xe=>{je.current&&xe.type!=="touchstart"||(H&&H.removeAttribute("title"),clearTimeout(Oe.current),clearTimeout(Ye.current),M||O0&&R?Oe.current=setTimeout(()=>{lt(xe)},O0?R:M):lt(xe))},xt=xe=>{clearTimeout(Oe.current),clearTimeout(Ye.current),Ye.current=setTimeout(()=>{ue(xe)},U)},{isFocusVisibleRef:ie,onBlur:Z,onFocus:B,ref:Ae}=TR(),[,Ue]=G.exports.useState(!1),ge=xe=>{Z(xe),ie.current===!1&&(Ue(!1),xt(xe))},_e=xe=>{H||q(xe.currentTarget),B(xe),ie.current===!0&&(Ue(!0),rt(xe))},ke=xe=>{je.current=!0;const Fe=_.props;Fe.onTouchStart&&Fe.onTouchStart(xe)},me=rt,Ce=xt,le=xe=>{ke(xe),clearTimeout(Ye.current),clearTimeout(ze.current),qe(),Ne.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",et.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ne.current,rt(xe)},I)},W=xe=>{_.props.onTouchEnd&&_.props.onTouchEnd(xe),qe(),clearTimeout(Ye.current),Ye.current=setTimeout(()=>{ue(xe)},X)};G.exports.useEffect(()=>{if(!Le)return;function xe(Fe){(Fe.key==="Escape"||Fe.key==="Esc")&&ue(Fe)}return document.addEventListener("keydown",xe),()=>{document.removeEventListener("keydown",xe)}},[ue,Le]);const Me=yo(q,t),we=yo(Ae,Me),yt=yo(_.ref,we);ee===""&&(Le=!1);const $e=G.exports.useRef({x:0,y:0}),nt=G.exports.useRef(),it=xe=>{const Fe=_.props;Fe.onMouseMove&&Fe.onMouseMove(xe),$e.current={x:xe.clientX,y:xe.clientY},nt.current&&nt.current.update()},Jt={},$n=typeof ee=="string";x?(Jt.title=!Le&&$n&&!A?ee:null,Jt["aria-describedby"]=Le?Ke:null):(Jt["aria-label"]=$n?ee:null,Jt["aria-labelledby"]=Le&&!$n?Ke:null);const ce=he({},Jt,Ee,_.props,{className:Rt(Ee.className,_.props.className),onTouchStart:ke,ref:yt},L?{onMouseMove:it}:{}),cn={};E||(ce.onTouchStart=le,ce.onTouchEnd=W),A||(ce.onMouseOver=D0(me,ce.onMouseOver),ce.onMouseLeave=D0(Ce,ce.onMouseLeave),We||(cn.onMouseOver=me,cn.onMouseLeave=Ce)),b||(ce.onFocus=D0(_e,ce.onFocus),ce.onBlur=D0(ge,ce.onBlur),We||(cn.onFocus=_e,cn.onBlur=ge));const Ie=G.exports.useMemo(()=>{var xe;let Fe=[{name:"arrow",enabled:Boolean(Q),options:{element:Q,padding:4}}];return(xe=oe.popperOptions)!=null&&xe.modifiers&&(Fe=Fe.concat(oe.popperOptions.modifiers)),he({},oe.popperOptions,{modifiers:Fe})},[Q,oe]),fr=he({},h,{isRtl:D,arrow:f,disableInteractive:We,placement:K,PopperComponentProp:te,touch:je.current}),da=Tse(fr),al=(o=m.Popper)!=null?o:Ese,Ll=(i=(l=m.Transition)!=null?l:pe)!=null?i:nw,dc=(a=m.Tooltip)!=null?a:xse,fa=(c=m.Arrow)!=null?c:Sse,lu=yl(al,he({},oe,v.popper),fr),re=yl(Ll,he({},ae,v.transition),fr),Se=yl(dc,he({},v.tooltip),fr),De=yl(fa,he({},v.arrow),fr);return bo(G.exports.Fragment,{children:[G.exports.cloneElement(_,ce),Ge(al,he({as:te!=null?te:UH,placement:K,anchorEl:L?{getBoundingClientRect:()=>({top:$e.current.y,left:$e.current.x,right:$e.current.x,bottom:$e.current.y,width:0,height:0})}:H,popperRef:nt,open:H?Le:!1,id:Ke,transition:!0},cn,lu,{className:Rt(da.popper,oe==null?void 0:oe.className,(p=v.popper)==null?void 0:p.className),popperOptions:Ie,children:({TransitionProps:xe})=>{var Fe,Pt;return Ge(Ll,he({timeout:S.transitions.duration.shorter},xe,re,{children:bo(dc,he({},Se,{className:Rt(da.tooltip,(Fe=v.tooltip)==null?void 0:Fe.className),children:[ee,f?Ge(fa,he({},De,{className:Rt(da.arrow,(Pt=v.arrow)==null?void 0:Pt.className),ref:de})):null]}))}))}}))]})});var qhe=Cse;function bse(r){return On("MuiTab",r)}const kse=En("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]);var rp=kse;const Ase=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],wse=r=>{const{classes:e,textColor:t,fullWidth:o,wrapped:i,icon:l,label:a,selected:c,disabled:p}=r,h={root:["root",l&&a&&"labelIcon",`textColor${Dt(t)}`,o&&"fullWidth",i&&"wrapped",c&&"selected",p&&"disabled"],iconWrapper:["iconWrapper"]};return Ln(h,bse,e)},Mse=St(Av,{name:"MuiTab",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.label&&t.icon&&e.labelIcon,e[`textColor${Dt(t.textColor)}`],t.fullWidth&&e.fullWidth,t.wrapped&&e.wrapped]}})(({theme:r,ownerState:e})=>he({},r.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${rp.iconWrapper}`]:he({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:r.spacing(1)},e.iconPosition==="end"&&{marginLeft:r.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${rp.selected}`]:{opacity:1},[`&.${rp.disabled}`]:{opacity:r.palette.action.disabledOpacity}},e.textColor==="primary"&&{color:r.palette.text.secondary,[`&.${rp.selected}`]:{color:r.palette.primary.main},[`&.${rp.disabled}`]:{color:r.palette.text.disabled}},e.textColor==="secondary"&&{color:r.palette.text.secondary,[`&.${rp.selected}`]:{color:r.palette.secondary.main},[`&.${rp.disabled}`]:{color:r.palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:r.typography.pxToRem(12)})),Rse=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiTab"}),{className:i,disabled:l=!1,disableFocusRipple:a=!1,fullWidth:c,icon:p,iconPosition:h="top",indicator:f,label:_,onChange:m,onClick:v,onFocus:x,selected:b,selectionFollowsFocus:A,textColor:k="inherit",value:E,wrapped:M=!1}=o,R=jt(o,Ase),I=he({},o,{disabled:l,disableFocusRipple:a,selected:b,icon:!!p,iconPosition:h,label:!!_,fullWidth:c,textColor:k,wrapped:M}),L=wse(I),F=p&&_&&G.exports.isValidElement(p)?G.exports.cloneElement(p,{className:Rt(L.iconWrapper,p.props.className)}):p,U=j=>{!b&&m&&m(j,E),v&&v(j)},X=j=>{A&&!b&&m&&m(j,E),x&&x(j)};return bo(Mse,he({focusRipple:!a,className:Rt(L.root,i),ref:t,role:"tab","aria-selected":b,disabled:l,onClick:U,onFocus:X,ownerState:I,tabIndex:b?0:-1},R,{children:[h==="top"||h==="start"?bo(G.exports.Fragment,{children:[F,_]}):bo(G.exports.Fragment,{children:[_,F]}),f]}))});var Qhe=Rse,Bse=Cr(Ge("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Ise=Cr(Ge("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Ose(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function Dse(r,e,t,o={},i=()=>{}){const{ease:l=Ose,duration:a=300}=o;let c=null;const p=e[r];let h=!1;const f=()=>{h=!0},_=m=>{if(h){i(new Error("Animation cancelled"));return}c===null&&(c=m);const v=Math.min(1,(m-c)/a);if(e[r]=l(v)*(t-p)+p,v>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(_)};return p===t?(i(new Error("Element already at target position")),f):(requestAnimationFrame(_),f)}const Lse=["onChange"],Nse={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function $se(r){const{onChange:e}=r,t=jt(r,Lse),o=G.exports.useRef(),i=G.exports.useRef(null),l=()=>{o.current=i.current.offsetHeight-i.current.clientHeight};return G.exports.useEffect(()=>{const a=By(()=>{const p=o.current;l(),p!==o.current&&e(o.current)}),c=Yc(i.current);return c.addEventListener("resize",a),()=>{a.clear(),c.removeEventListener("resize",a)}},[e]),G.exports.useEffect(()=>{l(),e(o.current)},[e]),Ge("div",he({style:Nse,ref:i},t))}function Pse(r){return On("MuiTabScrollButton",r)}const Fse=En("MuiTabScrollButton",["root","vertical","horizontal","disabled"]);var Use=Fse,ZD,eL;const Hse=["className","direction","orientation","disabled"],Gse=r=>{const{classes:e,orientation:t,disabled:o}=r;return Ln({root:["root",t,o&&"disabled"]},Pse,e)},Vse=St(Av,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.orientation&&e[t.orientation]]}})(({ownerState:r})=>he({width:40,flexShrink:0,opacity:.8,[`&.${Use.disabled}`]:{opacity:0}},r.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${r.isRtl?-90:90}deg)`}})),Wse=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiTabScrollButton"}),{className:i,direction:l}=o,a=jt(o,Hse),p=pd().direction==="rtl",h=he({isRtl:p},o),f=Gse(h);return Ge(Vse,he({component:"div",className:Rt(f.root,i),ref:t,role:null,ownerState:h,tabIndex:null},a,{children:l==="left"?ZD||(ZD=Ge(Bse,{fontSize:"small"})):eL||(eL=Ge(Ise,{fontSize:"small"}))}))});var zse=Wse;function Xse(r){return On("MuiTabs",r)}const jse=En("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]);var Fb=jse;const Jse=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],tL=(r,e)=>r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r.firstChild,nL=(r,e)=>r===e?r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r.lastChild,L0=(r,e,t)=>{let o=!1,i=t(r,e);for(;i;){if(i===r.firstChild){if(o)return;o=!0}const l=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||l)i=t(r,i);else{i.focus();return}}},Kse=r=>{const{vertical:e,fixed:t,hideScrollbar:o,scrollableX:i,scrollableY:l,centered:a,scrollButtonsHideMobile:c,classes:p}=r;return Ln({root:["root",e&&"vertical"],scroller:["scroller",t&&"fixed",o&&"hideScrollbar",i&&"scrollableX",l&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",c&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[o&&"hideScrollbar"]},Xse,p)},Yse=St("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${Fb.scrollButtons}`]:e.scrollButtons},{[`& .${Fb.scrollButtons}`]:t.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,t.vertical&&e.vertical]}})(({ownerState:r,theme:e})=>he({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},r.vertical&&{flexDirection:"column"},r.scrollButtonsHideMobile&&{[`& .${Fb.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),qse=St("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.scroller,t.fixed&&e.fixed,t.hideScrollbar&&e.hideScrollbar,t.scrollableX&&e.scrollableX,t.scrollableY&&e.scrollableY]}})(({ownerState:r})=>he({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},r.fixed&&{overflowX:"hidden",width:"100%"},r.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},r.scrollableX&&{overflowX:"auto",overflowY:"hidden"},r.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Qse=St("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.flexContainer,t.vertical&&e.flexContainerVertical,t.centered&&e.centered]}})(({ownerState:r})=>he({display:"flex"},r.vertical&&{flexDirection:"column"},r.centered&&{justifyContent:"center"})),Zse=St("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(r,e)=>e.indicator})(({ownerState:r,theme:e})=>he({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},r.indicatorColor==="primary"&&{backgroundColor:e.palette.primary.main},r.indicatorColor==="secondary"&&{backgroundColor:e.palette.secondary.main},r.vertical&&{height:"100%",width:2,right:0})),ele=St($se,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),oL={},tle=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiTabs"}),i=pd(),l=i.direction==="rtl",{"aria-label":a,"aria-labelledby":c,action:p,centered:h=!1,children:f,className:_,component:m="div",allowScrollButtonsMobile:v=!1,indicatorColor:x="primary",onChange:b,orientation:A="horizontal",ScrollButtonComponent:k=zse,scrollButtons:E="auto",selectionFollowsFocus:M,TabIndicatorProps:R={},TabScrollButtonProps:I={},textColor:L="primary",value:F,variant:U="standard",visibleScrollbar:X=!1}=o,j=jt(o,Jse),P=U==="scrollable",z=A==="vertical",K=z?"scrollTop":"scrollLeft",te=z?"top":"left",oe=z?"bottom":"right",ee=z?"clientHeight":"clientWidth",pe=z?"height":"width",ae=he({},o,{component:m,allowScrollButtonsMobile:v,indicatorColor:x,orientation:A,vertical:z,scrollButtons:E,textColor:L,variant:U,visibleScrollbar:X,fixed:!P,hideScrollbar:P&&!X,scrollableX:P&&!z,scrollableY:P&&z,centered:h&&!P,scrollButtonsHideMobile:!v}),Ee=Kse(ae),[S,D]=G.exports.useState(!1),[H,q]=G.exports.useState(oL),[Q,de]=G.exports.useState({start:!1,end:!1}),[je,We]=G.exports.useState({overflow:"hidden",scrollbarWidth:0}),ze=new Map,Oe=G.exports.useRef(null),Ye=G.exports.useRef(null),et=()=>{const _e=Oe.current;let ke;if(_e){const Ce=_e.getBoundingClientRect();ke={clientWidth:_e.clientWidth,scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop,scrollLeftNormalized:nD(_e,i.direction),scrollWidth:_e.scrollWidth,top:Ce.top,bottom:Ce.bottom,left:Ce.left,right:Ce.right}}let me;if(_e&&F!==!1){const Ce=Ye.current.children;if(Ce.length>0){const le=Ce[ze.get(F)];me=le?le.getBoundingClientRect():null}}return{tabsMeta:ke,tabMeta:me}},Re=Js(()=>{const{tabsMeta:_e,tabMeta:ke}=et();let me=0,Ce;if(z)Ce="top",ke&&_e&&(me=ke.top-_e.top+_e.scrollTop);else if(Ce=l?"right":"left",ke&&_e){const W=l?_e.scrollLeftNormalized+_e.clientWidth-_e.scrollWidth:_e.scrollLeft;me=(l?-1:1)*(ke[Ce]-_e[Ce]+W)}const le={[Ce]:me,[pe]:ke?ke[pe]:0};if(isNaN(H[Ce])||isNaN(H[pe]))q(le);else{const W=Math.abs(H[Ce]-le[Ce]),Me=Math.abs(H[pe]-le[pe]);(W>=1||Me>=1)&&q(le)}}),Te=(_e,{animation:ke=!0}={})=>{ke?Dse(K,Oe.current,_e,{duration:i.transitions.duration.standard}):Oe.current[K]=_e},Le=_e=>{let ke=Oe.current[K];z?ke+=_e:(ke+=_e*(l?-1:1),ke*=l&&eH()==="reverse"?-1:1),Te(ke)},Ke=()=>{const _e=Oe.current[ee];let ke=0;const me=Array.from(Ye.current.children);for(let Ce=0;Ce<me.length;Ce+=1){const le=me[Ce];if(ke+le[ee]>_e)break;ke+=le[ee]}return ke},Ne=()=>{Le(-1*Ke())},qe=()=>{Le(Ke())},lt=G.exports.useCallback(_e=>{We({overflow:null,scrollbarWidth:_e})},[]),ue=()=>{const _e={};_e.scrollbarSizeListener=P?Ge(ele,{onChange:lt,className:Rt(Ee.scrollableX,Ee.hideScrollbar)}):null;const ke=Q.start||Q.end,me=P&&(E==="auto"&&ke||E===!0);return _e.scrollButtonStart=me?Ge(k,he({orientation:A,direction:l?"right":"left",onClick:Ne,disabled:!Q.start},I,{className:Rt(Ee.scrollButtons,I.className)})):null,_e.scrollButtonEnd=me?Ge(k,he({orientation:A,direction:l?"left":"right",onClick:qe,disabled:!Q.end},I,{className:Rt(Ee.scrollButtons,I.className)})):null,_e},rt=Js(_e=>{const{tabsMeta:ke,tabMeta:me}=et();if(!(!me||!ke)){if(me[te]<ke[te]){const Ce=ke[K]+(me[te]-ke[te]);Te(Ce,{animation:_e})}else if(me[oe]>ke[oe]){const Ce=ke[K]+(me[oe]-ke[oe]);Te(Ce,{animation:_e})}}}),xt=Js(()=>{if(P&&E!==!1){const{scrollTop:_e,scrollHeight:ke,clientHeight:me,scrollWidth:Ce,clientWidth:le}=Oe.current;let W,Me;if(z)W=_e>1,Me=_e<ke-me-1;else{const we=nD(Oe.current,i.direction);W=l?we<Ce-le-1:we>1,Me=l?we>1:we<Ce-le-1}(W!==Q.start||Me!==Q.end)&&de({start:W,end:Me})}});G.exports.useEffect(()=>{const _e=By(()=>{Re(),xt()}),ke=Yc(Oe.current);ke.addEventListener("resize",_e);let me;return typeof ResizeObserver!="undefined"&&(me=new ResizeObserver(_e),Array.from(Ye.current.children).forEach(Ce=>{me.observe(Ce)})),()=>{_e.clear(),ke.removeEventListener("resize",_e),me&&me.disconnect()}},[Re,xt]);const ie=G.exports.useMemo(()=>By(()=>{xt()}),[xt]);G.exports.useEffect(()=>()=>{ie.clear()},[ie]),G.exports.useEffect(()=>{D(!0)},[]),G.exports.useEffect(()=>{Re(),xt()}),G.exports.useEffect(()=>{rt(oL!==H)},[rt,H]),G.exports.useImperativeHandle(p,()=>({updateIndicator:Re,updateScrollButtons:xt}),[Re,xt]);const Z=Ge(Zse,he({},R,{className:Rt(Ee.indicator,R.className),ownerState:ae,style:he({},H,R.style)}));let B=0;const Ae=G.exports.Children.map(f,_e=>{if(!G.exports.isValidElement(_e))return null;const ke=_e.props.value===void 0?B:_e.props.value;ze.set(ke,B);const me=ke===F;return B+=1,G.exports.cloneElement(_e,he({fullWidth:U==="fullWidth",indicator:me&&!S&&Z,selected:me,selectionFollowsFocus:M,onChange:b,textColor:L,value:ke},B===1&&F===!1&&!_e.props.tabIndex?{tabIndex:0}:{}))}),Ue=_e=>{const ke=Ye.current,me=Qr(ke).activeElement;if(me.getAttribute("role")!=="tab")return;let le=A==="horizontal"?"ArrowLeft":"ArrowUp",W=A==="horizontal"?"ArrowRight":"ArrowDown";switch(A==="horizontal"&&l&&(le="ArrowRight",W="ArrowLeft"),_e.key){case le:_e.preventDefault(),L0(ke,me,nL);break;case W:_e.preventDefault(),L0(ke,me,tL);break;case"Home":_e.preventDefault(),L0(ke,null,tL);break;case"End":_e.preventDefault(),L0(ke,null,nL);break}},ge=ue();return bo(Yse,he({className:Rt(Ee.root,_),ownerState:ae,ref:t,as:m},j,{children:[ge.scrollButtonStart,ge.scrollbarSizeListener,bo(qse,{className:Ee.scroller,ownerState:ae,style:{overflow:je.overflow,[z?`margin${l?"Left":"Right"}`:"marginBottom"]:X?void 0:-je.scrollbarWidth},ref:Oe,onScroll:ie,children:[Ge(Qse,{"aria-label":a,"aria-labelledby":c,"aria-orientation":A==="vertical"?"vertical":null,className:Ee.flexContainer,ownerState:ae,onKeyDown:Ue,ref:Ye,role:"tablist",children:Ae}),S&&Z]}),ge.scrollButtonEnd]}))});var Zhe=tle;function nle(r){return On("MuiTextField",r)}En("MuiTextField",["root"]);const ole=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],rle={standard:qH,filled:jH,outlined:nG},ile=r=>{const{classes:e}=r;return Ln({root:["root"]},nle,e)},sle=St(nre,{name:"MuiTextField",slot:"Root",overridesResolver:(r,e)=>e.root})({}),lle=G.exports.forwardRef(function(e,t){const o=Nn({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:l=!1,children:a,className:c,color:p="primary",defaultValue:h,disabled:f=!1,error:_=!1,FormHelperTextProps:m,fullWidth:v=!1,helperText:x,id:b,InputLabelProps:A,inputProps:k,InputProps:E,inputRef:M,label:R,maxRows:I,minRows:L,multiline:F=!1,name:U,onBlur:X,onChange:j,onFocus:P,placeholder:z,required:K=!1,rows:te,select:oe=!1,SelectProps:ee,type:pe,value:ae,variant:Ee="outlined"}=o,S=jt(o,ole),D=he({},o,{autoFocus:l,color:p,disabled:f,error:_,fullWidth:v,multiline:F,required:K,select:oe,variant:Ee}),H=ile(D),q={};Ee==="outlined"&&(A&&typeof A.shrink!="undefined"&&(q.notched=A.shrink),q.label=R),oe&&((!ee||!ee.native)&&(q.id=void 0),q["aria-describedby"]=void 0);const Q=vR(b),de=x&&Q?`${Q}-helper-text`:void 0,je=R&&Q?`${Q}-label`:void 0,We=rle[Ee],ze=Ge(We,he({"aria-describedby":de,autoComplete:i,autoFocus:l,defaultValue:h,fullWidth:v,multiline:F,name:U,rows:te,maxRows:I,minRows:L,type:pe,value:ae,id:Q,inputRef:M,onBlur:X,onChange:j,onFocus:P,placeholder:z,inputProps:k},q,E));return bo(sle,he({className:Rt(H.root,c),disabled:f,error:_,fullWidth:v,ref:t,required:K,color:p,variant:Ee,ownerState:D},S,{children:[R!=null&&R!==""&&Ge(Gre,he({htmlFor:Q,id:je},A,{children:R})),oe?Ge(ise,he({"aria-describedby":de,id:Q,labelId:je,value:ae,input:ze},ee,{children:a})):ze,x&&Ge(cre,he({id:de},m,{children:x}))]}))});var epe=lle,tpe=Cr(Ge("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),npe=Cr(Ge("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"}),"Bookmark"),ope=Cr(Ge("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),rpe=Cr(Ge("path",{d:"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10 2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"}),"DirectionsBike"),ipe=Cr(Ge("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"}),"DirectionsRun"),spe=Cr(Ge("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"}),"DirectionsWalk"),lpe=Cr(Ge("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6.5 7V23h-1V12.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5v1h-1v-.69c-1.46-.38-2.7-1.29-3.51-2.52-.31.87-.49 1.78-.49 2.71 0 .23.02.46.03.69L15 16.5V23h-2v-5l-1.78-2.54L11 19l-3 4-1.6-1.2L9 18.33V13c0-1.15.18-2.29.5-3.39l-1.5.85V14H6V9.3l5.4-3.07v.01c.59-.31 1.32-.33 1.94.03.36.21.63.51.8.85l.79 1.67C15.58 10.1 16.94 11 18.5 11c.83 0 1.5.67 1.5 1.5z"}),"Elderly"),ape=Cr(Ge("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),cpe=Cr(Ge("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause"),upe=Cr(Ge("path",{d:"M2 4h20v16H2z"}),"Rectangle"),hpe=Cr(Ge("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt"),ppe=Cr(Ge("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save"),dpe=Cr(Ge("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings"),fpe=Cr(Ge("path",{d:"M6 6h12v12H6z"}),"Stop"),mpe=Cr(Ge("path",{d:"m6.83 11 1.59 1.59L7 14l-4-4 4-4 1.41 1.41L6.83 9H15c1.1 0 2 .9 2 2v9h-2v-9H6.83z"}),"TurnLeft"),gpe=Cr(Ge("path",{d:"m17.17 11-1.59 1.59L17 14l4-4-4-4-1.41 1.41L17.17 9H9c-1.1 0-2 .9-2 2v9h2v-9h8.17z"}),"TurnRight"),_pe=Cr(Ge("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload"),ale=Object.defineProperty,Qm=(r,e)=>()=>(r&&(e=r(r=0)),e),Zm=(r,e)=>{for(var t in e)ale(r,t,{get:e[t],enumerable:!0})},rG={};Zm(rG,{default:()=>iG});var iG,cle=Qm(()=>{iG=async(r=[{}])=>(Array.isArray(r)||(r=[r]),new Promise((e,t)=>{let o=document.createElement("input");o.type="file";let i=[...r.map(p=>p.mimeTypes||[]).join(),r.map(p=>p.extensions||[]).join()].join();o.multiple=r[0].multiple||!1,o.accept=i||"";let l=()=>c(t),a=p=>{typeof c=="function"&&c(),e(p)},c=r[0].legacySetup&&r[0].legacySetup(a,l,o);o.addEventListener("change",()=>{a(o.multiple?Array.from(o.files):o.files[0])}),o.click()}))}),sG={};Zm(sG,{default:()=>lG});var rL,lG,ule=Qm(()=>{rL=async r=>{let e=await r.getFile();return e.handle=r,e},lG=async(r=[{}])=>{Array.isArray(r)||(r=[r]);let e=[];r.forEach((i,l)=>{e[l]={description:i.description||"",accept:{}},i.mimeTypes?i.mimeTypes.map(a=>{e[l].accept[a]=i.extensions||[]}):e[l].accept["*/*"]=i.extensions||[]});let t=await window.showOpenFilePicker({id:r[0].id,startIn:r[0].startIn,types:e,multiple:r[0].multiple||!1,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1}),o=await Promise.all(t.map(rL));return r[0].multiple?o:o[0]}}),aG={};Zm(aG,{default:()=>cG});var cG,hle=Qm(()=>{cG=async(r=[{}])=>(Array.isArray(r)||(r=[r]),r[0].recursive=r[0].recursive||!1,new Promise((e,t)=>{let o=document.createElement("input");o.type="file",o.webkitdirectory=!0;let i=()=>a(t),l=c=>{typeof a=="function"&&a(),e(c)},a=r[0].legacySetup&&r[0].legacySetup(l,i,o);o.addEventListener("change",()=>{let c=Array.from(o.files);r[0].recursive?r[0].recursive&&r[0].skipDirectory&&(c=c.filter(p=>p.webkitRelativePath.split("/").every(h=>!r[0].skipDirectory({name:h,kind:"directory"})))):c=c.filter(p=>p.webkitRelativePath.split("/").length===2),l(c)}),o.click()}))}),uG={};Zm(uG,{default:()=>hG});var Ub,hG,ple=Qm(()=>{Ub=async(r,e,t=r.name,o)=>{let i=[],l=[];for await(let a of r.values()){let c=`${t}/${a.name}`;a.kind==="file"?l.push(a.getFile().then(p=>(p.directoryHandle=r,p.handle=a,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>c})))):a.kind==="directory"&&e&&(!o||!o(a))&&i.push(Ub(a,e,c,o))}return[...(await Promise.all(i)).flat(),...await Promise.all(l)]},hG=async(r={})=>{r.recursive=r.recursive||!1;let e=await window.showDirectoryPicker({id:r.id,startIn:r.startIn});return Ub(e,r.recursive,void 0,r.skipDirectory)}}),pG={};Zm(pG,{default:()=>dG});async function dle(r,e){let t=r.getReader(),o=new ReadableStream({start(l){return a();async function a(){return t.read().then(({done:c,value:p})=>{if(c){l.close();return}return l.enqueue(p),a()})}}}),i=new Response(o);return t.releaseLock(),new Blob([await i.blob()],{type:e})}var dG,fle=Qm(()=>{dG=async(r,e={})=>{Array.isArray(e)&&(e=e[0]);let t=document.createElement("a"),o=r;"body"in r&&(o=await dle(r.body,r.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(o);let i=()=>a(reject),l=()=>{typeof a=="function"&&a()},a=e.legacySetup&&e.legacySetup(l,i,t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),30*1e3),l()}),t.click(),null}}),fG={};Zm(fG,{default:()=>mG});var mG,mle=Qm(()=>{mG=async(r,e=[{}],t=null,o=!1)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";let i=[];if(e.forEach((c,p)=>{i[p]={description:c.description||"",accept:{}},c.mimeTypes?(p===0&&(r.type?c.mimeTypes.push(r.type):r.headers&&r.headers.get("content-type")&&c.mimeTypes.push(r.headers.get("content-type"))),c.mimeTypes.map(h=>{i[p].accept[h]=c.extensions||[]})):r.type&&(i[p].accept[r.type]=c.extensions||[])}),t)try{await t.getFile()}catch(c){if(t=null,o)throw c}let l=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:i,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),a=await l.createWritable();return"stream"in r?(await r.stream().pipeTo(a),l):"body"in r?(await r.body.pipeTo(a),l):(await a.write(blob),await a.close(),l)}}),gle=(()=>{if(typeof self=="undefined")return!1;if("top"in self&&self!==top)try{top.location+""}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),WR=gle,_le=WR?Promise.resolve().then(()=>(ule(),sG)):Promise.resolve().then(()=>(cle(),rG));async function ype(...r){return(await _le).default(...r)}WR?Promise.resolve().then(()=>(ple(),uG)):Promise.resolve().then(()=>(hle(),aG));var yle=WR?Promise.resolve().then(()=>(mle(),fG)):Promise.resolve().then(()=>(fle(),pG));async function vpe(...r){return(await yle).default(...r)}// @license  2020 Google LLC. Licensed under the Apache License, Version 2.0.
var br={},eg={};function vle(r){return r===null?"null":r}function gG(r){return Array.isArray(r)?"["+r.map(vle).join(", ")+"]":"null"}String.prototype.seed=String.prototype.seed||Math.round(Math.random()*Math.pow(2,32));String.prototype.hashCode=function(){const r=this.toString();let e,t;const o=r.length&3,i=r.length-o;let l=String.prototype.seed;const a=3432918353,c=461845907;let p=0;for(;p<i;)t=r.charCodeAt(p)&255|(r.charCodeAt(++p)&255)<<8|(r.charCodeAt(++p)&255)<<16|(r.charCodeAt(++p)&255)<<24,++p,t=(t&65535)*a+(((t>>>16)*a&65535)<<16)&4294967295,t=t<<15|t>>>17,t=(t&65535)*c+(((t>>>16)*c&65535)<<16)&4294967295,l^=t,l=l<<13|l>>>19,e=(l&65535)*5+(((l>>>16)*5&65535)<<16)&4294967295,l=(e&65535)+27492+(((e>>>16)+58964&65535)<<16);switch(t=0,o){case 3:t^=(r.charCodeAt(p+2)&255)<<16;case 2:t^=(r.charCodeAt(p+1)&255)<<8;case 1:t^=r.charCodeAt(p)&255,t=(t&65535)*a+(((t>>>16)*a&65535)<<16)&4294967295,t=t<<15|t>>>17,t=(t&65535)*c+(((t>>>16)*c&65535)<<16)&4294967295,l^=t}return l^=r.length,l^=l>>>16,l=(l&65535)*2246822507+(((l>>>16)*2246822507&65535)<<16)&4294967295,l^=l>>>13,l=(l&65535)*3266489909+(((l>>>16)*3266489909&65535)<<16)&4294967295,l^=l>>>16,l>>>0};function _G(r,e){return r?r.equals(e):r==e}function yG(r){return r?r.hashCode():-1}class Tle{constructor(e,t){this.data={},this.hashFunction=e||yG,this.equalsFunction=t||_G}add(e){const t=this.hashFunction(e),o="hash_"+t;if(o in this.data){const i=this.data[o];for(let l=0;l<i.length;l++)if(this.equalsFunction(e,i[l]))return i[l];return i.push(e),e}else return this.data[o]=[e],e}contains(e){return this.get(e)!=null}get(e){const t=this.hashFunction(e),o="hash_"+t;if(o in this.data){const i=this.data[o];for(let l=0;l<i.length;l++)if(this.equalsFunction(e,i[l]))return i[l]}return null}values(){let e=[];for(const t in this.data)t.indexOf("hash_")===0&&(e=e.concat(this.data[t]));return e}toString(){return gG(this.values())}get length(){let e=0;for(const t in this.data)t.indexOf("hash_")===0&&(e=e+this.data[t].length);return e}}class zR{constructor(){this.data=[]}add(e){this.data[e]=!0}or(e){const t=this;Object.keys(e.data).map(function(o){t.add(o)})}remove(e){delete this.data[e]}contains(e){return this.data[e]===!0}values(){return Object.keys(this.data)}minValue(){return Math.min.apply(null,this.values())}hashCode(){const e=new XR;return e.update(this.values()),e.finish()}equals(e){return e instanceof zR?this.hashCode()===e.hashCode():!1}toString(){return"{"+this.values().join(", ")+"}"}get length(){return this.values().length}}class vG{constructor(e,t){this.data={},this.hashFunction=e||yG,this.equalsFunction=t||_G}put(e,t){const o="hash_"+this.hashFunction(e);if(o in this.data){const i=this.data[o];for(let l=0;l<i.length;l++){const a=i[l];if(this.equalsFunction(e,a.key)){const c=a.value;return a.value=t,c}}return i.push({key:e,value:t}),t}else return this.data[o]=[{key:e,value:t}],t}containsKey(e){const t="hash_"+this.hashFunction(e);if(t in this.data){const o=this.data[t];for(let i=0;i<o.length;i++){const l=o[i];if(this.equalsFunction(e,l.key))return!0}}return!1}get(e){const t="hash_"+this.hashFunction(e);if(t in this.data){const o=this.data[t];for(let i=0;i<o.length;i++){const l=o[i];if(this.equalsFunction(e,l.key))return l.value}}return null}entries(){let e=[];for(const t in this.data)t.indexOf("hash_")===0&&(e=e.concat(this.data[t]));return e}getKeys(){return this.entries().map(function(e){return e.key})}getValues(){return this.entries().map(function(e){return e.value})}toString(){const e=this.entries().map(function(t){return"{"+t.key+":"+t.value+"}"});return"["+e.join(", ")+"]"}get length(){let e=0;for(const t in this.data)t.indexOf("hash_")===0&&(e=e+this.data[t].length);return e}}class Ele{constructor(){this.data={}}get(e){return e="k-"+e,e in this.data?this.data[e]:null}put(e,t){e="k-"+e,this.data[e]=t}values(){const e=this.data;return Object.keys(this.data).map(function(o){return e[o]})}}class xle{constructor(e){this.defaultMapCtor=e||vG,this.cacheMap=new this.defaultMapCtor}get(e,t){const o=this.cacheMap.get(e)||null;return o===null?null:o.get(t)||null}set(e,t,o){let i=this.cacheMap.get(e)||null;i===null&&(i=new this.defaultMapCtor,this.cacheMap.put(e,i)),i.put(t,o)}}class XR{constructor(){this.count=0,this.hash=0}update(){for(let e=0;e<arguments.length;e++){const t=arguments[e];if(t!=null)if(Array.isArray(t))this.update.apply(this,t);else{let o=0;switch(typeof t){case"undefined":case"function":continue;case"number":case"boolean":o=t;break;case"string":o=t.hashCode();break;default:t.updateHashCode?t.updateHashCode(this):console.log("No updateHashCode for "+t.toString());continue}o=o*3432918353,o=o<<15|o>>>32-15,o=o*461845907,this.count=this.count+1;let i=this.hash^o;i=i<<13|i>>>32-13,i=i*5+3864292196,this.hash=i}}}finish(){let e=this.hash^this.count*4;return e=e^e>>>16,e=e*2246822507,e=e^e>>>13,e=e*3266489909,e=e^e>>>16,e}}function Sle(){const r=new XR;return r.update.apply(r,arguments),r.finish()}function Cle(r,e){return r=r.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),e&&(r=r.replace(/ /g,"\xB7")),r}function ble(r){return r.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)})}function kle(r,e){if(!Array.isArray(r)||!Array.isArray(e))return!1;if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t]&&(!r[t].equals||!r[t].equals(e[t])))return!1;return!0}var as={Hash:XR,Set:Tle,Map:vG,BitSet:zR,AltDict:Ele,DoubleDict:xle,hashStuff:Sle,escapeWhitespace:Cle,arrayToString:gG,titleCase:ble,equalArrays:kle};class Qc{constructor(){this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null}getTokenSource(){return this.source[0]}getInputStream(){return this.source[1]}get text(){return this._text}set text(e){this._text=e}}Qc.INVALID_TYPE=0;Qc.EPSILON=-2;Qc.MIN_USER_TOKEN_TYPE=1;Qc.EOF=-1;Qc.DEFAULT_CHANNEL=0;Qc.HIDDEN_CHANNEL=1;class Ly extends Qc{constructor(e,t,o,i,l){super();this.source=e!==void 0?e:Ly.EMPTY_SOURCE,this.type=t!==void 0?t:null,this.channel=o!==void 0?o:Qc.DEFAULT_CHANNEL,this.start=i!==void 0?i:-1,this.stop=l!==void 0?l:-1,this.tokenIndex=-1,this.source[0]!==null?(this.line=e[0].line,this.column=e[0].column):this.column=-1}clone(){const e=new Ly(this.source,this.type,this.channel,this.start,this.stop);return e.tokenIndex=this.tokenIndex,e.line=this.line,e.column=this.column,e.text=this.text,e}toString(){let e=this.text;return e!==null?e=e.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):e="<no text>","[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+e+"',<"+this.type+">"+(this.channel>0?",channel="+this.channel:"")+","+this.line+":"+this.column+"]"}get text(){if(this._text!==null)return this._text;const e=this.getInputStream();if(e===null)return null;const t=e.size;return this.start<t&&this.stop<t?e.getText(this.start,this.stop):"<EOF>"}set text(e){this._text=e}}Ly.EMPTY_SOURCE=[null,null];var Nr={Token:Qc,CommonToken:Ly},tg={};class Tn{constructor(){this.atn=null,this.stateNumber=Tn.INVALID_STATE_NUMBER,this.stateType=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null}toString(){return this.stateNumber}equals(e){return e instanceof Tn?this.stateNumber===e.stateNumber:!1}isNonGreedyExitState(){return!1}addTransition(e,t){t===void 0&&(t=-1),this.transitions.length===0?this.epsilonOnlyTransitions=e.isEpsilon:this.epsilonOnlyTransitions!==e.isEpsilon&&(this.epsilonOnlyTransitions=!1),t===-1?this.transitions.push(e):this.transitions.splice(t,1,e)}}Tn.INVALID_TYPE=0;Tn.BASIC=1;Tn.RULE_START=2;Tn.BLOCK_START=3;Tn.PLUS_BLOCK_START=4;Tn.STAR_BLOCK_START=5;Tn.TOKEN_START=6;Tn.RULE_STOP=7;Tn.BLOCK_END=8;Tn.STAR_LOOP_BACK=9;Tn.STAR_LOOP_ENTRY=10;Tn.PLUS_LOOP_BACK=11;Tn.LOOP_END=12;Tn.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"];Tn.INVALID_STATE_NUMBER=-1;class Ale extends Tn{constructor(){super();this.stateType=Tn.BASIC}}class wv extends Tn{constructor(){super();return this.decision=-1,this.nonGreedy=!1,this}}class zS extends wv{constructor(){super();return this.endState=null,this}}class wle extends zS{constructor(){super();return this.stateType=Tn.BLOCK_START,this}}class Mle extends Tn{constructor(){super();return this.stateType=Tn.BLOCK_END,this.startState=null,this}}class Rle extends Tn{constructor(){super();return this.stateType=Tn.RULE_STOP,this}}class Ble extends Tn{constructor(){super();return this.stateType=Tn.RULE_START,this.stopState=null,this.isPrecedenceRule=!1,this}}class Ile extends wv{constructor(){super();return this.stateType=Tn.PLUS_LOOP_BACK,this}}class Ole extends zS{constructor(){super();return this.stateType=Tn.PLUS_BLOCK_START,this.loopBackState=null,this}}class Dle extends zS{constructor(){super();return this.stateType=Tn.STAR_BLOCK_START,this}}class Lle extends Tn{constructor(){super();return this.stateType=Tn.STAR_LOOP_BACK,this}}class Nle extends wv{constructor(){super();return this.stateType=Tn.STAR_LOOP_ENTRY,this.loopBackState=null,this.isPrecedenceDecision=null,this}}class $le extends Tn{constructor(){super();return this.stateType=Tn.LOOP_END,this.loopBackState=null,this}}class Ple extends wv{constructor(){super();return this.stateType=Tn.TOKEN_START,this}}var Oh={ATNState:Tn,BasicState:Ale,DecisionState:wv,BlockStartState:zS,BlockEndState:Mle,LoopEndState:$le,RuleStartState:Ble,RuleStopState:Rle,TokensStartState:Ple,PlusLoopbackState:Ile,StarLoopbackState:Lle,StarLoopEntryState:Nle,PlusBlockStartState:Ole,StarBlockStartState:Dle,BasicBlockStartState:wle};const{Set:TG,Hash:Fle,equalArrays:EG}=as;class Yr{hashCode(){const e=new Fle;return this.updateHashCode(e),e.finish()}evaluate(e,t){}evalPrecedence(e,t){return this}static andContext(e,t){if(e===null||e===Yr.NONE)return t;if(t===null||t===Yr.NONE)return e;const o=new U_(e,t);return o.opnds.length===1?o.opnds[0]:o}static orContext(e,t){if(e===null)return t;if(t===null)return e;if(e===Yr.NONE||t===Yr.NONE)return Yr.NONE;const o=new H_(e,t);return o.opnds.length===1?o.opnds[0]:o}}class XS extends Yr{constructor(e,t,o){super();this.ruleIndex=e===void 0?-1:e,this.predIndex=t===void 0?-1:t,this.isCtxDependent=o===void 0?!1:o}evaluate(e,t){const o=this.isCtxDependent?t:null;return e.sempred(o,this.ruleIndex,this.predIndex)}updateHashCode(e){e.update(this.ruleIndex,this.predIndex,this.isCtxDependent)}equals(e){return this===e?!0:e instanceof XS?this.ruleIndex===e.ruleIndex&&this.predIndex===e.predIndex&&this.isCtxDependent===e.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}Yr.NONE=new XS;class Om extends Yr{constructor(e){super();this.precedence=e===void 0?0:e}evaluate(e,t){return e.precpred(t,this.precedence)}evalPrecedence(e,t){return e.precpred(t,this.precedence)?Yr.NONE:null}compareTo(e){return this.precedence-e.precedence}updateHashCode(e){e.update(this.precedence)}equals(e){return this===e?!0:e instanceof Om?this.precedence===e.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}static filterPrecedencePredicates(e){const t=[];return e.values().map(function(o){o instanceof Om&&t.push(o)}),t}}class U_ extends Yr{constructor(e,t){super();const o=new TG;e instanceof U_?e.opnds.map(function(l){o.add(l)}):o.add(e),t instanceof U_?t.opnds.map(function(l){o.add(l)}):o.add(t);const i=Om.filterPrecedencePredicates(o);if(i.length>0){let l=null;i.map(function(a){(l===null||a.precedence<l.precedence)&&(l=a)}),o.add(l)}this.opnds=Array.from(o.values())}equals(e){return this===e?!0:e instanceof U_?EG(this.opnds,e.opnds):!1}updateHashCode(e){e.update(this.opnds,"AND")}evaluate(e,t){for(let o=0;o<this.opnds.length;o++)if(!this.opnds[o].evaluate(e,t))return!1;return!0}evalPrecedence(e,t){let o=!1;const i=[];for(let a=0;a<this.opnds.length;a++){const c=this.opnds[a],p=c.evalPrecedence(e,t);if(o|=p!==c,p===null)return null;p!==Yr.NONE&&i.push(p)}if(!o)return this;if(i.length===0)return Yr.NONE;let l=null;return i.map(function(a){l=l===null?a:Yr.andContext(l,a)}),l}toString(){const e=this.opnds.map(t=>t.toString());return(e.length>3?e.slice(3):e).join("&&")}}class H_ extends Yr{constructor(e,t){super();const o=new TG;e instanceof H_?e.opnds.map(function(l){o.add(l)}):o.add(e),t instanceof H_?t.opnds.map(function(l){o.add(l)}):o.add(t);const i=Om.filterPrecedencePredicates(o);if(i.length>0){const l=i.sort(function(c,p){return c.compareTo(p)}),a=l[l.length-1];o.add(a)}this.opnds=Array.from(o.values())}equals(e){return this===e?!0:e instanceof H_?EG(this.opnds,e.opnds):!1}updateHashCode(e){e.update(this.opnds,"OR")}evaluate(e,t){for(let o=0;o<this.opnds.length;o++)if(this.opnds[o].evaluate(e,t))return!0;return!1}evalPrecedence(e,t){let o=!1;const i=[];for(let a=0;a<this.opnds.length;a++){const c=this.opnds[a],p=c.evalPrecedence(e,t);if(o|=p!==c,p===Yr.NONE)return Yr.NONE;p!==null&&i.push(p)}return o?(i.length===0,null):this}toString(){const e=this.opnds.map(t=>t.toString());return(e.length>3?e.slice(3):e).join("||")}}var Mv={SemanticContext:Yr,PrecedencePredicate:Om,Predicate:XS};const{DecisionState:Ule}=Oh,{SemanticContext:iL}=Mv,{Hash:sL}=as;function lL(r,e){if(r===null){const t={state:null,alt:null,context:null,semanticContext:null};return e&&(t.reachesIntoOuterContext=0),t}else{const t={};return t.state=r.state||null,t.alt=r.alt===void 0?null:r.alt,t.context=r.context||null,t.semanticContext=r.semanticContext||null,e&&(t.reachesIntoOuterContext=r.reachesIntoOuterContext||0,t.precedenceFilterSuppressed=r.precedenceFilterSuppressed||!1),t}}class Ny{constructor(e,t){this.checkContext(e,t),e=lL(e),t=lL(t,!0),this.state=e.state!==null?e.state:t.state,this.alt=e.alt!==null?e.alt:t.alt,this.context=e.context!==null?e.context:t.context,this.semanticContext=e.semanticContext!==null?e.semanticContext:t.semanticContext!==null?t.semanticContext:iL.NONE,this.reachesIntoOuterContext=t.reachesIntoOuterContext,this.precedenceFilterSuppressed=t.precedenceFilterSuppressed}checkContext(e,t){(e.context===null||e.context===void 0)&&(t===null||t.context===null||t.context===void 0)&&(this.context=null)}hashCode(){const e=new sL;return this.updateHashCode(e),e.finish()}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)}equals(e){return this===e?!0:e instanceof Ny?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&(this.context===null?e.context===null:this.context.equals(e.context))&&this.semanticContext.equals(e.semanticContext)&&this.precedenceFilterSuppressed===e.precedenceFilterSuppressed:!1}hashCodeForConfigSet(){const e=new sL;return e.update(this.state.stateNumber,this.alt,this.semanticContext),e.finish()}equalsForConfigSet(e){return this===e?!0:e instanceof Ny?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.semanticContext.equals(e.semanticContext):!1}toString(){return"("+this.state+","+this.alt+(this.context!==null?",["+this.context.toString()+"]":"")+(this.semanticContext!==iL.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"}}class G_ extends Ny{constructor(e,t){super(e,t);const o=e.lexerActionExecutor||null;return this.lexerActionExecutor=o||(t!==null?t.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=t!==null?this.checkNonGreedyDecision(t,this.state):!1,this.hashCodeForConfigSet=G_.prototype.hashCode,this.equalsForConfigSet=G_.prototype.equals,this}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)}equals(e){return this===e||e instanceof G_&&this.passedThroughNonGreedyDecision===e.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(e.lexerActionExecutor):!e.lexerActionExecutor)&&super.equals(e)}checkNonGreedyDecision(e,t){return e.passedThroughNonGreedyDecision||t instanceof Ule&&t.nonGreedy}}tg.ATNConfig=Ny;tg.LexerATNConfig=G_;const{Token:n_}=Nr;class Ii{constructor(e,t){this.start=e,this.stop=t}clone(){return new Ii(this.start,this.stop)}contains(e){return e>=this.start&&e<this.stop}toString(){return this.start===this.stop-1?this.start.toString():this.start.toString()+".."+(this.stop-1).toString()}get length(){return this.stop-this.start}}class jR{constructor(){this.intervals=null,this.readOnly=!1}first(e){return this.intervals===null||this.intervals.length===0?n_.INVALID_TYPE:this.intervals[0].start}addOne(e){this.addInterval(new Ii(e,e+1))}addRange(e,t){this.addInterval(new Ii(e,t+1))}addInterval(e){if(this.intervals===null)this.intervals=[],this.intervals.push(e.clone());else{for(let t=0;t<this.intervals.length;t++){const o=this.intervals[t];if(e.stop<o.start){this.intervals.splice(t,0,e);return}else if(e.stop===o.start){this.intervals[t]=new Ii(e.start,o.stop);return}else if(e.start<=o.stop){this.intervals[t]=new Ii(Math.min(o.start,e.start),Math.max(o.stop,e.stop)),this.reduce(t);return}}this.intervals.push(e.clone())}}addSet(e){return e.intervals!==null&&e.intervals.forEach(t=>this.addInterval(t),this),this}reduce(e){if(e<this.intervals.length-1){const t=this.intervals[e],o=this.intervals[e+1];t.stop>=o.stop?(this.intervals.splice(e+1,1),this.reduce(e)):t.stop>=o.start&&(this.intervals[e]=new Ii(t.start,o.stop),this.intervals.splice(e+1,1))}}complement(e,t){const o=new jR;return o.addInterval(new Ii(e,t+1)),this.intervals!==null&&this.intervals.forEach(i=>o.removeRange(i)),o}contains(e){if(this.intervals===null)return!1;for(let t=0;t<this.intervals.length;t++)if(this.intervals[t].contains(e))return!0;return!1}removeRange(e){if(e.start===e.stop-1)this.removeOne(e.start);else if(this.intervals!==null){let t=0;for(let o=0;o<this.intervals.length;o++){const i=this.intervals[t];if(e.stop<=i.start)return;if(e.start>i.start&&e.stop<i.stop){this.intervals[t]=new Ii(i.start,e.start);const l=new Ii(e.stop,i.stop);this.intervals.splice(t,0,l);return}else e.start<=i.start&&e.stop>=i.stop?(this.intervals.splice(t,1),t=t-1):e.start<i.stop?this.intervals[t]=new Ii(i.start,e.start):e.stop<i.stop&&(this.intervals[t]=new Ii(e.stop,i.stop));t+=1}}}removeOne(e){if(this.intervals!==null)for(let t=0;t<this.intervals.length;t++){const o=this.intervals[t];if(e<o.start)return;if(e===o.start&&e===o.stop-1){this.intervals.splice(t,1);return}else if(e===o.start){this.intervals[t]=new Ii(o.start+1,o.stop);return}else if(e===o.stop-1){this.intervals[t]=new Ii(o.start,o.stop-1);return}else if(e<o.stop-1){const i=new Ii(o.start,e);o.start=e+1,this.intervals.splice(t,0,i);return}}}toString(e,t,o){return e=e||null,t=t||null,o=o||!1,this.intervals===null?"{}":e!==null||t!==null?this.toTokenString(e,t):o?this.toCharString():this.toIndexString()}toCharString(){const e=[];for(let t=0;t<this.intervals.length;t++){const o=this.intervals[t];o.stop===o.start+1?o.start===n_.EOF?e.push("<EOF>"):e.push("'"+String.fromCharCode(o.start)+"'"):e.push("'"+String.fromCharCode(o.start)+"'..'"+String.fromCharCode(o.stop-1)+"'")}return e.length>1?"{"+e.join(", ")+"}":e[0]}toIndexString(){const e=[];for(let t=0;t<this.intervals.length;t++){const o=this.intervals[t];o.stop===o.start+1?o.start===n_.EOF?e.push("<EOF>"):e.push(o.start.toString()):e.push(o.start.toString()+".."+(o.stop-1).toString())}return e.length>1?"{"+e.join(", ")+"}":e[0]}toTokenString(e,t){const o=[];for(let i=0;i<this.intervals.length;i++){const l=this.intervals[i];for(let a=l.start;a<l.stop;a++)o.push(this.elementName(e,t,a))}return o.length>1?"{"+o.join(", ")+"}":o[0]}elementName(e,t,o){return o===n_.EOF?"<EOF>":o===n_.EPSILON?"<EPSILON>":e[o]||t[o]}get length(){return this.intervals.map(e=>e.length).reduce((e,t)=>e+t)}}var ll={Interval:Ii,IntervalSet:jR};const{Token:Hle}=Nr,{IntervalSet:JR}=ll,{Predicate:Gle,PrecedencePredicate:Vle}=Mv;class ln{constructor(e){if(e==null)throw"target cannot be null.";this.target=e,this.isEpsilon=!1,this.label=null}}ln.EPSILON=1;ln.RANGE=2;ln.RULE=3;ln.PREDICATE=4;ln.ATOM=5;ln.ACTION=6;ln.SET=7;ln.NOT_SET=8;ln.WILDCARD=9;ln.PRECEDENCE=10;ln.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];ln.serializationTypes={EpsilonTransition:ln.EPSILON,RangeTransition:ln.RANGE,RuleTransition:ln.RULE,PredicateTransition:ln.PREDICATE,AtomTransition:ln.ATOM,ActionTransition:ln.ACTION,SetTransition:ln.SET,NotSetTransition:ln.NOT_SET,WildcardTransition:ln.WILDCARD,PrecedencePredicateTransition:ln.PRECEDENCE};class Wle extends ln{constructor(e,t){super(e);this.label_=t,this.label=this.makeLabel(),this.serializationType=ln.ATOM}makeLabel(){const e=new JR;return e.addOne(this.label_),e}matches(e,t,o){return this.label_===e}toString(){return this.label_}}class zle extends ln{constructor(e,t,o,i){super(e);this.ruleIndex=t,this.precedence=o,this.followState=i,this.serializationType=ln.RULE,this.isEpsilon=!0}matches(e,t,o){return!1}}class Xle extends ln{constructor(e,t){super(e);this.serializationType=ln.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=t}matches(e,t,o){return!1}toString(){return"epsilon"}}class jle extends ln{constructor(e,t,o){super(e);this.serializationType=ln.RANGE,this.start=t,this.stop=o,this.label=this.makeLabel()}makeLabel(){const e=new JR;return e.addRange(this.start,this.stop),e}matches(e,t,o){return e>=this.start&&e<=this.stop}toString(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"}}class KR extends ln{constructor(e){super(e)}}class Jle extends KR{constructor(e,t,o,i){super(e);this.serializationType=ln.PREDICATE,this.ruleIndex=t,this.predIndex=o,this.isCtxDependent=i,this.isEpsilon=!0}matches(e,t,o){return!1}getPredicate(){return new Gle(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}}class Kle extends ln{constructor(e,t,o,i){super(e);this.serializationType=ln.ACTION,this.ruleIndex=t,this.actionIndex=o===void 0?-1:o,this.isCtxDependent=i===void 0?!1:i,this.isEpsilon=!0}matches(e,t,o){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}}class xG extends ln{constructor(e,t){super(e);this.serializationType=ln.SET,t!=null?this.label=t:(this.label=new JR,this.label.addOne(Hle.INVALID_TYPE))}matches(e,t,o){return this.label.contains(e)}toString(){return this.label.toString()}}class Yle extends xG{constructor(e,t){super(e,t);this.serializationType=ln.NOT_SET}matches(e,t,o){return e>=t&&e<=o&&!super.matches(e,t,o)}toString(){return"~"+super.toString()}}class qle extends ln{constructor(e){super(e);this.serializationType=ln.WILDCARD}matches(e,t,o){return e>=t&&e<=o}toString(){return"."}}class Qle extends KR{constructor(e,t){super(e);this.serializationType=ln.PRECEDENCE,this.precedence=t,this.isEpsilon=!0}matches(e,t,o){return!1}getPredicate(){return new Vle(this.precedence)}toString(){return this.precedence+" >= _p"}}var Rv={Transition:ln,AtomTransition:Wle,SetTransition:xG,NotSetTransition:Yle,RuleTransition:zle,ActionTransition:Kle,EpsilonTransition:Xle,RangeTransition:jle,WildcardTransition:qle,PredicateTransition:Jle,PrecedencePredicateTransition:Qle,AbstractPredicateTransition:KR};const{Token:Zle}=Nr,{Interval:SG}=ll,CG=new SG(-1,-2);class eae{}class tae extends eae{constructor(){super()}}class bG extends tae{constructor(){super()}}class nae extends bG{constructor(){super()}getRuleContext(){throw new Error("missing interface implementation")}}class jS extends bG{constructor(){super()}}class kG extends jS{constructor(){super()}}class oae{visit(e){return Array.isArray(e)?e.map(function(t){return t.accept(this)},this):e.accept(this)}visitChildren(e){return e.children?this.visit(e.children):null}visitTerminal(e){}visitErrorNode(e){}}class rae{visitTerminal(e){}visitErrorNode(e){}enterEveryRule(e){}exitEveryRule(e){}}class AG extends jS{constructor(e){super();this.parentCtx=null,this.symbol=e}getChild(e){return null}getSymbol(){return this.symbol}getParent(){return this.parentCtx}getPayload(){return this.symbol}getSourceInterval(){if(this.symbol===null)return CG;const e=this.symbol.tokenIndex;return new SG(e,e)}getChildCount(){return 0}accept(e){return e.visitTerminal(this)}getText(){return this.symbol.text}toString(){return this.symbol.type===Zle.EOF?"<EOF>":this.symbol.text}}class iae extends AG{constructor(e){super(e)}isErrorNode(){return!0}accept(e){return e.visitErrorNode(this)}}class rw{walk(e,t){if(t instanceof kG||t.isErrorNode!==void 0&&t.isErrorNode())e.visitErrorNode(t);else if(t instanceof jS)e.visitTerminal(t);else{this.enterRule(e,t);for(let i=0;i<t.getChildCount();i++){const l=t.getChild(i);this.walk(e,l)}this.exitRule(e,t)}}enterRule(e,t){const o=t.getRuleContext();e.enterEveryRule(o),o.enterRule(e)}exitRule(e,t){const o=t.getRuleContext();o.exitRule(e),e.exitEveryRule(o)}}rw.DEFAULT=new rw;var ng={RuleNode:nae,ErrorNode:kG,TerminalNode:jS,ErrorNodeImpl:iae,TerminalNodeImpl:AG,ParseTreeListener:rae,ParseTreeVisitor:oae,ParseTreeWalker:rw,INVALID_INTERVAL:CG};const sae=as,{Token:lae}=Nr,{ErrorNode:aae,TerminalNode:aL,RuleNode:cL}=ng,Dc={toStringTree:function(r,e,t){e=e||null,t=t||null,t!==null&&(e=t.ruleNames);let o=Dc.getNodeText(r,e);o=sae.escapeWhitespace(o,!1);const i=r.getChildCount();if(i===0)return o;let l="("+o+" ";i>0&&(o=Dc.toStringTree(r.getChild(0),e),l=l.concat(o));for(let a=1;a<i;a++)o=Dc.toStringTree(r.getChild(a),e),l=l.concat(" "+o);return l=l.concat(")"),l},getNodeText:function(r,e,t){if(e=e||null,t=t||null,t!==null&&(e=t.ruleNames),e!==null)if(r instanceof cL){const l=r.getRuleContext().getAltNumber();return l!=0?e[r.ruleIndex]+":"+l:e[r.ruleIndex]}else{if(r instanceof aae)return r.toString();if(r instanceof aL&&r.symbol!==null)return r.symbol.text}const o=r.getPayload();return o instanceof lae?o.text:r.getPayload().toString()},getChildren:function(r){const e=[];for(let t=0;t<r.getChildCount();t++)e.push(r.getChild(t));return e},getAncestors:function(r){let e=[];for(r=r.getParent();r!==null;)e=[r].concat(e),r=r.getParent();return e},findAllTokenNodes:function(r,e){return Dc.findAllNodes(r,e,!0)},findAllRuleNodes:function(r,e){return Dc.findAllNodes(r,e,!1)},findAllNodes:function(r,e,t){const o=[];return Dc._findAllNodes(r,e,t,o),o},_findAllNodes:function(r,e,t,o){t&&r instanceof aL?r.symbol.type===e&&o.push(r):!t&&r instanceof cL&&r.ruleIndex===e&&o.push(r);for(let i=0;i<r.getChildCount();i++)Dc._findAllNodes(r.getChild(i),e,t,o)},descendants:function(r){let e=[r];for(let t=0;t<r.getChildCount();t++)e=e.concat(Dc.descendants(r.getChild(t)));return e}};var wG=Dc;const{RuleNode:cae}=ng,{INVALID_INTERVAL:uae}=ng,hae=wG;class pae extends cae{constructor(e,t){super();this.parentCtx=e||null,this.invokingState=t||-1}depth(){let e=0,t=this;for(;t!==null;)t=t.parentCtx,e+=1;return e}isEmpty(){return this.invokingState===-1}getSourceInterval(){return uae}getRuleContext(){return this}getPayload(){return this}getText(){return this.getChildCount()===0?"":this.children.map(function(e){return e.getText()}).join("")}getAltNumber(){return 0}setAltNumber(e){}getChild(e){return null}getChildCount(){return 0}accept(e){return e.visitChildren(this)}toStringTree(e,t){return hae.toStringTree(this,e,t)}toString(e,t){e=e||null,t=t||null;let o=this,i="[";for(;o!==null&&o!==t;){if(e===null)o.isEmpty()||(i+=o.invokingState);else{const l=o.ruleIndex;i+=l>=0&&l<e.length?e[l]:""+l}o.parentCtx!==null&&(e!==null||!o.parentCtx.isEmpty())&&(i+=" "),o=o.parentCtx}return i+="]",i}}var YR=pae;const uL=YR,{Hash:MG,Map:RG,equalArrays:hL}=as;class Bn{constructor(e){this.cachedHashCode=e}isEmpty(){return this===Bn.EMPTY}hasEmptyPath(){return this.getReturnState(this.length-1)===Bn.EMPTY_RETURN_STATE}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}}Bn.EMPTY=null;Bn.EMPTY_RETURN_STATE=2147483647;Bn.globalNodeCount=1;Bn.id=Bn.globalNodeCount;class dae{constructor(){this.cache=new RG}add(e){if(e===Bn.EMPTY)return Bn.EMPTY;const t=this.cache.get(e)||null;return t!==null?t:(this.cache.put(e,e),e)}get(e){return this.cache.get(e)||null}get length(){return this.cache.length}}class Ys extends Bn{constructor(e,t){let o=0;const i=new MG;e!==null?i.update(e,t):i.update(1),o=i.finish();super(o);this.parentCtx=e,this.returnState=t}getParent(e){return this.parentCtx}getReturnState(e){return this.returnState}equals(e){return this===e?!0:e instanceof Ys?this.hashCode()!==e.hashCode()||this.returnState!==e.returnState?!1:this.parentCtx==null?e.parentCtx==null:this.parentCtx.equals(e.parentCtx):!1}toString(){const e=this.parentCtx===null?"":this.parentCtx.toString();return e.length===0?this.returnState===Bn.EMPTY_RETURN_STATE?"$":""+this.returnState:""+this.returnState+" "+e}get length(){return 1}static create(e,t){return t===Bn.EMPTY_RETURN_STATE&&e===null?Bn.EMPTY:new Ys(e,t)}}class iw extends Ys{constructor(){super(null,Bn.EMPTY_RETURN_STATE)}isEmpty(){return!0}getParent(e){return null}getReturnState(e){return this.returnState}equals(e){return this===e}toString(){return"$"}}Bn.EMPTY=new iw;class ac extends Bn{constructor(e,t){const o=new MG;o.update(e,t);const i=o.finish();super(i);return this.parents=e,this.returnStates=t,this}isEmpty(){return this.returnStates[0]===Bn.EMPTY_RETURN_STATE}getParent(e){return this.parents[e]}getReturnState(e){return this.returnStates[e]}equals(e){return this===e?!0:e instanceof ac?this.hashCode()!==e.hashCode()?!1:hL(this.returnStates,e.returnStates)&&hL(this.parents,e.parents):!1}toString(){if(this.isEmpty())return"[]";{let e="[";for(let t=0;t<this.returnStates.length;t++){if(t>0&&(e=e+", "),this.returnStates[t]===Bn.EMPTY_RETURN_STATE){e=e+"$";continue}e=e+this.returnStates[t],this.parents[t]!==null?e=e+" "+this.parents[t]:e=e+"null"}return e+"]"}}get length(){return this.returnStates.length}}function BG(r,e){if(e==null&&(e=uL.EMPTY),e.parentCtx===null||e===uL.EMPTY)return Bn.EMPTY;const t=BG(r,e.parentCtx),i=r.states[e.invokingState].transitions[0];return Ys.create(t,i.followState.stateNumber)}function qR(r,e,t,o){if(r===e)return r;if(r instanceof Ys&&e instanceof Ys)return fae(r,e,t,o);if(t){if(r instanceof iw)return r;if(e instanceof iw)return e}return r instanceof Ys&&(r=new ac([r.getParent()],[r.returnState])),e instanceof Ys&&(e=new ac([e.getParent()],[e.returnState])),gae(r,e,t,o)}function fae(r,e,t,o){if(o!==null){let l=o.get(r,e);if(l!==null||(l=o.get(e,r),l!==null))return l}const i=mae(r,e,t);if(i!==null)return o!==null&&o.set(r,e,i),i;if(r.returnState===e.returnState){const l=qR(r.parentCtx,e.parentCtx,t,o);if(l===r.parentCtx)return r;if(l===e.parentCtx)return e;const a=Ys.create(l,r.returnState);return o!==null&&o.set(r,e,a),a}else{let l=null;if((r===e||r.parentCtx!==null&&r.parentCtx===e.parentCtx)&&(l=r.parentCtx),l!==null){const h=[r.returnState,e.returnState];r.returnState>e.returnState&&(h[0]=e.returnState,h[1]=r.returnState);const f=[l,l],_=new ac(f,h);return o!==null&&o.set(r,e,_),_}const a=[r.returnState,e.returnState];let c=[r.parentCtx,e.parentCtx];r.returnState>e.returnState&&(a[0]=e.returnState,a[1]=r.returnState,c=[e.parentCtx,r.parentCtx]);const p=new ac(c,a);return o!==null&&o.set(r,e,p),p}}function mae(r,e,t){if(t){if(r===Bn.EMPTY||e===Bn.EMPTY)return Bn.EMPTY}else{if(r===Bn.EMPTY&&e===Bn.EMPTY)return Bn.EMPTY;if(r===Bn.EMPTY){const o=[e.returnState,Bn.EMPTY_RETURN_STATE],i=[e.parentCtx,null];return new ac(i,o)}else if(e===Bn.EMPTY){const o=[r.returnState,Bn.EMPTY_RETURN_STATE],i=[r.parentCtx,null];return new ac(i,o)}}return null}function gae(r,e,t,o){if(o!==null){let f=o.get(r,e);if(f!==null||(f=o.get(e,r),f!==null))return f}let i=0,l=0,a=0,c=[],p=[];for(;i<r.returnStates.length&&l<e.returnStates.length;){const f=r.parents[i],_=e.parents[l];if(r.returnStates[i]===e.returnStates[l]){const m=r.returnStates[i];m===Bn.EMPTY_RETURN_STATE&&f===null&&_===null||f!==null&&_!==null&&f===_?(p[a]=f,c[a]=m):(p[a]=qR(f,_,t,o),c[a]=m),i+=1,l+=1}else r.returnStates[i]<e.returnStates[l]?(p[a]=f,c[a]=r.returnStates[i],i+=1):(p[a]=_,c[a]=e.returnStates[l],l+=1);a+=1}if(i<r.returnStates.length)for(let f=i;f<r.returnStates.length;f++)p[a]=r.parents[f],c[a]=r.returnStates[f],a+=1;else for(let f=l;f<e.returnStates.length;f++)p[a]=e.parents[f],c[a]=e.returnStates[f],a+=1;if(a<p.length){if(a===1){const f=Ys.create(p[0],c[0]);return o!==null&&o.set(r,e,f),f}p=p.slice(0,a),c=c.slice(0,a)}const h=new ac(p,c);return h===r?(o!==null&&o.set(r,e,r),r):h===e?(o!==null&&o.set(r,e,e),e):(_ae(p),o!==null&&o.set(r,e,h),h)}function _ae(r){const e=new RG;for(let t=0;t<r.length;t++){const o=r[t];e.containsKey(o)||e.put(o,o)}for(let t=0;t<r.length;t++)r[t]=e.get(r[t])}function IG(r,e,t){if(r.isEmpty())return r;let o=t.get(r)||null;if(o!==null)return o;if(o=e.get(r),o!==null)return t.put(r,o),o;let i=!1,l=[];for(let c=0;c<l.length;c++){const p=IG(r.getParent(c),e,t);if(i||p!==r.getParent(c)){if(!i){l=[];for(let h=0;h<r.length;h++)l[h]=r.getParent(h);i=!0}l[c]=p}}if(!i)return e.add(r),t.put(r,r),r;let a=null;return l.length===0?a=Bn.EMPTY:l.length===1?a=Ys.create(l[0],r.getReturnState(0)):a=new ac(l,r.returnStates),e.add(a),t.put(a,a),t.put(r,a),a}var Dh={merge:qR,PredictionContext:Bn,PredictionContextCache:dae,SingletonPredictionContext:Ys,predictionContextFromRuleContext:BG,getCachedPredictionContext:IG};const{Set:pL,BitSet:dL}=as,{Token:gp}=Nr,{ATNConfig:yae}=tg,{IntervalSet:fL}=ll,{RuleStopState:vae}=Oh,{RuleTransition:Tae,NotSetTransition:Eae,WildcardTransition:xae,AbstractPredicateTransition:Sae}=Rv,{predictionContextFromRuleContext:Cae,PredictionContext:mL,SingletonPredictionContext:bae}=Dh;class $y{constructor(e){this.atn=e}getDecisionLookahead(e){if(e===null)return null;const t=e.transitions.length,o=[];for(let i=0;i<t;i++){o[i]=new fL;const l=new pL,a=!1;this._LOOK(e.transition(i).target,null,mL.EMPTY,o[i],l,new dL,a,!1),(o[i].length===0||o[i].contains($y.HIT_PRED))&&(o[i]=null)}return o}LOOK(e,t,o){const i=new fL,l=!0;o=o||null;const a=o!==null?Cae(e.atn,o):null;return this._LOOK(e,t,a,i,new pL,new dL,l,!0),i}_LOOK(e,t,o,i,l,a,c,p){const h=new yae({state:e,alt:0,context:o},null);if(!l.contains(h)){if(l.add(h),e===t){if(o===null){i.addOne(gp.EPSILON);return}else if(o.isEmpty()&&p){i.addOne(gp.EOF);return}}if(e instanceof vae){if(o===null){i.addOne(gp.EPSILON);return}else if(o.isEmpty()&&p){i.addOne(gp.EOF);return}if(o!==mL.EMPTY){const f=a.contains(e.ruleIndex);try{a.remove(e.ruleIndex);for(let _=0;_<o.length;_++){const m=this.atn.states[o.getReturnState(_)];this._LOOK(m,t,o.getParent(_),i,l,a,c,p)}}finally{f&&a.add(e.ruleIndex)}return}}for(let f=0;f<e.transitions.length;f++){const _=e.transitions[f];if(_.constructor===Tae){if(a.contains(_.target.ruleIndex))continue;const m=bae.create(o,_.followState.stateNumber);try{a.add(_.target.ruleIndex),this._LOOK(_.target,t,m,i,l,a,c,p)}finally{a.remove(_.target.ruleIndex)}}else if(_ instanceof Sae)c?this._LOOK(_.target,t,o,i,l,a,c,p):i.addOne($y.HIT_PRED);else if(_.isEpsilon)this._LOOK(_.target,t,o,i,l,a,c,p);else if(_.constructor===xae)i.addRange(gp.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{let m=_.label;m!==null&&(_ instanceof Eae&&(m=m.complement(gp.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),i.addSet(m))}}}}}$y.HIT_PRED=gp.INVALID_TYPE;var OG=$y;const kae=OG,{IntervalSet:Aae}=ll,{Token:hf}=Nr;class DG{constructor(e,t){this.grammarType=e,this.maxTokenType=t,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=null,this.modeNameToStartState={},this.ruleToTokenType=null,this.lexerActions=null,this.modeToStartState=[]}nextTokensInContext(e,t){return new kae(this).LOOK(e,null,t)}nextTokensNoContext(e){return e.nextTokenWithinRule!==null||(e.nextTokenWithinRule=this.nextTokensInContext(e,null),e.nextTokenWithinRule.readOnly=!0),e.nextTokenWithinRule}nextTokens(e,t){return t===void 0?this.nextTokensNoContext(e):this.nextTokensInContext(e,t)}addState(e){e!==null&&(e.atn=this,e.stateNumber=this.states.length),this.states.push(e)}removeState(e){this.states[e.stateNumber]=null}defineDecisionState(e){return this.decisionToState.push(e),e.decision=this.decisionToState.length-1,e.decision}getDecisionState(e){return this.decisionToState.length===0?null:this.decisionToState[e]}getExpectedTokens(e,t){if(e<0||e>=this.states.length)throw"Invalid state number.";const o=this.states[e];let i=this.nextTokens(o);if(!i.contains(hf.EPSILON))return i;const l=new Aae;for(l.addSet(i),l.removeOne(hf.EPSILON);t!==null&&t.invokingState>=0&&i.contains(hf.EPSILON);){const c=this.states[t.invokingState].transitions[0];i=this.nextTokens(c.followState),l.addSet(i),l.removeOne(hf.EPSILON),t=t.parentCtx}return i.contains(hf.EPSILON)&&l.addOne(hf.EOF),l}}DG.INVALID_ALT_NUMBER=0;var og=DG,wae={LEXER:0,PARSER:1};class hx{constructor(e){e===void 0&&(e=null),this.readOnly=!1,this.verifyATN=e===null?!0:e.verifyATN,this.generateRuleBypassTransitions=e===null?!1:e.generateRuleBypassTransitions}}hx.defaultOptions=new hx;hx.defaultOptions.readOnly=!0;var LG=hx;const iu={CHANNEL:0,CUSTOM:1,MODE:2,MORE:3,POP_MODE:4,PUSH_MODE:5,SKIP:6,TYPE:7};class su{constructor(e){this.actionType=e,this.isPositionDependent=!1}hashCode(){const e=new Hash;return this.updateHashCode(e),e.finish()}updateHashCode(e){e.update(this.actionType)}equals(e){return this===e}}class sw extends su{constructor(){super(iu.SKIP)}execute(e){e.skip()}toString(){return"skip"}}sw.INSTANCE=new sw;class QR extends su{constructor(e){super(iu.TYPE);this.type=e}execute(e){e.type=this.type}updateHashCode(e){e.update(this.actionType,this.type)}equals(e){return this===e?!0:e instanceof QR?this.type===e.type:!1}toString(){return"type("+this.type+")"}}class ZR extends su{constructor(e){super(iu.PUSH_MODE);this.mode=e}execute(e){e.pushMode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e?!0:e instanceof ZR?this.mode===e.mode:!1}toString(){return"pushMode("+this.mode+")"}}class lw extends su{constructor(){super(iu.POP_MODE)}execute(e){e.popMode()}toString(){return"popMode"}}lw.INSTANCE=new lw;class aw extends su{constructor(){super(iu.MORE)}execute(e){e.more()}toString(){return"more"}}aw.INSTANCE=new aw;class eB extends su{constructor(e){super(iu.MODE);this.mode=e}execute(e){e.mode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e?!0:e instanceof eB?this.mode===e.mode:!1}toString(){return"mode("+this.mode+")"}}class tB extends su{constructor(e,t){super(iu.CUSTOM);this.ruleIndex=e,this.actionIndex=t,this.isPositionDependent=!0}execute(e){e.action(null,this.ruleIndex,this.actionIndex)}updateHashCode(e){e.update(this.actionType,this.ruleIndex,this.actionIndex)}equals(e){return this===e?!0:e instanceof tB?this.ruleIndex===e.ruleIndex&&this.actionIndex===e.actionIndex:!1}}class nB extends su{constructor(e){super(iu.CHANNEL);this.channel=e}execute(e){e._channel=this.channel}updateHashCode(e){e.update(this.actionType,this.channel)}equals(e){return this===e?!0:e instanceof nB?this.channel===e.channel:!1}toString(){return"channel("+this.channel+")"}}class oB extends su{constructor(e,t){super(t.actionType);this.offset=e,this.action=t,this.isPositionDependent=!0}execute(e){this.action.execute(e)}updateHashCode(e){e.update(this.actionType,this.offset,this.action)}equals(e){return this===e?!0:e instanceof oB?this.offset===e.offset&&this.action===e.action:!1}}var NG={LexerActionType:iu,LexerSkipAction:sw,LexerChannelAction:nB,LexerCustomAction:tB,LexerIndexedCustomAction:oB,LexerMoreAction:aw,LexerTypeAction:QR,LexerPushModeAction:ZR,LexerPopModeAction:lw,LexerModeAction:eB};const{Token:Hb}=Nr,Mae=og,N0=wae,{ATNState:Zi,BasicState:gL,DecisionState:Rae,BlockStartState:Gb,BlockEndState:Vb,LoopEndState:pf,RuleStartState:_L,RuleStopState:o_,TokensStartState:Bae,PlusLoopbackState:yL,StarLoopbackState:Wb,StarLoopEntryState:df,PlusBlockStartState:zb,StarBlockStartState:Xb,BasicBlockStartState:vL}=Oh,{Transition:Ia,AtomTransition:jb,SetTransition:Iae,NotSetTransition:Oae,RuleTransition:TL,RangeTransition:EL,ActionTransition:Dae,EpsilonTransition:r_,WildcardTransition:Lae,PredicateTransition:Nae,PrecedencePredicateTransition:$ae}=Rv,{IntervalSet:Pae}=ll,Fae=LG,{LexerActionType:Nu,LexerSkipAction:Uae,LexerChannelAction:Hae,LexerCustomAction:Gae,LexerMoreAction:Vae,LexerTypeAction:Wae,LexerPushModeAction:zae,LexerPopModeAction:Xae,LexerModeAction:jae}=NG,Jae="AADB8D7E-AEEF-4415-AD2B-8204D6CF042E",rB="59627784-3BE5-417A-B9EB-8131A7286089",Jb=[Jae,rB],xL=3,Kae=rB;function $0(r,e){const t=[];return t[r-1]=e,t.map(function(o){return e})}class Yae{constructor(e){e==null&&(e=Fae.defaultOptions),this.deserializationOptions=e,this.stateFactories=null,this.actionFactories=null}isFeatureSupported(e,t){const o=Jb.indexOf(e);return o<0?!1:Jb.indexOf(t)>=o}deserialize(e){this.reset(e),this.checkVersion(),this.checkUUID();const t=this.readATN();this.readStates(t),this.readRules(t),this.readModes(t);const o=[];return this.readSets(t,o,this.readInt.bind(this)),this.isFeatureSupported(rB,this.uuid)&&this.readSets(t,o,this.readInt32.bind(this)),this.readEdges(t,o),this.readDecisions(t),this.readLexerActions(t),this.markPrecedenceDecisions(t),this.verifyATN(t),this.deserializationOptions.generateRuleBypassTransitions&&t.grammarType===N0.PARSER&&(this.generateRuleBypassTransitions(t),this.verifyATN(t)),t}reset(e){const t=function(i){const l=i.charCodeAt(0);return l>1?l-2:l+65534},o=e.split("").map(t);o[0]=e.charCodeAt(0),this.data=o,this.pos=0}checkVersion(){const e=this.readInt();if(e!==xL)throw"Could not deserialize ATN with version "+e+" (expected "+xL+")."}checkUUID(){const e=this.readUUID();if(Jb.indexOf(e)<0)throw Kae;this.uuid=e}readATN(){const e=this.readInt(),t=this.readInt();return new Mae(e,t)}readStates(e){let t,o,i;const l=[],a=[],c=this.readInt();for(let f=0;f<c;f++){const _=this.readInt();if(_===Zi.INVALID_TYPE){e.addState(null);continue}let m=this.readInt();m===65535&&(m=-1);const v=this.stateFactory(_,m);if(_===Zi.LOOP_END){const x=this.readInt();l.push([v,x])}else if(v instanceof Gb){const x=this.readInt();a.push([v,x])}e.addState(v)}for(t=0;t<l.length;t++)o=l[t],o[0].loopBackState=e.states[o[1]];for(t=0;t<a.length;t++)o=a[t],o[0].endState=e.states[o[1]];let p=this.readInt();for(t=0;t<p;t++)i=this.readInt(),e.states[i].nonGreedy=!0;let h=this.readInt();for(t=0;t<h;t++)i=this.readInt(),e.states[i].isPrecedenceRule=!0}readRules(e){let t;const o=this.readInt();for(e.grammarType===N0.LEXER&&(e.ruleToTokenType=$0(o,0)),e.ruleToStartState=$0(o,0),t=0;t<o;t++){const i=this.readInt();if(e.ruleToStartState[t]=e.states[i],e.grammarType===N0.LEXER){let l=this.readInt();l===65535&&(l=Hb.EOF),e.ruleToTokenType[t]=l}}for(e.ruleToStopState=$0(o,0),t=0;t<e.states.length;t++){const i=e.states[t];i instanceof o_&&(e.ruleToStopState[i.ruleIndex]=i,e.ruleToStartState[i.ruleIndex].stopState=i)}}readModes(e){const t=this.readInt();for(let o=0;o<t;o++){let i=this.readInt();e.modeToStartState.push(e.states[i])}}readSets(e,t,o){const i=this.readInt();for(let l=0;l<i;l++){const a=new Pae;t.push(a);const c=this.readInt();this.readInt()!==0&&a.addOne(-1);for(let h=0;h<c;h++){const f=o(),_=o();a.addRange(f,_)}}}readEdges(e,t){let o,i,l,a,c;const p=this.readInt();for(o=0;o<p;o++){const h=this.readInt(),f=this.readInt(),_=this.readInt(),m=this.readInt(),v=this.readInt(),x=this.readInt();a=this.edgeFactory(e,_,h,f,m,v,x,t),e.states[h].addTransition(a)}for(o=0;o<e.states.length;o++)for(l=e.states[o],i=0;i<l.transitions.length;i++){const h=l.transitions[i];if(!(h instanceof TL))continue;let f=-1;e.ruleToStartState[h.target.ruleIndex].isPrecedenceRule&&h.precedence===0&&(f=h.target.ruleIndex),a=new r_(h.followState,f),e.ruleToStopState[h.target.ruleIndex].addTransition(a)}for(o=0;o<e.states.length;o++){if(l=e.states[o],l instanceof Gb){if(l.endState===null||l.endState.startState!==null)throw"IllegalState";l.endState.startState=l}if(l instanceof yL)for(i=0;i<l.transitions.length;i++)c=l.transitions[i].target,c instanceof zb&&(c.loopBackState=l);else if(l instanceof Wb)for(i=0;i<l.transitions.length;i++)c=l.transitions[i].target,c instanceof df&&(c.loopBackState=l)}}readDecisions(e){const t=this.readInt();for(let o=0;o<t;o++){const i=this.readInt(),l=e.states[i];e.decisionToState.push(l),l.decision=o}}readLexerActions(e){if(e.grammarType===N0.LEXER){const t=this.readInt();e.lexerActions=$0(t,null);for(let o=0;o<t;o++){const i=this.readInt();let l=this.readInt();l===65535&&(l=-1);let a=this.readInt();a===65535&&(a=-1),e.lexerActions[o]=this.lexerActionFactory(i,l,a)}}}generateRuleBypassTransitions(e){let t;const o=e.ruleToStartState.length;for(t=0;t<o;t++)e.ruleToTokenType[t]=e.maxTokenType+t+1;for(t=0;t<o;t++)this.generateRuleBypassTransition(e,t)}generateRuleBypassTransition(e,t){let o,i;const l=new vL;l.ruleIndex=t,e.addState(l);const a=new Vb;a.ruleIndex=t,e.addState(a),l.endState=a,e.defineDecisionState(l),a.startState=l;let c=null,p=null;if(e.ruleToStartState[t].isPrecedenceRule){for(p=null,o=0;o<e.states.length;o++)if(i=e.states[o],this.stateIsEndStateFor(i,t)){p=i,c=i.loopBackState.transitions[0];break}if(c===null)throw"Couldn't identify final state of the precedence rule prefix section."}else p=e.ruleToStopState[t];for(o=0;o<e.states.length;o++){i=e.states[o];for(let m=0;m<i.transitions.length;m++){const v=i.transitions[m];v!==c&&v.target===p&&(v.target=a)}}const h=e.ruleToStartState[t],f=h.transitions.length;for(;f>0;)l.addTransition(h.transitions[f-1]),h.transitions=h.transitions.slice(-1);e.ruleToStartState[t].addTransition(new r_(l)),a.addTransition(new r_(p));const _=new gL;e.addState(_),_.addTransition(new jb(a,e.ruleToTokenType[t])),l.addTransition(new r_(_))}stateIsEndStateFor(e,t){if(e.ruleIndex!==t||!(e instanceof df))return null;const o=e.transitions[e.transitions.length-1].target;return o instanceof pf&&o.epsilonOnlyTransitions&&o.transitions[0].target instanceof o_?e:null}markPrecedenceDecisions(e){for(let t=0;t<e.states.length;t++){const o=e.states[t];if(o instanceof df&&e.ruleToStartState[o.ruleIndex].isPrecedenceRule){const i=o.transitions[o.transitions.length-1].target;i instanceof pf&&i.epsilonOnlyTransitions&&i.transitions[0].target instanceof o_&&(o.isPrecedenceDecision=!0)}}}verifyATN(e){if(!!this.deserializationOptions.verifyATN)for(let t=0;t<e.states.length;t++){const o=e.states[t];if(o!==null)if(this.checkCondition(o.epsilonOnlyTransitions||o.transitions.length<=1),o instanceof zb)this.checkCondition(o.loopBackState!==null);else if(o instanceof df)if(this.checkCondition(o.loopBackState!==null),this.checkCondition(o.transitions.length===2),o.transitions[0].target instanceof Xb)this.checkCondition(o.transitions[1].target instanceof pf),this.checkCondition(!o.nonGreedy);else if(o.transitions[0].target instanceof pf)this.checkCondition(o.transitions[1].target instanceof Xb),this.checkCondition(o.nonGreedy);else throw"IllegalState";else o instanceof Wb?(this.checkCondition(o.transitions.length===1),this.checkCondition(o.transitions[0].target instanceof df)):o instanceof pf?this.checkCondition(o.loopBackState!==null):o instanceof _L?this.checkCondition(o.stopState!==null):o instanceof Gb?this.checkCondition(o.endState!==null):o instanceof Vb?this.checkCondition(o.startState!==null):o instanceof Rae?this.checkCondition(o.transitions.length<=1||o.decision>=0):this.checkCondition(o.transitions.length<=1||o instanceof o_)}}checkCondition(e,t){if(!e)throw t==null&&(t="IllegalState"),t}readInt(){return this.data[this.pos++]}readInt32(){const e=this.readInt(),t=this.readInt();return e|t<<16}readLong(){const e=this.readInt32(),t=this.readInt32();return e&4294967295|t<<32}readUUID(){const e=[];for(let t=7;t>=0;t--){const o=this.readInt();e[2*t+1]=o&255,e[2*t]=o>>8&255}return wi[e[0]]+wi[e[1]]+wi[e[2]]+wi[e[3]]+"-"+wi[e[4]]+wi[e[5]]+"-"+wi[e[6]]+wi[e[7]]+"-"+wi[e[8]]+wi[e[9]]+"-"+wi[e[10]]+wi[e[11]]+wi[e[12]]+wi[e[13]]+wi[e[14]]+wi[e[15]]}edgeFactory(e,t,o,i,l,a,c,p){const h=e.states[i];switch(t){case Ia.EPSILON:return new r_(h);case Ia.RANGE:return c!==0?new EL(h,Hb.EOF,a):new EL(h,l,a);case Ia.RULE:return new TL(e.states[l],a,c,h);case Ia.PREDICATE:return new Nae(h,l,a,c!==0);case Ia.PRECEDENCE:return new $ae(h,l);case Ia.ATOM:return c!==0?new jb(h,Hb.EOF):new jb(h,l);case Ia.ACTION:return new Dae(h,l,a,c!==0);case Ia.SET:return new Iae(h,p[l]);case Ia.NOT_SET:return new Oae(h,p[l]);case Ia.WILDCARD:return new Lae(h);default:throw"The specified transition type: "+t+" is not valid."}}stateFactory(e,t){if(this.stateFactories===null){const o=[];o[Zi.INVALID_TYPE]=null,o[Zi.BASIC]=()=>new gL,o[Zi.RULE_START]=()=>new _L,o[Zi.BLOCK_START]=()=>new vL,o[Zi.PLUS_BLOCK_START]=()=>new zb,o[Zi.STAR_BLOCK_START]=()=>new Xb,o[Zi.TOKEN_START]=()=>new Bae,o[Zi.RULE_STOP]=()=>new o_,o[Zi.BLOCK_END]=()=>new Vb,o[Zi.STAR_LOOP_BACK]=()=>new Wb,o[Zi.STAR_LOOP_ENTRY]=()=>new df,o[Zi.PLUS_LOOP_BACK]=()=>new yL,o[Zi.LOOP_END]=()=>new pf,this.stateFactories=o}if(e>this.stateFactories.length||this.stateFactories[e]===null)throw"The specified state type "+e+" is not valid.";{const o=this.stateFactories[e]();if(o!==null)return o.ruleIndex=t,o}}lexerActionFactory(e,t,o){if(this.actionFactories===null){const i=[];i[Nu.CHANNEL]=(l,a)=>new Hae(l),i[Nu.CUSTOM]=(l,a)=>new Gae(l,a),i[Nu.MODE]=(l,a)=>new jae(l),i[Nu.MORE]=(l,a)=>Vae.INSTANCE,i[Nu.POP_MODE]=(l,a)=>Xae.INSTANCE,i[Nu.PUSH_MODE]=(l,a)=>new zae(l),i[Nu.SKIP]=(l,a)=>Uae.INSTANCE,i[Nu.TYPE]=(l,a)=>new Wae(l),this.actionFactories=i}if(e>this.actionFactories.length||this.actionFactories[e]===null)throw"The specified lexer action type "+e+" is not valid.";return this.actionFactories[e](t,o)}}function qae(){const r=[];for(let e=0;e<256;e++)r[e]=(e+256).toString(16).substr(1).toUpperCase();return r}const wi=qae();var $G=Yae;class iB{syntaxError(e,t,o,i,l,a){}reportAmbiguity(e,t,o,i,l,a,c){}reportAttemptingFullContext(e,t,o,i,l,a){}reportContextSensitivity(e,t,o,i,l,a){}}class cw extends iB{constructor(){super()}syntaxError(e,t,o,i,l,a){console.error("line "+o+":"+i+" "+l)}}cw.INSTANCE=new cw;class Qae extends iB{constructor(e){super();if(e===null)throw"delegates";return this.delegates=e,this}syntaxError(e,t,o,i,l,a){this.delegates.map(c=>c.syntaxError(e,t,o,i,l,a))}reportAmbiguity(e,t,o,i,l,a,c){this.delegates.map(p=>p.reportAmbiguity(e,t,o,i,l,a,c))}reportAttemptingFullContext(e,t,o,i,l,a){this.delegates.map(c=>c.reportAttemptingFullContext(e,t,o,i,l,a))}reportContextSensitivity(e,t,o,i,l,a){this.delegates.map(c=>c.reportContextSensitivity(e,t,o,i,l,a))}}var JS={ErrorListener:iB,ConsoleErrorListener:cw,ProxyErrorListener:Qae};const{Token:Kb}=Nr,{ConsoleErrorListener:Zae}=JS,{ProxyErrorListener:ece}=JS;class sB{constructor(){this._listeners=[Zae.INSTANCE],this._interp=null,this._stateNumber=-1}checkVersion(e){const t="4.9.3";t!==e&&console.log("ANTLR runtime and generated code versions disagree: "+t+"!="+e)}addErrorListener(e){this._listeners.push(e)}removeErrorListeners(){this._listeners=[]}getLiteralNames(){return Object.getPrototypeOf(this).constructor.literalNames||[]}getSymbolicNames(){return Object.getPrototypeOf(this).constructor.symbolicNames||[]}getTokenNames(){if(!this.tokenNames){const e=this.getLiteralNames(),t=this.getSymbolicNames(),o=e.length>t.length?e.length:t.length;this.tokenNames=[];for(let i=0;i<o;i++)this.tokenNames[i]=e[i]||t[i]||"<INVALID"}return this.tokenNames}getTokenTypeMap(){const e=this.getTokenNames();if(e===null)throw"The current recognizer does not provide a list of token names.";let t=this.tokenTypeMapCache[e];return t===void 0&&(t=e.reduce(function(o,i,l){o[i]=l}),t.EOF=Kb.EOF,this.tokenTypeMapCache[e]=t),t}getRuleIndexMap(){const e=this.ruleNames;if(e===null)throw"The current recognizer does not provide a list of rule names.";let t=this.ruleIndexMapCache[e];return t===void 0&&(t=e.reduce(function(o,i,l){o[i]=l}),this.ruleIndexMapCache[e]=t),t}getTokenType(e){const t=this.getTokenTypeMap()[e];return t!==void 0?t:Kb.INVALID_TYPE}getErrorHeader(e){const t=e.getOffendingToken().line,o=e.getOffendingToken().column;return"line "+t+":"+o}getTokenErrorDisplay(e){if(e===null)return"<no token>";let t=e.text;return t===null&&(e.type===Kb.EOF?t="<EOF>":t="<"+e.type+">"),t=t.replace(`
`,"\\n").replace("\r","\\r").replace("	","\\t"),"'"+t+"'"}getErrorListenerDispatch(){return new ece(this._listeners)}sempred(e,t,o){return!0}precpred(e,t){return!0}get state(){return this._stateNumber}set state(e){this._stateNumber=e}}sB.tokenTypeMapCache={};sB.ruleIndexMapCache={};var PG=sB;const SL=Nr.CommonToken;class tce{}class uw extends tce{constructor(e){super();this.copyText=e===void 0?!1:e}create(e,t,o,i,l,a,c,p){const h=new SL(e,t,i,l,a);return h.line=c,h.column=p,o!==null?h.text=o:this.copyText&&e[1]!==null&&(h.text=e[1].getText(l,a)),h}createThin(e,t){const o=new SL(null,e);return o.text=t,o}}uw.DEFAULT=new uw;var nce=uw;const{PredicateTransition:oce}=Rv,{Interval:rce}=ll.Interval;class dd extends Error{constructor(e){super(e.message);Error.captureStackTrace?Error.captureStackTrace(this,dd):new Error().stack,this.message=e.message,this.recognizer=e.recognizer,this.input=e.input,this.ctx=e.ctx,this.offendingToken=null,this.offendingState=-1,this.recognizer!==null&&(this.offendingState=this.recognizer.state)}getExpectedTokens(){return this.recognizer!==null?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null}toString(){return this.message}}class ice extends dd{constructor(e,t,o,i){super({message:"",recognizer:e,input:t,ctx:null});this.startIndex=o,this.deadEndConfigs=i}toString(){let e="";return this.startIndex>=0&&this.startIndex<this.input.size&&(e=this.input.getText(new rce(this.startIndex,this.startIndex))),"LexerNoViableAltException"+e}}class sce extends dd{constructor(e,t,o,i,l,a){a=a||e._ctx,i=i||e.getCurrentToken(),o=o||e.getCurrentToken(),t=t||e.getInputStream();super({message:"",recognizer:e,input:t,ctx:a});this.deadEndConfigs=l,this.startToken=o,this.offendingToken=i}}class lce extends dd{constructor(e){super({message:"",recognizer:e,input:e.getInputStream(),ctx:e._ctx});this.offendingToken=e.getCurrentToken()}}function ace(r,e){return e!==null?e:"failed predicate: {"+r+"}?"}class cce extends dd{constructor(e,t,o){super({message:ace(t,o||null),recognizer:e,input:e.getInputStream(),ctx:e._ctx});const l=e._interp.atn.states[e.state].transitions[0];l instanceof oce?(this.ruleIndex=l.ruleIndex,this.predicateIndex=l.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=t,this.offendingToken=e.getCurrentToken()}}class lB extends Error{constructor(){super();Error.captureStackTrace(this,lB)}}var hc={RecognitionException:dd,NoViableAltException:sce,LexerNoViableAltException:ice,InputMismatchException:lce,FailedPredicateException:cce,ParseCancellationException:lB};const{Token:es}=Nr,uce=PG,hce=nce,{RecognitionException:pce}=hc,{LexerNoViableAltException:dce}=hc;class Li extends uce{constructor(e){super();this._input=e,this._factory=hce.DEFAULT,this._tokenFactorySourcePair=[this,e],this._interp=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=es.DEFAULT_CHANNEL,this._type=es.INVALID_TYPE,this._modeStack=[],this._mode=Li.DEFAULT_MODE,this._text=null}reset(){this._input!==null&&this._input.seek(0),this._token=null,this._type=es.INVALID_TYPE,this._channel=es.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=Li.DEFAULT_MODE,this._modeStack=[],this._interp.reset()}nextToken(){if(this._input===null)throw"nextToken requires a non-null input stream.";const e=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=es.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this._interp.column,this._tokenStartLine=this._interp.line,this._text=null;let t=!1;for(;;){this._type=es.INVALID_TYPE;let o=Li.SKIP;try{o=this._interp.match(this._input,this._mode)}catch(i){if(i instanceof pce)this.notifyListeners(i),this.recover(i);else throw console.log(i.stack),i}if(this._input.LA(1)===es.EOF&&(this._hitEOF=!0),this._type===es.INVALID_TYPE&&(this._type=o),this._type===Li.SKIP){t=!0;break}if(this._type!==Li.MORE)break}if(!t)return this._token===null&&this.emit(),this._token}}finally{this._input.release(e)}}skip(){this._type=Li.SKIP}more(){this._type=Li.MORE}mode(e){this._mode=e}pushMode(e){this._interp.debug&&console.log("pushMode "+e),this._modeStack.push(this._mode),this.mode(e)}popMode(){if(this._modeStack.length===0)throw"Empty Stack";return this._interp.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode}emitToken(e){this._token=e}emit(){const e=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(e),e}emitEOF(){const e=this.column,t=this.line,o=this._factory.create(this._tokenFactorySourcePair,es.EOF,null,es.DEFAULT_CHANNEL,this._input.index,this._input.index-1,t,e);return this.emitToken(o),o}getCharIndex(){return this._input.index}getAllTokens(){const e=[];let t=this.nextToken();for(;t.type!==es.EOF;)e.push(t),t=this.nextToken();return e}notifyListeners(e){const t=this._tokenStartCharIndex,o=this._input.index,i=this._input.getText(t,o),l="token recognition error at: '"+this.getErrorDisplay(i)+"'";this.getErrorListenerDispatch().syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,l,e)}getErrorDisplay(e){const t=[];for(let o=0;o<e.length;o++)t.push(e[o]);return t.join("")}getErrorDisplayForChar(e){return e.charCodeAt(0)===es.EOF?"<EOF>":e===`
`?"\\n":e==="	"?"\\t":e==="\r"?"\\r":e}getCharErrorDisplay(e){return"'"+this.getErrorDisplayForChar(e)+"'"}recover(e){this._input.LA(1)!==es.EOF&&(e instanceof dce?this._interp.consume(this._input):this._input.consume())}get inputStream(){return this._input}set inputStream(e){this._input=null,this._tokenFactorySourcePair=[this,this._input],this.reset(),this._input=e,this._tokenFactorySourcePair=[this,this._input]}get sourceName(){return this._input.sourceName}get type(){return this._type}set type(e){this._type=e}get line(){return this._interp.line}set line(e){this._interp.line=e}get column(){return this._interp.column}set column(e){this._interp.column=e}get text(){return this._text!==null?this._text:this._interp.getText(this._input)}set text(e){this._text=e}}Li.DEFAULT_MODE=0;Li.MORE=-2;Li.SKIP=-3;Li.DEFAULT_TOKEN_CHANNEL=es.DEFAULT_CHANNEL;Li.HIDDEN=es.HIDDEN_CHANNEL;Li.MIN_CHAR_VALUE=0;Li.MAX_CHAR_VALUE=1114111;var KS=Li;const fce=og,_p=as,{SemanticContext:CL}=Mv,{merge:mce}=Dh;function gce(r){return r.hashCodeForConfigSet()}function _ce(r,e){return r===e?!0:r===null||e===null?!1:r.equalsForConfigSet(e)}class YS{constructor(e){this.configLookup=new _p.Set(gce,_ce),this.fullCtx=e===void 0?!0:e,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1}add(e,t){if(t===void 0&&(t=null),this.readOnly)throw"This set is readonly";e.semanticContext!==CL.NONE&&(this.hasSemanticContext=!0),e.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);const o=this.configLookup.add(e);if(o===e)return this.cachedHashCode=-1,this.configs.push(e),!0;const i=!this.fullCtx,l=mce(o.context,e.context,i,t);return o.reachesIntoOuterContext=Math.max(o.reachesIntoOuterContext,e.reachesIntoOuterContext),e.precedenceFilterSuppressed&&(o.precedenceFilterSuppressed=!0),o.context=l,!0}getStates(){const e=new _p.Set;for(let t=0;t<this.configs.length;t++)e.add(this.configs[t].state);return e}getPredicates(){const e=[];for(let t=0;t<this.configs.length;t++){const o=this.configs[t].semanticContext;o!==CL.NONE&&e.push(o.semanticContext)}return e}optimizeConfigs(e){if(this.readOnly)throw"This set is readonly";if(this.configLookup.length!==0)for(let t=0;t<this.configs.length;t++){const o=this.configs[t];o.context=e.getCachedContext(o.context)}}addAll(e){for(let t=0;t<e.length;t++)this.add(e[t]);return!1}equals(e){return this===e||e instanceof YS&&_p.equalArrays(this.configs,e.configs)&&this.fullCtx===e.fullCtx&&this.uniqueAlt===e.uniqueAlt&&this.conflictingAlts===e.conflictingAlts&&this.hasSemanticContext===e.hasSemanticContext&&this.dipsIntoOuterContext===e.dipsIntoOuterContext}hashCode(){const e=new _p.Hash;return e.update(this.configs),e.finish()}updateHashCode(e){this.readOnly?(this.cachedHashCode===-1&&(this.cachedHashCode=this.hashCode()),e.update(this.cachedHashCode)):e.update(this.hashCode())}isEmpty(){return this.configs.length===0}contains(e){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(e)}containsFast(e){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(e)}clear(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new _p.Set}setReadonly(e){this.readOnly=e,e&&(this.configLookup=null)}toString(){return _p.arrayToString(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==fce.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(this.conflictingAlts!==null?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")}get items(){return this.configs}get length(){return this.configs.length}}class yce extends YS{constructor(){super();this.configLookup=new _p.Set}}var rg={ATNConfigSet:YS,OrderedATNConfigSet:yce};const{ATNConfigSet:vce}=rg,{Hash:Tce,Set:Ece}=as;class xce{constructor(e,t){this.alt=t,this.pred=e}toString(){return"("+this.pred+", "+this.alt+")"}}class aB{constructor(e,t){return e===null&&(e=-1),t===null&&(t=new vce),this.stateNumber=e,this.configs=t,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}getAltSet(){const e=new Ece;if(this.configs!==null)for(let t=0;t<this.configs.length;t++){const o=this.configs[t];e.add(o.alt)}return e.length===0?null:e}equals(e){return this===e||e instanceof aB&&this.configs.equals(e.configs)}toString(){let e=""+this.stateNumber+":"+this.configs;return this.isAcceptState&&(e=e+"=>",this.predicates!==null?e=e+this.predicates:e=e+this.prediction),e}hashCode(){const e=new Tce;return e.update(this.configs),e.finish()}}var Bv={DFAState:aB,PredPrediction:xce};const{DFAState:Sce}=Bv,{ATNConfigSet:Cce}=rg,{getCachedPredictionContext:bce}=Dh,{Map:kce}=as;class FG{constructor(e,t){return this.atn=e,this.sharedContextCache=t,this}getCachedContext(e){if(this.sharedContextCache===null)return e;const t=new kce;return bce(e,this.sharedContextCache,t)}}FG.ERROR=new Sce(2147483647,new Cce);var UG=FG;const{hashStuff:Ace}=as,{LexerIndexedCustomAction:Yb}=NG;class Of{constructor(e){return this.lexerActions=e===null?[]:e,this.cachedHashCode=Ace(e),this}fixOffsetBeforeMatch(e){let t=null;for(let o=0;o<this.lexerActions.length;o++)this.lexerActions[o].isPositionDependent&&!(this.lexerActions[o]instanceof Yb)&&(t===null&&(t=this.lexerActions.concat([])),t[o]=new Yb(e,this.lexerActions[o]));return t===null?this:new Of(t)}execute(e,t,o){let i=!1;const l=t.index;try{for(let a=0;a<this.lexerActions.length;a++){let c=this.lexerActions[a];if(c instanceof Yb){const p=c.offset;t.seek(o+p),c=c.action,i=o+p!==l}else c.isPositionDependent&&(t.seek(l),i=!1);c.execute(e)}}finally{i&&t.seek(l)}}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}equals(e){if(this===e)return!0;if(e instanceof Of){if(this.cachedHashCode!=e.cachedHashCode)return!1;if(this.lexerActions.length!=e.lexerActions.length)return!1;{const t=this.lexerActions.length;for(let o=0;o<t;++o)if(!this.lexerActions[o].equals(e.lexerActions[o]))return!1;return!0}}else return!1}static append(e,t){if(e===null)return new Of([t]);const o=e.lexerActions.concat([t]);return new Of(o)}}var wce=Of;const{Token:ff}=Nr,P0=KS,Mce=og,F0=UG,{DFAState:Rce}=Bv,{OrderedATNConfigSet:bL}=rg,{PredictionContext:qb}=Dh,{SingletonPredictionContext:Bce}=Dh,{RuleStopState:kL}=Oh,{LexerATNConfig:Oa}=tg,{Transition:$u}=Rv,Ice=wce,{LexerNoViableAltException:Oce}=hc;function AL(r){r.index=-1,r.line=0,r.column=-1,r.dfaState=null}class Dce{constructor(){AL(this)}reset(){AL(this)}}class Io extends F0{constructor(e,t,o,i){super(t,i);this.decisionToDFA=o,this.recog=e,this.startIndex=-1,this.line=1,this.column=0,this.mode=P0.DEFAULT_MODE,this.prevAccept=new Dce}copyState(e){this.column=e.column,this.line=e.line,this.mode=e.mode,this.startIndex=e.startIndex}match(e,t){this.match_calls+=1,this.mode=t;const o=e.mark();try{this.startIndex=e.index,this.prevAccept.reset();const i=this.decisionToDFA[t];return i.s0===null?this.matchATN(e):this.execATN(e,i.s0)}finally{e.release(o)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=P0.DEFAULT_MODE}matchATN(e){const t=this.atn.modeToStartState[this.mode];Io.debug&&console.log("matchATN mode "+this.mode+" start: "+t);const o=this.mode,i=this.computeStartState(e,t),l=i.hasSemanticContext;i.hasSemanticContext=!1;const a=this.addDFAState(i);l||(this.decisionToDFA[this.mode].s0=a);const c=this.execATN(e,a);return Io.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[o].toLexerString()),c}execATN(e,t){Io.debug&&console.log("start state closure="+t.configs),t.isAcceptState&&this.captureSimState(this.prevAccept,e,t);let o=e.LA(1),i=t;for(;;){Io.debug&&console.log("execATN loop starting closure: "+i.configs);let l=this.getExistingTargetState(i,o);if(l===null&&(l=this.computeTargetState(e,i,o)),l===F0.ERROR||(o!==ff.EOF&&this.consume(e),l.isAcceptState&&(this.captureSimState(this.prevAccept,e,l),o===ff.EOF)))break;o=e.LA(1),i=l}return this.failOrAccept(this.prevAccept,e,i.configs,o)}getExistingTargetState(e,t){if(e.edges===null||t<Io.MIN_DFA_EDGE||t>Io.MAX_DFA_EDGE)return null;let o=e.edges[t-Io.MIN_DFA_EDGE];return o===void 0&&(o=null),Io.debug&&o!==null&&console.log("reuse state "+e.stateNumber+" edge to "+o.stateNumber),o}computeTargetState(e,t,o){const i=new bL;return this.getReachableConfigSet(e,t.configs,i,o),i.items.length===0?(i.hasSemanticContext||this.addDFAEdge(t,o,F0.ERROR),F0.ERROR):this.addDFAEdge(t,o,null,i)}failOrAccept(e,t,o,i){if(this.prevAccept.dfaState!==null){const l=e.dfaState.lexerActionExecutor;return this.accept(t,l,this.startIndex,e.index,e.line,e.column),e.dfaState.prediction}else{if(i===ff.EOF&&t.index===this.startIndex)return ff.EOF;throw new Oce(this.recog,t,this.startIndex,o)}}getReachableConfigSet(e,t,o,i){let l=Mce.INVALID_ALT_NUMBER;for(let a=0;a<t.items.length;a++){const c=t.items[a],p=c.alt===l;if(!(p&&c.passedThroughNonGreedyDecision)){Io.debug&&console.log(`testing %s at %s
`,this.getTokenName(i),c.toString(this.recog,!0));for(let h=0;h<c.state.transitions.length;h++){const f=c.state.transitions[h],_=this.getReachableTarget(f,i);if(_!==null){let m=c.lexerActionExecutor;m!==null&&(m=m.fixOffsetBeforeMatch(e.index-this.startIndex));const v=i===ff.EOF,x=new Oa({state:_,lexerActionExecutor:m},c);this.closure(e,x,o,p,!0,v)&&(l=c.alt)}}}}}accept(e,t,o,i,l,a){Io.debug&&console.log(`ACTION %s
`,t),e.seek(i),this.line=l,this.column=a,t!==null&&this.recog!==null&&t.execute(this.recog,e,o)}getReachableTarget(e,t){return e.matches(t,0,P0.MAX_CHAR_VALUE)?e.target:null}computeStartState(e,t){const o=qb.EMPTY,i=new bL;for(let l=0;l<t.transitions.length;l++){const a=t.transitions[l].target,c=new Oa({state:a,alt:l+1,context:o},null);this.closure(e,c,i,!1,!1,!1)}return i}closure(e,t,o,i,l,a){let c=null;if(Io.debug&&console.log("closure("+t.toString(this.recog,!0)+")"),t.state instanceof kL){if(Io.debug&&(this.recog!==null?console.log(`closure at %s rule stop %s
`,this.recog.ruleNames[t.state.ruleIndex],t):console.log(`closure at rule stop %s
`,t)),t.context===null||t.context.hasEmptyPath()){if(t.context===null||t.context.isEmpty())return o.add(t),!0;o.add(new Oa({state:t.state,context:qb.EMPTY},t)),i=!0}if(t.context!==null&&!t.context.isEmpty()){for(let p=0;p<t.context.length;p++)if(t.context.getReturnState(p)!==qb.EMPTY_RETURN_STATE){const h=t.context.getParent(p),f=this.atn.states[t.context.getReturnState(p)];c=new Oa({state:f,context:h},t),i=this.closure(e,c,o,i,l,a)}}return i}t.state.epsilonOnlyTransitions||(!i||!t.passedThroughNonGreedyDecision)&&o.add(t);for(let p=0;p<t.state.transitions.length;p++){const h=t.state.transitions[p];c=this.getEpsilonTarget(e,t,h,o,l,a),c!==null&&(i=this.closure(e,c,o,i,l,a))}return i}getEpsilonTarget(e,t,o,i,l,a){let c=null;if(o.serializationType===$u.RULE){const p=Bce.create(t.context,o.followState.stateNumber);c=new Oa({state:o.target,context:p},t)}else{if(o.serializationType===$u.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(o.serializationType===$u.PREDICATE)Io.debug&&console.log("EVAL rule "+o.ruleIndex+":"+o.predIndex),i.hasSemanticContext=!0,this.evaluatePredicate(e,o.ruleIndex,o.predIndex,l)&&(c=new Oa({state:o.target},t));else if(o.serializationType===$u.ACTION)if(t.context===null||t.context.hasEmptyPath()){const p=Ice.append(t.lexerActionExecutor,this.atn.lexerActions[o.actionIndex]);c=new Oa({state:o.target,lexerActionExecutor:p},t)}else c=new Oa({state:o.target},t);else o.serializationType===$u.EPSILON?c=new Oa({state:o.target},t):(o.serializationType===$u.ATOM||o.serializationType===$u.RANGE||o.serializationType===$u.SET)&&a&&o.matches(ff.EOF,0,P0.MAX_CHAR_VALUE)&&(c=new Oa({state:o.target},t))}return c}evaluatePredicate(e,t,o,i){if(this.recog===null)return!0;if(!i)return this.recog.sempred(null,t,o);const l=this.column,a=this.line,c=e.index,p=e.mark();try{return this.consume(e),this.recog.sempred(null,t,o)}finally{this.column=l,this.line=a,e.seek(c),e.release(p)}}captureSimState(e,t,o){e.index=t.index,e.line=this.line,e.column=this.column,e.dfaState=o}addDFAEdge(e,t,o,i){if(o===void 0&&(o=null),i===void 0&&(i=null),o===null&&i!==null){const l=i.hasSemanticContext;if(i.hasSemanticContext=!1,o=this.addDFAState(i),l)return o}return t<Io.MIN_DFA_EDGE||t>Io.MAX_DFA_EDGE||(Io.debug&&console.log("EDGE "+e+" -> "+o+" upon "+t),e.edges===null&&(e.edges=[]),e.edges[t-Io.MIN_DFA_EDGE]=o),o}addDFAState(e){const t=new Rce(null,e);let o=null;for(let c=0;c<e.items.length;c++){const p=e.items[c];if(p.state instanceof kL){o=p;break}}o!==null&&(t.isAcceptState=!0,t.lexerActionExecutor=o.lexerActionExecutor,t.prediction=this.atn.ruleToTokenType[o.state.ruleIndex]);const i=this.decisionToDFA[this.mode],l=i.states.get(t);if(l!==null)return l;const a=t;return a.stateNumber=i.states.length,e.setReadonly(!0),a.configs=e,i.states.add(a),a}getDFA(e){return this.decisionToDFA[e]}getText(e){return e.getText(this.startIndex,e.index-1)}consume(e){e.LA(1)===`
`.charCodeAt(0)?(this.line+=1,this.column=0):this.column+=1,e.consume()}getTokenName(e){return e===-1?"EOF":"'"+String.fromCharCode(e)+"'"}}Io.debug=!1;Io.dfa_debug=!1;Io.MIN_DFA_EDGE=0;Io.MAX_DFA_EDGE=127;Io.match_calls=0;var Lce=Io;const{Map:Nce,BitSet:Qb,AltDict:$ce,hashStuff:Pce}=as,wL=og,{RuleStopState:ML}=Oh,{ATNConfigSet:Fce}=rg,{ATNConfig:Uce}=tg,{SemanticContext:Hce}=Mv,La={SLL:0,LL:1,LL_EXACT_AMBIG_DETECTION:2,hasSLLConflictTerminatingPrediction:function(r,e){if(La.allConfigsInRuleStopStates(e))return!0;if(r===La.SLL&&e.hasSemanticContext){const o=new Fce;for(let i=0;i<e.items.length;i++){let l=e.items[i];l=new Uce({semanticContext:Hce.NONE},l),o.add(l)}e=o}const t=La.getConflictingAltSubsets(e);return La.hasConflictingAltSet(t)&&!La.hasStateAssociatedWithOneAlt(e)},hasConfigInRuleStopState:function(r){for(let e=0;e<r.items.length;e++)if(r.items[e].state instanceof ML)return!0;return!1},allConfigsInRuleStopStates:function(r){for(let e=0;e<r.items.length;e++)if(!(r.items[e].state instanceof ML))return!1;return!0},resolvesToJustOneViableAlt:function(r){return La.getSingleViableAlt(r)},allSubsetsConflict:function(r){return!La.hasNonConflictingAltSet(r)},hasNonConflictingAltSet:function(r){for(let e=0;e<r.length;e++)if(r[e].length===1)return!0;return!1},hasConflictingAltSet:function(r){for(let e=0;e<r.length;e++)if(r[e].length>1)return!0;return!1},allSubsetsEqual:function(r){let e=null;for(let t=0;t<r.length;t++){const o=r[t];if(e===null)e=o;else if(o!==e)return!1}return!0},getUniqueAlt:function(r){const e=La.getAlts(r);return e.length===1?e.minValue():wL.INVALID_ALT_NUMBER},getAlts:function(r){const e=new Qb;return r.map(function(t){e.or(t)}),e},getConflictingAltSubsets:function(r){const e=new Nce;return e.hashFunction=function(t){Pce(t.state.stateNumber,t.context)},e.equalsFunction=function(t,o){return t.state.stateNumber===o.state.stateNumber&&t.context.equals(o.context)},r.items.map(function(t){let o=e.get(t);o===null&&(o=new Qb,e.put(t,o)),o.add(t.alt)}),e.getValues()},getStateToAltMap:function(r){const e=new $ce;return r.items.map(function(t){let o=e.get(t.state);o===null&&(o=new Qb,e.put(t.state,o)),o.add(t.alt)}),e},hasStateAssociatedWithOneAlt:function(r){const e=La.getStateToAltMap(r).values();for(let t=0;t<e.length;t++)if(e[t].length===1)return!0;return!1},getSingleViableAlt:function(r){let e=null;for(let t=0;t<r.length;t++){const i=r[t].minValue();if(e===null)e=i;else if(e!==i)return wL.INVALID_ALT_NUMBER}return e}};var HG=La;const GG=YR,qS=ng,Gce=qS.INVALID_INTERVAL,RL=qS.TerminalNode,Vce=qS.TerminalNodeImpl,BL=qS.ErrorNodeImpl,Wce=ll.Interval;class VG extends GG{constructor(e,t){e=e||null,t=t||null;super(e,t);this.ruleIndex=-1,this.children=null,this.start=null,this.stop=null,this.exception=null}copyFrom(e){this.parentCtx=e.parentCtx,this.invokingState=e.invokingState,this.children=null,this.start=e.start,this.stop=e.stop,e.children&&(this.children=[],e.children.map(function(t){t instanceof BL&&(this.children.push(t),t.parentCtx=this)},this))}enterRule(e){}exitRule(e){}addChild(e){return this.children===null&&(this.children=[]),this.children.push(e),e}removeLastChild(){this.children!==null&&this.children.pop()}addTokenNode(e){const t=new Vce(e);return this.addChild(t),t.parentCtx=this,t}addErrorNode(e){const t=new BL(e);return this.addChild(t),t.parentCtx=this,t}getChild(e,t){if(t=t||null,this.children===null||e<0||e>=this.children.length)return null;if(t===null)return this.children[e];for(let o=0;o<this.children.length;o++){const i=this.children[o];if(i instanceof t){if(e===0)return i;e-=1}}return null}getToken(e,t){if(this.children===null||t<0||t>=this.children.length)return null;for(let o=0;o<this.children.length;o++){const i=this.children[o];if(i instanceof RL&&i.symbol.type===e){if(t===0)return i;t-=1}}return null}getTokens(e){if(this.children===null)return[];{const t=[];for(let o=0;o<this.children.length;o++){const i=this.children[o];i instanceof RL&&i.symbol.type===e&&t.push(i)}return t}}getTypedRuleContext(e,t){return this.getChild(t,e)}getTypedRuleContexts(e){if(this.children===null)return[];{const t=[];for(let o=0;o<this.children.length;o++){const i=this.children[o];i instanceof e&&t.push(i)}return t}}getChildCount(){return this.children===null?0:this.children.length}getSourceInterval(){return this.start===null||this.stop===null?Gce:new Wce(this.start.tokenIndex,this.stop.tokenIndex)}}GG.EMPTY=new VG;var zce=VG;const v_=as,{Set:IL,BitSet:OL,DoubleDict:Xce}=v_,ci=og,{ATNState:U0,RuleStopState:i_}=Oh,{ATNConfig:Mi}=tg,{ATNConfigSet:ip}=rg,{Token:Oc}=Nr,{DFAState:Zb,PredPrediction:jce}=Bv,s_=UG,ui=HG,DL=YR,{SemanticContext:Pu}=Mv,{PredictionContext:LL}=Dh,{Interval:ek}=ll,{Transition:Fu,SetTransition:Jce,NotSetTransition:Kce,RuleTransition:Yce,ActionTransition:qce}=Rv,{NoViableAltException:Qce}=hc,{SingletonPredictionContext:Zce,predictionContextFromRuleContext:eue}=Dh;class tue extends s_{constructor(e,t,o,i){super(t,i);this.parser=e,this.decisionToDFA=o,this.predictionMode=ui.LL,this._input=null,this._startIndex=0,this._outerContext=null,this._dfa=null,this.mergeCache=null,this.debug=!1,this.debug_closure=!1,this.debug_add=!1,this.debug_list_atn_decisions=!1,this.dfa_debug=!1,this.retry_debug=!1}reset(){}adaptivePredict(e,t,o){(this.debug||this.debug_list_atn_decisions)&&console.log("adaptivePredict decision "+t+" exec LA(1)=="+this.getLookaheadName(e)+" line "+e.LT(1).line+":"+e.LT(1).column),this._input=e,this._startIndex=e.index,this._outerContext=o;const i=this.decisionToDFA[t];this._dfa=i;const l=e.mark(),a=e.index;try{let c;if(i.precedenceDfa?c=i.getPrecedenceStartState(this.parser.getPrecedence()):c=i.s0,c===null){o===null&&(o=DL.EMPTY),(this.debug||this.debug_list_atn_decisions)&&console.log("predictATN decision "+i.decision+" exec LA(1)=="+this.getLookaheadName(e)+", outerContext="+o.toString(this.parser.ruleNames));const h=!1;let f=this.computeStartState(i.atnStartState,DL.EMPTY,h);i.precedenceDfa?(i.s0.configs=f,f=this.applyPrecedenceFilter(f),c=this.addDFAState(i,new Zb(null,f)),i.setPrecedenceStartState(this.parser.getPrecedence(),c)):(c=this.addDFAState(i,new Zb(null,f)),i.s0=c)}const p=this.execATN(i,c,e,a,o);return this.debug&&console.log("DFA after predictATN: "+i.toString(this.parser.literalNames,this.parser.symbolicNames)),p}finally{this._dfa=null,this.mergeCache=null,e.seek(a),e.release(l)}}execATN(e,t,o,i,l){(this.debug||this.debug_list_atn_decisions)&&console.log("execATN decision "+e.decision+" exec LA(1)=="+this.getLookaheadName(o)+" line "+o.LT(1).line+":"+o.LT(1).column);let a,c=t;this.debug&&console.log("s0 = "+t);let p=o.LA(1);for(;;){let h=this.getExistingTargetState(c,p);if(h===null&&(h=this.computeTargetState(e,c,p)),h===s_.ERROR){const f=this.noViableAlt(o,l,c.configs,i);if(o.seek(i),a=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(c.configs,l),a!==ci.INVALID_ALT_NUMBER)return a;throw f}if(h.requiresFullContext&&this.predictionMode!==ui.SLL){let f=null;if(h.predicates!==null){this.debug&&console.log("DFA state has preds in DFA sim LL failover");const v=o.index;if(v!==i&&o.seek(i),f=this.evalSemanticContext(h.predicates,l,!0),f.length===1)return this.debug&&console.log("Full LL avoided"),f.minValue();v!==i&&o.seek(v)}this.dfa_debug&&console.log("ctx sensitive state "+l+" in "+h);const _=!0,m=this.computeStartState(e.atnStartState,l,_);return this.reportAttemptingFullContext(e,f,h.configs,i,o.index),a=this.execATNWithFullContext(e,h,m,o,i,l),a}if(h.isAcceptState){if(h.predicates===null)return h.prediction;const f=o.index;o.seek(i);const _=this.evalSemanticContext(h.predicates,l,!0);if(_.length===0)throw this.noViableAlt(o,l,h.configs,i);return _.length===1||this.reportAmbiguity(e,h,i,f,!1,_,h.configs),_.minValue()}c=h,p!==Oc.EOF&&(o.consume(),p=o.LA(1))}}getExistingTargetState(e,t){const o=e.edges;return o===null?null:o[t+1]||null}computeTargetState(e,t,o){const i=this.computeReachSet(t.configs,o,!1);if(i===null)return this.addDFAEdge(e,t,o,s_.ERROR),s_.ERROR;let l=new Zb(null,i);const a=this.getUniqueAlt(i);if(this.debug){const c=ui.getConflictingAltSubsets(i);console.log("SLL altSubSets="+v_.arrayToString(c)+", configs="+i+", predict="+a+", allSubsetsConflict="+ui.allSubsetsConflict(c)+", conflictingAlts="+this.getConflictingAlts(i))}return a!==ci.INVALID_ALT_NUMBER?(l.isAcceptState=!0,l.configs.uniqueAlt=a,l.prediction=a):ui.hasSLLConflictTerminatingPrediction(this.predictionMode,i)&&(l.configs.conflictingAlts=this.getConflictingAlts(i),l.requiresFullContext=!0,l.isAcceptState=!0,l.prediction=l.configs.conflictingAlts.minValue()),l.isAcceptState&&l.configs.hasSemanticContext&&(this.predicateDFAState(l,this.atn.getDecisionState(e.decision)),l.predicates!==null&&(l.prediction=ci.INVALID_ALT_NUMBER)),l=this.addDFAEdge(e,t,o,l),l}predicateDFAState(e,t){const o=t.transitions.length,i=this.getConflictingAltsOrUniqueAlt(e.configs),l=this.getPredsForAmbigAlts(i,e.configs,o);l!==null?(e.predicates=this.getPredicatePredictions(i,l),e.prediction=ci.INVALID_ALT_NUMBER):e.prediction=i.minValue()}execATNWithFullContext(e,t,o,i,l,a){(this.debug||this.debug_list_atn_decisions)&&console.log("execATNWithFullContext "+o);const c=!0;let p=!1,h,f=o;i.seek(l);let _=i.LA(1),m=-1;for(;;){if(h=this.computeReachSet(f,_,c),h===null){const x=this.noViableAlt(i,a,f,l);i.seek(l);const b=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(f,a);if(b!==ci.INVALID_ALT_NUMBER)return b;throw x}const v=ui.getConflictingAltSubsets(h);if(this.debug&&console.log("LL altSubSets="+v+", predict="+ui.getUniqueAlt(v)+", resolvesToJustOneViableAlt="+ui.resolvesToJustOneViableAlt(v)),h.uniqueAlt=this.getUniqueAlt(h),h.uniqueAlt!==ci.INVALID_ALT_NUMBER){m=h.uniqueAlt;break}else if(this.predictionMode!==ui.LL_EXACT_AMBIG_DETECTION){if(m=ui.resolvesToJustOneViableAlt(v),m!==ci.INVALID_ALT_NUMBER)break}else if(ui.allSubsetsConflict(v)&&ui.allSubsetsEqual(v)){p=!0,m=ui.getSingleViableAlt(v);break}f=h,_!==Oc.EOF&&(i.consume(),_=i.LA(1))}return h.uniqueAlt!==ci.INVALID_ALT_NUMBER?(this.reportContextSensitivity(e,m,h,l,i.index),m):(this.reportAmbiguity(e,t,l,i.index,p,null,h),m)}computeReachSet(e,t,o){this.debug&&console.log("in computeReachSet, starting closure: "+e),this.mergeCache===null&&(this.mergeCache=new Xce);const i=new ip(o);let l=null;for(let c=0;c<e.items.length;c++){const p=e.items[c];if(this.debug&&console.log("testing "+this.getTokenName(t)+" at "+p),p.state instanceof i_){(o||t===Oc.EOF)&&(l===null&&(l=[]),l.push(p),this.debug_add&&console.log("added "+p+" to skippedStopStates"));continue}for(let h=0;h<p.state.transitions.length;h++){const f=p.state.transitions[h],_=this.getReachableTarget(f,t);if(_!==null){const m=new Mi({state:_},p);i.add(m,this.mergeCache),this.debug_add&&console.log("added "+m+" to intermediate")}}}let a=null;if(l===null&&t!==Oc.EOF&&(i.items.length===1||this.getUniqueAlt(i)!==ci.INVALID_ALT_NUMBER)&&(a=i),a===null){a=new ip(o);const c=new IL,p=t===Oc.EOF;for(let h=0;h<i.items.length;h++)this.closure(i.items[h],a,c,!1,o,p)}if(t===Oc.EOF&&(a=this.removeAllConfigsNotInRuleStopState(a,a===i)),l!==null&&(!o||!ui.hasConfigInRuleStopState(a)))for(let c=0;c<l.length;c++)a.add(l[c],this.mergeCache);return a.items.length===0?null:a}removeAllConfigsNotInRuleStopState(e,t){if(ui.allConfigsInRuleStopStates(e))return e;const o=new ip(e.fullCtx);for(let i=0;i<e.items.length;i++){const l=e.items[i];if(l.state instanceof i_){o.add(l,this.mergeCache);continue}if(t&&l.state.epsilonOnlyTransitions&&this.atn.nextTokens(l.state).contains(Oc.EPSILON)){const c=this.atn.ruleToStopState[l.state.ruleIndex];o.add(new Mi({state:c},l),this.mergeCache)}}return o}computeStartState(e,t,o){const i=eue(this.atn,t),l=new ip(o);for(let a=0;a<e.transitions.length;a++){const c=e.transitions[a].target,p=new Mi({state:c,alt:a+1,context:i},null),h=new IL;this.closure(p,l,h,!0,o,!1)}return l}applyPrecedenceFilter(e){let t;const o=[],i=new ip(e.fullCtx);for(let l=0;l<e.items.length;l++){if(t=e.items[l],t.alt!==1)continue;const a=t.semanticContext.evalPrecedence(this.parser,this._outerContext);a!==null&&(o[t.state.stateNumber]=t.context,a!==t.semanticContext?i.add(new Mi({semanticContext:a},t),this.mergeCache):i.add(t,this.mergeCache))}for(let l=0;l<e.items.length;l++)if(t=e.items[l],t.alt!==1){if(!t.precedenceFilterSuppressed){const a=o[t.state.stateNumber]||null;if(a!==null&&a.equals(t.context))continue}i.add(t,this.mergeCache)}return i}getReachableTarget(e,t){return e.matches(t,0,this.atn.maxTokenType)?e.target:null}getPredsForAmbigAlts(e,t,o){let i=[];for(let a=0;a<t.items.length;a++){const c=t.items[a];e.contains(c.alt)&&(i[c.alt]=Pu.orContext(i[c.alt]||null,c.semanticContext))}let l=0;for(let a=1;a<o+1;a++){const c=i[a]||null;c===null?i[a]=Pu.NONE:c!==Pu.NONE&&(l+=1)}return l===0&&(i=null),this.debug&&console.log("getPredsForAmbigAlts result "+v_.arrayToString(i)),i}getPredicatePredictions(e,t){const o=[];let i=!1;for(let l=1;l<t.length;l++){const a=t[l];e!==null&&e.contains(l)&&o.push(new jce(a,l)),a!==Pu.NONE&&(i=!0)}return i?o:null}getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(e,t){const o=this.splitAccordingToSemanticValidity(e,t),i=o[0],l=o[1];let a=this.getAltThatFinishedDecisionEntryRule(i);return a!==ci.INVALID_ALT_NUMBER||l.items.length>0&&(a=this.getAltThatFinishedDecisionEntryRule(l),a!==ci.INVALID_ALT_NUMBER)?a:ci.INVALID_ALT_NUMBER}getAltThatFinishedDecisionEntryRule(e){const t=[];for(let o=0;o<e.items.length;o++){const i=e.items[o];(i.reachesIntoOuterContext>0||i.state instanceof i_&&i.context.hasEmptyPath())&&t.indexOf(i.alt)<0&&t.push(i.alt)}return t.length===0?ci.INVALID_ALT_NUMBER:Math.min.apply(null,t)}splitAccordingToSemanticValidity(e,t){const o=new ip(e.fullCtx),i=new ip(e.fullCtx);for(let l=0;l<e.items.length;l++){const a=e.items[l];a.semanticContext!==Pu.NONE?a.semanticContext.evaluate(this.parser,t)?o.add(a):i.add(a):o.add(a)}return[o,i]}evalSemanticContext(e,t,o){const i=new OL;for(let l=0;l<e.length;l++){const a=e[l];if(a.pred===Pu.NONE){if(i.add(a.alt),!o)break;continue}const c=a.pred.evaluate(this.parser,t);if((this.debug||this.dfa_debug)&&console.log("eval pred "+a+"="+c),c&&((this.debug||this.dfa_debug)&&console.log("PREDICT "+a.alt),i.add(a.alt),!o))break}return i}closure(e,t,o,i,l,a){this.closureCheckingStopState(e,t,o,i,l,0,a)}closureCheckingStopState(e,t,o,i,l,a,c){if((this.debug||this.debug_closure)&&(console.log("closure("+e.toString(this.parser,!0)+")"),e.reachesIntoOuterContext>50))throw"problem";if(e.state instanceof i_)if(e.context.isEmpty())if(l){t.add(e,this.mergeCache);return}else this.debug&&console.log("FALLING off rule "+this.getRuleName(e.state.ruleIndex));else{for(let p=0;p<e.context.length;p++){if(e.context.getReturnState(p)===LL.EMPTY_RETURN_STATE){if(l){t.add(new Mi({state:e.state,context:LL.EMPTY},e),this.mergeCache);continue}else this.debug&&console.log("FALLING off rule "+this.getRuleName(e.state.ruleIndex)),this.closure_(e,t,o,i,l,a,c);continue}const h=this.atn.states[e.context.getReturnState(p)],f=e.context.getParent(p),_={state:h,alt:e.alt,context:f,semanticContext:e.semanticContext},m=new Mi(_,null);m.reachesIntoOuterContext=e.reachesIntoOuterContext,this.closureCheckingStopState(m,t,o,i,l,a-1,c)}return}this.closure_(e,t,o,i,l,a,c)}closure_(e,t,o,i,l,a,c){const p=e.state;p.epsilonOnlyTransitions||t.add(e,this.mergeCache);for(let h=0;h<p.transitions.length;h++){if(h===0&&this.canDropLoopEntryEdgeInLeftRecursiveRule(e))continue;const f=p.transitions[h],_=i&&!(f instanceof qce),m=this.getEpsilonTarget(e,f,_,a===0,l,c);if(m!==null){let v=a;if(e.state instanceof i_){if(this._dfa!==null&&this._dfa.precedenceDfa&&f.outermostPrecedenceReturn===this._dfa.atnStartState.ruleIndex&&(m.precedenceFilterSuppressed=!0),m.reachesIntoOuterContext+=1,o.add(m)!==m)continue;t.dipsIntoOuterContext=!0,v-=1,this.debug&&console.log("dips into outer ctx: "+m)}else{if(!f.isEpsilon&&o.add(m)!==m)continue;f instanceof Yce&&v>=0&&(v+=1)}this.closureCheckingStopState(m,t,o,_,l,v,c)}}}canDropLoopEntryEdgeInLeftRecursiveRule(e){const t=e.state;if(t.stateType!==U0.STAR_LOOP_ENTRY||t.stateType!==U0.STAR_LOOP_ENTRY||!t.isPrecedenceDecision||e.context.isEmpty()||e.context.hasEmptyPath())return!1;const o=e.context.length;for(let c=0;c<o;c++)if(this.atn.states[e.context.getReturnState(c)].ruleIndex!==t.ruleIndex)return!1;const l=t.transitions[0].target.endState.stateNumber,a=this.atn.states[l];for(let c=0;c<o;c++){const p=e.context.getReturnState(c),h=this.atn.states[p];if(h.transitions.length!==1||!h.transitions[0].isEpsilon)return!1;const f=h.transitions[0].target;if(!(h.stateType===U0.BLOCK_END&&f===t)&&h!==a&&f!==a&&!(f.stateType===U0.BLOCK_END&&f.transitions.length===1&&f.transitions[0].isEpsilon&&f.transitions[0].target===t))return!1}return!0}getRuleName(e){return this.parser!==null&&e>=0?this.parser.ruleNames[e]:"<rule "+e+">"}getEpsilonTarget(e,t,o,i,l,a){switch(t.serializationType){case Fu.RULE:return this.ruleTransition(e,t);case Fu.PRECEDENCE:return this.precedenceTransition(e,t,o,i,l);case Fu.PREDICATE:return this.predTransition(e,t,o,i,l);case Fu.ACTION:return this.actionTransition(e,t);case Fu.EPSILON:return new Mi({state:t.target},e);case Fu.ATOM:case Fu.RANGE:case Fu.SET:return a&&t.matches(Oc.EOF,0,1)?new Mi({state:t.target},e):null;default:return null}}actionTransition(e,t){if(this.debug){const o=t.actionIndex===-1?65535:t.actionIndex;console.log("ACTION edge "+t.ruleIndex+":"+o)}return new Mi({state:t.target},e)}precedenceTransition(e,t,o,i,l){this.debug&&(console.log("PRED (collectPredicates="+o+") "+t.precedence+">=_p, ctx dependent=true"),this.parser!==null&&console.log("context surrounding pred is "+v_.arrayToString(this.parser.getRuleInvocationStack())));let a=null;if(o&&i)if(l){const c=this._input.index;this._input.seek(this._startIndex);const p=t.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(c),p&&(a=new Mi({state:t.target},e))}else{const c=Pu.andContext(e.semanticContext,t.getPredicate());a=new Mi({state:t.target,semanticContext:c},e)}else a=new Mi({state:t.target},e);return this.debug&&console.log("config from pred transition="+a),a}predTransition(e,t,o,i,l){this.debug&&(console.log("PRED (collectPredicates="+o+") "+t.ruleIndex+":"+t.predIndex+", ctx dependent="+t.isCtxDependent),this.parser!==null&&console.log("context surrounding pred is "+v_.arrayToString(this.parser.getRuleInvocationStack())));let a=null;if(o&&(t.isCtxDependent&&i||!t.isCtxDependent))if(l){const c=this._input.index;this._input.seek(this._startIndex);const p=t.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(c),p&&(a=new Mi({state:t.target},e))}else{const c=Pu.andContext(e.semanticContext,t.getPredicate());a=new Mi({state:t.target,semanticContext:c},e)}else a=new Mi({state:t.target},e);return this.debug&&console.log("config from pred transition="+a),a}ruleTransition(e,t){this.debug&&console.log("CALL rule "+this.getRuleName(t.target.ruleIndex)+", ctx="+e.context);const o=t.followState,i=Zce.create(e.context,o.stateNumber);return new Mi({state:t.target,context:i},e)}getConflictingAlts(e){const t=ui.getConflictingAltSubsets(e);return ui.getAlts(t)}getConflictingAltsOrUniqueAlt(e){let t=null;return e.uniqueAlt!==ci.INVALID_ALT_NUMBER?(t=new OL,t.add(e.uniqueAlt)):t=e.conflictingAlts,t}getTokenName(e){if(e===Oc.EOF)return"EOF";if(this.parser!==null&&this.parser.literalNames!==null)if(e>=this.parser.literalNames.length&&e>=this.parser.symbolicNames.length)console.log(""+e+" ttype out of range: "+this.parser.literalNames),console.log(""+this.parser.getInputStream().getTokens());else return(this.parser.literalNames[e]||this.parser.symbolicNames[e])+"<"+e+">";return""+e}getLookaheadName(e){return this.getTokenName(e.LA(1))}dumpDeadEndConfigs(e){console.log("dead end configs: ");const t=e.getDeadEndConfigs();for(let o=0;o<t.length;o++){const i=t[o];let l="no edges";if(i.state.transitions.length>0){const a=i.state.transitions[0];a instanceof AtomTransition?l="Atom "+this.getTokenName(a.label):a instanceof Jce&&(l=(a instanceof Kce?"~":"")+"Set "+a.set)}console.error(i.toString(this.parser,!0)+":"+l)}}noViableAlt(e,t,o,i){return new Qce(this.parser,e,e.get(i),e.LT(1),o,t)}getUniqueAlt(e){let t=ci.INVALID_ALT_NUMBER;for(let o=0;o<e.items.length;o++){const i=e.items[o];if(t===ci.INVALID_ALT_NUMBER)t=i.alt;else if(i.alt!==t)return ci.INVALID_ALT_NUMBER}return t}addDFAEdge(e,t,o,i){if(this.debug&&console.log("EDGE "+t+" -> "+i+" upon "+this.getTokenName(o)),i===null)return null;if(i=this.addDFAState(e,i),t===null||o<-1||o>this.atn.maxTokenType)return i;if(t.edges===null&&(t.edges=[]),t.edges[o+1]=i,this.debug){const l=this.parser===null?null:this.parser.literalNames,a=this.parser===null?null:this.parser.symbolicNames;console.log(`DFA=
`+e.toString(l,a))}return i}addDFAState(e,t){if(t===s_.ERROR)return t;const o=e.states.get(t);return o!==null?o:(t.stateNumber=e.states.length,t.configs.readOnly||(t.configs.optimizeConfigs(this),t.configs.setReadonly(!0)),e.states.add(t),this.debug&&console.log("adding new DFA state: "+t),t)}reportAttemptingFullContext(e,t,o,i,l){if(this.debug||this.retry_debug){const a=new ek(i,l+1);console.log("reportAttemptingFullContext decision="+e.decision+":"+o+", input="+this.parser.getTokenStream().getText(a))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportAttemptingFullContext(this.parser,e,i,l,t,o)}reportContextSensitivity(e,t,o,i,l){if(this.debug||this.retry_debug){const a=new ek(i,l+1);console.log("reportContextSensitivity decision="+e.decision+":"+o+", input="+this.parser.getTokenStream().getText(a))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportContextSensitivity(this.parser,e,i,l,t,o)}reportAmbiguity(e,t,o,i,l,a,c){if(this.debug||this.retry_debug){const p=new ek(o,i+1);console.log("reportAmbiguity "+a+":"+c+", input="+this.parser.getTokenStream().getText(p))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportAmbiguity(this.parser,e,o,i,l,a,c)}}var nue=tue;eg.ATN=og;eg.ATNDeserializer=$G;eg.LexerATNSimulator=Lce;eg.ParserATNSimulator=nue;eg.PredictionMode=HG;/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var r=function(){let t;try{const o={},i=Object.defineProperty;t=i(o,o,o)&&i}catch{}return t}();const e=function(t){if(this==null)throw TypeError();const o=String(this),i=o.length;let l=t?Number(t):0;if(l!==l&&(l=0),l<0||l>=i)return;const a=o.charCodeAt(l);let c;return a>=55296&&a<=56319&&i>l+1&&(c=o.charCodeAt(l+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a};r?r(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var oue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),rue=dw(oue),Iv={};const iue=as;class WG{constructor(e,t,o){this.dfa=e,this.literalNames=t||[],this.symbolicNames=o||[]}toString(){if(this.dfa.s0===null)return null;let e="";const t=this.dfa.sortedStates();for(let o=0;o<t.length;o++){const i=t[o];if(i.edges!==null){const l=i.edges.length;for(let a=0;a<l;a++){const c=i.edges[a]||null;c!==null&&c.stateNumber!==2147483647&&(e=e.concat(this.getStateString(i)),e=e.concat("-"),e=e.concat(this.getEdgeLabel(a)),e=e.concat("->"),e=e.concat(this.getStateString(c)),e=e.concat(`
`))}}}return e.length===0?null:e}getEdgeLabel(e){return e===0?"EOF":this.literalNames!==null||this.symbolicNames!==null?this.literalNames[e-1]||this.symbolicNames[e-1]:String.fromCharCode(e-1)}getStateString(e){const t=(e.isAcceptState?":":"")+"s"+e.stateNumber+(e.requiresFullContext?"^":"");return e.isAcceptState?e.predicates!==null?t+"=>"+iue.arrayToString(e.predicates):t+"=>"+e.prediction.toString():t}}class sue extends WG{constructor(e){super(e,null)}getEdgeLabel(e){return"'"+String.fromCharCode(e)+"'"}}var QS={DFASerializer:WG,LexerDFASerializer:sue};const{Set:NL}=as,{DFAState:$L}=Bv,{StarLoopEntryState:lue}=Oh,{ATNConfigSet:PL}=rg,{DFASerializer:aue}=QS,{LexerDFASerializer:cue}=QS;class uue{constructor(e,t){if(t===void 0&&(t=0),this.atnStartState=e,this.decision=t,this._states=new NL,this.s0=null,this.precedenceDfa=!1,e instanceof lue&&e.isPrecedenceDecision){this.precedenceDfa=!0;const o=new $L(null,new PL);o.edges=[],o.isAcceptState=!1,o.requiresFullContext=!1,this.s0=o}}getPrecedenceStartState(e){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return e<0||e>=this.s0.edges.length?null:this.s0.edges[e]||null}setPrecedenceStartState(e,t){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";e<0||(this.s0.edges[e]=t)}setPrecedenceDfa(e){if(this.precedenceDfa!==e){if(this._states=new NL,e){const t=new $L(null,new PL);t.edges=[],t.isAcceptState=!1,t.requiresFullContext=!1,this.s0=t}else this.s0=null;this.precedenceDfa=e}}sortedStates(){return this._states.values().sort(function(t,o){return t.stateNumber-o.stateNumber})}toString(e,t){return e=e||null,t=t||null,this.s0===null?"":new aue(this,e,t).toString()}toLexerString(){return this.s0===null?"":new cue(this).toString()}get states(){return this._states}}var hue=uue;Iv.DFA=hue;Iv.DFASerializer=QS.DFASerializer;Iv.LexerDFASerializer=QS.LexerDFASerializer;Iv.PredPrediction=Bv.PredPrediction;/*! https://mths.be/fromcodepoint v0.2.1 by @mathias */String.fromCodePoint||function(){const r=function(){let i;try{const l={},a=Object.defineProperty;i=a(l,l,l)&&a}catch{}return i}(),e=String.fromCharCode,t=Math.floor,o=function(i){const a=[];let c,p,h=-1;const f=arguments.length;if(!f)return"";let _="";for(;++h<f;){let m=Number(arguments[h]);if(!isFinite(m)||m<0||m>1114111||t(m)!==m)throw RangeError("Invalid code point: "+m);m<=65535?a.push(m):(m-=65536,c=(m>>10)+55296,p=m%1024+56320,a.push(c,p)),(h+1===f||a.length>16384)&&(_+=e.apply(null,a),a.length=0)}return _};r?r(String,"fromCodePoint",{value:o,configurable:!0,writable:!0}):String.fromCodePoint=o}();var pue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}),due=dw(pue);const fue=ng,mue=wG;var gue=si(Kn({},fue),{Trees:mue}),pc={};const{BitSet:_ue}=as,{ErrorListener:yue}=JS,{Interval:tk}=ll;class vue extends yue{constructor(e){super();e=e||!0,this.exactOnly=e}reportAmbiguity(e,t,o,i,l,a,c){if(this.exactOnly&&!l)return;const p="reportAmbiguity d="+this.getDecisionDescription(e,t)+": ambigAlts="+this.getConflictingAlts(a,c)+", input='"+e.getTokenStream().getText(new tk(o,i))+"'";e.notifyErrorListeners(p)}reportAttemptingFullContext(e,t,o,i,l,a){const c="reportAttemptingFullContext d="+this.getDecisionDescription(e,t)+", input='"+e.getTokenStream().getText(new tk(o,i))+"'";e.notifyErrorListeners(c)}reportContextSensitivity(e,t,o,i,l,a){const c="reportContextSensitivity d="+this.getDecisionDescription(e,t)+", input='"+e.getTokenStream().getText(new tk(o,i))+"'";e.notifyErrorListeners(c)}getDecisionDescription(e,t){const o=t.decision,i=t.atnStartState.ruleIndex,l=e.ruleNames;if(i<0||i>=l.length)return""+o;const a=l[i]||null;return a===null||a.length===0?""+o:`${o} (${a})`}getConflictingAlts(e,t){if(e!==null)return e;const o=new _ue;for(let i=0;i<t.items.length;i++)o.add(t.items[i].alt);return`{${o.values().join(", ")}}`}}var Tue=vue;const{Token:Uu}=Nr,{NoViableAltException:Eue,InputMismatchException:mE,FailedPredicateException:xue,ParseCancellationException:Sue}=hc,{ATNState:sp}=Oh,{Interval:Cue,IntervalSet:FL}=ll;class bue{reset(e){}recoverInline(e){}recover(e,t){}sync(e){}inErrorRecoveryMode(e){}reportError(e){}}class zG extends bue{constructor(){super();this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this.nextTokensContext=null,this.nextTokenState=0}reset(e){this.endErrorCondition(e)}beginErrorCondition(e){this.errorRecoveryMode=!0}inErrorRecoveryMode(e){return this.errorRecoveryMode}endErrorCondition(e){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1}reportMatch(e){this.endErrorCondition(e)}reportError(e,t){this.inErrorRecoveryMode(e)||(this.beginErrorCondition(e),t instanceof Eue?this.reportNoViableAlternative(e,t):t instanceof mE?this.reportInputMismatch(e,t):t instanceof xue?this.reportFailedPredicate(e,t):(console.log("unknown recognition error type: "+t.constructor.name),console.log(t.stack),e.notifyErrorListeners(t.getOffendingToken(),t.getMessage(),t)))}recover(e,t){this.lastErrorIndex===e.getInputStream().index&&this.lastErrorStates!==null&&this.lastErrorStates.indexOf(e.state)>=0&&e.consume(),this.lastErrorIndex=e._input.index,this.lastErrorStates===null&&(this.lastErrorStates=[]),this.lastErrorStates.push(e.state);const o=this.getErrorRecoverySet(e);this.consumeUntil(e,o)}sync(e){if(this.inErrorRecoveryMode(e))return;const t=e._interp.atn.states[e.state],o=e.getTokenStream().LA(1),i=e.atn.nextTokens(t);if(i.contains(o)){this.nextTokensContext=null,this.nextTokenState=sp.INVALID_STATE_NUMBER;return}else if(i.contains(Uu.EPSILON)){this.nextTokensContext===null&&(this.nextTokensContext=e._ctx,this.nextTokensState=e._stateNumber);return}switch(t.stateType){case sp.BLOCK_START:case sp.STAR_BLOCK_START:case sp.PLUS_BLOCK_START:case sp.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(e)!==null)return;throw new mE(e);case sp.PLUS_LOOP_BACK:case sp.STAR_LOOP_BACK:this.reportUnwantedToken(e);const l=new FL;l.addSet(e.getExpectedTokens());const a=l.addSet(this.getErrorRecoverySet(e));this.consumeUntil(e,a);break}}reportNoViableAlternative(e,t){const o=e.getTokenStream();let i;o!==null?t.startToken.type===Uu.EOF?i="<EOF>":i=o.getText(new Cue(t.startToken.tokenIndex,t.offendingToken.tokenIndex)):i="<unknown input>";const l="no viable alternative at input "+this.escapeWSAndQuote(i);e.notifyErrorListeners(l,t.offendingToken,t)}reportInputMismatch(e,t){const o="mismatched input "+this.getTokenErrorDisplay(t.offendingToken)+" expecting "+t.getExpectedTokens().toString(e.literalNames,e.symbolicNames);e.notifyErrorListeners(o,t.offendingToken,t)}reportFailedPredicate(e,t){const o=e.ruleNames[e._ctx.ruleIndex],i="rule "+o+" "+t.message;e.notifyErrorListeners(i,t.offendingToken,t)}reportUnwantedToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);const t=e.getCurrentToken(),o=this.getTokenErrorDisplay(t),i=this.getExpectedTokens(e),l="extraneous input "+o+" expecting "+i.toString(e.literalNames,e.symbolicNames);e.notifyErrorListeners(l,t,null)}reportMissingToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);const t=e.getCurrentToken(),o=this.getExpectedTokens(e),i="missing "+o.toString(e.literalNames,e.symbolicNames)+" at "+this.getTokenErrorDisplay(t);e.notifyErrorListeners(i,t,null)}recoverInline(e){const t=this.singleTokenDeletion(e);if(t!==null)return e.consume(),t;if(this.singleTokenInsertion(e))return this.getMissingSymbol(e);throw new mE(e)}singleTokenInsertion(e){const t=e.getTokenStream().LA(1),o=e._interp.atn,l=o.states[e.state].transitions[0].target;return o.nextTokens(l,e._ctx).contains(t)?(this.reportMissingToken(e),!0):!1}singleTokenDeletion(e){const t=e.getTokenStream().LA(2);if(this.getExpectedTokens(e).contains(t)){this.reportUnwantedToken(e),e.consume();const i=e.getCurrentToken();return this.reportMatch(e),i}else return null}getMissingSymbol(e){const t=e.getCurrentToken(),i=this.getExpectedTokens(e).first();let l;i===Uu.EOF?l="<missing EOF>":l="<missing "+e.literalNames[i]+">";let a=t;const c=e.getTokenStream().LT(-1);return a.type===Uu.EOF&&c!==null&&(a=c),e.getTokenFactory().create(a.source,i,l,Uu.DEFAULT_CHANNEL,-1,-1,a.line,a.column)}getExpectedTokens(e){return e.getExpectedTokens()}getTokenErrorDisplay(e){if(e===null)return"<no token>";let t=e.text;return t===null&&(e.type===Uu.EOF?t="<EOF>":t="<"+e.type+">"),this.escapeWSAndQuote(t)}escapeWSAndQuote(e){return e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace(/\t/g,"\\t"),"'"+e+"'"}getErrorRecoverySet(e){const t=e._interp.atn;let o=e._ctx;const i=new FL;for(;o!==null&&o.invokingState>=0;){const a=t.states[o.invokingState].transitions[0],c=t.nextTokens(a.followState);i.addSet(c),o=o.parentCtx}return i.removeOne(Uu.EPSILON),i}consumeUntil(e,t){let o=e.getTokenStream().LA(1);for(;o!==Uu.EOF&&!t.contains(o);)e.consume(),o=e.getTokenStream().LA(1)}}class kue extends zG{constructor(){super()}recover(e,t){let o=e._ctx;for(;o!==null;)o.exception=t,o=o.parentCtx;throw new Sue(t)}recoverInline(e){this.recover(e,new mE(e))}sync(e){}}var cB={BailErrorStrategy:kue,DefaultErrorStrategy:zG};pc.RecognitionException=hc.RecognitionException;pc.NoViableAltException=hc.NoViableAltException;pc.LexerNoViableAltException=hc.LexerNoViableAltException;pc.InputMismatchException=hc.InputMismatchException;pc.FailedPredicateException=hc.FailedPredicateException;pc.DiagnosticErrorListener=Tue;pc.BailErrorStrategy=cB.BailErrorStrategy;pc.DefaultErrorStrategy=cB.DefaultErrorStrategy;pc.ErrorListener=JS.ErrorListener;const{Token:Aue}=Nr;class wue{constructor(e,t){if(this.name="<empty>",this.strdata=e,this.decodeToUnicodeCodePoints=t||!1,this._index=0,this.data=[],this.decodeToUnicodeCodePoints)for(let o=0;o<this.strdata.length;){const i=this.strdata.codePointAt(o);this.data.push(i),o+=i<=65535?1:2}else{this.data=new Array(this.strdata.length);for(let o=0;o<this.strdata.length;o++){const i=this.strdata.charCodeAt(o);this.data[o]=i}}this._size=this.data.length}reset(){this._index=0}consume(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1}LA(e){if(e===0)return 0;e<0&&(e+=1);const t=this._index+e-1;return t<0||t>=this._size?Aue.EOF:this.data[t]}LT(e){return this.LA(e)}mark(){return-1}release(e){}seek(e){if(e<=this._index){this._index=e;return}this._index=Math.min(e,this._size)}getText(e,t){if(t>=this._size&&(t=this._size-1),e>=this._size)return"";if(this.decodeToUnicodeCodePoints){let o="";for(let i=e;i<=t;i++)o+=String.fromCodePoint(this.data[i]);return o}else return this.strdata.slice(e,t+1)}toString(){return this.strdata}get index(){return this._index}get size(){return this._size}}var uB=wue,Mue={},Rue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mue}),XG=dw(Rue);const l_=uB,UL=XG,Bue={fromString:function(r){return new l_(r,!0)},fromBlob:function(r,e,t,o){const i=new window.FileReader;i.onload=function(l){const a=new l_(l.target.result,!0);t(a)},i.onerror=o,i.readAsText(r,e)},fromBuffer:function(r,e){return new l_(r.toString(e),!0)},fromPath:function(r,e,t){UL.readFile(r,e,function(o,i){let l=null;i!==null&&(l=new l_(i,!0)),t(o,l)})},fromPathSync:function(r,e){const t=UL.readFileSync(r,e);return new l_(t,!0)}};var Iue=Bue;const Oue=uB,Due=XG;class Lue extends Oue{constructor(e,t){const o=Due.readFileSync(e,"utf8");super(o,t);this.fileName=e}}var Nue=Lue;const{Token:lp}=Nr,nk=KS,{Interval:$ue}=ll;class Pue{}class Fue extends Pue{constructor(e){super();this.tokenSource=e,this.tokens=[],this.index=-1,this.fetchedEOF=!1}mark(){return 0}release(e){}reset(){this.seek(0)}seek(e){this.lazyInit(),this.index=this.adjustSeekIndex(e)}get(e){return this.lazyInit(),this.tokens[e]}consume(){let e=!1;if(this.index>=0?this.fetchedEOF?e=this.index<this.tokens.length-1:e=this.index<this.tokens.length:e=!1,!e&&this.LA(1)===lp.EOF)throw"cannot consume EOF";this.sync(this.index+1)&&(this.index=this.adjustSeekIndex(this.index+1))}sync(e){const t=e-this.tokens.length+1;return t>0?this.fetch(t)>=t:!0}fetch(e){if(this.fetchedEOF)return 0;for(let t=0;t<e;t++){const o=this.tokenSource.nextToken();if(o.tokenIndex=this.tokens.length,this.tokens.push(o),o.type===lp.EOF)return this.fetchedEOF=!0,t+1}return e}getTokens(e,t,o){if(o===void 0&&(o=null),e<0||t<0)return null;this.lazyInit();const i=[];t>=this.tokens.length&&(t=this.tokens.length-1);for(let l=e;l<t;l++){const a=this.tokens[l];if(a.type===lp.EOF)break;(o===null||o.contains(a.type))&&i.push(a)}return i}LA(e){return this.LT(e).type}LB(e){return this.index-e<0?null:this.tokens[this.index-e]}LT(e){if(this.lazyInit(),e===0)return null;if(e<0)return this.LB(-e);const t=this.index+e-1;return this.sync(t),t>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[t]}adjustSeekIndex(e){return e}lazyInit(){this.index===-1&&this.setup()}setup(){this.sync(0),this.index=this.adjustSeekIndex(0)}setTokenSource(e){this.tokenSource=e,this.tokens=[],this.index=-1,this.fetchedEOF=!1}nextTokenOnChannel(e,t){if(this.sync(e),e>=this.tokens.length)return-1;let o=this.tokens[e];for(;o.channel!==this.channel;){if(o.type===lp.EOF)return-1;e+=1,this.sync(e),o=this.tokens[e]}return e}previousTokenOnChannel(e,t){for(;e>=0&&this.tokens[e].channel!==t;)e-=1;return e}getHiddenTokensToRight(e,t){if(t===void 0&&(t=-1),this.lazyInit(),e<0||e>=this.tokens.length)throw""+e+" not in 0.."+this.tokens.length-1;const o=this.nextTokenOnChannel(e+1,nk.DEFAULT_TOKEN_CHANNEL),i=e+1,l=o===-1?this.tokens.length-1:o;return this.filterForChannel(i,l,t)}getHiddenTokensToLeft(e,t){if(t===void 0&&(t=-1),this.lazyInit(),e<0||e>=this.tokens.length)throw""+e+" not in 0.."+this.tokens.length-1;const o=this.previousTokenOnChannel(e-1,nk.DEFAULT_TOKEN_CHANNEL);if(o===e-1)return null;const i=o+1,l=e-1;return this.filterForChannel(i,l,t)}filterForChannel(e,t,o){const i=[];for(let l=e;l<t+1;l++){const a=this.tokens[l];o===-1?a.channel!==nk.DEFAULT_TOKEN_CHANNEL&&i.push(a):a.channel===o&&i.push(a)}return i.length===0?null:i}getSourceName(){return this.tokenSource.getSourceName()}getText(e){this.lazyInit(),this.fill(),e==null&&(e=new $ue(0,this.tokens.length-1));let t=e.start;t instanceof lp&&(t=t.tokenIndex);let o=e.stop;if(o instanceof lp&&(o=o.tokenIndex),t===null||o===null||t<0||o<0)return"";o>=this.tokens.length&&(o=this.tokens.length-1);let i="";for(let l=t;l<o+1;l++){const a=this.tokens[l];if(a.type===lp.EOF)break;i=i+a.text}return i}fill(){for(this.lazyInit();this.fetch(1e3)===1e3;);}}var Uue=Fue;const HL=Nr.Token,Hue=Uue;class Gue extends Hue{constructor(e,t){super(e);this.channel=t===void 0?HL.DEFAULT_CHANNEL:t}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}LB(e){if(e===0||this.index-e<0)return null;let t=this.index,o=1;for(;o<=e;)t=this.previousTokenOnChannel(t-1,this.channel),o+=1;return t<0?null:this.tokens[t]}LT(e){if(this.lazyInit(),e===0)return null;if(e<0)return this.LB(-e);let t=this.index,o=1;for(;o<e;)this.sync(t+1)&&(t=this.nextTokenOnChannel(t+1,this.channel)),o+=1;return this.tokens[t]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let t=0;t<this.tokens.length;t++){const o=this.tokens[t];if(o.channel===this.channel&&(e+=1),o.type===HL.EOF)break}return e}}var Vue=Gue;const{Token:a_}=Nr,{ParseTreeListener:Wue,TerminalNode:zue,ErrorNode:Xue}=ng,jue=PG,{DefaultErrorStrategy:Jue}=cB,Kue=$G,Yue=LG,que=KS;class Que extends Wue{constructor(e){super();this.parser=e}enterEveryRule(e){console.log("enter   "+this.parser.ruleNames[e.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}visitTerminal(e){console.log("consume "+e.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])}exitEveryRule(e){console.log("exit    "+this.parser.ruleNames[e.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}}class jG extends jue{constructor(e){super();this._input=null,this._errHandler=new Jue,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.setInputStream(e)}reset(){this._input!==null&&this._input.seek(0),this._errHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),this._interp!==null&&this._interp.reset()}match(e){let t=this.getCurrentToken();return t.type===e?(this._errHandler.reportMatch(this),this.consume()):(t=this._errHandler.recoverInline(this),this.buildParseTrees&&t.tokenIndex===-1&&this._ctx.addErrorNode(t)),t}matchWildcard(){let e=this.getCurrentToken();return e.type>0?(this._errHandler.reportMatch(this),this.consume()):(e=this._errHandler.recoverInline(this),this._buildParseTrees&&e.tokenIndex===-1&&this._ctx.addErrorNode(e)),e}getParseListeners(){return this._parseListeners||[]}addParseListener(e){if(e===null)throw"listener";this._parseListeners===null&&(this._parseListeners=[]),this._parseListeners.push(e)}removeParseListener(e){if(this._parseListeners!==null){const t=this._parseListeners.indexOf(e);t>=0&&this._parseListeners.splice(t,1),this._parseListeners.length===0&&(this._parseListeners=null)}}removeParseListeners(){this._parseListeners=null}triggerEnterRuleEvent(){if(this._parseListeners!==null){const e=this._ctx;this._parseListeners.forEach(function(t){t.enterEveryRule(e),e.enterRule(t)})}}triggerExitRuleEvent(){if(this._parseListeners!==null){const e=this._ctx;this._parseListeners.slice(0).reverse().forEach(function(t){e.exitRule(t),t.exitEveryRule(e)})}}getTokenFactory(){return this._input.tokenSource._factory}setTokenFactory(e){this._input.tokenSource._factory=e}getATNWithBypassAlts(){const e=this.getSerializedATN();if(e===null)throw"The current parser does not support an ATN with bypass alternatives.";let t=this.bypassAltsAtnCache[e];if(t===null){const o=new Yue;o.generateRuleBypassTransitions=!0,t=new Kue(o).deserialize(e),this.bypassAltsAtnCache[e]=t}return t}compileParseTreePattern(e,t,o){if(o=o||null,o===null&&this.getTokenStream()!==null){const l=this.getTokenStream().tokenSource;l instanceof que&&(o=l)}if(o===null)throw"Parser can't discover a lexer to use";return new ParseTreePatternMatcher(o,this).compile(e,t)}getInputStream(){return this.getTokenStream()}setInputStream(e){this.setTokenStream(e)}getTokenStream(){return this._input}setTokenStream(e){this._input=null,this.reset(),this._input=e}getCurrentToken(){return this._input.LT(1)}notifyErrorListeners(e,t,o){t=t||null,o=o||null,t===null&&(t=this.getCurrentToken()),this._syntaxErrors+=1;const i=t.line,l=t.column;this.getErrorListenerDispatch().syntaxError(this,t,i,l,e,o)}consume(){const e=this.getCurrentToken();e.type!==a_.EOF&&this.getInputStream().consume();const t=this._parseListeners!==null&&this._parseListeners.length>0;if(this.buildParseTrees||t){let o;this._errHandler.inErrorRecoveryMode(this)?o=this._ctx.addErrorNode(e):o=this._ctx.addTokenNode(e),o.invokingState=this.state,t&&this._parseListeners.forEach(function(i){o instanceof Xue||o.isErrorNode!==void 0&&o.isErrorNode()?i.visitErrorNode(o):o instanceof zue&&i.visitTerminal(o)})}return e}addContextToParseTree(){this._ctx.parentCtx!==null&&this._ctx.parentCtx.addChild(this._ctx)}enterRule(e,t,o){this.state=t,this._ctx=e,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this._ctx.stop=this._input.LT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parentCtx}enterOuterAlt(e,t){e.setAltNumber(t),this.buildParseTrees&&this._ctx!==e&&this._ctx.parentCtx!==null&&(this._ctx.parentCtx.removeLastChild(),this._ctx.parentCtx.addChild(e)),this._ctx=e}getPrecedence(){return this._precedenceStack.length===0?-1:this._precedenceStack[this._precedenceStack.length-1]}enterRecursionRule(e,t,o,i){this.state=t,this._precedenceStack.push(i),this._ctx=e,this._ctx.start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(e,t,o){const i=this._ctx;i.parentCtx=e,i.invokingState=t,i.stop=this._input.LT(-1),this._ctx=e,this._ctx.start=i.start,this.buildParseTrees&&this._ctx.addChild(i),this.triggerEnterRuleEvent()}unrollRecursionContexts(e){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);const t=this._ctx,o=this.getParseListeners();if(o!==null&&o.length>0)for(;this._ctx!==e;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parentCtx;else this._ctx=e;t.parentCtx=e,this.buildParseTrees&&e!==null&&e.addChild(t)}getInvokingContext(e){let t=this._ctx;for(;t!==null;){if(t.ruleIndex===e)return t;t=t.parentCtx}return null}precpred(e,t){return t>=this._precedenceStack[this._precedenceStack.length-1]}inContext(e){return!1}isExpectedToken(e){const t=this._interp.atn;let o=this._ctx;const i=t.states[this.state];let l=t.nextTokens(i);if(l.contains(e))return!0;if(!l.contains(a_.EPSILON))return!1;for(;o!==null&&o.invokingState>=0&&l.contains(a_.EPSILON);){const c=t.states[o.invokingState].transitions[0];if(l=t.nextTokens(c.followState),l.contains(e))return!0;o=o.parentCtx}return!!(l.contains(a_.EPSILON)&&e===a_.EOF)}getExpectedTokens(){return this._interp.atn.getExpectedTokens(this.state,this._ctx)}getExpectedTokensWithinCurrentRule(){const e=this._interp.atn,t=e.states[this.state];return e.nextTokens(t)}getRuleIndex(e){const t=this.getRuleIndexMap()[e];return t!==null?t:-1}getRuleInvocationStack(e){e=e||null,e===null&&(e=this._ctx);const t=[];for(;e!==null;){const o=e.ruleIndex;o<0?t.push("n/a"):t.push(this.ruleNames[o]),e=e.parentCtx}return t}getDFAStrings(){return this._interp.decisionToDFA.toString()}dumpDFA(){let e=!1;for(let t=0;t<this._interp.decisionToDFA.length;t++){const o=this._interp.decisionToDFA[t];o.states.length>0&&(e&&console.log(),this.printer.println("Decision "+o.decision+":"),this.printer.print(o.toString(this.literalNames,this.symbolicNames)),e=!0)}}getSourceName(){return this._input.sourceName}setTrace(e){e?(this._tracer!==null&&this.removeParseListener(this._tracer),this._tracer=new Que(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)}}jG.bypassAltsAtnCache={};var Zue=jG;br.atn=eg;br.codepointat=rue;br.dfa=Iv;br.fromcodepoint=due;br.tree=gue;br.error=pc;br.Token=Nr.Token;br.CharStreams=Iue;br.CommonToken=Nr.CommonToken;br.InputStream=uB;br.FileStream=Nue;br.CommonTokenStream=Vue;br.Lexer=KS;br.Parser=Zue;var ehe=Dh;br.PredictionContextCache=ehe.PredictionContextCache;br.ParserRuleContext=zce;br.Interval=ll.Interval;br.IntervalSet=ll.IntervalSet;br.Utils=as;br.LL1Analyzer=OG.LL1Analyzer;var JG={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var o=[],i=0;i<arguments.length;i++){var l=arguments[i];if(!!l){var a=typeof l;if(a==="string"||a==="number")o.push(l);else if(Array.isArray(l)){if(l.length){var c=t.apply(null,l);c&&o.push(c)}}else if(a==="object")if(l.toString===Object.prototype.toString)for(var p in l)e.call(l,p)&&l[p]&&o.push(p);else o.push(l.toString())}}return o.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(JG);var Sl=JG.exports;function Gs(r){for(var e=arguments.length,t=Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];return typeof r=="function"&&r.apply(void 0,t)}function Df(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function the(){return Math.random().toString(36).substring(7)}var Oi={menu:"react-contextmenu",menuVisible:"react-contextmenu--visible",menuWrapper:"react-contextmenu-wrapper",menuItem:"react-contextmenu-item",menuItemActive:"react-contextmenu-item--active",menuItemDisabled:"react-contextmenu-item--disabled",menuItemDivider:"react-contextmenu-item--divider",menuItemSelected:"react-contextmenu-item--selected",subMenu:"react-contextmenu-submenu"},nd={},nhe=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),hw="REACT_CONTEXTMENU_SHOW",pw="REACT_CONTEXTMENU_HIDE";function KG(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window,o=void 0;typeof window.CustomEvent=="function"?o=new window.CustomEvent(r,{detail:e}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(r,!1,!0,e)),t&&(t.dispatchEvent(o),os(nd,e))}function GL(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments[1];KG(hw,os({},r,{type:hw}),e)}function Jf(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments[1];KG(pw,os({},r,{type:pw}),e)}function ohe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var rhe=function r(){var e=this;ohe(this,r),this.handleShowEvent=function(t){for(var o in e.callbacks)Df(e.callbacks,o)&&e.callbacks[o].show(t)},this.handleHideEvent=function(t){for(var o in e.callbacks)Df(e.callbacks,o)&&e.callbacks[o].hide(t)},this.register=function(t,o){var i=the();return e.callbacks[i]={show:t,hide:o},i},this.unregister=function(t){t&&e.callbacks[t]&&delete e.callbacks[t]},this.callbacks={},nhe&&(window.addEventListener(hw,this.handleShowEvent),window.addEventListener(pw,this.handleHideEvent))},px=new rhe,ihe=function(){function r(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();function ok(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function she(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function VL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function lhe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var dx=function(r){lhe(e,r);function e(){var t,o,i,l;she(this,e);for(var a=arguments.length,c=Array(a),p=0;p<a;p++)c[p]=arguments[p];return l=(o=(i=VL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),i),i.handleClick=function(h){h.button!==0&&h.button!==1&&h.preventDefault(),!(i.props.disabled||i.props.divider)&&(Gs(i.props.onClick,h,os({},i.props.data,nd.data),nd.target),!i.props.preventClose&&Jf())},o),VL(i,l)}return ihe(e,[{key:"render",value:function(){var o,i=this,l=this.props,a=l.attributes,c=l.children,p=l.className,h=l.disabled,f=l.divider,_=l.selected,m=Sl(p,Oi.menuItem,a.className,(o={},ok(o,Sl(Oi.menuItemDisabled,a.disabledClassName),h),ok(o,Sl(Oi.menuItemDivider,a.dividerClassName),f),ok(o,Sl(Oi.menuItemSelected,a.selectedClassName),_),o));return Ge("div",si(Kn({},a),{className:m,role:"menuitem",tabIndex:"-1","aria-disabled":h?"true":"false","aria-orientation":f?"horizontal":null,ref:function(x){i.ref=x},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,onTouchEnd:this.handleClick,onClick:this.handleClick,children:f?null:c}))}}]),e}(G.exports.Component);dx.propTypes={attributes:Lt.object,children:Lt.node,className:Lt.string,data:Lt.object,disabled:Lt.bool,divider:Lt.bool,onClick:Lt.func,onMouseLeave:Lt.func,onMouseMove:Lt.func,preventClose:Lt.bool,selected:Lt.bool};dx.defaultProps={attributes:{},children:null,className:"",data:{},disabled:!1,divider:!1,onClick:function(){return null},onMouseMove:function(){return null},onMouseLeave:function(){return null},preventClose:!1,selected:!1};function ahe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function che(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function uhe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var hB=function(r){uhe(e,r);function e(t){ahe(this,e);var o=che(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return hhe.call(o),o.seletedItemRef=null,o.state={selectedItem:null,forceSubMenuOpen:!1},o}return e}(G.exports.Component);hB.propTypes={children:Lt.node.isRequired};var hhe=function(){var e=this;this.handleKeyNavigation=function(t){if(e.state.isVisible!==!1)switch(t.keyCode){case 37:case 27:t.preventDefault(),e.hideMenu(t);break;case 38:t.preventDefault(),e.selectChildren(!0);break;case 40:t.preventDefault(),e.selectChildren(!1);break;case 39:e.tryToOpenSubMenu(t);break;case 13:t.preventDefault(),e.tryToOpenSubMenu(t);{var o=e.seletedItemRef&&e.seletedItemRef.props&&e.seletedItemRef.props.disabled;e.seletedItemRef&&e.seletedItemRef.ref instanceof HTMLElement&&!o?e.seletedItemRef.ref.click():e.hideMenu(t)}break}},this.handleForceClose=function(){e.setState({forceSubMenuOpen:!1})},this.tryToOpenSubMenu=function(t){e.state.selectedItem&&e.state.selectedItem.type===e.getSubMenuType()&&(t.preventDefault(),e.setState({forceSubMenuOpen:!0}))},this.selectChildren=function(t){var o=e.state.selectedItem,i=[],l=0,a={},c=function _(m,v){!m||([dx,e.getSubMenuType()].indexOf(m.type)<0?zt.Children.forEach(m.props.children,_):m.props.divider||(m.props.disabled&&(++l,a[v]=!0),i.push(m)))};if(zt.Children.forEach(e.props.children,c),l===i.length)return;function p(_){var m=_,v=function(){t?--m:++m,m<0?m=i.length-1:m>=i.length&&(m=0)};do v();while(m!==_&&a[m]);return m===_?null:m}var h=i.indexOf(o),f=p(h);f!==null&&e.setState({selectedItem:i[f],forceSubMenuOpen:!1})},this.onChildMouseMove=function(t){e.state.selectedItem!==t&&e.setState({selectedItem:t,forceSubMenuOpen:!1})},this.onChildMouseLeave=function(){e.setState({selectedItem:null,forceSubMenuOpen:!1})},this.renderChildren=function(t){return zt.Children.map(t,function(o){var i={};return zt.isValidElement(o)?[dx,e.getSubMenuType()].indexOf(o.type)<0?(i.children=e.renderChildren(o.props.children),zt.cloneElement(o,i)):(i.onMouseLeave=e.onChildMouseLeave.bind(e),o.type===e.getSubMenuType()&&(i.forceOpen=e.state.forceSubMenuOpen&&e.state.selectedItem===o,i.forceClose=e.handleForceClose,i.parentKeyNavigationHandler=e.handleKeyNavigation),!o.props.divider&&e.state.selectedItem===o?(i.selected=!0,i.ref=function(l){e.seletedItemRef=l},zt.cloneElement(o,i)):(i.onMouseMove=function(){return e.onChildMouseMove(o)},zt.cloneElement(o,i))):o})}},rk=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},phe=function(){function r(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();function ik(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dhe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function fhe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function mhe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var pB=function(r){mhe(e,r);function e(t){dhe(this,e);var o=fhe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.getMenuPosition=function(){var i=window,l=i.innerWidth,a=i.innerHeight,c=o.subMenu.getBoundingClientRect(),p={};return c.bottom>a?p.bottom=0:p.top=0,c.right<l?p.left="100%":p.right="100%",p},o.getRTLMenuPosition=function(){var i=window,l=i.innerHeight,a=o.subMenu.getBoundingClientRect(),c={};return a.bottom>l?c.bottom=0:c.top=0,a.left<0?c.left="100%":c.right="100%",c},o.hideSubMenu=function(i){i.detail&&i.detail.id&&o.menu&&i.detail.id!==o.menu.id||(o.props.forceOpen&&o.props.forceClose(),o.setState({visible:!1,selectedItem:null}),o.unregisterHandlers())},o.handleClick=function(i){i.preventDefault(),!o.props.disabled&&(Gs(o.props.onClick,i,os({},o.props.data,nd.data),nd.target),!(!o.props.onClick||o.props.preventCloseOnClick)&&Jf())},o.handleMouseEnter=function(){o.closetimer&&clearTimeout(o.closetimer),!(o.props.disabled||o.state.visible)&&(o.opentimer=setTimeout(function(){return o.setState({visible:!0,selectedItem:null})},o.props.hoverDelay))},o.handleMouseLeave=function(){o.opentimer&&clearTimeout(o.opentimer),!!o.state.visible&&(o.closetimer=setTimeout(function(){return o.setState({visible:!1,selectedItem:null})},o.props.hoverDelay))},o.menuRef=function(i){o.menu=i},o.subMenuRef=function(i){o.subMenu=i},o.registerHandlers=function(){document.removeEventListener("keydown",o.props.parentKeyNavigationHandler),document.addEventListener("keydown",o.handleKeyNavigation)},o.unregisterHandlers=function(i){document.removeEventListener("keydown",o.handleKeyNavigation),i||document.addEventListener("keydown",o.props.parentKeyNavigationHandler)},o.state=os({},o.state,{visible:!1}),o}return phe(e,[{key:"componentDidMount",value:function(){this.listenId=px.register(function(){},this.hideSubMenu)}},{key:"getSubMenuType",value:function(){return e}},{key:"shouldComponentUpdate",value:function(o,i){return this.isVisibilityChange=(this.state.visible!==i.visible||this.props.forceOpen!==o.forceOpen)&&!(this.state.visible&&o.forceOpen)&&!(this.props.forceOpen&&i.visible),!0}},{key:"componentDidUpdate",value:function(){var o=this;if(!!this.isVisibilityChange)if(this.props.forceOpen||this.state.visible){var i=window.requestAnimationFrame||setTimeout;i(function(){var a=o.props.rtl?o.getRTLMenuPosition():o.getMenuPosition();o.subMenu.style.removeProperty("top"),o.subMenu.style.removeProperty("bottom"),o.subMenu.style.removeProperty("left"),o.subMenu.style.removeProperty("right"),Df(a,"top")&&(o.subMenu.style.top=a.top),Df(a,"left")&&(o.subMenu.style.left=a.left),Df(a,"bottom")&&(o.subMenu.style.bottom=a.bottom),Df(a,"right")&&(o.subMenu.style.right=a.right),o.subMenu.classList.add(Oi.menuVisible),o.registerHandlers(),o.setState({selectedItem:null})})}else{var l=function a(){o.subMenu.removeEventListener("transitionend",a),o.subMenu.style.removeProperty("bottom"),o.subMenu.style.removeProperty("right"),o.subMenu.style.top=0,o.subMenu.style.left="100%",o.unregisterHandlers()};this.subMenu.addEventListener("transitionend",l),this.subMenu.classList.remove(Oi.menuVisible)}}},{key:"componentWillUnmount",value:function(){this.listenId&&px.unregister(this.listenId),this.opentimer&&clearTimeout(this.opentimer),this.closetimer&&clearTimeout(this.closetimer),this.unregisterHandlers(!0)}},{key:"render",value:function(){var o,i=this.props,l=i.children,a=i.attributes,c=i.disabled,p=i.title,h=i.selected,f=this.state.visible,_={ref:this.menuRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:Sl(Oi.menuItem,Oi.subMenu,a.listClassName),style:{position:"relative"}},m={className:Sl(Oi.menuItem,a.className,(o={},ik(o,Sl(Oi.menuItemDisabled,a.disabledClassName),c),ik(o,Sl(Oi.menuItemActive,a.visibleClassName),f),ik(o,Sl(Oi.menuItemSelected,a.selectedClassName),h),o)),onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut,onClick:this.handleClick},v={ref:this.subMenuRef,style:{position:"absolute",transition:"opacity 1ms",top:0,left:"100%"},className:Sl(Oi.menu,this.props.className)};return zt.createElement("nav",rk({},_,{role:"menuitem",tabIndex:"-1","aria-haspopup":"true"}),zt.createElement("div",rk({},a,m),p),zt.createElement("nav",rk({},v,{role:"menu",tabIndex:"-1"}),this.renderChildren(l)))}}]),e}(hB);pB.propTypes={children:Lt.node.isRequired,attributes:Lt.object,title:Lt.node.isRequired,className:Lt.string,disabled:Lt.bool,hoverDelay:Lt.number,rtl:Lt.bool,selected:Lt.bool,onMouseMove:Lt.func,onMouseOut:Lt.func,forceOpen:Lt.bool,forceClose:Lt.func,parentKeyNavigationHandler:Lt.func};pB.defaultProps={disabled:!1,hoverDelay:500,attributes:{},className:"",rtl:!1,selected:!1,onMouseMove:function(){return null},onMouseOut:function(){return null},forceOpen:!1,forceClose:function(){return null},parentKeyNavigationHandler:function(){return null}};var ghe=function(){function r(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();function _he(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yhe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function vhe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function The(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var YG=function(r){The(e,r);function e(t){yhe(this,e);var o=vhe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.registerHandlers=function(){document.addEventListener("mousedown",o.handleOutsideClick),document.addEventListener("touchstart",o.handleOutsideClick),o.props.preventHideOnScroll||document.addEventListener("scroll",o.handleHide),o.props.preventHideOnContextMenu||document.addEventListener("contextmenu",o.handleHide),document.addEventListener("keydown",o.handleKeyNavigation),o.props.preventHideOnResize||window.addEventListener("resize",o.handleHide)},o.unregisterHandlers=function(){document.removeEventListener("mousedown",o.handleOutsideClick),document.removeEventListener("touchstart",o.handleOutsideClick),document.removeEventListener("scroll",o.handleHide),document.removeEventListener("contextmenu",o.handleHide),document.removeEventListener("keydown",o.handleKeyNavigation),window.removeEventListener("resize",o.handleHide)},o.handleShow=function(i){if(!(i.detail.id!==o.props.id||o.state.isVisible)){var l=i.detail.position,a=l.x,c=l.y;o.setState({isVisible:!0,x:a,y:c}),o.registerHandlers(),Gs(o.props.onShow,i)}},o.handleHide=function(i){o.state.isVisible&&(!i.detail||!i.detail.id||i.detail.id===o.props.id)&&(o.unregisterHandlers(),o.setState({isVisible:!1,selectedItem:null,forceSubMenuOpen:!1}),Gs(o.props.onHide,i))},o.handleOutsideClick=function(i){o.menu.contains(i.target)||Jf()},o.handleMouseLeave=function(i){i.preventDefault(),Gs(o.props.onMouseLeave,i,os({},o.props.data,nd.data),nd.target),o.props.hideOnLeave&&Jf()},o.handleContextMenu=function(i){i.preventDefault(),o.handleHide(i)},o.hideMenu=function(i){(i.keyCode===27||i.keyCode===13)&&Jf()},o.getMenuPosition=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a={top:l,left:i};if(!o.menu)return a;var c=window,p=c.innerWidth,h=c.innerHeight,f=o.menu.getBoundingClientRect();return l+f.height>h&&(a.top-=f.height),i+f.width>p&&(a.left-=f.width),a.top<0&&(a.top=f.height<h?(h-f.height)/2:0),a.left<0&&(a.left=f.width<p?(p-f.width)/2:0),a},o.getRTLMenuPosition=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a={top:l,left:i};if(!o.menu)return a;var c=window,p=c.innerWidth,h=c.innerHeight,f=o.menu.getBoundingClientRect();return a.left=i-f.width,l+f.height>h&&(a.top-=f.height),a.left<0&&(a.left+=f.width),a.top<0&&(a.top=f.height<h?(h-f.height)/2:0),a.left+f.width>p&&(a.left=f.width<p?(p-f.width)/2:0),a},o.menuRef=function(i){o.menu=i},o.state=os({},o.state,{x:0,y:0,isVisible:!1}),o}return ghe(e,[{key:"getSubMenuType",value:function(){return pB}},{key:"componentDidMount",value:function(){this.listenId=px.register(this.handleShow,this.handleHide)}},{key:"componentDidUpdate",value:function(){var o=this,i=window.requestAnimationFrame||setTimeout;this.state.isVisible?i(function(){var l=o.state,a=l.x,c=l.y,p=o.props.rtl?o.getRTLMenuPosition(a,c):o.getMenuPosition(a,c),h=p.top,f=p.left;i(function(){!o.menu||(o.menu.style.top=h+"px",o.menu.style.left=f+"px",o.menu.style.opacity=1,o.menu.style.pointerEvents="auto")})}):i(function(){!o.menu||(o.menu.style.opacity=0,o.menu.style.pointerEvents="none")})}},{key:"componentWillUnmount",value:function(){this.listenId&&px.unregister(this.listenId),this.unregisterHandlers()}},{key:"render",value:function(){var o=this.props,i=o.children,l=o.className,a=o.style,c=this.state.isVisible,p=os({},a,{position:"fixed",opacity:0,pointerEvents:"none"}),h=Sl(Oi.menu,l,_he({},Oi.menuVisible,c));return zt.createElement("nav",{role:"menu",tabIndex:"-1",ref:this.menuRef,style:p,className:h,onContextMenu:this.handleContextMenu,onMouseLeave:this.handleMouseLeave},this.renderChildren(i))}}]),e}(hB);YG.propTypes={id:Lt.string.isRequired,children:Lt.node.isRequired,data:Lt.object,className:Lt.string,hideOnLeave:Lt.bool,rtl:Lt.bool,onHide:Lt.func,onMouseLeave:Lt.func,onShow:Lt.func,preventHideOnContextMenu:Lt.bool,preventHideOnResize:Lt.bool,preventHideOnScroll:Lt.bool,style:Lt.object};YG.defaultProps={className:"",data:{},hideOnLeave:!1,rtl:!1,onHide:function(){return null},onMouseLeave:function(){return null},onShow:function(){return null},preventHideOnContextMenu:!1,preventHideOnResize:!1,preventHideOnScroll:!1,style:{}};var Ehe=function(){function r(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();function xhe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function WL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function She(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var dB=function(r){She(e,r);function e(){var t,o,i,l;xhe(this,e);for(var a=arguments.length,c=Array(a),p=0;p<a;p++)c[p]=arguments[p];return l=(o=(i=WL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),i),i.touchHandled=!1,i.handleMouseDown=function(h){i.props.holdToDisplay>=0&&h.button===0&&(h.persist(),h.stopPropagation(),i.mouseDownTimeoutId=setTimeout(function(){return i.handleContextClick(h)},i.props.holdToDisplay)),Gs(i.props.attributes.onMouseDown,h)},i.handleMouseUp=function(h){h.button===0&&clearTimeout(i.mouseDownTimeoutId),Gs(i.props.attributes.onMouseUp,h)},i.handleMouseOut=function(h){h.button===0&&clearTimeout(i.mouseDownTimeoutId),Gs(i.props.attributes.onMouseOut,h)},i.handleTouchstart=function(h){i.touchHandled=!1,i.props.holdToDisplay>=0&&(h.persist(),h.stopPropagation(),i.touchstartTimeoutId=setTimeout(function(){i.handleContextClick(h),i.touchHandled=!0},i.props.holdToDisplay)),Gs(i.props.attributes.onTouchStart,h)},i.handleTouchEnd=function(h){i.touchHandled&&h.preventDefault(),clearTimeout(i.touchstartTimeoutId),Gs(i.props.attributes.onTouchEnd,h)},i.handleContextMenu=function(h){h.button===i.props.mouseButton&&i.handleContextClick(h),Gs(i.props.attributes.onContextMenu,h)},i.handleMouseClick=function(h){h.button===i.props.mouseButton&&i.handleContextClick(h),Gs(i.props.attributes.onClick,h)},i.handleContextClick=function(h){if(!i.props.disable&&!(i.props.disableIfShiftIsPressed&&h.shiftKey)){h.preventDefault(),h.stopPropagation();var f=h.clientX||h.touches&&h.touches[0].pageX,_=h.clientY||h.touches&&h.touches[0].pageY;i.props.posX&&(f-=i.props.posX),i.props.posY&&(_-=i.props.posY),Jf();var m=Gs(i.props.collect,i.props),v={position:{x:f,y:_},target:i.elem,id:i.props.id};m&&typeof m.then=="function"?m.then(function(x){v.data=os({},x,{target:h.target}),GL(v)}):(v.data=os({},m,{target:h.target}),GL(v))}},i.elemRef=function(h){i.elem=h},o),WL(i,l)}return Ehe(e,[{key:"render",value:function(){var o=this.props,i=o.renderTag,l=o.attributes,a=o.children,c=os({},l,{className:Sl(Oi.menuWrapper,l.className),onContextMenu:this.handleContextMenu,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchstart,onTouchEnd:this.handleTouchEnd,onMouseOut:this.handleMouseOut,ref:this.elemRef});return zt.createElement(i,c,a)}}]),e}(G.exports.Component);dB.propTypes={id:Lt.string.isRequired,children:Lt.node.isRequired,attributes:Lt.object,collect:Lt.func,disable:Lt.bool,holdToDisplay:Lt.number,posX:Lt.number,posY:Lt.number,renderTag:Lt.elementType,mouseButton:Lt.number,disableIfShiftIsPressed:Lt.bool};dB.defaultProps={attributes:{},collect:function(){return null},disable:!1,holdToDisplay:1e3,renderTag:"div",posX:0,posY:0,mouseButton:2,disableIfShiftIsPressed:!1};function Che(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}[].concat(Che(Object.keys(dB.propTypes)),["children"]);var qG={exports:{}},QG={exports:{}},ZS={exports:{}},ZG={exports:{}},eC={exports:{}};(function(r,e){(function(t,o){r.exports=o()})(vs,function(){const t={};var o=o||{};o.scope={},o.createTemplateTagFirstArg=function(n){return n.raw=n},o.createTemplateTagFirstArgWithRaw=function(n,s){return n.raw=s,n},o.arrayIteratorImpl=function(n){var s=0;return function(){return s<n.length?{done:!1,value:n[s++]}:{done:!0}}},o.arrayIterator=function(n){return{next:o.arrayIteratorImpl(n)}},o.makeIterator=function(n){var s=typeof Symbol!="undefined"&&Symbol.iterator&&n[Symbol.iterator];return s?s.call(n):o.arrayIterator(n)},o.arrayFromIterator=function(n){for(var s,u=[];!(s=n.next()).done;)u.push(s.value);return u},o.arrayFromIterable=function(n){return n instanceof Array?n:o.arrayFromIterator(o.makeIterator(n))},o.owns=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},o.ASSUME_ES5=!1,o.ASSUME_NO_NATIVE_MAP=!1,o.ASSUME_NO_NATIVE_SET=!1,o.SIMPLE_FROUND_POLYFILL=!1,o.ISOLATE_POLYFILLS=!1,o.FORCE_POLYFILL_PROMISE=!1,o.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,o.defineProperty=o.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(n,s,u){return n==Array.prototype||n==Object.prototype||(n[s]=u.value),n},o.getGlobal=function(n){n=[typeof globalThis=="object"&&globalThis,n,typeof window=="object"&&window,typeof self=="object"&&self,typeof vs=="object"&&vs];for(var s=0;s<n.length;++s){var u=n[s];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")},o.global=o.getGlobal(this),o.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",o.TRUST_ES6_POLYFILLS=!o.ISOLATE_POLYFILLS||o.IS_SYMBOL_NATIVE,o.polyfills={},o.propertyToPolyfillSymbol={},o.POLYFILL_PREFIX="$jscp$",o.polyfill=function(n,s,u,d){s&&(o.ISOLATE_POLYFILLS?o.polyfillIsolated(n,s,u,d):o.polyfillUnisolated(n,s,u,d))},o.polyfillUnisolated=function(n,s,u,d){for(u=o.global,n=n.split("."),d=0;d<n.length-1;d++){var T=n[d];if(!(T in u))return;u=u[T]}n=n[n.length-1],d=u[n],s=s(d),s!=d&&s!=null&&o.defineProperty(u,n,{configurable:!0,writable:!0,value:s})},o.polyfillIsolated=function(n,s,u,d){var T=n.split(".");n=T.length===1,d=T[0],d=!n&&d in o.polyfills?o.polyfills:o.global;for(var w=0;w<T.length-1;w++){var N=T[w];if(!(N in d))return;d=d[N]}T=T[T.length-1],u=o.IS_SYMBOL_NATIVE&&u==="es6"?d[T]:null,s=s(u),s!=null&&(n?o.defineProperty(o.polyfills,T,{configurable:!0,writable:!0,value:s}):s!==u&&(o.propertyToPolyfillSymbol[T]===void 0&&(u=1e9*Math.random()>>>0,o.propertyToPolyfillSymbol[T]=o.IS_SYMBOL_NATIVE?o.global.Symbol(T):o.POLYFILL_PREFIX+u+"$"+T),o.defineProperty(d,o.propertyToPolyfillSymbol[T],{configurable:!0,writable:!0,value:s})))},o.assign=o.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(n,s){for(var u=1;u<arguments.length;u++){var d=arguments[u];if(d)for(var T in d)o.owns(d,T)&&(n[T]=d[T])}return n},o.polyfill("Object.assign",function(n){return n||o.assign},"es6","es3"),o.objectCreate=o.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(n){var s=function(){};return s.prototype=n,new s},o.getConstructImplementation=function(){function n(){function u(){}return Reflect.construct(u,[],function(){}),new u instanceof u}if(o.TRUST_ES6_POLYFILLS&&typeof Reflect!="undefined"&&Reflect.construct){if(n())return Reflect.construct;var s=Reflect.construct;return function(u,d,T){return u=s(u,d),T&&Reflect.setPrototypeOf(u,T.prototype),u}}return function(u,d,T){return T===void 0&&(T=u),T=o.objectCreate(T.prototype||Object.prototype),Function.prototype.apply.call(u,T,d)||T}},o.construct={valueOf:o.getConstructImplementation}.valueOf(),o.underscoreProtoCanBeSet=function(){var n={a:!0},s={};try{return s.__proto__=n,s.a}catch{}return!1},o.setPrototypeOf=o.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:o.underscoreProtoCanBeSet()?function(n,s){if(n.__proto__=s,n.__proto__!==s)throw new TypeError(n+" is not extensible");return n}:null,o.inherits=function(n,s){if(n.prototype=o.objectCreate(s.prototype),n.prototype.constructor=n,o.setPrototypeOf){var u=o.setPrototypeOf;u(n,s)}else for(u in s)if(u!="prototype")if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(s,u);d&&Object.defineProperty(n,u,d)}else n[u]=s[u];n.superClass_=s.prototype},o.polyfill("Reflect",function(n){return n||{}},"es6","es3"),o.polyfill("Reflect.construct",function(n){return o.construct},"es6","es3"),o.polyfill("Reflect.setPrototypeOf",function(n){if(n)return n;if(o.setPrototypeOf){var s=o.setPrototypeOf;return function(u,d){try{return s(u,d),!0}catch{return!1}}}return null},"es6","es5"),o.polyfill("globalThis",function(n){return n||o.global},"es_2020","es3"),o.checkStringArgs=function(n,s,u){if(n==null)throw new TypeError("The 'this' value for String.prototype."+u+" must not be null or undefined");if(s instanceof RegExp)throw new TypeError("First argument to String.prototype."+u+" must not be a regular expression");return n+""},o.polyfill("String.prototype.startsWith",function(n){return n||function(s,u){var d=o.checkStringArgs(this,s,"startsWith");s+="";var T=d.length,w=s.length;u=Math.max(0,Math.min(u|0,d.length));for(var N=0;N<w&&u<T;)if(d[u++]!=s[N++])return!1;return N>=w}},"es6","es3"),o.initSymbol=function(){},o.polyfill("Symbol",function(n){if(n)return n;var s=function(w,N){this.$jscomp$symbol$id_=w,o.defineProperty(this,"description",{configurable:!0,writable:!0,value:N})};s.prototype.toString=function(){return this.$jscomp$symbol$id_};var u="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",d=0,T=function(w){if(this instanceof T)throw new TypeError("Symbol is not a constructor");return new s(u+(w||"")+"_"+d++,w)};return T},"es6","es3"),o.polyfill("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<s.length;u++){var d=o.global[s[u]];typeof d=="function"&&typeof d.prototype[n]!="function"&&o.defineProperty(d.prototype,n,{configurable:!0,writable:!0,value:function(){return o.iteratorPrototype(o.arrayIteratorImpl(this))}})}return n},"es6","es3"),o.iteratorPrototype=function(n){return n={next:n},n[Symbol.iterator]=function(){return this},n},o.iteratorFromArray=function(n,s){n instanceof String&&(n+="");var u=0,d=!1,T={next:function(){if(!d&&u<n.length){var w=u++;return{value:s(w,n[w]),done:!1}}return d=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T},o.polyfill("Array.prototype.keys",function(n){return n||function(){return o.iteratorFromArray(this,function(s){return s})}},"es6","es3"),o.polyfill("Object.setPrototypeOf",function(n){return n||o.setPrototypeOf},"es6","es5"),o.polyfill("Array.prototype.values",function(n){return n||function(){return o.iteratorFromArray(this,function(s,u){return u})}},"es8","es3"),o.polyfill("Object.entries",function(n){return n||function(s){var u=[],d;for(d in s)o.owns(s,d)&&u.push([d,s[d]]);return u}},"es8","es3"),o.polyfill("Object.getOwnPropertySymbols",function(n){return n||function(){return[]}},"es6","es5"),o.polyfill("Reflect.ownKeys",function(n){return n||function(s){var u=[],d=Object.getOwnPropertyNames(s);s=Object.getOwnPropertySymbols(s);for(var T=0;T<d.length;T++)(d[T].substring(0,14)=="jscomp_symbol_"?s:u).push(d[T]);return u.concat(s)}},"es6","es5"),o.polyfill("Object.getOwnPropertyDescriptors",function(n){return n||function(s){for(var u={},d=Reflect.ownKeys(s),T=0;T<d.length;T++)u[d[T]]=Object.getOwnPropertyDescriptor(s,d[T]);return u}},"es8","es5"),o.polyfill("Array.prototype.fill",function(n){return n||function(s,u,d){var T=this.length||0;for(0>u&&(u=Math.max(0,T+u)),(d==null||d>T)&&(d=T),d=Number(d),0>d&&(d=Math.max(0,T+d)),u=Number(u||0);u<d;u++)this[u]=s;return this}},"es6","es3"),o.typedArrayFill=function(n){return n||Array.prototype.fill},o.polyfill("Int8Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Uint8Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Uint8ClampedArray.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Int16Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Uint16Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Int32Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Uint32Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Float32Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Float64Array.prototype.fill",o.typedArrayFill,"es6","es5"),o.polyfill("Object.is",function(n){return n||function(s,u){return s===u?s!==0||1/s===1/u:s!==s&&u!==u}},"es6","es3"),o.polyfill("Array.prototype.includes",function(n){return n||function(s,u){var d=this;d instanceof String&&(d=String(d));var T=d.length;for(u=u||0,0>u&&(u=Math.max(u+T,0));u<T;u++){var w=d[u];if(w===s||Object.is(w,s))return!0}return!1}},"es7","es3"),o.polyfill("String.prototype.includes",function(n){return n||function(s,u){return o.checkStringArgs(this,s,"includes").indexOf(s,u||0)!==-1}},"es6","es3");var i=i||{};i.global=globalThis||root,i.define=function(n,s){return s},i.DEBUG=!1,i.DISALLOW_TEST_ONLY_CODE=!i.DEBUG,i.provide=function(n){},i.module=function(n){},i.module.get=function(n){},i.module.declareLegacyNamespace=function(){},i.setTestOnly=function(n){if(i.DISALLOW_TEST_ONLY_CODE)throw n=n||"",Error("Importing test-only code into non-debug environment"+(n?": "+n:"."))},i.require=function(n){},i.requireType=function(n){};var l={warn:function(n,s,u,d){n=n+" was deprecated on "+s+" and will be deleted on "+u+".",d&&(n+=`
Use `+d+" instead."),console.warn(n)}},a={},c=!1;a.register=function(n){if(c)throw Error("CSS already injected");Array.isArray(n)?((0,l.warn)("Registering CSS by passing an array of strings","September 2021","September 2022","css.register passing a multiline string"),a.content+=`
`+n.join(`
`)):a.content+=`
`+n},a.inject=function(n,s){c||(c=!0,n&&(n=s.replace(/[\\/]$/,""),s=a.content.replace(/<<<PATH>>>/g,n),a.content="",n=document.createElement("style"),n.id="blockly-common-style",s=document.createTextNode(s),n.appendChild(s),document.head.insertBefore(n,document.head.firstChild)))},a.content=`
  .blocklySvg {
    background-color: #fff;
    outline: none;
    overflow: hidden;  /* IE overflows by default. */
    position: absolute;
    display: block;
  }

  .blocklyWidgetDiv {
    display: none;
    position: absolute;
    z-index: 99999;  /* big value for bootstrap3 compatibility */
  }

  .injectionDiv {
    height: 100%;
    position: relative;
    overflow: hidden;  /* So blocks in drag surface disappear at edges */
    touch-action: none;
  }

  .blocklyNonSelectable {
    user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
  }

  .blocklyWsDragSurface {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
  }

  /* Added as a separate rule with multiple classes to make it more specific
     than a bootstrap rule that selects svg:root. See issue #1275 for context.
  */
  .blocklyWsDragSurface.blocklyOverflowVisible {
    overflow: visible;
  }

  .blocklyBlockDragSurface {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: visible !important;
    z-index: 50;  /* Display below toolbox, but above everything else. */
  }

  .blocklyBlockCanvas.blocklyCanvasTransitioning,
  .blocklyBubbleCanvas.blocklyCanvasTransitioning {
    transition: transform .5s;
  }

  .blocklyTooltipDiv {
    background-color: #ffffc7;
    border: 1px solid #ddc;
    box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
    color: #000;
    display: none;
    font: 9pt sans-serif;
    opacity: .9;
    padding: 2px;
    position: absolute;
    z-index: 100000;  /* big value for bootstrap3 compatibility */
  }

  .blocklyDropDownDiv {
    position: absolute;
    left: 0;
    top: 0;
    z-index: 1000;
    display: none;
    border: 1px solid;
    border-color: #dadce0;
    background-color: #fff;
    border-radius: 2px;
    padding: 4px;
    box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  }

  .blocklyDropDownDiv.blocklyFocused {
    box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
  }

  .blocklyDropDownContent {
    max-height: 300px;  // @todo: spec for maximum height.
    overflow: auto;
    overflow-x: hidden;
    position: relative;
  }

  .blocklyDropDownArrow {
    position: absolute;
    left: 0;
    top: 0;
    width: 16px;
    height: 16px;
    z-index: -1;
    background-color: inherit;
    border-color: inherit;
  }

  .blocklyDropDownButton {
    display: inline-block;
    float: left;
    padding: 0;
    margin: 4px;
    border-radius: 4px;
    outline: none;
    border: 1px solid;
    transition: box-shadow .1s;
    cursor: pointer;
  }

  .blocklyArrowTop {
    border-top: 1px solid;
    border-left: 1px solid;
    border-top-left-radius: 4px;
    border-color: inherit;
  }

  .blocklyArrowBottom {
    border-bottom: 1px solid;
    border-right: 1px solid;
    border-bottom-right-radius: 4px;
    border-color: inherit;
  }

  .blocklyResizeSE {
    cursor: se-resize;
    fill: #aaa;
  }

  .blocklyResizeSW {
    cursor: sw-resize;
    fill: #aaa;
  }

  .blocklyResizeLine {
    stroke: #515A5A;
    stroke-width: 1;
  }

  .blocklyHighlightedConnectionPath {
    fill: none;
    stroke: #fc3;
    stroke-width: 4px;
  }

  .blocklyPathLight {
    fill: none;
    stroke-linecap: round;
    stroke-width: 1;
  }

  .blocklySelected>.blocklyPathLight {
    display: none;
  }

  .blocklyDraggable {
    /* backup for browsers (e.g. IE11) that don't support grab */
    cursor: url("<<<PATH>>>/handopen.cur"), auto;
    cursor: grab;
    cursor: -webkit-grab;
  }

    /* backup for browsers (e.g. IE11) that don't support grabbing */
  .blocklyDragging {
    /* backup for browsers (e.g. IE11) that don't support grabbing */
    cursor: url("<<<PATH>>>/handclosed.cur"), auto;
    cursor: grabbing;
    cursor: -webkit-grabbing;
  }

    /* Changes cursor on mouse down. Not effective in Firefox because of
       https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
  .blocklyDraggable:active {
    /* backup for browsers (e.g. IE11) that don't support grabbing */
    cursor: url("<<<PATH>>>/handclosed.cur"), auto;
    cursor: grabbing;
    cursor: -webkit-grabbing;
  }

  /* Change the cursor on the whole drag surface in case the mouse gets
     ahead of block during a drag. This way the cursor is still a closed hand.
    */
  .blocklyBlockDragSurface .blocklyDraggable {
    /* backup for browsers (e.g. IE11) that don't support grabbing */
    cursor: url("<<<PATH>>>/handclosed.cur"), auto;
    cursor: grabbing;
    cursor: -webkit-grabbing;
  }

  .blocklyDragging.blocklyDraggingDelete {
    cursor: url("<<<PATH>>>/handdelete.cur"), auto;
  }

  .blocklyDragging>.blocklyPath,
  .blocklyDragging>.blocklyPathLight {
    fill-opacity: .8;
    stroke-opacity: .8;
  }

  .blocklyDragging>.blocklyPathDark {
    display: none;
  }

  .blocklyDisabled>.blocklyPath {
    fill-opacity: .5;
    stroke-opacity: .5;
  }

  .blocklyDisabled>.blocklyPathLight,
  .blocklyDisabled>.blocklyPathDark {
    display: none;
  }

  .blocklyInsertionMarker>.blocklyPath,
  .blocklyInsertionMarker>.blocklyPathLight,
  .blocklyInsertionMarker>.blocklyPathDark {
    fill-opacity: .2;
    stroke: none;
  }

  .blocklyMultilineText {
    font-family: monospace;
  }

  .blocklyNonEditableText>text {
    pointer-events: none;
  }

  .blocklyFlyout {
    position: absolute;
    z-index: 20;
  }

  .blocklyText text {
    cursor: default;
  }

  /*
    Don't allow users to select text.  It gets annoying when trying to
    drag a block and selected text moves instead.
  */
  .blocklySvg text,
  .blocklyBlockDragSurface text {
    user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
    cursor: inherit;
  }

  .blocklyHidden {
    display: none;
  }

  .blocklyFieldDropdown:not(.blocklyHidden) {
    display: block;
  }

  .blocklyIconGroup {
    cursor: default;
  }

  .blocklyIconGroup:not(:hover),
  .blocklyIconGroupReadonly {
    opacity: .6;
  }

  .blocklyIconShape {
    fill: #00f;
    stroke: #fff;
    stroke-width: 1px;
  }

  .blocklyIconSymbol {
    fill: #fff;
  }

  .blocklyMinimalBody {
    margin: 0;
    padding: 0;
  }

  .blocklyHtmlInput {
    border: none;
    border-radius: 4px;
    height: 100%;
    margin: 0;
    outline: none;
    padding: 0;
    width: 100%;
    text-align: center;
    display: block;
    box-sizing: border-box;
  }

  /* Edge and IE introduce a close icon when the input value is longer than a
     certain length. This affects our sizing calculations of the text input.
     Hiding the close icon to avoid that. */
  .blocklyHtmlInput::-ms-clear {
    display: none;
  }

  .blocklyMainBackground {
    stroke-width: 1;
    stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
  }

  .blocklyMutatorBackground {
    fill: #fff;
    stroke: #ddd;
    stroke-width: 1;
  }

  .blocklyFlyoutBackground {
    fill: #ddd;
    fill-opacity: .8;
  }

  .blocklyMainWorkspaceScrollbar {
    z-index: 20;
  }

  .blocklyFlyoutScrollbar {
    z-index: 30;
  }

  .blocklyScrollbarHorizontal,
  .blocklyScrollbarVertical {
    position: absolute;
    outline: none;
  }

  .blocklyScrollbarBackground {
    opacity: 0;
  }

  .blocklyScrollbarHandle {
    fill: #ccc;
  }

  .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
  .blocklyScrollbarHandle:hover {
    fill: #bbb;
  }

  /* Darken flyout scrollbars due to being on a grey background. */
  /* By contrast, workspace scrollbars are on a white background. */
  .blocklyFlyout .blocklyScrollbarHandle {
    fill: #bbb;
  }

  .blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
  .blocklyFlyout .blocklyScrollbarHandle:hover {
    fill: #aaa;
  }

  .blocklyInvalidInput {
    background: #faa;
  }

  .blocklyVerticalMarker {
    stroke-width: 3px;
    fill: rgba(255,255,255,.5);
    pointer-events: none;
  }

  .blocklyComputeCanvas {
    position: absolute;
    width: 0;
    height: 0;
  }

  .blocklyNoPointerEvents {
    pointer-events: none;
  }

  .blocklyContextMenu {
    border-radius: 4px;
    max-height: 100%;
  }

  .blocklyDropdownMenu {
    border-radius: 2px;
    padding: 0 !important;
  }

  .blocklyDropdownMenu .blocklyMenuItem {
    /* 28px on the left for icon or checkbox. */
    padding-left: 28px;
  }

  /* BiDi override for the resting state. */
  .blocklyDropdownMenu .blocklyMenuItemRtl {
    /* Flip left/right padding for BiDi. */
    padding-left: 5px;
    padding-right: 28px;
  }

  .blocklyWidgetDiv .blocklyMenu {
    background: #fff;
    border: 1px solid transparent;
    box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
    font: normal 13px Arial, sans-serif;
    margin: 0;
    outline: none;
    padding: 4px 0;
    position: absolute;
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 100%;
    z-index: 20000;  /* Arbitrary, but some apps depend on it... */
  }

  .blocklyWidgetDiv .blocklyMenu.blocklyFocused {
    box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
  }

  .blocklyDropDownDiv .blocklyMenu {
    background: inherit;  /* Compatibility with gapi, reset from goog-menu */
    border: inherit;  /* Compatibility with gapi, reset from goog-menu */
    font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
    outline: none;
    position: relative;  /* Compatibility with gapi, reset from goog-menu */
    z-index: 20000;  /* Arbitrary, but some apps depend on it... */
  }

  /* State: resting. */
  .blocklyMenuItem {
    border: none;
    color: #000;
    cursor: pointer;
    list-style: none;
    margin: 0;
    /* 7em on the right for shortcut. */
    min-width: 7em;
    padding: 6px 15px;
    white-space: nowrap;
  }

  /* State: disabled. */
  .blocklyMenuItemDisabled {
    color: #ccc;
    cursor: inherit;
  }

  /* State: hover. */
  .blocklyMenuItemHighlight {
    background-color: rgba(0,0,0,.1);
  }

  /* State: selected/checked. */
  .blocklyMenuItemCheckbox {
    height: 16px;
    position: absolute;
    width: 16px;
  }

  .blocklyMenuItemSelected .blocklyMenuItemCheckbox {
    background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
    float: left;
    margin-left: -24px;
    position: static;  /* Scroll with the menu. */
  }

  .blocklyMenuItemRtl .blocklyMenuItemCheckbox {
    float: right;
    margin-right: -24px;
  }
`;var p,h,f,_;t.module$exports$Blockly$utils$string={startsWith:function(n,s){return n.lastIndexOf(s,0)===0},shortestStringLength:function(n){return n.length?n.reduce(function(s,u){return s.length<u.length?s:u}).length:0},commonWordPrefix:function(n,s){if(!n.length)return 0;if(n.length===1)return n[0].length;var u=0;s=s||(0,t.module$exports$Blockly$utils$string.shortestStringLength)(n);var d;for(d=0;d<s;d++){for(var T=n[0][d],w=1;w<n.length;w++)if(T!==n[w][d])return u;T===" "&&(u=d+1)}for(T=1;T<n.length;T++)if((w=n[T][d])&&w!==" ")return u;return s},commonWordSuffix:function(n,s){if(!n.length)return 0;if(n.length===1)return n[0].length;var u=0;s=s||(0,t.module$exports$Blockly$utils$string.shortestStringLength)(n);var d;for(d=0;d<s;d++){for(var T=n[0].substr(-d-1,1),w=1;w<n.length;w++)if(T!==n[w].substr(-d-1,1))return u;T===" "&&(u=d+1)}for(T=1;T<n.length;T++)if((w=n[T].charAt(n[T].length-d-1))&&w!==" ")return u;return s},wrap:function(n,s){n=n.split(`
`);for(var u=0;u<n.length;u++)n[u]=p(n[u],s);return n.join(`
`)}},p=function(n,s){if(n.length<=s)return n;for(var u=n.trim().split(/\s+/),d=0;d<u.length;d++)u[d].length>s&&(s=u[d].length);var T=-1/0,w=1;do{d=T;var N=n;n=[],T=u.length/w;for(var J=1,ve=0;ve<u.length-1;ve++)J<(ve+1.5)/T?(J++,n[ve]=!0):n[ve]=!1;n=f(u,n,s),T=h(u,n,s),n=_(u,n),w++}while(T>d);return N},h=function(n,s,u){for(var d=[0],T=[],w=0;w<n.length;w++)d[d.length-1]+=n[w].length,s[w]===!0?(d.push(0),T.push(n[w].charAt(n[w].length-1))):s[w]===!1&&d[d.length-1]++;for(n=Math.max.apply(Math,d),w=s=0;w<d.length;w++)s-=2*Math.pow(Math.abs(u-d[w]),1.5),s-=Math.pow(n-d[w],1.5),".?!".indexOf(T[w])!==-1?s+=u/3:",;)]}".indexOf(T[w])!==-1&&(s+=u/4);return 1<d.length&&d[d.length-1]<=d[d.length-2]&&(s+=.5),s},f=function(n,s,u){for(var d=h(n,s,u),T,w=0;w<s.length-1;w++)if(s[w]!==s[w+1]){var N=[].concat(s);N[w]=!N[w],N[w+1]=!N[w+1];var J=h(n,N,u);J>d&&(d=J,T=N)}return T?f(n,T,u):s},_=function(n,s){for(var u=[],d=0;d<n.length;d++)u.push(n[d]),s[d]!==void 0&&u.push(s[d]?`
`:" ");return u.join("")},t.module$exports$Blockly$utils$string.isNumber=function(n){return/^\s*-?\d+(\.\d+)?\s*$/.test(n)},t.module$exports$Blockly$ConnectionType={ConnectionType:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4}},t.module$exports$Blockly$internalConstants={LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28},t.module$exports$Blockly$internalConstants.CONNECTING_SNAP_RADIUS=t.module$exports$Blockly$internalConstants.SNAP_RADIUS,t.module$exports$Blockly$internalConstants.CURRENT_CONNECTION_PREFERENCE=8,t.module$exports$Blockly$internalConstants.BUMP_DELAY=250,t.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS=10,t.module$exports$Blockly$internalConstants.COLLAPSE_CHARS=30,t.module$exports$Blockly$internalConstants.LONGPRESS=750,t.module$exports$Blockly$internalConstants.SOUND_LIMIT=100,t.module$exports$Blockly$internalConstants.DRAG_STACK=!0,t.module$exports$Blockly$internalConstants.SPRITE={width:96,height:124,url:"sprites.png"},t.module$exports$Blockly$internalConstants.DRAG_NONE=0,t.module$exports$Blockly$internalConstants.DRAG_STICKY=1,t.module$exports$Blockly$internalConstants.DRAG_BEGIN=1,t.module$exports$Blockly$internalConstants.DRAG_FREE=2,t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE=[],t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE]=t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE,t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE]=t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT]=t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT,t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT]=t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,t.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.module$exports$Blockly$utils$global={},t.module$exports$Blockly$utils$global.globalThis=function(){return typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof vs=="object"?vs:this}();var m={};m.TOUCH_ENABLED="ontouchstart"in t.module$exports$Blockly$utils$global.globalThis||!!(t.module$exports$Blockly$utils$global.globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.module$exports$Blockly$utils$global.globalThis.navigator||!t.module$exports$Blockly$utils$global.globalThis.navigator.maxTouchPoints&&!t.module$exports$Blockly$utils$global.globalThis.navigator.msMaxTouchPoints);var v=null;m.TOUCH_MAP={},t.module$exports$Blockly$utils$global.globalThis.PointerEvent?m.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:m.TOUCH_ENABLED&&(m.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var x=0;m.longStart=function(n,s){(0,m.longStop)(),n.changedTouches&&n.changedTouches.length!==1||(x=setTimeout(function(){n.changedTouches&&(n.button=2,n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY),s&&s.handleRightClick(n)},t.module$exports$Blockly$internalConstants.LONGPRESS))},m.longStop=function(){x&&(clearTimeout(x),x=0)},m.clearTouchIdentifier=function(){v=null},m.shouldHandleEvent=function(n){return!(0,m.isMouseOrTouchEvent)(n)||(0,m.checkTouchIdentifier)(n)},m.getTouchIdentifierFromEvent=function(n){return n.pointerId!==void 0?n.pointerId:n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0].identifier!==void 0&&n.changedTouches[0].identifier!==null?n.changedTouches[0].identifier:"mouse"},m.checkTouchIdentifier=function(n){var s=(0,m.getTouchIdentifierFromEvent)(n);return v!=null?v===s:n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown"?(v=s,!0):!1},m.setClientFromTouch=function(n){if((0,t.module$exports$Blockly$utils$string.startsWith)(n.type,"touch")){var s=n.changedTouches[0];n.clientX=s.clientX,n.clientY=s.clientY}},m.isMouseOrTouchEvent=function(n){return(0,t.module$exports$Blockly$utils$string.startsWith)(n.type,"touch")||(0,t.module$exports$Blockly$utils$string.startsWith)(n.type,"mouse")||(0,t.module$exports$Blockly$utils$string.startsWith)(n.type,"pointer")},m.isTouchEvent=function(n){return(0,t.module$exports$Blockly$utils$string.startsWith)(n.type,"touch")||(0,t.module$exports$Blockly$utils$string.startsWith)(n.type,"pointer")},m.splitEventByTouches=function(n){var s=[];if(n.changedTouches)for(var u=0;u<n.changedTouches.length;u++)s[u]={type:n.type,changedTouches:[n.changedTouches[u]],target:n.target,stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()}};else s.push(n);return s};var b={};(function(n){function s(d){return u.indexOf(d.toUpperCase())!==-1}b.raw=n;var u=b.raw.toUpperCase();b.IE=s("Trident")||s("MSIE"),b.EDGE=s("Edge"),b.JavaFx=s("JavaFX"),b.CHROME=(s("Chrome")||s("CriOS"))&&!b.EDGE,b.WEBKIT=s("WebKit")&&!b.EDGE,b.GECKO=s("Gecko")&&!b.WEBKIT&&!b.IE&&!b.EDGE,b.ANDROID=s("Android"),n=t.module$exports$Blockly$utils$global.globalThis.navigator&&t.module$exports$Blockly$utils$global.globalThis.navigator.maxTouchPoints,b.IPAD=s("iPad")||s("Macintosh")&&0<n,b.IPOD=s("iPod"),b.IPHONE=s("iPhone")&&!b.IPAD&&!b.IPOD,b.MAC=s("Macintosh"),b.TABLET=b.IPAD||b.ANDROID&&!s("Mobile")||s("Silk"),b.MOBILE=!b.TABLET&&(b.IPOD||b.IPHONE||b.ANDROID||s("IEMobile"))})(t.module$exports$Blockly$utils$global.globalThis.navigator&&t.module$exports$Blockly$utils$global.globalThis.navigator.userAgent||"");var A={conditionalBind:function(n,s,u,d,T,w){var N=!1,J=function(Gt){var Vn=!T;Gt=(0,m.splitEventByTouches)(Gt);for(var Kt=0;Kt<Gt.length;Kt++){var Qi=Gt[Kt];(!Vn||(0,m.shouldHandleEvent)(Qi))&&((0,m.setClientFromTouch)(Qi),u?d.call(u,Qi):d(Qi),N=!0)}},ve=[];if(t.module$exports$Blockly$utils$global.globalThis.PointerEvent&&s in m.TOUCH_MAP)for(var He=0;He<m.TOUCH_MAP[s].length;He++){var Tt=m.TOUCH_MAP[s][He];n.addEventListener(Tt,J,!1),ve.push([n,Tt,J])}else if(n.addEventListener(s,J,!1),ve.push([n,s,J]),s in m.TOUCH_MAP)for(He=function(Gt){J(Gt);var Vn=!w;N&&Vn&&Gt.preventDefault()},Tt=0;Tt<m.TOUCH_MAP[s].length;Tt++){var bt=m.TOUCH_MAP[s][Tt];n.addEventListener(bt,He,!1),ve.push([n,bt,He])}return ve},bind:function(n,s,u,d){var T=function(He){u?d.call(u,He):d(He)},w=[];if(t.module$exports$Blockly$utils$global.globalThis.PointerEvent&&s in m.TOUCH_MAP)for(var N=0;N<m.TOUCH_MAP[s].length;N++){var J=m.TOUCH_MAP[s][N];n.addEventListener(J,T,!1),w.push([n,J,T])}else if(n.addEventListener(s,T,!1),w.push([n,s,T]),s in m.TOUCH_MAP)for(N=function(He){if(He.changedTouches&&He.changedTouches.length===1){var Tt=He.changedTouches[0];He.clientX=Tt.clientX,He.clientY=Tt.clientY}T(He),He.preventDefault()},J=0;J<m.TOUCH_MAP[s].length;J++){var ve=m.TOUCH_MAP[s][J];n.addEventListener(ve,N,!1),w.push([n,ve,N])}return w},unbind:function(n){for(var s;n.length;){s=n.pop();var u=s[0],d=s[1];s=s[2],u.removeEventListener(d,s,!1)}return s},isTargetInput:function(n){return n.target.type==="textarea"||n.target.type==="text"||n.target.type==="number"||n.target.type==="email"||n.target.type==="password"||n.target.type==="search"||n.target.type==="tel"||n.target.type==="url"||n.target.isContentEditable||n.target.dataset&&n.target.dataset.isTextInput==="true"},isRightButton:function(n){return n.ctrlKey&&b.MAC?!0:n.button===2},mouseToSvg:function(n,s,u){var d=s.createSVGPoint();return d.x=n.clientX,d.y=n.clientY,u||(u=s.getScreenCTM().inverse()),d.matrixTransform(u)},getScrollDeltaPixels:function(n){switch(n.deltaMode){default:return{x:n.deltaX,y:n.deltaY};case 1:return{x:n.deltaX*t.module$exports$Blockly$internalConstants.LINE_MODE_MULTIPLIER,y:n.deltaY*t.module$exports$Blockly$internalConstants.LINE_MODE_MULTIPLIER};case 2:return{x:n.deltaX*t.module$exports$Blockly$internalConstants.PAGE_MODE_MULTIPLIER,y:n.deltaY*t.module$exports$Blockly$internalConstants.PAGE_MODE_MULTIPLIER}}}};t.module$exports$Blockly$blocks={},t.module$exports$Blockly$blocks.Blocks=Object.create(null);var k;t.module$exports$Blockly$common={},t.module$exports$Blockly$common.getMainWorkspace=function(){return k},t.module$exports$Blockly$common.setMainWorkspace=function(n){k=n};var E=null;t.module$exports$Blockly$common.getSelected=function(){return E},t.module$exports$Blockly$common.setSelected=function(n){E=n};var M;t.module$exports$Blockly$common.getParentContainer=function(){return M},t.module$exports$Blockly$common.setParentContainer=function(n){M=n},t.module$exports$Blockly$common.svgResize=function(n){for(;n.options.parentWorkspace;)n=n.options.parentWorkspace;var s=n.getParentSvg(),u=n.getCachedParentSvgSize(),d=s.parentNode;if(d){var T=d.offsetWidth;d=d.offsetHeight,u.width!==T&&(s.setAttribute("width",T+"px"),n.setCachedParentSvgSize(T,null)),u.height!==d&&(s.setAttribute("height",d+"px"),n.setCachedParentSvgSize(null,d)),n.resize()}},t.module$exports$Blockly$common.draggingConnections=[],t.module$exports$Blockly$common.getBlockTypeCounts=function(n,s){var u=Object.create(null),d=n.getDescendants(!0);for(s&&(n=n.getNextBlock())&&(n=d.indexOf(n),d.splice(n,d.length-n)),n=0;s=d[n];n++)u[s.type]?u[s.type]++:u[s.type]=1;return u};var R=function(n){return function(){this.jsonInit(n)}};t.module$exports$Blockly$common.defineBlocksWithJsonArray=function(n){for(var s=0;s<n.length;s++){var u=n[s];if(u){var d=u.type;d?(t.module$exports$Blockly$blocks.Blocks[d]&&console.warn("Block definition #"+s+' in JSON array overwrites prior definition of "'+d+'".'),t.module$exports$Blockly$blocks.Blocks[d]={init:R(u)}):console.warn("Block definition #"+s+" in JSON array is missing a type attribute. Skipping.")}else console.warn("Block definition #"+s+" in JSON array is "+u+". Skipping.")}};var I={},L=!1;I.isVisible=function(){return L},Object.defineProperties(I,{visible:{get:function(){return(0,l.warn)("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),(0,I.isVisible)()}}});var F=!1;I.LIMIT=50;var U=0,X=0,j=0,P=0,z=null,K=null;I.OFFSET_X=0,I.OFFSET_Y=10,I.RADIUS_OK=10,I.HOVER_MS=750,I.MARGINS=5;var te=null;I.getDiv=function(){return te},Object.defineProperties(I,{DIV:{get:function(){return(0,l.warn)("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),(0,I.getDiv)()}}}),I.getTooltipOfObject=function(n){if(n=oe(n)){for(n=n.tooltip;typeof n=="function";)n=n();if(typeof n!="string")throw Error("Tooltip function must return a string.");return n}return""};var oe=function(n){for(;n&&n.tooltip;){if(typeof n.tooltip=="string"||typeof n.tooltip=="function")return n;n=n.tooltip}return null};I.createDom=function(){te||(te=document.createElement("div"),te.className="blocklyTooltipDiv",((0,t.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(te))},I.bindMouseEvents=function(n){n.mouseOverWrapper_=(0,A.bind)(n,"mouseover",null,ee),n.mouseOutWrapper_=(0,A.bind)(n,"mouseout",null,pe),n.addEventListener("mousemove",ae,!1)},I.unbindMouseEvents=function(n){n&&((0,A.unbind)(n.mouseOverWrapper_),(0,A.unbind)(n.mouseOutWrapper_),n.removeEventListener("mousemove",ae))};var ee=function(n){F||(n=oe(n.currentTarget),z!==n&&((0,I.hide)(),K=null,z=n),clearTimeout(U))},pe=function(n){F||(U=setTimeout(function(){K=z=null,(0,I.hide)()},1),clearTimeout(X))},ae=function(n){if(z&&z.tooltip&&!F)if(L){var s=j-n.pageX;n=P-n.pageY,Math.sqrt(s*s+n*n)>I.RADIUS_OK&&(0,I.hide)()}else K!==z&&(clearTimeout(X),j=n.pageX,P=n.pageY,X=setTimeout(Ee,I.HOVER_MS))};I.dispose=function(){K=z=null,(0,I.hide)()},I.hide=function(){L&&(L=!1,te&&(te.style.display="none")),X&&clearTimeout(X)},I.block=function(){(0,I.hide)(),F=!0},I.unblock=function(){F=!1};var Ee=function(){if(!F&&(K=z,te)){te.textContent="";var n=(0,I.getTooltipOfObject)(z);n=(0,t.module$exports$Blockly$utils$string.wrap)(n,I.LIMIT),n=n.split(`
`);for(var s=0;s<n.length;s++){var u=document.createElement("div");u.appendChild(document.createTextNode(n[s])),te.appendChild(u)}n=z.RTL,s=document.documentElement.clientWidth,u=document.documentElement.clientHeight,te.style.direction=n?"rtl":"ltr",te.style.display="block",L=!0;var d=j;d=n?d-(I.OFFSET_X+te.offsetWidth):d+I.OFFSET_X;var T=P+I.OFFSET_Y;T+te.offsetHeight>u+window.scrollY&&(T-=te.offsetHeight+2*I.OFFSET_Y),n?d=Math.max(I.MARGINS-window.scrollX,d):d+te.offsetWidth>s+window.scrollX-2*I.MARGINS&&(d=s-te.offsetWidth-2*I.MARGINS),te.style.top=T+"px",te.style.left=d+"px"}},S={SVG_NS:"http://www.w3.org/2000/svg",HTML_NS:"http://www.w3.org/1999/xhtml",XLINK_NS:"http://www.w3.org/1999/xlink",NodeType:{ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16}},D=null,H=0,q=null;S.createSvgElement=function(n,s,u){n=document.createElementNS(S.SVG_NS,String(n));for(var d in s)n.setAttribute(d,s[d]);return document.body.runtimeStyle&&(n.runtimeStyle=n.currentStyle=n.style),u&&u.appendChild(n),n},S.addClass=function(n,s){var u=n.getAttribute("class")||"";return(" "+u+" ").indexOf(" "+s+" ")!==-1?!1:(u&&(u+=" "),n.setAttribute("class",u+s),!0)},S.removeClasses=function(n,s){s=s.split(" ");for(var u=0;u<s.length;u++)(0,S.removeClass)(n,s[u])},S.removeClass=function(n,s){var u=n.getAttribute("class");if((" "+u+" ").indexOf(" "+s+" ")===-1)return!1;u=u.split(/\s+/);for(var d=0;d<u.length;d++)u[d]&&u[d]!==s||(u.splice(d,1),d--);return u.length?n.setAttribute("class",u.join(" ")):n.removeAttribute("class"),!0},S.hasClass=function(n,s){return(" "+n.getAttribute("class")+" ").indexOf(" "+s+" ")!==-1},S.removeNode=function(n){return n&&n.parentNode?n.parentNode.removeChild(n):null},S.insertAfter=function(n,s){var u=s.nextSibling;if(s=s.parentNode,!s)throw Error("Reference node has no parent.");u?s.insertBefore(n,u):s.appendChild(n)},S.containsNode=function(n,s){return!!(n.compareDocumentPosition(s)&S.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},S.setCssTransform=function(n,s){n.style.transform=s,n.style["-webkit-transform"]=s},S.startTextWidthCache=function(){H++,D||(D=Object.create(null))},S.stopTextWidthCache=function(){H--,H||(D=null)},S.getTextWidth=function(n){var s=n.textContent+`
`+n.className.baseVal,u;if(D&&(u=D[s]))return u;try{u=b.IE||b.EDGE?n.getBBox().width:n.getComputedTextLength()}catch{return 8*n.textContent.length}return D&&(D[s]=u),u},S.getFastTextWidth=function(n,s,u,d){return(0,S.getFastTextWidthWithSizeString)(n,s+"pt",u,d)},S.getFastTextWidthWithSizeString=function(n,s,u,d){var T=n.textContent;n=T+`
`+n.className.baseVal;var w;return D&&(w=D[n])||(q||(w=document.createElement("canvas"),w.className="blocklyComputeCanvas",document.body.appendChild(w),q=w.getContext("2d")),q.font=u+" "+s+" "+d,w=q.measureText(T).width,D&&(D[n]=w)),w},S.measureFontMetrics=function(n,s,u,d){var T=document.createElement("span");T.style.font=u+" "+s+" "+d,T.textContent=n,n=document.createElement("div"),n.style.width="1px",n.style.height=0,s=document.createElement("div"),s.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),s.appendChild(T),s.appendChild(n),document.body.appendChild(s),u={height:0,baseline:0};try{s.style.alignItems="baseline",u.baseline=n.offsetTop-T.offsetTop,s.style.alignItems="flex-end",u.height=n.offsetTop-T.offsetTop}finally{document.body.removeChild(s)}return u};var Q={},de=null,je=null,We="",ze="",Oe;Q.getDiv=function(){return Oe},Q.testOnly_setDiv=function(n){Oe=n},Object.defineProperties(Q,{DIV:{get:function(){return(0,l.warn)("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),(0,Q.getDiv)()}}}),Q.createDom=function(){Oe||(Oe=document.createElement("div"),Oe.className="blocklyWidgetDiv",((0,t.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(Oe))},Q.show=function(n,s,u){(0,Q.hide)(),de=n,je=u,n=Oe,n.style.direction=s?"rtl":"ltr",n.style.display="block",s=(0,t.module$exports$Blockly$common.getMainWorkspace)(),We=s.getRenderer().getClassName(),ze=s.getTheme().getClassName(),(0,S.addClass)(n,We),(0,S.addClass)(n,ze)},Q.hide=function(){if((0,Q.isVisible)()){de=null;var n=Oe;n.style.display="none",n.style.left="",n.style.top="",je&&je(),je=null,n.textContent="",We&&((0,S.removeClass)(n,We),We=""),ze&&((0,S.removeClass)(n,ze),ze=""),(0,t.module$exports$Blockly$common.getMainWorkspace)().markFocused()}},Q.isVisible=function(){return!!de},Q.hideIfOwner=function(n){de===n&&(0,Q.hide)()};var Ye=function(n,s,u){Oe.style.left=n+"px",Oe.style.top=s+"px",Oe.style.height=u+"px"};Q.positionWithAnchor=function(n,s,u,d){var T=Re(n,s,u);n=et(n,s,u,d),0>T?Ye(n,0,u.height+T):Ye(n,T,u.height)};var et=function(n,s,u,d){return d?Math.min(Math.max(s.right-u.width,n.left),n.right-u.width):Math.max(Math.min(s.left,n.right-u.width),n.left)},Re=function(n,s,u){return s.bottom+u.height>=n.bottom?s.top-u.height:s.bottom},Te={},Le="aria-",Ke="role";Te.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},Te.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},Te.setRole=function(n,s){n.setAttribute(Ke,s)},Te.setState=function(n,s,u){Array.isArray(u)&&(u=u.join(" ")),n.setAttribute(Le+s,u)};var Ne={TEST_ONLY:{}},qe=0;Ne.getNextUniqueId=function(){return"blockly-"+(qe++).toString(36)};var lt="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";Ne.TEST_ONLY.genUid=function(){for(var n=lt.length,s=[],u=0;20>u;u++)s[u]=lt.charAt(Math.random()*n);return s.join("")},Ne.genUid=function(){return Ne.TEST_ONLY.genUid()};var ue={},rt=Object.create(null);ue.TEST_ONLY={typeMap:rt};var xt=Object.create(null);ue.DEFAULT="default",ue.Type=function(n){this.name_=n},ue.Type.prototype.toString=function(){return this.name_},ue.Type.CONNECTION_CHECKER=new ue.Type("connectionChecker"),ue.Type.CURSOR=new ue.Type("cursor"),ue.Type.EVENT=new ue.Type("event"),ue.Type.FIELD=new ue.Type("field"),ue.Type.RENDERER=new ue.Type("renderer"),ue.Type.TOOLBOX=new ue.Type("toolbox"),ue.Type.THEME=new ue.Type("theme"),ue.Type.TOOLBOX_ITEM=new ue.Type("toolboxItem"),ue.Type.FLYOUTS_VERTICAL_TOOLBOX=new ue.Type("flyoutsVerticalToolbox"),ue.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new ue.Type("flyoutsHorizontalToolbox"),ue.Type.METRICS_MANAGER=new ue.Type("metricsManager"),ue.Type.BLOCK_DRAGGER=new ue.Type("blockDragger"),ue.Type.SERIALIZER=new ue.Type("serializer"),ue.register=function(n,s,u,d){if(!(n instanceof ue.Type)&&typeof n!="string"||String(n).trim()==="")throw Error('Invalid type "'+n+'". The type must be a non-empty string or a Blockly.registry.Type.');if(n=String(n).toLowerCase(),typeof s!="string"||s.trim()==="")throw Error('Invalid name "'+s+'". The name must be a non-empty string.');var T=s.toLowerCase();if(!u)throw Error("Can not register a null value");var w=rt[n],N=xt[n];if(w||(w=rt[n]=Object.create(null),N=xt[n]=Object.create(null)),ie(n,u),!d&&w[T])throw Error('Name "'+T+'" with type "'+n+'" already registered.');w[T]=u,N[T]=s};var ie=function(n,s){switch(n){case String(ue.Type.FIELD):if(typeof s.fromJson!="function")throw Error('Type "'+n+'" must have a fromJson function')}};ue.unregister=function(n,s){n=String(n).toLowerCase(),s=s.toLowerCase();var u=rt[n];u&&u[s]?(delete rt[n][s],delete xt[n][s]):console.warn("Unable to unregister ["+s+"]["+n+"] from the registry.")};var Z=function(n,s,u){n=String(n).toLowerCase(),s=s.toLowerCase();var d=rt[n];if(!d||!d[s]){if(s="Unable to find ["+s+"]["+n+"] in the registry.",u)throw Error(s+" You must require or register a "+n+" plugin.");return console.warn(s),null}return d[s]};ue.hasItem=function(n,s){return n=String(n).toLowerCase(),s=s.toLowerCase(),(n=rt[n])?!!n[s]:!1},ue.getClass=function(n,s,u){return Z(n,s,u)},ue.getObject=function(n,s,u){return Z(n,s,u)},ue.getAllItems=function(n,s,u){n=String(n).toLowerCase();var d=rt[n];if(!d){if(d="Unable to find ["+n+"] in the registry.",u)throw Error(d+" You must require or register a "+n+" plugin.");return console.warn(d),null}if(!s)return d;n=xt[n],u=Object.create(null),s=Object.keys(d);for(var T=0;T<s.length;T++){var w=s[T];u[n[w]]=d[w]}return u},ue.getClassFromOptions=function(n,s,u){return s=s.plugins[n.toString()]||ue.DEFAULT,typeof s=="function"?s:(0,ue.getClass)(n,s,u)};var B={},Ae="",Ue=!0;B.setRecordUndo=function(n){Ue=n},B.getRecordUndo=function(){return Ue};var ge=0;B.CREATE="create",B.BLOCK_CREATE=B.CREATE,B.DELETE="delete",B.BLOCK_DELETE=B.DELETE,B.CHANGE="change",B.BLOCK_CHANGE=B.CHANGE,B.MOVE="move",B.BLOCK_MOVE=B.MOVE,B.VAR_CREATE="var_create",B.VAR_DELETE="var_delete",B.VAR_RENAME="var_rename",B.UI="ui",B.BLOCK_DRAG="drag",B.SELECTED="selected",B.CLICK="click",B.MARKER_MOVE="marker_move",B.BUBBLE_OPEN="bubble_open",B.TRASHCAN_OPEN="trashcan_open",B.TOOLBOX_ITEM_SELECT="toolbox_item_select",B.THEME_CHANGE="theme_change",B.VIEWPORT_CHANGE="viewport_change",B.COMMENT_CREATE="comment_create",B.COMMENT_DELETE="comment_delete",B.COMMENT_CHANGE="comment_change",B.COMMENT_MOVE="comment_move",B.FINISHED_LOADING="finished_loading",B.BUMP_EVENTS=[B.CREATE,B.MOVE,B.COMMENT_CREATE,B.COMMENT_MOVE];var _e=[];B.fire=function(n){(0,B.isEnabled)()&&(_e.length||setTimeout(ke,0),_e.push(n))};var ke=function(){for(var n=(0,B.filter)(_e,!0),s=_e.length=0,u;u=n[s];s++)if(u.workspaceId){var d=vt.Workspace.getById(u.workspaceId);d&&d.fireChangeListener(u)}};B.filter=function(n,s){n=n.slice(),s||n.reverse();for(var u=[],d=Object.create(null),T=0,w=void 0;w=n[T];T++)if(!w.isNull()){var N=[w.isUiEvent?B.UI:w.type,w.blockId,w.workspaceId].join(" "),J=d[N],ve=J?J.event:null;J?w.type===B.MOVE&&J.index===T-1?(ve.newParentId=w.newParentId,ve.newInputName=w.newInputName,ve.newCoordinate=w.newCoordinate,J.index=T):w.type===B.CHANGE&&w.element===ve.element&&w.name===ve.name?ve.newValue=w.newValue:w.type===B.VIEWPORT_CHANGE?(ve.viewTop=w.viewTop,ve.viewLeft=w.viewLeft,ve.scale=w.scale,ve.oldScale=w.oldScale):(w.type!==B.CLICK||ve.type!==B.BUBBLE_OPEN)&&(d[N]={event:w,index:T},u.push(w)):(d[N]={event:w,index:T},u.push(w))}for(n=u.filter(function(He){return!He.isNull()}),s||n.reverse(),s=1,u=void 0;u=n[s];s++)u.type===B.CHANGE&&u.element==="mutation"&&n.unshift(n.splice(s,1)[0]);return n},B.clearPendingUndo=function(){for(var n=0,s;s=_e[n];n++)s.recordUndo=!1},B.disable=function(){ge++},B.enable=function(){ge--},B.isEnabled=function(){return ge===0},B.getGroup=function(){return Ae},B.setGroup=function(n){Ae=typeof n=="boolean"?n?(0,Ne.genUid)():"":n},B.getDescendantIds=function(n){var s=[];n=n.getDescendants(!1);for(var u=0,d;d=n[u];u++)s[u]=d.id;return s},B.fromJson=function(n,s){var u=(0,B.get)(n.type);if(!u)throw Error("Unknown event type.");return u=new u,u.fromJson(n),u.workspaceId=s.id,u},B.get=function(n){return(0,ue.getClass)(ue.Type.EVENT,n)},B.disableOrphans=function(n){if((n.type===B.MOVE||n.type===B.CREATE)&&n.workspaceId){var s=vt.Workspace.getById(n.workspaceId),u=s.getBlockById(n.blockId);if(u){n=Ue;try{Ue=!1;var d=u.getParent();if(d&&d.isEnabled()){var T=u.getDescendants(!1);for(s=0,d=void 0;d=T[s];s++)d.setEnabled(!0)}else if((u.outputConnection||u.previousConnection)&&!s.isDragging())do u.setEnabled(!1),u=u.getNextBlock();while(u)}finally{Ue=n}}}},B.TEST_ONLY={FIRE_QUEUE:_e,fireNow:ke};var me={toRadians:function(n){return n*Math.PI/180},toDegrees:function(n){return 180*n/Math.PI},clamp:function(n,s,u){if(u<n){var d=u;u=n,n=d}return Math.max(n,Math.min(s,u))}},Ce={bumpIntoBounds:function(n,s,u){var d=u.getBoundingRectangle(),T=d.right-d.left,w=(0,me.clamp)(s.top,d.top,s.top+s.height-(d.bottom-d.top))-d.top,N=s.left;return s=s.left+s.width-T,n.RTL?N=Math.min(s,N):s=Math.max(N,s),(n=(0,me.clamp)(N,d.left,s)-d.left)||w?(u.moveBy(n,w),!0):!1},bumpIntoBoundsHandler:function(n){return function(s){var u=n.getMetricsManager();if(u.hasFixedEdges()&&!n.isDragging())if(B.BUMP_EVENTS.indexOf(s.type)!==-1){u=u.getScrollMetrics(!0);var d=le(n,s);if(d){var T=(0,B.getGroup)();(0,B.setGroup)(s.group),(0,Ce.bumpIntoBounds)(n,u,d)&&!s.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),T!==null&&(0,B.setGroup)(T)}}else s.type===B.VIEWPORT_CHANGE&&s.scale>s.oldScale&&(0,Ce.bumpTopObjectsIntoBounds)(n)}}},le=function(n,s){var u=null;switch(s.type){case B.CREATE:case B.MOVE:(u=n.getBlockById(s.blockId))&&(u=u.getRootBlock());break;case B.COMMENT_CREATE:case B.COMMENT_MOVE:u=n.getCommentById(s.commentId)}return u};Ce.bumpTopObjectsIntoBounds=function(n){var s=n.getMetricsManager();if(s.hasFixedEdges()&&!n.isDragging()){s=s.getScrollMetrics(!0);for(var u=n.getTopBoundedElements(),d=0,T;T=u[d];d++)(0,Ce.bumpIntoBounds)(n,s,T)}};var W={Coordinate:function(n,s){this.x=n,this.y=s}};W.Coordinate.equals=function(n,s){return n===s?!0:n&&s?n.x===s.x&&n.y===s.y:!1},W.Coordinate.distance=function(n,s){var u=n.x-s.x;return n=n.y-s.y,Math.sqrt(u*u+n*n)},W.Coordinate.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},W.Coordinate.difference=function(n,s){return new W.Coordinate(n.x-s.x,n.y-s.y)},W.Coordinate.sum=function(n,s){return new W.Coordinate(n.x+s.x,n.y+s.y)},W.Coordinate.prototype.clone=function(){return new W.Coordinate(this.x,this.y)},W.Coordinate.prototype.scale=function(n){return this.x*=n,this.y*=n,this},W.Coordinate.prototype.translate=function(n,s){return this.x+=n,this.y+=s,this};var Me={Size:function(n,s){this.width=n,this.height=s}};Me.Size.equals=function(n,s){return n===s?!0:n&&s?n.width===s.width&&n.height===s.height:!1};var we={getSize:function(n){if($e(n,"display")!=="none")return yt(n);var s=n.style,u=s.display,d=s.visibility,T=s.position;s.visibility="hidden",s.position="absolute",s.display="inline";var w=n.offsetWidth;return n=n.offsetHeight,s.display=u,s.position=T,s.visibility=d,new Me.Size(w,n)}},yt=function(n){return new Me.Size(n.offsetWidth,n.offsetHeight)},$e=function(n,s){return(0,we.getComputedStyle)(n,s)||(0,we.getCascadedStyle)(n,s)||n.style&&n.style[s]};we.getComputedStyle=function(n,s){return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(n,null))&&(n[s]||n.getPropertyValue(s))||""},we.getCascadedStyle=function(n,s){return n.currentStyle?n.currentStyle[s]:null},we.getPageOffset=function(n){var s=new W.Coordinate(0,0);n=n.getBoundingClientRect();var u=document.documentElement;return u=new W.Coordinate(window.pageXOffset||u.scrollLeft,window.pageYOffset||u.scrollTop),s.x=n.left+u.x,s.y=n.top+u.y,s},we.getViewportPageOffset=function(){var n=document.body,s=document.documentElement;return new W.Coordinate(n.scrollLeft||s.scrollLeft,n.scrollTop||s.scrollTop)},we.setElementShown=function(n,s){n.style.display=s?"":"none"},we.isRightToLeft=function(n){return $e(n,"direction")==="rtl"},we.getBorderBox=function(n){var s=(0,we.getComputedStyle)(n,"borderLeftWidth"),u=(0,we.getComputedStyle)(n,"borderRightWidth"),d=(0,we.getComputedStyle)(n,"borderTopWidth");return n=(0,we.getComputedStyle)(n,"borderBottomWidth"),{top:parseFloat(d),right:parseFloat(u),bottom:parseFloat(n),left:parseFloat(s)}},we.scrollIntoContainerView=function(n,s,u){n=(0,we.getContainerOffsetToScrollInto)(n,s,u),s.scrollLeft=n.x,s.scrollTop=n.y},we.getContainerOffsetToScrollInto=function(n,s,u){var d=(0,we.getPageOffset)(n),T=(0,we.getPageOffset)(s),w=(0,we.getBorderBox)(s),N=d.x-T.x-w.left;return d=d.y-T.y-w.top,T=yt(n),n=s.clientWidth-T.width,T=s.clientHeight-T.height,w=s.scrollLeft,s=s.scrollTop,u?(w+=N-n/2,s+=d-T/2):(w+=Math.min(N,Math.max(N-n,0)),s+=Math.min(d,Math.max(d-T,0))),new W.Coordinate(w,s)};var nt={Rect:function(n,s,u,d){this.top=n,this.bottom=s,this.left=u,this.right=d}};nt.Rect.prototype.contains=function(n,s){return n>=this.left&&n<=this.right&&s>=this.top&&s<=this.bottom},nt.Rect.prototype.intersects=function(n){return!(this.left>n.right||this.right<n.left||this.top>n.bottom||this.bottom<n.top)};var it={},Jt=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,$n=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;it.getRelativeXY=function(n){var s=new W.Coordinate(0,0),u=n.getAttribute("x");return u&&(s.x=parseInt(u,10)),(u=n.getAttribute("y"))&&(s.y=parseInt(u,10)),(u=(u=n.getAttribute("transform"))&&u.match(Jt))&&(s.x+=Number(u[1]),u[3]&&(s.y+=Number(u[3]))),(n=n.getAttribute("style"))&&-1<n.indexOf("translate")&&(n=n.match($n))&&(s.x+=Number(n[1]),n[3]&&(s.y+=Number(n[3]))),s},it.getInjectionDivXY=function(n){for(var s=0,u=0;n;){var d=(0,it.getRelativeXY)(n);if(s+=d.x,u+=d.y,(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;n=n.parentNode}return new W.Coordinate(s,u)},it.is3dSupported=function(){if(it.is3dSupported.cached_!==void 0)return it.is3dSupported.cached_;if(!t.module$exports$Blockly$utils$global.globalThis.getComputedStyle)return!1;var n=document.createElement("p"),s="none",u={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(n,null);for(var d in u)if(n.style[d]!==void 0){if(n.style[d]="translate3d(1px,1px,1px)",s=t.module$exports$Blockly$utils$global.globalThis.getComputedStyle(n),!s)return document.body.removeChild(n),!1;s=s.getPropertyValue(u[d])}return document.body.removeChild(n),it.is3dSupported.cached_=s!=="none",it.is3dSupported.cached_},it.getViewportBBox=function(){var n=(0,we.getViewportPageOffset)();return new nt.Rect(n.y,document.documentElement.clientHeight+n.y,n.x,document.documentElement.clientWidth+n.x)},it.getDocumentScroll=function(){var n=document.documentElement,s=window;return b.IE&&s.pageYOffset!==n.scrollTop?new W.Coordinate(n.scrollLeft,n.scrollTop):new W.Coordinate(s.pageXOffset||n.scrollLeft,s.pageYOffset||n.scrollTop)},it.screenToWsCoordinates=function(n,s){var u=s.x;s=s.y;var d=n.getInjectionDiv().getBoundingClientRect();return u=new W.Coordinate(u-d.left,s-d.top),s=n.getOriginOffsetInPixels(),W.Coordinate.difference(u,s).scale(1/n.scale)},it.svgSize=function(n){return(0,l.warn)("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new Me.Size(n.cachedWidth_,n.cachedHeight_)},it.TEST_ONLY={XY_REGEX:Jt,XY_STYLE_REGEX:$n};var ce={Svg:function(n){this.tagName_=n}};ce.Svg.prototype.toString=function(){return this.tagName_},ce.Svg.ANIMATE=new ce.Svg("animate"),ce.Svg.CIRCLE=new ce.Svg("circle"),ce.Svg.CLIPPATH=new ce.Svg("clipPath"),ce.Svg.DEFS=new ce.Svg("defs"),ce.Svg.FECOMPOSITE=new ce.Svg("feComposite"),ce.Svg.FECOMPONENTTRANSFER=new ce.Svg("feComponentTransfer"),ce.Svg.FEFLOOD=new ce.Svg("feFlood"),ce.Svg.FEFUNCA=new ce.Svg("feFuncA"),ce.Svg.FEGAUSSIANBLUR=new ce.Svg("feGaussianBlur"),ce.Svg.FEPOINTLIGHT=new ce.Svg("fePointLight"),ce.Svg.FESPECULARLIGHTING=new ce.Svg("feSpecularLighting"),ce.Svg.FILTER=new ce.Svg("filter"),ce.Svg.FOREIGNOBJECT=new ce.Svg("foreignObject"),ce.Svg.G=new ce.Svg("g"),ce.Svg.IMAGE=new ce.Svg("image"),ce.Svg.LINE=new ce.Svg("line"),ce.Svg.PATH=new ce.Svg("path"),ce.Svg.PATTERN=new ce.Svg("pattern"),ce.Svg.POLYGON=new ce.Svg("polygon"),ce.Svg.RECT=new ce.Svg("rect"),ce.Svg.SVG=new ce.Svg("svg"),ce.Svg.TEXT=new ce.Svg("text"),ce.Svg.TSPAN=new ce.Svg("tspan");var cn={BlockDragSurfaceSvg:function(n){this.container_=n,this.createDom()}};cn.BlockDragSurfaceSvg.prototype.SVG_=null,cn.BlockDragSurfaceSvg.prototype.dragGroup_=null,cn.BlockDragSurfaceSvg.prototype.container_=null,cn.BlockDragSurfaceSvg.prototype.scale_=1,cn.BlockDragSurfaceSvg.prototype.surfaceXY_=null,cn.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new W.Coordinate(0,0),cn.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=(0,S.createSvgElement)(ce.Svg.SVG,{xmlns:S.SVG_NS,"xmlns:html":S.HTML_NS,"xmlns:xlink":S.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=(0,S.createSvgElement)(ce.Svg.G,{},this.SVG_))},cn.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(n){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(n),this.SVG_.style.display="block",this.surfaceXY_=new W.Coordinate(0,0)},cn.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(n,s,u){this.scale_=u,n=n.toFixed(0),s=s.toFixed(0),this.childSurfaceXY_.x=parseInt(n,10),this.childSurfaceXY_.y=parseInt(s,10),this.dragGroup_.setAttribute("transform","translate("+n+","+s+") scale("+u+")")},cn.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var n=this.surfaceXY_.x,s=this.surfaceXY_.y;n=n.toFixed(0),s=s.toFixed(0),this.SVG_.style.display="block",(0,S.setCssTransform)(this.SVG_,"translate3d("+n+"px, "+s+"px, 0)")},cn.BlockDragSurfaceSvg.prototype.translateBy=function(n,s){this.surfaceXY_=new W.Coordinate(this.surfaceXY_.x+n,this.surfaceXY_.y+s),this.translateSurfaceInternal_()},cn.BlockDragSurfaceSvg.prototype.translateSurface=function(n,s){this.surfaceXY_=new W.Coordinate(n*this.scale_,s*this.scale_),this.translateSurfaceInternal_()},cn.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var n=(0,it.getRelativeXY)(this.SVG_);return new W.Coordinate(n.x/this.scale_,n.y/this.scale_)},cn.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},cn.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},cn.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},cn.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},cn.BlockDragSurfaceSvg.prototype.clearAndHide=function(n){if(n?n.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null};var Ie={DropDownDiv:function(){}};Ie.DropDownDiv.ARROW_SIZE=16,Ie.DropDownDiv.BORDER_SIZE=1,Ie.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,Ie.DropDownDiv.PADDING_Y=16,Ie.DropDownDiv.ANIMATION_TIME=.25,Ie.DropDownDiv.animateOutTimer_=null,Ie.DropDownDiv.onHide_=null,Ie.DropDownDiv.rendererClassName_="",Ie.DropDownDiv.themeClassName_="",Ie.DropDownDiv.boundsElement_=null,Ie.DropDownDiv.owner_=null,Ie.DropDownDiv.positionToField_=null,Ie.DropDownDiv.createDom=function(){if(!Ie.DropDownDiv.DIV_){var n=document.createElement("div");n.className="blocklyDropDownDiv",((0,t.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(n),Ie.DropDownDiv.DIV_=n,n=document.createElement("div"),n.className="blocklyDropDownContent",Ie.DropDownDiv.DIV_.appendChild(n),Ie.DropDownDiv.content_=n,n=document.createElement("div"),n.className="blocklyDropDownArrow",Ie.DropDownDiv.DIV_.appendChild(n),Ie.DropDownDiv.arrow_=n,Ie.DropDownDiv.DIV_.style.opacity=0,Ie.DropDownDiv.DIV_.style.transition="transform "+Ie.DropDownDiv.ANIMATION_TIME+"s, opacity "+Ie.DropDownDiv.ANIMATION_TIME+"s",Ie.DropDownDiv.DIV_.addEventListener("focusin",function(){(0,S.addClass)(Ie.DropDownDiv.DIV_,"blocklyFocused")}),Ie.DropDownDiv.DIV_.addEventListener("focusout",function(){(0,S.removeClass)(Ie.DropDownDiv.DIV_,"blocklyFocused")})}},Ie.DropDownDiv.setBoundsElement=function(n){Ie.DropDownDiv.boundsElement_=n},Ie.DropDownDiv.getContentDiv=function(){return Ie.DropDownDiv.content_},Ie.DropDownDiv.clearContent=function(){Ie.DropDownDiv.content_.textContent="",Ie.DropDownDiv.content_.style.width=""},Ie.DropDownDiv.setColour=function(n,s){Ie.DropDownDiv.DIV_.style.backgroundColor=n,Ie.DropDownDiv.DIV_.style.borderColor=s},Ie.DropDownDiv.showPositionedByBlock=function(n,s,u,d){return Ll(da(s),n,u,d)},Ie.DropDownDiv.showPositionedByField=function(n,s,u){return Ie.DropDownDiv.positionToField_=!0,Ll(al(n),n,s,u)};var fr={},da=function(n){var s=n.getSvgRoot(),u=s.getBBox(),d=n.workspace.scale;return n=u.height*d,u=u.width*d,s=(0,we.getPageOffset)(s),new nt.Rect(s.y,s.y+n,s.x,s.x+u)},al=function(n){return n=n.getScaledBBox(),new nt.Rect(n.top,n.bottom,n.left,n.right)},Ll=function(n,s,u,d){var T=n.left+(n.right-n.left)/2,w=n.bottom;n=n.top,d&&(n+=d),d=s.getSourceBlock();for(var N=d.workspace;N.options.parentWorkspace;)N=N.options.parentWorkspace;return Ie.DropDownDiv.setBoundsElement(N.getParentSvg().parentNode),Ie.DropDownDiv.show(s,d.RTL,T,w,T,n,u)};Ie.DropDownDiv.show=function(n,s,u,d,T,w,N){return Ie.DropDownDiv.owner_=n,Ie.DropDownDiv.onHide_=N||null,n=Ie.DropDownDiv.DIV_,n.style.direction=s?"rtl":"ltr",s=(0,t.module$exports$Blockly$common.getMainWorkspace)(),Ie.DropDownDiv.rendererClassName_=s.getRenderer().getClassName(),Ie.DropDownDiv.themeClassName_=s.getTheme().getClassName(),(0,S.addClass)(n,Ie.DropDownDiv.rendererClassName_),(0,S.addClass)(n,Ie.DropDownDiv.themeClassName_),re(u,d,T,w)},fr.getBoundsInfo=function(){var n=(0,we.getPageOffset)(Ie.DropDownDiv.boundsElement_),s=(0,we.getSize)(Ie.DropDownDiv.boundsElement_);return{left:n.x,right:n.x+s.width,top:n.y,bottom:n.y+s.height,width:s.width,height:s.height}},fr.getPositionMetrics=function(n,s,u,d){var T=fr.getBoundsInfo(),w=(0,we.getSize)(Ie.DropDownDiv.DIV_);return s+w.height<T.bottom?dc(n,s,T,w):d-w.height>T.top?fa(u,d,T,w):s+w.height<document.documentElement.clientHeight?dc(n,s,T,w):d-w.height>document.documentElement.clientTop?fa(u,d,T,w):lu(n,T,w)};var dc=function(n,s,u,d){return n=Ie.DropDownDiv.getPositionX(n,u.left,u.right,d.width),{initialX:n.divX,initialY:s,finalX:n.divX,finalY:s+Ie.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:-(Ie.DropDownDiv.ARROW_SIZE/2+Ie.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},fa=function(n,s,u,d){return n=Ie.DropDownDiv.getPositionX(n,u.left,u.right,d.width),{initialX:n.divX,initialY:s-d.height,finalX:n.divX,finalY:s-d.height-Ie.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:d.height-2*Ie.DropDownDiv.BORDER_SIZE-Ie.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},lu=function(n,s,u){return n=Ie.DropDownDiv.getPositionX(n,s.left,s.right,u.width),{initialX:n.divX,initialY:0,finalX:n.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}};Ie.DropDownDiv.getPositionX=function(n,s,u,d){return s=(0,me.clamp)(s,n-d/2,u-d),n=n-Ie.DropDownDiv.ARROW_SIZE/2-s,u=Ie.DropDownDiv.ARROW_HORIZONTAL_PADDING,n=(0,me.clamp)(u,n,d-u-Ie.DropDownDiv.ARROW_SIZE),{arrowX:n,divX:s}},Ie.DropDownDiv.isVisible=function(){return!!Ie.DropDownDiv.owner_},Ie.DropDownDiv.hideIfOwner=function(n,s){return Ie.DropDownDiv.owner_===n?(s?Ie.DropDownDiv.hideWithoutAnimation():Ie.DropDownDiv.hide(),!0):!1},Ie.DropDownDiv.hide=function(){Ie.DropDownDiv.DIV_.style.transform="translate(0, 0)",Ie.DropDownDiv.DIV_.style.opacity=0,Ie.DropDownDiv.animateOutTimer_=setTimeout(function(){Ie.DropDownDiv.hideWithoutAnimation()},1e3*Ie.DropDownDiv.ANIMATION_TIME),Ie.DropDownDiv.onHide_&&(Ie.DropDownDiv.onHide_(),Ie.DropDownDiv.onHide_=null)},Ie.DropDownDiv.hideWithoutAnimation=function(){if(Ie.DropDownDiv.isVisible()){Ie.DropDownDiv.animateOutTimer_&&clearTimeout(Ie.DropDownDiv.animateOutTimer_);var n=Ie.DropDownDiv.DIV_;n.style.transform="",n.style.left="",n.style.top="",n.style.opacity=0,n.style.display="none",n.style.backgroundColor="",n.style.borderColor="",Ie.DropDownDiv.onHide_&&(Ie.DropDownDiv.onHide_(),Ie.DropDownDiv.onHide_=null),Ie.DropDownDiv.clearContent(),Ie.DropDownDiv.owner_=null,Ie.DropDownDiv.rendererClassName_&&((0,S.removeClass)(n,Ie.DropDownDiv.rendererClassName_),Ie.DropDownDiv.rendererClassName_=""),Ie.DropDownDiv.themeClassName_&&((0,S.removeClass)(n,Ie.DropDownDiv.themeClassName_),Ie.DropDownDiv.themeClassName_=""),(0,t.module$exports$Blockly$common.getMainWorkspace)().markFocused()}};var re=function(n,s,u,d){n=fr.getPositionMetrics(n,s,u,d),n.arrowVisible?(Ie.DropDownDiv.arrow_.style.display="",Ie.DropDownDiv.arrow_.style.transform="translate("+n.arrowX+"px,"+n.arrowY+"px) rotate(45deg)",Ie.DropDownDiv.arrow_.setAttribute("class",n.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Ie.DropDownDiv.arrow_.style.display="none",s=Math.floor(n.initialX),u=Math.floor(n.initialY),d=Math.floor(n.finalX);var T=Math.floor(n.finalY),w=Ie.DropDownDiv.DIV_;return w.style.left=s+"px",w.style.top=u+"px",w.style.display="block",w.style.opacity=1,w.style.transform="translate("+(d-s)+"px,"+(T-u)+"px)",!!n.arrowAtTop};Ie.DropDownDiv.repositionForWindowResize=function(){if(Ie.DropDownDiv.owner_){var n=Ie.DropDownDiv.owner_,s=n.getSourceBlock();n=Ie.DropDownDiv.positionToField_?al(n):da(s),s=n.left+(n.right-n.left)/2,re(s,n.bottom,s,n.top)}else Ie.DropDownDiv.hide()},Ie.DropDownDiv.TEST_ONLY=fr;var Se={Grid:function(n,s){this.gridPattern_=n,this.spacing_=s.spacing,this.length_=s.length,this.line2_=(this.line1_=n.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=s.snap}};Se.Grid.prototype.scale_=1,Se.Grid.prototype.dispose=function(){this.gridPattern_=null},Se.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},Se.Grid.prototype.getSpacing=function(){return this.spacing_},Se.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},Se.Grid.prototype.update=function(n){this.scale_=n;var s=this.spacing_*n||100;this.gridPattern_.setAttribute("width",s),this.gridPattern_.setAttribute("height",s),s=Math.floor(this.spacing_/2)+.5;var u=s-this.length_/2,d=s+this.length_/2;s*=n,u*=n,d*=n,this.setLineAttributes_(this.line1_,n,u,d,s,s),this.setLineAttributes_(this.line2_,n,s,s,u,d)},Se.Grid.prototype.setLineAttributes_=function(n,s,u,d,T,w){n&&(n.setAttribute("stroke-width",s),n.setAttribute("x1",u),n.setAttribute("y1",T),n.setAttribute("x2",d),n.setAttribute("y2",w))},Se.Grid.prototype.moveTo=function(n,s){this.gridPattern_.setAttribute("x",n),this.gridPattern_.setAttribute("y",s),(b.IE||b.EDGE)&&this.update(this.scale_)},Se.Grid.createDom=function(n,s,u){return n=(0,S.createSvgElement)(ce.Svg.PATTERN,{id:"blocklyGridPattern"+n,patternUnits:"userSpaceOnUse"},u),0<s.length&&0<s.spacing?((0,S.createSvgElement)(ce.Svg.LINE,{stroke:s.colour},n),1<s.length&&(0,S.createSvgElement)(ce.Svg.LINE,{stroke:s.colour},n)):(0,S.createSvgElement)(ce.Svg.LINE,{},n),n},t.module$exports$Blockly$Msg={},t.module$exports$Blockly$Msg.Msg=Object.create(null);var De;t.module$exports$Blockly$utils$xml={NAME_SPACE:"https://developers.google.com/blockly/xml"},De=t.module$exports$Blockly$utils$global.globalThis.document,t.module$exports$Blockly$utils$xml.getDocument=function(){return De},t.module$exports$Blockly$utils$xml.setDocument=function(n){De=n},t.module$exports$Blockly$utils$xml.createElement=function(n){return De.createElementNS(t.module$exports$Blockly$utils$xml.NAME_SPACE,n)},t.module$exports$Blockly$utils$xml.createTextNode=function(n){return De.createTextNode(n)},t.module$exports$Blockly$utils$xml.textToDomDocument=function(n){return new DOMParser().parseFromString(n,"text/xml")},t.module$exports$Blockly$utils$xml.domToText=function(n){return new XMLSerializer().serializeToString(n)},t.module$exports$Blockly$inputTypes={},t.module$exports$Blockly$inputTypes.inputTypes={VALUE:t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,STATEMENT:t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,DUMMY:5};var xe,Fe;t.module$exports$Blockly$Xml={workspaceToDom:function(n,s){var u=(0,t.module$exports$Blockly$utils$xml.createElement)("xml"),d=(0,t.module$exports$Blockly$Xml.variablesToDom)(t.module$exports$Blockly$Variables.allUsedVarModels(n));d.hasChildNodes()&&u.appendChild(d),d=n.getTopComments(!0);for(var T=0;T<d.length;T++)u.appendChild(d[T].toXmlWithXY(s));for(n=n.getTopBlocks(!0),d=0;d<n.length;d++)u.appendChild((0,t.module$exports$Blockly$Xml.blockToDomWithXY)(n[d],s));return u},variablesToDom:function(n){for(var s=(0,t.module$exports$Blockly$utils$xml.createElement)("variables"),u=0;u<n.length;u++){var d=n[u],T=(0,t.module$exports$Blockly$utils$xml.createElement)("variable");T.appendChild((0,t.module$exports$Blockly$utils$xml.createTextNode)(d.name)),d.type&&T.setAttribute("type",d.type),T.id=d.getId(),s.appendChild(T)}return s},blockToDomWithXY:function(n,s){if(n.isInsertionMarker()&&(n=n.getChildren(!1)[0],!n))return new DocumentFragment;var u;n.workspace.RTL&&(u=n.workspace.getWidth()),s=(0,t.module$exports$Blockly$Xml.blockToDom)(n,s);var d=n.getRelativeToSurfaceXY();return s.setAttribute("x",Math.round(n.workspace.RTL?u-d.x:d.x)),s.setAttribute("y",Math.round(d.y)),s}},xe=function(n){if(n.isSerializable()){var s=(0,t.module$exports$Blockly$utils$xml.createElement)("field");return s.setAttribute("name",n.name||""),n.toXml(s)}return null},Fe=function(n,s){for(var u=0;u<n.inputList.length;u++)for(var d=n.inputList[u],T=0;T<d.fieldRow.length;T++){var w=xe(d.fieldRow[T]);w&&s.appendChild(w)}},t.module$exports$Blockly$Xml.blockToDom=function(n,s){if(n.isInsertionMarker())return(s=n.getChildren(!1)[0])?(0,t.module$exports$Blockly$Xml.blockToDom)(s):new DocumentFragment;var u=(0,t.module$exports$Blockly$utils$xml.createElement)(n.isShadow()?"shadow":"block");if(u.setAttribute("type",n.type),s||u.setAttribute("id",n.id),n.mutationToDom){var d=n.mutationToDom();d&&(d.hasChildNodes()||d.hasAttributes())&&u.appendChild(d)}if(Fe(n,u),d=n.getCommentText()){var T=n.commentModel.size,w=n.commentModel.pinned,N=(0,t.module$exports$Blockly$utils$xml.createElement)("comment");N.appendChild((0,t.module$exports$Blockly$utils$xml.createTextNode)(d)),N.setAttribute("pinned",w),N.setAttribute("h",T.height),N.setAttribute("w",T.width),u.appendChild(N)}for(n.data&&(d=(0,t.module$exports$Blockly$utils$xml.createElement)("data"),d.appendChild((0,t.module$exports$Blockly$utils$xml.createTextNode)(n.data)),u.appendChild(d)),d=0;d<n.inputList.length;d++)if(T=n.inputList[d],w=void 0,N=!0,T.type!==t.module$exports$Blockly$inputTypes.inputTypes.DUMMY){var J=T.connection.targetBlock();T.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE?w=(0,t.module$exports$Blockly$utils$xml.createElement)("value"):T.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&(w=(0,t.module$exports$Blockly$utils$xml.createElement)("statement"));var ve=T.connection.getShadowDom();!ve||J&&J.isShadow()||w.appendChild(Pt(ve,s)),J&&(J=(0,t.module$exports$Blockly$Xml.blockToDom)(J,s),J.nodeType===S.NodeType.ELEMENT_NODE&&(w.appendChild(J),N=!1)),w.setAttribute("name",T.name),N||u.appendChild(w)}if(n.inputsInline!==void 0&&n.inputsInline!==n.inputsInlineDefault&&u.setAttribute("inline",n.inputsInline),n.isCollapsed()&&u.setAttribute("collapsed",!0),n.isEnabled()||u.setAttribute("disabled",!0),n.isDeletable()||n.isShadow()||u.setAttribute("deletable",!1),n.isMovable()||n.isShadow()||u.setAttribute("movable",!1),n.isEditable()||u.setAttribute("editable",!1),d=n.getNextBlock(),d&&(T=(0,t.module$exports$Blockly$Xml.blockToDom)(d,s),T.nodeType===S.NodeType.ELEMENT_NODE)){var He=(0,t.module$exports$Blockly$utils$xml.createElement)("next");He.appendChild(T),u.appendChild(He)}return n=n.nextConnection&&n.nextConnection.getShadowDom(),!n||d&&d.isShadow()||He.appendChild(Pt(n,s)),u};var Pt=function(n,s){for(var u=n=n.cloneNode(!0),d;u;)if(s&&u.nodeName==="shadow"&&u.removeAttribute("id"),u.firstChild)u=u.firstChild;else{for(;u&&!u.nextSibling;)d=u,u=u.parentNode,d.nodeType===S.NodeType.TEXT_NODE&&d.data.trim()===""&&u.firstChild!==d&&(0,S.removeNode)(d);u&&(d=u,u=u.nextSibling,d.nodeType===S.NodeType.TEXT_NODE&&d.data.trim()===""&&(0,S.removeNode)(d))}return n};t.module$exports$Blockly$Xml.domToText=function(n){return(0,t.module$exports$Blockly$utils$xml.domToText)(n).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.module$exports$Blockly$Xml.domToPrettyText=function(n){n=(0,t.module$exports$Blockly$Xml.domToText)(n).split("<");for(var s="",u=1;u<n.length;u++){var d=n[u];d[0]==="/"&&(s=s.substring(2)),n[u]=s+"<"+d,d[0]!=="/"&&d.slice(-2)!=="/>"&&(s+="  ")}return n=n.join(`
`),n=n.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),n.replace(/^\n/,"")},t.module$exports$Blockly$Xml.textToDom=function(n){var s=(0,t.module$exports$Blockly$utils$xml.textToDomDocument)(n);if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+n);return s.documentElement},t.module$exports$Blockly$Xml.clearWorkspaceAndLoadFromXml=function(n,s){return s.setResizesEnabled(!1),s.clear(),n=(0,t.module$exports$Blockly$Xml.domToWorkspace)(n,s),s.setResizesEnabled(!0),n},t.module$exports$Blockly$Xml.domToWorkspace=function(n,s){if(n instanceof vt.Workspace){var u=n;n=s,s=u,console.warn("Deprecated call to domToWorkspace, swap the arguments.")}var d;s.RTL&&(d=s.getWidth()),u=[],(0,S.startTextWidthCache)();var T=(0,B.getGroup)();T||(0,B.setGroup)(!0),s.setResizesEnabled&&s.setResizesEnabled(!1);var w=!0;try{for(var N=0,J=void 0;J=n.childNodes[N];N++){var ve=J.nodeName.toLowerCase(),He=J;if(ve==="block"||ve==="shadow"&&!(0,B.getRecordUndo)()){var Tt=(0,t.module$exports$Blockly$Xml.domToBlock)(He,s);u.push(Tt.id);var bt=He.hasAttribute("x")?parseInt(He.getAttribute("x"),10):10,Gt=He.hasAttribute("y")?parseInt(He.getAttribute("y"),10):10;isNaN(bt)||isNaN(Gt)||Tt.moveBy(s.RTL?d-bt:bt,Gt),w=!1}else{if(ve==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(ve==="comment")if(s.rendered){var Vn=kt.WorkspaceCommentSvg;Vn?Vn.fromXml(He,s,d):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment.")}else{var Kt=pn.WorkspaceComment;Kt?Kt.fromXml(He,s):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.")}else if(ve==="variables"){if(w)(0,t.module$exports$Blockly$Xml.domToVariables)(He,s);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");w=!1}}}}finally{T||(0,B.setGroup)(!1),(0,S.stopTextWidthCache)()}return s.setResizesEnabled&&s.setResizesEnabled(!0),(0,B.fire)(new((0,B.get)(B.FINISHED_LOADING))(s)),u},t.module$exports$Blockly$Xml.appendDomToWorkspace=function(n,s){var u;if(Object.prototype.hasOwnProperty.call(s,"scale")&&(u=s.getBlocksBoundingBox()),n=(0,t.module$exports$Blockly$Xml.domToWorkspace)(n,s),u&&u.top!==u.bottom){var d=u.bottom;u=s.RTL?u.right:u.left;for(var T=1/0,w=-1/0,N=1/0,J=0;J<n.length;J++){var ve=s.getBlockById(n[J]).getRelativeToSurfaceXY();ve.y<N&&(N=ve.y),ve.x<T&&(T=ve.x),ve.x>w&&(w=ve.x)}for(d=d-N+10,u=s.RTL?u-w:u-T,T=0;T<n.length;T++)s.getBlockById(n[T]).moveBy(u,d)}return n},t.module$exports$Blockly$Xml.domToBlock=function(n,s){if(n instanceof vt.Workspace){var u=n;n=s,s=u,console.warn("Deprecated call to domToBlock, swap the arguments.")}(0,B.disable)(),u=s.getAllVariables();try{var d=cs(n,s),T=d.getDescendants(!1);if(s.rendered){d.setConnectionTracking(!1);for(var w=T.length-1;0<=w;w--)T[w].initSvg();for(var N=T.length-1;0<=N;N--)T[N].render(!1);setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),d.updateDisabled(),s.resizeContents()}else for(var J=T.length-1;0<=J;J--)T[J].initModel()}finally{(0,B.enable)()}if((0,B.isEnabled)()){for(n=t.module$exports$Blockly$Variables.getAddedVariables(s,u),s=0;s<n.length;s++)T=n[s],(0,B.fire)(new((0,B.get)(B.VAR_CREATE))(T));(0,B.fire)(new((0,B.get)(B.CREATE))(d))}return d},t.module$exports$Blockly$Xml.domToVariables=function(n,s){for(var u=0;u<n.childNodes.length;u++){var d=n.childNodes[u];if(d.nodeType===S.NodeType.ELEMENT_NODE){var T=d.getAttribute("type"),w=d.getAttribute("id");s.createVariable(d.textContent,T,w)}}};var Xt=function(n){for(var s={mutation:[],comment:[],data:[],field:[],input:[],next:[]},u=0;u<n.childNodes.length;u++){var d=n.childNodes[u];if(d.nodeType!==S.NodeType.TEXT_NODE)switch(d.nodeName.toLowerCase()){case"mutation":s.mutation.push(d);break;case"comment":if(!Po){console.warn("Missing require for Comment, ignoring block comment.");break}s.comment.push(d);break;case"data":s.data.push(d);break;case"title":case"field":s.field.push(d);break;case"value":case"statement":s.input.push(d);break;case"next":s.next.push(d);break;default:console.warn("Ignoring unknown tag: "+d.nodeName)}}return s},nn=function(n,s){for(var u=!1,d=0;d<n.length;d++){var T=n[d];s.domToMutation&&(s.domToMutation(T),s.initSvg&&(u=!0))}return u},en=function(n,s){for(var u=0;u<n.length;u++){var d=n[u],T=d.textContent,w=d.getAttribute("pinned")==="true",N=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10),s.setCommentText(T),s.commentModel.pinned=w,isNaN(N)||isNaN(d)||(s.commentModel.size=new Me.Size(N,d)),w&&s.getCommentIcon&&!s.isInFlyout&&setTimeout(function(){s.getCommentIcon().setVisible(!0)},1)}},Dn=function(n,s){for(var u=0;u<n.length;u++)s.data=n[u].textContent},fn=function(n,s){for(var u=0;u<n.length;u++){var d=n[u],T=d.getAttribute("name");mn(s,T,d)}},xn=function(n){for(var s={childBlockElement:null,childShadowElement:null},u=0;u<n.childNodes.length;u++){var d=n.childNodes[u];d.nodeType===S.NodeType.ELEMENT_NODE&&(d.nodeName.toLowerCase()==="block"?s.childBlockElement=d:d.nodeName.toLowerCase()==="shadow"&&(s.childShadowElement=d))}return s},ro=function(n,s,u,d){for(var T=0;T<n.length;T++){var w=n[T],N=w.getAttribute("name"),J=u.getInput(N);if(!J){console.warn("Ignoring non-existent input "+N+" in block "+d);break}if(w=xn(w),w.childBlockElement){if(!J.connection)throw TypeError("Input connection does not exist.");cs(w.childBlockElement,s,J.connection,!1)}w.childShadowElement&&J.connection.setShadowDom(w.childShadowElement)}},Ui=function(n,s,u){for(var d=0;d<n.length;d++){var T=xn(n[d]);if(T.childBlockElement){if(!u.nextConnection)throw TypeError("Next statement does not exist.");if(u.nextConnection.isConnected())throw TypeError("Next statement is already connected.");cs(T.childBlockElement,s,u.nextConnection,!0)}T.childShadowElement&&u.nextConnection&&u.nextConnection.setShadowDom(T.childShadowElement)}},cs=function(n,s,u,d){var T=n.getAttribute("type");if(!T)throw TypeError("Block type unspecified: "+n.outerHTML);var w=n.getAttribute("id");w=s.newBlock(T,w);var N=Xt(n),J=nn(N.mutation,w);if(en(N.comment,w),Dn(N.data,w),u)if(d)if(w.previousConnection)u.connect(w.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(w.outputConnection)u.connect(w.outputConnection);else if(w.previousConnection)u.connect(w.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(fn(N.field,w),ro(N.input,s,w,T),Ui(N.next,s,w),J&&w.initSvg(),(s=n.getAttribute("inline"))&&w.setInputsInline(s==="true"),(s=n.getAttribute("disabled"))&&w.setEnabled(s!=="true"&&s!=="disabled"),(s=n.getAttribute("deletable"))&&w.setDeletable(s==="true"),(s=n.getAttribute("movable"))&&w.setMovable(s==="true"),(s=n.getAttribute("editable"))&&w.setEditable(s==="true"),(s=n.getAttribute("collapsed"))&&w.setCollapsed(s==="true"),n.nodeName.toLowerCase()==="shadow"){for(n=w.getChildren(!1),s=0;s<n.length;s++)if(!n[s].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(w.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");w.setShadow(!0)}return w},mn=function(n,s,u){var d=n.getField(s);d?d.fromXml(u):console.warn("Ignoring non-existent field "+s+" in block "+n.type)};t.module$exports$Blockly$Xml.deleteNext=function(n){for(var s=0;s<n.childNodes.length;s++){var u=n.childNodes[s];if(u.nodeName.toLowerCase()==="next"){n.removeChild(u);break}}};var at={},zn="categoryToolbox",Wo="flyoutToolbox";at.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},at.convertToolboxDefToJson=function(n){return n?((n instanceof Element||typeof n=="string")&&(n=(0,at.parseToolboxTree)(n),n=wn(n)),Pn(n),n):null};var Pn=function(n){var s=n.kind;if(n=n.contents,s&&s!==Wo&&s!==zn)throw Error("Invalid toolbox kind "+s+". Please supply either "+Wo+" or "+zn);if(!n)throw Error("Toolbox must have a contents attribute.")};at.convertFlyoutDefToJsonArray=function(n){return n?n.contents?n.contents:Array.isArray(n)&&0<n.length&&!n[0].nodeType?n:zo(n):[]},at.hasCategories=function(n){if(!n)return!1;var s=n.kind;return s?s===zn:!!n.contents.filter(function(u){return u.kind.toUpperCase()==="CATEGORY"}).length},at.isCategoryCollapsible=function(n){return n&&n.contents?!!n.contents.filter(function(s){return s.kind.toUpperCase()==="CATEGORY"}).length:!1};var wn=function(n){var s={contents:zo(n)};return n instanceof Node&&kn(n,s),s},zo=function(n){var s=[],u=n.childNodes;u||(u=n),n=0;for(var d;d=u[n];n++)if(d.tagName){var T={},w=d.tagName.toUpperCase();T.kind=w,w==="BLOCK"?T.blockxml=d:d.childNodes&&0<d.childNodes.length&&(T.contents=zo(d)),kn(d,T),s.push(T)}return s},kn=function(n,s){for(var u=0;u<n.attributes.length;u++){var d=n.attributes[u];-1<d.nodeName.indexOf("css-")?(s.cssconfig=s.cssconfig||{},s.cssconfig[d.nodeName.replace("css-","")]=d.value):s[d.nodeName]=d.value}};at.parseToolboxTree=function(n){if(n){if(typeof n!="string"&&(b.IE&&n.outerHTML?n=n.outerHTML:n instanceof Element||(n=null)),typeof n=="string"&&(n=(0,t.module$exports$Blockly$Xml.textToDom)(n),n.nodeName.toLowerCase()!=="xml"))throw TypeError("Toolbox should be an <xml> document.")}else n=null;return n},t.module$exports$Blockly$utils$object={inherits:function(n,s){n.superClass_=s.prototype,Object.setPrototypeOf(n,s),n.prototype=Object.create(s.prototype),n.prototype.constructor=n},mixin:function(n,s){for(var u in s)n[u]=s[u]},deepMerge:function(n,s){for(var u in s)n[u]=s[u]!==null&&typeof s[u]=="object"?(0,t.module$exports$Blockly$utils$object.deepMerge)(n[u]||Object.create(null),s[u]):s[u];return n},values:function(n){return Object.values?Object.values(n):Object.keys(n).map(function(s){return n[s]})}};var An={Theme:function(n,s,u,d){this.name=n,this.blockStyles=s||Object.create(null),this.categoryStyles=u||Object.create(null),this.componentStyles=d||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,(0,ue.register)(ue.Type.THEME,n,this)}};An.Theme.prototype.getClassName=function(){return this.name+"-theme"},An.Theme.prototype.setBlockStyle=function(n,s){this.blockStyles[n]=s},An.Theme.prototype.setCategoryStyle=function(n,s){this.categoryStyles[n]=s},An.Theme.prototype.getComponentStyle=function(n){return(n=this.componentStyles[n])&&typeof n=="string"&&this.getComponentStyle(n)?this.getComponentStyle(n):n?String(n):null},An.Theme.prototype.setComponentStyle=function(n,s){this.componentStyles[n]=s},An.Theme.prototype.setFontStyle=function(n){this.fontStyle=n},An.Theme.prototype.setStartHats=function(n){this.startHats=n},An.Theme.defineTheme=function(n,s){var u=new An.Theme(n),d=s.base;return d&&(typeof d=="string"&&(d=(0,ue.getObject)(ue.Type.THEME,d)),d instanceof An.Theme&&((0,t.module$exports$Blockly$utils$object.deepMerge)(u,d),u.name=n)),(0,t.module$exports$Blockly$utils$object.deepMerge)(u.blockStyles,s.blockStyles),(0,t.module$exports$Blockly$utils$object.deepMerge)(u.categoryStyles,s.categoryStyles),(0,t.module$exports$Blockly$utils$object.deepMerge)(u.componentStyles,s.componentStyles),(0,t.module$exports$Blockly$utils$object.deepMerge)(u.fontStyle,s.fontStyle),s.startHats!==null&&(u.startHats=s.startHats),u};var To={},au={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},_i={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}};To.Classic=new An.Theme("classic",au,_i);var mr={Options:function(n){var s=null,u=!1,d=!1,T=!1,w=!1,N=!1,J=!1,ve=!!n.readOnly;ve||(s=(0,at.convertToolboxDefToJson)(n.toolbox),u=(0,at.hasCategories)(s),d=n.trashcan,d===void 0&&(d=u),T=n.collapse,T===void 0&&(T=u),w=n.comments,w===void 0&&(w=u),N=n.disable,N===void 0&&(N=u),J=n.sounds,J===void 0&&(J=!0));var He=n.maxTrashcanContents;d?He===void 0&&(He=32):He=0;var Tt=!!n.rtl,bt=n.horizontalLayout;bt===void 0&&(bt=!1);var Gt=n.toolboxPosition;Gt=Gt!=="end",Gt=bt?Gt?at.Position.TOP:at.Position.BOTTOM:Gt===Tt?at.Position.RIGHT:at.Position.LEFT;var Vn=n.css;Vn===void 0&&(Vn=!0);var Kt="https://blockly-demo.appspot.com/static/media/";n.media?Kt=n.media:n.path&&(Kt=n.path+"media/");var Qi=n.oneBasedIndex===void 0?!0:!!n.oneBasedIndex,dC=n.renderer||"geras",s3=n.plugins||{};this.RTL=Tt,this.oneBasedIndex=Qi,this.collapse=T,this.comments=w,this.disable=N,this.readOnly=ve,this.maxBlocks=n.maxBlocks||1/0,this.maxInstances=n.maxInstances,this.pathToMedia=Kt,this.hasCategories=u,this.moveOptions=mr.Options.parseMoveOptions_(n,u),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=d,this.maxTrashcanContents=He,this.hasSounds=J,this.hasCss=Vn,this.horizontalLayout=bt,this.languageTree=s,this.gridOptions=mr.Options.parseGridOptions_(n),this.zoomOptions=mr.Options.parseZoomOptions_(n),this.toolboxPosition=Gt,this.theme=mr.Options.parseThemeOptions_(n),this.renderer=dC,this.rendererOverrides=n.rendererOverrides,this.gridPattern=null,this.parentWorkspace=n.parentWorkspace,this.plugins=s3}};mr.Options.parseMoveOptions_=function(n,s){var u=n.move||{},d={};return u.scrollbars===void 0&&n.scrollbars===void 0?d.scrollbars=s:typeof u.scrollbars=="object"?(d.scrollbars={},d.scrollbars.horizontal=!!u.scrollbars.horizontal,d.scrollbars.vertical=!!u.scrollbars.vertical,d.scrollbars.horizontal&&d.scrollbars.vertical?d.scrollbars=!0:d.scrollbars.horizontal||d.scrollbars.vertical||(d.scrollbars=!1)):d.scrollbars=!!u.scrollbars||!!n.scrollbars,d.wheel=d.scrollbars&&u.wheel!==void 0?!!u.wheel:typeof d.scrollbars=="object",d.drag=d.scrollbars?u.drag===void 0?!0:!!u.drag:!1,d},mr.Options.parseZoomOptions_=function(n){n=n.zoom||{};var s={};return s.controls=n.controls===void 0?!1:!!n.controls,s.wheel=n.wheel===void 0?!1:!!n.wheel,s.startScale=n.startScale===void 0?1:Number(n.startScale),s.maxScale=n.maxScale===void 0?3:Number(n.maxScale),s.minScale=n.minScale===void 0?.3:Number(n.minScale),s.scaleSpeed=n.scaleSpeed===void 0?1.2:Number(n.scaleSpeed),s.pinch=n.pinch===void 0?s.wheel||s.controls:!!n.pinch,s},mr.Options.parseGridOptions_=function(n){n=n.grid||{};var s={};return s.spacing=Number(n.spacing)||0,s.colour=n.colour||"#888",s.length=n.length===void 0?1:Number(n.length),s.snap=0<s.spacing&&!!n.snap,s},mr.Options.parseThemeOptions_=function(n){return n=n.theme||To.Classic,typeof n=="string"?(0,ue.getObject)(ue.Type.THEME,n):n instanceof An.Theme?n:An.Theme.defineTheme(n.name||"builtin"+(0,Ne.getNextUniqueId)(),n)};var _t={Scrollbar:function(n,s,u,d,T){this.workspace_=n,this.pair_=u||!1,this.horizontal_=s,this.margin_=T!==void 0?T:_t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(d),this.position=new W.Coordinate(0,0),n=_t.Scrollbar.scrollbarThickness,s?(this.svgBackground_.setAttribute("height",n),this.outerSvg_.setAttribute("height",n),this.svgHandle_.setAttribute("height",n-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",n),this.outerSvg_.setAttribute("width",n),this.svgHandle_.setAttribute("width",n-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=(0,A.conditionalBind)(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=(0,A.conditionalBind)(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)}};_t.Scrollbar.prototype.origin_=new W.Coordinate(0,0),_t.Scrollbar.prototype.startDragMouse_=0,_t.Scrollbar.prototype.scrollbarLength_=0,_t.Scrollbar.prototype.handleLength_=0,_t.Scrollbar.prototype.handlePosition_=0,_t.Scrollbar.prototype.isVisible_=!0,_t.Scrollbar.prototype.containerVisible_=!0,_t.Scrollbar.scrollbarThickness=15,m.TOUCH_ENABLED&&(_t.Scrollbar.scrollbarThickness=25),_t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,_t.Scrollbar.metricsAreEquivalent_=function(n,s){return n.viewWidth===s.viewWidth&&n.viewHeight===s.viewHeight&&n.viewLeft===s.viewLeft&&n.viewTop===s.viewTop&&n.absoluteTop===s.absoluteTop&&n.absoluteLeft===s.absoluteLeft&&n.scrollWidth===s.scrollWidth&&n.scrollHeight===s.scrollHeight&&n.scrollLeft===s.scrollLeft&&n.scrollTop===s.scrollTop},_t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),(0,A.unbind)(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,(0,A.unbind)(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,(0,S.removeNode)(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},_t.Scrollbar.prototype.constrainHandleLength_=function(n){return n=0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_)},_t.Scrollbar.prototype.setHandleLength_=function(n){this.handleLength_=n,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},_t.Scrollbar.prototype.constrainHandlePosition_=function(n){return n=0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_-this.handleLength_)},_t.Scrollbar.prototype.setHandlePosition=function(n){this.handlePosition_=n,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},_t.Scrollbar.prototype.setScrollbarLength_=function(n){this.scrollbarLength_=n,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},_t.Scrollbar.prototype.setPosition=function(n,s){this.position.x=n,this.position.y=s,(0,S.setCssTransform)(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},_t.Scrollbar.prototype.resize=function(n){!n&&(n=this.workspace_.getMetrics(),!n)||this.oldHostMetrics_&&_t.Scrollbar.metricsAreEquivalent_(n,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(n):this.resizeVertical_(n),this.oldHostMetrics_=n,this.updateMetrics_())},_t.Scrollbar.prototype.requiresViewResize_=function(n){return this.oldHostMetrics_?this.oldHostMetrics_.viewWidth!==n.viewWidth||this.oldHostMetrics_.viewHeight!==n.viewHeight||this.oldHostMetrics_.absoluteLeft!==n.absoluteLeft||this.oldHostMetrics_.absoluteTop!==n.absoluteTop:!0},_t.Scrollbar.prototype.resizeHorizontal_=function(n){this.requiresViewResize_(n)?this.resizeViewHorizontal(n):this.resizeContentHorizontal(n)},_t.Scrollbar.prototype.resizeViewHorizontal=function(n){var s=n.viewWidth-2*this.margin_;this.pair_&&(s-=_t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,s)),s=n.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(s+=_t.Scrollbar.scrollbarThickness),this.setPosition(s,n.absoluteTop+n.viewHeight-_t.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(n)},_t.Scrollbar.prototype.resizeContentHorizontal=function(n){if(n.viewWidth>=n.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var s=this.scrollbarLength_*n.viewWidth/n.scrollWidth;s=this.constrainHandleLength_(s),this.setHandleLength_(s),s=n.scrollWidth-n.viewWidth;var u=this.scrollbarLength_-this.handleLength_;n=(n.viewLeft-n.scrollLeft)/s*u,n=this.constrainHandlePosition_(n),this.setHandlePosition(n),this.ratio=u/s}},_t.Scrollbar.prototype.resizeVertical_=function(n){this.requiresViewResize_(n)?this.resizeViewVertical(n):this.resizeContentVertical(n)},_t.Scrollbar.prototype.resizeViewVertical=function(n){var s=n.viewHeight-2*this.margin_;this.pair_&&(s-=_t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,s)),this.setPosition(this.workspace_.RTL?n.absoluteLeft+this.margin_:n.absoluteLeft+n.viewWidth-_t.Scrollbar.scrollbarThickness-this.margin_,n.absoluteTop+this.margin_),this.resizeContentVertical(n)},_t.Scrollbar.prototype.resizeContentVertical=function(n){if(n.viewHeight>=n.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var s=this.scrollbarLength_*n.viewHeight/n.scrollHeight;s=this.constrainHandleLength_(s),this.setHandleLength_(s),s=n.scrollHeight-n.viewHeight;var u=this.scrollbarLength_-this.handleLength_;n=(n.viewTop-n.scrollTop)/s*u,n=this.constrainHandlePosition_(n),this.setHandlePosition(n),this.ratio=u/s}},_t.Scrollbar.prototype.createDom_=function(n){var s="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");n&&(s+=" "+n),this.outerSvg_=(0,S.createSvgElement)(ce.Svg.SVG,{class:s},null),this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{},this.outerSvg_),this.svgBackground_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),n=Math.floor((_t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyScrollbarHandle",rx:n,ry:n},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),(0,S.insertAfter)(this.outerSvg_,this.workspace_.getParentSvg())},_t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},_t.Scrollbar.prototype.setContainerVisible=function(n){var s=n!==this.containerVisible_;this.containerVisible_=n,s&&this.updateDisplay_()},_t.Scrollbar.prototype.setVisible=function(n){var s=n!==this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=n,s&&this.updateDisplay_()},_t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},_t.Scrollbar.prototype.onMouseDownBar_=function(n){if(this.workspace_.markFocused(),(0,m.clearTouchIdentifier)(),this.cleanUp_(),(0,A.isRightButton)(n))n.stopPropagation();else{var s=(0,A.mouseToSvg)(n,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());s=this.horizontal_?s.x:s.y;var u=(0,it.getInjectionDivXY)(this.svgHandle_);u=this.horizontal_?u.x:u.y;var d=this.handlePosition_,T=.95*this.handleLength_;s<=u?d-=T:s>=u+this.handleLength_&&(d+=T),this.setHandlePosition(this.constrainHandlePosition_(d)),this.updateMetrics_(),n.stopPropagation(),n.preventDefault()}},_t.Scrollbar.prototype.onMouseDownHandle_=function(n){this.workspace_.markFocused(),this.cleanUp_(),(0,A.isRightButton)(n)?n.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?n.clientX:n.clientY,_t.Scrollbar.onMouseUpWrapper_=(0,A.conditionalBind)(document,"mouseup",this,this.onMouseUpHandle_),_t.Scrollbar.onMouseMoveWrapper_=(0,A.conditionalBind)(document,"mousemove",this,this.onMouseMoveHandle_),n.stopPropagation(),n.preventDefault())},_t.Scrollbar.prototype.onMouseMoveHandle_=function(n){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?n.clientX:n.clientY)-this.startDragMouse_))),this.updateMetrics_()},_t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),(0,m.clearTouchIdentifier)(),this.cleanUp_()},_t.Scrollbar.prototype.cleanUp_=function(){this.workspace_.hideChaff(!0),_t.Scrollbar.onMouseUpWrapper_&&((0,A.unbind)(_t.Scrollbar.onMouseUpWrapper_),_t.Scrollbar.onMouseUpWrapper_=null),_t.Scrollbar.onMouseMoveWrapper_&&((0,A.unbind)(_t.Scrollbar.onMouseMoveWrapper_),_t.Scrollbar.onMouseMoveWrapper_=null)},_t.Scrollbar.prototype.getRatio_=function(){var n=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(n)&&(n=0),n},_t.Scrollbar.prototype.updateMetrics_=function(){var n=this.getRatio_(),s={};this.horizontal_?s.x=n:s.y=n,this.workspace_.setMetrics(s)},_t.Scrollbar.prototype.set=function(n,s){this.setHandlePosition(this.constrainHandlePosition_(n*this.ratio)),(s||s===void 0)&&this.updateMetrics_()},_t.Scrollbar.prototype.setOrigin=function(n,s){this.origin_=new W.Coordinate(n,s)};var $r={ScrollbarPair:function(n,s,u,d,T){this.workspace_=n,s=s===void 0?!0:s,u=u===void 0?!0:u;var w=s&&u;s&&(this.hScroll=new _t.Scrollbar(n,!0,w,d,T)),u&&(this.vScroll=new _t.Scrollbar(n,!1,w,d,T)),w&&(this.corner_=(0,S.createSvgElement)(ce.Svg.RECT,{height:_t.Scrollbar.scrollbarThickness,width:_t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),(0,S.insertAfter)(this.corner_,n.getBubbleCanvas())),this.oldHostMetrics_=null}};$r.ScrollbarPair.prototype.dispose=function(){(0,S.removeNode)(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},$r.ScrollbarPair.prototype.resize=function(){var n=this.workspace_.getMetrics();if(n){var s=!1,u=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===n.viewWidth&&this.oldHostMetrics_.viewHeight===n.viewHeight&&this.oldHostMetrics_.absoluteTop===n.absoluteTop&&this.oldHostMetrics_.absoluteLeft===n.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===n.scrollWidth&&this.oldHostMetrics_.viewLeft===n.viewLeft&&this.oldHostMetrics_.scrollLeft===n.scrollLeft||(s=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===n.scrollHeight&&this.oldHostMetrics_.viewTop===n.viewTop&&this.oldHostMetrics_.scrollTop===n.scrollTop||(u=!0)):u=s=!0,s||u){try{(0,B.disable)(),this.hScroll&&s&&this.hScroll.resize(n),this.vScroll&&u&&this.vScroll.resize(n)}finally{(0,B.enable)()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===n.viewWidth&&this.oldHostMetrics_.absoluteLeft===n.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight===n.viewHeight&&this.oldHostMetrics_.absoluteTop===n.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=n}},$r.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},$r.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},$r.ScrollbarPair.prototype.setOrigin=function(n,s){this.hScroll&&this.hScroll.setOrigin(n,s),this.vScroll&&this.vScroll.setOrigin(n,s)},$r.ScrollbarPair.prototype.set=function(n,s,u){this.hScroll&&this.hScroll.set(n,!1),this.vScroll&&this.vScroll.set(s,!1),(u||u===void 0)&&(n={},this.hScroll&&(n.x=this.hScroll.getRatio_()),this.vScroll&&(n.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(n))},$r.ScrollbarPair.prototype.setX=function(n){this.hScroll&&this.hScroll.set(n,!0)},$r.ScrollbarPair.prototype.setY=function(n){this.vScroll&&this.vScroll.set(n,!0)},$r.ScrollbarPair.prototype.setContainerVisible=function(n){this.hScroll&&this.hScroll.setContainerVisible(n),this.vScroll&&this.vScroll.setContainerVisible(n)},$r.ScrollbarPair.prototype.isVisible=function(){var n=!1;return this.hScroll&&(n=this.hScroll.isVisible()),this.vScroll&&(n=n||this.vScroll.isVisible()),n},$r.ScrollbarPair.prototype.resizeContent=function(n){this.hScroll&&this.hScroll.resizeContentHorizontal(n),this.vScroll&&this.vScroll.resizeContentVertical(n)},$r.ScrollbarPair.prototype.resizeView=function(n){this.hScroll&&this.hScroll.resizeViewHorizontal(n),this.vScroll&&this.vScroll.resizeViewVertical(n)};var dt={KeyCodes:{WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255}},Ct={ShortcutRegistry:function(){Ct.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)}};Ct.ShortcutRegistry.modifierKeys={Shift:dt.KeyCodes.SHIFT,Control:dt.KeyCodes.CTRL,Alt:dt.KeyCodes.ALT,Meta:dt.KeyCodes.META},Ct.ShortcutRegistry.prototype.register=function(n,s){if(this.registry_[n.name]&&!s)throw Error('Shortcut with name "'+n.name+'" already exists.');this.registry_[n.name]=n},Ct.ShortcutRegistry.prototype.unregister=function(n){return this.registry_[n]?(this.removeAllKeyMappings(n),delete this.registry_[n],!0):(console.warn('Keyboard shortcut with name "'+n+'" not found.'),!1)},Ct.ShortcutRegistry.prototype.addKeyMapping=function(n,s,u){n=String(n);var d=this.keyMap_[n];if(d&&!u)throw Error('Shortcut with name "'+s+'" collides with shortcuts '+d.toString());d&&u?d.unshift(s):this.keyMap_[n]=[s]},Ct.ShortcutRegistry.prototype.removeKeyMapping=function(n,s,u){var d=this.keyMap_[n];if(!d&&!u)return console.warn('No keyboard shortcut with name "'+s+'" registered with key code "'+n+'"'),!1;var T=d.indexOf(s);return-1<T?(d.splice(T,1),d.length===0&&delete this.keyMap_[n],!0):(u||console.warn('No keyboard shortcut with name "'+s+'" registered with key code "'+n+'"'),!1)},Ct.ShortcutRegistry.prototype.removeAllKeyMappings=function(n){for(var s in this.keyMap_)this.removeKeyMapping(s,n,!0)},Ct.ShortcutRegistry.prototype.setKeyMap=function(n){this.keyMap_=n},Ct.ShortcutRegistry.prototype.getKeyMap=function(){return(0,t.module$exports$Blockly$utils$object.deepMerge)(Object.create(null),this.keyMap_)},Ct.ShortcutRegistry.prototype.getRegistry=function(){return(0,t.module$exports$Blockly$utils$object.deepMerge)(Object.create(null),this.registry_)},Ct.ShortcutRegistry.prototype.onKeyDown=function(n,s){var u=this.serializeKeyEvent_(s);if(u=this.getShortcutNamesByKeyCode(u),!u)return!1;for(var d=0,T;T=u[d];d++)if(T=this.registry_[T],(!T.preconditionFn||T.preconditionFn(n))&&T.callback&&T.callback(n,s,T))return!0;return!1},Ct.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(n){return this.keyMap_[n]||[]},Ct.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(n){var s=[],u;for(u in this.keyMap_)-1<this.keyMap_[u].indexOf(n)&&s.push(u);return s},Ct.ShortcutRegistry.prototype.serializeKeyEvent_=function(n){var s="",u;for(u in Ct.ShortcutRegistry.modifierKeys)n.getModifierState(u)&&(s!==""&&(s+="+"),s+=u);return s!==""&&n.keyCode?s=s+"+"+n.keyCode:n.keyCode&&(s=n.keyCode.toString()),s},Ct.ShortcutRegistry.prototype.checkModifiers_=function(n){for(var s=(0,t.module$exports$Blockly$utils$object.values)(Ct.ShortcutRegistry.modifierKeys),u=0,d;d=n[u];u++)if(0>s.indexOf(d))throw Error(d+" is not a valid modifier key.")},Ct.ShortcutRegistry.prototype.createSerializedKey=function(n,s){var u="";if(s){this.checkModifiers_(s);for(var d in Ct.ShortcutRegistry.modifierKeys)-1<s.indexOf(Ct.ShortcutRegistry.modifierKeys[d])&&(u!==""&&(u+="+"),u+=d)}return u!==""&&n?u=u+"+"+n:n&&(u=n.toString()),u},new Ct.ShortcutRegistry;var Ms={WorkspaceDragSurfaceSvg:function(n){this.container_=n,this.createDom()}};Ms.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Ms.WorkspaceDragSurfaceSvg.prototype.container_=null,Ms.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=(0,S.createSvgElement)(ce.Svg.SVG,{xmlns:S.SVG_NS,"xmlns:html":S.HTML_NS,"xmlns:xlink":S.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},Ms.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(n,s){n=n.toFixed(0),s=s.toFixed(0),this.SVG_.style.display="block",(0,S.setCssTransform)(this.SVG_,"translate3d("+n+"px, "+s+"px, 0)")},Ms.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return(0,it.getRelativeXY)(this.SVG_)},Ms.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(n){if(!n)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var s=this.SVG_.childNodes[0],u=this.SVG_.childNodes[1];if(!(s&&u&&(0,S.hasClass)(s,"blocklyBlockCanvas")&&(0,S.hasClass)(u,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling_!==null?(0,S.insertAfter)(s,this.previousSibling_):n.insertBefore(s,n.firstChild),(0,S.insertAfter)(u,s),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");(0,S.setCssTransform)(this.SVG_,""),this.previousSibling_=null},Ms.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(n,s,u,d,T,w){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=u,n.setAttribute("transform","translate(0, 0) scale("+w+")"),s.setAttribute("transform","translate(0, 0) scale("+w+")"),this.SVG_.setAttribute("width",d),this.SVG_.setAttribute("height",T),this.SVG_.appendChild(n),this.SVG_.appendChild(s),this.SVG_.style.display="block"};var ir={},Nl=null;ir.copy=function(n){Nl=n.toCopyData()},ir.paste=function(){if(!Nl)return!1;var n=Nl.source;return n.isFlyout&&(n=n.targetWorkspace),Nl.typeCounts&&n.isCapacityAvailable(Nl.typeCounts)?((0,B.setGroup)(!0),n.paste(Nl.saveInfo),(0,B.setGroup)(!1),!0):!1},ir.duplicate=function(n){var s=Nl;(0,ir.copy)(n),n.workspace.paste(Nl.saveInfo),Nl=s};var Xo={MenuItem:function(n,s){this.content_=n,this.value_=s,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null}};Xo.MenuItem.prototype.createDom=function(){var n=document.createElement("div");n.id=(0,Ne.getNextUniqueId)(),this.element_=n,n.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var s=document.createElement("div");if(s.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var u=document.createElement("div");u.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",s.appendChild(u)}return u=this.content_,typeof this.content_=="string"&&(u=document.createTextNode(this.content_)),s.appendChild(u),n.appendChild(s),this.roleName_&&(0,Te.setRole)(n,this.roleName_),(0,Te.setState)(n,Te.State.SELECTED,this.checkable_&&this.checked_||!1),(0,Te.setState)(n,Te.State.DISABLED,!this.enabled_),n},Xo.MenuItem.prototype.dispose=function(){this.element_=null},Xo.MenuItem.prototype.getElement=function(){return this.element_},Xo.MenuItem.prototype.getId=function(){return this.element_.id},Xo.MenuItem.prototype.getValue=function(){return this.value_},Xo.MenuItem.prototype.setRightToLeft=function(n){this.rightToLeft_=n},Xo.MenuItem.prototype.setRole=function(n){this.roleName_=n},Xo.MenuItem.prototype.setCheckable=function(n){this.checkable_=n},Xo.MenuItem.prototype.setChecked=function(n){this.checked_=n},Xo.MenuItem.prototype.setHighlighted=function(n){this.highlight_=n;var s=this.getElement();s&&this.isEnabled()&&(n?((0,S.addClass)(s,"blocklyMenuItemHighlight"),(0,S.addClass)(s,"goog-menuitem-highlight")):((0,S.removeClass)(s,"blocklyMenuItemHighlight"),(0,S.removeClass)(s,"goog-menuitem-highlight")))},Xo.MenuItem.prototype.isEnabled=function(){return this.enabled_},Xo.MenuItem.prototype.setEnabled=function(n){this.enabled_=n},Xo.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},Xo.MenuItem.prototype.onAction=function(n,s){this.actionHandler_=n.bind(s)};var Vt={Menu:function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null}};Vt.Menu.prototype.addChild=function(n){this.menuItems_.push(n)},Vt.Menu.prototype.render=function(n){var s=document.createElement("div");s.className="blocklyMenu goog-menu blocklyNonSelectable",s.tabIndex=0,this.roleName_&&(0,Te.setRole)(s,this.roleName_),this.element_=s;for(var u=0,d;d=this.menuItems_[u];u++)s.appendChild(d.createDom());this.mouseOverHandler_=(0,A.conditionalBind)(s,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=(0,A.conditionalBind)(s,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=(0,A.conditionalBind)(s,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=(0,A.conditionalBind)(s,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=(0,A.conditionalBind)(s,"keydown",this,this.handleKeyEvent_),n.appendChild(s)},Vt.Menu.prototype.getElement=function(){return this.element_},Vt.Menu.prototype.focus=function(){var n=this.getElement();n&&(n.focus({preventScroll:!0}),(0,S.addClass)(n,"blocklyFocused"))},Vt.Menu.prototype.blur_=function(){var n=this.getElement();n&&(n.blur(),(0,S.removeClass)(n,"blocklyFocused"))},Vt.Menu.prototype.setRole=function(n){this.roleName_=n},Vt.Menu.prototype.dispose=function(){this.mouseOverHandler_&&((0,A.unbind)(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&((0,A.unbind)(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&((0,A.unbind)(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&((0,A.unbind)(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&((0,A.unbind)(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n=0,s;s=this.menuItems_[n];n++)s.dispose();this.element_=null},Vt.Menu.prototype.getMenuItem_=function(n){for(var s=this.getElement();n&&n!==s;){if((0,S.hasClass)(n,"blocklyMenuItem")){for(var u=0,d;d=this.menuItems_[u];u++)if(d.getElement()===n)return d}n=n.parentElement}return null},Vt.Menu.prototype.setHighlighted=function(n){var s=this.highlightedItem_;s&&(s.setHighlighted(!1),this.highlightedItem_=null),n&&(n.setHighlighted(!0),this.highlightedItem_=n,s=this.getElement(),(0,we.scrollIntoContainerView)(n.getElement(),s),(0,Te.setState)(s,Te.State.ACTIVEDESCENDANT,n.getId()))},Vt.Menu.prototype.highlightNext=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(n,1)},Vt.Menu.prototype.highlightPrevious=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>n?this.menuItems_.length:n,-1)},Vt.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},Vt.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},Vt.Menu.prototype.highlightHelper_=function(n,s){n+=s;for(var u;u=this.menuItems_[n];){if(u.isEnabled()){this.setHighlighted(u);break}n+=s}},Vt.Menu.prototype.handleMouseOver_=function(n){(n=this.getMenuItem_(n.target))&&(n.isEnabled()?this.highlightedItem_!==n&&this.setHighlighted(n):this.setHighlighted(null))},Vt.Menu.prototype.handleClick_=function(n){var s=this.openingCoords;if(this.openingCoords=null,s&&typeof n.clientX=="number"){var u=new W.Coordinate(n.clientX,n.clientY);if(1>W.Coordinate.distance(s,u))return}(n=this.getMenuItem_(n.target))&&n.performAction()},Vt.Menu.prototype.handleMouseEnter_=function(n){this.focus()},Vt.Menu.prototype.handleMouseLeave_=function(n){this.getElement()&&(this.blur_(),this.setHighlighted(null))},Vt.Menu.prototype.handleKeyEvent_=function(n){if(this.menuItems_.length&&!(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)){var s=this.highlightedItem_;switch(n.keyCode){case dt.KeyCodes.ENTER:case dt.KeyCodes.SPACE:s&&s.performAction();break;case dt.KeyCodes.UP:this.highlightPrevious();break;case dt.KeyCodes.DOWN:this.highlightNext();break;case dt.KeyCodes.PAGE_UP:case dt.KeyCodes.HOME:this.highlightFirst_();break;case dt.KeyCodes.PAGE_DOWN:case dt.KeyCodes.END:this.highlightLast_();break;default:return}n.preventDefault(),n.stopPropagation()}},Vt.Menu.prototype.getSize=function(){var n=this.getElement(),s=(0,we.getSize)(n);return s.height=n.scrollHeight,s};var $l={VARIABLES:100,BLOCKS:50},ig={register:function(n,s){(0,ue.register)(ue.Type.SERIALIZER,n,s)},unregister:function(n){(0,ue.unregister)(ue.Type.SERIALIZER,n)}},so={DeserializationError:function(){var n=Error.apply(this,arguments);this.message=n.message,"stack"in n&&(this.stack=n.stack)}};o.inherits(so.DeserializationError,Error),so.MissingBlockType=function(n){so.DeserializationError.call(this,"Expected to find a 'type' property, defining the block type"),this.state=n},o.inherits(so.MissingBlockType,so.DeserializationError),so.MissingConnection=function(n,s,u){so.DeserializationError.call(this,"The block "+s.toDevString()+" is missing a(n) "+n+`
connection`),this.block=s,this.state=u},o.inherits(so.MissingConnection,so.DeserializationError),so.BadConnectionCheck=function(n,s,u,d){so.DeserializationError.call(this,"The block "+u.toDevString()+` could not connect its
`+s+" to its parent, because: "+n),this.childBlock=u,this.childState=d},o.inherits(so.BadConnectionCheck,so.DeserializationError),so.RealChildOfShadow=function(n){so.DeserializationError.call(this,`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=n},o.inherits(so.RealChildOfShadow,so.DeserializationError);var ma={ISerializer:function(){}};ma.ISerializer.prototype.save=function(n){},ma.ISerializer.prototype.load=function(n,s){},ma.ISerializer.prototype.clear=function(n){};var jo={save:function(n,s){var u=s===void 0?{}:s;s=u.addCoordinates===void 0?!1:u.addCoordinates;var d=u.addInputBlocks===void 0?!0:u.addInputBlocks,T=u.addNextBlocks===void 0?!0:u.addNextBlocks;if(u=u.doFullSerialization===void 0?!0:u.doFullSerialization,n.isInsertionMarker())return null;var w={type:n.type,id:n.id};return s&&cu(n,w),fd(n,w),sg(n,w),md(n,w),ga(n,w,u),d&&tC(n,w,u),T&&nC(n,w,u),w}},fd=function(n,s){n.isCollapsed()&&(s.collapsed=!0),n.isEnabled()||(s.enabled=!1),n.inputsInline!==void 0&&n.inputsInline!==n.inputsInlineDefault&&(s.inline=n.inputsInline),n.data&&(s.data=n.data)},cu=function(n,s){var u=n.workspace;n=n.getRelativeToSurfaceXY(),s.x=Math.round(u.RTL?u.getWidth()-n.x:n.x),s.y=Math.round(n.y)},sg=function(n,s){n.saveExtraState?(n=n.saveExtraState(),n!==null&&(s.extraState=n)):n.mutationToDom&&(n=n.mutationToDom(),n!==null&&(s.extraState=(0,t.module$exports$Blockly$Xml.domToText)(n).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},md=function(n,s){n.getCommentText()&&(s.icons={comment:{text:n.getCommentText(),pinned:n.commentModel.pinned,height:Math.round(n.commentModel.size.height),width:Math.round(n.commentModel.size.width)}})},ga=function(n,s,u){for(var d=Object.create(null),T=0;T<n.inputList.length;T++)for(var w=n.inputList[T],N=0;N<w.fieldRow.length;N++){var J=w.fieldRow[N];J.isSerializable()&&(d[J.name]=J.saveState(u))}Object.keys(d).length&&(s.fields=d)},tC=function(n,s,u){for(var d=Object.create(null),T=0;T<n.inputList.length;T++){var w=n.inputList[T];if(w.type!==t.module$exports$Blockly$inputTypes.inputTypes.DUMMY){var N=Ov(w.connection,u);N&&(d[w.name]=N)}}Object.keys(d).length&&(s.inputs=d)},nC=function(n,s,u){n.nextConnection&&(n=Ov(n.nextConnection,u))&&(s.next=n)},Ov=function(n,s){var u=n.getShadowState(!0);if(n=n.targetBlock(),!u&&!n)return null;var d=Object.create(null);return u&&(d.shadow=u),n&&!n.isShadow()&&(d.block=(0,jo.save)(n,{doFullSerialization:s})),d};jo.append=function(n,s,u){return u=u===void 0?{}:u,(0,jo.appendInternal)(n,s,{recordUndo:u.recordUndo===void 0?!1:u.recordUndo})},jo.appendInternal=function(n,s,u){var d=u===void 0?{}:u;u=d.parentConnection===void 0?void 0:d.parentConnection;var T=d.isShadow===void 0?!1:d.isShadow,w=d.recordUndo===void 0?!1:d.recordUndo;d=(0,B.getRecordUndo)(),(0,B.setRecordUndo)(w),(w=(0,B.getGroup)())||(0,B.setGroup)(!0),(0,B.disable)();var N=Dv(n,s,{parentConnection:u,isShadow:T});return(0,B.enable)(),(0,B.fire)(new((0,B.get)(B.CREATE))(N)),(0,B.setGroup)(w),(0,B.setRecordUndo)(d),s.rendered&&setTimeout(function(){N.disposed||N.setConnectionTracking(!0)},1),N};var Dv=function(n,s,u){var d=u===void 0?{}:u;if(u=d.parentConnection===void 0?void 0:d.parentConnection,d=d.isShadow===void 0?!1:d.isShadow,!n.type)throw new so.MissingBlockType(n);var T=s.newBlock(n.type,n.id);return T.setShadow(d),lg(T,n),ag(T,n),oC(T,n),Lv(u,T,n),cg(T,n),rC(T,n),gd(T,n),Nv(T,n),$v(T,s.rendered),T},lg=function(n,s){var u=s.x===void 0?0:s.x;s=s.y===void 0?0:s.y;var d=n.workspace;u=d.RTL?d.getWidth()-u:u,n.moveBy(u,s)},ag=function(n,s){s.collapsed&&n.setCollapsed(!0),s.enabled===!1&&n.setEnabled(!1),s.inline!==void 0&&n.setInputsInline(s.inline),s.data!==void 0&&(n.data=s.data)},oC=function(n,s){s.extraState&&(n.loadExtraState?n.loadExtraState(s.extraState):n.domToMutation((0,t.module$exports$Blockly$Xml.textToDom)(s.extraState)))},Lv=function(n,s,u){if(n){if(n.getSourceBlock().isShadow()&&!s.isShadow())throw new so.RealChildOfShadow(u);if(n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE){var d=s.outputConnection;if(!d)throw new so.MissingConnection("output",s,u)}else if(d=s.previousConnection,!d)throw new so.MissingConnection("previous",s,u);if(!n.connect(d)){var T=s.workspace.connectionChecker;throw new so.BadConnectionCheck(T.getErrorMessage(T.canConnectWithReason(d,n,!1),d,n),n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE?"output connection":"previous connection",s,u)}}},cg=function(n,s){s.icons&&(s=s.icons.comment)&&(n.setCommentText(s.text),n.commentModel.pinned=s.pinned,n.commentModel.size=new Me.Size(s.width,s.height),s.pinned&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){return n.getCommentIcon().setVisible(!0)},1))},rC=function(n,s){if(s.fields)for(var u=Object.keys(s.fields),d=0;d<u.length;d++){var T=u[d],w=s.fields[T],N=n.getField(T);N?N.loadState(w):console.warn("Ignoring non-existant field "+T+" in block "+n.type)}},gd=function(n,s){if(s.inputs)for(var u=Object.keys(s.inputs),d=0;d<u.length;d++){var T=u[d],w=n.getInput(T);if(!w||!w.connection)throw new so.MissingConnection(T,n,s);ug(w.connection,s.inputs[T])}},Nv=function(n,s){if(s.next){if(!n.nextConnection)throw new so.MissingConnection("next",n,s);ug(n.nextConnection,s.next)}},ug=function(n,s){s.shadow&&n.setShadowState(s.shadow),s.block&&Dv(s.block,n.getSourceBlock().workspace,{parentConnection:n})},$v=function(n,s){s?(n.setConnectionTracking(!1),n.initSvg(),n.render(!1)):n.initModel()},Pv=jo.save,uu=function(){this.priority=$l.BLOCKS};uu.prototype.save=function(n){var s=[];n=o.makeIterator(n.getTopBlocks(!1));for(var u=n.next();!u.done;u=n.next())(u=Pv(u.value,{addCoordinates:!0,doFullSerialization:!1}))&&s.push(u);return s.length?{languageVersion:0,blocks:s}:null},uu.prototype.load=function(n,s){n=o.makeIterator(n.blocks);for(var u=n.next();!u.done;u=n.next())(0,jo.append)(u.value,s,{recordUndo:(0,B.getRecordUndo)()})},uu.prototype.clear=function(n){n=o.makeIterator(n.getTopBlocks(!1));for(var s=n.next();!s.done;s=n.next())s.value.dispose(!1)},(0,ig.register)("blocks",new uu);var us=function(){this.isBlank=null,this.workspaceId=void 0,this.group=(0,B.getGroup)(),this.recordUndo=(0,B.getRecordUndo)()};us.prototype.isUiEvent=!1,us.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),n},us.prototype.fromJson=function(n){this.isBlank=!1,this.group=n.group},us.prototype.isNull=function(){return!1},us.prototype.run=function(n){},us.prototype.getEventWorkspace_=function(){var n;if(this.workspaceId&&(n=vt.Workspace.getById(this.workspaceId)),!n)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return n};var sr={BlockBase:function(n){sr.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=typeof n=="undefined")?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id}};(0,t.module$exports$Blockly$utils$object.inherits)(sr.BlockBase,us),sr.BlockBase.prototype.toJson=function(){var n=sr.BlockBase.superClass_.toJson.call(this);return n.blockId=this.blockId,n},sr.BlockBase.prototype.fromJson=function(n){sr.BlockBase.superClass_.fromJson.call(this,n),this.blockId=n.blockId};var Hi={BlockCreate:function(n){Hi.BlockCreate.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),this.xml=(0,t.module$exports$Blockly$Xml.blockToDomWithXY)(n),this.ids=(0,B.getDescendantIds)(n),this.json=(0,jo.save)(n,{addCoordinates:!0}))}};(0,t.module$exports$Blockly$utils$object.inherits)(Hi.BlockCreate,sr.BlockBase),Hi.BlockCreate.prototype.type=B.CREATE,Hi.BlockCreate.prototype.toJson=function(){var n=Hi.BlockCreate.superClass_.toJson.call(this);return n.xml=(0,t.module$exports$Blockly$Xml.domToText)(this.xml),n.ids=this.ids,n.json=this.json,this.recordUndo||(n.recordUndo=this.recordUndo),n},Hi.BlockCreate.prototype.fromJson=function(n){Hi.BlockCreate.superClass_.fromJson.call(this,n),this.xml=(0,t.module$exports$Blockly$Xml.textToDom)(n.xml),this.ids=n.ids,this.json=n.json,n.recordUndo!==void 0&&(this.recordUndo=n.recordUndo)},Hi.BlockCreate.prototype.run=function(n){var s=this.getEventWorkspace_();if(n)(0,jo.append)(this.json,s);else for(n=0;n<this.ids.length;n++){var u=this.ids[n],d=s.getBlockById(u);d?d.dispose(!1):u===this.blockId&&console.warn("Can't uncreate non-existent block: "+u)}},(0,ue.register)(ue.Type.EVENT,B.CREATE,Hi.BlockCreate);var fc;t.module$exports$Blockly$ContextMenu={},fc=null,t.module$exports$Blockly$ContextMenu.getCurrentBlock=function(){return fc},t.module$exports$Blockly$ContextMenu.setCurrentBlock=function(n){fc=n},Object.defineProperties(t.module$exports$Blockly$ContextMenu,{currentBlock:{get:function(){return(0,l.warn)("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),(0,t.module$exports$Blockly$ContextMenu.getCurrentBlock)()},set:function(n){(0,l.warn)("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),(0,t.module$exports$Blockly$ContextMenu.setCurrentBlock)(n)}}});var Lh=null;t.module$exports$Blockly$ContextMenu.show=function(n,s,u){if((0,Q.show)(t.module$exports$Blockly$ContextMenu,u,t.module$exports$Blockly$ContextMenu.dispose),s.length){var d=kr(s,u);Lh=d,hu(d,n,u),setTimeout(function(){d.focus()},1),fc=null}else(0,t.module$exports$Blockly$ContextMenu.hide)()};var kr=function(n,s){var u=new Vt.Menu;u.setRole(Te.Role.MENU);for(var d=0;d<n.length;d++){var T=n[d],w=new Xo.MenuItem(T.text);w.setRightToLeft(s),w.setRole(Te.Role.MENUITEM),u.addChild(w),w.setEnabled(T.enabled),T.enabled&&w.onAction(function(N){(0,t.module$exports$Blockly$ContextMenu.hide)(),this.callback(this.scope)},T)}return u},hu=function(n,s,u){var d=(0,it.getViewportBBox)();s=new nt.Rect(s.clientY+d.top,s.clientY+d.top,s.clientX+d.left,s.clientX+d.left),Fv(n);var T=n.getSize();u&&(s.left+=T.width,s.right+=T.width,d.left+=T.width,d.right+=T.width),(0,Q.positionWithAnchor)(d,s,T,u),n.focus()},Fv=function(n){var s=(0,Q.getDiv)();if(!s)throw Error("Attempting to create a context menu when widget div is null");n.render(s),s=n.getElement(),(0,S.addClass)(s,"blocklyContextMenu"),(0,A.conditionalBind)(s,"contextmenu",null,Pl),n.focus()},Pl=function(n){n.preventDefault(),n.stopPropagation()};t.module$exports$Blockly$ContextMenu.hide=function(){(0,Q.hideIfOwner)(t.module$exports$Blockly$ContextMenu),fc=null},t.module$exports$Blockly$ContextMenu.dispose=function(){Lh&&(Lh.dispose(),Lh=null)},t.module$exports$Blockly$ContextMenu.callbackFactory=function(n,s){return function(){(0,B.disable)();try{var u=(0,t.module$exports$Blockly$Xml.domToBlock)(s,n.workspace),d=n.getRelativeToSurfaceXY();d.x=n.RTL?d.x-t.module$exports$Blockly$internalConstants.SNAP_RADIUS:d.x+t.module$exports$Blockly$internalConstants.SNAP_RADIUS,d.y+=2*t.module$exports$Blockly$internalConstants.SNAP_RADIUS,u.moveBy(d.x,d.y)}finally{(0,B.enable)()}(0,B.isEnabled)()&&!u.isShadow()&&(0,B.fire)(new((0,B.get)(B.CREATE))(u)),u.select()}},t.module$exports$Blockly$ContextMenu.commentDeleteOption=function(n){return{text:t.module$exports$Blockly$Msg.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){(0,B.setGroup)(!0),n.dispose(),(0,B.setGroup)(!1)}}},t.module$exports$Blockly$ContextMenu.commentDuplicateOption=function(n){return{text:t.module$exports$Blockly$Msg.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){(0,ir.duplicate)(n)}}},t.module$exports$Blockly$ContextMenu.workspaceCommentOption=function(n,s){var u=kt;if(!u)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var d={enabled:!b.IE};return d.text=t.module$exports$Blockly$Msg.Msg.ADD_COMMENT,d.callback=function(){var T=new u(n,t.module$exports$Blockly$Msg.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,u.DEFAULT_SIZE,u.DEFAULT_SIZE),w=n.getInjectionDiv().getBoundingClientRect();w=new W.Coordinate(s.clientX-w.left,s.clientY-w.top);var N=n.getOriginOffsetInPixels();w=W.Coordinate.difference(w,N),w.scale(1/n.scale),T.moveBy(w.x,w.y),n.rendered&&(T.initSvg(),T.render(),T.select())},d};var Ar={removeElem:function(n,s){return s=n.indexOf(s),s===-1?!1:(n.splice(s,1),!0)}},ko={},_d=!1;ko.isDebuggerEnabled=function(){return _d},ko.startDebugger=function(){_d=!0},ko.stopDebugger=function(){_d=!1};var ne={Types:{NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608}};ne.Types.LEFT_CORNER=ne.Types.LEFT_SQUARE_CORNER|ne.Types.LEFT_ROUND_CORNER,ne.Types.RIGHT_CORNER=ne.Types.RIGHT_SQUARE_CORNER|ne.Types.RIGHT_ROUND_CORNER,ne.Types.nextTypeValue_=16777216,ne.Types.getType=function(n){return Object.prototype.hasOwnProperty.call(ne.Types,n)||(ne.Types[n]=ne.Types.nextTypeValue_,ne.Types.nextTypeValue_<<=1),ne.Types[n]},ne.Types.isField=function(n){return n.type&ne.Types.FIELD},ne.Types.isHat=function(n){return n.type&ne.Types.HAT},ne.Types.isIcon=function(n){return n.type&ne.Types.ICON},ne.Types.isSpacer=function(n){return n.type&ne.Types.SPACER},ne.Types.isInRowSpacer=function(n){return n.type&ne.Types.IN_ROW_SPACER},ne.Types.isInput=function(n){return n.type&ne.Types.INPUT},ne.Types.isExternalInput=function(n){return n.type&ne.Types.EXTERNAL_VALUE_INPUT},ne.Types.isInlineInput=function(n){return n.type&ne.Types.INLINE_INPUT},ne.Types.isStatementInput=function(n){return n.type&ne.Types.STATEMENT_INPUT},ne.Types.isPreviousConnection=function(n){return n.type&ne.Types.PREVIOUS_CONNECTION},ne.Types.isNextConnection=function(n){return n.type&ne.Types.NEXT_CONNECTION},ne.Types.isPreviousOrNextConnection=function(n){return n.type&(ne.Types.PREVIOUS_CONNECTION|ne.Types.NEXT_CONNECTION)},ne.Types.isLeftRoundedCorner=function(n){return n.type&ne.Types.LEFT_ROUND_CORNER},ne.Types.isRightRoundedCorner=function(n){return n.type&ne.Types.RIGHT_ROUND_CORNER},ne.Types.isLeftSquareCorner=function(n){return n.type&ne.Types.LEFT_SQUARE_CORNER},ne.Types.isRightSquareCorner=function(n){return n.type&ne.Types.RIGHT_SQUARE_CORNER},ne.Types.isCorner=function(n){return n.type&ne.Types.CORNER},ne.Types.isJaggedEdge=function(n){return n.type&ne.Types.JAGGED_EDGE},ne.Types.isRow=function(n){return n.type&ne.Types.ROW},ne.Types.isBetweenRowSpacer=function(n){return n.type&ne.Types.BETWEEN_ROW_SPACER},ne.Types.isTopRow=function(n){return n.type&ne.Types.TOP_ROW},ne.Types.isBottomRow=function(n){return n.type&ne.Types.BOTTOM_ROW},ne.Types.isTopOrBottomRow=function(n){return n.type&(ne.Types.TOP_ROW|ne.Types.BOTTOM_ROW)},ne.Types.isInputRow=function(n){return n.type&ne.Types.INPUT_ROW};var Rs={Row:function(n){this.type=ne.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null}};Rs.Row.prototype.getLastInput=function(){for(var n=this.elements.length-1;0<=n;n--){var s=this.elements[n];if(ne.Types.isInput(s))return s}return null},Rs.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},Rs.Row.prototype.startsWithElemSpacer=function(){return!0},Rs.Row.prototype.endsWithElemSpacer=function(){return!0},Rs.Row.prototype.getFirstSpacer=function(){for(var n=0;n<this.elements.length;n++){var s=this.elements[n];if(ne.Types.isSpacer(s))return s}return null},Rs.Row.prototype.getLastSpacer=function(){for(var n=this.elements.length-1;0<=n;n--){var s=this.elements[n];if(ne.Types.isSpacer(s))return s}return null};var Oo={BottomRow:function(n){Oo.BottomRow.superClass_.constructor.call(this,n),this.type|=ne.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0}};(0,t.module$exports$Blockly$utils$object.inherits)(Oo.BottomRow,Rs.Row),Oo.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||!!n.getNextBlock()},Oo.BottomRow.prototype.hasRightSquareCorner=function(n){return!0},Oo.BottomRow.prototype.measure=function(){for(var n=0,s=0,u=0,d=0;d<this.elements.length;d++){var T=this.elements[d];s+=T.width,ne.Types.isSpacer(T)||(ne.Types.isNextConnection(T)?u=Math.max(u,T.height):n=Math.max(n,T.height))}this.width=Math.max(this.minWidth,s),this.height=Math.max(this.minHeight,n)+u,this.descenderHeight=u,this.widthWithConnectedBlocks=this.width},Oo.BottomRow.prototype.startsWithElemSpacer=function(){return!1},Oo.BottomRow.prototype.endsWithElemSpacer=function(){return!1};var cl={Measurable:function(n){this.height=this.width=0,this.type=ne.Types.NONE,this.centerline=this.xPos=0,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},ul={Connection:function(n,s){ul.Connection.superClass_.constructor.call(this,n),this.connectionModel=s,this.shape=this.constants_.shapeFor(s),this.isDynamicShape=!!this.shape.isDynamic,this.type|=ne.Types.CONNECTION}};(0,t.module$exports$Blockly$utils$object.inherits)(ul.Connection,cl.Measurable);var Sn={},Gi=.45;Sn.getHsvSaturation=function(){return Gi},Sn.setHsvSaturation=function(n){Gi=n};var pu=.65;Sn.getHsvValue=function(){return pu},Sn.setHsvValue=function(n){pu=n},Sn.parse=function(n){n=String(n).toLowerCase().trim();var s=Sn.names[n];if(s||(s=n.substring(0,2)==="0x"?"#"+n.substring(2):n,s=s[0]==="#"?s:"#"+s,/^#[0-9a-f]{6}$/.test(s)))return s;if(/^#[0-9a-f]{3}$/.test(s))return["#",s[1],s[1],s[2],s[2],s[3],s[3]].join("");var u=n.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return u&&(n=Number(u[1]),s=Number(u[2]),u=Number(u[3]),0<=n&&256>n&&0<=s&&256>s&&0<=u&&256>u)?(0,Sn.rgbToHex)(n,s,u):null},Sn.rgbToHex=function(n,s,u){return s=n<<16|s<<8|u,16>n?"#"+(16777216|s).toString(16).substr(1):"#"+s.toString(16)},Sn.hexToRgb=function(n){return n=(0,Sn.parse)(n),n?(n=parseInt(n.substr(1),16),[n>>16,n>>8&255,n&255]):[0,0,0]},Sn.hsvToHex=function(n,s,u){var d=0,T=0,w=0;if(s===0)w=T=d=u;else{var N=Math.floor(n/60),J=n/60-N;n=u*(1-s);var ve=u*(1-s*J);switch(s=u*(1-s*(1-J)),N){case 1:d=ve,T=u,w=n;break;case 2:d=n,T=u,w=s;break;case 3:d=n,T=ve,w=u;break;case 4:d=s,T=n,w=u;break;case 5:d=u,T=n,w=ve;break;case 6:case 0:d=u,T=s,w=n}}return(0,Sn.rgbToHex)(Math.floor(d),Math.floor(T),Math.floor(w))},Sn.blend=function(n,s,u){return n=(0,Sn.parse)(n),!n||(s=(0,Sn.parse)(s),!s)?null:(n=(0,Sn.hexToRgb)(n),s=(0,Sn.hexToRgb)(s),(0,Sn.rgbToHex)(Math.round(s[0]+u*(n[0]-s[0])),Math.round(s[1]+u*(n[1]-s[1])),Math.round(s[2]+u*(n[2]-s[2]))))},Sn.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Sn.hueToHex=function(n){return(0,Sn.hsvToHex)(n,Gi,255*pu)};var fe={point:function(n,s){return" "+n+","+s+" "},curve:function(n,s){return" "+n+s.join("")},moveTo:function(n,s){return" M "+n+","+s+" "},moveBy:function(n,s){return" m "+n+","+s+" "},lineTo:function(n,s){return" l "+n+","+s+" "},line:function(n){return" l"+n.join("")},lineOnAxis:function(n,s){return" "+n+" "+s+" "},arc:function(n,s,u,d){return n+" "+u+" "+u+" "+s+d}},qt={},du=function(n,s){var u=[],d=n.split("");d.push("");var T=0;n=[];for(var w=null,N=0;N<d.length;N++){var J=d[N];T===0?J==="%"?((T=n.join(""))&&u.push(T),n.length=0,T=1):n.push(J):T===1?J==="%"?(n.push(J),T=0):s&&"0"<=J&&"9">=J?(T=2,w=J,(J=n.join(""))&&u.push(J),n.length=0):J==="{"?T=3:(n.push("%",J),T=0):T===2?"0"<=J&&"9">=J?w+=J:(u.push(parseInt(w,10)),N--,T=0):T===3&&(J===""?(n.splice(0,0,"%{"),N--,T=0):J!=="}"?n.push(J):(T=n.join(""),/[A-Z]\w*/i.test(T)?(J=T.toUpperCase(),(J=(0,t.module$exports$Blockly$utils$string.startsWith)(J,"BKY_")?J.substring(4):null)&&J in t.module$exports$Blockly$Msg.Msg?(T=t.module$exports$Blockly$Msg.Msg[J],typeof T=="string"?Array.prototype.push.apply(u,du(T,s)):s?u.push(String(T)):u.push(T)):u.push("%{"+T+"}")):u.push("%{"+T+"}"),T=n.length=0))}for((s=n.join(""))&&u.push(s),d=[],w=n.length=0;w<u.length;w++)typeof u[w]=="string"?n.push(u[w]):((s=n.join(""))&&d.push(s),n.length=0,d.push(u[w]));return(s=n.join(""))&&d.push(s),n.length=0,d};qt.tokenizeInterpolation=function(n){return du(n,!0)},qt.replaceMessageReferences=function(n){return typeof n!="string"?n:(n=du(n,!1),n.length?String(n[0]):"")},qt.checkMessageReferences=function(n){for(var s=!0,u=t.module$exports$Blockly$Msg.Msg,d=n.match(/%{BKY_[A-Z]\w*}/ig),T=0;T<d.length;T++){var w=d[T].toUpperCase();u[w.slice(6,-1)]===void 0&&(console.warn("No message string for "+d[T]+" in "+n),s=!1)}return s},qt.parseBlockColour=function(n){var s=typeof n=="string"?(0,qt.replaceMessageReferences)(n):n,u=Number(s);if(!isNaN(u)&&0<=u&&360>=u)return{hue:u,hex:(0,Sn.hsvToHex)(u,(0,Sn.getHsvSaturation)(),255*(0,Sn.getHsvValue)())};if(u=(0,Sn.parse)(s))return{hue:null,hex:u};throw u='Invalid colour: "'+s+'"',n!==s&&(u+=' (from "'+n+'")'),Error(u)};var Fn={ConstantProvider:function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=(0,fe.moveBy)(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!b.IE&&!b.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}}};Fn.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},Fn.ConstantProvider.prototype.setTheme=function(n){this.blockStyles=Object.create(null);var s=n.blockStyles,u;for(u in s)this.blockStyles[u]=this.validatedBlockStyle_(s[u]);this.setDynamicProperties_(n)},Fn.ConstantProvider.prototype.setDynamicProperties_=function(n){this.setFontConstants_(n),this.setComponentConstants_(n),this.ADD_START_HATS=n.startHats!==null?n.startHats:this.ADD_START_HATS},Fn.ConstantProvider.prototype.setFontConstants_=function(n){this.FIELD_TEXT_FONTFAMILY=n.fontStyle&&n.fontStyle.family!==void 0?n.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=n.fontStyle&&n.fontStyle.weight!==void 0?n.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=n.fontStyle&&n.fontStyle.size!==void 0?n.fontStyle.size:this.FIELD_TEXT_FONTSIZE,n=(0,S.measureFontMetrics)("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=n.height,this.FIELD_TEXT_BASELINE=n.baseline},Fn.ConstantProvider.prototype.setComponentConstants_=function(n){this.CURSOR_COLOUR=n.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=n.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=n.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(n.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},Fn.ConstantProvider.prototype.getBlockStyleForColour=function(n){var s="auto_"+n;return this.blockStyles[s]||(this.blockStyles[s]=this.createBlockStyle_(n)),{style:this.blockStyles[s],name:s}},Fn.ConstantProvider.prototype.getBlockStyle=function(n){return this.blockStyles[n||""]||(n&&n.indexOf("auto_")===0?this.getBlockStyleForColour(n.substring(5)).style:this.createBlockStyle_("#000000"))},Fn.ConstantProvider.prototype.createBlockStyle_=function(n){return this.validatedBlockStyle_({colourPrimary:n})},Fn.ConstantProvider.prototype.validatedBlockStyle_=function(n){var s={};return n&&(0,t.module$exports$Blockly$utils$object.mixin)(s,n),n=(0,qt.parseBlockColour)(s.colourPrimary||"#000"),s.colourPrimary=n.hex,s.colourSecondary=s.colourSecondary?(0,qt.parseBlockColour)(s.colourSecondary).hex:this.generateSecondaryColour_(s.colourPrimary),s.colourTertiary=s.colourTertiary?(0,qt.parseBlockColour)(s.colourTertiary).hex:this.generateTertiaryColour_(s.colourPrimary),s.hat=s.hat||"",s},Fn.ConstantProvider.prototype.generateSecondaryColour_=function(n){return(0,Sn.blend)("#fff",n,.6)||n},Fn.ConstantProvider.prototype.generateTertiaryColour_=function(n){return(0,Sn.blend)("#fff",n,.3)||n},Fn.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&(0,S.removeNode)(this.embossFilter_),this.disabledPattern_&&(0,S.removeNode)(this.disabledPattern_),this.debugFilter_&&(0,S.removeNode)(this.debugFilter_),this.cssNode_=null},Fn.ConstantProvider.prototype.makeJaggedTeeth=function(){var n=this.JAGGED_TEETH_HEIGHT,s=this.JAGGED_TEETH_WIDTH,u=(0,fe.line)([(0,fe.point)(s,n/4),(0,fe.point)(2*-s,n/2),(0,fe.point)(s,n/4)]);return{height:n,width:s,path:u}},Fn.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,s=this.START_HAT_WIDTH,u=(0,fe.curve)("c",[(0,fe.point)(30,-n),(0,fe.point)(70,-n),(0,fe.point)(s,0)]);return{height:n,width:s,path:u}},Fn.ConstantProvider.prototype.makePuzzleTab=function(){function n(w){w=w?-1:1;var N=-w,J=u/2,ve=J+2.5,He=J+.5,Tt=(0,fe.point)(-s,w*J);return J=(0,fe.point)(s,w*J),(0,fe.curve)("c",[(0,fe.point)(0,w*ve),(0,fe.point)(-s,N*He),Tt])+(0,fe.curve)("s",[(0,fe.point)(s,2.5*N),J])}var s=this.TAB_WIDTH,u=this.TAB_HEIGHT,d=n(!0),T=n(!1);return{type:this.SHAPES.PUZZLE,width:s,height:u,pathDown:T,pathUp:d}},Fn.ConstantProvider.prototype.makeNotch=function(){function n(N){return(0,fe.line)([(0,fe.point)(N*d,u),(0,fe.point)(3*N,0),(0,fe.point)(N*d,-u)])}var s=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,d=(s-3)/2,T=n(1),w=n(-1);return{type:this.SHAPES.NOTCH,width:s,height:u,pathLeft:T,pathRight:w}},Fn.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS,s=(0,fe.arc)("a","0 0,0",n,(0,fe.point)(-n,n)),u=(0,fe.arc)("a","0 0,0",n,(0,fe.point)(n,n));return{width:n,height:n,pathTop:s,pathBottom:u}},Fn.ConstantProvider.prototype.makeOutsideCorners=function(){var n=this.CORNER_RADIUS,s=(0,fe.moveBy)(0,n)+(0,fe.arc)("a","0 0,1",n,(0,fe.point)(n,-n)),u=(0,fe.arc)("a","0 0,1",n,(0,fe.point)(n,n)),d=(0,fe.arc)("a","0 0,1",n,(0,fe.point)(-n,-n)),T=(0,fe.arc)("a","0 0,1",n,(0,fe.point)(-n,n));return{topLeft:s,topRight:u,bottomRight:T,bottomLeft:d,rightHeight:n}},Fn.ConstantProvider.prototype.shapeFor=function(n){switch(n.type){case t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:case t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:case t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},Fn.ConstantProvider.prototype.createDom=function(n,s,u){this.injectCSS_(s,u),this.defs_=(0,S.createSvgElement)(ce.Svg.DEFS,{},n),n=(0,S.createSvgElement)(ce.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),(0,S.createSvgElement)(ce.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),s=(0,S.createSvgElement)(ce.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),(0,S.createSvgElement)(ce.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},s),(0,S.createSvgElement)(ce.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),(0,S.createSvgElement)(ce.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=(0,S.createSvgElement)(ce.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),(0,S.createSvgElement)(ce.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),(0,S.createSvgElement)(ce.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,this.createDebugFilter()},Fn.ConstantProvider.prototype.createDebugFilter=function(){if(!this.debugFilter_){var n=(0,S.createSvgElement)(ce.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),s=(0,S.createSvgElement)(ce.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n);(0,S.createSvgElement)(ce.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},s),(0,S.createSvgElement)(ce.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},n),(0,S.createSvgElement)(ce.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.debugFilterId=n.id,this.debugFilter_=n}},Fn.ConstantProvider.prototype.injectCSS_=function(n,s){s=this.getCSS_(s),n="blockly-renderer-style-"+n,this.cssNode_=document.getElementById(n);var u=s.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=u:(s=document.createElement("style"),s.id=n,n=document.createTextNode(u),s.appendChild(n),document.head.insertBefore(s,document.head.firstChild),this.cssNode_=s)},Fn.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText, ",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect,",n+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text {","fill: #000;","}",n+" .blocklyFlyoutLabelText {","fill: #000;","}",n+" .blocklyText.blocklyBubbleText {","fill: #000;","}",n+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",n+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",n+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",n+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",n+" .blocklyReplaceable .blocklyPathLight,",n+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]};var ei={register:function(n,s){(0,ue.register)(ue.Type.FIELD,n,s)},unregister:function(n){(0,ue.unregister)(ue.Type.FIELD,n)},fromJson:function(n){var s=(0,ue.getObject)(ue.Type.FIELD,n.type);return s?s.fromJson(n):(console.warn("Blockly could not create a field of type "+n.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)}},hg={IASTNodeLocation:function(){}},Uv={IASTNodeLocationSvg:function(){}},fu={IASTNodeLocationWithBlock:function(){}},hs={IKeyboardAccessible:function(){}},_a={IRegistrable:function(){}},Pr={MarkerManager:function(n){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=n}};Pr.MarkerManager.LOCAL_MARKER="local_marker_1",Pr.MarkerManager.prototype.registerMarker=function(n,s){this.markers_[n]&&this.unregisterMarker(n),s.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,s)),this.setMarkerSvg(s.getDrawer().createDom()),this.markers_[n]=s},Pr.MarkerManager.prototype.unregisterMarker=function(n){var s=this.markers_[n];if(s)s.dispose(),delete this.markers_[n];else throw Error("Marker with ID "+n+" does not exist. Can only unregister markers that exist.")},Pr.MarkerManager.prototype.getCursor=function(){return this.cursor_},Pr.MarkerManager.prototype.getMarker=function(n){return this.markers_[n]||null},Pr.MarkerManager.prototype.setCursor=function(n){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=n)&&(n=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(n),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},Pr.MarkerManager.prototype.setCursorSvg=function(n){n?(this.workspace_.getBlockCanvas().appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},Pr.MarkerManager.prototype.setMarkerSvg=function(n){n?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(n,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(n)):this.markerSvg_=null},Pr.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},Pr.MarkerManager.prototype.dispose=function(){for(var n=Object.keys(this.markers_),s=0,u;u=n[s];s++)this.unregisterMarker(u);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)};var wr={BlockChange:function(n,s,u,d,T){wr.BlockChange.superClass_.constructor.call(this,n),n&&(this.element=typeof s=="undefined"?"":s,this.name=typeof u=="undefined"?"":u,this.oldValue=typeof d=="undefined"?"":d,this.newValue=typeof T=="undefined"?"":T)}};(0,t.module$exports$Blockly$utils$object.inherits)(wr.BlockChange,sr.BlockBase),wr.BlockChange.prototype.type=B.CHANGE,wr.BlockChange.prototype.toJson=function(){var n=wr.BlockChange.superClass_.toJson.call(this);return n.element=this.element,this.name&&(n.name=this.name),n.oldValue=this.oldValue,n.newValue=this.newValue,n},wr.BlockChange.prototype.fromJson=function(n){wr.BlockChange.superClass_.fromJson.call(this,n),this.element=n.element,this.name=n.name,this.oldValue=n.oldValue,this.newValue=n.newValue},wr.BlockChange.prototype.isNull=function(){return this.oldValue===this.newValue},wr.BlockChange.prototype.run=function(n){var s=this.getEventWorkspace_().getBlockById(this.blockId);if(s)switch(s.mutator&&s.mutator.setVisible(!1),n=n?this.newValue:this.oldValue,this.element){case"field":(s=s.getField(this.name))?s.setValue(n):console.warn("Can't set non-existent field: "+this.name);break;case"comment":s.setCommentText(n||null);break;case"collapsed":s.setCollapsed(!!n);break;case"disabled":s.setEnabled(!n);break;case"inline":s.setInputsInline(!!n);break;case"mutation":var u=wr.BlockChange.getExtraBlockState_(s);s.loadExtraState?s.loadExtraState(JSON.parse(n||"{}")):s.domToMutation&&s.domToMutation((0,t.module$exports$Blockly$Xml.textToDom)(n||"<mutation/>")),(0,B.fire)(new wr.BlockChange(s,"mutation",null,u,n));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},wr.BlockChange.getExtraBlockState_=function(n){return n.saveExtraState?(n=n.saveExtraState())?JSON.stringify(n):"":n.mutationToDom&&(n=n.mutationToDom())?(0,t.module$exports$Blockly$Xml.domToText)(n):""},(0,ue.register)(ue.Type.EVENT,B.CHANGE,wr.BlockChange);var gr={},hl=0,Nh=null;gr.disposeUiEffect=function(n){var s=n.workspace,u=n.getSvgRoot();s.getAudioManager().play("delete"),n=s.getSvgXY(u),u=u.cloneNode(!0),u.translateX_=n.x,u.translateY_=n.y,u.setAttribute("transform","translate("+n.x+","+n.y+")"),s.getParentSvg().appendChild(u),u.bBox_=u.getBBox(),mu(u,s.RTL,new Date,s.scale)};var mu=function(n,s,u,d){var T=(new Date-u)/150;1<T?(0,S.removeNode)(n):(n.setAttribute("transform","translate("+(n.translateX_+(s?-1:1)*n.bBox_.width*d/2*T)+","+(n.translateY_+n.bBox_.height*d*T)+") scale("+(1-T)*d+")"),setTimeout(mu,10,n,s,u,d))};gr.connectionUiEffect=function(n){var s=n.workspace,u=s.scale;if(s.getAudioManager().play("click"),!(1>u)){var d=s.getSvgXY(n.getSvgRoot());n.outputConnection?(d.x+=(n.RTL?3:-3)*u,d.y+=13*u):n.previousConnection&&(d.x+=(n.RTL?-23:23)*u,d.y+=3*u),n=(0,S.createSvgElement)(ce.Svg.CIRCLE,{cx:d.x,cy:d.y,r:0,fill:"none",stroke:"#888","stroke-width":10},s.getParentSvg()),pg(n,new Date,u)}};var pg=function(n,s,u){var d=(new Date-s)/150;1<d?(0,S.removeNode)(n):(n.setAttribute("r",25*d*u),n.style.opacity=1-d,hl=setTimeout(pg,10,n,s,u))};gr.disconnectUiEffect=function(n){if(n.workspace.getAudioManager().play("disconnect"),!(1>n.workspace.scale)){var s=n.getHeightWidth().height;s=Math.atan(10/s)/Math.PI*180,n.RTL||(s*=-1),dg(n.getSvgRoot(),s,new Date)}};var dg=function(n,s,u){var d=(new Date-u)/200;1<d?n.skew_="":(n.skew_="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*s)+")",Nh=n,hl=setTimeout(dg,10,n,s,u)),n.setAttribute("transform",n.translate_+n.skew_)};gr.disconnectUiStop=function(){if(Nh){clearTimeout(hl);var n=Nh;n.skew_="",n.setAttribute("transform",n.translate_),Nh=null}};var un={ComponentManager:function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)}};un.ComponentManager.prototype.addComponent=function(n,s){var u=n.component.id;if(!s&&this.componentData_[u])throw Error('Plugin "'+u+'" with capabilities "'+this.componentData_[u].capabilities+'" already added.');this.componentData_[u]=n,s=[];for(var d=0;d<n.capabilities.length;d++){var T=String(n.capabilities[d]).toLowerCase();s.push(T),this.capabilityToComponentIds_[T]===void 0?this.capabilityToComponentIds_[T]=[u]:this.capabilityToComponentIds_[T].push(u)}this.componentData_[u].capabilities=s},un.ComponentManager.prototype.removeComponent=function(n){var s=this.componentData_[n];if(s){for(var u=0;u<s.capabilities.length;u++){var d=String(s.capabilities[u]).toLowerCase();(0,Ar.removeElem)(this.capabilityToComponentIds_[d],n)}delete this.componentData_[n]}},un.ComponentManager.prototype.addCapability=function(n,s){if(!this.getComponent(n))throw Error('Cannot add capability, "'+s+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,s)?console.warn('Plugin "'+n+'already has capability "'+s+'"'):(s=String(s).toLowerCase(),this.componentData_[n].capabilities.push(s),this.capabilityToComponentIds_[s].push(n))},un.ComponentManager.prototype.removeCapability=function(n,s){if(!this.getComponent(n))throw Error('Cannot remove capability, "'+s+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,s)?(s=String(s).toLowerCase(),(0,Ar.removeElem)(this.componentData_[n].capabilities,s),(0,Ar.removeElem)(this.capabilityToComponentIds_[s],n)):console.warn('Plugin "'+n+`doesn't have capability "`+s+'" to remove')},un.ComponentManager.prototype.hasCapability=function(n,s){return s=String(s).toLowerCase(),this.componentData_[n].capabilities.indexOf(s)!==-1},un.ComponentManager.prototype.getComponent=function(n){return this.componentData_[n]&&this.componentData_[n].component},un.ComponentManager.prototype.getComponents=function(n,s){if(n=String(n).toLowerCase(),n=this.capabilityToComponentIds_[n],!n)return[];var u=[];if(s){var d=[],T=this.componentData_;n.forEach(function(N){d.push(T[N])}),d.sort(function(N,J){return N.weight-J.weight}),d.forEach(function(N){u.push(N.component)})}else{var w=this.componentData_;n.forEach(function(N){u.push(w[N].component)})}return u},un.ComponentManager.Capability=function(n){this.name_=n},un.ComponentManager.Capability.prototype.toString=function(){return this.name_},un.ComponentManager.Capability.POSITIONABLE=new un.ComponentManager.Capability("positionable"),un.ComponentManager.Capability.DRAG_TARGET=new un.ComponentManager.Capability("drag_target"),un.ComponentManager.Capability.DELETE_AREA=new un.ComponentManager.Capability("delete_area"),un.ComponentManager.Capability.AUTOHIDEABLE=new un.ComponentManager.Capability("autohideable");var yd={IContextMenu:function(){}},Hv={IDeletable:function(){}},Gv={IDraggable:function(){}},Vv={IBubble:function(){}},Ao={},$h=function(n,s){window.alert(n),s&&s()},gu=function(n,s){s(window.confirm(n))},Ph=function(n,s,u){u(window.prompt(n,s))};Ao.alert=function(n,s){$h(n,s)},Ao.setAlert=function(n){$h=n},Ao.confirm=function(n,s){gu(n,s)},Ao.setConfirm=function(n){gu=n},Ao.prompt=function(n,s,u){Ph(n,s,u)},Ao.setPrompt=function(n){Ph=n};var Bs={VarBase:function(n){Bs.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=typeof n=="undefined")?"":n.getId(),this.workspaceId=this.isBlank?"":n.workspace.id}};(0,t.module$exports$Blockly$utils$object.inherits)(Bs.VarBase,us),Bs.VarBase.prototype.toJson=function(){var n=Bs.VarBase.superClass_.toJson.call(this);return n.varId=this.varId,n},Bs.VarBase.prototype.fromJson=function(n){Bs.VarBase.superClass_.toJson.call(this),this.varId=n.varId};var Vi={VarCreate:function(n){Vi.VarCreate.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)}};(0,t.module$exports$Blockly$utils$object.inherits)(Vi.VarCreate,Bs.VarBase),Vi.VarCreate.prototype.type=B.VAR_CREATE,Vi.VarCreate.prototype.toJson=function(){var n=Vi.VarCreate.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},Vi.VarCreate.prototype.fromJson=function(n){Vi.VarCreate.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},Vi.VarCreate.prototype.run=function(n){var s=this.getEventWorkspace_();n?s.createVariable(this.varName,this.varType,this.varId):s.deleteVariableById(this.varId)},(0,ue.register)(ue.Type.EVENT,B.VAR_CREATE,Vi.VarCreate);var ya={VariableModel:function(n,s,u,d){this.workspace=n,this.name=s,this.type=u||"",this.id_=d||(0,Ne.genUid)(),(0,B.fire)(new((0,B.get)(B.VAR_CREATE))(this))}};ya.VariableModel.prototype.getId=function(){return this.id_},ya.VariableModel.compareByName=function(n,s){return n.name.localeCompare(s.name,void 0,{sensitivity:"base"})};var mc;t.module$exports$Blockly$Variables={CATEGORY_NAME:"VARIABLE",allUsedVarModels:function(n){var s=n.getAllBlocks(!1);n=Object.create(null);for(var u=0;u<s.length;u++){var d=s[u].getVarModels();if(d)for(var T=0;T<d.length;T++){var w=d[T],N=w.getId();N&&(n[N]=w)}}s=[];for(var J in n)s.push(n[J]);return s}},mc={},t.module$exports$Blockly$Variables.allDeveloperVariables=function(n){n=n.getAllBlocks(!1);for(var s=Object.create(null),u=0,d;d=n[u];u++){var T=d.getDeveloperVariables;if(!T&&d.getDeveloperVars&&(T=d.getDeveloperVars,mc[d.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+d.type+"')"),mc[d.type]=!0)),T)for(d=T(),T=0;T<d.length;T++)s[d[T]]=!0}return Object.keys(s)},t.module$exports$Blockly$Variables.flyoutCategory=function(n){var s=[],u=document.createElement("button");return u.setAttribute("text","%{BKY_NEW_VARIABLE}"),u.setAttribute("callbackKey","CREATE_VARIABLE"),n.registerButtonCallback("CREATE_VARIABLE",function(d){(0,t.module$exports$Blockly$Variables.createVariableButtonHandler)(d.getTargetWorkspace())}),s.push(u),n=(0,t.module$exports$Blockly$Variables.flyoutCategoryBlocks)(n),s=s.concat(n)},t.module$exports$Blockly$Variables.flyoutCategoryBlocks=function(n){n=n.getVariablesOfType("");var s=[];if(0<n.length){var u=n[n.length-1];if(t.module$exports$Blockly$blocks.Blocks.variables_set){var d=(0,t.module$exports$Blockly$utils$xml.createElement)("block");d.setAttribute("type","variables_set"),d.setAttribute("gap",t.module$exports$Blockly$blocks.Blocks.math_change?8:24),d.appendChild((0,t.module$exports$Blockly$Variables.generateVariableFieldDom)(u)),s.push(d)}if(t.module$exports$Blockly$blocks.Blocks.math_change&&(d=(0,t.module$exports$Blockly$utils$xml.createElement)("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",t.module$exports$Blockly$blocks.Blocks.variables_get?20:8),d.appendChild((0,t.module$exports$Blockly$Variables.generateVariableFieldDom)(u)),u=(0,t.module$exports$Blockly$Xml.textToDom)('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(u),s.push(d)),t.module$exports$Blockly$blocks.Blocks.variables_get)for(n.sort(ya.VariableModel.compareByName),u=0;d=n[u];u++){var T=(0,t.module$exports$Blockly$utils$xml.createElement)("block");T.setAttribute("type","variables_get"),T.setAttribute("gap",8),T.appendChild((0,t.module$exports$Blockly$Variables.generateVariableFieldDom)(d)),s.push(T)}}return s},t.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.module$exports$Blockly$Variables.generateUniqueName=function(n){return(0,t.module$exports$Blockly$Variables.generateUniqueNameFromOptions)(t.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS.charAt(0),n.getAllVariableNames())},t.module$exports$Blockly$Variables.generateUniqueNameFromOptions=function(n,s){if(!s.length)return n;for(var u=t.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS,d="",T=u.indexOf(n);;){for(var w=!1,N=0;N<s.length;N++)if(s[N].toLowerCase()===n){w=!0;break}if(!w)return n;T++,T===u.length&&(T=0,d=Number(d)+1),n=u.charAt(T)+d}},t.module$exports$Blockly$Variables.createVariableButtonHandler=function(n,s,u){var d=u||"",T=function(w){(0,t.module$exports$Blockly$Variables.promptName)(t.module$exports$Blockly$Msg.Msg.NEW_VARIABLE_TITLE,w,function(N){if(N){var J=(0,t.module$exports$Blockly$Variables.nameUsedWithAnyType)(N,n);if(J){if(J.type===d)var ve=t.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",J.name);else ve=t.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,ve=ve.replace("%1",J.name).replace("%2",J.type);(0,Ao.alert)(ve,function(){T(N)})}else n.createVariable(N,d),s&&s(N)}else s&&s(null)})};T("")},t.module$exports$Blockly$Variables.renameVariable=function(n,s,u){var d=function(T){var w=t.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE_TITLE.replace("%1",s.name);(0,t.module$exports$Blockly$Variables.promptName)(w,T,function(N){if(N){var J=ps(N,s.type,n);J?(J=t.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",J.name).replace("%2",J.type),(0,Ao.alert)(J,function(){d(N)})):(n.renameVariableById(s.getId(),N),u&&u(N))}else u&&u(null)})};d("")},t.module$exports$Blockly$Variables.promptName=function(n,s,u){(0,Ao.prompt)(n,s,function(d){d&&(d=d.replace(/[\s\xa0]+/g," ").trim(),d===t.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE||d===t.module$exports$Blockly$Msg.Msg.NEW_VARIABLE)&&(d=null),u(d)})};var ps=function(n,s,u){u=u.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var d=0,T;T=u[d];d++)if(T.name.toLowerCase()===n&&T.type!==s)return T;return null};t.module$exports$Blockly$Variables.nameUsedWithAnyType=function(n,s){s=s.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var u=0,d;d=s[u];u++)if(d.name.toLowerCase()===n)return d;return null},t.module$exports$Blockly$Variables.generateVariableFieldDom=function(n){var s=(0,t.module$exports$Blockly$utils$xml.createElement)("field");return s.setAttribute("name","VAR"),s.setAttribute("id",n.getId()),s.setAttribute("variabletype",n.type),n=(0,t.module$exports$Blockly$utils$xml.createTextNode)(n.name),s.appendChild(n),s},t.module$exports$Blockly$Variables.getOrCreateVariablePackage=function(n,s,u,d){var T=(0,t.module$exports$Blockly$Variables.getVariable)(n,s,u,d);return T||(T=Fh(n,s,u,d)),T},t.module$exports$Blockly$Variables.getVariable=function(n,s,u,d){var T=n.getPotentialVariableMap(),w=null;if(s&&(w=n.getVariableById(s),!w&&T&&(w=T.getVariableById(s)),w))return w;if(u){if(d===void 0)throw Error("Tried to look up a variable by name without a type");w=n.getVariable(u,d),!w&&T&&(w=T.getVariable(u,d))}return w};var Fh=function(n,s,u,d){var T=n.getPotentialVariableMap();return u||(u=t.module$exports$Blockly$Variables.generateUniqueName(n.isFlyout?n.targetWorkspace:n)),T?T.createVariable(u,d,s):n.createVariable(u,d,s)};t.module$exports$Blockly$Variables.getAddedVariables=function(n,s){n=n.getAllVariables();var u=[];if(s.length!==n.length)for(var d=0;d<n.length;d++){var T=n[d];s.indexOf(T)===-1&&u.push(T)}return u},t.module$exports$Blockly$Names={Names:function(n,s){if(this.variablePrefix_=s||"",this.reservedDict_=Object.create(null),n)for(n=n.split(","),s=0;s<n.length;s++)this.reservedDict_[n[s]]=!0;this.reset()},NameType:{DEVELOPER_VARIABLE:"DEVELOPER_VARIABLE",VARIABLE:"VARIABLE",PROCEDURE:"PROCEDURE"}},t.module$exports$Blockly$Names.Names.DEVELOPER_VARIABLE_TYPE=t.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE,t.module$exports$Blockly$Names.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.module$exports$Blockly$Names.Names.prototype.setVariableMap=function(n){this.variableMap_=n},t.module$exports$Blockly$Names.Names.prototype.getNameForUserVariable_=function(n){return this.variableMap_?(n=this.variableMap_.getVariableById(n))?n.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)},t.module$exports$Blockly$Names.Names.prototype.populateVariables=function(n){n=(0,t.module$exports$Blockly$Variables.allUsedVarModels)(n);for(var s=0;s<n.length;s++)this.getName(n[s].getId(),t.module$exports$Blockly$Names.NameType.VARIABLE)},t.module$exports$Blockly$Names.Names.prototype.populateProcedures=function(n){n=t.module$exports$Blockly$Procedures.allProcedures(n),n=n[0].concat(n[1]);for(var s=0;s<n.length;s++)this.getName(n[s][0],t.module$exports$Blockly$Names.NameType.PROCEDURE)},t.module$exports$Blockly$Names.Names.prototype.getName=function(n,s){var u=n;s===t.module$exports$Blockly$Names.NameType.VARIABLE&&(n=this.getNameForUserVariable_(n))&&(u=n),n=u.toLowerCase();var d=s===t.module$exports$Blockly$Names.NameType.VARIABLE||s===t.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE?this.variablePrefix_:"";s in this.db_||(this.db_[s]=Object.create(null));var T=this.db_[s];return n in T?d+T[n]:(s=this.getDistinctName(u,s),T[n]=s.substr(d.length),s)},t.module$exports$Blockly$Names.Names.prototype.getUserNames=function(n){return Object.keys(this.db_[n]||{})},t.module$exports$Blockly$Names.Names.prototype.getDistinctName=function(n,s){n=this.safeName_(n);for(var u="";this.dbReverse_[n+u]||n+u in this.reservedDict_;)u=u?u+1:2;return n+=u,this.dbReverse_[n]=!0,(s===t.module$exports$Blockly$Names.NameType.VARIABLE||s===t.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE?this.variablePrefix_:"")+n},t.module$exports$Blockly$Names.Names.prototype.safeName_=function(n){return n?(n=encodeURI(n.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(n[0])!==-1&&(n="my_"+n)):n=t.module$exports$Blockly$Msg.Msg.UNNAMED_KEY||"unnamed",n},t.module$exports$Blockly$Names.Names.equals=function(n,s){return n.toLowerCase()===s.toLowerCase()};var ti={VarDelete:function(n){ti.VarDelete.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)}};(0,t.module$exports$Blockly$utils$object.inherits)(ti.VarDelete,Bs.VarBase),ti.VarDelete.prototype.type=B.VAR_DELETE,ti.VarDelete.prototype.toJson=function(){var n=ti.VarDelete.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},ti.VarDelete.prototype.fromJson=function(n){ti.VarDelete.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},ti.VarDelete.prototype.run=function(n){var s=this.getEventWorkspace_();n?s.deleteVariableById(this.varId):s.createVariable(this.varName,this.varType,this.varId)},(0,ue.register)(ue.Type.EVENT,B.VAR_DELETE,ti.VarDelete);var lr={VarRename:function(n,s){lr.VarRename.superClass_.constructor.call(this,n),n&&(this.oldName=n.name,this.newName=typeof s=="undefined"?"":s)}};(0,t.module$exports$Blockly$utils$object.inherits)(lr.VarRename,Bs.VarBase),lr.VarRename.prototype.type=B.VAR_RENAME,lr.VarRename.prototype.toJson=function(){var n=lr.VarRename.superClass_.toJson.call(this);return n.oldName=this.oldName,n.newName=this.newName,n},lr.VarRename.prototype.fromJson=function(n){lr.VarRename.superClass_.fromJson.call(this,n),this.oldName=n.oldName,this.newName=n.newName},lr.VarRename.prototype.run=function(n){var s=this.getEventWorkspace_();n?s.renameVariableById(this.varId,this.newName):s.renameVariableById(this.varId,this.oldName)},(0,ue.register)(ue.Type.EVENT,B.VAR_RENAME,lr.VarRename);var Do={VariableMap:function(n){this.variableMap_=Object.create(null),this.workspace=n}};Do.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},Do.VariableMap.prototype.renameVariable=function(n,s){var u=this.getVariable(s,n.type),d=this.workspace.getAllBlocks(!1);(0,B.setGroup)(!0);try{u&&u.getId()!==n.getId()?this.renameVariableWithConflict_(n,s,u,d):this.renameVariableAndUses_(n,s,d)}finally{(0,B.setGroup)(!1)}},Do.VariableMap.prototype.renameVariableById=function(n,s){var u=this.getVariableById(n);if(!u)throw Error("Tried to rename a variable that didn't exist. ID: "+n);this.renameVariable(u,s)},Do.VariableMap.prototype.renameVariableAndUses_=function(n,s,u){for((0,B.fire)(new((0,B.get)(B.VAR_RENAME))(n,s)),n.name=s,s=0;s<u.length;s++)u[s].updateVarName(n)},Do.VariableMap.prototype.renameVariableWithConflict_=function(n,s,u,d){var T=n.type;for(s!==u.name&&this.renameVariableAndUses_(u,s,d),s=0;s<d.length;s++)d[s].renameVarById(n.getId(),u.getId());(0,B.fire)(new((0,B.get)(B.VAR_DELETE))(n)),(0,Ar.removeElem)(this.variableMap_[T],n)},Do.VariableMap.prototype.createVariable=function(n,s,u){var d=this.getVariable(n,s);if(d){if(u&&d.getId()!==u)throw Error('Variable "'+n+'" is already in use and its id is "'+d.getId()+'" which conflicts with the passed in id, "'+u+'".');return d}if(u&&this.getVariableById(u))throw Error('Variable id, "'+u+'", is already in use.');return d=u||(0,Ne.genUid)(),s=s||"",d=new ya.VariableModel(this.workspace,n,s,d),n=this.variableMap_[s]||[],n.push(d),delete this.variableMap_[s],this.variableMap_[s]=n,d},Do.VariableMap.prototype.deleteVariable=function(n){for(var s=n.getId(),u=this.variableMap_[n.type],d=0;d<u.length;d++)if(u[d].getId()===s){u.splice(d,1),(0,B.fire)(new((0,B.get)(B.VAR_DELETE))(n));break}},Do.VariableMap.prototype.deleteVariableById=function(n){var s=this.getVariableById(n);if(s){var u=s.name,d=this.getVariableUsesById(n);n=0;for(var T=void 0;T=d[n];n++)if(T.type==="procedures_defnoreturn"||T.type==="procedures_defreturn"){n=String(T.getFieldValue("NAME")),u=t.module$exports$Blockly$Msg.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",u).replace("%2",n),(0,Ao.alert)(u);return}var w=this;1<d.length?(u=t.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",u),(0,Ao.confirm)(u,function(N){N&&s&&w.deleteVariableInternal(s,d)})):w.deleteVariableInternal(s,d)}else console.warn("Can't delete non-existent variable: "+n)},Do.VariableMap.prototype.deleteVariableInternal=function(n,s){var u=(0,B.getGroup)();u||(0,B.setGroup)(!0);try{for(var d=0;d<s.length;d++)s[d].dispose(!0);this.deleteVariable(n)}finally{u||(0,B.setGroup)(!1)}},Do.VariableMap.prototype.getVariable=function(n,s){if(s=this.variableMap_[s||""]){for(var u=0,d;d=s[u];u++)if(t.module$exports$Blockly$Names.Names.equals(d.name,n))return d}return null},Do.VariableMap.prototype.getVariableById=function(n){for(var s=Object.keys(this.variableMap_),u=0;u<s.length;u++)for(var d=s[u],T=0,w;w=this.variableMap_[d][T];T++)if(w.getId()===n)return w;return null},Do.VariableMap.prototype.getVariablesOfType=function(n){return(n=this.variableMap_[n||""])?n.slice():[]},Do.VariableMap.prototype.getVariableTypes=function(n){var s={};(0,t.module$exports$Blockly$utils$object.mixin)(s,this.variableMap_),n&&n.getPotentialVariableMap()&&(0,t.module$exports$Blockly$utils$object.mixin)(s,n.getPotentialVariableMap().variableMap_),n=Object.keys(s),s=!1;for(var u=0;u<n.length;u++)n[u]===""&&(s=!0);return s||n.push(""),n},Do.VariableMap.prototype.getAllVariables=function(){var n=[],s;for(s in this.variableMap_)n=n.concat(this.variableMap_[s]);return n},Do.VariableMap.prototype.getAllVariableNames=function(){var n=[],s;for(s in this.variableMap_)for(var u=this.variableMap_[s],d=0,T;T=u[d];d++)n.push(T.name);return n},Do.VariableMap.prototype.getVariableUsesById=function(n){for(var s=[],u=this.workspace.getAllBlocks(!1),d=0;d<u.length;d++){var T=u[d].getVarModels();if(T)for(var w=0;w<T.length;w++)T[w].getId()===n&&s.push(u[d])}return s};var _r={BlockMove:function(n){_r.BlockMove.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),n=this.currentLocation_(),this.oldParentId=n.parentId,this.oldInputName=n.inputName,this.oldCoordinate=n.coordinate)}};(0,t.module$exports$Blockly$utils$object.inherits)(_r.BlockMove,sr.BlockBase),_r.BlockMove.prototype.type=B.MOVE,_r.BlockMove.prototype.toJson=function(){var n=_r.BlockMove.superClass_.toJson.call(this);return this.newParentId&&(n.newParentId=this.newParentId),this.newInputName&&(n.newInputName=this.newInputName),this.newCoordinate&&(n.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(n.recordUndo=this.recordUndo),n},_r.BlockMove.prototype.fromJson=function(n){if(_r.BlockMove.superClass_.fromJson.call(this,n),this.newParentId=n.newParentId,this.newInputName=n.newInputName,n.newCoordinate){var s=n.newCoordinate.split(",");this.newCoordinate=new W.Coordinate(Number(s[0]),Number(s[1]))}n.recordUndo!==void 0&&(this.recordUndo=n.recordUndo)},_r.BlockMove.prototype.recordNew=function(){var n=this.currentLocation_();this.newParentId=n.parentId,this.newInputName=n.inputName,this.newCoordinate=n.coordinate},_r.BlockMove.prototype.currentLocation_=function(){var n=this.getEventWorkspace_().getBlockById(this.blockId),s={},u=n.getParent();return u?(s.parentId=u.id,(n=u.getInputWithBlock(n))&&(s.inputName=n.name)):s.coordinate=n.getRelativeToSurfaceXY(),s},_r.BlockMove.prototype.isNull=function(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&W.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},_r.BlockMove.prototype.run=function(n){var s=this.getEventWorkspace_(),u=s.getBlockById(this.blockId);if(u){var d=n?this.newParentId:this.oldParentId,T=n?this.newInputName:this.oldInputName;if(n=n?this.newCoordinate:this.oldCoordinate,d){var w=s.getBlockById(d);if(!w){console.warn("Can't connect to non-existent block: "+d);return}}if(u.getParent()&&u.unplug(),n)T=u.getRelativeToSurfaceXY(),u.moveBy(n.x-T.x,n.y-T.y);else{if(s=u.outputConnection,(!s||u.previousConnection&&u.previousConnection.isConnected())&&(s=u.previousConnection),u=s.type,T){if(u=w.getInput(T))var N=u.connection}else u===t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&(N=w.nextConnection);N?s.connect(N):console.warn("Can't connect to non-existent input: "+T)}}else console.warn("Can't move non-existent block: "+this.blockId)},(0,ue.register)(ue.Type.EVENT,B.MOVE,_r.BlockMove);var pl={COLLAPSED_INPUT_NAME:"_TEMP_COLLAPSED_INPUT",COLLAPSED_FIELD_NAME:"_TEMP_COLLAPSED_FIELD"},ft={Connection:function(n,s){this.sourceBlock_=n,this.type=s}};ft.Connection.CAN_CONNECT=0,ft.Connection.REASON_SELF_CONNECTION=1,ft.Connection.REASON_WRONG_TYPE=2,ft.Connection.REASON_TARGET_NULL=3,ft.Connection.REASON_CHECKS_FAILED=4,ft.Connection.REASON_DIFFERENT_WORKSPACES=5,ft.Connection.REASON_SHADOW_PARENT=6,ft.Connection.REASON_DRAG_CHECKS_FAILED=7,ft.Connection.REASON_PREVIOUS_AND_OUTPUT=8,ft.Connection.prototype.targetConnection=null,ft.Connection.prototype.disposed=!1,ft.Connection.prototype.check_=null,ft.Connection.prototype.shadowDom_=null,ft.Connection.prototype.x=0,ft.Connection.prototype.y=0,ft.Connection.prototype.connect_=function(n){var s=t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,u=this.getSourceBlock(),d=n.getSourceBlock();if(n.isConnected()&&n.disconnect(),this.isConnected()){var T=this.stashShadowState_(),w=this.targetBlock();if(w.isShadow())w.dispose(!1);else{this.disconnect();var N=w}this.applyShadowState_(T)}var J;(0,B.isEnabled)()&&(J=new((0,B.get)(B.MOVE))(d)),wo(this,n),d.setParent(u),J&&(J.recordNew(),(0,B.fire)(J)),N&&(n=this.type===s?N.outputConnection:N.previousConnection,(d=ft.Connection.getConnectionForOrphanedConnection(d,n))?n.connect(d):n.onFailedConnect(this))},ft.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowStateInternal_();var n=this.targetBlock();n&&n.unplug()}this.disposed=!0},ft.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},ft.Connection.prototype.isSuperior=function(){return this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT},ft.Connection.prototype.isConnected=function(){return!!this.targetConnection},ft.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},ft.Connection.prototype.onFailedConnect=function(n){},ft.Connection.prototype.connect=function(n){if(this.targetConnection===n)return!0;if(this.getConnectionChecker().canConnect(this,n,!1)){var s=(0,B.getGroup)();s||(0,B.setGroup)(!0),this.isSuperior()?this.connect_(n):n.connect_(this),s||(0,B.setGroup)(!1)}return this.isConnected()};var wo=function(n,s){if(!n||!s)throw Error("Cannot connect null connections.");n.targetConnection=s,s.targetConnection=n},vd=function(n,s){var u=null;s=s.outputConnection;for(var d=s.getConnectionChecker(),T=0,w;w=n.inputList[T];T++)if((w=w.connection)&&d.canConnect(s,w,!1)){if(u)return null;u=w}return u},Fl=function(n,s){for(var u;u=vd(n,s);)if(n=u.targetBlock(),!n||n.isShadow())return u;return null};ft.Connection.getConnectionForOrphanedConnection=function(n,s){if(s.type===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE)return Fl(n,s.getSourceBlock());n=n.lastConnectionInStack(!0);var u=s.getConnectionChecker();return n&&u.canConnect(s,n,!1)?n:null},ft.Connection.prototype.disconnect=function(){var n=this.targetConnection;if(!n)throw Error("Source connection not connected.");if(n.targetConnection!==this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var s=this.sourceBlock_,u=n.getSourceBlock();n=this}else s=n.getSourceBlock(),u=this.sourceBlock_;var d=(0,B.getGroup)();d||(0,B.setGroup)(!0),this.disconnectInternal_(s,u),u.isShadow()||n.respawnShadow_(),d||(0,B.setGroup)(!1)},ft.Connection.prototype.disconnectInternal_=function(n,s){var u;(0,B.isEnabled)()&&(u=new((0,B.get)(B.MOVE))(s)),this.targetConnection=this.targetConnection.targetConnection=null,s.setParent(null),u&&(u.recordNew(),(0,B.fire)(u))},ft.Connection.prototype.respawnShadow_=function(){this.createShadowBlock_(!0)},ft.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},ft.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},ft.Connection.prototype.setCheck=function(n){return n?(Array.isArray(n)||(n=[n]),this.check_=n,this.onCheckChanged_()):this.check_=null,this},ft.Connection.prototype.getCheck=function(){return this.check_},ft.Connection.prototype.setShadowDom=function(n){this.setShadowStateInternal_({shadowDom:n})},ft.Connection.prototype.getShadowDom=function(n){return n&&this.targetBlock().isShadow()?(0,t.module$exports$Blockly$Xml.blockToDom)(this.targetBlock()):this.shadowDom_},ft.Connection.prototype.setShadowState=function(n){this.setShadowStateInternal_({shadowState:n})},ft.Connection.prototype.getShadowState=function(n){return n&&this.targetBlock()&&this.targetBlock().isShadow()?(0,jo.save)(this.targetBlock()):this.shadowState_},ft.Connection.prototype.neighbours=function(n){return[]},ft.Connection.prototype.getParentInput=function(){for(var n=null,s=this.sourceBlock_.inputList,u=0;u<s.length;u++)if(s[u].connection===this){n=s[u];break}return n},ft.Connection.prototype.toString=function(){var n=this.sourceBlock_;if(!n)return"Orphan Connection";if(n.outputConnection===this)var s="Output Connection of ";else if(n.previousConnection===this)s="Previous Connection of ";else if(n.nextConnection===this)s="Next Connection of ";else{s=null;for(var u=0,d;d=n.inputList[u];u++)if(d.connection===this){s=d;break}if(s)s='Input "'+s.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return s+n.toDevString()},ft.Connection.prototype.stashShadowState_=function(){var n=this.getShadowDom(!0),s=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:n,shadowState:s}},ft.Connection.prototype.applyShadowState_=function(n){var s=n.shadowState;this.shadowDom_=n.shadowDom,this.shadowState_=s},ft.Connection.prototype.setShadowStateInternal_=function(n){n=n===void 0?{}:n;var s=n.shadowState===void 0?null:n.shadowState;this.shadowDom_=n.shadowDom===void 0?null:n.shadowDom,this.shadowState_=s,(n=this.targetBlock())?n.isShadow()?(n.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(n=this.createShadowBlock_(!1),this.serializeShadow_(n),n&&n.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))},ft.Connection.prototype.createShadowBlock_=function(n){var s=this.getSourceBlock(),u=this.getShadowState(),d=this.getShadowDom();if(!s.workspace||!u&&!d)return null;if(u)return s=(0,jo.appendInternal)(u,s.workspace,{parentConnection:n?this:void 0,isShadow:!0,recordUndo:!1});if(d){if(s=(0,t.module$exports$Blockly$Xml.domToBlock)(d,s.workspace),n)if(this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE){if(!s.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(s.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT){if(!s.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(s.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return s}return null},ft.Connection.prototype.serializeShadow_=function(n){n&&(this.shadowDom_=(0,t.module$exports$Blockly$Xml.blockToDom)(n),this.shadowState_=(0,jo.save)(n))};var gc={IConnectionChecker:function(){}},yr={ConnectionChecker:function(){}};yr.ConnectionChecker.prototype.canConnect=function(n,s,u,d){return this.canConnectWithReason(n,s,u,d)===ft.Connection.CAN_CONNECT},yr.ConnectionChecker.prototype.canConnectWithReason=function(n,s,u,d){var T=this.doSafetyChecks(n,s);return T!==ft.Connection.CAN_CONNECT?T:this.doTypeChecks(n,s)?u&&!this.doDragChecks(n,s,d||0)?ft.Connection.REASON_DRAG_CHECKS_FAILED:ft.Connection.CAN_CONNECT:ft.Connection.REASON_CHECKS_FAILED},yr.ConnectionChecker.prototype.getErrorMessage=function(n,s,u){switch(n){case ft.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case ft.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case ft.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case ft.Connection.REASON_TARGET_NULL:return"Target connection is null.";case ft.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+(s+" expected "+s.getCheck()+", found "+u.getCheck());case ft.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case ft.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case ft.Connection.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}},yr.ConnectionChecker.prototype.doSafetyChecks=function(n,s){if(!n||!s)return ft.Connection.REASON_TARGET_NULL;if(n.isSuperior())var u=n.getSourceBlock(),d=s.getSourceBlock(),T=s;else d=n.getSourceBlock(),u=s.getSourceBlock(),T=n,n=s;return u===d?ft.Connection.REASON_SELF_CONNECTION:T.type!==t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[n.type]?ft.Connection.REASON_WRONG_TYPE:u.workspace!==d.workspace?ft.Connection.REASON_DIFFERENT_WORKSPACES:u.isShadow()&&!d.isShadow()?ft.Connection.REASON_SHADOW_PARENT:T.type===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE&&d.previousConnection&&d.previousConnection.isConnected()||T.type===t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&d.outputConnection&&d.outputConnection.isConnected()?ft.Connection.REASON_PREVIOUS_AND_OUTPUT:ft.Connection.CAN_CONNECT},yr.ConnectionChecker.prototype.doTypeChecks=function(n,s){if(n=n.getCheck(),s=s.getCheck(),!n||!s)return!0;for(var u=0;u<n.length;u++)if(s.indexOf(n[u])!==-1)return!0;return!1},yr.ConnectionChecker.prototype.doDragChecks=function(n,s,u){if(n.distanceFrom(s)>u||s.getSourceBlock().isInsertionMarker())return!1;switch(s.type){case t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(n,s);case t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:if(s.isConnected()&&!s.targetBlock().isInsertionMarker()||n.isConnected())return!1;break;case t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:if(s.isConnected()&&!s.targetBlock().isMovable()&&!s.targetBlock().isShadow())return!1;break;case t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:if(s.isConnected()&&!n.getSourceBlock().nextConnection&&!s.targetBlock().isShadow()&&s.targetBlock().nextConnection)return!1;break;default:return!1}return t.module$exports$Blockly$common.draggingConnections.indexOf(s)===-1},yr.ConnectionChecker.prototype.canConnectToPrevious_=function(n,s){return n.targetConnection||t.module$exports$Blockly$common.draggingConnections.indexOf(s)!==-1?!1:s.targetConnection?(n=s.targetBlock(),n.isInsertionMarker()?!n.getPreviousBlock():!1):!0},(0,ue.register)(ue.Type.CONNECTION_CHECKER,ue.DEFAULT,yr.ConnectionChecker);var vt={},_u=Object.create(null);vt.Workspace=function(n){this.id=(0,Ne.genUid)(),_u[this.id]=this,this.options=n||new mr.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new((0,ue.getClassFromOptions)(ue.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new Do.VariableMap(this),this.potentialVariableMap_=null},vt.Workspace.prototype.rendered=!1,vt.Workspace.prototype.isClearing=!1,vt.Workspace.prototype.MAX_UNDO=1024,vt.Workspace.prototype.connectionDBList=null,vt.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete _u[this.id]},vt.Workspace.SCAN_ANGLE=3,vt.Workspace.prototype.sortObjects_=function(n,s){return n=n.getRelativeToSurfaceXY(),s=s.getRelativeToSurfaceXY(),n.y+vt.Workspace.prototype.sortObjects_.offset*n.x-(s.y+vt.Workspace.prototype.sortObjects_.offset*s.x)},vt.Workspace.prototype.addTopBlock=function(n){this.topBlocks_.push(n)},vt.Workspace.prototype.removeTopBlock=function(n){if(!(0,Ar.removeElem)(this.topBlocks_,n))throw Error("Block not present in workspace's list of top-most blocks.")},vt.Workspace.prototype.getTopBlocks=function(n){var s=[].concat(this.topBlocks_);return n&&1<s.length&&(this.sortObjects_.offset=Math.sin((0,me.toRadians)(vt.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),s.sort(this.sortObjects_)),s},vt.Workspace.prototype.addTypedBlock=function(n){this.typedBlocksDB_[n.type]||(this.typedBlocksDB_[n.type]=[]),this.typedBlocksDB_[n.type].push(n)},vt.Workspace.prototype.removeTypedBlock=function(n){(0,Ar.removeElem)(this.typedBlocksDB_[n.type],n),this.typedBlocksDB_[n.type].length||delete this.typedBlocksDB_[n.type]},vt.Workspace.prototype.getBlocksByType=function(n,s){return this.typedBlocksDB_[n]?(n=this.typedBlocksDB_[n].slice(0),s&&1<n.length&&(this.sortObjects_.offset=Math.sin((0,me.toRadians)(vt.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n.filter(function(u){return!u.isInsertionMarker()})):[]},vt.Workspace.prototype.addTopComment=function(n){this.topComments_.push(n),this.commentDB_[n.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+n.id+'"'),this.commentDB_[n.id]=n},vt.Workspace.prototype.removeTopComment=function(n){if(!(0,Ar.removeElem)(this.topComments_,n))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[n.id]},vt.Workspace.prototype.getTopComments=function(n){var s=[].concat(this.topComments_);return n&&1<s.length&&(this.sortObjects_.offset=Math.sin((0,me.toRadians)(vt.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),s.sort(this.sortObjects_)),s},vt.Workspace.prototype.getAllBlocks=function(n){if(n){var s=this.getTopBlocks(!0);n=[];for(var u=0;u<s.length;u++)n.push.apply(n,s[u].getDescendants(!0))}else for(n=this.getTopBlocks(!1),s=0;s<n.length;s++)n.push.apply(n,n[s].getChildren(!1));return n.filter(function(d){return!d.isInsertionMarker()})},vt.Workspace.prototype.clear=function(){this.isClearing=!0;try{var n=(0,B.getGroup)();for(n||(0,B.setGroup)(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();n||(0,B.setGroup)(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},vt.Workspace.prototype.renameVariableById=function(n,s){this.variableMap_.renameVariableById(n,s)},vt.Workspace.prototype.createVariable=function(n,s,u){return this.variableMap_.createVariable(n,s,u)},vt.Workspace.prototype.getVariableUsesById=function(n){return this.variableMap_.getVariableUsesById(n)},vt.Workspace.prototype.deleteVariableById=function(n){this.variableMap_.deleteVariableById(n)},vt.Workspace.prototype.getVariable=function(n,s){return this.variableMap_.getVariable(n,s)},vt.Workspace.prototype.getVariableById=function(n){return this.variableMap_.getVariableById(n)},vt.Workspace.prototype.getVariablesOfType=function(n){return this.variableMap_.getVariablesOfType(n)},vt.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},vt.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},vt.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},vt.Workspace.prototype.getWidth=function(){return 0},vt.Workspace.prototype.newBlock=function(n,s){return new Je.Block(this,n,s)},vt.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},vt.Workspace.prototype.remainingCapacityOfType=function(n){return this.options.maxInstances?(this.options.maxInstances[n]!==void 0?this.options.maxInstances[n]:1/0)-this.getBlocksByType(n,!1).length:1/0},vt.Workspace.prototype.isCapacityAvailable=function(n){if(!this.hasBlockLimits())return!0;var s=0,u;for(u in n){if(n[u]>this.remainingCapacityOfType(u))return!1;s+=n[u]}return!(s>this.remainingCapacity())},vt.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances},vt.Workspace.prototype.getUndoStack=function(){return this.undoStack_},vt.Workspace.prototype.getRedoStack=function(){return this.redoStack_},vt.Workspace.prototype.undo=function(n){var s=n?this.redoStack_:this.undoStack_,u=n?this.undoStack_:this.redoStack_,d=s.pop();if(d){for(var T=[d];s.length&&d.group&&d.group===s[s.length-1].group;)T.push(s.pop());for(s=0;s<T.length;s++)u.push(T[s]);T=(0,B.filter)(T,n),(0,B.setRecordUndo)(!1);try{for(u=0;u<T.length;u++)T[u].run(n)}finally{(0,B.setRecordUndo)(!0)}}},vt.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,(0,B.clearPendingUndo)()},vt.Workspace.prototype.addChangeListener=function(n){return this.listeners_.push(n),n},vt.Workspace.prototype.removeChangeListener=function(n){(0,Ar.removeElem)(this.listeners_,n)},vt.Workspace.prototype.fireChangeListener=function(n){if(n.recordUndo)for(this.undoStack_.push(n),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var s=0;s<this.listeners_.length;s++)(0,this.listeners_[s])(n)},vt.Workspace.prototype.getBlockById=function(n){return this.blockDB_[n]||null},vt.Workspace.prototype.setBlockById=function(n,s){this.blockDB_[n]=s},vt.Workspace.prototype.removeBlockById=function(n){delete this.blockDB_[n]},vt.Workspace.prototype.getCommentById=function(n){return this.commentDB_[n]||null},vt.Workspace.prototype.allInputsFilled=function(n){for(var s=this.getTopBlocks(!1),u=0;u<s.length;u++)if(!s[u].allInputsFilled(n))return!1;return!0},vt.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},vt.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new Do.VariableMap(this)},vt.Workspace.prototype.getVariableMap=function(){return this.variableMap_},vt.Workspace.prototype.setVariableMap=function(n){this.variableMap_=n},vt.Workspace.getById=function(n){return _u[n]||null},vt.Workspace.getAll=function(){var n=[],s;for(s in _u)n.push(_u[s]);return n};var Qe={Bubble:function(n,s,u,d,T,w){this.workspace_=n,this.content_=s,this.shape_=u,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,u=Qe.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(u=-u),this.arrow_radians_=(0,me.toRadians)(u),n.getBubbleCanvas().appendChild(this.createDom_(s,!(!T||!w))),this.setAnchorLocation(d),T&&w||(n=this.content_.getBBox(),T=n.width+2*Qe.Bubble.BORDER_WIDTH,w=n.height+2*Qe.Bubble.BORDER_WIDTH),this.setBubbleSize(T,w),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0}};Qe.Bubble.BORDER_WIDTH=6,Qe.Bubble.ARROW_THICKNESS=5,Qe.Bubble.ARROW_ANGLE=20,Qe.Bubble.ARROW_BEND=4,Qe.Bubble.ANCHOR_RADIUS=8,Qe.Bubble.onMouseUpWrapper_=null,Qe.Bubble.onMouseMoveWrapper_=null,Qe.Bubble.unbindDragEvents_=function(){Qe.Bubble.onMouseUpWrapper_&&((0,A.unbind)(Qe.Bubble.onMouseUpWrapper_),Qe.Bubble.onMouseUpWrapper_=null),Qe.Bubble.onMouseMoveWrapper_&&((0,A.unbind)(Qe.Bubble.onMouseMoveWrapper_),Qe.Bubble.onMouseMoveWrapper_=null)},Qe.Bubble.bubbleMouseUp_=function(n){(0,m.clearTouchIdentifier)(),Qe.Bubble.unbindDragEvents_()},Qe.Bubble.prototype.rendered_=!1,Qe.Bubble.prototype.anchorXY_=null,Qe.Bubble.prototype.relativeLeft_=0,Qe.Bubble.prototype.relativeTop_=0,Qe.Bubble.prototype.width_=0,Qe.Bubble.prototype.height_=0,Qe.Bubble.prototype.autoLayout_=!0,Qe.Bubble.prototype.createDom_=function(n,s){this.bubbleGroup_=(0,S.createSvgElement)(ce.Svg.G,{},null);var u={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return b.JAVA_FX&&(u={}),u=(0,S.createSvgElement)(ce.Svg.G,u,this.bubbleGroup_),this.bubbleArrow_=(0,S.createSvgElement)(ce.Svg.PATH,{},u),this.bubbleBack_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Qe.Bubble.BORDER_WIDTH,ry:Qe.Bubble.BORDER_WIDTH},u),s?(this.resizeGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),s=2*Qe.Bubble.BORDER_WIDTH,(0,S.createSvgElement)(ce.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,s.toString())},this.resizeGroup_),(0,S.createSvgElement)(ce.Svg.LINE,{class:"blocklyResizeLine",x1:s/3,y1:s-1,x2:s-1,y2:s/3},this.resizeGroup_),(0,S.createSvgElement)(ce.Svg.LINE,{class:"blocklyResizeLine",x1:2*s/3,y1:s-1,x2:s-1,y2:2*s/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=(0,A.conditionalBind)(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=(0,A.conditionalBind)(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(n),this.bubbleGroup_},Qe.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},Qe.Bubble.prototype.setSvgId=function(n){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=n)},Qe.Bubble.prototype.bubbleMouseDown_=function(n){var s=this.workspace_.getGesture(n);s&&s.handleBubbleStart(n,this)},Qe.Bubble.prototype.showContextMenu=function(n){},Qe.Bubble.prototype.isDeletable=function(){return!1},Qe.Bubble.prototype.setDeleteStyle=function(n){},Qe.Bubble.prototype.resizeMouseDown_=function(n){this.promote(),Qe.Bubble.unbindDragEvents_(),(0,A.isRightButton)(n)||(this.workspace_.startDrag(n,new W.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),Qe.Bubble.onMouseUpWrapper_=(0,A.conditionalBind)(document,"mouseup",this,Qe.Bubble.bubbleMouseUp_),Qe.Bubble.onMouseMoveWrapper_=(0,A.conditionalBind)(document,"mousemove",this,this.resizeMouseMove_),this.workspace_.hideChaff()),n.stopPropagation()},Qe.Bubble.prototype.resizeMouseMove_=function(n){this.autoLayout_=!1,n=this.workspace_.moveDrag(n),this.setBubbleSize(this.workspace_.RTL?-n.x:n.x,n.y),this.workspace_.RTL&&this.positionBubble_()},Qe.Bubble.prototype.registerResizeEvent=function(n){this.resizeCallback_=n},Qe.Bubble.prototype.registerMoveEvent=function(n){this.moveCallback_=n},Qe.Bubble.prototype.promote=function(){var n=this.bubbleGroup_.parentNode;return n.lastChild!==this.bubbleGroup_?(n.appendChild(this.bubbleGroup_),!0):!1},Qe.Bubble.prototype.setAnchorLocation=function(n){this.anchorXY_=n,this.rendered_&&this.positionBubble_()},Qe.Bubble.prototype.layoutBubble_=function(){var n=this.workspace_.getMetricsManager().getViewMetrics(!0),s=this.getOptimalRelativeLeft_(n),u=this.getOptimalRelativeTop_(n),d=this.shape_.getBBox(),T={x:s,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},w={x:-this.width_-30,y:u};u={x:d.width,y:u};var N={x:s,y:d.height};s=d.width<d.height?u:N,d=d.width<d.height?N:u,u=this.getOverlap_(T,n),N=this.getOverlap_(w,n);var J=this.getOverlap_(s,n);n=this.getOverlap_(d,n),n=Math.max(u,N,J,n),u===n?(this.relativeLeft_=T.x,this.relativeTop_=T.y):N===n?(this.relativeLeft_=w.x,this.relativeTop_=w.y):J===n?(this.relativeLeft_=s.x,this.relativeTop_=s.y):(this.relativeLeft_=d.x,this.relativeTop_=d.y)},Qe.Bubble.prototype.getOverlap_=function(n,s){var u=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x+this.anchorXY_.x;return n=n.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(u+this.width_,s.left+s.width)-Math.max(u,s.left))*(Math.min(n+this.height_,s.top+s.height)-Math.max(n,s.top))/(this.width_*this.height_)))},Qe.Bubble.prototype.getOptimalRelativeLeft_=function(n){var s=-this.width_/4;if(this.width_>n.width)return s;if(this.workspace_.RTL){var u=this.anchorXY_.x-s,d=n.left+n.width;n=n.left+_t.Scrollbar.scrollbarThickness/this.workspace_.scale,u-this.width_<n?s=-(n-this.anchorXY_.x+this.width_):u>d&&(s=-(d-this.anchorXY_.x))}else{u=s+this.anchorXY_.x,d=u+this.width_;var T=n.left;n=n.left+n.width-_t.Scrollbar.scrollbarThickness/this.workspace_.scale,u<T?s=T-this.anchorXY_.x:d>n&&(s=n-this.anchorXY_.x-this.width_)}return s},Qe.Bubble.prototype.getOptimalRelativeTop_=function(n){var s=-this.height_/4;if(this.height_>n.height)return s;var u=this.anchorXY_.y+s,d=u+this.height_,T=n.top;n=n.top+n.height-_t.Scrollbar.scrollbarThickness/this.workspace_.scale;var w=this.anchorXY_.y;return u<T?s=T-w:d>n&&(s=n-w-this.height_),s},Qe.Bubble.prototype.positionBubble_=function(){var n=this.anchorXY_.x;n=this.workspace_.RTL?n-(this.relativeLeft_+this.width_):n+this.relativeLeft_,this.moveTo(n,this.relativeTop_+this.anchorXY_.y)},Qe.Bubble.prototype.moveTo=function(n,s){this.bubbleGroup_.setAttribute("transform","translate("+n+","+s+")")},Qe.Bubble.prototype.setDragging=function(n){!n&&this.moveCallback_&&this.moveCallback_()},Qe.Bubble.prototype.getBubbleSize=function(){return new Me.Size(this.width_,this.height_)},Qe.Bubble.prototype.setBubbleSize=function(n,s){var u=2*Qe.Bubble.BORDER_WIDTH;n=Math.max(n,u+45),s=Math.max(s,u+20),this.width_=n,this.height_=s,this.bubbleBack_.setAttribute("width",n),this.bubbleBack_.setAttribute("height",s),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*Qe.Bubble.BORDER_WIDTH+","+(s-u)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(n-u)+","+(s-u)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},Qe.Bubble.prototype.renderArrow_=function(){var n=[],s=this.width_/2,u=this.height_/2,d=-this.relativeLeft_,T=-this.relativeTop_;if(s===d&&u===T)n.push("M "+s+","+u);else{T-=u,d-=s,this.workspace_.RTL&&(d*=-1);var w=Math.sqrt(T*T+d*d),N=Math.acos(d/w);0>T&&(N=2*Math.PI-N);var J=N+Math.PI/2;J>2*Math.PI&&(J-=2*Math.PI);var ve=Math.sin(J),He=Math.cos(J),Tt=this.getBubbleSize();J=(Tt.width+Tt.height)/Qe.Bubble.ARROW_THICKNESS,J=Math.min(J,Tt.width,Tt.height)/4,Tt=1-Qe.Bubble.ANCHOR_RADIUS/w,d=s+Tt*d,T=u+Tt*T,Tt=s+J*He;var bt=u+J*ve;s-=J*He,u-=J*ve,ve=N+this.arrow_radians_,ve>2*Math.PI&&(ve-=2*Math.PI),N=Math.sin(ve)*w/Qe.Bubble.ARROW_BEND,w=Math.cos(ve)*w/Qe.Bubble.ARROW_BEND,n.push("M"+Tt+","+bt),n.push("C"+(Tt+w)+","+(bt+N)+" "+d+","+T+" "+d+","+T),n.push("C"+d+","+T+" "+(s+w)+","+(u+N)+" "+s+","+u)}n.push("z"),this.bubbleArrow_.setAttribute("d",n.join(" "))},Qe.Bubble.prototype.setColour=function(n){this.bubbleBack_.setAttribute("fill",n),this.bubbleArrow_.setAttribute("fill",n)},Qe.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&(0,A.unbind)(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&(0,A.unbind)(this.onMouseDownResizeWrapper_),Qe.Bubble.unbindDragEvents_(),(0,S.removeNode)(this.bubbleGroup_),this.disposed=!0},Qe.Bubble.prototype.moveDuringDrag=function(n,s){n?n.translateSurface(s.x,s.y):this.moveTo(s.x,s.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-s.x-this.width_:s.x-this.anchorXY_.x,this.relativeTop_=s.y-this.anchorXY_.y,this.renderArrow_()},Qe.Bubble.prototype.getRelativeToSurfaceXY=function(){return new W.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},Qe.Bubble.prototype.setAutoLayout=function(n){this.autoLayout_=n},Qe.Bubble.textToDom=function(n){var s=(0,S.createSvgElement)(ce.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Qe.Bubble.BORDER_WIDTH},null);n=n.split(`
`);for(var u=0;u<n.length;u++){var d=(0,S.createSvgElement)(ce.Svg.TSPAN,{dy:"1em",x:Qe.Bubble.BORDER_WIDTH},s),T=document.createTextNode(n[u]);d.appendChild(T)}return s},Qe.Bubble.createNonEditableBubble=function(n,s,u){if(u=new Qe.Bubble(s.workspace,n,s.pathObject.svgPath,u,null,null),u.setSvgId(s.id),s.RTL){s=n.getBBox().width;for(var d=0,T;T=n.childNodes[d];d++)T.setAttribute("text-anchor","end"),T.setAttribute("x",s+Qe.Bubble.BORDER_WIDTH)}return u};var yi={CommentBase:function(n){this.commentId=(this.isBlank=typeof n=="undefined")?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id,this.group=(0,B.getGroup)(),this.recordUndo=(0,B.getRecordUndo)()}};(0,t.module$exports$Blockly$utils$object.inherits)(yi.CommentBase,us),yi.CommentBase.prototype.toJson=function(){var n=yi.CommentBase.superClass_.toJson.call(this);return this.commentId&&(n.commentId=this.commentId),n},yi.CommentBase.prototype.fromJson=function(n){yi.CommentBase.superClass_.fromJson.call(this,n),this.commentId=n.commentId},yi.CommentBase.CommentCreateDeleteHelper=function(n,s){var u=n.getEventWorkspace_();s?(s=(0,t.module$exports$Blockly$utils$xml.createElement)("xml"),s.appendChild(n.xml),(0,t.module$exports$Blockly$Xml.domToWorkspace)(s,u)):(u=u.getCommentById(n.commentId))?u.dispose():console.warn("Can't uncreate non-existent comment: "+n.commentId)};var Fr={CommentMove:function(n){Fr.CommentMove.superClass_.constructor.call(this,n),n&&(this.comment_=n,this.oldCoordinate_=n.getXY(),this.newCoordinate_=null)}};(0,t.module$exports$Blockly$utils$object.inherits)(Fr.CommentMove,yi.CommentBase),Fr.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},Fr.CommentMove.prototype.type=B.COMMENT_MOVE,Fr.CommentMove.prototype.setOldCoordinate=function(n){this.oldCoordinate_=n},Fr.CommentMove.prototype.toJson=function(){var n=Fr.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(n.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(n.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),n},Fr.CommentMove.prototype.fromJson=function(n){if(Fr.CommentMove.superClass_.fromJson.call(this,n),n.oldCoordinate){var s=n.oldCoordinate.split(",");this.oldCoordinate_=new W.Coordinate(Number(s[0]),Number(s[1]))}n.newCoordinate&&(n=n.newCoordinate.split(","),this.newCoordinate_=new W.Coordinate(Number(n[0]),Number(n[1])))},Fr.CommentMove.prototype.isNull=function(){return W.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},Fr.CommentMove.prototype.run=function(n){var s=this.getEventWorkspace_().getCommentById(this.commentId);if(s){n=n?this.newCoordinate_:this.oldCoordinate_;var u=s.getXY();s.moveBy(n.x-u.x,n.y-u.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},(0,ue.register)(ue.Type.EVENT,B.COMMENT_MOVE,Fr.CommentMove);var Wi={BubbleDragger:function(n,s){this.draggingBubble_=n,this.workspace_=s,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=(0,it.is3dSupported)()&&s.getBlockDragSurface()?s.getBlockDragSurface():null}};Wi.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},Wi.BubbleDragger.prototype.startBubbleDrag=function(){(0,B.getGroup)()||(0,B.setGroup)(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},Wi.BubbleDragger.prototype.dragBubble=function(n,s){s=this.pixelsToWorkspaceUnits_(s),s=W.Coordinate.sum(this.startXY_,s),this.draggingBubble_.moveDuringDrag(this.dragSurface_,s),s=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),n=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),n!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==s&&(s&&s.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},Wi.BubbleDragger.prototype.shouldDelete_=function(n){return n&&this.workspace_.getComponentManager().hasCapability(n.id,un.ComponentManager.Capability.DELETE_AREA)?n.wouldDelete(this.draggingBubble_,!1):!1},Wi.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},Wi.BubbleDragger.prototype.endBubbleDrag=function(n,s){this.dragBubble(n,s),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?n=this.startXY_:(n=this.pixelsToWorkspaceUnits_(s),n=W.Coordinate.sum(this.startXY_,n)),this.draggingBubble_.moveTo(n.x,n.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(0,B.setGroup)(!1)},Wi.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var n=new((0,B.get)(B.COMMENT_MOVE))(this.draggingBubble_);n.setOldCoordinate(this.startXY_),n.recordNew(),(0,B.fire)(n)}},Wi.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new W.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},Wi.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())};var Is={WorkspaceDragger:function(n){this.workspace_=n,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new W.Coordinate(n.scrollX,n.scrollY)}};Is.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},Is.WorkspaceDragger.prototype.startDrag=function(){(0,t.module$exports$Blockly$common.getSelected)()&&(0,t.module$exports$Blockly$common.getSelected)().unselect(),this.workspace_.setupDragSurface()},Is.WorkspaceDragger.prototype.endDrag=function(n){this.drag(n),this.workspace_.resetDragSurface()},Is.WorkspaceDragger.prototype.drag=function(n){if(n=W.Coordinate.sum(this.startScrollXY_,n),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(n.x,n.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(n.x,this.workspace_.scrollY);else if(this.verticalScrollEnabled_)this.workspace_.scroll(this.workspace_.scrollX,n.y);else throw new TypeError("Invalid state.")};var fg={IBlockDragger:function(){}},tn={InsertionMarkerManager:function(n){(0,t.module$exports$Blockly$common.setSelected)(n),this.topBlock_=n,this.workspace_=n.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()}};tn.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},tn.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",tn.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,(0,B.disable)();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{(0,B.enable)()}},tn.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},tn.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},tn.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},tn.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&((0,B.disable)(),this.hidePreview_(),(0,B.enable)(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var n=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;(0,gr.connectionUiEffect)(n.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},tn.InsertionMarkerManager.prototype.update=function(n,s){var u=this.getCandidate_(n);((this.wouldDeleteBlock_=this.shouldDelete_(u,s))||this.shouldUpdatePreviews_(u,n))&&((0,B.disable)(),this.maybeHidePreview_(u),this.maybeShowPreview_(u),(0,B.enable)())},tn.InsertionMarkerManager.prototype.createMarkerBlock_=function(n){var s=n.type;(0,B.disable)();try{var u=this.workspace_.newBlock(s);if(u.setInsertionMarker(!0),n.saveExtraState){var d=n.saveExtraState();d&&u.loadExtraState(d)}else if(n.mutationToDom){var T=n.mutationToDom();T&&u.domToMutation(T)}for(s=0;s<n.inputList.length;s++){var w=n.inputList[s];if(w.name!==pl.COLLAPSED_INPUT_NAME){var N=u.inputList[s];if(!N)throw Error(tn.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(d=0;d<w.fieldRow.length;d++){var J=w.fieldRow[d],ve=N.fieldRow[d];if(!ve)throw Error(tn.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));ve.setValue(J.getValue())}}}u.setCollapsed(n.isCollapsed()),u.setInputsInline(n.getInputsInline()),u.initSvg(),u.getSvgRoot().setAttribute("visibility","hidden")}finally{(0,B.enable)()}return u},tn.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var n=this.topBlock_.getConnections_(!1),s=this.topBlock_.lastConnectionInStack(!0);if(s&&s!==this.topBlock_.nextConnection){if(n.push(s),this.lastOnStack_=s,this.lastMarker_){(0,B.disable)();try{this.lastMarker_.dispose()}finally{(0,B.enable)()}}this.lastMarker_=this.createMarkerBlock_(s.getSourceBlock())}return n},tn.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(n,s){var u=n.local,d=n.closest;if(n=n.radius,u&&d){if(this.localConnection_&&this.closestConnection_)return this.closestConnection_===d&&this.localConnection_===u?!1:(u=this.localConnection_.x+s.x-this.closestConnection_.x,s=this.localConnection_.y+s.y-this.closestConnection_.y,s=Math.sqrt(u*u+s*s),!(d&&n>s-t.module$exports$Blockly$internalConstants.CURRENT_CONNECTION_PREFERENCE));if(this.localConnection_||this.closestConnection_)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!this.localConnection_||!this.closestConnection_);return console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0},tn.InsertionMarkerManager.prototype.getCandidate_=function(n){for(var s=this.getStartRadius_(),u=null,d=null,T=0;T<this.availableConnections_.length;T++){var w=this.availableConnections_[T],N=w.closest(s,n);N.connection&&(u=N.connection,d=w,s=N.radius)}return{closest:u,local:d,radius:s}},tn.InsertionMarkerManager.prototype.getStartRadius_=function(){return t.module$exports$Blockly$internalConstants.SNAP_RADIUS},tn.InsertionMarkerManager.prototype.shouldDelete_=function(n,s){return s&&this.workspace_.getComponentManager().hasCapability(s.id,un.ComponentManager.Capability.DELETE_AREA)?s.wouldDelete(this.topBlock_,n&&!!n.closest):!1},tn.InsertionMarkerManager.prototype.maybeShowPreview_=function(n){if(!this.wouldDeleteBlock_){var s=n.closest;n=n.local,s&&(s===this.closestConnection_||s.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=s,this.localConnection_=n,this.showPreview_()))}},tn.InsertionMarkerManager.prototype.showPreview_=function(){var n=this.closestConnection_,s=this.workspace_.getRenderer();switch(s.getConnectionPreviewMethod(n,this.localConnection_,this.topBlock_)){case tn.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case tn.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case tn.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}n&&s.shouldHighlightConnection(n)&&n.highlight()},tn.InsertionMarkerManager.prototype.maybeHidePreview_=function(n){if(n.closest){var s=this.closestConnection_!==n.closest;n=this.localConnection_!==n.local,this.closestConnection_&&this.localConnection_&&(s||n||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},tn.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},tn.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var n=this.localConnection_,s=this.closestConnection_,u=this.lastOnStack_&&n===this.lastOnStack_?this.lastMarker_:this.firstMarker_;if(n=u.getMatchingConnection(n.getSourceBlock(),n),n===this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");u.render(),u.rendered=!0,u.getSvgRoot().setAttribute("visibility","visible"),n&&s&&u.positionNearConnection(n,s),s&&n.connect(s),this.markerConnection_=n},tn.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var n=this.markerConnection_,s=n.getSourceBlock(),u=s.nextConnection,d=s.previousConnection,T=s.outputConnection;if(T=n.type===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&!(T&&T.targetConnection),!(n!==u||d&&d.targetConnection)||T?n.targetBlock().unplug(!1):n.type===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&n!==u?(u=n.targetConnection,u.getSourceBlock().unplug(!1),d=d?d.targetConnection:null,s.unplug(!0),d&&d.connect(u)):s.unplug(!0),n.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(n=s.getSvgRoot())&&n.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},tn.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var n=this.closestConnection_;this.highlightedBlock_=n.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(n,!0)},tn.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},tn.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},tn.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},tn.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var n=[];return this.firstMarker_&&n.push(this.firstMarker_),this.lastMarker_&&n.push(this.lastMarker_),n};var lo={UiBase:function(n){lo.UiBase.superClass_.constructor.call(this),this.isBlank=typeof n=="undefined",this.workspaceId=n||"",this.recordUndo=!1}};(0,t.module$exports$Blockly$utils$object.inherits)(lo.UiBase,us),lo.UiBase.prototype.isUiEvent=!0;var zi={BlockDrag:function(n,s,u){zi.BlockDrag.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isStart=s,this.blocks=u}};(0,t.module$exports$Blockly$utils$object.inherits)(zi.BlockDrag,lo.UiBase),zi.BlockDrag.prototype.type=B.BLOCK_DRAG,zi.BlockDrag.prototype.toJson=function(){var n=zi.BlockDrag.superClass_.toJson.call(this);return n.isStart=this.isStart,n.blockId=this.blockId,n.blocks=this.blocks,n},zi.BlockDrag.prototype.fromJson=function(n){zi.BlockDrag.superClass_.fromJson.call(this,n),this.isStart=n.isStart,this.blockId=n.blockId,this.blocks=n.blocks},(0,ue.register)(ue.Type.EVENT,B.BLOCK_DRAG,zi.BlockDrag);var rn={BlockDragger:function(n,s){this.draggingBlock_=n,this.workspace_=s,this.draggedConnectionManager_=new tn.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Ur(n)}};rn.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()};var Ur=function(n){var s=[];n=n.getDescendants(!1);for(var u=0,d;d=n[u];u++){d=d.getIcons();for(var T=0;T<d.length;T++){var w={location:d[T].getIconLocation(),icon:d[T]};s.push(w)}}return s};rn.BlockDragger.prototype.startDrag=function(n,s){(0,B.getGroup)()||(0,B.setGroup)(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),(0,S.startTextWidthCache)(),this.workspace_.setResizesEnabled(!1),(0,gr.disconnectUiStop)(),this.shouldDisconnect_(s)&&this.disconnectBlock_(s,n),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},rn.BlockDragger.prototype.shouldDisconnect_=function(n){return!!(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},rn.BlockDragger.prototype.disconnectBlock_=function(n,s){this.draggingBlock_.unplug(n),n=this.pixelsToWorkspaceUnits_(s),n=W.Coordinate.sum(this.startXY_,n),this.draggingBlock_.translate(n.x,n.y),(0,gr.disconnectUiEffect)(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},rn.BlockDragger.prototype.fireDragStartEvent_=function(){var n=new((0,B.get)(B.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));(0,B.fire)(n)},rn.BlockDragger.prototype.drag=function(n,s){s=this.pixelsToWorkspaceUnits_(s);var u=W.Coordinate.sum(this.startXY_,s);this.draggingBlock_.moveDuringDrag(u),this.dragIcons_(s),u=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),this.draggedConnectionManager_.update(s,this.dragTarget_),n=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),n!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==u&&(u&&u.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},rn.BlockDragger.prototype.endDrag=function(n,s){if(this.drag(n,s),this.dragIconData_=[],this.fireDragEndEvent_(),(0,S.stopTextWidthCache)(),(0,gr.disconnectUiStop)(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))n=this.startXY_;else{n=this.getNewLocationAfterDrag_(s);var u=n.delta;n=n.newLocation}this.draggingBlock_.moveOffDragSurface(n),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),u?this.updateBlockAfterMove_(u):(0,Ce.bumpIntoBounds)(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),(0,B.setGroup)(!1)},rn.BlockDragger.prototype.getNewLocationAfterDrag_=function(n){var s={};return s.delta=this.pixelsToWorkspaceUnits_(n),s.newLocation=W.Coordinate.sum(this.startXY_,s.delta),s},rn.BlockDragger.prototype.maybeDeleteBlock_=function(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.module$exports$Blockly$common.draggingConnections.length=0,!0):!1},rn.BlockDragger.prototype.updateBlockAfterMove_=function(n){this.draggingBlock_.moveConnections(n.x,n.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},rn.BlockDragger.prototype.fireDragEndEvent_=function(){var n=new((0,B.get)(B.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));(0,B.fire)(n)},rn.BlockDragger.prototype.updateToolboxStyle_=function(n){var s=this.workspace_.getToolbox();if(s){var u=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";n&&typeof s.removeStyle=="function"?s.removeStyle(u):n||typeof s.addStyle!="function"||s.addStyle(u)}},rn.BlockDragger.prototype.fireMoveEvent_=function(){var n=new((0,B.get)(B.MOVE))(this.draggingBlock_);n.oldCoordinate=this.startXY_,n.recordNew(),(0,B.fire)(n)},rn.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},rn.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new W.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},rn.BlockDragger.prototype.dragIcons_=function(n){for(var s=0;s<this.dragIconData_.length;s++){var u=this.dragIconData_[s];u.icon.setIconLocation(W.Coordinate.sum(u.location,n))}},rn.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},(0,ue.register)(ue.Type.BLOCK_DRAGGER,ue.DEFAULT,rn.BlockDragger);var ao={Click:function(n,s,u){ao.Click.superClass_.constructor.call(this,n?n.workspace.id:s),this.blockId=n?n.id:null,this.targetType=u}};(0,t.module$exports$Blockly$utils$object.inherits)(ao.Click,lo.UiBase),ao.Click.prototype.type=B.CLICK,ao.Click.prototype.toJson=function(){var n=ao.Click.superClass_.toJson.call(this);return n.targetType=this.targetType,this.blockId&&(n.blockId=this.blockId),n},ao.Click.prototype.fromJson=function(n){ao.Click.superClass_.fromJson.call(this,n),this.targetType=n.targetType,this.blockId=n.blockId},(0,ue.register)(ue.Type.EVENT,B.CLICK,ao.Click);var $t={Gesture:function(n,s){this.mouseDownXY_=null,this.currentDragDeltaXY_=new W.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=s,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=n,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.module$exports$Blockly$internalConstants.DRAG_STACK}};$t.Gesture.prototype.dispose=function(){(0,m.clearTouchIdentifier)(),(0,I.unblock)(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&(0,A.unbind)(this.onMoveWrapper_),this.onUpWrapper_&&(0,A.unbind)(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},$t.Gesture.prototype.updateFromEvent_=function(n){var s=new W.Coordinate(n.clientX,n.clientY);this.updateDragDelta_(s)&&(this.updateIsDragging_(),(0,m.longStop)()),this.mostRecentEvent_=n},$t.Gesture.prototype.updateDragDelta_=function(n){return this.currentDragDeltaXY_=W.Coordinate.difference(n,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=W.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.module$exports$Blockly$internalConstants.FLYOUT_DRAG_RADIUS:t.module$exports$Blockly$internalConstants.DRAG_RADIUS)},$t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return this.targetBlock_&&this.flyout_.isBlockCreatable_(this.targetBlock_)&&(!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),(0,B.getGroup)()||(0,B.setGroup)(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1},$t.Gesture.prototype.updateIsDraggingBubble_=function(){return this.startBubble_?(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0):!1},$t.Gesture.prototype.updateIsDraggingBlock_=function(){return this.targetBlock_?(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),this.isDraggingBlock_?(this.startDraggingBlock_(),!0):!1):!1},$t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new Is.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},$t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},$t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new((0,ue.getClassFromOptions)(ue.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},$t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new Wi.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},$t.Gesture.prototype.doStart=function(n){(0,A.isTargetInput)(n)?this.cancel():(this.hasStarted_=!0,(0,gr.disconnectUiStop)(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=n,(0,I.block)(),this.targetBlock_&&this.targetBlock_.select(),(0,A.isRightButton)(n)?this.handleRightClick(n):(n.type.toLowerCase()!=="touchstart"&&n.type.toLowerCase()!=="pointerdown"||n.pointerType==="mouse"||(0,m.longStart)(n,this),this.mouseDownXY_=new W.Coordinate(n.clientX,n.clientY),this.healStack_=n.altKey||n.ctrlKey||n.metaKey,this.bindMouseEvents(n)))},$t.Gesture.prototype.bindMouseEvents=function(n){this.onMoveWrapper_=(0,A.conditionalBind)(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=(0,A.conditionalBind)(document,"mouseup",null,this.handleUp.bind(this)),n.preventDefault(),n.stopPropagation()},$t.Gesture.prototype.handleMove=function(n){this.updateFromEvent_(n),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),n.preventDefault(),n.stopPropagation()},$t.Gesture.prototype.handleUp=function(n){this.updateFromEvent_(n),(0,m.longStop)(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(n,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(n,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(n),n.preventDefault(),n.stopPropagation(),this.dispose())},$t.Gesture.prototype.cancel=function(){this.isEnding_||((0,m.longStop)(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},$t.Gesture.prototype.handleRightClick=function(n){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(n)):this.startBubble_?this.startBubble_.showContextMenu(n):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(n)),n.preventDefault(),n.stopPropagation(),this.dispose()},$t.Gesture.prototype.handleWsStart=function(n,s){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(s),this.mostRecentEvent_=n,this.doStart(n)},$t.Gesture.prototype.fireWorkspaceClick_=function(n){(0,B.fire)(new((0,B.get)(B.CLICK))(null,n.id,"workspace"))},$t.Gesture.prototype.handleFlyoutStart=function(n,s){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(s),this.handleWsStart(n,s.getWorkspace())},$t.Gesture.prototype.handleBlockStart=function(n,s){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(s),this.mostRecentEvent_=n},$t.Gesture.prototype.handleBubbleStart=function(n,s){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(s),this.mostRecentEvent_=n},$t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},$t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},$t.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&((0,B.getGroup)()||(0,B.setGroup)(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var n=new((0,B.get)(B.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");(0,B.fire)(n)}this.bringBlockToFront_(),(0,B.setGroup)(!1)},$t.Gesture.prototype.doWorkspaceClick_=function(n){n=this.creatorWorkspace_,(0,t.module$exports$Blockly$common.getSelected)()&&(0,t.module$exports$Blockly$common.getSelected)().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||n)},$t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},$t.Gesture.prototype.setStartField=function(n){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=n)},$t.Gesture.prototype.setStartBubble=function(n){this.startBubble_||(this.startBubble_=n)},$t.Gesture.prototype.setStartBlock=function(n){this.startBlock_||this.startBubble_||(this.startBlock_=n,n.isInFlyout&&n!==n.getRootBlock()?this.setTargetBlock_(n.getRootBlock()):this.setTargetBlock_(n))},$t.Gesture.prototype.setTargetBlock_=function(n){n.isShadow()?this.setTargetBlock_(n.getParent()):this.targetBlock_=n},$t.Gesture.prototype.setStartWorkspace_=function(n){this.startWorkspace_||(this.startWorkspace_=n)},$t.Gesture.prototype.setStartFlyout_=function(n){this.flyout_||(this.flyout_=n)},$t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},$t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},$t.Gesture.prototype.isFieldClick_=function(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},$t.Gesture.prototype.isWorkspaceClick_=function(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_},$t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},$t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},$t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},$t.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},$t.Gesture.inProgress=function(){for(var n=vt.Workspace.getAll(),s=0,u;u=n[s];s++)if(u.currentGesture_)return!0;return!1};var Ze={Field:function(n,s,u){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new Me.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,u&&this.configure_(u),this.setValue(n),s&&this.setValidator(s)}};Ze.Field.prototype.DEFAULT_VALUE=null,Ze.Field.prototype.name=void 0,Ze.Field.prototype.disposed=!1,Ze.Field.prototype.maxDisplayLength=50,Ze.Field.prototype.sourceBlock_=null,Ze.Field.prototype.isDirty_=!0,Ze.Field.prototype.visible_=!0,Ze.Field.prototype.enabled_=!0,Ze.Field.prototype.clickTarget_=null,Ze.Field.NBSP="\xA0",Ze.Field.prototype.EDITABLE=!0,Ze.Field.prototype.SERIALIZABLE=!1,Ze.Field.prototype.configure_=function(n){var s=n.tooltip;typeof s=="string"&&(s=(0,qt.replaceMessageReferences)(n.tooltip)),s&&this.setTooltip(s)},Ze.Field.prototype.setSourceBlock=function(n){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=n},Ze.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},Ze.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},Ze.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=(0,S.createSvgElement)(ce.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},Ze.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},Ze.Field.prototype.initModel=function(){},Ze.Field.prototype.createBorderRect_=function(){this.borderRect_=(0,S.createSvgElement)(ce.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},Ze.Field.prototype.createTextElement_=function(){this.textElement_=(0,S.createSvgElement)(ce.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},Ze.Field.prototype.bindEvents_=function(){(0,I.bindMouseEvents)(this.getClickTarget_()),this.mouseDownWrapper_=(0,A.conditionalBind)(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},Ze.Field.prototype.fromXml=function(n){this.setValue(n.textContent)},Ze.Field.prototype.toXml=function(n){return n.textContent=this.getValue(),n},Ze.Field.prototype.saveState=function(n){return n=this.saveLegacyState(Ze.Field),n!==null?n:this.getValue()},Ze.Field.prototype.loadState=function(n){this.loadLegacyState(Ze.Field,n)||this.setValue(n)},Ze.Field.prototype.saveLegacyState=function(n){return n.prototype.saveState===this.saveState&&n.prototype.toXml!==this.toXml?(n=(0,t.module$exports$Blockly$utils$xml.createElement)("field"),n.setAttribute("name",this.name||""),(0,t.module$exports$Blockly$Xml.domToText)(this.toXml(n)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null},Ze.Field.prototype.loadLegacyState=function(n,s){return n.prototype.loadState===this.loadState&&n.prototype.fromXml!==this.fromXml?(this.fromXml((0,t.module$exports$Blockly$Xml.textToDom)(s)),!0):!1},Ze.Field.prototype.dispose=function(){Ie.DropDownDiv.hideIfOwner(this),(0,Q.hideIfOwner)(this),(0,I.unbindMouseEvents)(this.getClickTarget_()),this.mouseDownWrapper_&&(0,A.unbind)(this.mouseDownWrapper_),(0,S.removeNode)(this.fieldGroup_),this.disposed=!0},Ze.Field.prototype.updateEditable=function(){var n=this.fieldGroup_;this.EDITABLE&&n&&(this.enabled_&&this.sourceBlock_.isEditable()?((0,S.addClass)(n,"blocklyEditableText"),(0,S.removeClass)(n,"blocklyNonEditableText"),n.style.cursor=this.CURSOR):((0,S.addClass)(n,"blocklyNonEditableText"),(0,S.removeClass)(n,"blocklyEditableText"),n.style.cursor=""))},Ze.Field.prototype.setEnabled=function(n){this.enabled_=n,this.updateEditable()},Ze.Field.prototype.isEnabled=function(){return this.enabled_},Ze.Field.prototype.isClickable=function(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&typeof this.showEditor_=="function"},Ze.Field.prototype.isCurrentlyEditable=function(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},Ze.Field.prototype.isSerializable=function(){var n=!1;return this.name&&(this.SERIALIZABLE?n=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),n=!0)),n},Ze.Field.prototype.isVisible=function(){return this.visible_},Ze.Field.prototype.setVisible=function(n){if(this.visible_!==n){this.visible_=n;var s=this.getSvgRoot();s&&(s.style.display=n?"block":"none")}},Ze.Field.prototype.setValidator=function(n){this.validator_=n},Ze.Field.prototype.getValidator=function(){return this.validator_},Ze.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},Ze.Field.prototype.applyColour=function(){},Ze.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},Ze.Field.prototype.showEditor=function(n){this.isClickable()&&this.showEditor_(n)},Ze.Field.prototype.updateSize_=function(n){var s=this.getConstants();n=n!==void 0?n:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var u=2*n,d=s.FIELD_TEXT_HEIGHT,T=0;this.textElement_&&(T=(0,S.getFastTextWidth)(this.textElement_,s.FIELD_TEXT_FONTSIZE,s.FIELD_TEXT_FONTWEIGHT,s.FIELD_TEXT_FONTFAMILY),u+=T),this.borderRect_&&(d=Math.max(d,s.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=d,this.size_.width=u,this.positionTextElement_(n,T),this.positionBorderRect_()},Ze.Field.prototype.positionTextElement_=function(n,s){if(this.textElement_){var u=this.getConstants(),d=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-s-n:n),this.textElement_.setAttribute("y",u.FIELD_TEXT_BASELINE_CENTER?d:d-u.FIELD_TEXT_HEIGHT/2+u.FIELD_TEXT_BASELINE)}},Ze.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},Ze.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new Me.Size(0,0)},Ze.Field.prototype.getScaledBBox=function(){if(this.borderRect_)var n=this.borderRect_.getBoundingClientRect(),s=(0,we.getPageOffset)(this.borderRect_),u=n.width,d=n.height;else d=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,s=this.getAbsoluteXY_(),u=d.width*n,d=d.height*n,b.GECKO?(s.x+=1.5*n,s.y+=1.5*n):b.EDGE||b.IE||(s.x-=.5*n,s.y-=.5*n),u+=1*n,d+=1*n;return new nt.Rect(s.y,s.y+d,s.x,s.x+u)},Ze.Field.prototype.getDisplayText_=function(){var n=this.getText();return n?(n.length>this.maxDisplayLength&&(n=n.substring(0,this.maxDisplayLength-2)+"\u2026"),n=n.replace(/\s/g,Ze.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(n+="\u200F"),n):Ze.Field.NBSP},Ze.Field.prototype.getText=function(){if(this.getText_){var n=this.getText_.call(this);if(n!==null)return String(n)}return String(this.getValue())},Ze.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},Ze.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},Ze.Field.prototype.setValue=function(n){if(n!==null){var s=this.doClassValidation_(n);if(n=this.processValidation_(n,s),!(n instanceof Error)){if((s=this.getValidator())&&(s=s.call(this,n),n=this.processValidation_(n,s),n instanceof Error))return;if(s=this.sourceBlock_,!s||!s.disposed){var u=this.getValue();u===n?this.doValueUpdate_(n):(this.doValueUpdate_(n),s&&(0,B.isEnabled)()&&(0,B.fire)(new((0,B.get)(B.CHANGE))(s,"field",this.name||null,u,n)),this.isDirty_&&this.forceRerender())}}}},Ze.Field.prototype.processValidation_=function(n,s){return s===null?(this.doValueInvalid_(n),this.isDirty_&&this.forceRerender(),Error()):(s!==void 0&&(n=s),n)},Ze.Field.prototype.getValue=function(){return this.value_},Ze.Field.prototype.doClassValidation_=function(n){return n==null?null:n},Ze.Field.prototype.doValueUpdate_=function(n){this.value_=n,this.isDirty_=!0},Ze.Field.prototype.doValueInvalid_=function(n){},Ze.Field.prototype.onMouseDown_=function(n){this.sourceBlock_&&this.sourceBlock_.workspace&&(n=this.sourceBlock_.workspace.getGesture(n))&&n.setStartField(this)},Ze.Field.prototype.setTooltip=function(n){n||n===""||(n=this.sourceBlock_);var s=this.getClickTarget_();s?s.tooltip=n:this.tooltip_=n},Ze.Field.prototype.getTooltip=function(){var n=this.getClickTarget_();return n?(0,I.getTooltipOfObject)(n):(0,I.getTooltipOfObject)({tooltip:this.tooltip_})},Ze.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},Ze.Field.prototype.getAbsoluteXY_=function(){return(0,we.getPageOffset)(this.getClickTarget_())},Ze.Field.prototype.referencesVariables=function(){return!1},Ze.Field.prototype.getParentInput=function(){for(var n=null,s=this.sourceBlock_,u=s.inputList,d=0;d<s.inputList.length;d++)for(var T=u[d],w=T.fieldRow,N=0;N<w.length;N++)if(w[N]===this){n=T;break}return n},Ze.Field.prototype.getFlipRtl=function(){return!1},Ze.Field.prototype.isTabNavigable=function(){return!1},Ze.Field.prototype.onShortcut=function(n){return!1},Ze.Field.prototype.setCursorSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},Ze.Field.prototype.setMarkerSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.markerSvg_=n):this.markerSvg_=null},Ze.Field.prototype.updateMarkers_=function(){var n=this.sourceBlock_.workspace;n.keyboardAccessibilityMode&&this.cursorSvg_&&n.getCursor().draw(),n.keyboardAccessibilityMode&&this.markerSvg_&&n.getMarker(Pr.MarkerManager.LOCAL_MARKER).draw()},t.module$exports$Blockly$FieldLabel={FieldLabel:function(n,s,u){this.class_=null,t.module$exports$Blockly$FieldLabel.FieldLabel.superClass_.constructor.call(this,n,null,u),u||(this.class_=s||null)}},(0,t.module$exports$Blockly$utils$object.inherits)(t.module$exports$Blockly$FieldLabel.FieldLabel,Ze.Field),t.module$exports$Blockly$FieldLabel.FieldLabel.prototype.DEFAULT_VALUE="",t.module$exports$Blockly$FieldLabel.FieldLabel.fromJson=function(n){return new this((0,qt.replaceMessageReferences)(n.text),void 0,n)},t.module$exports$Blockly$FieldLabel.FieldLabel.prototype.EDITABLE=!1,t.module$exports$Blockly$FieldLabel.FieldLabel.prototype.configure_=function(n){t.module$exports$Blockly$FieldLabel.FieldLabel.superClass_.configure_.call(this,n),this.class_=n.class},t.module$exports$Blockly$FieldLabel.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&(0,S.addClass)(this.textElement_,this.class_)},t.module$exports$Blockly$FieldLabel.FieldLabel.prototype.doClassValidation_=function(n){return n==null?null:String(n)},t.module$exports$Blockly$FieldLabel.FieldLabel.prototype.setClass=function(n){this.textElement_&&(this.class_&&(0,S.removeClass)(this.textElement_,this.class_),n&&(0,S.addClass)(this.textElement_,n)),this.class_=n},(0,ei.register)("field_label",t.module$exports$Blockly$FieldLabel.FieldLabel);var gn={Debug:function(n){this.debugElements_=[],this.svgRoot_=null,this.constants_=n}};gn.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},gn.Debug.prototype.clearElems=function(){for(var n=0;n<this.debugElements_.length;n++)(0,S.removeNode)(this.debugElements_[n]);this.debugElements_=[]},gn.Debug.prototype.drawSpacerRow=function(n,s,u){if(gn.Debug.config.rowSpacers){var d=Math.abs(n.height),T=0>n.height;T&&(s-=d),this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:u?-(n.xPos+n.width):n.xPos,y:s,width:n.width,height:d,stroke:T?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},gn.Debug.prototype.drawSpacerElem=function(n,s,u){if(gn.Debug.config.elemSpacers){s=Math.abs(n.width);var d=0>n.width,T=d?n.xPos-s:n.xPos;u&&(T=-(T+s)),this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:T,y:n.centerline-n.height/2,width:s,height:n.height,stroke:"pink",fill:d?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},gn.Debug.prototype.drawRenderedElem=function(n,s){if(gn.Debug.config.elems){var u=n.xPos;s&&(u=-(u+n.width)),s=n.centerline-n.height/2,this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:s,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),ne.Types.isField(n)&&n.field instanceof t.module$exports$Blockly$FieldLabel.FieldLabel&&this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:s+this.constants_.FIELD_TEXT_BASELINE,width:n.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}ne.Types.isInput(n)&&gn.Debug.config.connections&&this.drawConnection(n.connectionModel)},gn.Debug.prototype.drawConnection=function(n){if(gn.Debug.config.connections){if(n.type===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE)var s=4,u="magenta",d="none";else n.type===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?(s=2,d=u="magenta"):n.type===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?(s=4,u="goldenrod",d="none"):n.type===t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&(s=2,d=u="goldenrod");this.debugElements_.push((0,S.createSvgElement)(ce.Svg.CIRCLE,{class:"blockRenderDebug",cx:n.offsetInBlock_.x,cy:n.offsetInBlock_.y,r:s,fill:d,stroke:u},this.svgRoot_))}},gn.Debug.prototype.drawRenderedRow=function(n,s,u){gn.Debug.config.rows&&(this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:u?-(n.xPos+n.width):n.xPos,y:n.yPos,width:n.width,height:n.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),ne.Types.isTopOrBottomRow(n)||gn.Debug.config.connectedBlockBounds&&this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:u?-(n.xPos+n.widthWithConnectedBlocks):n.xPos,y:n.yPos,width:n.widthWithConnectedBlocks,height:n.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},gn.Debug.prototype.drawRowWithElements=function(n,s,u){for(var d=0;d<n.elements.length;d++){var T=n.elements[d];T?ne.Types.isSpacer(T)?this.drawSpacerElem(T,n.height,u):this.drawRenderedElem(T,u):console.warn("A row has an undefined or null element.",n,T)}this.drawRenderedRow(n,s,u)},gn.Debug.prototype.drawBoundingBox=function(n){if(gn.Debug.config.blockBounds){var s=n.RTL?-n.width:0;this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:s,y:0,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),gn.Debug.config.connectedBlockBounds&&(s=n.RTL?-n.widthWithChildren:0,this.debugElements_.push((0,S.createSvgElement)(ce.Svg.RECT,{class:"blockRenderDebug",x:s,y:0,width:n.widthWithChildren,height:n.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}},gn.Debug.prototype.drawDebug=function(n,s){this.clearElems(),this.svgRoot_=n.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var u=0,d=0;d<s.rows.length;d++){var T=s.rows[d];ne.Types.isBetweenRowSpacer(T)?this.drawSpacerRow(T,u,s.RTL):this.drawRowWithElements(T,u,s.RTL),u+=T.height}n.previousConnection&&this.drawConnection(n.previousConnection),n.nextConnection&&this.drawConnection(n.nextConnection),n.outputConnection&&this.drawConnection(n.outputConnection),s.rightSide&&this.drawRenderedElem(s.rightSide,s.RTL),this.drawBoundingBox(s),this.drawRender(n.pathObject.svgPath)},gn.Debug.prototype.drawRender=function(n){gn.Debug.config.render&&(n.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){n.setAttribute("filter","")},100))};var Zn={Drawer:function(n,s){this.block_=n,this.info_=s,this.topLeft_=n.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=s.getRenderer().getConstants()}};Zn.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),(0,ko.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Zn.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},Zn.Drawer.prototype.hideHiddenIcons_=function(){for(var n=0,s;s=this.info_.hiddenIcons[n];n++)s.icon.iconGroup_.setAttribute("display","none")},Zn.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var n=1;n<this.info_.rows.length-1;n++){var s=this.info_.rows[n];s.hasJaggedEdge?this.drawJaggedEdge_(s):s.hasStatement?this.drawStatementInput_(s):s.hasExternalInput?this.drawValueInput_(s):this.drawRightSideRow_(s)}this.drawBottom_(),this.drawLeft_()},Zn.Drawer.prototype.drawTop_=function(){var n=this.info_.topRow,s=n.elements;this.positionPreviousConnection_(),this.outlinePath_+=(0,fe.moveBy)(n.xPos,this.info_.startY);for(var u=0,d;d=s[u];u++)ne.Types.isLeftRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ne.Types.isRightRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ne.Types.isPreviousConnection(d)?this.outlinePath_+=d.shape.pathLeft:ne.Types.isHat(d)?this.outlinePath_+=this.constants_.START_HAT.path:ne.Types.isSpacer(d)&&(this.outlinePath_+=(0,fe.lineOnAxis)("h",d.width));this.outlinePath_+=(0,fe.lineOnAxis)("v",n.height)},Zn.Drawer.prototype.drawJaggedEdge_=function(n){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+(0,fe.lineOnAxis)("v",n.height-this.constants_.JAGGED_TEETH.height)},Zn.Drawer.prototype.drawValueInput_=function(n){var s=n.getLastInput();this.positionExternalValueConnection_(n);var u=typeof s.shape.pathDown=="function"?s.shape.pathDown(s.height):s.shape.pathDown;this.outlinePath_+=(0,fe.lineOnAxis)("H",s.xPos+s.width)+u+(0,fe.lineOnAxis)("v",n.height-s.connectionHeight)},Zn.Drawer.prototype.drawStatementInput_=function(n){var s=n.getLastInput(),u=s.xPos+s.notchOffset+s.shape.width;s=s.shape.pathRight+(0,fe.lineOnAxis)("h",-(s.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var d=n.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=(0,fe.lineOnAxis)("H",u)+s+(0,fe.lineOnAxis)("v",d)+this.constants_.INSIDE_CORNERS.pathBottom+(0,fe.lineOnAxis)("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},Zn.Drawer.prototype.drawRightSideRow_=function(n){this.outlinePath_+=(0,fe.lineOnAxis)("V",n.yPos+n.height)},Zn.Drawer.prototype.drawBottom_=function(){var n=this.info_.bottomRow,s=n.elements;this.positionNextConnection_();for(var u=0,d="",T=s.length-1,w;w=s[T];T--)ne.Types.isNextConnection(w)?d+=w.shape.pathRight:ne.Types.isLeftSquareCorner(w)?d+=(0,fe.lineOnAxis)("H",n.xPos):ne.Types.isLeftRoundedCorner(w)?d+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ne.Types.isRightRoundedCorner(w)?(d+=this.constants_.OUTSIDE_CORNERS.bottomRight,u=this.constants_.OUTSIDE_CORNERS.rightHeight):ne.Types.isSpacer(w)&&(d+=(0,fe.lineOnAxis)("h",-1*w.width));this.outlinePath_+=(0,fe.lineOnAxis)("V",n.baseline-u),this.outlinePath_+=d},Zn.Drawer.prototype.drawLeft_=function(){var n=this.info_.outputConnection;if(this.positionOutputConnection_(),n){var s=n.connectionOffsetY+n.height;n=typeof n.shape.pathUp=="function"?n.shape.pathUp(n.height):n.shape.pathUp,this.outlinePath_+=(0,fe.lineOnAxis)("V",s)+n}this.outlinePath_+="z"},Zn.Drawer.prototype.drawInternals_=function(){for(var n=0,s;s=this.info_.rows[n];n++)for(var u=0,d;d=s.elements[u];u++)ne.Types.isInlineInput(d)?this.drawInlineInput_(d):(ne.Types.isIcon(d)||ne.Types.isField(d))&&this.layoutField_(d)},Zn.Drawer.prototype.layoutField_=function(n){if(ne.Types.isField(n))var s=n.field.getSvgRoot();else ne.Types.isIcon(n)&&(s=n.icon.iconGroup_);var u=n.centerline-n.height/2,d=n.xPos,T="";this.info_.RTL&&(d=-(d+n.width),n.flipRtl&&(d+=n.width,T="scale(-1 1)")),ne.Types.isIcon(n)?(s.setAttribute("display","block"),s.setAttribute("transform","translate("+d+","+u+")"),n.icon.computeIconLocation()):s.setAttribute("transform","translate("+d+","+u+")"+T),this.info_.isInsertionMarker&&s.setAttribute("display","none")},Zn.Drawer.prototype.drawInlineInput_=function(n){var s=n.width,u=n.height,d=n.connectionOffsetY,T=n.connectionHeight+d;this.inlinePath_+=(0,fe.moveTo)(n.xPos+n.connectionWidth,n.centerline-u/2)+(0,fe.lineOnAxis)("v",d)+n.shape.pathDown+(0,fe.lineOnAxis)("v",u-T)+(0,fe.lineOnAxis)("h",s-n.connectionWidth)+(0,fe.lineOnAxis)("v",-u)+"z",this.positionInlineInputConnection_(n)},Zn.Drawer.prototype.positionInlineInputConnection_=function(n){var s=n.centerline-n.height/2;if(n.connectionModel){var u=n.xPos+n.connectionWidth+n.connectionOffsetX;this.info_.RTL&&(u*=-1),n.connectionModel.setOffsetInBlock(u,s+n.connectionOffsetY)}},Zn.Drawer.prototype.positionStatementInputConnection_=function(n){var s=n.getLastInput();if(s.connectionModel){var u=n.xPos+n.statementEdge+s.notchOffset;this.info_.RTL&&(u*=-1),s.connectionModel.setOffsetInBlock(u,n.yPos)}},Zn.Drawer.prototype.positionExternalValueConnection_=function(n){var s=n.getLastInput();if(s.connectionModel){var u=n.xPos+n.width;this.info_.RTL&&(u*=-1),s.connectionModel.setOffsetInBlock(u,n.yPos)}},Zn.Drawer.prototype.positionPreviousConnection_=function(){var n=this.info_.topRow;if(n.connection){var s=n.xPos+n.notchOffset;n.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-s:s,0)}},Zn.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var s=n.connection,u=s.xPos;s.connectionModel.setOffsetInBlock(this.info_.RTL?-u:u,n.baseline)}},Zn.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var n=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-n:n,this.info_.outputConnection.connectionOffsetY)}};var va={InputConnection:function(n,s){va.InputConnection.superClass_.constructor.call(this,n,s.connection),this.type|=ne.Types.INPUT,this.input=s,this.align=s.align,(this.connectedBlock=s.connection&&s.connection.targetBlock()?s.connection.targetBlock():null)?(n=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=n.width,this.connectedBlockHeight=n.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0}};(0,t.module$exports$Blockly$utils$object.inherits)(va.InputConnection,ul.Connection);var Os={ExternalValueInput:function(n,s){Os.ExternalValueInput.superClass_.constructor.call(this,n,s),this.type|=ne.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}};(0,t.module$exports$Blockly$utils$object.inherits)(Os.ExternalValueInput,va.InputConnection);var dl={Field:function(n,s,u){dl.Field.superClass_.constructor.call(this,n),this.field=s,this.isEditable=s.EDITABLE,this.flipRtl=s.getFlipRtl(),this.type|=ne.Types.FIELD,n=this.field.getSize(),this.height=n.height,this.width=n.width,this.parentInput=u}};(0,t.module$exports$Blockly$utils$object.inherits)(dl.Field,cl.Measurable);var Xi={Hat:function(n){Xi.Hat.superClass_.constructor.call(this,n),this.type|=ne.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}};(0,t.module$exports$Blockly$utils$object.inherits)(Xi.Hat,cl.Measurable);var Uh={IPathObject:function(n,s){}},Ta={Icon:function(n,s){Ta.Icon.superClass_.constructor.call(this,n),this.icon=s,this.isVisible=s.isVisible(),this.type|=ne.Types.ICON,n=s.getCorrectedSize(),this.height=n.height,this.width=n.width}};(0,t.module$exports$Blockly$utils$object.inherits)(Ta.Icon,cl.Measurable);var Hr={InRowSpacer:function(n,s){Hr.InRowSpacer.superClass_.constructor.call(this,n),this.type=this.type|ne.Types.SPACER|ne.Types.IN_ROW_SPACER,this.width=s,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}};(0,t.module$exports$Blockly$utils$object.inherits)(Hr.InRowSpacer,cl.Measurable);var yu={InlineInput:function(n,s){yu.InlineInput.superClass_.constructor.call(this,n,s),this.type|=ne.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0}};(0,t.module$exports$Blockly$utils$object.inherits)(yu.InlineInput,va.InputConnection);var Ea={InputRow:function(n){Ea.InputRow.superClass_.constructor.call(this,n),this.type|=ne.Types.INPUT_ROW,this.connectedBlockWidths=0}};(0,t.module$exports$Blockly$utils$object.inherits)(Ea.InputRow,Rs.Row),Ea.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var n=0,s=0;s<this.elements.length;s++){var u=this.elements[s];this.width+=u.width,ne.Types.isInput(u)&&(ne.Types.isStatementInput(u)?n+=u.connectedBlockWidth:ne.Types.isExternalInput(u)&&u.connectedBlockWidth!==0&&(n+=u.connectedBlockWidth-u.connectionWidth)),ne.Types.isSpacer(u)||(this.height=Math.max(this.height,u.height))}this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},Ea.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement};var xa={JaggedEdge:function(n){xa.JaggedEdge.superClass_.constructor.call(this,n),this.type|=ne.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}};(0,t.module$exports$Blockly$utils$object.inherits)(xa.JaggedEdge,cl.Measurable);var Be={ASTNode:function(n,s,u){if(!s)throw Error("Cannot create a node without a location.");this.type_=n,this.isConnection_=Be.ASTNode.isConnectionType_(n),this.location_=s,this.wsCoordinate_=null,this.processParams_(u||null)}};Be.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},Be.ASTNode.NAVIGATE_ALL_FIELDS=!1,Be.ASTNode.DEFAULT_OFFSET_Y=-20,Be.ASTNode.isConnectionType_=function(n){switch(n){case Be.ASTNode.types.PREVIOUS:case Be.ASTNode.types.NEXT:case Be.ASTNode.types.INPUT:case Be.ASTNode.types.OUTPUT:return!0}return!1},Be.ASTNode.createFieldNode=function(n){return n?new Be.ASTNode(Be.ASTNode.types.FIELD,n):null},Be.ASTNode.createConnectionNode=function(n){if(!n)return null;var s=n.type;return s===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||s===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&n.getParentInput()?Be.ASTNode.createInputNode(n.getParentInput()):s===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?new Be.ASTNode(Be.ASTNode.types.NEXT,n):s===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?new Be.ASTNode(Be.ASTNode.types.OUTPUT,n):s===t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?new Be.ASTNode(Be.ASTNode.types.PREVIOUS,n):null},Be.ASTNode.createInputNode=function(n){return n&&n.connection?new Be.ASTNode(Be.ASTNode.types.INPUT,n.connection):null},Be.ASTNode.createBlockNode=function(n){return n?new Be.ASTNode(Be.ASTNode.types.BLOCK,n):null},Be.ASTNode.createStackNode=function(n){return n?new Be.ASTNode(Be.ASTNode.types.STACK,n):null},Be.ASTNode.createWorkspaceNode=function(n,s){return s&&n?new Be.ASTNode(Be.ASTNode.types.WORKSPACE,n,{wsCoordinate:s}):null};var Hh=function(n){var s=n.outputConnection;return(!s||n.previousConnection&&n.previousConnection.isConnected())&&(s=n.previousConnection),s};Be.ASTNode.createTopNode=function(n){var s=Hh(n);return s?Be.ASTNode.createConnectionNode(s):Be.ASTNode.createBlockNode(n)},Be.ASTNode.prototype.processParams_=function(n){n&&n.wsCoordinate&&(this.wsCoordinate_=n.wsCoordinate)},Be.ASTNode.prototype.getLocation=function(){return this.location_},Be.ASTNode.prototype.getType=function(){return this.type_},Be.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},Be.ASTNode.prototype.isConnection=function(){return this.isConnection_},Be.ASTNode.prototype.findNextForInput_=function(){var n=this.location_.getParentInput(),s=n.getSourceBlock();for(n=s.inputList.indexOf(n)+1;n<s.inputList.length;n++){for(var u=s.inputList[n],d=u.fieldRow,T=0;T<d.length;T++){var w=d[T];if(w.isClickable()||Be.ASTNode.NAVIGATE_ALL_FIELDS)return Be.ASTNode.createFieldNode(w)}if(u.connection)return Be.ASTNode.createInputNode(u)}return null},Be.ASTNode.prototype.findNextForField_=function(){var n=this.location_,s=n.getParentInput(),u=n.getSourceBlock(),d=u.inputList.indexOf(s);for(n=s.fieldRow.indexOf(n)+1;d<u.inputList.length;d++){s=u.inputList[d];for(var T=s.fieldRow;n<T.length;){if(T[n].isClickable()||Be.ASTNode.NAVIGATE_ALL_FIELDS)return Be.ASTNode.createFieldNode(T[n]);n++}if(n=0,s.connection)return Be.ASTNode.createInputNode(s)}return null},Be.ASTNode.prototype.findPrevForInput_=function(){for(var n=this.location_.getParentInput(),s=n.getSourceBlock(),u=s.inputList.indexOf(n);0<=u;u--){var d=s.inputList[u];if(d.connection&&d!==n)return Be.ASTNode.createInputNode(d);d=d.fieldRow;for(var T=d.length-1;0<=T;T--){var w=d[T];if(w.isClickable()||Be.ASTNode.NAVIGATE_ALL_FIELDS)return Be.ASTNode.createFieldNode(w)}}return null},Be.ASTNode.prototype.findPrevForField_=function(){var n=this.location_,s=n.getParentInput(),u=n.getSourceBlock(),d=u.inputList.indexOf(s);for(n=s.fieldRow.indexOf(n)-1;0<=d;d--){var T=u.inputList[d];if(T.connection&&T!==s)return Be.ASTNode.createInputNode(T);for(T=T.fieldRow;-1<n;){if(T[n].isClickable()||Be.ASTNode.NAVIGATE_ALL_FIELDS)return Be.ASTNode.createFieldNode(T[n]);n--}0<=d-1&&(n=u.inputList[d-1].fieldRow.length-1)}return null},Be.ASTNode.prototype.navigateBetweenStacks_=function(n){var s=this.getLocation();if(s.getSourceBlock&&(s=s.getSourceBlock()),!s||!s.workspace)return null;var u=s.getRootBlock();s=u.workspace.getTopBlocks(!0);for(var d=0;d<s.length;d++)if(u.id===s[d].id)return n=d+(n?1:-1),n===-1||n===s.length?null:Be.ASTNode.createStackNode(s[n]);throw Error("Couldn't find "+(n?"next":"previous")+" stack?!")},Be.ASTNode.prototype.findTopASTNodeForBlock_=function(n){var s=Hh(n);return s?Be.ASTNode.createConnectionNode(s):Be.ASTNode.createBlockNode(n)},Be.ASTNode.prototype.getOutAstNodeForBlock_=function(n){if(!n)return null;n=n.getTopStackBlock();var s=Hh(n);return s&&s.targetConnection&&s.targetConnection.getParentInput()?Be.ASTNode.createInputNode(s.targetConnection.getParentInput()):Be.ASTNode.createStackNode(n)},Be.ASTNode.prototype.findFirstFieldOrInput_=function(n){n=n.inputList;for(var s=0;s<n.length;s++){for(var u=n[s],d=u.fieldRow,T=0;T<d.length;T++){var w=d[T];if(w.isClickable()||Be.ASTNode.NAVIGATE_ALL_FIELDS)return Be.ASTNode.createFieldNode(w)}if(u.connection)return Be.ASTNode.createInputNode(u)}return null},Be.ASTNode.prototype.getSourceBlock=function(){return this.getType()===Be.ASTNode.types.BLOCK?this.getLocation():this.getType()===Be.ASTNode.types.STACK?this.getLocation():this.getType()===Be.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},Be.ASTNode.prototype.next=function(){switch(this.type_){case Be.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case Be.ASTNode.types.OUTPUT:return Be.ASTNode.createBlockNode(this.location_.getSourceBlock());case Be.ASTNode.types.FIELD:return this.findNextForField_();case Be.ASTNode.types.INPUT:return this.findNextForInput_();case Be.ASTNode.types.BLOCK:return Be.ASTNode.createConnectionNode(this.location_.nextConnection);case Be.ASTNode.types.PREVIOUS:return Be.ASTNode.createBlockNode(this.location_.getSourceBlock());case Be.ASTNode.types.NEXT:return Be.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},Be.ASTNode.prototype.in=function(){switch(this.type_){case Be.ASTNode.types.WORKSPACE:var n=this.location_.getTopBlocks(!0);if(0<n.length)return Be.ASTNode.createStackNode(n[0]);break;case Be.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case Be.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case Be.ASTNode.types.INPUT:return Be.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},Be.ASTNode.prototype.prev=function(){switch(this.type_){case Be.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case Be.ASTNode.types.FIELD:return this.findPrevForField_();case Be.ASTNode.types.INPUT:return this.findPrevForInput_();case Be.ASTNode.types.BLOCK:var n=Hh(this.location_);return Be.ASTNode.createConnectionNode(n);case Be.ASTNode.types.PREVIOUS:if((n=this.location_.targetConnection)&&!n.getParentInput())return Be.ASTNode.createConnectionNode(n);break;case Be.ASTNode.types.NEXT:return Be.ASTNode.createBlockNode(this.location_.getSourceBlock())}return null},Be.ASTNode.prototype.out=function(){switch(this.type_){case Be.ASTNode.types.STACK:var n=this.location_,s=n.getRelativeToSurfaceXY();return s=new W.Coordinate(s.x,s.y+Be.ASTNode.DEFAULT_OFFSET_Y),Be.ASTNode.createWorkspaceNode(n.workspace,s);case Be.ASTNode.types.OUTPUT:return n=this.location_,(s=n.targetConnection)?Be.ASTNode.createConnectionNode(s):Be.ASTNode.createStackNode(n.getSourceBlock());case Be.ASTNode.types.FIELD:return Be.ASTNode.createBlockNode(this.location_.getSourceBlock());case Be.ASTNode.types.INPUT:return Be.ASTNode.createBlockNode(this.location_.getSourceBlock());case Be.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Be.ASTNode.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case Be.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null};var ds={MarkerMove:function(n,s,u,d){var T=n?n.workspace.id:void 0;d&&d.getType()===Be.ASTNode.types.WORKSPACE&&(T=d.getLocation().id),ds.MarkerMove.superClass_.constructor.call(this,T),this.blockId=n?n.id:null,this.oldNode=u,this.newNode=d,this.isCursor=s}};(0,t.module$exports$Blockly$utils$object.inherits)(ds.MarkerMove,lo.UiBase),ds.MarkerMove.prototype.type=B.MARKER_MOVE,ds.MarkerMove.prototype.toJson=function(){var n=ds.MarkerMove.superClass_.toJson.call(this);return n.isCursor=this.isCursor,n.blockId=this.blockId,n.oldNode=this.oldNode,n.newNode=this.newNode,n},ds.MarkerMove.prototype.fromJson=function(n){ds.MarkerMove.superClass_.fromJson.call(this,n),this.isCursor=n.isCursor,this.blockId=n.blockId,this.oldNode=n.oldNode,this.newNode=n.newNode},(0,ue.register)(ue.Type.EVENT,B.MARKER_MOVE,ds.MarkerMove);var _n={},mg="blocklyCursor",Wv="blocklyMarker",Td=.75;_n.MarkerSvg=function(n,s,u){this.workspace_=n,this.marker_=u,this.parent_=null,this.constants_=s,this.currentMarkerSvg=null,n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=u.colour||n},_n.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},_n.MarkerSvg.prototype.getMarker=function(){return this.marker_},_n.MarkerSvg.prototype.isCursor=function(){return this.marker_.type==="cursor"},_n.MarkerSvg.prototype.createDom=function(){var n=this.isCursor()?mg:Wv;return this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:n},null),this.createDomInternal_(),this.svgGroup_},_n.MarkerSvg.prototype.setParent_=function(n){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),n.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),n.setMarkerSvg(this.getSvgRoot())),this.parent_=n},_n.MarkerSvg.prototype.draw=function(n,s){if(s){this.constants_=this.workspace_.getRenderer().getConstants();var u=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||u,this.applyColour_(s),this.showAtLocation_(s),this.fireMarkerEvent_(n,s),n=this.currentMarkerSvg.childNodes[0],n!==void 0&&n.beginElement&&n.beginElement()}else this.hide()},_n.MarkerSvg.prototype.showAtLocation_=function(n){var s=n.getLocation().type;n.getType()===Be.ASTNode.types.BLOCK?this.showWithBlock_(n):n.getType()===Be.ASTNode.types.OUTPUT?this.showWithOutput_(n):s===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE?this.showWithInput_(n):s===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?this.showWithNext_(n):n.getType()===Be.ASTNode.types.PREVIOUS?this.showWithPrevious_(n):n.getType()===Be.ASTNode.types.FIELD?this.showWithField_(n):n.getType()===Be.ASTNode.types.WORKSPACE?this.showWithCoordinates_(n):n.getType()===Be.ASTNode.types.STACK&&this.showWithStack_(n)},_n.MarkerSvg.prototype.showWithBlockPrevOutput_=function(n){n=n.getSourceBlock();var s=n.width,u=n.height,d=u*Td,T=this.constants_.CURSOR_BLOCK_PADDING;n.previousConnection?(u=this.constants_.shapeFor(n.previousConnection),this.positionPrevious_(s,T,d,u)):n.outputConnection?(d=this.constants_.shapeFor(n.outputConnection),this.positionOutput_(s,u,d)):this.positionBlock_(s,T,d),this.setParent_(n),this.showCurrent_()},_n.MarkerSvg.prototype.showWithBlock_=function(n){this.showWithBlockPrevOutput_(n)},_n.MarkerSvg.prototype.showWithPrevious_=function(n){this.showWithBlockPrevOutput_(n)},_n.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithBlockPrevOutput_(n)},_n.MarkerSvg.prototype.showWithCoordinates_=function(n){var s=n.getWsCoordinate();n=s.x,s=s.y,this.workspace_.RTL&&(n-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(n,s,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},_n.MarkerSvg.prototype.showWithField_=function(n){n=n.getLocation();var s=n.getSize().width,u=n.getSize().height;this.positionRect_(0,0,s,u),this.setParent_(n),this.showCurrent_()},_n.MarkerSvg.prototype.showWithInput_=function(n){n=n.getLocation();var s=n.getSourceBlock();this.positionInput_(n),this.setParent_(s),this.showCurrent_()},_n.MarkerSvg.prototype.showWithNext_=function(n){var s=n.getLocation();n=s.getSourceBlock();var u=0;s=s.getOffsetInBlock().y;var d=n.getHeightWidth().width;this.workspace_.RTL&&(u=-d),this.positionLine_(u,s,d),this.setParent_(n),this.showCurrent_()},_n.MarkerSvg.prototype.showWithStack_=function(n){n=n.getLocation();var s=n.getHeightWidth(),u=s.width+this.constants_.CURSOR_STACK_PADDING;s=s.height+this.constants_.CURSOR_STACK_PADDING;var d=-this.constants_.CURSOR_STACK_PADDING/2,T=-this.constants_.CURSOR_STACK_PADDING/2,w=d;this.workspace_.RTL&&(w=-(u+d)),this.positionRect_(w,T,u,s),this.setParent_(n),this.showCurrent_()},_n.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},_n.MarkerSvg.prototype.positionBlock_=function(n,s,u){n=(0,fe.moveBy)(-s,u)+(0,fe.lineOnAxis)("V",-s)+(0,fe.lineOnAxis)("H",n+2*s)+(0,fe.lineOnAxis)("V",u),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},_n.MarkerSvg.prototype.positionInput_=function(n){var s=n.getOffsetInBlock().x,u=n.getOffsetInBlock().y;n=(0,fe.moveTo)(0,0)+this.constants_.shapeFor(n).pathDown,this.markerInput_.setAttribute("d",n),this.markerInput_.setAttribute("transform","translate("+s+","+u+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},_n.MarkerSvg.prototype.positionLine_=function(n,s,u){this.markerSvgLine_.setAttribute("x",n),this.markerSvgLine_.setAttribute("y",s),this.markerSvgLine_.setAttribute("width",u),this.currentMarkerSvg=this.markerSvgLine_},_n.MarkerSvg.prototype.positionOutput_=function(n,s,u){n=(0,fe.moveBy)(n,0)+(0,fe.lineOnAxis)("h",-(n-u.width))+(0,fe.lineOnAxis)("v",this.constants_.TAB_OFFSET_FROM_TOP)+u.pathDown+(0,fe.lineOnAxis)("V",s)+(0,fe.lineOnAxis)("H",n),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},_n.MarkerSvg.prototype.positionPrevious_=function(n,s,u,d){n=(0,fe.moveBy)(-s,u)+(0,fe.lineOnAxis)("V",-s)+(0,fe.lineOnAxis)("H",this.constants_.NOTCH_OFFSET_LEFT)+d.pathLeft+(0,fe.lineOnAxis)("H",n+2*s)+(0,fe.lineOnAxis)("V",u),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},_n.MarkerSvg.prototype.positionRect_=function(n,s,u,d){this.markerSvgRect_.setAttribute("x",n),this.markerSvgRect_.setAttribute("y",s),this.markerSvgRect_.setAttribute("width",u),this.markerSvgRect_.setAttribute("height",d),this.currentMarkerSvg=this.markerSvgRect_},_n.MarkerSvg.prototype.flipRtl_=function(n){n.setAttribute("transform","scale(-1 1)")},_n.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},_n.MarkerSvg.prototype.fireMarkerEvent_=function(n,s){var u=s.getSourceBlock();n=new((0,B.get)(B.MARKER_MOVE))(u,this.isCursor(),n,s),(0,B.fire)(n)},_n.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},_n.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=(0,S.createSvgElement)(ce.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=(0,S.createSvgElement)(ce.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=(0,S.createSvgElement)(ce.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=(0,S.createSvgElement)(ce.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();(0,S.createSvgElement)(ce.Svg.ANIMATE,n,this.markerSvgLine_),(0,S.createSvgElement)(ce.Svg.ANIMATE,n,this.markerInput_),n.attributeName="stroke",(0,S.createSvgElement)(ce.Svg.ANIMATE,n,this.markerBlock_)}return this.markerSvg_},_n.MarkerSvg.prototype.applyColour_=function(n){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(n=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",n),this.markerInput_.firstChild.setAttribute("values",n),this.markerBlock_.firstChild.setAttribute("values",n))},_n.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&(0,S.removeNode)(this.svgGroup_)};var Gh={NextConnection:function(n,s){Gh.NextConnection.superClass_.constructor.call(this,n,s),this.type|=ne.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}};(0,t.module$exports$Blockly$utils$object.inherits)(Gh.NextConnection,ul.Connection);var Vh={OutputConnection:function(n,s){Vh.OutputConnection.superClass_.constructor.call(this,n,s),this.type|=ne.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0}};(0,t.module$exports$Blockly$utils$object.inherits)(Vh.OutputConnection,ul.Connection);var Lo={PathObject:function(n,s,u){this.constants=u,this.svgRoot=n,this.svgPath=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=s,this.markerSvg=this.cursorSvg=null}};Lo.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n)},Lo.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},Lo.PathObject.prototype.setCursorSvg=function(n){n?(this.svgRoot.appendChild(n),this.cursorSvg=n):this.cursorSvg=null},Lo.PathObject.prototype.setMarkerSvg=function(n){n?(this.cursorSvg?this.svgRoot.insertBefore(n,this.cursorSvg):this.svgRoot.appendChild(n),this.markerSvg=n):this.markerSvg=null},Lo.PathObject.prototype.applyColour=function(n){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(n.isShadow()),this.updateDisabled_(!n.isEnabled()||n.getInheritedDisabled())},Lo.PathObject.prototype.setStyle=function(n){this.style=n},Lo.PathObject.prototype.setClass_=function(n,s){s?(0,S.addClass)(this.svgRoot,n):(0,S.removeClass)(this.svgRoot,n)},Lo.PathObject.prototype.updateHighlighted=function(n){n?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},Lo.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Lo.PathObject.prototype.updateDisabled_=function(n){this.setClass_("blocklyDisabled",n),n&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},Lo.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n)},Lo.PathObject.prototype.updateDraggingDelete=function(n){this.setClass_("blocklyDraggingDelete",n)},Lo.PathObject.prototype.updateInsertionMarker=function(n){this.setClass_("blocklyInsertionMarker",n)},Lo.PathObject.prototype.updateMovable=function(n){this.setClass_("blocklyDraggable",n)},Lo.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n)},Lo.PathObject.prototype.updateShapeForInputHighlight=function(n,s){};var vu={PreviousConnection:function(n,s){vu.PreviousConnection.superClass_.constructor.call(this,n,s),this.type|=ne.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}};(0,t.module$exports$Blockly$utils$object.inherits)(vu.PreviousConnection,ul.Connection),t.module$exports$Blockly$Input={Align:{LEFT:-1,CENTRE:0,RIGHT:1},Input:function(n,s,u,d){if(n!==t.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&!s)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=n,this.name=s,this.sourceBlock_=u,this.connection=d,this.fieldRow=[]}},t.module$exports$Blockly$Input.Input.prototype.align=t.module$exports$Blockly$Input.Align.LEFT,t.module$exports$Blockly$Input.Input.prototype.visible_=!0,t.module$exports$Blockly$Input.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.module$exports$Blockly$Input.Input.prototype.appendField=function(n,s){return this.insertFieldAt(this.fieldRow.length,n,s),this},t.module$exports$Blockly$Input.Input.prototype.insertFieldAt=function(n,s,u){if(0>n||n>this.fieldRow.length)throw Error("index "+n+" out of bounds.");return(s||s===""&&u)&&(typeof s=="string"&&(s=(0,ei.fromJson)({type:"field_label",text:s})),s.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(s.init(),s.applyColour()),s.name=u,s.setVisible(this.isVisible()),s.prefixField&&(n=this.insertFieldAt(n,s.prefixField)),this.fieldRow.splice(n,0,s),n++,s.suffixField&&(n=this.insertFieldAt(n,s.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),n},t.module$exports$Blockly$Input.Input.prototype.removeField=function(n,s){for(var u=0,d;d=this.fieldRow[u];u++)if(d.name===n)return d.dispose(),this.fieldRow.splice(u,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(s)return!1;throw Error('Field "'+n+'" not found.')},t.module$exports$Blockly$Input.Input.prototype.isVisible=function(){return this.visible_},t.module$exports$Blockly$Input.Input.prototype.setVisible=function(n){var s=[];if(this.visible_===n)return s;this.visible_=n;for(var u=0,d;d=this.fieldRow[u];u++)d.setVisible(n);return this.connection&&(this.connection=this.connection,n?s=this.connection.startTrackingAll():this.connection.stopTrackingAll(),u=this.connection.targetBlock())&&(u.getSvgRoot().style.display=n?"block":"none"),s},t.module$exports$Blockly$Input.Input.prototype.markDirty=function(){for(var n=0,s;s=this.fieldRow[n];n++)s.markDirty()},t.module$exports$Blockly$Input.Input.prototype.setCheck=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(n),this},t.module$exports$Blockly$Input.Input.prototype.setAlign=function(n){return this.align=n,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.module$exports$Blockly$Input.Input.prototype.setShadowDom=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(n),this},t.module$exports$Blockly$Input.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.module$exports$Blockly$Input.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var n=0;n<this.fieldRow.length;n++)this.fieldRow[n].init()},t.module$exports$Blockly$Input.Input.prototype.dispose=function(){for(var n=0,s;s=this.fieldRow[n];n++)s.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null};var Sa={RoundCorner:function(n,s){Sa.RoundCorner.superClass_.constructor.call(this,n),this.type=(s&&s!=="left"?ne.Types.RIGHT_ROUND_CORNER:ne.Types.LEFT_ROUND_CORNER)|ne.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}};(0,t.module$exports$Blockly$utils$object.inherits)(Sa.RoundCorner,cl.Measurable);var Tu={SpacerRow:function(n,s,u){Tu.SpacerRow.superClass_.constructor.call(this,n),this.type=this.type|ne.Types.SPACER|ne.Types.BETWEEN_ROW_SPACER,this.width=u,this.height=s,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new Hr.InRowSpacer(this.constants_,u)]}};(0,t.module$exports$Blockly$utils$object.inherits)(Tu.SpacerRow,Rs.Row),Tu.SpacerRow.prototype.measure=function(){};var _c={SquareCorner:function(n,s){_c.SquareCorner.superClass_.constructor.call(this,n),this.type=(s&&s!=="left"?ne.Types.RIGHT_SQUARE_CORNER:ne.Types.LEFT_SQUARE_CORNER)|ne.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING}};(0,t.module$exports$Blockly$utils$object.inherits)(_c.SquareCorner,cl.Measurable);var Ca={StatementInput:function(n,s){Ca.StatementInput.superClass_.constructor.call(this,n,s),this.type|=ne.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}};(0,t.module$exports$Blockly$utils$object.inherits)(Ca.StatementInput,va.InputConnection);var ji={TopRow:function(n){ji.TopRow.superClass_.constructor.call(this,n),this.type|=ne.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null}};(0,t.module$exports$Blockly$utils$object.inherits)(ji.TopRow,Rs.Row),ji.TopRow.prototype.hasLeftSquareCorner=function(n){var s=(n.hat?n.hat==="cap":this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection,u=n.getPreviousBlock();return!!n.outputConnection||s||(u?u.getNextBlock()===n:!1)},ji.TopRow.prototype.hasRightSquareCorner=function(n){return!0},ji.TopRow.prototype.measure=function(){for(var n=0,s=0,u=0,d=0;d<this.elements.length;d++){var T=this.elements[d];s+=T.width,ne.Types.isSpacer(T)||(ne.Types.isHat(T)?u=Math.max(u,T.ascenderHeight):n=Math.max(n,T.height))}this.width=Math.max(this.minWidth,s),this.height=Math.max(this.minHeight,n)+u,this.capline=this.ascenderHeight=u,this.widthWithConnectedBlocks=this.width},ji.TopRow.prototype.startsWithElemSpacer=function(){return!1},ji.TopRow.prototype.endsWithElemSpacer=function(){return!1};var eo={RenderInfo:function(n,s){this.block_=s,this.renderer_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=s.outputConnection?new Vh.OutputConnection(this.constants_,s.outputConnection):null,this.isInline=s.getInputsInline()&&!s.isCollapsed(),this.isCollapsed=s.isCollapsed(),this.isInsertionMarker=s.isInsertionMarker(),this.RTL=s.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new ji.TopRow(this.constants_),this.bottomRow=new Oo.BottomRow(this.constants_),this.startY=this.startX=0}};eo.RenderInfo.prototype.getRenderer=function(){return this.renderer_},eo.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},eo.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var n=new Ea.InputRow(this.constants_);this.inputRows.push(n);for(var s=this.block_.getIcons(),u=0,d;d=s[u];u++){var T=new Ta.Icon(this.constants_,d);this.isCollapsed&&d.collapseHidden?this.hiddenIcons.push(T):n.elements.push(T)}for(d=null,s=0;u=this.block_.inputList[s];s++)if(u.isVisible()){for(this.shouldStartNewRow_(u,d)&&(this.rows.push(n),n=new Ea.InputRow(this.constants_),this.inputRows.push(n)),d=0;T=u.fieldRow[d];d++)n.elements.push(new dl.Field(this.constants_,T,u));this.addInput_(u,n),d=u}this.isCollapsed&&(n.hasJaggedEdge=!0,n.elements.push(new xa.JaggedEdge(this.constants_))),(n.elements.length||n.hasDummyInput)&&this.rows.push(n),this.populateBottomRow_(),this.rows.push(this.bottomRow)},eo.RenderInfo.prototype.populateTopRow_=function(){var n=!!this.block_.previousConnection,s=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!n,u=this.topRow.hasLeftSquareCorner(this.block_)?_c.SquareCorner:Sa.RoundCorner;this.topRow.elements.push(new u(this.constants_)),s?(n=new Xi.Hat(this.constants_),this.topRow.elements.push(n),this.topRow.capline=n.ascenderHeight):n&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new vu.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,u=this.topRow.hasRightSquareCorner(this.block_)?_c.SquareCorner:Sa.RoundCorner,this.topRow.elements.push(new u(this.constants_,"right"))},eo.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new _c.SquareCorner(this.constants_)):this.bottomRow.elements.push(new Sa.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Gh.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new _c.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new Sa.RoundCorner(this.constants_,"right"))},eo.RenderInfo.prototype.addInput_=function(n,s){this.isInline&&n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE?(s.elements.push(new yu.InlineInput(this.constants_,n)),s.hasInlineInput=!0):n.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?(s.elements.push(new Ca.StatementInput(this.constants_,n)),s.hasStatement=!0):n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE?(s.elements.push(new Os.ExternalValueInput(this.constants_,n)),s.hasExternalInput=!0):n.type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&(s.minHeight=Math.max(s.minHeight,n.getSourceBlock()&&n.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),s.hasDummyInput=!0),s.align===null&&(s.align=n.align)},eo.RenderInfo.prototype.shouldStartNewRow_=function(n,s){return s?n.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||s.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?!0:n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE||n.type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY?!this.isInline:!1:!1},eo.RenderInfo.prototype.addElemSpacing_=function(){for(var n=0,s;s=this.rows[n];n++){var u=s.elements;if(s.elements=[],s.startsWithElemSpacer()&&s.elements.push(new Hr.InRowSpacer(this.constants_,this.getInRowSpacing_(null,u[0]))),u.length){for(var d=0;d<u.length-1;d++){s.elements.push(u[d]);var T=this.getInRowSpacing_(u[d],u[d+1]);s.elements.push(new Hr.InRowSpacer(this.constants_,T))}s.elements.push(u[u.length-1]),s.endsWithElemSpacer()&&s.elements.push(new Hr.InRowSpacer(this.constants_,this.getInRowSpacing_(u[u.length-1],null)))}}},eo.RenderInfo.prototype.getInRowSpacing_=function(n,s){if(!n&&s&&ne.Types.isStatementInput(s))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(n&&ne.Types.isInput(n)&&!s){if(ne.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(ne.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(ne.Types.isStatementInput(n))return this.constants_.NO_PADDING}return n&&ne.Types.isLeftSquareCorner(n)&&s&&(ne.Types.isPreviousConnection(s)||ne.Types.isNextConnection(s))?s.notchOffset:n&&ne.Types.isLeftRoundedCorner(n)&&s&&(ne.Types.isPreviousConnection(s)||ne.Types.isNextConnection(s))?s.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},eo.RenderInfo.prototype.computeBounds_=function(){for(var n=0,s=0,u=0,d=0,T;T=this.rows[d];d++){if(T.measure(),s=Math.max(s,T.width),T.hasStatement){var w=T.getLastInput();n=Math.max(n,T.width-w.width)}u=Math.max(u,T.widthWithConnectedBlocks)}for(this.statementEdge=n,this.width=s,n=0;d=this.rows[n];n++)d.hasStatement&&(d.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(s,u),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},eo.RenderInfo.prototype.alignRowElements_=function(){for(var n=0,s;s=this.rows[n];n++)if(s.hasStatement)this.alignStatementRow_(s);else{var u=s.width;u=this.getDesiredRowWidth_(s)-u,0<u&&this.addAlignmentPadding_(s,u),ne.Types.isTopOrBottomRow(s)&&(s.widthWithConnectedBlocks=s.width)}},eo.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.width-this.startX},eo.RenderInfo.prototype.addAlignmentPadding_=function(n,s){var u=n.getFirstSpacer(),d=n.getLastSpacer();(n.hasExternalInput||n.hasStatement)&&(n.widthWithConnectedBlocks+=s),n.align===t.module$exports$Blockly$Input.Align.LEFT?d.width+=s:n.align===t.module$exports$Blockly$Input.Align.CENTRE?(u.width+=s/2,d.width+=s/2):n.align===t.module$exports$Blockly$Input.Align.RIGHT?u.width+=s:d.width+=s,n.width+=s},eo.RenderInfo.prototype.alignStatementRow_=function(n){var s=n.getLastInput(),u=n.width-s.width,d=this.statementEdge;u=d-u,0<u&&this.addAlignmentPadding_(n,u),u=n.width,d=this.getDesiredRowWidth_(n),s.width+=d-u,s.height=Math.max(s.height,n.height),n.width+=d-u,n.widthWithConnectedBlocks=Math.max(n.width,this.statementEdge+n.connectedBlockWidths)},eo.RenderInfo.prototype.addRowSpacing_=function(){var n=this.rows;this.rows=[];for(var s=0;s<n.length;s++)this.rows.push(n[s]),s!==n.length-1&&this.rows.push(this.makeSpacerRow_(n[s],n[s+1]))},eo.RenderInfo.prototype.makeSpacerRow_=function(n,s){var u=this.getSpacerRowHeight_(n,s),d=this.getSpacerRowWidth_(n,s);return u=new Tu.SpacerRow(this.constants_,u,d),n.hasStatement&&(u.followsStatement=!0),s.hasStatement&&(u.precedesStatement=!0),u},eo.RenderInfo.prototype.getSpacerRowWidth_=function(n,s){return this.width-this.startX},eo.RenderInfo.prototype.getSpacerRowHeight_=function(n,s){return this.constants_.MEDIUM_PADDING},eo.RenderInfo.prototype.getElemCenterline_=function(n,s){return ne.Types.isSpacer(s)?n.yPos+s.height/2:ne.Types.isBottomRow(n)?(n=n.yPos+n.height-n.descenderHeight,ne.Types.isNextConnection(s)?n+s.height/2:n-s.height/2):ne.Types.isTopRow(n)?ne.Types.isHat(s)?n.capline-s.height/2:n.capline+s.height/2:n.yPos+n.height/2},eo.RenderInfo.prototype.recordElemPositions_=function(n){for(var s=n.xPos,u=0,d;d=n.elements[u];u++)ne.Types.isSpacer(d)&&(d.height=n.height),d.xPos=s,d.centerline=this.getElemCenterline_(n,d),s+=d.width},eo.RenderInfo.prototype.finalize_=function(){for(var n=0,s=0,u=0,d;d=this.rows[u];u++)d.yPos=s,d.xPos=this.startX,s+=d.height,n=Math.max(n,d.widthWithConnectedBlocks),this.recordElemPositions_(d);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=n+this.startX,this.height=s,this.startY=this.topRow.capline,this.bottomRow.baseline=s-this.bottomRow.descenderHeight};var No={Renderer:function(n){this.name=n,this.overrides=this.constants_=null}};No.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},No.Renderer.prototype.init=function(n,s){this.constants_=this.makeConstants_(),s&&(this.overrides=s,(0,t.module$exports$Blockly$utils$object.mixin)(this.constants_,s)),this.constants_.setTheme(n),this.constants_.init()},No.Renderer.prototype.createDom=function(n,s){this.constants_.createDom(n,this.name+"-"+s.name,"."+this.getClassName()+"."+s.getClassName())},No.Renderer.prototype.refreshDom=function(n,s){var u=this.getConstants();u.dispose(),this.constants_=this.makeConstants_(),this.overrides&&(0,t.module$exports$Blockly$utils$object.mixin)(this.constants_,this.overrides),this.constants_.randomIdentifier=u.randomIdentifier,this.constants_.setTheme(s),this.constants_.init(),this.createDom(n,s)},No.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},No.Renderer.prototype.makeConstants_=function(){return new Fn.ConstantProvider},No.Renderer.prototype.makeRenderInfo_=function(n){return new eo.RenderInfo(this,n)},No.Renderer.prototype.makeDrawer_=function(n,s){return new Zn.Drawer(n,s)},No.Renderer.prototype.makeDebugger_=function(){var n=gn.Debug;if(!n)throw Error("Missing require for Blockly.blockRendering.Debug");return new n(this.getConstants())},No.Renderer.prototype.makeMarkerDrawer=function(n,s){return new _n.MarkerSvg(n,this.getConstants(),s)},No.Renderer.prototype.makePathObject=function(n,s){return new Lo.PathObject(n,s,this.constants_)},No.Renderer.prototype.getConstants=function(){return this.constants_},No.Renderer.prototype.shouldHighlightConnection=function(n){return!0},No.Renderer.prototype.orphanCanConnectAtEnd=function(n,s,u){return!!ft.Connection.getConnectionForOrphanedConnection(n,u===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?s.outputConnection:s.previousConnection)},No.Renderer.prototype.getConnectionPreviewMethod=function(n,s,u){return s.type===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE||s.type===t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?!n.isConnected()||this.orphanCanConnectAtEnd(u,n.targetBlock(),s.type)?tn.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:tn.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:tn.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},No.Renderer.prototype.render=function(n){(0,ko.isDebuggerEnabled)()&&!n.renderingDebugger&&(n.renderingDebugger=this.makeDebugger_());var s=this.makeRenderInfo_(n);s.measure(),this.makeDrawer_(n,s).draw()};var hn={isDebuggerEnabled:function(){return(0,l.warn)("Blockly.blockRendering.isDebuggerEnabled()","September 2021","September 2022","Blockly.blockRendering.debug.isDebuggerEnabled()"),(0,ko.isDebuggerEnabled)()},register:function(n,s){(0,ue.register)(ue.Type.RENDERER,n,s)},unregister:function(n){(0,ue.unregister)(ue.Type.RENDERER,n)},startDebugger:function(){(0,l.warn)("Blockly.blockRendering.startDebugger()","September 2021","September 2022","Blockly.blockRendering.debug.startDebugger()"),(0,ko.startDebugger)()},stopDebugger:function(){(0,l.warn)("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","Blockly.blockRendering.debug.stopDebugger()"),(0,ko.stopDebugger)()},init:function(n,s,u){return n=new((0,ue.getClass)(ue.Type.RENDERER,n))(n),n.init(s,u),n}};hn.BottomRow=Oo.BottomRow,hn.Connection=ul.Connection,hn.ConstantProvider=Fn.ConstantProvider,hn.Debug=gn.Debug,hn.Drawer=Zn.Drawer,hn.ExternalValueInput=Os.ExternalValueInput,hn.Field=dl.Field,hn.Hat=Xi.Hat,hn.Icon=Ta.Icon,hn.InRowSpacer=Hr.InRowSpacer,hn.InlineInput=yu.InlineInput,hn.InputConnection=va.InputConnection,hn.InputRow=Ea.InputRow,hn.IPathObject=Uh.IPathObject,hn.JaggedEdge=xa.JaggedEdge,hn.MarkerSvg=_n.MarkerSvg,hn.Measurable=cl.Measurable,hn.NextConnection=Gh.NextConnection,hn.OutputConnection=Vh.OutputConnection,hn.PathObject=Lo.PathObject,hn.PreviousConnection=vu.PreviousConnection,hn.Renderer=No.Renderer,hn.RenderInfo=eo.RenderInfo,hn.RoundCorner=Sa.RoundCorner,hn.Row=Rs.Row,hn.SpacerRow=Tu.SpacerRow,hn.SquareCorner=_c.SquareCorner,hn.StatementInput=Ca.StatementInput,hn.TopRow=ji.TopRow,hn.Types=ne.Types,hn.debug=ko;var yc;t.module$exports$Blockly$Extensions={},yc=Object.create(null),t.module$exports$Blockly$Extensions.TEST_ONLY={allExtensions:yc},t.module$exports$Blockly$Extensions.register=function(n,s){if(typeof n!="string"||n.trim()==="")throw Error('Error: Invalid extension name "'+n+'"');if(yc[n])throw Error('Error: Extension "'+n+'" is already registered.');if(typeof s!="function")throw Error('Error: Extension "'+n+'" must be a function');yc[n]=s},t.module$exports$Blockly$Extensions.registerMixin=function(n,s){if(!s||typeof s!="object")throw Error('Error: Mixin "'+n+'" must be a object');(0,t.module$exports$Blockly$Extensions.register)(n,function(){this.mixin(s)})},t.module$exports$Blockly$Extensions.registerMutator=function(n,s,u,d){var T='Error when registering mutator "'+n+'": ';xd(T,s);var w=gg(s,T);if(u&&typeof u!="function")throw Error(T+'Extension "'+n+'" is not a function');(0,t.module$exports$Blockly$Extensions.register)(n,function(){if(w){var N=t.module$exports$Blockly$Mutator.Mutator;if(!N)throw Error(T+"Missing require for Blockly.Mutator");this.setMutator(new N(d||[]))}this.mixin(s),u&&u.apply(this)})},t.module$exports$Blockly$Extensions.unregister=function(n){(0,t.module$exports$Blockly$Extensions.isRegistered)(n)?delete yc[n]:console.warn('No extension mapping for name "'+n+'" found to unregister')},t.module$exports$Blockly$Extensions.isRegistered=function(n){return!!yc[n]},t.module$exports$Blockly$Extensions.apply=function(n,s,u){var d=yc[n];if(typeof d!="function")throw Error('Error: Extension "'+n+'" not found.');var T;if(u?Ds(n,s):T=Sd(s),d.apply(s),u)xd('Error after applying mutator "'+n+'": ',s);else if(!_g(T,s))throw Error('Error when applying extension "'+n+'": mutation properties changed when applying a non-mutator extension.')};var Ds=function(n,s){if(Sd(s).length)throw Error('Error: tried to apply mutation "'+n+'" to a block that already has mutator functions.  Block id: '+s.id)},vi=function(n,s){return Ed(n.mutationToDom,n.domToMutation,s+" mutationToDom/domToMutation")},zv=function(n,s){return Ed(n.saveExtraState,n.loadExtraState,s+" saveExtraState/loadExtraState")},gg=function(n,s){return Ed(n.compose,n.decompose,s+" compose/decompose")},Ed=function(n,s,u){if(n&&s){if(typeof n!="function"||typeof s!="function")throw Error(u+" must be a function");return!0}if(!n&&!s)return!1;throw Error(u+"Must have both or neither functions")},xd=function(n,s){var u=vi(s,n),d=zv(s,n);if(!u&&!d)throw Error(n+"Mutations must contain either XML hooks, or JSON hooks, or both");gg(s,n)},Sd=function(n){var s=[];return n.domToMutation!==void 0&&s.push(n.domToMutation),n.mutationToDom!==void 0&&s.push(n.mutationToDom),n.saveExtraState!==void 0&&s.push(n.saveExtraState),n.loadExtraState!==void 0&&s.push(n.loadExtraState),n.compose!==void 0&&s.push(n.compose),n.decompose!==void 0&&s.push(n.decompose),s},_g=function(n,s){if(s=Sd(s),s.length!==n.length)return!1;for(var u=0;u<s.length;u++)if(n[u]!==s[u])return!1;return!0};t.module$exports$Blockly$Extensions.runAfterPageLoad=function(n){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")n();else var s=setInterval(function(){document.readyState==="complete"&&(clearInterval(s),n())},10)},t.module$exports$Blockly$Extensions.buildTooltipForDropdown=function(n,s){var u=[];return typeof document=="object"&&(0,t.module$exports$Blockly$Extensions.runAfterPageLoad)(function(){for(var d in s)(0,qt.checkMessageReferences)(s[d])}),function(){this.type&&u.indexOf(this.type)===-1&&(Xv(this,n,s),u.push(this.type)),this.setTooltip(function(){var d=String(this.getFieldValue(n)),T=s[d];return T===null?u.indexOf(this.type)===-1&&(d="No tooltip mapping for value "+d+" of field "+n,this.type!==null&&(d+=" of block type "+this.type),console.warn(d+".")):T=(0,qt.replaceMessageReferences)(T),T}.bind(this))}};var Xv=function(n,s,u){var d=n.getField(s);if(!d.isOptionListDynamic()){d=d.getOptions();for(var T=0;T<d.length;T++){var w=d[T][1];u[w]===null&&console.warn("No tooltip mapping for value "+w+" of field "+s+" of block type "+n.type)}}};t.module$exports$Blockly$Extensions.buildTooltipWithFieldText=function(n,s){return typeof document=="object"&&(0,t.module$exports$Blockly$Extensions.runAfterPageLoad)(function(){(0,qt.checkMessageReferences)(n)}),function(){this.setTooltip(function(){var u=this.getField(s);return(0,qt.replaceMessageReferences)(n).replace("%1",u?u.getText():"")}.bind(this))}};var yg=function(){this.tooltipWhenNotConnected=this.tooltip,this.setTooltip(function(){var n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||this.tooltipWhenNotConnected}.bind(this))};(0,t.module$exports$Blockly$Extensions.register)("parent_tooltip_when_inline",yg);var jv={Metrics:function(){}},Ht={aria:Te,colour:Sn};Ht.Coordinate=W.Coordinate,Ht.deprecation=l,Ht.dom=S,Ht.global=t.module$exports$Blockly$utils$global.globalThis,Ht.idGenerator=Ne,Ht.KeyCodes=dt.KeyCodes,Ht.math=me,Ht.Metrics=jv.Metrics,Ht.object=t.module$exports$Blockly$utils$object,Ht.parsing=qt,Ht.Rect=nt.Rect,Ht.Size=Me.Size,Ht.string=t.module$exports$Blockly$utils$string,Ht.style=we,Ht.Svg=ce.Svg,Ht.svgPaths=fe,Ht.svgMath=it,Ht.toolbox=at,Ht.userAgent=b,Ht.xml=t.module$exports$Blockly$utils$xml,Ht.noEvent=function(n){(0,l.warn)("Blockly.utils.noEvent","September 2021","September 2022"),n.preventDefault(),n.stopPropagation()},Ht.isTargetInput=function(n){return(0,l.warn)("Blockly.utils.isTargetInput","September 2021","September 2022","Blockly.browserEvents.isTargetInput"),(0,A.isTargetInput)(n)},Ht.getRelativeXY=function(n){return(0,l.warn)("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),(0,it.getRelativeXY)(n)},Ht.getInjectionDivXY_=function(n){return(0,l.warn)("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),(0,it.getInjectionDivXY)(n)},Ht.isRightButton=function(n){return(0,l.warn)("Blockly.utils.isRightButton","September 2021","September 2022","Blockly.browserEvents.isRightButton"),(0,A.isRightButton)(n)},Ht.mouseToSvg=function(n,s,u){return(0,l.warn)("Blockly.utils.mouseToSvg","September 2021","September 2022","Blockly.browserEvents.mouseToSvg"),(0,A.mouseToSvg)(n,s,u)},Ht.getScrollDeltaPixels=function(n){return(0,l.warn)("Blockly.utils.getScrollDeltaPixels","September 2021","September 2022","Blockly.browserEvents.getScrollDeltaPixels"),(0,A.getScrollDeltaPixels)(n)},Ht.tokenizeInterpolation=function(n){return(0,l.warn)("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),(0,qt.tokenizeInterpolation)(n)},Ht.replaceMessageReferences=function(n){return(0,l.warn)("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),(0,qt.replaceMessageReferences)(n)},Ht.checkMessageReferences=function(n){return(0,l.warn)("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),(0,qt.checkMessageReferences)(n)},Ht.genUid=function(){return(0,l.warn)("Blockly.utils.genUid","September 2021","September 2022","Blockly.utils.idGenerator.genUid"),(0,Ne.genUid)()},Ht.is3dSupported=function(){return(0,l.warn)("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),(0,it.is3dSupported)()},Ht.getViewportBBox=function(){return(0,l.warn)("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),(0,it.getViewportBBox)()},Ht.arrayRemove=function(n,s){return(0,l.warn)("Blockly.utils.arrayRemove","December 2021","December 2022"),(0,Ar.removeElem)(n,s)},Ht.getDocumentScroll=function(){return(0,l.warn)("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),(0,it.getDocumentScroll)()},Ht.getBlockTypeCounts=function(n,s){return(0,l.warn)("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),(0,t.module$exports$Blockly$common.getBlockTypeCounts)(n,s)},Ht.screenToWsCoordinates=function(n,s){return(0,l.warn)("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),(0,it.screenToWsCoordinates)(n,s)},Ht.parseBlockColour=function(n){return(0,l.warn)("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),(0,qt.parseBlockColour)(n)},Ht.runAfterPageLoad=function(n){(0,l.warn)("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),(0,t.module$exports$Blockly$Extensions.runAfterPageLoad)(n)};var Ls={BlockDelete:function(n){if(Ls.BlockDelete.superClass_.constructor.call(this,n),n){if(n.getParent())throw Error("Connected blocks cannot be deleted.");n.isShadow()&&(this.recordUndo=!1),this.oldXml=(0,t.module$exports$Blockly$Xml.blockToDomWithXY)(n),this.ids=(0,B.getDescendantIds)(n),this.wasShadow=n.isShadow(),this.oldJson=(0,jo.save)(n,{addCoordinates:!0})}}};(0,t.module$exports$Blockly$utils$object.inherits)(Ls.BlockDelete,sr.BlockBase),Ls.BlockDelete.prototype.type=B.DELETE,Ls.BlockDelete.prototype.toJson=function(){var n=Ls.BlockDelete.superClass_.toJson.call(this);return n.oldXml=(0,t.module$exports$Blockly$Xml.domToText)(this.oldXml),n.ids=this.ids,n.wasShadow=this.wasShadow,n.oldJson=this.oldJson,this.recordUndo||(n.recordUndo=this.recordUndo),n},Ls.BlockDelete.prototype.fromJson=function(n){Ls.BlockDelete.superClass_.fromJson.call(this,n),this.oldXml=(0,t.module$exports$Blockly$Xml.textToDom)(n.oldXml),this.ids=n.ids,this.wasShadow=n.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=n.oldJson,n.recordUndo!==void 0&&(this.recordUndo=n.recordUndo)},Ls.BlockDelete.prototype.run=function(n){var s=this.getEventWorkspace_();if(n)for(n=0;n<this.ids.length;n++){var u=this.ids[n],d=s.getBlockById(u);d?d.dispose(!1):u===this.blockId&&console.warn("Can't delete non-existent block: "+u)}else(0,jo.append)(this.oldJson,s)},(0,ue.register)(ue.Type.EVENT,B.DELETE,Ls.BlockDelete);var Je={Block:function(n,s,u){var d=t.module$exports$Blockly$Generator.Generator;if(d&&typeof d.prototype[s]!="undefined")throw Error('Block prototypeName "'+s+'" conflicts with Blockly.Generator members.');if(this.id=u&&!n.getBlockById(u)?u:(0,Ne.genUid)(),n.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new Me.Size(160,80)},this.xy_=new W.Coordinate(0,0),this.workspace=n,this.isInFlyout=n.isFlyout,this.isInMutator=n.isMutator,this.RTL=n.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,s){if(this.type=s,u=t.module$exports$Blockly$blocks.Blocks[s],!u||typeof u!="object")throw TypeError("Unknown block type: "+s);(0,t.module$exports$Blockly$utils$object.mixin)(this,u)}n.addTopBlock(this),n.addTypedBlock(this),(n=(0,B.getGroup)())||(0,B.setGroup)(!0),s=(0,B.getRecordUndo)();try{typeof this.init=="function"&&((0,B.setRecordUndo)(!1),this.init(),(0,B.setRecordUndo)(s)),(0,B.isEnabled)()&&(0,B.fire)(new((0,B.get)(B.CREATE))(this))}finally{n||(0,B.setGroup)(!1),(0,B.setRecordUndo)(s)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}};Je.Block.COLLAPSED_INPUT_NAME=pl.COLLAPSED_INPUT_NAME,Je.Block.COLLAPSED_FIELD_NAME=pl.COLLAPSED_FIELD_NAME,Je.Block.prototype.data=null,Je.Block.prototype.disposed=!1,Je.Block.prototype.hue_=null,Je.Block.prototype.colour_="#000000",Je.Block.prototype.styleName_="",Je.Block.prototype.dispose=function(n){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(n),(0,B.isEnabled)()&&(0,B.fire)(new((0,B.get)(B.DELETE))(this)),(0,B.disable)();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),(0,t.module$exports$Blockly$common.getSelected)()===this&&(0,t.module$exports$Blockly$common.setSelected)(null);for(var s=this.childBlocks_.length-1;0<=s;s--)this.childBlocks_[s].dispose(!1);for(n=0,s=void 0;s=this.inputList[n];n++)s.dispose();this.inputList.length=0;var u=this.getConnections_(!0);for(n=0,s=void 0;s=u[n];n++)s.dispose()}finally{(0,B.enable)(),this.disposed=!0}}},Je.Block.prototype.initModel=function(){for(var n=0,s;s=this.inputList[n];n++)for(var u=0,d;d=s.fieldRow[u];u++)d.initModel&&d.initModel()},Je.Block.prototype.unplug=function(n){this.outputConnection&&this.unplugFromRow_(n),this.previousConnection&&this.unplugFromStack_(n)},Je.Block.prototype.unplugFromRow_=function(n){var s=null;this.outputConnection.isConnected()&&(s=this.outputConnection.targetConnection,this.outputConnection.disconnect()),s&&n&&(n=this.getOnlyValueConnection_())&&n.isConnected()&&!n.targetBlock().isShadow()&&(n=n.targetConnection,n.disconnect(),this.workspace.connectionChecker.canConnect(n,s,!1)?s.connect(n):n.onFailedConnect(s))},Je.Block.prototype.getOnlyValueConnection_=function(){for(var n=null,s=0;s<this.inputList.length;s++){var u=this.inputList[s].connection;if(u&&u.type===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&u.targetConnection){if(n)return null;n=u}}return n},Je.Block.prototype.unplugFromStack_=function(n){var s=null;this.previousConnection.isConnected()&&(s=this.previousConnection.targetConnection,this.previousConnection.disconnect());var u=this.getNextBlock();n&&u&&!u.isShadow()&&(n=this.nextConnection.targetConnection,n.disconnect(),s&&this.workspace.connectionChecker.canConnect(s,n,!1)&&s.connect(n))},Je.Block.prototype.getConnections_=function(n){n=[],this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection);for(var s=0,u;u=this.inputList[s];s++)u.connection&&n.push(u.connection);return n},Je.Block.prototype.lastConnectionInStack=function(n){for(var s=this.nextConnection;s;){var u=s.targetBlock();if(!u||n&&u.isShadow())return s;s=u.nextConnection}return null},Je.Block.prototype.bumpNeighbours=function(){},Je.Block.prototype.getParent=function(){return this.parentBlock_},Je.Block.prototype.getInputWithBlock=function(n){for(var s=0,u;u=this.inputList[s];s++)if(u.connection&&u.connection.targetBlock()===n)return u;return null},Je.Block.prototype.getSurroundParent=function(){var n=this;do{var s=n;if(n=n.getParent(),!n)return null}while(n.getNextBlock()===s);return n},Je.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},Je.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},Je.Block.prototype.getFirstStatementConnection=function(){for(var n=0,s;s=this.inputList[n];n++)if(s.connection&&s.connection.type===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)return s.connection;return null},Je.Block.prototype.getRootBlock=function(){var n=this;do{var s=n;n=s.parentBlock_}while(n);return s},Je.Block.prototype.getTopStackBlock=function(){var n=this;do var s=n.getPreviousBlock();while(s&&s.getNextBlock()===n&&(n=s));return n},Je.Block.prototype.getChildren=function(n){if(!n)return this.childBlocks_;n=[];for(var s=0,u;u=this.inputList[s];s++)u.connection&&(u=u.connection.targetBlock())&&n.push(u);return(s=this.getNextBlock())&&n.push(s),n},Je.Block.prototype.setParent=function(n){if(n!==this.parentBlock_){var s=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),u=!!s;if(u&&n&&s!==n)throw Error("Block connected to superior one that is not new parent.");if(!u&&n)throw Error("Block not connected to new parent.");if(u&&!n)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?(0,Ar.removeElem)(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=n)?n.childBlocks_.push(this):this.workspace.addTopBlock(this)}},Je.Block.prototype.getDescendants=function(n){for(var s=[this],u=this.getChildren(n),d,T=0;d=u[T];T++)s.push.apply(s,d.getDescendants(n));return s},Je.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Je.Block.prototype.setDeletable=function(n){this.deletable_=n},Je.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Je.Block.prototype.setMovable=function(n){this.movable_=n},Je.Block.prototype.isDuplicatable=function(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable((0,t.module$exports$Blockly$common.getBlockTypeCounts)(this,!0)):!0},Je.Block.prototype.isShadow=function(){return this.isShadow_},Je.Block.prototype.setShadow=function(n){this.isShadow_=n},Je.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},Je.Block.prototype.setInsertionMarker=function(n){this.isInsertionMarker_=n},Je.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Je.Block.prototype.setEditable=function(n){this.editable_=n,n=0;for(var s;s=this.inputList[n];n++)for(var u=0,d;d=s.fieldRow[u];u++)d.updateEditable()},Je.Block.prototype.isDisposed=function(){return this.disposed},Je.Block.prototype.getMatchingConnection=function(n,s){var u=this.getConnections_(!0);if(n=n.getConnections_(!0),u.length!==n.length)throw Error("Connection lists did not match in length.");for(var d=0;d<n.length;d++)if(n[d]===s)return u[d];return null},Je.Block.prototype.setHelpUrl=function(n){this.helpUrl=n},Je.Block.prototype.setTooltip=function(n){this.tooltip=n},Je.Block.prototype.getTooltip=function(){return(0,I.getTooltipOfObject)(this)},Je.Block.prototype.getColour=function(){return this.colour_},Je.Block.prototype.getStyleName=function(){return this.styleName_},Je.Block.prototype.getHue=function(){return this.hue_},Je.Block.prototype.setColour=function(n){n=(0,qt.parseBlockColour)(n),this.hue_=n.hue,this.colour_=n.hex},Je.Block.prototype.setStyle=function(n){this.styleName_=n},Je.Block.prototype.setOnChange=function(n){if(n&&typeof n!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=n)&&(this.onchangeWrapper_=n.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},Je.Block.prototype.getField=function(n){if(typeof n!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(n===void 0?"nothing":n+" of type "+typeof n)+" instead");for(var s=0,u;u=this.inputList[s];s++)for(var d=0,T;T=u.fieldRow[d];d++)if(T.name===n)return T;return null},Je.Block.prototype.getVars=function(){for(var n=[],s=0,u;u=this.inputList[s];s++)for(var d=0,T;T=u.fieldRow[d];d++)T.referencesVariables()&&n.push(T.getValue());return n},Je.Block.prototype.getVarModels=function(){for(var n=[],s=0,u;u=this.inputList[s];s++)for(var d=0,T;T=u.fieldRow[d];d++)T.referencesVariables()&&(T=this.workspace.getVariableById(T.getValue()))&&n.push(T);return n},Je.Block.prototype.updateVarName=function(n){for(var s=0,u;u=this.inputList[s];s++)for(var d=0,T;T=u.fieldRow[d];d++)T.referencesVariables()&&n.getId()===T.getValue()&&T.refreshVariableName()},Je.Block.prototype.renameVarById=function(n,s){for(var u=0,d;d=this.inputList[u];u++)for(var T=0,w;w=d.fieldRow[T];T++)w.referencesVariables()&&n===w.getValue()&&w.setValue(s)},Je.Block.prototype.getFieldValue=function(n){return(n=this.getField(n))?n.getValue():null},Je.Block.prototype.setFieldValue=function(n,s){var u=this.getField(s);if(!u)throw Error('Field "'+s+'" not found.');u.setValue(n)},Je.Block.prototype.setPreviousStatement=function(n,s){if(n)s===void 0&&(s=null),this.previousConnection||(this.previousConnection=this.makeConnection_(t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(s);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},Je.Block.prototype.setNextStatement=function(n,s){if(n)s===void 0&&(s=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)),this.nextConnection.setCheck(s);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},Je.Block.prototype.setOutput=function(n,s){if(n)s===void 0&&(s=null),this.outputConnection||(this.outputConnection=this.makeConnection_(t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE)),this.outputConnection.setCheck(s);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},Je.Block.prototype.setInputsInline=function(n){this.inputsInline!==n&&((0,B.fire)(new((0,B.get)(B.CHANGE))(this,"inline",null,this.inputsInline,n)),this.inputsInline=n)},Je.Block.prototype.getInputsInline=function(){if(this.inputsInline!==void 0)return this.inputsInline;for(var n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&this.inputList[n].type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY)return!1;for(n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE&&this.inputList[n].type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY)return!0;return!1},Je.Block.prototype.setOutputShape=function(n){this.outputShape_=n},Je.Block.prototype.getOutputShape=function(){return this.outputShape_},Je.Block.prototype.isEnabled=function(){return!this.disabled},Je.Block.prototype.setEnabled=function(n){if(this.isEnabled()!==n){var s=this.disabled;this.disabled=!n,(0,B.fire)(new((0,B.get)(B.CHANGE))(this,"disabled",null,s,!n))}},Je.Block.prototype.getInheritedDisabled=function(){for(var n=this.getSurroundParent();n;){if(n.disabled)return!0;n=n.getSurroundParent()}return!1},Je.Block.prototype.isCollapsed=function(){return this.collapsed_},Je.Block.prototype.setCollapsed=function(n){this.collapsed_!==n&&((0,B.fire)(new((0,B.get)(B.CHANGE))(this,"collapsed",null,this.collapsed_,n)),this.collapsed_=n)},Je.Block.prototype.toString=function(n,s){function u(He){var Tt=He.getCheck();return!Tt&&He.targetConnection&&(Tt=He.targetConnection.getCheck()),!!Tt&&(Tt.indexOf("Boolean")!==-1||Tt.indexOf("Number")!==-1)}function d(){N&&N.getType()===J.getType()&&N.getLocation()===J.getLocation()&&(N=null)}var T=[];s=s||"?";var w=Be.ASTNode.NAVIGATE_ALL_FIELDS;Be.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var N=Be.ASTNode.createBlockNode(this),J=N;N;){switch(N.getType()){case Be.ASTNode.types.INPUT:var ve=N.getLocation();N.in()?u(ve)&&T.push("("):T.push(s);break;case Be.ASTNode.types.FIELD:ve=N.getLocation(),ve.name!==pl.COLLAPSED_FIELD_NAME&&T.push(ve.getText())}if(ve=N,N=ve.in()||ve.next(),!N){for(N=ve.out(),d();N&&!N.next();)N=N.out(),d(),N&&N.getType()===Be.ASTNode.types.INPUT&&u(N.getLocation())&&T.push(")");N&&(N=N.next())}}for(Be.ASTNode.NAVIGATE_ALL_FIELDS=w,s=2;s<T.length;s++)T[s-2]==="("&&T[s]===")"&&(T[s-2]=T[s-1],T.splice(s-1,2));return T=T.reduce(function(He,Tt){return He+(He.substr(-1)==="("||Tt===")"?"":" ")+Tt},""),T=T.trim()||"???",n&&T.length>n&&(T=T.substring(0,n-3)+"..."),T},Je.Block.prototype.appendValueInput=function(n){return this.appendInput_(t.module$exports$Blockly$inputTypes.inputTypes.VALUE,n)},Je.Block.prototype.appendStatementInput=function(n){return this.appendInput_(t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT,n)},Je.Block.prototype.appendDummyInput=function(n){return this.appendInput_(t.module$exports$Blockly$inputTypes.inputTypes.DUMMY,n||"")},Je.Block.prototype.jsonInit=function(n){var s=n.type?'Block "'+n.type+'": ':"";if(n.output&&n.previousStatement)throw Error(s+"Must not have both an output and a previousStatement.");if(n.style&&n.style.hat&&(this.hat=n.style.hat,n.style=null),n.style&&n.colour)throw Error(s+"Must not have both a colour and a style.");n.style?this.jsonInitStyle_(n,s):this.jsonInitColour_(n,s);for(var u=0;n["message"+u]!==void 0;)this.interpolate_(n["message"+u],n["args"+u]||[],n["lastDummyAlign"+u],s),u++;if(n.inputsInline!==void 0&&this.setInputsInline(n.inputsInline),n.output!==void 0&&this.setOutput(!0,n.output),n.outputShape!==void 0&&this.setOutputShape(n.outputShape),n.previousStatement!==void 0&&this.setPreviousStatement(!0,n.previousStatement),n.nextStatement!==void 0&&this.setNextStatement(!0,n.nextStatement),n.tooltip!==void 0&&(u=(0,qt.replaceMessageReferences)(n.tooltip),this.setTooltip(u)),n.enableContextMenu!==void 0&&(this.contextMenu=!!n.enableContextMenu),n.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!n.suppressPrefixSuffix),n.helpUrl!==void 0&&(u=(0,qt.replaceMessageReferences)(n.helpUrl),this.setHelpUrl(u)),typeof n.extensions=="string"&&(console.warn(s+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+n.type+"' block."),n.extensions=[n.extensions]),n.mutator!==void 0&&(0,t.module$exports$Blockly$Extensions.apply)(n.mutator,this,!0),n=n.extensions,Array.isArray(n))for(s=0;s<n.length;s++)(0,t.module$exports$Blockly$Extensions.apply)(n[s],this,!1)},Je.Block.prototype.jsonInitColour_=function(n,s){if("colour"in n)if(n.colour===void 0)console.warn(s+"Undefined colour value.");else{n=n.colour;try{this.setColour(n)}catch{console.warn(s+"Illegal colour value: ",n)}}},Je.Block.prototype.jsonInitStyle_=function(n,s){n=n.style;try{this.setStyle(n)}catch{console.warn(s+"Style does not exist: ",n)}},Je.Block.prototype.mixin=function(n,s){if(s!==void 0&&typeof s!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!s){s=[];for(var u in n)this[u]!==void 0&&s.push(u);if(s.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(s))}(0,t.module$exports$Blockly$utils$object.mixin)(this,n)},Je.Block.prototype.interpolate_=function(n,s,u,d){n=(0,qt.tokenizeInterpolation)(n),this.validateTokens_(n,s.length),s=this.interpolateArguments_(n,s,u),u=[],n=0;for(var T;T=s[n];n++)if(this.isInputKeyword_(T.type)){if(T=this.inputFromJson_(T,d)){for(var w=0,N;N=u[w];w++)T.appendField(N[0],N[1]);u.length=0}}else(w=this.fieldFromJson_(T))&&u.push([w,T.name])},Je.Block.prototype.validateTokens_=function(n,s){for(var u=[],d=0,T=0;T<n.length;T++){var w=n[T];if(typeof w=="number"){if(1>w||w>s)throw Error('Block "'+this.type+'": Message index %'+w+" out of range.");if(u[w])throw Error('Block "'+this.type+'": Message index %'+w+" duplicated.");u[w]=!0,d++}}if(d!==s)throw Error('Block "'+this.type+'": Message does not reference all '+s+" arg(s).")},Je.Block.prototype.interpolateArguments_=function(n,s,u){for(var d=[],T=0;T<n.length;T++){var w=n[T];typeof w=="number"&&(w=s[w-1]),!(typeof w=="string"&&(w=this.stringToFieldJson_(w),!w))&&d.push(w)}return(n=d.length)&&!this.isInputKeyword_(d[n-1].type)&&(n={type:"input_dummy"},u&&(n.align=u),d.push(n)),d},Je.Block.prototype.fieldFromJson_=function(n){var s=(0,ei.fromJson)(n);return!s&&n.alt?typeof n.alt=="string"?(n=this.stringToFieldJson_(n.alt))?this.fieldFromJson_(n):null:this.fieldFromJson_(n.alt):s},Je.Block.prototype.inputFromJson_=function(n,s){var u={LEFT:t.module$exports$Blockly$Input.Align.LEFT,RIGHT:t.module$exports$Blockly$Input.Align.RIGHT,CENTRE:t.module$exports$Blockly$Input.Align.CENTRE,CENTER:t.module$exports$Blockly$Input.Align.CENTRE},d=null;switch(n.type){case"input_value":d=this.appendValueInput(n.name);break;case"input_statement":d=this.appendStatementInput(n.name);break;case"input_dummy":d=this.appendDummyInput(n.name)}return d?(n.check&&d.setCheck(n.check),n.align&&(u=u[n.align.toUpperCase()],u===void 0?console.warn(s+"Illegal align value: ",n.align):d.setAlign(u)),d):null},Je.Block.prototype.isInputKeyword_=function(n){return n==="input_value"||n==="input_statement"||n==="input_dummy"},Je.Block.prototype.stringToFieldJson_=function(n){return(n=n.trim())?{type:"field_label",text:n}:null},Je.Block.prototype.appendInput_=function(n,s){var u=null;return(n===t.module$exports$Blockly$inputTypes.inputTypes.VALUE||n===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)&&(u=this.makeConnection_(n)),n===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&this.statementInputCount++,n=new t.module$exports$Blockly$Input.Input(n,s,this,u),this.inputList.push(n),n},Je.Block.prototype.moveInputBefore=function(n,s){if(n!==s){for(var u=-1,d=s?-1:this.inputList.length,T=0,w;w=this.inputList[T];T++)if(w.name===n){if(u=T,d!==-1)break}else if(s&&w.name===s&&(d=T,u!==-1))break;if(u===-1)throw Error('Named input "'+n+'" not found.');if(d===-1)throw Error('Reference input "'+s+'" not found.');this.moveNumberedInputBefore(u,d)}},Je.Block.prototype.moveNumberedInputBefore=function(n,s){if(n===s)throw Error("Can't move input to itself.");if(n>=this.inputList.length)throw RangeError("Input index "+n+" out of bounds.");if(s>this.inputList.length)throw RangeError("Reference input "+s+" out of bounds.");var u=this.inputList[n];this.inputList.splice(n,1),n<s&&s--,this.inputList.splice(s,0,u)},Je.Block.prototype.removeInput=function(n,s){for(var u=0,d;d=this.inputList[u];u++)if(d.name===n)return d.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&this.statementInputCount--,d.dispose(),this.inputList.splice(u,1),!0;if(s)return!1;throw Error("Input not found: "+n)},Je.Block.prototype.getInput=function(n){for(var s=0,u;u=this.inputList[s];s++)if(u.name===n)return u;return null},Je.Block.prototype.getInputTargetBlock=function(n){return(n=this.getInput(n))&&n.connection&&n.connection.targetBlock()},Je.Block.prototype.getCommentText=function(){return this.commentModel.text},Je.Block.prototype.setCommentText=function(n){this.commentModel.text!==n&&((0,B.fire)(new((0,B.get)(B.CHANGE))(this,"comment",null,this.commentModel.text,n)),this.comment=this.commentModel.text=n)},Je.Block.prototype.setWarningText=function(n,s){},Je.Block.prototype.setMutator=function(n){},Je.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Je.Block.prototype.moveBy=function(n,s){if(this.parentBlock_)throw Error("Block has parent.");var u=new((0,B.get)(B.MOVE))(this);this.xy_.translate(n,s),u.recordNew(),(0,B.fire)(u)},Je.Block.prototype.makeConnection_=function(n){return new ft.Connection(this,n)},Je.Block.prototype.allInputsFilled=function(n){if(n===void 0&&(n=!0),!n&&this.isShadow())return!1;for(var s=0,u;u=this.inputList[s];s++)if(u.connection&&(u=u.connection.targetBlock(),!u||!u.allInputsFilled(n)))return!1;return(s=this.getNextBlock())?s.allInputsFilled(n):!0},Je.Block.prototype.toDevString=function(){var n=this.type?'"'+this.type+'" block':"Block";return this.id&&(n+=' (id="'+this.id+'")'),n};var on={ContextMenuRegistry:function(){on.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)}};on.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},on.ContextMenuRegistry.registry=null,on.ContextMenuRegistry.prototype.register=function(n){if(this.registry_[n.id])throw Error('Menu item with ID "'+n.id+'" is already registered.');this.registry_[n.id]=n},on.ContextMenuRegistry.prototype.unregister=function(n){if(!this.registry_[n])throw Error('Menu item with ID "'+n+'" not found.');delete this.registry_[n]},on.ContextMenuRegistry.prototype.getItem=function(n){return this.registry_[n]||null},on.ContextMenuRegistry.prototype.getContextMenuOptions=function(n,s){var u=[],d=this.registry_;return Object.keys(d).forEach(function(T){if(T=d[T],n===T.scopeType){var w=T.preconditionFn(s);w!=="hidden"&&(T={text:typeof T.displayText=="function"?T.displayText(s):T.displayText,enabled:w==="enabled",callback:T.callback,scope:s,weight:T.weight},u.push(T))}}),u.sort(function(T,w){return T.weight-w.weight}),u},new on.ContextMenuRegistry;var Jv={IBoundedElement:function(){}},Kv={IMovable:function(){}},vg={ISelectable:function(){}},Yv={ICopyable:function(){}},Ft={RenderedConnection:function(n,s){Ft.RenderedConnection.superClass_.constructor.call(this,n,s),this.db_=n.workspace.connectionDBList[s],this.dbOpposite_=n.workspace.connectionDBList[t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE[s]],this.offsetInBlock_=new W.Coordinate(0,0),this.trackedState_=Ft.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null}};(0,t.module$exports$Blockly$utils$object.inherits)(Ft.RenderedConnection,ft.Connection),Ft.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},Ft.RenderedConnection.prototype.dispose=function(){Ft.RenderedConnection.superClass_.dispose.call(this),this.trackedState_===Ft.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},Ft.RenderedConnection.prototype.getSourceBlock=function(){return Ft.RenderedConnection.superClass_.getSourceBlock.call(this)},Ft.RenderedConnection.prototype.targetBlock=function(){return Ft.RenderedConnection.superClass_.targetBlock.call(this)},Ft.RenderedConnection.prototype.distanceFrom=function(n){var s=this.x-n.x;return n=this.y-n.y,Math.sqrt(s*s+n*n)},Ft.RenderedConnection.prototype.bumpAwayFrom=function(n){if(!this.sourceBlock_.workspace.isDragging()){var s=this.sourceBlock_.getRootBlock();if(!s.isInFlyout){var u=!1;if(!s.isMovable()){if(s=n.getSourceBlock().getRootBlock(),!s.isMovable())return;n=this,u=!0}var d=(0,t.module$exports$Blockly$common.getSelected)()==s;d||s.addSelect();var T=n.x+t.module$exports$Blockly$internalConstants.SNAP_RADIUS+Math.floor(Math.random()*t.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS)-this.x,w=n.y+t.module$exports$Blockly$internalConstants.SNAP_RADIUS+Math.floor(Math.random()*t.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS)-this.y;u&&(w=-w),s.RTL&&(T=n.x-t.module$exports$Blockly$internalConstants.SNAP_RADIUS-Math.floor(Math.random()*t.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS)-this.x),s.moveBy(T,w),d||s.removeSelect()}}},Ft.RenderedConnection.prototype.moveTo=function(n,s){this.trackedState_===Ft.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,s),this.trackedState_=Ft.RenderedConnection.TrackedState.TRACKED):this.trackedState_===Ft.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,s)),this.x=n,this.y=s},Ft.RenderedConnection.prototype.moveBy=function(n,s){this.moveTo(this.x+n,this.y+s)},Ft.RenderedConnection.prototype.moveToOffset=function(n){this.moveTo(n.x+this.offsetInBlock_.x,n.y+this.offsetInBlock_.y)},Ft.RenderedConnection.prototype.setOffsetInBlock=function(n,s){this.offsetInBlock_.x=n,this.offsetInBlock_.y=s},Ft.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},Ft.RenderedConnection.prototype.tighten=function(){var n=this.targetConnection.x-this.x,s=this.targetConnection.y-this.y;if(n!==0||s!==0){var u=this.targetBlock(),d=u.getSvgRoot();if(!d)throw Error("block is not rendered.");d=(0,it.getRelativeXY)(d),u.getSvgRoot().setAttribute("transform","translate("+(d.x-n)+","+(d.y-s)+")"),u.moveConnections(-n,-s)}},Ft.RenderedConnection.prototype.closest=function(n,s){return this.dbOpposite_.searchForClosest(this,n,s)},Ft.RenderedConnection.prototype.highlight=function(){var n=this.sourceBlock_.workspace.getRenderer().getConstants(),s=n.shapeFor(this);this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?(n=n.TAB_OFFSET_FROM_TOP,s=(0,fe.moveBy)(0,-n)+(0,fe.lineOnAxis)("v",n)+s.pathDown+(0,fe.lineOnAxis)("v",n)):(n=n.NOTCH_OFFSET_LEFT-n.CORNER_RADIUS,s=(0,fe.moveBy)(-n,0)+(0,fe.lineOnAxis)("h",n)+s.pathLeft+(0,fe.lineOnAxis)("h",n)),n=this.sourceBlock_.getRelativeToSurfaceXY(),ft.Connection.highlightedPath_=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:s,transform:"translate("+(this.x-n.x)+","+(this.y-n.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},Ft.RenderedConnection.prototype.unhighlight=function(){(0,S.removeNode)(ft.Connection.highlightedPath_),delete ft.Connection.highlightedPath_},Ft.RenderedConnection.prototype.setTracking=function(n){n&&this.trackedState_===Ft.RenderedConnection.TrackedState.TRACKED||!n&&this.trackedState_===Ft.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(n?(this.db_.addConnection(this,this.y),this.trackedState_=Ft.RenderedConnection.TrackedState.TRACKED):(this.trackedState_===Ft.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Ft.RenderedConnection.TrackedState.UNTRACKED))},Ft.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var n=this.targetBlock().getDescendants(!1),s=0;s<n.length;s++){for(var u=n[s],d=u.getConnections_(!0),T=0;T<d.length;T++)d[T].setTracking(!1);for(u=u.getIcons(),d=0;d<u.length;d++)u[d].setVisible(!1)}},Ft.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var n=[];if(this.type!==t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&this.type!==t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)return n;var s=this.targetBlock();if(s){if(s.isCollapsed()){var u=[];s.outputConnection&&u.push(s.outputConnection),s.nextConnection&&u.push(s.nextConnection),s.previousConnection&&u.push(s.previousConnection)}else u=s.getConnections_(!0);for(var d=0;d<u.length;d++)n.push.apply(n,u[d].startTrackingAll());n.length||(n=[s])}return n},Ft.RenderedConnection.prototype.onFailedConnect=function(n){var s=this.getSourceBlock();if((0,B.getRecordUndo)()){var u=(0,B.getGroup)();setTimeout(function(){s.isDisposed()||s.getParent()||((0,B.setGroup)(u),this.bumpAwayFrom(n),(0,B.setGroup)(!1))}.bind(this),t.module$exports$Blockly$internalConstants.BUMP_DELAY)}},Ft.RenderedConnection.prototype.disconnectInternal_=function(n,s){Ft.RenderedConnection.superClass_.disconnectInternal_.call(this,n,s),n.rendered&&n.render(),s.rendered&&(s.updateDisabled(),s.render(),s.getSvgRoot().style.display="block")},Ft.RenderedConnection.prototype.respawnShadow_=function(){Ft.RenderedConnection.superClass_.respawnShadow_.call(this);var n=this.targetBlock();n&&(n.initSvg(),n.render(!1),n=this.getSourceBlock(),n.rendered&&n.render())},Ft.RenderedConnection.prototype.neighbours=function(n){return this.dbOpposite_.getNeighbours(this,n)},Ft.RenderedConnection.prototype.connect_=function(n){Ft.RenderedConnection.superClass_.connect_.call(this,n);var s=this.getSourceBlock();n=n.getSourceBlock();var u=s.rendered,d=n.rendered;u&&s.updateDisabled(),d&&n.updateDisabled(),u&&d&&(this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT||this.type===t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?n.render():s.render()),(s=s.getInputWithBlock(n))&&(s=s.isVisible(),n.getSvgRoot().style.display=s?"block":"none")},Ft.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())};var vr={Marker:function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}};vr.Marker.prototype.setDrawer=function(n){this.drawer_=n},vr.Marker.prototype.getDrawer=function(){return this.drawer_},vr.Marker.prototype.getCurNode=function(){return this.curNode_},vr.Marker.prototype.setCurNode=function(n){var s=this.curNode_;this.curNode_=n,this.drawer_&&this.drawer_.draw(s,this.curNode_)},vr.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},vr.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},vr.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()};var Ji={Cursor:function(){Ji.Cursor.superClass_.constructor.call(this),this.type="cursor"}};(0,t.module$exports$Blockly$utils$object.inherits)(Ji.Cursor,vr.Marker),Ji.Cursor.prototype.next=function(){var n=this.getCurNode();if(!n)return null;for(n=n.next();n&&n.next()&&(n.getType()===Be.ASTNode.types.NEXT||n.getType()===Be.ASTNode.types.BLOCK);)n=n.next();return n&&this.setCurNode(n),n},Ji.Cursor.prototype.in=function(){var n=this.getCurNode();return n?((n.getType()===Be.ASTNode.types.PREVIOUS||n.getType()===Be.ASTNode.types.OUTPUT)&&(n=n.next()),(n=n.in())&&this.setCurNode(n),n):null},Ji.Cursor.prototype.prev=function(){var n=this.getCurNode();if(!n)return null;for(n=n.prev();n&&n.prev()&&(n.getType()===Be.ASTNode.types.NEXT||n.getType()===Be.ASTNode.types.BLOCK);)n=n.prev();return n&&this.setCurNode(n),n},Ji.Cursor.prototype.out=function(){var n=this.getCurNode();return n?((n=n.out())&&n.getType()===Be.ASTNode.types.BLOCK&&(n=n.prev()||n),n&&this.setCurNode(n),n):null},(0,ue.register)(ue.Type.CURSOR,ue.DEFAULT,Ji.Cursor);var Jo={BasicCursor:function(){Jo.BasicCursor.superClass_.constructor.call(this)}};(0,t.module$exports$Blockly$utils$object.inherits)(Jo.BasicCursor,Ji.Cursor),Jo.BasicCursor.registrationName="basicCursor",Jo.BasicCursor.prototype.next=function(){var n=this.getCurNode();return n?((n=this.getNextNode_(n,this.validNode_))&&this.setCurNode(n),n):null},Jo.BasicCursor.prototype.in=function(){return this.next()},Jo.BasicCursor.prototype.prev=function(){var n=this.getCurNode();return n?((n=this.getPreviousNode_(n,this.validNode_))&&this.setCurNode(n),n):null},Jo.BasicCursor.prototype.out=function(){return this.prev()},Jo.BasicCursor.prototype.getNextNode_=function(n,s){if(!n)return null;var u=n.in()||n.next();return s(u)?u:u?this.getNextNode_(u,s):(n=this.findSiblingOrParent_(n.out()),s(n)?n:n?this.getNextNode_(n,s):null)},Jo.BasicCursor.prototype.getPreviousNode_=function(n,s){if(!n)return null;var u=n.prev();return u=u?this.getRightMostChild_(u):n.out(),s(u)?u:u?this.getPreviousNode_(u,s):null},Jo.BasicCursor.prototype.validNode_=function(n){var s=!1;return n=n&&n.getType(),(n===Be.ASTNode.types.OUTPUT||n===Be.ASTNode.types.INPUT||n===Be.ASTNode.types.FIELD||n===Be.ASTNode.types.NEXT||n===Be.ASTNode.types.PREVIOUS||n===Be.ASTNode.types.WORKSPACE)&&(s=!0),s},Jo.BasicCursor.prototype.findSiblingOrParent_=function(n){if(!n)return null;var s=n.next();return s||this.findSiblingOrParent_(n.out())},Jo.BasicCursor.prototype.getRightMostChild_=function(n){if(!n.in())return n;for(n=n.in();n.next();)n=n.next();return this.getRightMostChild_(n)},(0,ue.register)(ue.Type.CURSOR,Jo.BasicCursor.registrationName,Jo.BasicCursor);var ba={TabNavigateCursor:function(){ba.TabNavigateCursor.superClass_.constructor.call(this)}};(0,t.module$exports$Blockly$utils$object.inherits)(ba.TabNavigateCursor,Jo.BasicCursor),ba.TabNavigateCursor.prototype.validNode_=function(n){var s=!1,u=n&&n.getType();return n&&(n=n.getLocation(),u===Be.ASTNode.types.FIELD&&n&&n.isTabNavigable()&&n.isClickable()&&(s=!0)),s};var fs={Selected:function(n,s,u){fs.Selected.superClass_.constructor.call(this,u),this.oldElementId=n,this.newElementId=s}};(0,t.module$exports$Blockly$utils$object.inherits)(fs.Selected,lo.UiBase),fs.Selected.prototype.type=B.SELECTED,fs.Selected.prototype.toJson=function(){var n=fs.Selected.superClass_.toJson.call(this);return n.oldElementId=this.oldElementId,n.newElementId=this.newElementId,n},fs.Selected.prototype.fromJson=function(n){fs.Selected.superClass_.fromJson.call(this,n),this.oldElementId=n.oldElementId,this.newElementId=n.newElementId},(0,ue.register)(ue.Type.EVENT,B.SELECTED,fs.Selected);var Xe={BlockSvg:function(n,s,u){this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{},null),this.svgGroup_.translate_="",this.style=n.getRenderer().getConstants().getBlockStyle(null),this.pathObject=n.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=n,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=(0,it.is3dSupported)()&&!!n.getBlockDragSurface();var d=this.pathObject.svgPath;d.tooltip=this,(0,I.bindMouseEvents)(d),Xe.BlockSvg.superClass_.constructor.call(this,n,s,u),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:b.IE&&this.svgGroup_.setAttribute("data-id",this.id)}};(0,t.module$exports$Blockly$utils$object.inherits)(Xe.BlockSvg,Je.Block),Xe.BlockSvg.prototype.height=0,Xe.BlockSvg.prototype.width=0,Xe.BlockSvg.prototype.warningTextDb_=null,Xe.BlockSvg.INLINE=-1,Xe.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",Xe.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n=0,s;s=this.inputList[n];n++)s.init();for(n=this.getIcons(),s=0;s<n.length;s++)n[s].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||(0,A.conditionalBind)(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},Xe.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},Xe.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},Xe.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if((0,t.module$exports$Blockly$common.getSelected)()!==this){var n=null;if((0,t.module$exports$Blockly$common.getSelected)()){n=(0,t.module$exports$Blockly$common.getSelected)().id,(0,B.disable)();try{(0,t.module$exports$Blockly$common.getSelected)().unselect()}finally{(0,B.enable)()}}n=new((0,B.get)(B.SELECTED))(n,this.id,this.workspace.id),(0,B.fire)(n),(0,t.module$exports$Blockly$common.setSelected)(this),this.addSelect()}},Xe.BlockSvg.prototype.unselect=function(){if((0,t.module$exports$Blockly$common.getSelected)()===this){var n=new((0,B.get)(B.SELECTED))(this.id,null,this.workspace.id);n.workspaceId=this.workspace.id,(0,B.fire)(n),(0,t.module$exports$Blockly$common.setSelected)(null),this.removeSelect()}},Xe.BlockSvg.prototype.mutator=null,Xe.BlockSvg.prototype.comment=null,Xe.BlockSvg.prototype.commentIcon_=null,Xe.BlockSvg.prototype.warning=null,Xe.BlockSvg.prototype.getIcons=function(){var n=[];return this.mutator&&n.push(this.mutator),this.commentIcon_&&n.push(this.commentIcon_),this.warning&&n.push(this.warning),n},Xe.BlockSvg.prototype.setParent=function(n){var s=this.parentBlock_;if(n!==s){(0,S.startTextWidthCache)(),Xe.BlockSvg.superClass_.setParent.call(this,n),(0,S.stopTextWidthCache)();var u=this.getSvgRoot();if(!this.workspace.isClearing&&u){var d=this.getRelativeToSurfaceXY();n?(n.getSvgRoot().appendChild(u),n=this.getRelativeToSurfaceXY(),this.moveConnections(n.x-d.x,n.y-d.y)):s&&(this.workspace.getCanvas().appendChild(u),this.translate(d.x,d.y)),this.applyColour()}}},Xe.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var n=0,s=0,u=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,d=this.getSvgRoot();if(d)do{var T=(0,it.getRelativeXY)(d);n+=T.x,s+=T.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===d&&(T=this.workspace.getBlockDragSurface().getSurfaceTranslation(),n+=T.x,s+=T.y),d=d.parentNode}while(d&&d!==this.workspace.getCanvas()&&d!==u);return new W.Coordinate(n,s)},Xe.BlockSvg.prototype.moveBy=function(n,s){if(this.parentBlock_)throw Error("Block has parent.");var u=(0,B.isEnabled)(),d;u&&(d=new((0,B.get)(B.MOVE))(this));var T=this.getRelativeToSurfaceXY();this.translate(T.x+n,T.y+s),this.moveConnections(n,s),u&&(d.recordNew(),(0,B.fire)(d)),this.workspace.resizeContents()},Xe.BlockSvg.prototype.translate=function(n,s){this.getSvgRoot().setAttribute("transform","translate("+n+","+s+")")},Xe.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var n=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(n.x,n.y),(n=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(n)}},Xe.BlockSvg.prototype.moveTo=function(n){var s=this.getRelativeToSurfaceXY();this.moveBy(n.x-s.x,n.y-s.y)},Xe.BlockSvg.prototype.moveOffDragSurface=function(n){this.useDragSurface_&&(this.translate(n.x,n.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},Xe.BlockSvg.prototype.moveDuringDrag=function(n){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(n.x,n.y):(this.svgGroup_.translate_="translate("+n.x+","+n.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Xe.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},Xe.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var n=this.workspace.getGrid();if(n&&n.shouldSnap()){var s=n.getSpacing(),u=s/2,d=this.getRelativeToSurfaceXY();n=Math.round(Math.round((d.x-u)/s)*s+u-d.x),s=Math.round(Math.round((d.y-u)/s)*s+u-d.y),(n||s)&&this.moveBy(n,s)}}},Xe.BlockSvg.prototype.getBoundingRectangle=function(){var n=this.getRelativeToSurfaceXY(),s=this.getHeightWidth();if(this.RTL)var u=n.x-s.width,d=n.x;else u=n.x,d=n.x+s.width;return new nt.Rect(n.y,n.y+s.height,u,d)},Xe.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n=0,s;s=this.inputList[n];n++)s.markDirty()},Xe.BlockSvg.prototype.setCollapsed=function(n){this.collapsed_!==n&&(Xe.BlockSvg.superClass_.setCollapsed.call(this,n),n?this.rendered&&this.render():this.updateCollapsed_())},Xe.BlockSvg.prototype.updateCollapsed_=function(){for(var n=this.isCollapsed(),s=pl.COLLAPSED_INPUT_NAME,u=pl.COLLAPSED_FIELD_NAME,d=0,T;T=this.inputList[d];d++)T.name!==s&&T.setVisible(!n);if(n){for(n=this.getIcons(),d=0;T=n[d];d++)T.setVisible(!1);n=this.toString(t.module$exports$Blockly$internalConstants.COLLAPSE_CHARS),(d=this.getField(u))?d.setValue(n):(this.getInput(s)||this.appendDummyInput(s)).appendField(new t.module$exports$Blockly$FieldLabel.FieldLabel(n),u)}else this.updateDisabled(),this.removeInput(s)},Xe.BlockSvg.prototype.tab=function(n,s){var u=new ba.TabNavigateCursor;u.setCurNode(Be.ASTNode.createFieldNode(n)),n=u.getCurNode(),s?u.next():u.prev(),(s=u.getCurNode())&&s!==n&&(s.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(s))},Xe.BlockSvg.prototype.onMouseDown_=function(n){var s=this.workspace&&this.workspace.getGesture(n);s&&s.handleBlockStart(n,this)},Xe.BlockSvg.prototype.showHelp=function(){var n=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;n&&window.open(n)},Xe.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var n=on.ContextMenuRegistry.registry.getContextMenuOptions(on.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(n),n},Xe.BlockSvg.prototype.showContextMenu=function(n){var s=this.generateContextMenu();s&&s.length&&((0,t.module$exports$Blockly$ContextMenu.show)(n,s,this.RTL),(0,t.module$exports$Blockly$ContextMenu.setCurrentBlock)(this))},Xe.BlockSvg.prototype.moveConnections=function(n,s){if(this.rendered){for(var u=this.getConnections_(!1),d=0;d<u.length;d++)u[d].moveBy(n,s);for(u=this.getIcons(),d=0;d<u.length;d++)u[d].computeIconLocation();for(u=0;u<this.childBlocks_.length;u++)this.childBlocks_[u].moveConnections(n,s)}},Xe.BlockSvg.prototype.setDragging=function(n){if(n){var s=this.getSvgRoot();s.translate_="",s.skew_="",t.module$exports$Blockly$common.draggingConnections.push.apply(t.module$exports$Blockly$common.draggingConnections,o.arrayFromIterable(this.getConnections_(!0))),(0,S.addClass)(this.svgGroup_,"blocklyDragging")}else t.module$exports$Blockly$common.draggingConnections.length=0,(0,S.removeClass)(this.svgGroup_,"blocklyDragging");for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].setDragging(n)},Xe.BlockSvg.prototype.setMovable=function(n){Xe.BlockSvg.superClass_.setMovable.call(this,n),this.pathObject.updateMovable(n)},Xe.BlockSvg.prototype.setEditable=function(n){Xe.BlockSvg.superClass_.setEditable.call(this,n),n=this.getIcons();for(var s=0;s<n.length;s++)n[s].updateEditable()},Xe.BlockSvg.prototype.setShadow=function(n){Xe.BlockSvg.superClass_.setShadow.call(this,n),this.applyColour()},Xe.BlockSvg.prototype.setInsertionMarker=function(n){this.isInsertionMarker_!==n&&(this.isInsertionMarker_=n)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},Xe.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Xe.BlockSvg.prototype.dispose=function(n,s){if(this.workspace){(0,I.dispose)(),(0,I.unbindMouseEvents)(this.pathObject.svgPath),(0,S.startTextWidthCache)();var u=this.workspace;if((0,t.module$exports$Blockly$common.getSelected)()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),(0,t.module$exports$Blockly$ContextMenu.getCurrentBlock)()===this&&(0,t.module$exports$Blockly$ContextMenu.hide)(),s&&this.rendered&&(this.unplug(n),(0,gr.disposeUiEffect)(this)),this.rendered=!1,this.warningTextDb_){for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]);this.warningTextDb_=null}for(s=this.getIcons(),d=0;d<s.length;d++)s[d].dispose();Xe.BlockSvg.superClass_.dispose.call(this,!!n),(0,S.removeNode)(this.svgGroup_),u.resizeContents(),this.svgGroup_=null,(0,S.stopTextWidthCache)()}},Xe.BlockSvg.prototype.checkAndDelete=function(){this.workspace.isFlyout||((0,B.setGroup)(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),(0,B.setGroup)(!1))},Xe.BlockSvg.prototype.toCopyData=function(){return this.isInsertionMarker_?null:{saveInfo:(0,jo.save)(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:(0,t.module$exports$Blockly$common.getBlockTypeCounts)(this,!0)}},Xe.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var n=this.getIcons(),s=0;s<n.length;s++)n[s].applyColour();for(n=0;s=this.inputList[n];n++)for(var u=0,d;d=s.fieldRow[u];u++)d.applyColour()},Xe.BlockSvg.prototype.updateDisabled=function(){var n=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var s=0,u;u=n[s];s++)u.rendered&&u.updateDisabled()},Xe.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},Xe.BlockSvg.prototype.setCommentText=function(n){var s=Po.Comment;if(!s)throw Error("Missing require for Blockly.Comment");this.commentModel.text!==n&&(Xe.BlockSvg.superClass_.setCommentText.call(this,n),n=n!==null,!!this.commentIcon_===n?this.commentIcon_.updateText():(n?this.comment=this.commentIcon_=new s(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},Xe.BlockSvg.prototype.setWarningText=function(n,s){var u=Qo.Warning;if(!u)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var d=s||"";if(d)this.warningTextDb_[d]&&(clearTimeout(this.warningTextDb_[d]),delete this.warningTextDb_[d]);else{s=o.makeIterator(Object.keys(this.warningTextDb_));for(var T=s.next();!T.done;T=s.next())T=T.value,clearTimeout(this.warningTextDb_[T]),delete this.warningTextDb_[T]}if(this.workspace.isDragging()){var w=this;this.warningTextDb_[d]=setTimeout(function(){w.workspace&&(delete w.warningTextDb_[d],w.setWarningText(n,d))},100)}else{if(this.isInFlyout&&(n=null),s=!1,typeof n=="string"){T=this.getSurroundParent();for(var N=null;T;)T.isCollapsed()&&(N=T),T=T.getSurroundParent();N&&N.setWarningText(t.module$exports$Blockly$Msg.Msg.COLLAPSED_WARNINGS_WARNING,Xe.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new u(this),s=!0),this.warning.setText(n,d)}else this.warning&&!d?(this.warning.dispose(),s=!0):this.warning&&(u=this.warning.getText(),this.warning.setText("",d),(s=this.warning.getText())||this.warning.dispose(),s=u!==s);s&&this.rendered&&(this.render(),this.bumpNeighbours())}},Xe.BlockSvg.prototype.setMutator=function(n){this.mutator&&this.mutator!==n&&this.mutator.dispose(),n&&(n.setBlock(this),this.mutator=n,n.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},Xe.BlockSvg.prototype.setEnabled=function(n){this.isEnabled()!==n&&(Xe.BlockSvg.superClass_.setEnabled.call(this,n),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},Xe.BlockSvg.prototype.setHighlighted=function(n){this.rendered&&this.pathObject.updateHighlighted(n)},Xe.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},Xe.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},Xe.BlockSvg.prototype.setDeleteStyle=function(n){this.pathObject.updateDraggingDelete(n)},Xe.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},Xe.BlockSvg.prototype.setColour=function(n){Xe.BlockSvg.superClass_.setColour.call(this,n),n=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(n.style),this.style=n.style,this.styleName_=n.name,this.applyColour()},Xe.BlockSvg.prototype.setStyle=function(n){var s=this.workspace.getRenderer().getConstants().getBlockStyle(n);if(this.styleName_=n,s)this.hat=s.hat,this.pathObject.setStyle(s),this.colour_=s.colourPrimary,this.style=s,this.applyColour();else throw Error("Invalid style name: "+n)},Xe.BlockSvg.prototype.bringToFront=function(){var n=this;do{var s=n.getSvgRoot(),u=s.parentNode,d=u.childNodes;d[d.length-1]!==s&&u.appendChild(s),n=n.getParent()}while(n)},Xe.BlockSvg.prototype.setPreviousStatement=function(n,s){Xe.BlockSvg.superClass_.setPreviousStatement.call(this,n,s),this.rendered&&(this.render(),this.bumpNeighbours())},Xe.BlockSvg.prototype.setNextStatement=function(n,s){Xe.BlockSvg.superClass_.setNextStatement.call(this,n,s),this.rendered&&(this.render(),this.bumpNeighbours())},Xe.BlockSvg.prototype.setOutput=function(n,s){Xe.BlockSvg.superClass_.setOutput.call(this,n,s),this.rendered&&(this.render(),this.bumpNeighbours())},Xe.BlockSvg.prototype.setInputsInline=function(n){Xe.BlockSvg.superClass_.setInputsInline.call(this,n),this.rendered&&(this.render(),this.bumpNeighbours())},Xe.BlockSvg.prototype.removeInput=function(n,s){return n=Xe.BlockSvg.superClass_.removeInput.call(this,n,s),this.rendered&&(this.render(),this.bumpNeighbours()),n},Xe.BlockSvg.prototype.moveNumberedInputBefore=function(n,s){Xe.BlockSvg.superClass_.moveNumberedInputBefore.call(this,n,s),this.rendered&&(this.render(),this.bumpNeighbours())},Xe.BlockSvg.prototype.appendInput_=function(n,s){return n=Xe.BlockSvg.superClass_.appendInput_.call(this,n,s),this.rendered&&(this.render(),this.bumpNeighbours()),n},Xe.BlockSvg.prototype.setConnectionTracking=function(n){if(this.previousConnection&&this.previousConnection.setTracking(n),this.outputConnection&&this.outputConnection.setTracking(n),this.nextConnection){this.nextConnection.setTracking(n);var s=this.nextConnection.targetBlock();s&&s.setConnectionTracking(n)}if(!this.collapsed_)for(s=0;s<this.inputList.length;s++){var u=this.inputList[s].connection;u&&(u.setTracking(n),(u=u.targetBlock())&&u.setConnectionTracking(n))}},Xe.BlockSvg.prototype.getConnections_=function(n){var s=[];if((n||this.rendered)&&(this.outputConnection&&s.push(this.outputConnection),this.previousConnection&&s.push(this.previousConnection),this.nextConnection&&s.push(this.nextConnection),n||!this.collapsed_)){n=0;for(var u;u=this.inputList[n];n++)u.connection&&s.push(u.connection)}return s},Xe.BlockSvg.prototype.lastConnectionInStack=function(n){return Xe.BlockSvg.superClass_.lastConnectionInStack.call(this,n)},Xe.BlockSvg.prototype.getMatchingConnection=function(n,s){return Xe.BlockSvg.superClass_.getMatchingConnection.call(this,n,s)},Xe.BlockSvg.prototype.makeConnection_=function(n){return new Ft.RenderedConnection(this,n)},Xe.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var n=this.getRootBlock();if(!n.isInFlyout)for(var s=this.getConnections_(!1),u=0,d;d=s[u];u++){d.isConnected()&&d.isSuperior()&&d.targetBlock().bumpNeighbours();for(var T=d.neighbours(t.module$exports$Blockly$internalConstants.SNAP_RADIUS),w=0,N;N=T[w];w++)d.isConnected()&&N.isConnected()||N.getSourceBlock().getRootBlock()!==n&&(d.isSuperior()?N.bumpAwayFrom(d):d.bumpAwayFrom(N))}}},Xe.BlockSvg.prototype.scheduleSnapAndBump=function(){var n=this,s=(0,B.getGroup)();setTimeout(function(){(0,B.setGroup)(s),n.snapToGrid(),(0,B.setGroup)(!1)},t.module$exports$Blockly$internalConstants.BUMP_DELAY/2),setTimeout(function(){(0,B.setGroup)(s),n.bumpNeighbours(),(0,B.setGroup)(!1)},t.module$exports$Blockly$internalConstants.BUMP_DELAY)},Xe.BlockSvg.prototype.positionNearConnection=function(n,s){n.type!==t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&n.type!==t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.moveBy(s.x-n.x,s.y-n.y)},Xe.BlockSvg.prototype.getParent=function(){return Xe.BlockSvg.superClass_.getParent.call(this)},Xe.BlockSvg.prototype.getRootBlock=function(){return Xe.BlockSvg.superClass_.getRootBlock.call(this)},Xe.BlockSvg.prototype.render=function(n){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,(0,S.startTextWidthCache)(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),n!==!1){var s=this.getParent();s?s.render(!0):this.workspace.resizeContents()}(0,S.stopTextWidthCache)(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},Xe.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Pr.MarkerManager.LOCAL_MARKER).draw()},Xe.BlockSvg.prototype.updateConnectionLocations_=function(){var n=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(n),this.outputConnection&&this.outputConnection.moveToOffset(n);for(var s=0;s<this.inputList.length;s++){var u=this.inputList[s].connection;u&&(u.moveToOffset(n),u.isConnected()&&u.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(n),this.nextConnection.isConnected()&&this.nextConnection.tighten())},Xe.BlockSvg.prototype.setCursorSvg=function(n){this.pathObject.setCursorSvg(n)},Xe.BlockSvg.prototype.setMarkerSvg=function(n){this.pathObject.setMarkerSvg(n)},Xe.BlockSvg.prototype.getHeightWidth=function(){var n=this.height,s=this.width,u=this.getNextBlock();if(u){u=u.getHeightWidth();var d=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;n+=u.height-d,s=Math.max(s,u.width)}return{height:n,width:s}},Xe.BlockSvg.prototype.fadeForReplacement=function(n){this.pathObject.updateReplacementFade(n)},Xe.BlockSvg.prototype.highlightShapeForInput=function(n,s){this.pathObject.updateShapeForInputHighlight(n,s)};var Tr={ConnectionDB:function(n){this.connections_=[],this.connectionChecker_=n}};Tr.ConnectionDB.prototype.addConnection=function(n,s){s=this.calculateIndexForYPos_(s),this.connections_.splice(s,0,n)},Tr.ConnectionDB.prototype.findIndexOfConnection_=function(n,s){if(!this.connections_.length)return-1;var u=this.calculateIndexForYPos_(s);if(u>=this.connections_.length)return-1;s=n.y;for(var d=u;0<=d&&this.connections_[d].y===s;){if(this.connections_[d]===n)return d;d--}for(d=u;d<this.connections_.length&&this.connections_[d].y===s;){if(this.connections_[d]===n)return d;d++}return-1},Tr.ConnectionDB.prototype.calculateIndexForYPos_=function(n){if(!this.connections_.length)return 0;for(var s=0,u=this.connections_.length;s<u;){var d=Math.floor((s+u)/2);if(this.connections_[d].y<n)s=d+1;else if(this.connections_[d].y>n)u=d;else{s=d;break}}return s},Tr.ConnectionDB.prototype.removeConnection=function(n,s){if(n=this.findIndexOfConnection_(n,s),n===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(n,1)},Tr.ConnectionDB.prototype.getNeighbours=function(n,s){function u(He){var Tt=T-d[He].x,bt=w-d[He].y;return Math.sqrt(Tt*Tt+bt*bt)<=s&&ve.push(d[He]),bt<s}var d=this.connections_,T=n.x,w=n.y;n=0;for(var N=d.length-2,J=N;n<J;)d[J].y<w?n=J:N=J,J=Math.floor((n+N)/2);var ve=[];if(N=n=J,d.length){for(;0<=n&&u(n);)n--;do N++;while(N<d.length&&u(N))}return ve},Tr.ConnectionDB.prototype.isInYRange_=function(n,s,u){return Math.abs(this.connections_[n].y-s)<=u},Tr.ConnectionDB.prototype.searchForClosest=function(n,s,u){if(!this.connections_.length)return{connection:null,radius:s};var d=n.y,T=n.x;n.x=T+u.x,n.y=d+u.y;var w=this.calculateIndexForYPos_(n.y);u=null;for(var N=s,J,ve=w-1;0<=ve&&this.isInYRange_(ve,n.y,s);)J=this.connections_[ve],this.connectionChecker_.canConnect(n,J,!0,N)&&(u=J,N=J.distanceFrom(n)),ve--;for(;w<this.connections_.length&&this.isInYRange_(w,n.y,s);)J=this.connections_[w],this.connectionChecker_.canConnect(n,J,!0,N)&&(u=J,N=J.distanceFrom(n)),w++;return n.x=T,n.y=d,{connection:u,radius:N}},Tr.ConnectionDB.init=function(n){var s=[];return s[t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE]=new Tr.ConnectionDB(n),s[t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE]=new Tr.ConnectionDB(n),s[t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT]=new Tr.ConnectionDB(n),s[t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT]=new Tr.ConnectionDB(n),s};var Ul={ThemeManager:function(n,s){this.workspace_=n,this.theme_=s,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)}};Ul.ThemeManager.prototype.getTheme=function(){return this.theme_},Ul.ThemeManager.prototype.setTheme=function(n){var s=this.theme_;for(this.theme_=n,(n=this.workspace_.getInjectionDiv())&&(s&&(0,S.removeClass)(n,s.getClassName()),(0,S.addClass)(n,this.theme_.getClassName())),s=0;n=this.subscribedWorkspaces_[s];s++)n.refreshTheme();s=0,n=Object.keys(this.componentDB_);for(var u;u=n[s];s++)for(var d=0,T;T=this.componentDB_[u][d];d++){var w=T.element;T=T.propertyName;var N=this.theme_&&this.theme_.getComponentStyle(u);w.style[T]=N||""}for(s=o.makeIterator(this.subscribedWorkspaces_),n=s.next();!n.done;n=s.next())n.value.hideChaff()},Ul.ThemeManager.prototype.subscribeWorkspace=function(n){this.subscribedWorkspaces_.push(n)},Ul.ThemeManager.prototype.unsubscribeWorkspace=function(n){if(!(0,Ar.removeElem)(this.subscribedWorkspaces_,n))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")},Ul.ThemeManager.prototype.subscribe=function(n,s,u){this.componentDB_[s]||(this.componentDB_[s]=[]),this.componentDB_[s].push({element:n,propertyName:u}),s=this.theme_&&this.theme_.getComponentStyle(s),n.style[u]=s||""},Ul.ThemeManager.prototype.unsubscribe=function(n){if(n)for(var s=Object.keys(this.componentDB_),u=0,d;d=s[u];u++){for(var T=this.componentDB_[d],w=T.length-1;0<=w;w--)T[w].element===n&&T.splice(w,1);this.componentDB_[d].length||delete this.componentDB_[d]}},Ul.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null};var io={TouchGesture:function(n,s){io.TouchGesture.superClass_.constructor.call(this,n,s),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null}};(0,t.module$exports$Blockly$utils$object.inherits)(io.TouchGesture,$t.Gesture),io.TouchGesture.ZOOM_IN_MULTIPLIER=5,io.TouchGesture.ZOOM_OUT_MULTIPLIER=6,io.TouchGesture.prototype.doStart=function(n){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,io.TouchGesture.superClass_.doStart.call(this,n),!this.isEnding_&&(0,m.isTouchEvent)(n)&&this.handleTouchStart(n)},io.TouchGesture.prototype.bindMouseEvents=function(n){this.onStartWrapper_=(0,A.conditionalBind)(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=(0,A.conditionalBind)(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=(0,A.conditionalBind)(document,"mouseup",null,this.handleUp.bind(this),!0),n.preventDefault(),n.stopPropagation()},io.TouchGesture.prototype.handleStart=function(n){!this.isDragging()&&(0,m.isTouchEvent)(n)&&(this.handleTouchStart(n),this.isMultiTouch()&&(0,m.longStop)())},io.TouchGesture.prototype.handleMove=function(n){this.isDragging()?(0,m.shouldHandleEvent)(n)&&io.TouchGesture.superClass_.handleMove.call(this,n):this.isMultiTouch()?((0,m.isTouchEvent)(n)&&this.handleTouchMove(n),(0,m.longStop)()):io.TouchGesture.superClass_.handleMove.call(this,n)},io.TouchGesture.prototype.handleUp=function(n){(0,m.isTouchEvent)(n)&&!this.isDragging()&&this.handleTouchEnd(n),!this.isMultiTouch()||this.isDragging()?(0,m.shouldHandleEvent)(n)&&io.TouchGesture.superClass_.handleUp.call(this,n):(n.preventDefault(),n.stopPropagation(),this.dispose())},io.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},io.TouchGesture.prototype.dispose=function(){io.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&(0,A.unbind)(this.onStartWrapper_)},io.TouchGesture.prototype.handleTouchStart=function(n){var s=(0,m.getTouchIdentifierFromEvent)(n);this.cachedPoints_[s]=this.getTouchPoint(n),s=Object.keys(this.cachedPoints_),s.length===2&&(this.startDistance_=W.Coordinate.distance(this.cachedPoints_[s[0]],this.cachedPoints_[s[1]]),this.isMultiTouch_=!0,n.preventDefault())},io.TouchGesture.prototype.handleTouchMove=function(n){var s=(0,m.getTouchIdentifierFromEvent)(n);this.cachedPoints_[s]=this.getTouchPoint(n),s=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&s.length===2?this.handlePinch_(n):io.TouchGesture.superClass_.handleMove.call(this,n)},io.TouchGesture.prototype.handlePinch_=function(n){var s=Object.keys(this.cachedPoints_);if(s=W.Coordinate.distance(this.cachedPoints_[s[0]],this.cachedPoints_[s[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var u=s-this.previousScale_;u=0<u?u*io.TouchGesture.ZOOM_IN_MULTIPLIER:u*io.TouchGesture.ZOOM_OUT_MULTIPLIER;var d=this.startWorkspace_,T=(0,A.mouseToSvg)(n,d.getParentSvg(),d.getInverseScreenCTM());d.zoom(T.x,T.y,u)}this.previousScale_=s,n.preventDefault()},io.TouchGesture.prototype.handleTouchEnd=function(n){n=(0,m.getTouchIdentifierFromEvent)(n),this.cachedPoints_[n]&&delete this.cachedPoints_[n],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},io.TouchGesture.prototype.getTouchPoint=function(n){return this.startWorkspace_?new W.Coordinate(n.changedTouches?n.changedTouches[0].pageX:n.pageX,n.changedTouches?n.changedTouches[0].pageY:n.pageY):null};var Hl={WorkspaceAudio:function(n){this.parentWorkspace_=n,this.SOUNDS_=Object.create(null)}};Hl.WorkspaceAudio.prototype.lastSound_=null,Hl.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},Hl.WorkspaceAudio.prototype.load=function(n,s){if(n.length){try{var u=new t.module$exports$Blockly$utils$global.globalThis.Audio}catch{return}for(var d,T=0;T<n.length;T++){var w=n[T],N=w.match(/\.(\w+)$/);if(N&&u.canPlayType("audio/"+N[1])){d=new t.module$exports$Blockly$utils$global.globalThis.Audio(w);break}}d&&d.play&&(this.SOUNDS_[s]=d)}},Hl.WorkspaceAudio.prototype.preload=function(){for(var n in this.SOUNDS_){var s=this.SOUNDS_[n];s.volume=.01;var u=s.play();if(u!==void 0?u.then(s.pause).catch(function(){}):s.pause(),b.IPAD||b.IPHONE)break}},Hl.WorkspaceAudio.prototype.play=function(n,s){var u=this.SOUNDS_[n];u?(n=new Date,this.lastSound_!==null&&n-this.lastSound_<t.module$exports$Blockly$internalConstants.SOUND_LIMIT||(this.lastSound_=n,u=b.IPAD||b.ANDROID?u:u.cloneNode(),u.volume=s===void 0?1:s,u.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(n,s)};var Ns={ThemeChange:function(n,s){Ns.ThemeChange.superClass_.constructor.call(this,s),this.themeName=n}};(0,t.module$exports$Blockly$utils$object.inherits)(Ns.ThemeChange,lo.UiBase),Ns.ThemeChange.prototype.type=B.THEME_CHANGE,Ns.ThemeChange.prototype.toJson=function(){var n=Ns.ThemeChange.superClass_.toJson.call(this);return n.themeName=this.themeName,n},Ns.ThemeChange.prototype.fromJson=function(n){Ns.ThemeChange.superClass_.fromJson.call(this,n),this.themeName=n.themeName},(0,ue.register)(ue.Type.EVENT,B.THEME_CHANGE,Ns.ThemeChange);var Gl={ViewportChange:function(n,s,u,d,T){Gl.ViewportChange.superClass_.constructor.call(this,d),this.viewTop=n,this.viewLeft=s,this.scale=u,this.oldScale=T}};(0,t.module$exports$Blockly$utils$object.inherits)(Gl.ViewportChange,lo.UiBase),Gl.ViewportChange.prototype.type=B.VIEWPORT_CHANGE,Gl.ViewportChange.prototype.toJson=function(){var n=Gl.ViewportChange.superClass_.toJson.call(this);return n.viewTop=this.viewTop,n.viewLeft=this.viewLeft,n.scale=this.scale,n.oldScale=this.oldScale,n},Gl.ViewportChange.prototype.fromJson=function(n){Gl.ViewportChange.superClass_.fromJson.call(this,n),this.viewTop=n.viewTop,this.viewLeft=n.viewLeft,this.scale=n.scale,this.oldScale=n.oldScale},(0,ue.register)(ue.Type.EVENT,B.VIEWPORT_CHANGE,Gl.ViewportChange);var qv={IMetricsManager:function(){}},Mr={MetricsManager:function(n){this.workspace_=n}};Mr.MetricsManager.prototype.getDimensionsPx_=function(n){var s=0,u=0;return n&&(s=n.getWidth(),u=n.getHeight()),new Me.Size(s,u)},Mr.MetricsManager.prototype.getFlyoutMetrics=function(n){return n=this.getDimensionsPx_(this.workspace_.getFlyout(n)),{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}},Mr.MetricsManager.prototype.getToolboxMetrics=function(){var n=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}},Mr.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},Mr.MetricsManager.prototype.getAbsoluteMetrics=function(){var n=0,s=this.getToolboxMetrics(),u=this.getFlyoutMetrics(!0),d=!!this.workspace_.getToolbox(),T=!!this.workspace_.getFlyout(!0),w=d?s.position:u.position,N=w===at.Position.LEFT;return w=w===at.Position.TOP,d&&N?n=s.width:T&&N&&(n=u.width),N=0,d&&w?N=s.height:T&&w&&(N=u.height),{top:N,left:n}},Mr.MetricsManager.prototype.getViewMetrics=function(n){n=n?this.workspace_.scale:1;var s=this.getSvgMetrics(),u=this.getToolboxMetrics(),d=this.getFlyoutMetrics(!0),T=this.workspace_.getToolbox()?u.position:d.position;return this.workspace_.getToolbox()?T===at.Position.TOP||T===at.Position.BOTTOM?s.height-=u.height:(T===at.Position.LEFT||T===at.Position.RIGHT)&&(s.width-=u.width):this.workspace_.getFlyout(!0)&&(T===at.Position.TOP||T===at.Position.BOTTOM?s.height-=d.height:(T===at.Position.LEFT||T===at.Position.RIGHT)&&(s.width-=d.width)),{height:s.height/n,width:s.width/n,top:-this.workspace_.scrollY/n,left:-this.workspace_.scrollX/n}},Mr.MetricsManager.prototype.getContentMetrics=function(n){n=n?1:this.workspace_.scale;var s=this.workspace_.getBlocksBoundingBox();return{height:(s.bottom-s.top)*n,width:(s.right-s.left)*n,top:s.top*n,left:s.left*n}},Mr.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},Mr.MetricsManager.prototype.getComputedFixedEdges_=function(n){if(!this.hasFixedEdges())return{};var s=this.workspace_.isMovableHorizontally(),u=this.workspace_.isMovableVertically();n=n||this.getViewMetrics(!1);var d={};return u||(d.top=n.top,d.bottom=n.top+n.height),s||(d.left=n.left,d.right=n.left+n.width),d},Mr.MetricsManager.prototype.getPaddedContent_=function(n,s){var u=s.top+s.height,d=s.left+s.width,T=n.width;n=n.height;var w=T/2,N=n/2;return{top:Math.min(s.top-N,u-n),bottom:Math.max(u+N,s.top+n),left:Math.min(s.left-w,d-T),right:Math.max(d+w,s.left+T)}},Mr.MetricsManager.prototype.getScrollMetrics=function(n,s,u){n=n?this.workspace_.scale:1,s=s||this.getViewMetrics(!1);var d=u||this.getContentMetrics();u=this.getComputedFixedEdges_(s),s=this.getPaddedContent_(s,d),d=u.top!==void 0?u.top:s.top;var T=u.left!==void 0?u.left:s.left;return{top:d/n,left:T/n,width:((u.right!==void 0?u.right:s.right)-T)/n,height:((u.bottom!==void 0?u.bottom:s.bottom)-d)/n}},Mr.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},Mr.MetricsManager.prototype.getMetrics=function(){var n=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),u=this.getSvgMetrics(),d=this.getAbsoluteMetrics(),T=this.getViewMetrics(),w=this.getContentMetrics(),N=this.getScrollMetrics(!1,T,w);return{contentHeight:w.height,contentWidth:w.width,contentTop:w.top,contentLeft:w.left,scrollHeight:N.height,scrollWidth:N.width,scrollTop:N.top,scrollLeft:N.left,viewHeight:T.height,viewWidth:T.width,viewTop:T.top,viewLeft:T.left,absoluteTop:d.top,absoluteLeft:d.left,svgHeight:u.height,svgWidth:u.width,toolboxWidth:n.width,toolboxHeight:n.height,toolboxPosition:n.position,flyoutWidth:s.width,flyoutHeight:s.height}},(0,ue.register)(ue.Type.METRICS_MANAGER,ue.DEFAULT,Mr.MetricsManager);var be={WorkspaceSvg:function(n,s,u){be.WorkspaceSvg.superClass_.constructor.call(this,n),this.metricsManager_=new((0,ue.getClassFromOptions)(ue.Type.METRICS_MANAGER,n,!0))(this),this.getMetrics=n.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=n.setMetrics||be.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new un.ComponentManager,this.connectionDBList=Tr.ConnectionDB.init(this.connectionChecker),s&&(this.blockDragSurface_=s),u&&(this.workspaceDragSurface_=u),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&(0,it.is3dSupported)(),this.highlightedBlocks_=[],this.audioManager_=new Hl.WorkspaceAudio(n.parentWorkspace),this.grid_=this.options.gridPattern?new Se.Grid(this.options.gridPattern,n.gridOptions):null,this.markerManager_=new Pr.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),(n=t.module$exports$Blockly$Variables)&&n.flyoutCategory&&this.registerToolboxCategoryCallback(n.CATEGORY_NAME,n.flyoutCategory),(n=Ba)&&n.flyoutCategory&&this.registerToolboxCategoryCallback(n.CATEGORY_NAME,n.flyoutCategory),(n=t.module$exports$Blockly$Procedures)&&n.flyoutCategory&&(this.registerToolboxCategoryCallback(n.CATEGORY_NAME,n.flyoutCategory),this.addChangeListener(n.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Ul.ThemeManager(this,this.options.theme||To.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=(0,hn.init)(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new Me.Size(0,0)}};(0,t.module$exports$Blockly$utils$object.inherits)(be.WorkspaceSvg,vt.Workspace),be.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,be.WorkspaceSvg.prototype.rendered=!0,be.WorkspaceSvg.prototype.isVisible_=!0,be.WorkspaceSvg.prototype.isFlyout=!1,be.WorkspaceSvg.prototype.isMutator=!1,be.WorkspaceSvg.prototype.resizesEnabled_=!0,be.WorkspaceSvg.prototype.scrollX=0,be.WorkspaceSvg.prototype.scrollY=0,be.WorkspaceSvg.prototype.startScrollX=0,be.WorkspaceSvg.prototype.startScrollY=0,be.WorkspaceSvg.prototype.dragDeltaXY_=null,be.WorkspaceSvg.prototype.scale=1,be.WorkspaceSvg.prototype.oldScale_=1,be.WorkspaceSvg.prototype.oldTop_=0,be.WorkspaceSvg.prototype.oldLeft_=0,be.WorkspaceSvg.prototype.trashcan=null,be.WorkspaceSvg.prototype.scrollbar=null,be.WorkspaceSvg.prototype.flyout_=null,be.WorkspaceSvg.prototype.toolbox_=null,be.WorkspaceSvg.prototype.currentGesture_=null,be.WorkspaceSvg.prototype.blockDragSurface_=null,be.WorkspaceSvg.prototype.workspaceDragSurface_=null,be.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,be.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,be.WorkspaceSvg.prototype.injectionDiv_=null,be.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,be.WorkspaceSvg.prototype.targetWorkspace=null,be.WorkspaceSvg.prototype.inverseScreenCTM_=null,be.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,be.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},be.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},be.WorkspaceSvg.prototype.setMetricsManager=function(n){this.metricsManager_=n,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},be.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},be.WorkspaceSvg.prototype.setCursorSvg=function(n){this.markerManager_.setCursorSvg(n)},be.WorkspaceSvg.prototype.setMarkerSvg=function(n){this.markerManager_.setMarkerSvg(n)},be.WorkspaceSvg.prototype.getMarker=function(n){return this.markerManager_?this.markerManager_.getMarker(n):null},be.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},be.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},be.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},be.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},be.WorkspaceSvg.prototype.setTheme=function(n){n||(n=To.Classic),this.themeManager_.setTheme(n)},be.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(s){return!!s.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var n=new((0,B.get)(B.THEME_CHANGE))(this.getTheme().name,this.id);(0,B.fire)(n)},be.WorkspaceSvg.prototype.updateBlockStyles_=function(n){for(var s=0,u;u=n[s];s++){var d=u.getStyleName();d&&(u.setStyle(d),u.mutator&&u.mutator.updateBlockStyle())}},be.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var n=this.getParentSvg().getScreenCTM();n&&(this.inverseScreenCTM_=n.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},be.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},be.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},be.WorkspaceSvg.prototype.getSvgXY=function(n){var s=0,u=0,d=1;((0,S.containsNode)(this.getCanvas(),n)||(0,S.containsNode)(this.getBubbleCanvas(),n))&&(d=this.scale);do{var T=(0,it.getRelativeXY)(n);(n===this.getCanvas()||n===this.getBubbleCanvas())&&(d=1),s+=T.x*d,u+=T.y*d,n=n.parentNode}while(n&&n!==this.getParentSvg());return new W.Coordinate(s,u)},be.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var n=this.cachedParentSvgSize_;return new Me.Size(n.width,n.height)},be.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return(0,it.getInjectionDivXY)(this.getCanvas())},be.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var n=this.svgGroup_;n;){if((" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv_=n;break}n=n.parentNode}return this.injectionDiv_},be.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},be.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(n){this.resizeHandlerWrapper_=n},be.WorkspaceSvg.prototype.createDom=function(n){return this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyWorkspace"},null),n&&(this.svgBackground_=(0,S.createSvgElement)(ce.Svg.RECT,{height:"100%",width:"100%",class:n},this.svgGroup_),n==="blocklyMainBackground"&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||((0,A.conditionalBind)(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),document.body.addEventListener("wheel",function(){}),(0,A.conditionalBind)(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new((0,ue.getClassFromOptions)(ue.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(n=(0,ue.getClassFromOptions)(ue.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new n),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},be.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&((0,S.removeNode)(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),be.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var n=this.getParentSvg();n&&n.parentNode&&(0,S.removeNode)(n.parentNode)}this.resizeHandlerWrapper_&&((0,A.unbind)(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},be.WorkspaceSvg.prototype.newBlock=function(n,s){return new Xe.BlockSvg(this,n,s)},be.WorkspaceSvg.prototype.addTrashcan=function(){var n=Qt.Trashcan;if(!n)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new n(this),n=this.trashcan.createDom(),this.svgGroup_.insertBefore(n,this.svgBlockCanvas_)},be.WorkspaceSvg.prototype.addZoomControls=function(){var n=fo.ZoomControls;if(!n)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new n(this),n=this.zoomControls_.createDom(),this.svgGroup_.appendChild(n)},be.WorkspaceSvg.prototype.addFlyout=function(n){var s=new mr.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return s.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new((0,ue.getClassFromOptions)(ue.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(s):new((0,ue.getClassFromOptions)(ue.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(s),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(n)},be.WorkspaceSvg.prototype.getFlyout=function(n){return this.flyout_||n?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},be.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},be.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},be.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},be.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var n=this.componentManager_.getComponents(un.ComponentManager.Capability.POSITIONABLE,!0),s=this.getMetricsManager().getUiMetrics(),u=[],d=0,T;T=n[d];d++)T.position(s,u),(T=T.getBoundingRectangle())&&u.push(T);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},be.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var n=(0,it.getDocumentScroll)();W.Coordinate.equals(this.lastRecordedPageScroll_,n)||(this.lastRecordedPageScroll_=n,this.updateScreenCalculations_())},be.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},be.WorkspaceSvg.prototype.setCachedParentSvgSize=function(n,s){var u=this.getParentSvg();n&&(this.cachedParentSvgSize_.width=n,u.cachedWidth_=n),s&&(this.cachedParentSvgSize_.height=s,u.cachedHeight_=s)},be.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},be.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var n=this.svgGroup_;n;){if(n.tagName==="svg"){this.cachedParentSvg_=n;break}n=n.parentNode}return this.cachedParentSvg_},be.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if((0,B.isEnabled)()){var n=this.scale,s=-this.scrollY,u=-this.scrollX;if(!(n===this.oldScale_&&1>Math.abs(s-this.oldTop_)&&1>Math.abs(u-this.oldLeft_))){var d=new((0,B.get)(B.VIEWPORT_CHANGE))(s,u,n,this.id,this.oldScale_);this.oldScale_=n,this.oldTop_=s,this.oldLeft_=u,(0,B.fire)(d)}}},be.WorkspaceSvg.prototype.translate=function(n,s){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(n,s);else{var u="translate("+n+","+s+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",u),this.svgBubbleCanvas_.setAttribute("transform",u)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(n,s,this.scale),this.grid_&&this.grid_.moveTo(n,s),this.maybeFireViewportChangeEvent()},be.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var n=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),n="translate("+n.x+","+n.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}},be.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var n=this.svgBlockCanvas_.previousSibling,s=parseInt(this.getParentSvg().getAttribute("width"),10),u=parseInt(this.getParentSvg().getAttribute("height"),10),d=(0,it.getRelativeXY)(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),n,s,u,this.scale),this.workspaceDragSurface_.translateSurface(d.x,d.y)}},be.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},be.WorkspaceSvg.prototype.getWidth=function(){var n=this.getMetrics();return n?n.viewWidth/this.scale:0},be.WorkspaceSvg.prototype.setVisible=function(n){if(this.isVisible_=n,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(n),this.getFlyout()&&this.getFlyout().setContainerVisible(n),this.getParentSvg().style.display=n?"block":"none",this.toolbox_&&this.toolbox_.setVisible(n),n){n=this.getAllBlocks(!1);for(var s=n.length-1;0<=s;s--)n[s].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)},be.WorkspaceSvg.prototype.render=function(){for(var n=this.getAllBlocks(!1),s=n.length-1;0<=s;s--)n[s].render(!1);if(this.currentGesture_)for(n=this.currentGesture_.getInsertionMarkers(),s=0;s<n.length;s++)n[s].render(!1);this.markerManager_.updateMarkers()},be.WorkspaceSvg.prototype.highlightBlock=function(n,s){if(s===void 0){for(var u=0,d;d=this.highlightedBlocks_[u];u++)d.setHighlighted(!1);this.highlightedBlocks_.length=0}(n=n?this.getBlockById(n):null)&&((s=s===void 0||s)?this.highlightedBlocks_.indexOf(n)===-1&&this.highlightedBlocks_.push(n):(0,Ar.removeElem)(this.highlightedBlocks_,n),n.setHighlighted(s))},be.WorkspaceSvg.prototype.paste=function(n){this.rendered&&(n.type||n.tagName)&&(this.currentGesture_&&this.currentGesture_.cancel(),n.type?this.pasteBlock_(null,n):n.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(n):this.pasteBlock_(n,null))},be.WorkspaceSvg.prototype.pasteBlock_=function(n,s){(0,B.disable)();try{var u=0,d=0;if(n){var T=(0,t.module$exports$Blockly$Xml.domToBlock)(n,this);u=parseInt(n.getAttribute("x"),10),this.RTL&&(u=-u),d=parseInt(n.getAttribute("y"),10)}else s&&(T=(0,jo.append)(s,this),u=s.x||10,this.RTL&&(u=this.getWidth()-u),d=s.y||10);if(!isNaN(u)&&!isNaN(d)){do{var w=!1,N=this.getAllBlocks(!1);for(n=0,s=void 0;s=N[n];n++){var J=s.getRelativeToSurfaceXY();if(1>=Math.abs(u-J.x)&&1>=Math.abs(d-J.y)){w=!0;break}}if(!w){var ve=T.getConnections_(!1);for(n=0,s=void 0;s=ve[n];n++)if(s.closest(t.module$exports$Blockly$internalConstants.SNAP_RADIUS,new W.Coordinate(u,d)).connection){w=!0;break}}w&&(u=this.RTL?u-t.module$exports$Blockly$internalConstants.SNAP_RADIUS:u+t.module$exports$Blockly$internalConstants.SNAP_RADIUS,d+=2*t.module$exports$Blockly$internalConstants.SNAP_RADIUS)}while(w);T.moveTo(new W.Coordinate(u,d))}}finally{(0,B.enable)()}(0,B.isEnabled)()&&!T.isShadow()&&(0,B.fire)(new((0,B.get)(B.CREATE))(T)),T.select()},be.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(n){(0,B.disable)();try{var s=kt.fromXml(n,this),u=parseInt(n.getAttribute("x"),10),d=parseInt(n.getAttribute("y"),10);isNaN(u)||isNaN(d)||(this.RTL&&(u=-u),s.moveBy(u+50,d+50))}finally{(0,B.enable)()}(0,B.isEnabled)()&&pn.fireCreateEvent(s),s.select()},be.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var n=this.isFlyout?this.targetWorkspace:this;n&&!n.currentGesture_&&n.toolbox_&&n.toolbox_.getFlyout()&&n.toolbox_.refreshSelection()},be.WorkspaceSvg.prototype.renameVariableById=function(n,s){be.WorkspaceSvg.superClass_.renameVariableById.call(this,n,s),this.refreshToolboxSelection()},be.WorkspaceSvg.prototype.deleteVariableById=function(n){be.WorkspaceSvg.superClass_.deleteVariableById.call(this,n),this.refreshToolboxSelection()},be.WorkspaceSvg.prototype.createVariable=function(n,s,u){return n=be.WorkspaceSvg.superClass_.createVariable.call(this,n,s,u),this.refreshToolboxSelection(),n},be.WorkspaceSvg.prototype.recordDeleteAreas=function(){Ht.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},be.WorkspaceSvg.prototype.recordDragTargets=function(){var n=this.componentManager_.getComponents(un.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var s=0,u;u=n[s];s++){var d=u.getClientRect();d&&this.dragTargetAreas_.push({component:u,clientRect:d})}},be.WorkspaceSvg.prototype.getDragTarget=function(n){for(var s=0,u;u=this.dragTargetAreas_[s];s++)if(u.clientRect.contains(n.clientX,n.clientY))return u.component;return null},be.WorkspaceSvg.prototype.onMouseDown_=function(n){var s=this.getGesture(n);s&&s.handleWsStart(n,this)},be.WorkspaceSvg.prototype.startDrag=function(n,s){n=(0,A.mouseToSvg)(n,this.getParentSvg(),this.getInverseScreenCTM()),n.x/=this.scale,n.y/=this.scale,this.dragDeltaXY_=W.Coordinate.difference(s,n)},be.WorkspaceSvg.prototype.moveDrag=function(n){return n=(0,A.mouseToSvg)(n,this.getParentSvg(),this.getInverseScreenCTM()),n.x/=this.scale,n.y/=this.scale,W.Coordinate.sum(this.dragDeltaXY_,n)},be.WorkspaceSvg.prototype.isDragging=function(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()},be.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},be.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},be.WorkspaceSvg.prototype.isMovableHorizontally=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollHorizontally())},be.WorkspaceSvg.prototype.isMovableVertically=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollVertically())},be.WorkspaceSvg.prototype.onMouseWheel_=function(n){if($t.Gesture.inProgress())n.preventDefault(),n.stopPropagation();else{var s=this.options.zoomOptions&&this.options.zoomOptions.wheel,u=this.options.moveOptions&&this.options.moveOptions.wheel;if(s||u){var d=(0,A.getScrollDeltaPixels)(n);if(b.MAC)var T=n.metaKey;s&&(n.ctrlKey||T||!u)?(d=-d.y/50,s=(0,A.mouseToSvg)(n,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(s.x,s.y,d)):(s=this.scrollX-d.x,u=this.scrollY-d.y,n.shiftKey&&!d.x&&(s=this.scrollX-d.y,u=this.scrollY),this.scroll(s,u)),n.preventDefault()}}},be.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var n=this.getTopBoundedElements();if(!n.length)return new nt.Rect(0,0,0,0);for(var s=n[0].getBoundingRectangle(),u=1;u<n.length;u++){var d=n[u];d.isInsertionMarker&&d.isInsertionMarker()||(d=d.getBoundingRectangle(),d.top<s.top&&(s.top=d.top),d.bottom>s.bottom&&(s.bottom=d.bottom),d.left<s.left&&(s.left=d.left),d.right>s.right&&(s.right=d.right))}return s},be.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),(0,B.setGroup)(!0);for(var n=this.getTopBlocks(!0),s=0,u=0,d;d=n[u];u++)if(d.isMovable()){var T=d.getRelativeToSurfaceXY();d.moveBy(-T.x,s-T.y),d.snapToGrid(),s=d.getRelativeToSurfaceXY().y+d.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}(0,B.setGroup)(!1),this.setResizesEnabled(!0)},be.WorkspaceSvg.prototype.showContextMenu=function(n){if(!this.options.readOnly&&!this.isFlyout){var s=on.ContextMenuRegistry.registry.getContextMenuOptions(on.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(s,n),(0,t.module$exports$Blockly$ContextMenu.show)(n,s,this.RTL)}},be.WorkspaceSvg.prototype.updateToolbox=function(n){if(n=(0,at.convertToolboxDefToJson)(n)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if((0,at.hasCategories)(n)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=n,this.toolbox_.render(n)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=n,this.flyout_.show(n)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},be.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():((0,t.module$exports$Blockly$common.setMainWorkspace)(this),this.setBrowserFocus())},be.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentNode.setActive()}catch{this.getParentSvg().parentNode.focus({preventScroll:!0})}}},be.WorkspaceSvg.prototype.zoom=function(n,s,u){u=Math.pow(this.options.zoomOptions.scaleSpeed,u);var d=this.scale*u;if(this.scale!==d){d>this.options.zoomOptions.maxScale?u=this.options.zoomOptions.maxScale/this.scale:d<this.options.zoomOptions.minScale&&(u=this.options.zoomOptions.minScale/this.scale);var T=this.getCanvas().getCTM(),w=this.getParentSvg().createSVGPoint();w.x=n,w.y=s,w=w.matrixTransform(T.inverse()),n=w.x,s=w.y,T=T.translate(n*(1-u),s*(1-u)).scale(u),this.scrollX=T.e,this.scrollY=T.f,this.setScale(d)}},be.WorkspaceSvg.prototype.zoomCenter=function(n){var s=this.getMetrics();if(this.flyout_){var u=s.svgWidth?s.svgWidth/2:0;s=s.svgHeight?s.svgHeight/2:0}else u=s.viewWidth/2+s.absoluteLeft,s=s.viewHeight/2+s.absoluteTop;this.zoom(u,s,n)},be.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var n=this.getMetrics(),s=n.viewWidth;n=n.viewHeight;var u=this.getBlocksBoundingBox(),d=u.right-u.left;if(u=u.bottom-u.top,d){this.flyout_&&(this.horizontalLayout?(n+=this.flyout_.getHeight(),u+=this.flyout_.getHeight()/this.scale):(s+=this.flyout_.getWidth(),d+=this.flyout_.getWidth()/this.scale)),s/=d,n/=u,(0,B.disable)();try{this.setScale(Math.min(s,n)),this.scrollCenter()}finally{(0,B.enable)()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},be.WorkspaceSvg.prototype.beginCanvasTransition=function(){(0,S.addClass)(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),(0,S.addClass)(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},be.WorkspaceSvg.prototype.endCanvasTransition=function(){(0,S.removeClass)(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),(0,S.removeClass)(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},be.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var n=this.getMetrics(),s=(n.scrollWidth-n.viewWidth)/2,u=(n.scrollHeight-n.viewHeight)/2;s=-s-n.scrollLeft,u=-u-n.scrollTop,this.scroll(s,u)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},be.WorkspaceSvg.prototype.centerOnBlock=function(n){if(this.isMovable()){if(n=n?this.getBlockById(n):null){var s=n.getRelativeToSurfaceXY(),u=n.getHeightWidth(),d=this.scale;n=(s.x+(this.RTL?-1:1)*u.width/2)*d,s=(s.y+u.height/2)*d,u=this.getMetrics(),this.scroll(-(n-u.viewWidth/2),-(s-u.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},be.WorkspaceSvg.prototype.setScale=function(n){this.options.zoomOptions.maxScale&&n>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&n<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale),this.scale=n,this.hideChaff(!1),(n=this.getFlyout(!1))&&n.isVisible()&&(n.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),n=this.getMetrics(),this.scrollX-=n.absoluteLeft,this.scrollY-=n.absoluteTop,n.viewLeft+=n.absoluteLeft,n.viewTop+=n.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(n):this.scrollbar.resizeContent(n))},be.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},be.WorkspaceSvg.prototype.scroll=function(n,s){this.hideChaff(!0);var u=this.getMetrics();n=Math.min(n,-u.scrollLeft),s=Math.min(s,-u.scrollTop);var d=u.scrollTop+Math.max(0,u.scrollHeight-u.viewHeight);n=Math.max(n,-(u.scrollLeft+Math.max(0,u.scrollWidth-u.viewWidth))),s=Math.max(s,-d),this.scrollX=n,this.scrollY=s,this.scrollbar&&this.scrollbar.set(-(n+u.scrollLeft),-(s+u.scrollTop),!1),n+=u.absoluteLeft,s+=u.absoluteTop,this.translate(n,s)},be.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(n){var s=this.getMetrics();typeof n.x=="number"&&(this.scrollX=-(s.scrollLeft+(s.scrollWidth-s.viewWidth)*n.x)),typeof n.y=="number"&&(this.scrollY=-(s.scrollTop+(s.scrollHeight-s.viewHeight)*n.y)),this.translate(this.scrollX+s.absoluteLeft,this.scrollY+s.absoluteTop)},be.WorkspaceSvg.prototype.getBlockById=function(n){return be.WorkspaceSvg.superClass_.getBlockById.call(this,n)},be.WorkspaceSvg.prototype.getTopBlocks=function(n){return be.WorkspaceSvg.superClass_.getTopBlocks.call(this,n)},be.WorkspaceSvg.prototype.addTopBlock=function(n){this.addTopBoundedElement(n),be.WorkspaceSvg.superClass_.addTopBlock.call(this,n)},be.WorkspaceSvg.prototype.removeTopBlock=function(n){this.removeTopBoundedElement(n),be.WorkspaceSvg.superClass_.removeTopBlock.call(this,n)},be.WorkspaceSvg.prototype.addTopComment=function(n){this.addTopBoundedElement(n),be.WorkspaceSvg.superClass_.addTopComment.call(this,n)},be.WorkspaceSvg.prototype.removeTopComment=function(n){this.removeTopBoundedElement(n),be.WorkspaceSvg.superClass_.removeTopComment.call(this,n)},be.WorkspaceSvg.prototype.addTopBoundedElement=function(n){this.topBoundedElements_.push(n)},be.WorkspaceSvg.prototype.removeTopBoundedElement=function(n){(0,Ar.removeElem)(this.topBoundedElements_,n)},be.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},be.WorkspaceSvg.prototype.setResizesEnabled=function(n){var s=!this.resizesEnabled_&&n;this.resizesEnabled_=n,s&&this.resizeContents()},be.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),be.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},be.WorkspaceSvg.prototype.registerButtonCallback=function(n,s){if(typeof s!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[n]=s},be.WorkspaceSvg.prototype.getButtonCallback=function(n){return(n=this.flyoutButtonCallbacks_[n])?n:null},be.WorkspaceSvg.prototype.removeButtonCallback=function(n){this.flyoutButtonCallbacks_[n]=null},be.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(n,s){if(typeof s!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[n]=s},be.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(n){return this.toolboxCategoryCallbacks_[n]||null},be.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(n){this.toolboxCategoryCallbacks_[n]=null},be.WorkspaceSvg.prototype.getGesture=function(n){var s=n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown",u=this.currentGesture_;return u?s&&u.hasStarted()?(console.warn("Tried to start the same gesture twice."),u.cancel(),null):u:s?this.currentGesture_=new io.TouchGesture(n,this):null},be.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},be.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},be.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},be.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},be.WorkspaceSvg.prototype.hideChaff=function(n){(0,I.hide)(),(0,Q.hide)(),Ie.DropDownDiv.hideWithoutAnimation();var s=!!n;this.getComponentManager().getComponents(un.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(u){return u.autoHide(s)})},be.resizeSvgContents=function(n){n.resizeContents()};var Qv={inject:function(n,s){if(typeof n=="string"&&(n=document.getElementById(n)||document.querySelector(n)),!n||!(0,S.containsNode)(document,n))throw Error("Error: container is not in current document.");s=new mr.Options(s||{});var u=document.createElement("div");u.className="injectionDiv",u.tabIndex=0,(0,Te.setState)(u,Te.State.LABEL,t.module$exports$Blockly$Msg.Msg.WORKSPACE_ARIA_LABEL),n.appendChild(u),n=iC(u,s);var d=new cn.BlockDragSurfaceSvg(u),T=new Ms.WorkspaceDragSurfaceSvg(u),w=Zv(n,s,d,T);return sC(w),(0,t.module$exports$Blockly$common.setMainWorkspace)(w),(0,t.module$exports$Blockly$common.svgResize)(w),u.addEventListener("focusin",function(){(0,t.module$exports$Blockly$common.setMainWorkspace)(w)}),w}},iC=function(n,s){n.setAttribute("dir","LTR"),(0,a.inject)(s.hasCss,s.pathToMedia),n=(0,S.createSvgElement)(ce.Svg.SVG,{xmlns:S.SVG_NS,"xmlns:html":S.HTML_NS,"xmlns:xlink":S.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},n);var u=(0,S.createSvgElement)(ce.Svg.DEFS,{},n),d=String(Math.random()).substring(2);return s.gridPattern=Se.Grid.createDom(d,s.gridOptions,u),n},Zv=function(n,s,u,d){return s.parentWorkspace=null,s=new be.WorkspaceSvg(s,u,d),u=s.options,s.scale=u.zoomOptions.startScale,n.appendChild(s.createDom("blocklyMainBackground")),(0,S.addClass)(s.getInjectionDiv(),s.getRenderer().getClassName()),(0,S.addClass)(s.getInjectionDiv(),s.getTheme().getClassName()),!u.hasCategories&&u.languageTree&&(d=s.addFlyout(ce.Svg.SVG),(0,S.insertAfter)(d,n)),u.hasTrashcan&&s.addTrashcan(),u.zoomOptions&&u.zoomOptions.controls&&s.addZoomControls(),s.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),s.translate(0,0),s.addChangeListener((0,Ce.bumpIntoBoundsHandler)(s)),(0,t.module$exports$Blockly$common.svgResize)(s),(0,Q.createDom)(),Ie.DropDownDiv.createDom(),(0,I.createDom)(),s},sC=function(n){var s=n.options,u=n.getParentSvg();if((0,A.conditionalBind)(u.parentNode,"contextmenu",null,function(T){(0,A.isTargetInput)(T)||T.preventDefault()}),u=(0,A.conditionalBind)(window,"resize",null,function(){n.hideChaff(!0),(0,t.module$exports$Blockly$common.svgResize)(n),Ce.bumpTopObjectsIntoBounds(n)}),n.setResizeHandlerWrapper(u),tT(),s.languageTree){u=n.getToolbox();var d=n.getFlyout(!0);u?u.init():d&&(d.init(n),d.show(s.languageTree),typeof d.scrollToStart=="function"&&d.scrollToStart())}s.hasTrashcan&&n.trashcan.init(),s.zoomOptions&&s.zoomOptions.controls&&n.zoomControls_.init(),s.moveOptions&&s.moveOptions.scrollbars?(n.scrollbar=new $r.ScrollbarPair(n,s.moveOptions.scrollbars===!0||!!s.moveOptions.scrollbars.horizontal,s.moveOptions.scrollbars===!0||!!s.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),n.scrollbar.resize()):n.setMetrics({x:.5,y:.5}),s.hasSounds&&nT(s.pathToMedia,n)},eT=function(n){var s=(0,t.module$exports$Blockly$common.getMainWorkspace)();s&&!((0,A.isTargetInput)(n)||s.rendered&&!s.isVisible())&&Ct.ShortcutRegistry.registry.onKeyDown(s,n)},Tg=!1,tT=function(){Tg||((0,A.conditionalBind)(document,"scroll",null,function(){for(var n=vt.Workspace.getAll(),s=0,u;u=n[s];s++)u.updateInverseScreenCTM&&u.updateInverseScreenCTM()}),(0,A.conditionalBind)(document,"keydown",null,eT),(0,A.bind)(document,"touchend",null,m.longStop),(0,A.bind)(document,"touchcancel",null,m.longStop),b.IPAD&&(0,A.conditionalBind)(window,"orientationchange",document,function(){(0,t.module$exports$Blockly$common.svgResize)((0,t.module$exports$Blockly$common.getMainWorkspace)())})),Tg=!0},nT=function(n,s){var u=s.getAudioManager();u.load([n+"click.mp3",n+"click.wav",n+"click.ogg"],"click"),u.load([n+"disconnect.wav",n+"disconnect.mp3",n+"disconnect.ogg"],"disconnect"),u.load([n+"delete.mp3",n+"delete.ogg",n+"delete.wav"],"delete");var d=[];n=function(){for(;d.length;)(0,A.unbind)(d.pop());u.preload()},d.push((0,A.conditionalBind)(document,"mousemove",null,n,!0)),d.push((0,A.conditionalBind)(document,"touchstart",null,n,!0))},oT={IComponent:function(){}},rT={IDragTarget:function(){}},Vl={DragTarget:function(){}};Vl.DragTarget.prototype.onDragEnter=function(n){},Vl.DragTarget.prototype.onDragOver=function(n){},Vl.DragTarget.prototype.onDragExit=function(n){},Vl.DragTarget.prototype.onDrop=function(n){},Vl.DragTarget.prototype.shouldPreventMove=function(n){return!1};var Eg={IDeleteArea:function(){}},Wl={DeleteArea:function(){Wl.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1}};(0,t.module$exports$Blockly$utils$object.inherits)(Wl.DeleteArea,Vl.DragTarget),Wl.DeleteArea.prototype.wouldDelete=function(n,s){return n instanceof Xe.BlockSvg?(n=!n.getParent()&&n.isDeletable(),this.updateWouldDelete_(n&&!s)):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_},Wl.DeleteArea.prototype.updateWouldDelete_=function(n){this.wouldDelete_=n};var zl={FlyoutMetricsManager:function(n,s){this.flyout_=s,zl.FlyoutMetricsManager.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(zl.FlyoutMetricsManager,Mr.MetricsManager),zl.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var n=this.workspace_.getCanvas().getBBox()}catch{n={height:0,y:0,width:0,x:0}}return n},zl.FlyoutMetricsManager.prototype.getContentMetrics=function(n){var s=this.getBoundingBox_();return n=n?1:this.workspace_.scale,{height:s.height*n,width:s.width*n,top:s.y*n,left:s.x*n}},zl.FlyoutMetricsManager.prototype.getScrollMetrics=function(n,s,u){return s=u||this.getContentMetrics(),u=this.flyout_.MARGIN*this.workspace_.scale,n=n?this.workspace_.scale:1,{height:(s.height+2*u)/n,width:(s.width+s.left+u)/n,top:0,left:0}};var iT={IFlyout:function(){}},Bt={Flyout:function(n){Bt.Flyout.superClass_.constructor.call(this),n.setMetrics=this.setMetrics_.bind(this),this.workspace_=new be.WorkspaceSvg(n),this.workspace_.setMetricsManager(new zl.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=(0,Ne.genUid)(),this.RTL=!!n.RTL,this.horizontalLayout=!1,this.toolboxPosition_=n.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null,this.recycledBlocks_=[]}};(0,t.module$exports$Blockly$utils$object.inherits)(Bt.Flyout,Wl.DeleteArea),Bt.Flyout.prototype.autoClose=!0,Bt.Flyout.prototype.isVisible_=!1,Bt.Flyout.prototype.containerVisible_=!0,Bt.Flyout.prototype.CORNER_RADIUS=8,Bt.Flyout.prototype.MARGIN=Bt.Flyout.prototype.CORNER_RADIUS,Bt.Flyout.prototype.GAP_X=3*Bt.Flyout.prototype.MARGIN,Bt.Flyout.prototype.GAP_Y=3*Bt.Flyout.prototype.MARGIN,Bt.Flyout.prototype.SCROLLBAR_MARGIN=2.5,Bt.Flyout.prototype.width_=0,Bt.Flyout.prototype.height_=0,Bt.Flyout.prototype.dragAngleRange_=70,Bt.Flyout.prototype.createDom=function(n){return this.svgGroup_=(0,S.createSvgElement)(n,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},Bt.Flyout.prototype.init=function(n){this.targetWorkspace=n,this.workspace_.targetWorkspace=n,this.workspace_.scrollbar=new $r.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,(0,A.conditionalBind)(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,(0,A.conditionalBind)(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),n.getComponentManager().addComponent({component:this,weight:1,capabilities:[un.ComponentManager.Capability.DELETE_AREA,un.ComponentManager.Capability.DRAG_TARGET]})},Bt.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),(0,A.unbind)(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&((0,S.removeNode)(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},Bt.Flyout.prototype.getWidth=function(){return this.width_},Bt.Flyout.prototype.getHeight=function(){return this.height_},Bt.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},Bt.Flyout.prototype.getWorkspace=function(){return this.workspace_},Bt.Flyout.prototype.isVisible=function(){return this.isVisible_},Bt.Flyout.prototype.setVisible=function(n){var s=n!==this.isVisible();this.isVisible_=n,s&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},Bt.Flyout.prototype.setContainerVisible=function(n){var s=n!==this.containerVisible_;this.containerVisible_=n,s&&this.updateDisplay_()},Bt.Flyout.prototype.updateDisplay_=function(){var n=this.containerVisible_?this.isVisible():!1;this.svgGroup_.style.display=n?"block":"none",this.workspace_.scrollbar.setContainerVisible(n)},Bt.Flyout.prototype.positionAt_=function(n,s,u,d){this.svgGroup_.setAttribute("width",n),this.svgGroup_.setAttribute("height",s),this.workspace_.setCachedParentSvgSize(n,s),this.svgGroup_.tagName==="svg"?(0,S.setCssTransform)(this.svgGroup_,"translate("+u+"px,"+d+"px)"):this.svgGroup_.setAttribute("transform","translate("+u+","+d+")"),(n=this.workspace_.scrollbar)&&(n.setOrigin(u,d),n.resize(),n.hScroll&&n.hScroll.setPosition(n.hScroll.position.x,n.hScroll.position.y),n.vScroll&&n.vScroll.setPosition(n.vScroll.position.x,n.vScroll.position.y))},Bt.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n=0,s;s=this.listeners_[n];n++)(0,A.unbind)(s);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},Bt.Flyout.prototype.show=function(n){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof n=="string"&&(n=this.getDynamicCategoryContents_(n)),this.setVisible(!0),n=(0,at.convertFlyoutDefToJsonArray)(n),n=this.createFlyoutInfo_(n),this.layout_(n.contents,n.gaps),this.listeners_.push((0,A.conditionalBind)(this.svgBackground_,"mouseover",this,function(){for(var s=this.workspace_.getTopBlocks(!1),u=0,d;d=s[u];u++)d.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()},Bt.Flyout.prototype.createFlyoutInfo_=function(n){var s=[],u=[];this.permanentlyDisabled_.length=0;for(var d=this.horizontalLayout?this.GAP_X:this.GAP_Y,T=0,w;w=n[T];T++)switch(w.custom&&(w=this.getDynamicCategoryContents_(w.custom),w=(0,at.convertFlyoutDefToJsonArray)(w),n.splice.apply(n,[T,1].concat(w)),w=n[T]),w.kind.toUpperCase()){case"BLOCK":var N=this.createFlyoutBlock_(w);s.push({type:"block",block:N}),this.addBlockGap_(w,u,d);break;case"SEP":this.addSeparatorGap_(w,u,d);break;case"LABEL":w=this.createButton_(w,!0),s.push({type:"button",button:w}),u.push(d);break;case"BUTTON":w=this.createButton_(w,!1),s.push({type:"button",button:w}),u.push(d)}return{contents:s,gaps:u}},Bt.Flyout.prototype.getDynamicCategoryContents_=function(n){if(n=this.workspace_.targetWorkspace.getToolboxCategoryCallback(n),typeof n!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return n(this.workspace_.targetWorkspace)},Bt.Flyout.prototype.createButton_=function(n,s){var u=Zo.FlyoutButton;if(!u)throw Error("Missing require for Blockly.FlyoutButton");return new u(this.workspace_,this.targetWorkspace,n,s)},Bt.Flyout.prototype.createFlyoutBlock_=function(n){var s;return n.blockxml?(n=typeof n.blockxml=="string"?(0,t.module$exports$Blockly$Xml.textToDom)(n.blockxml):n.blockxml,(s=this.getRecycledBlock_(n.getAttribute("type")))||(s=(0,t.module$exports$Blockly$Xml.domToBlock)(n,this.workspace_))):(s=this.getRecycledBlock_(n.type),s||(n.enabled===void 0&&(n.enabled=n.disabled!=="true"&&n.disabled!==!0),s=(0,jo.append)(n,this.workspace_))),s.isEnabled()||this.permanentlyDisabled_.push(s),s},Bt.Flyout.prototype.getRecycledBlock_=function(n){for(var s=-1,u=0;u<this.recycledBlocks_.length;u++)if(this.recycledBlocks_[u].type===n){s=u;break}return s===-1?void 0:this.recycledBlocks_.splice(s,1)[0]},Bt.Flyout.prototype.addBlockGap_=function(n,s,u){if(n.gap)var d=parseInt(n.gap,10);else n.blockxml&&(n=typeof n.blockxml=="string"?(0,t.module$exports$Blockly$Xml.textToDom)(n.blockxml):n.blockxml,d=parseInt(n.getAttribute("gap"),10));s.push(isNaN(d)?u:d)},Bt.Flyout.prototype.addSeparatorGap_=function(n,s,u){n=parseInt(n.gap,10),!isNaN(n)&&0<s.length?s[s.length-1]=n:s.push(u)},Bt.Flyout.prototype.clearOldBlocks_=function(){for(var n=this.workspace_.getTopBlocks(!1),s=0,u;u=n[s];s++)this.blockIsRecyclable_(u)?this.recycleBlock_(u):u.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(s=this.mats_[n])&&((0,I.unbindMouseEvents)(s),(0,S.removeNode)(s));for(n=this.mats_.length=0;s=this.buttons_[n];n++)s.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},Bt.Flyout.prototype.emptyRecycledBlocks_=function(){for(var n=0;n<this.recycledBlocks_.length;n++)this.recycledBlocks_[n].dispose();this.recycledBlocks_=[]},Bt.Flyout.prototype.blockIsRecyclable_=function(n){return!1},Bt.Flyout.prototype.recycleBlock_=function(n){var s=n.getRelativeToSurfaceXY();n.moveBy(-s.x,-s.y),this.recycledBlocks_.push(n)},Bt.Flyout.prototype.addBlockListeners_=function(n,s,u){this.listeners_.push((0,A.conditionalBind)(n,"mousedown",null,this.blockMouseDown_(s))),this.listeners_.push((0,A.conditionalBind)(u,"mousedown",null,this.blockMouseDown_(s))),this.listeners_.push((0,A.bind)(n,"mouseenter",s,s.addSelect)),this.listeners_.push((0,A.bind)(n,"mouseleave",s,s.removeSelect)),this.listeners_.push((0,A.bind)(u,"mouseenter",s,s.addSelect)),this.listeners_.push((0,A.bind)(u,"mouseleave",s,s.removeSelect))},Bt.Flyout.prototype.blockMouseDown_=function(n){var s=this;return function(u){var d=s.targetWorkspace.getGesture(u);d&&(d.setStartBlock(n),d.handleFlyoutStart(u,s))}},Bt.Flyout.prototype.onMouseDown_=function(n){var s=this.targetWorkspace.getGesture(n);s&&s.handleFlyoutStart(n,this)},Bt.Flyout.prototype.isBlockCreatable_=function(n){return n.isEnabled()},Bt.Flyout.prototype.createBlock=function(n){var s=null;(0,B.disable)();var u=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{s=this.placeNewBlock_(n)}finally{(0,B.enable)()}if(this.targetWorkspace.hideChaff(),n=(0,t.module$exports$Blockly$Variables.getAddedVariables)(this.targetWorkspace,u),(0,B.isEnabled)()){for((0,B.setGroup)(!0),u=0;u<n.length;u++){var d=n[u];(0,B.fire)(new((0,B.get)(B.VAR_CREATE))(d))}(0,B.fire)(new((0,B.get)(B.CREATE))(s))}return this.autoClose?this.hide():this.filterForCapacity_(),s},Bt.Flyout.prototype.initFlyoutButton_=function(n,s,u){var d=n.createDom();n.moveTo(s,u),n.show(),this.listeners_.push((0,A.conditionalBind)(d,"mousedown",this,this.onMouseDown_)),this.buttons_.push(n)},Bt.Flyout.prototype.createRect_=function(n,s,u,d,T){return s=(0,S.createSvgElement)(ce.Svg.RECT,{"fill-opacity":0,x:s,y:u,height:d.height,width:d.width},null),s.tooltip=n,(0,I.bindMouseEvents)(s),this.workspace_.getCanvas().insertBefore(s,n.getSvgRoot()),n.flyoutRect_=s,this.mats_[T]=s},Bt.Flyout.prototype.moveRectToBlock_=function(n,s){var u=s.getHeightWidth();n.setAttribute("width",u.width),n.setAttribute("height",u.height),s=s.getRelativeToSurfaceXY(),n.setAttribute("y",s.y),n.setAttribute("x",this.RTL?s.x-u.width:s.x)},Bt.Flyout.prototype.filterForCapacity_=function(){for(var n=this.workspace_.getTopBlocks(!1),s=0,u;u=n[s];s++)if(this.permanentlyDisabled_.indexOf(u)===-1)for(var d=this.targetWorkspace.isCapacityAvailable((0,t.module$exports$Blockly$common.getBlockTypeCounts)(u));u;)u.setEnabled(d),u=u.getNextBlock()},Bt.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},Bt.Flyout.prototype.isScrollable=function(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1},Bt.Flyout.prototype.placeNewBlock_=function(n){var s=this.targetWorkspace;if(!n.getSvgRoot())throw Error("oldBlock is not rendered.");var u=(0,jo.save)(n);return s.setResizesEnabled(!1),s=(0,jo.append)(u,s),this.positionNewBlock_(n,s),s},Bt.Flyout.prototype.positionNewBlock_=function(n,s){var u=this.targetWorkspace,d=u.getOriginOffsetInPixels(),T=this.workspace_.getOriginOffsetInPixels();n=n.getRelativeToSurfaceXY(),n.scale(this.workspace_.scale),T=W.Coordinate.sum(T,n),d=W.Coordinate.difference(T,d),d.scale(1/u.scale),s.moveTo(new W.Coordinate(d.x,d.y))};var Gr={VerticalFlyout:function(n){Gr.VerticalFlyout.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(Gr.VerticalFlyout,Bt.Flyout),Gr.VerticalFlyout.registryName="verticalFlyout",Gr.VerticalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var s=this.workspace_.getMetricsManager(),u=s.getScrollMetrics(),d=s.getViewMetrics();s=s.getAbsoluteMetrics(),typeof n.y=="number"&&(this.workspace_.scrollY=-(u.top+(u.height-d.height)*n.y)),this.workspace_.translate(this.workspace_.scrollX+s.left,this.workspace_.scrollY+s.top)}},Gr.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),s=n.getAbsoluteMetrics(),u=n.getViewMetrics();return n=n.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===at.Position.LEFT?n.width:u.width-this.width_:this.toolboxPosition_===at.Position.LEFT?0:u.width:this.toolboxPosition_===at.Position.LEFT?0:u.width+s.left-this.width_},Gr.VerticalFlyout.prototype.getY=function(){return 0},Gr.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=n.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,n.height-2*this.CORNER_RADIUS),n=this.getX();var s=this.getY();this.positionAt_(this.width_,this.height_,n,s)}},Gr.VerticalFlyout.prototype.setBackgroundPath_=function(n,s){var u=this.toolboxPosition_===at.Position.RIGHT,d=n+this.CORNER_RADIUS;d=["M "+(u?d:0)+",0"],d.push("h",u?-n:n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",Math.max(0,s)),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",u?n:-n),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},Gr.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},Gr.VerticalFlyout.prototype.wheel_=function(n){var s=(0,A.getScrollDeltaPixels)(n);if(s.y){var u=this.workspace_.getMetricsManager(),d=u.getScrollMetrics();s=u.getViewMetrics().top-d.top+s.y,this.workspace_.scrollbar.setY(s),(0,Q.hide)(),Ie.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},Gr.VerticalFlyout.prototype.layout_=function(n,s){this.workspace_.scale=this.targetWorkspace.scale;for(var u=this.MARGIN,d=this.RTL?u:u+this.tabWidth_,T=0,w;w=n[T];T++)if(w.type==="block"){w=w.block;for(var N=w.getDescendants(!1),J=0,ve;ve=N[J];J++)ve.isInFlyout=!0;w.render(),N=w.getSvgRoot(),J=w.getHeightWidth(),ve=w.outputConnection?d-this.tabWidth_:d,w.moveBy(ve,u),ve=this.createRect_(w,this.RTL?ve-J.width:ve,u,J,T),this.addBlockListeners_(N,w,ve),u+=J.height+s[T]}else w.type==="button"&&(this.initFlyoutButton_(w.button,d,u),u+=w.button.height+s[T])},Gr.VerticalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var s=this.dragAngleRange_;return n<s&&n>-s||n<-180+s||n>180-s},Gr.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),s=n.left;return this.toolboxPosition_===at.Position.LEFT?new nt.Rect(-1e9,1e9,-1e9,s+n.width):new nt.Rect(-1e9,1e9,s,1e9)},Gr.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var n=0,s=this.workspace_.getTopBlocks(!1),u=0,d;d=s[u];u++){var T=d.getHeightWidth().width;d.outputConnection&&(T-=this.tabWidth_),n=Math.max(n,T)}for(u=0;d=this.buttons_[u];u++)n=Math.max(n,d.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,n+=_t.Scrollbar.scrollbarThickness,this.width_!==n){for(u=0;d=s[u];u++){if(this.RTL){T=d.getRelativeToSurfaceXY().x;var w=n/this.workspace_.scale-this.MARGIN;d.outputConnection||(w-=this.tabWidth_),d.moveBy(w-T,0)}d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d)}if(this.RTL)for(s=0;u=this.buttons_[s];s++)d=u.getPosition().y,u.moveTo(n/this.workspace_.scale-u.width-this.MARGIN-this.tabWidth_,d);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==at.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position(),this.targetWorkspace.recordDragTargets()}},(0,ue.register)(ue.Type.FLYOUTS_VERTICAL_TOOLBOX,ue.DEFAULT,Gr.VerticalFlyout);var Cd={IToolboxItem:function(){}},bd={ISelectableToolboxItem:function(){}},kd={ICollapsibleToolboxItem:function(){}},Ti={ToolboxItem:function(n,s,u){this.id_=n.toolboxitemid||(0,Ne.getNextUniqueId)(),this.level_=(this.parent_=u||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=n,this.parentToolbox_=s,this.workspace_=this.parentToolbox_.getWorkspace()}};Ti.ToolboxItem.prototype.init=function(){},Ti.ToolboxItem.prototype.getDiv=function(){return null},Ti.ToolboxItem.prototype.getId=function(){return this.id_},Ti.ToolboxItem.prototype.getParent=function(){return null},Ti.ToolboxItem.prototype.getLevel=function(){return this.level_},Ti.ToolboxItem.prototype.isSelectable=function(){return!1},Ti.ToolboxItem.prototype.isCollapsible=function(){return!1},Ti.ToolboxItem.prototype.dispose=function(){};var Wt={ToolboxCategory:function(n,s,u){Wt.ToolboxCategory.superClass_.constructor.call(this,n,s,u),this.name_=(0,qt.replaceMessageReferences)(n.name),this.colour_=this.getColour_(n),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),(0,t.module$exports$Blockly$utils$object.mixin)(this.cssConfig_,n.cssconfig||n.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(n)}};(0,t.module$exports$Blockly$utils$object.inherits)(Wt.ToolboxCategory,Ti.ToolboxItem),Wt.ToolboxCategory.registrationName="category",Wt.ToolboxCategory.nestedPadding=19,Wt.ToolboxCategory.borderWidth=8,Wt.ToolboxCategory.defaultBackgroundColour="#57e",Wt.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},Wt.ToolboxCategory.prototype.parseContents_=function(n){var s=n.contents;if(n.custom)this.flyoutItems_=n.custom;else if(s)for(n=0;n<s.length;n++)this.flyoutItems_.push(s[n])},Wt.ToolboxCategory.prototype.init=function(){this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()},Wt.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),(0,Te.setRole)(this.htmlDiv_,Te.Role.TREEITEM),(0,Te.setState)(this.htmlDiv_,Te.State.SELECTED,!1),(0,Te.setState)(this.htmlDiv_,Te.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),(0,Te.setRole)(this.iconDom_,Te.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),(0,Te.setState)(this.htmlDiv_,Te.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},Wt.ToolboxCategory.prototype.createContainer_=function(){var n=document.createElement("div");return(0,S.addClass)(n,this.cssConfig_.container),n},Wt.ToolboxCategory.prototype.createRowContainer_=function(){var n=document.createElement("div");(0,S.addClass)(n,this.cssConfig_.row);var s=Wt.ToolboxCategory.nestedPadding*this.getLevel();return s=s.toString()+"px",this.workspace_.RTL?n.style.paddingRight=s:n.style.paddingLeft=s,n},Wt.ToolboxCategory.prototype.createRowContentsContainer_=function(){var n=document.createElement("div");return(0,S.addClass)(n,this.cssConfig_.rowcontentcontainer),n},Wt.ToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||(0,S.addClass)(n,this.cssConfig_.icon),n.style.display="inline-block",n},Wt.ToolboxCategory.prototype.createLabelDom_=function(n){var s=document.createElement("span");return s.setAttribute("id",this.getId()+".label"),s.textContent=n,(0,S.addClass)(s,this.cssConfig_.label),s},Wt.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},Wt.ToolboxCategory.prototype.addColourBorder_=function(n){n&&(n=Wt.ToolboxCategory.borderWidth+"px solid "+(n||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=n:this.rowDiv_.style.borderLeft=n)},Wt.ToolboxCategory.prototype.getColour_=function(n){var s=n.categorystyle||n.categoryStyle;if((n=n.colour)&&s)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else return s?this.getColourfromStyle_(s):this.parseColour_(n);return""},Wt.ToolboxCategory.prototype.getColourfromStyle_=function(n){var s=this.workspace_.getTheme();if(n&&s){if((s=s.categoryStyles[n])&&s.colour)return this.parseColour_(s.colour);console.warn('Style "'+n+'" must exist and contain a colour value')}return""},Wt.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},Wt.ToolboxCategory.prototype.parseColour_=function(n){if(n=(0,qt.replaceMessageReferences)(n),n==null||n==="")return"";var s=Number(n);return isNaN(s)?(s=(0,Sn.parse)(n))?s:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+n),""):(0,Sn.hueToHex)(s)},Wt.ToolboxCategory.prototype.openIcon_=function(n){n&&((0,S.removeClasses)(n,this.cssConfig_.closedicon),(0,S.addClass)(n,this.cssConfig_.openicon))},Wt.ToolboxCategory.prototype.closeIcon_=function(n){n&&((0,S.removeClasses)(n,this.cssConfig_.openicon),(0,S.addClass)(n,this.cssConfig_.closedicon))},Wt.ToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none",this.isHidden_=!n,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()},Wt.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},Wt.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},Wt.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},Wt.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var n=this;n.getParent();)if(n=n.getParent(),!n.isExpanded())return!1;return!0},Wt.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},Wt.ToolboxCategory.prototype.onClick=function(n){},Wt.ToolboxCategory.prototype.setSelected=function(n){if(n){var s=this.parseColour_(Wt.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||s,(0,S.addClass)(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",(0,S.removeClass)(this.rowDiv_,this.cssConfig_.selected);(0,Te.setState)(this.htmlDiv_,Te.State.SELECTED,n)},Wt.ToolboxCategory.prototype.setDisabled=function(n){this.isDisabled_=n,this.getDiv().setAttribute("disabled",n),n?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},Wt.ToolboxCategory.prototype.getName=function(){return this.name_},Wt.ToolboxCategory.prototype.getParent=function(){return this.parent_},Wt.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},Wt.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},Wt.ToolboxCategory.prototype.updateFlyoutContents=function(n){this.flyoutItems_=[],typeof n=="string"?this.toolboxItemDef_.custom=n:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=(0,at.convertFlyoutDefToJsonArray)(n)),this.parseContents_(this.toolboxItemDef_)},Wt.ToolboxCategory.prototype.dispose=function(){(0,S.removeNode)(this.htmlDiv_)},(0,a.register)(`
  .blocklyTreeRow:not(.blocklyTreeSelected):hover {
    background-color: rgba(255, 255, 255, 0.2);
  }

  .blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
    margin: 1px 5px 1px 0;
  }

  .blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
    margin: 1px 0 1px 5px;
  }

  .blocklyTreeRow {
    height: 22px;
    line-height: 22px;
    margin-bottom: 3px;
    padding-right: 8px;
    white-space: nowrap;
  }

  .blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
    margin-left: 8px;
    padding-right: 0;
  }

  .blocklyTreeIcon {
    background-image: url(<<<PATH>>>/sprites.png);
    height: 16px;
    vertical-align: middle;
    visibility: hidden;
    width: 16px;
  }

  .blocklyTreeIconClosed {
    background-position: -32px -1px;
  }

  .blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
    background-position: 0 -1px;
  }

  .blocklyTreeSelected>.blocklyTreeIconClosed {
    background-position: -32px -17px;
  }

  .blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
    background-position: 0 -17px;
  }

  .blocklyTreeIconOpen {
    background-position: -16px -1px;
  }

  .blocklyTreeSelected>.blocklyTreeIconOpen {
    background-position: -16px -17px;
  }

  .blocklyTreeLabel {
    cursor: default;
    font: 16px sans-serif;
    padding: 0 3px;
    vertical-align: middle;
  }

  .blocklyToolboxDelete .blocklyTreeLabel {
    cursor: url("<<<PATH>>>/handdelete.cur"), auto;
  }

  .blocklyTreeSelected .blocklyTreeLabel {
    color: #fff;
  }
`),(0,ue.register)(ue.Type.TOOLBOX_ITEM,Wt.ToolboxCategory.registrationName,Wt.ToolboxCategory);var ni={ToolboxSeparator:function(n,s){ni.ToolboxSeparator.superClass_.constructor.call(this,n,s),this.cssConfig_={container:"blocklyTreeSeparator"},(0,t.module$exports$Blockly$utils$object.mixin)(this.cssConfig_,n.cssconfig||n.cssConfig)}};(0,t.module$exports$Blockly$utils$object.inherits)(ni.ToolboxSeparator,Ti.ToolboxItem),ni.ToolboxSeparator.registrationName="sep",ni.ToolboxSeparator.prototype.init=function(){this.createDom_()},ni.ToolboxSeparator.prototype.createDom_=function(){var n=document.createElement("div");return(0,S.addClass)(n,this.cssConfig_.container),this.htmlDiv_=n},ni.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},ni.ToolboxSeparator.prototype.dispose=function(){(0,S.removeNode)(this.htmlDiv_)},(0,a.register)(`
  .blocklyTreeSeparator {
    border-bottom: solid #e5e5e5 1px;
    height: 0;
    margin: 5px 0;
  }

  .blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
    border-right: solid #e5e5e5 1px;
    border-bottom: none;
    height: auto;
    margin: 0 5px 0 5px;
    padding: 5px 0;
    width: 0;
  }
`),(0,ue.register)(ue.Type.TOOLBOX_ITEM,ni.ToolboxSeparator.registrationName,ni.ToolboxSeparator);var Xn={CollapsibleToolboxCategory:function(n,s,u){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],Xn.CollapsibleToolboxCategory.superClass_.constructor.call(this,n,s,u)}};(0,t.module$exports$Blockly$utils$object.inherits)(Xn.CollapsibleToolboxCategory,Wt.ToolboxCategory),Xn.CollapsibleToolboxCategory.registrationName="collapsibleCategory",Xn.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var n=Xn.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return n.contents="blocklyToolboxContents",n},Xn.CollapsibleToolboxCategory.prototype.parseContents_=function(n){var s=n.contents,u=!0;if(n.custom)this.flyoutItems_=n.custom;else if(s)for(n=0;n<s.length;n++){var d=s[n];!(0,ue.hasItem)(ue.Type.TOOLBOX_ITEM,d.kind)||d.kind.toLowerCase()===ni.ToolboxSeparator.registrationName&&u?(this.flyoutItems_.push(d),u=!0):(this.createToolboxItem_(d),u=!1)}},Xn.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(n){var s=n.kind;s.toUpperCase()=="CATEGORY"&&(0,at.isCategoryCollapsible)(n)&&(s=Xn.CollapsibleToolboxCategory.registrationName),n=new((0,ue.getClass)(ue.Type.TOOLBOX_ITEM,s))(n,this.parentToolbox_,this),this.toolboxItems_.push(n)},Xn.CollapsibleToolboxCategory.prototype.init=function(){Xn.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)},Xn.CollapsibleToolboxCategory.prototype.createDom_=function(){Xn.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var n=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(n),(0,Te.setRole)(this.subcategoriesDiv_,Te.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},Xn.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||((0,S.addClass)(n,this.cssConfig_.icon),n.style.visibility="visible"),n.style.display="inline-block",n},Xn.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(n){var s=document.createElement("div");(0,S.addClass)(s,this.cssConfig_.contents);for(var u=0;u<n.length;u++){var d=n[u];d.init();var T=d.getDiv();s.appendChild(T),d.getClickTarget&&d.getClickTarget().setAttribute("id",d.getId())}return s},Xn.CollapsibleToolboxCategory.prototype.setExpanded=function(n){this.expanded_!==n&&((this.expanded_=n)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),(0,Te.setState)(this.htmlDiv_,Te.State.EXPANDED,n),this.parentToolbox_.handleToolboxItemResize())},Xn.CollapsibleToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none";for(var s=this.getChildToolboxItems(),u=0;u<s.length;u++)s[u].setVisible_(n);this.isHidden_=!n,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()},Xn.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},Xn.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},Xn.CollapsibleToolboxCategory.prototype.onClick=function(n){this.toggleExpanded()},Xn.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},Xn.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},Xn.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},(0,ue.register)(ue.Type.TOOLBOX_ITEM,Xn.CollapsibleToolboxCategory.registrationName,Xn.CollapsibleToolboxCategory);var xg={IAutoHideable:function(){}},Sg={IStyleable:function(){}},sT={IToolbox:function(){}},$s={ToolboxItemSelect:function(n,s,u){$s.ToolboxItemSelect.superClass_.constructor.call(this,u),this.oldItem=n,this.newItem=s}};(0,t.module$exports$Blockly$utils$object.inherits)($s.ToolboxItemSelect,lo.UiBase),$s.ToolboxItemSelect.prototype.type=B.TOOLBOX_ITEM_SELECT,$s.ToolboxItemSelect.prototype.toJson=function(){var n=$s.ToolboxItemSelect.superClass_.toJson.call(this);return n.oldItem=this.oldItem,n.newItem=this.newItem,n},$s.ToolboxItemSelect.prototype.fromJson=function(n){$s.ToolboxItemSelect.superClass_.fromJson.call(this,n),this.oldItem=n.oldItem,this.newItem=n.newItem},(0,ue.register)(ue.Type.EVENT,B.TOOLBOX_ITEM_SELECT,$s.ToolboxItemSelect);var It={Toolbox:function(n){It.Toolbox.superClass_.constructor.call(this),this.workspace_=n,this.id="toolbox",this.toolboxDef_=n.options.languageTree||{contents:[]},this.horizontalLayout_=n.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=n.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=n.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]}};(0,t.module$exports$Blockly$utils$object.inherits)(It.Toolbox,Wl.DeleteArea),It.Toolbox.prototype.onShortcut=function(n){return!1},It.Toolbox.prototype.init=function(){var n=this.workspace_,s=n.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),(0,S.insertAfter)(this.flyout_.createDom("svg"),s),this.setVisible(!0),this.flyout_.init(n),this.render(this.toolboxDef_),n=n.getThemeManager(),n.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),n.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[un.ComponentManager.Capability.AUTOHIDEABLE,un.ComponentManager.Capability.DELETE_AREA,un.ComponentManager.Capability.DRAG_TARGET]})},It.Toolbox.prototype.createDom_=function(n){n=n.getParentSvg();var s=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,(0,Te.setRole)(this.contentsDiv_,Te.Role.TREE),s.appendChild(this.contentsDiv_),n.parentNode.insertBefore(s,n),this.attachEvents_(s,this.contentsDiv_),s},It.Toolbox.prototype.createContainer_=function(){var n=document.createElement("div");return n.setAttribute("layout",this.isHorizontal()?"h":"v"),(0,S.addClass)(n,"blocklyToolboxDiv"),(0,S.addClass)(n,"blocklyNonSelectable"),n.setAttribute("dir",this.RTL?"RTL":"LTR"),n},It.Toolbox.prototype.createContentsContainer_=function(){var n=document.createElement("div");return(0,S.addClass)(n,"blocklyToolboxContents"),this.isHorizontal()&&(n.style.flexDirection="row"),n},It.Toolbox.prototype.attachEvents_=function(n,s){n=(0,A.conditionalBind)(n,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(n),s=(0,A.conditionalBind)(s,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(s)},It.Toolbox.prototype.onClick_=function(n){if((0,A.isRightButton)(n)||n.target===this.HtmlDiv)(0,t.module$exports$Blockly$common.getMainWorkspace)().hideChaff(!1);else{var s=n.target.getAttribute("id");s&&(s=this.getToolboxItemById(s),s.isSelectable()&&(this.setSelectedItem(s),s.onClick(n))),(0,t.module$exports$Blockly$common.getMainWorkspace)().hideChaff(!0)}(0,m.clearTouchIdentifier)()},It.Toolbox.prototype.onKeyDown_=function(n){var s=!1;switch(n.keyCode){case dt.KeyCodes.DOWN:s=this.selectNext_();break;case dt.KeyCodes.UP:s=this.selectPrevious_();break;case dt.KeyCodes.LEFT:s=this.selectParent_();break;case dt.KeyCodes.RIGHT:s=this.selectChild_();break;case dt.KeyCodes.ENTER:case dt.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),s=!0);break;default:s=!1}!s&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(s=this.selectedItem_.onKeyDown(n)),s&&n.preventDefault()},It.Toolbox.prototype.createFlyout_=function(){var n=this.workspace_,s=new mr.Options({parentWorkspace:n,rtl:n.RTL,oneBasedIndex:n.options.oneBasedIndex,horizontalLayout:n.horizontalLayout,renderer:n.options.renderer,rendererOverrides:n.options.rendererOverrides,move:{scrollbars:!0}});return s.toolboxPosition=n.options.toolboxPosition,new(n.horizontalLayout?(0,ue.getClassFromOptions)(ue.Type.FLYOUTS_HORIZONTAL_TOOLBOX,n.options,!0):(0,ue.getClassFromOptions)(ue.Type.FLYOUTS_VERTICAL_TOOLBOX,n.options,!0))(s)},It.Toolbox.prototype.render=function(n){this.toolboxDef_=n;for(var s=0;s<this.contents_.length;s++){var u=this.contents_[s];u&&u.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(n.contents),this.position(),this.handleToolboxItemResize()},It.Toolbox.prototype.renderContents_=function(n){for(var s=document.createDocumentFragment(),u=0;u<n.length;u++)this.createToolboxItem_(n[u],s);this.contentsDiv_.appendChild(s)},It.Toolbox.prototype.createToolboxItem_=function(n,s){var u=n.kind;u.toUpperCase()==="CATEGORY"&&(0,at.isCategoryCollapsible)(n)&&(u=Xn.CollapsibleToolboxCategory.registrationName),(u=(0,ue.getClass)(ue.Type.TOOLBOX_ITEM,u.toLowerCase()))&&(n=new u(n,this),this.addToolboxItem_(n),n.init(),(u=n.getDiv())&&s.appendChild(u),n.getClickTarget&&n.getClickTarget().setAttribute("id",n.getId()))},It.Toolbox.prototype.addToolboxItem_=function(n){if(this.contents_.push(n),this.contentMap_[n.getId()]=n,n.isCollapsible()){n=n.getChildToolboxItems();for(var s=0;s<n.length;s++)this.addToolboxItem_(n[s])}},It.Toolbox.prototype.getToolboxItems=function(){return this.contents_},It.Toolbox.prototype.addStyle=function(n){(0,S.addClass)(this.HtmlDiv,n)},It.Toolbox.prototype.removeStyle=function(n){(0,S.removeClass)(this.HtmlDiv,n)},It.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var n=this.HtmlDiv.getBoundingClientRect(),s=n.top,u=s+n.height,d=n.left;return n=d+n.width,this.toolboxPosition===at.Position.TOP?new nt.Rect(-1e7,u,-1e7,1e7):this.toolboxPosition===at.Position.BOTTOM?new nt.Rect(s,1e7,-1e7,1e7):this.toolboxPosition===at.Position.LEFT?new nt.Rect(-1e7,1e7,-1e7,n):new nt.Rect(-1e7,1e7,d,1e7)},It.Toolbox.prototype.wouldDelete=function(n,s){return n instanceof Xe.BlockSvg?this.updateWouldDelete_(!n.getParent()&&n.isDeletable()):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_},It.Toolbox.prototype.onDragEnter=function(n){this.updateCursorDeleteStyle_(!0)},It.Toolbox.prototype.onDragExit=function(n){this.updateCursorDeleteStyle_(!1)},It.Toolbox.prototype.onDrop=function(n){this.updateCursorDeleteStyle_(!1)},It.Toolbox.prototype.updateWouldDelete_=function(n){n!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=n,this.updateCursorDeleteStyle_(!0))},It.Toolbox.prototype.updateCursorDeleteStyle_=function(n){var s=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";n?this.addStyle(s):this.removeStyle(s)},It.Toolbox.prototype.getToolboxItemById=function(n){return this.contentMap_[n]||null},It.Toolbox.prototype.getWidth=function(){return this.width_},It.Toolbox.prototype.getHeight=function(){return this.height_},It.Toolbox.prototype.getFlyout=function(){return this.flyout_},It.Toolbox.prototype.getWorkspace=function(){return this.workspace_},It.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},It.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},It.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},It.Toolbox.prototype.position=function(){var n=this.workspace_.getMetrics(),s=this.HtmlDiv;s&&(this.horizontalLayout_?(s.style.left="0",s.style.height="auto",s.style.width="100%",this.height_=s.offsetHeight,this.width_=n.viewWidth,this.toolboxPosition===at.Position.TOP?s.style.top="0":s.style.bottom="0"):(this.toolboxPosition===at.Position.RIGHT?s.style.right="0":s.style.left="0",s.style.height="100%",this.width_=s.offsetWidth,this.height_=n.viewHeight),this.flyout_.position())},It.Toolbox.prototype.handleToolboxItemResize=function(){var n=this.workspace_,s=this.HtmlDiv.getBoundingClientRect();n.translate(this.toolboxPosition===at.Position.LEFT?n.scrollX+s.width:n.scrollX,this.toolboxPosition===at.Position.TOP?n.scrollY+s.height:n.scrollY),(0,t.module$exports$Blockly$common.svgResize)(n)},It.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},It.Toolbox.prototype.refreshTheme=function(){for(var n=0;n<this.contents_.length;n++){var s=this.contents_[n];s.refreshTheme&&s.refreshTheme()}},It.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},It.Toolbox.prototype.setVisible=function(n){this.isVisible_!==n&&(this.HtmlDiv.style.display=n?"block":"none",this.isVisible_=n,this.workspace_.recordDragTargets())},It.Toolbox.prototype.autoHide=function(n){!n&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},It.Toolbox.prototype.setSelectedItem=function(n){var s=this.selectedItem_;!n&&!s||n&&!n.isSelectable()||(this.shouldDeselectItem_(s,n)&&s!==null&&this.deselectItem_(s),this.shouldSelectItem_(s,n)&&n!==null&&this.selectItem_(s,n),this.updateFlyout_(s,n),this.fireSelectEvent_(s,n))},It.Toolbox.prototype.shouldDeselectItem_=function(n,s){return n!==null&&(!n.isCollapsible()||n!==s)},It.Toolbox.prototype.shouldSelectItem_=function(n,s){return s!==null&&s!==n},It.Toolbox.prototype.deselectItem_=function(n){this.selectedItem_=null,this.previouslySelectedItem_=n,n.setSelected(!1),(0,Te.setState)(this.contentsDiv_,Te.State.ACTIVEDESCENDANT,"")},It.Toolbox.prototype.selectItem_=function(n,s){this.selectedItem_=s,this.previouslySelectedItem_=n,s.setSelected(!0),(0,Te.setState)(this.contentsDiv_,Te.State.ACTIVEDESCENDANT,s.getId())},It.Toolbox.prototype.selectItemByPosition=function(n){-1<n&&n<this.contents_.length&&(n=this.contents_[n],n.isSelectable()&&this.setSelectedItem(n))},It.Toolbox.prototype.updateFlyout_=function(n,s){s&&(n!==s||s.isCollapsible())&&s.getContents().length?(this.flyout_.show(s.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},It.Toolbox.prototype.fireSelectEvent_=function(n,s){var u=n&&n.getName(),d=s&&s.getName();n===s&&(d=null),n=new((0,B.get)(B.TOOLBOX_ITEM_SELECT))(u,d,this.workspace_.id),(0,B.fire)(n)},It.Toolbox.prototype.selectParent_=function(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1},It.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var n=this.selectedItem_;return n.isExpanded()?this.selectNext_():n.setExpanded(!0),!0},It.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)+1;if(-1<n&&n<this.contents_.length){for(var s=this.contents_[n];s&&!s.isSelectable();)s=this.contents_[++n];if(s&&s.isSelectable())return this.setSelectedItem(s),!0}return!1},It.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)-1;if(-1<n&&n<this.contents_.length){for(var s=this.contents_[n];s&&!s.isSelectable();)s=this.contents_[--n];if(s&&s.isSelectable())return this.setSelectedItem(s),!0}return!1},It.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var n=0;n<this.contents_.length;n++)this.contents_[n].dispose();for(n=0;n<this.boundEvents_.length;n++)(0,A.unbind)(this.boundEvents_[n]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),(0,S.removeNode)(this.HtmlDiv)},(0,a.register)(`
  .blocklyToolboxDelete {
    cursor: url("<<<PATH>>>/handdelete.cur"), auto;
  }

  .blocklyToolboxGrab {
    cursor: url("<<<PATH>>>/handclosed.cur"), auto;
    cursor: grabbing;
    cursor: -webkit-grabbing;
  }

  /* Category tree in Toolbox. */
  .blocklyToolboxDiv {
    background-color: #ddd;
    overflow-x: visible;
    overflow-y: auto;
    padding: 4px 0 4px 0;
    position: absolute;
    z-index: 70;  /* so blocks go under toolbox when dragging */
    -webkit-tap-highlight-color: transparent;  /* issue #1345 */
  }

  .blocklyToolboxContents {
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
  }

  .blocklyToolboxContents:focus {
    outline: none;
  }
`),(0,ue.register)(ue.Type.TOOLBOX,ue.DEFAULT,It.Toolbox);var oi={HorizontalFlyout:function(n){oi.HorizontalFlyout.superClass_.constructor.call(this,n),this.horizontalLayout=!0}};(0,t.module$exports$Blockly$utils$object.inherits)(oi.HorizontalFlyout,Bt.Flyout),oi.HorizontalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var s=this.workspace_.getMetricsManager(),u=s.getScrollMetrics(),d=s.getViewMetrics();s=s.getAbsoluteMetrics(),typeof n.x=="number"&&(this.workspace_.scrollX=-(u.left+(u.width-d.width)*n.x)),this.workspace_.translate(this.workspace_.scrollX+s.left,this.workspace_.scrollY+s.top)}},oi.HorizontalFlyout.prototype.getX=function(){return 0},oi.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),s=n.getAbsoluteMetrics(),u=n.getViewMetrics();n=n.getToolboxMetrics();var d=this.toolboxPosition_===at.Position.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?d?n.height:u.height-this.height_:d?0:u.height:d?0:u.height+s.top-this.height_},oi.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=n.width,this.setBackgroundPath_(n.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),n=this.getX();var s=this.getY();this.positionAt_(this.width_,this.height_,n,s)}},oi.HorizontalFlyout.prototype.setBackgroundPath_=function(n,s){var u=this.toolboxPosition_===at.Position.TOP,d=["M 0,"+(u?0:this.CORNER_RADIUS)];u?(d.push("h",n+2*this.CORNER_RADIUS),d.push("v",s),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",-n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),d.push("h",n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",s),d.push("h",-n-2*this.CORNER_RADIUS)),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},oi.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},oi.HorizontalFlyout.prototype.wheel_=function(n){var s=(0,A.getScrollDeltaPixels)(n);if(s=s.x||s.y){var u=this.workspace_.getMetricsManager(),d=u.getScrollMetrics();s=u.getViewMetrics().left-d.left+s,this.workspace_.scrollbar.setX(s),(0,Q.hide)(),Ie.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},oi.HorizontalFlyout.prototype.layout_=function(n,s){this.workspace_.scale=this.targetWorkspace.scale;var u=this.MARGIN,d=u+this.tabWidth_;this.RTL&&(n=n.reverse());for(var T=0,w;w=n[T];T++)if(w.type==="block"){w=w.block;for(var N=w.getDescendants(!1),J=0,ve;ve=N[J];J++)ve.isInFlyout=!0;w.render(),N=w.getSvgRoot(),J=w.getHeightWidth(),ve=w.outputConnection?this.tabWidth_:0,ve=this.RTL?d+J.width:d-ve,w.moveBy(ve,u),ve=this.createRect_(w,ve,u,J,T),d+=J.width+s[T],this.addBlockListeners_(N,w,ve)}else w.type==="button"&&(this.initFlyoutButton_(w.button,d,u),d+=w.button.width+s[T])},oi.HorizontalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var s=this.dragAngleRange_;return n<90+s&&n>90-s||n>-90-s&&n<-90+s},oi.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),s=n.top;return this.toolboxPosition_===at.Position.TOP?new nt.Rect(-1e9,s+n.height,-1e9,1e9):new nt.Rect(s,1e9,-1e9,1e9)},oi.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var n=0,s=this.workspace_.getTopBlocks(!1),u=0,d;d=s[u];u++)n=Math.max(n,d.getHeightWidth().height);u=this.buttons_,d=0;for(var T;T=u[d];d++)n=Math.max(n,T.height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,n+=_t.Scrollbar.scrollbarThickness,this.height_!==n){for(u=0;d=s[u];u++)d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==at.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position(),this.targetWorkspace.recordDragTargets()}},(0,ue.register)(ue.Type.FLYOUTS_HORIZONTAL_TOOLBOX,ue.DEFAULT,oi.HorizontalFlyout),t.module$exports$Blockly$Generator={Generator:function(n){this.name_=n,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}},t.module$exports$Blockly$Generator.Generator.prototype.INFINITE_LOOP_TRAP=null,t.module$exports$Blockly$Generator.Generator.prototype.STATEMENT_PREFIX=null,t.module$exports$Blockly$Generator.Generator.prototype.STATEMENT_SUFFIX=null,t.module$exports$Blockly$Generator.Generator.prototype.INDENT="  ",t.module$exports$Blockly$Generator.Generator.prototype.COMMENT_WRAP=60,t.module$exports$Blockly$Generator.Generator.prototype.ORDER_OVERRIDES=[],t.module$exports$Blockly$Generator.Generator.prototype.isInitialized=null,t.module$exports$Blockly$Generator.Generator.prototype.workspaceToCode=function(n){n||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),n=(0,t.module$exports$Blockly$common.getMainWorkspace)());var s=[];this.init(n),n=n.getTopBlocks(!0);for(var u=0,d;d=n[u];u++){var T=this.blockToCode(d);Array.isArray(T)&&(T=T[0]),T&&(d.outputConnection&&(T=this.scrubNakedValue(T),this.STATEMENT_PREFIX&&!d.suppressPrefixSuffix&&(T=this.injectId(this.STATEMENT_PREFIX,d)+T),this.STATEMENT_SUFFIX&&!d.suppressPrefixSuffix&&(T+=this.injectId(this.STATEMENT_SUFFIX,d))),s.push(T))}return s=s.join(`
`),s=this.finish(s),s=s.replace(/^\s+\n/,""),s=s.replace(/\n\s+$/,`
`),s=s.replace(/[ \t]+\n/g,`
`)},t.module$exports$Blockly$Generator.Generator.prototype.prefixLines=function(n,s){return s+n.replace(/(?!\n$)\n/g,`
`+s)},t.module$exports$Blockly$Generator.Generator.prototype.allNestedComments=function(n){var s=[];n=n.getDescendants(!0);for(var u=0;u<n.length;u++){var d=n[u].getCommentText();d&&s.push(d)}return s.length&&s.push(""),s.join(`
`)},t.module$exports$Blockly$Generator.Generator.prototype.blockToCode=function(n,s){if(this.isInitialized===!1&&console.warn("Generator init was not called before blockToCode was called."),!n)return"";if(!n.isEnabled())return s?"":this.blockToCode(n.getNextBlock());if(n.isInsertionMarker())return s?"":this.blockToCode(n.getChildren(!1)[0]);var u=this[n.type];if(typeof u!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+n.type+'".');if(u=u.call(n,n),Array.isArray(u)){if(!n.outputConnection)throw TypeError("Expecting string from statement block: "+n.type);return[this.scrub_(n,u[0],s),u[1]]}if(typeof u=="string")return this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,n)+u),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,n)),this.scrub_(n,u,s);if(u===null)return"";throw SyntaxError("Invalid code generated: "+u)},t.module$exports$Blockly$Generator.Generator.prototype.valueToCode=function(n,s,u){if(isNaN(u))throw TypeError("Expecting valid order from block: "+n.type);var d=n.getInputTargetBlock(s);if(!d||(s=this.blockToCode(d),s===""))return"";if(!Array.isArray(s))throw TypeError("Expecting tuple from value block: "+d.type);if(n=s[0],s=s[1],isNaN(s))throw TypeError("Expecting valid order from value block: "+d.type);if(!n)return"";d=!1;var T=Math.floor(u),w=Math.floor(s);if(T<=w&&(T!==w||T!==0&&T!==99)){for(d=!0,T=0;T<this.ORDER_OVERRIDES.length;T++)if(this.ORDER_OVERRIDES[T][0]===u&&this.ORDER_OVERRIDES[T][1]===s){d=!1;break}}return d&&(n="("+n+")"),n},t.module$exports$Blockly$Generator.Generator.prototype.statementToCode=function(n,s){if(n=n.getInputTargetBlock(s),s=this.blockToCode(n),typeof s!="string")throw TypeError("Expecting code from statement block: "+(n&&n.type));return s&&(s=this.prefixLines(s,this.INDENT)),s},t.module$exports$Blockly$Generator.Generator.prototype.addLoopTrap=function(n,s){return this.INFINITE_LOOP_TRAP&&(n=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,s),this.INDENT)+n),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(n=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,s),this.INDENT)+n),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(n+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,s),this.INDENT)),n},t.module$exports$Blockly$Generator.Generator.prototype.injectId=function(n,s){return s=s.id.replace(/\$/g,"$$$$"),n.replace(/%1/g,"'"+s+"'")},t.module$exports$Blockly$Generator.Generator.prototype.RESERVED_WORDS_="",t.module$exports$Blockly$Generator.Generator.prototype.addReservedWords=function(n){this.RESERVED_WORDS_+=n+","},t.module$exports$Blockly$Generator.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperties(t.module$exports$Blockly$Generator.Generator.prototype,{variableDB_:{get:function(){return(0,l.warn)("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(n){(0,l.warn)("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=n}}}),t.module$exports$Blockly$Generator.Generator.prototype.provideFunction_=function(n,s){if(!this.definitions_[n]){var u=this.nameDB_.getDistinctName(n,t.module$exports$Blockly$Names.NameType.PROCEDURE);this.functionNames_[n]=u,s=s.join(`
`).replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,u);for(var d;d!==s;)d=s,s=s.replace(/^(( {2})*) {2}/gm,"$1\0");s=s.replace(/\0/g,this.INDENT),this.definitions_[n]=s}return this.functionNames_[n]},t.module$exports$Blockly$Generator.Generator.prototype.init=function(n){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},t.module$exports$Blockly$Generator.Generator.prototype.scrub_=function(n,s,u){return s},t.module$exports$Blockly$Generator.Generator.prototype.finish=function(n){return delete this.definitions_,delete this.functionNames_,n},t.module$exports$Blockly$Generator.Generator.prototype.scrubNakedValue=function(n){return n},t.module$exports$Blockly$FieldDropdown={FieldDropdown:function(n,s,u){typeof n!="function"&&wd(n),this.menuGenerator_=n,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.module$exports$Blockly$FieldDropdown.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],s,u),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null}},(0,t.module$exports$Blockly$utils$object.inherits)(t.module$exports$Blockly$FieldDropdown.FieldDropdown,Ze.Field),t.module$exports$Blockly$FieldDropdown.FieldDropdown.fromJson=function(n){return new this(n.options,void 0,n)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.fromXml=function(n){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n.textContent)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.loadState=function(n){this.loadLegacyState(t.module$exports$Blockly$FieldDropdown.FieldDropdown,n)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n))},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.SERIALIZABLE=!0,t.module$exports$Blockly$FieldDropdown.FieldDropdown.CHECKMARK_OVERHANG=25,t.module$exports$Blockly$FieldDropdown.FieldDropdown.MAX_MENU_HEIGHT_VH=.45;var lC=5,Ad=2*lC;t.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR=b.ANDROID?"\u25BC":"\u25BE",t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.CURSOR="default",t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=(0,S.createSvgElement)(ce.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&(0,S.addClass)(this.borderRect_,"blocklyDropdownRect")},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=(0,S.createSvgElement)(ce.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR+" ":" "+t.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=(0,S.createSvgElement)(ce.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(S.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.showEditor_=function(n){if(this.dropdownCreate_(),this.menu_.openingCoords=n&&typeof n.clientX=="number"?new W.Coordinate(n.clientX,n.clientY):null,Ie.DropDownDiv.clearContent(),this.menu_.render(Ie.DropDownDiv.getContentDiv()),n=this.menu_.getElement(),(0,S.addClass)(n,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var s=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;Ie.DropDownDiv.setColour(n,s)}Ie.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.dropdownCreate_=function(){var n=new Vt.Menu;n.setRole(Te.Role.LISTBOX),this.menu_=n;var s=this.getOptions(!1);this.selectedMenuItem_=null;for(var u=0;u<s.length;u++){var d=s[u][0],T=s[u][1];if(typeof d=="object"){var w=new Image(d.width,d.height);w.src=d.src,w.alt=d.alt||"",d=w}d=new Xo.MenuItem(d,T),d.setRole(Te.Role.OPTION),d.setRightToLeft(this.sourceBlock_.RTL),d.setCheckable(!0),n.addChild(d),d.setChecked(T===this.value_),T===this.value_&&(this.selectedMenuItem_=d),d.onAction(this.handleMenuActionEvent_,this)}},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.handleMenuActionEvent_=function(n){Ie.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,n)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.onItemSelected_=function(n,s){this.setValue(s.getValue())},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.trimOptions_=function(){var n=this.menuGenerator_;if(Array.isArray(n)){for(var s=!1,u=0;u<n.length;u++){var d=n[u][0];typeof d=="string"?n[u][0]=(0,qt.replaceMessageReferences)(d):(d.alt!==null&&(n[u][0].alt=(0,qt.replaceMessageReferences)(d.alt)),s=!0)}if(!(s||2>n.length)){for(s=[],u=0;u<n.length;u++)s.push(n[u][0]);u=(0,t.module$exports$Blockly$utils$string.shortestStringLength)(s),d=(0,t.module$exports$Blockly$utils$string.commonWordPrefix)(s,u);var T=(0,t.module$exports$Blockly$utils$string.commonWordSuffix)(s,u);!d&&!T||u<=d+T||(d&&(this.prefixField=s[0].substring(0,d-1)),T&&(this.suffixField=s[0].substr(1-T)),this.menuGenerator_=t.module$exports$Blockly$FieldDropdown.FieldDropdown.applyTrim_(n,d,T))}}},t.module$exports$Blockly$FieldDropdown.FieldDropdown.applyTrim_=function(n,s,u){for(var d=[],T=0;T<n.length;T++){var w=n[T][0],N=n[T][1];w=w.substring(s,w.length-u),d[T]=[w,N]}return d},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.isOptionListDynamic=function(){return typeof this.menuGenerator_=="function"},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.getOptions=function(n){return this.isOptionListDynamic()?(this.generatedOptions_&&n||(this.generatedOptions_=this.menuGenerator_.call(this),wd(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doClassValidation_=function(n){for(var s=!1,u=this.getOptions(!0),d=0,T;T=u[d];d++)if(T[1]===n){s=!0;break}return s?n:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+n),null)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doValueUpdate_=function(n){t.module$exports$Blockly$FieldDropdown.FieldDropdown.superClass_.doValueUpdate_.call(this,n),n=this.getOptions(!0);for(var s=0,u;u=n[s];s++)u[1]===this.value_&&(this.selectedOption_=u)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var n=this.selectedOption_&&this.selectedOption_[0];n&&typeof n=="object"?this.renderSelectedImage_(n):this.renderSelectedText_(),this.positionBorderRect_()},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.renderSelectedImage_=function(n){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(S.XLINK_NS,"xlink:href",n.src),this.imageElement_.setAttribute("height",n.height),this.imageElement_.setAttribute("width",n.width);var s=Number(n.height);n=Number(n.width);var u=!!this.borderRect_,d=Math.max(u?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,s+Ad);u=u?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var T=this.svgArrow_?this.positionSVGArrow_(n+u,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):(0,S.getFastTextWidth)(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=n+T+2*u,this.size_.height=d;var w=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",u+T):(w=n+T,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",u)),this.imageElement_.setAttribute("y",d/2-s/2),this.positionTextElement_(w+u,n+T)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),(0,S.addClass)(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var n=!!this.borderRect_,s=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),u=(0,S.getFastTextWidth)(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var d=0;this.svgArrow_&&(d=this.positionSVGArrow_(u+n,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=u+d+2*n,this.size_.height=s,this.positionTextElement_(n,u)},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.positionSVGArrow_=function(n,s){if(!this.svgArrow_)return 0;var u=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,T=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?u:n+d)+","+s+")"),T+d},t.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var n=this.selectedOption_[0];return typeof n=="object"?n.alt:n};var wd=function(n){if(!Array.isArray(n))throw TypeError("FieldDropdown options must be an array.");if(!n.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var s=!1,u=0;u<n.length;u++){var d=n[u];Array.isArray(d)?typeof d[1]!="string"?(s=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&typeof d[0]!="string"&&typeof d[0].src!="string"&&(s=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must have a string label or image description. Found"+d[0]+" in: ",d)):(s=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must be an array. Found: ",d))}if(s)throw TypeError("Found invalid FieldDropdown options.")};(0,ei.register)("field_dropdown",t.module$exports$Blockly$FieldDropdown.FieldDropdown);var Cn={FieldVariable:function(n,s,u,d,T){this.menuGenerator_=Cn.FieldVariable.dropdownCreate,this.defaultVariableName=typeof n=="string"?n:"",this.size_=new Me.Size(0,0),T&&this.configure_(T),s&&this.setValidator(s),T||this.setTypes_(u,d)}};(0,t.module$exports$Blockly$utils$object.inherits)(Cn.FieldVariable,t.module$exports$Blockly$FieldDropdown.FieldDropdown),Cn.FieldVariable.fromJson=function(n){return new this((0,qt.replaceMessageReferences)(n.variable),void 0,void 0,void 0,n)},Cn.FieldVariable.prototype.SERIALIZABLE=!0,Cn.FieldVariable.prototype.configure_=function(n){Cn.FieldVariable.superClass_.configure_.call(this,n),this.setTypes_(n.variableTypes,n.defaultType)},Cn.FieldVariable.prototype.initModel=function(){if(!this.variable_){var n=(0,t.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(n.getId())}},Cn.FieldVariable.prototype.shouldAddBorderRect_=function(){return Cn.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.sourceBlock_.type!=="variables_get")},Cn.FieldVariable.prototype.fromXml=function(n){var s=n.getAttribute("id"),u=n.textContent,d=n.getAttribute("variabletype")||n.getAttribute("variableType")||"";if(s=(0,t.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,s,u,d),d!==null&&d!==s.type)throw Error("Serialized variable type with id '"+s.getId()+"' had type "+s.type+", and does not match variable field that references it: "+(0,t.module$exports$Blockly$Xml.domToText)(n)+".");this.setValue(s.getId())},Cn.FieldVariable.prototype.toXml=function(n){return this.initModel(),n.id=this.variable_.getId(),n.textContent=this.variable_.name,this.variable_.type&&n.setAttribute("variabletype",this.variable_.type),n},Cn.FieldVariable.prototype.saveState=function(n){var s=this.saveLegacyState(Cn.FieldVariable);return s!==null||(this.initModel(),s={id:this.variable_.getId()},n&&(s.name=this.variable_.name,s.type=this.variable_.type)),s},Cn.FieldVariable.prototype.loadState=function(n){this.loadLegacyState(Cn.FieldVariable,n)||(n=(0,t.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,n.id||null,n.name,n.type||""),this.setValue(n.getId()))},Cn.FieldVariable.prototype.setSourceBlock=function(n){if(n.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");Cn.FieldVariable.superClass_.setSourceBlock.call(this,n)},Cn.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Cn.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},Cn.FieldVariable.prototype.getVariable=function(){return this.variable_},Cn.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},Cn.FieldVariable.prototype.doClassValidation_=function(n){if(n===null)return null;var s=(0,t.module$exports$Blockly$Variables.getVariable)(this.sourceBlock_.workspace,n);return s?(s=s.type,this.typeIsAllowed_(s)?n:(console.warn("Variable type doesn't match this field!  Type was "+s),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+n),null)},Cn.FieldVariable.prototype.doValueUpdate_=function(n){this.variable_=(0,t.module$exports$Blockly$Variables.getVariable)(this.sourceBlock_.workspace,n),Cn.FieldVariable.superClass_.doValueUpdate_.call(this,n)},Cn.FieldVariable.prototype.typeIsAllowed_=function(n){var s=this.getVariableTypes_();if(!s)return!0;for(var u=0;u<s.length;u++)if(n===s[u])return!0;return!1},Cn.FieldVariable.prototype.getVariableTypes_=function(){var n=this.variableTypes;if(n===null&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(n=n||[""],n.length===0)throw n=this.getText(),Error("'variableTypes' of field variable "+n+" was an empty list");return n},Cn.FieldVariable.prototype.setTypes_=function(n,s){if(s=s||"",n==null)n=null;else if(Array.isArray(n)){for(var u=!1,d=0;d<n.length;d++)n[d]===s&&(u=!0);if(!u)throw Error("Invalid default type '"+s+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=s,this.variableTypes=n},Cn.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},Cn.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var n=this.getText(),s=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var u=this.getVariableTypes_(),d=0;d<u.length;d++){var T=this.sourceBlock_.workspace.getVariablesOfType(u[d]);s=s.concat(T)}for(s.sort(ya.VariableModel.compareByName),u=[],d=0;d<s.length;d++)u[d]=[s[d].name,s[d].getId()];return u.push([t.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,t.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID]),t.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE&&u.push([t.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",n),t.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID]),u},Cn.FieldVariable.prototype.onItemSelected_=function(n,s){if(n=s.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(n===t.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID){(0,t.module$exports$Blockly$Variables.renameVariable)(this.sourceBlock_.workspace,this.variable_);return}if(n===t.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(n)},Cn.FieldVariable.prototype.referencesVariables=function(){return!0},(0,ei.register)("field_variable",Cn.FieldVariable),t.module$exports$Blockly$FieldTextInput={FieldTextInput:function(n,s,u){this.spellcheck_=!0,t.module$exports$Blockly$FieldTextInput.FieldTextInput.superClass_.constructor.call(this,n,s,u),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null}},(0,t.module$exports$Blockly$utils$object.inherits)(t.module$exports$Blockly$FieldTextInput.FieldTextInput,Ze.Field),t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.DEFAULT_VALUE="",t.module$exports$Blockly$FieldTextInput.FieldTextInput.fromJson=function(n){return new this((0,qt.replaceMessageReferences)(n.text),void 0,n)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.SERIALIZABLE=!0,t.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS=4,t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.CURSOR="text",t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.configure_=function(n){t.module$exports$Blockly$FieldTextInput.FieldTextInput.superClass_.configure_.call(this,n),typeof n.spellcheck=="boolean"&&(this.spellcheck_=n.spellcheck)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var n=0,s=0,u=0,d;d=this.sourceBlock_.inputList[u];u++){for(var T=0;d.fieldRow[T];T++)n++;d.connection&&s++}this.fullBlockClickTarget_=1>=n&&this.sourceBlock_.outputConnection&&!s}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doClassValidation_=function(n){return n==null?null:String(n)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueInvalid_=function(n){this.isBeingEdited_&&(this.isTextValid_=!1,n=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&(0,B.isEnabled)()&&(0,B.fire)(new((0,B.get)(B.CHANGE))(this.sourceBlock_,"field",this.name||null,n,this.value_)))},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueUpdate_=function(n){this.isTextValid_=!0,this.value_=n,this.isBeingEdited_||(this.isDirty_=!0)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.render_=function(){if(t.module$exports$Blockly$FieldTextInput.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var n=this.htmlInput_;this.isTextValid_?((0,S.removeClass)(n,"blocklyInvalidInput"),(0,Te.setState)(n,Te.State.INVALID,!1)):((0,S.addClass)(n,"blocklyInvalidInput"),(0,Te.setState)(n,Te.State.INVALID,!0))}},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.setSpellcheck=function(n){n!==this.spellcheck_&&(this.spellcheck_=n,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showEditor_=function(n,s){this.workspace_=this.sourceBlock_.workspace,n=s||!1,!n&&(b.MOBILE||b.ANDROID||b.IPAD)?this.showPromptEditor_():this.showInlineEditor_(n)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showPromptEditor_=function(){(0,Ao.prompt)(t.module$exports$Blockly$Msg.Msg.CHANGE_VALUE_TITLE,this.getText(),function(n){n!==null&&this.setValue(this.getValueFromEditorText_(n))}.bind(this))},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showInlineEditor_=function(n){(0,Q.show)(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,n||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetCreate_=function(){(0,B.setGroup)(!0);var n=(0,Q.getDiv)();(0,S.addClass)(this.getClickTarget_(),"editing");var s=document.createElement("input");s.className="blocklyHtmlInput",s.setAttribute("spellcheck",this.spellcheck_);var u=this.workspace_.getScale(),d=this.getConstants().FIELD_TEXT_FONTSIZE*u+"pt";if(n.style.fontSize=d,s.style.fontSize=d,d=t.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS*u+"px",this.fullBlockClickTarget_){d=this.getScaledBBox(),d=(d.bottom-d.top)/2+"px";var T=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;s.style.border=1*u+"px solid "+T,n.style.borderRadius=d,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*u+"px")}return s.style.borderRadius=d,n.appendChild(s),s.value=s.defaultValue=this.getEditorText_(this.value_),s.untypedDefaultValue_=this.value_,s.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(s),s},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),(0,B.setGroup)(!1),this.unbindInputEvents_();var n=(0,Q.getDiv)().style;n.width="auto",n.height="auto",n.fontSize="",n.transition="",n.boxShadow="",this.htmlInput_=null,(0,S.removeClass)(this.getClickTarget_(),"editing")},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.bindInputEvents_=function(n){this.onKeyDownWrapper_=(0,A.conditionalBind)(n,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=(0,A.conditionalBind)(n,"input",this,this.onHtmlInputChange_)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&((0,A.unbind)(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&((0,A.unbind)(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode===dt.KeyCodes.ENTER?((0,Q.hide)(),Ie.DropDownDiv.hideWithoutAnimation()):n.keyCode===dt.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),(0,Q.hide)(),Ie.DropDownDiv.hideWithoutAnimation()):n.keyCode===dt.KeyCodes.TAB&&((0,Q.hide)(),Ie.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!n.shiftKey),n.preventDefault())},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputChange_=function(n){n=this.htmlInput_.value,n!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=n,n=this.getValueFromEditorText_(n),this.setValue(n),this.forceRerender(),this.resizeEditor_())},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.setEditorValue_=function(n){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(n)),this.setValue(n)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.resizeEditor_=function(){var n=(0,Q.getDiv)(),s=this.getScaledBBox();n.style.width=s.right-s.left+"px",n.style.height=s.bottom-s.top+"px",s=new W.Coordinate(this.sourceBlock_.RTL?s.right-n.offsetWidth:s.left,s.top),n.style.left=s.x+"px",n.style.top=s.y+"px"},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getEditorText_=function(n){return String(n)},t.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getValueFromEditorText_=function(n){return n},(0,ei.register)("field_input",t.module$exports$Blockly$FieldTextInput.FieldTextInput);var mt={FieldNumber:function(n,s,u,d,T,w){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,mt.FieldNumber.superClass_.constructor.call(this,n,T,w),w||this.setConstraints(s,u,d)}};(0,t.module$exports$Blockly$utils$object.inherits)(mt.FieldNumber,t.module$exports$Blockly$FieldTextInput.FieldTextInput),mt.FieldNumber.prototype.DEFAULT_VALUE=0,mt.FieldNumber.fromJson=function(n){return new this(n.value,void 0,void 0,void 0,void 0,n)},mt.FieldNumber.prototype.SERIALIZABLE=!0,mt.FieldNumber.prototype.configure_=function(n){mt.FieldNumber.superClass_.configure_.call(this,n),this.setMinInternal_(n.min),this.setMaxInternal_(n.max),this.setPrecisionInternal_(n.precision)},mt.FieldNumber.prototype.setConstraints=function(n,s,u){this.setMinInternal_(n),this.setMaxInternal_(s),this.setPrecisionInternal_(u),this.setValue(this.getValue())},mt.FieldNumber.prototype.setMin=function(n){this.setMinInternal_(n),this.setValue(this.getValue())},mt.FieldNumber.prototype.setMinInternal_=function(n){n==null?this.min_=-1/0:(n=Number(n),isNaN(n)||(this.min_=n))},mt.FieldNumber.prototype.getMin=function(){return this.min_},mt.FieldNumber.prototype.setMax=function(n){this.setMaxInternal_(n),this.setValue(this.getValue())},mt.FieldNumber.prototype.setMaxInternal_=function(n){n==null?this.max_=1/0:(n=Number(n),isNaN(n)||(this.max_=n))},mt.FieldNumber.prototype.getMax=function(){return this.max_},mt.FieldNumber.prototype.setPrecision=function(n){this.setPrecisionInternal_(n),this.setValue(this.getValue())},mt.FieldNumber.prototype.setPrecisionInternal_=function(n){this.precision_=Number(n)||0;var s=String(this.precision_);s.indexOf("e")!==-1&&(s=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var u=s.indexOf(".");this.decimalPlaces_=u===-1?n?0:null:s.length-u-1},mt.FieldNumber.prototype.getPrecision=function(){return this.precision_},mt.FieldNumber.prototype.doClassValidation_=function(n){return n===null||(n=String(n),n=n.replace(/O/ig,"0"),n=n.replace(/,/g,""),n=n.replace(/infinity/i,"Infinity"),n=Number(n||0),isNaN(n))?null:(n=Math.min(Math.max(n,this.min_),this.max_),this.precision_&&isFinite(n)&&(n=Math.round(n/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(n=Number(n.toFixed(this.decimalPlaces_))),n)},mt.FieldNumber.prototype.widgetCreate_=function(){var n=mt.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&(0,Te.setState)(n,Te.State.VALUEMIN,this.min_),1/0>this.max_&&(0,Te.setState)(n,Te.State.VALUEMAX,this.max_),n},(0,ei.register)("field_number",mt.FieldNumber);var sn={FieldMultilineInput:function(n,s,u){sn.FieldMultilineInput.superClass_.constructor.call(this,n,s,u),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1}};(0,t.module$exports$Blockly$utils$object.inherits)(sn.FieldMultilineInput,t.module$exports$Blockly$FieldTextInput.FieldTextInput),sn.FieldMultilineInput.prototype.configure_=function(n){sn.FieldMultilineInput.superClass_.configure_.call(this,n),n.maxLines&&this.setMaxLines(n.maxLines)},sn.FieldMultilineInput.fromJson=function(n){return new this((0,qt.replaceMessageReferences)(n.text),void 0,n)},sn.FieldMultilineInput.prototype.toXml=function(n){return n.textContent=this.getValue().replace(/\n/g,"&#10;"),n},sn.FieldMultilineInput.prototype.fromXml=function(n){this.setValue(n.textContent.replace(/&#10;/g,`
`))},sn.FieldMultilineInput.prototype.saveState=function(){var n=this.saveLegacyState(sn.FieldMultilineInput);return n!==null?n:this.getValue()},sn.FieldMultilineInput.prototype.loadState=function(n){this.loadLegacyState(Ze.Field,n)||this.setValue(n)},sn.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},sn.FieldMultilineInput.prototype.getDisplayText_=function(){var n=this.getText();if(!n)return Ze.Field.NBSP;var s=n.split(`
`);n="";for(var u=this.isOverflowedY_?this.maxLines_:s.length,d=0;d<u;d++){var T=s[d];T.length>this.maxDisplayLength?T=T.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&d===u-1&&(T=T.substring(0,T.length-3)+"..."),T=T.replace(/\s/g,Ze.Field.NBSP),n+=T,d!==u-1&&(n+=`
`)}return this.sourceBlock_.RTL&&(n+="\u200F"),n},sn.FieldMultilineInput.prototype.doValueUpdate_=function(n){sn.FieldMultilineInput.superClass_.doValueUpdate_.call(this,n),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_},sn.FieldMultilineInput.prototype.render_=function(){for(var n;n=this.textGroup_.firstChild;)this.textGroup_.removeChild(n);n=this.getDisplayText_().split(`
`);for(var s=0,u=0;u<n.length;u++){var d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;(0,S.createSvgElement)(ce.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:s+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(n[u])),s+=d}this.isBeingEdited_&&(n=this.htmlInput_,this.isOverflowedY_?(0,S.addClass)(n,"blocklyHtmlTextAreaInputOverflowedY"):(0,S.removeClass)(n,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),n=this.htmlInput_,this.isTextValid_?((0,S.removeClass)(n,"blocklyInvalidInput"),(0,Te.setState)(n,Te.State.INVALID,!1)):((0,S.addClass)(n,"blocklyInvalidInput"),(0,Te.setState)(n,Te.State.INVALID,!0)))},sn.FieldMultilineInput.prototype.updateSize_=function(){for(var n=this.textGroup_.childNodes,s=0,u=0,d=0;d<n.length;d++){var T=(0,S.getTextWidth)(n[d]);T>s&&(s=T),u+=this.getConstants().FIELD_TEXT_HEIGHT+(0<d?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){n=this.value_.split(`
`),d=(0,S.createSvgElement)(ce.Svg.TEXT,{class:"blocklyText blocklyMultilineText"}),T=this.getConstants().FIELD_TEXT_FONTSIZE;for(var w=this.getConstants().FIELD_TEXT_FONTWEIGHT,N=this.getConstants().FIELD_TEXT_FONTFAMILY,J=0;J<n.length;J++){n[J].length>this.maxDisplayLength&&(n[J]=n[J].substring(0,this.maxDisplayLength)),d.textContent=n[J];var ve=(0,S.getFastTextWidth)(d,T,w,N);ve>s&&(s=ve)}s+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(u+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,s+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",s),this.borderRect_.setAttribute("height",u)),this.size_.width=s,this.size_.height=u,this.positionBorderRect_()},sn.FieldMultilineInput.prototype.showEditor_=function(n,s){sn.FieldMultilineInput.superClass_.showEditor_.call(this,n,s),this.forceRerender()},sn.FieldMultilineInput.prototype.widgetCreate_=function(){var n=(0,Q.getDiv)(),s=this.workspace_.getScale(),u=document.createElement("textarea");u.className="blocklyHtmlInput blocklyHtmlTextAreaInput",u.setAttribute("spellcheck",this.spellcheck_);var d=this.getConstants().FIELD_TEXT_FONTSIZE*s+"pt";n.style.fontSize=d,u.style.fontSize=d,u.style.borderRadius=t.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS*s+"px",d=this.getConstants().FIELD_BORDER_RECT_X_PADDING*s;var T=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*s/2;return u.style.padding=T+"px "+d+"px "+T+"px "+d+"px",d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,u.style.lineHeight=d*s+"px",n.appendChild(u),u.value=u.defaultValue=this.getEditorText_(this.value_),u.untypedDefaultValue_=this.value_,u.oldValue_=null,b.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(u),u},sn.FieldMultilineInput.prototype.setMaxLines=function(n){typeof n=="number"&&0<n&&n!==this.maxLines_&&(this.maxLines_=n,this.forceRerender())},sn.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},sn.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode!==dt.KeyCodes.ENTER&&sn.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,n)},(0,a.register)(`
  .blocklyHtmlTextAreaInput {
    font-family: monospace;
    resize: none;
    overflow: hidden;
    height: 100%;
    text-align: left;
  }

  .blocklyHtmlTextAreaInputOverflowedY {
    overflow-y: scroll;
  }
`),(0,ei.register)("field_multilinetext",sn.FieldMultilineInput);var co={FieldLabelSerializable:function(n,s,u){co.FieldLabelSerializable.superClass_.constructor.call(this,n,s,u)}};(0,t.module$exports$Blockly$utils$object.inherits)(co.FieldLabelSerializable,t.module$exports$Blockly$FieldLabel.FieldLabel),co.FieldLabelSerializable.fromJson=function(n){return new this((0,qt.replaceMessageReferences)(n.text),void 0,n)},co.FieldLabelSerializable.prototype.EDITABLE=!1,co.FieldLabelSerializable.prototype.SERIALIZABLE=!0,(0,ei.register)("field_label_serializable",co.FieldLabelSerializable);var Ot={FieldColour:function(n,s,u){Ot.FieldColour.superClass_.constructor.call(this,n,s,u),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null}};(0,t.module$exports$Blockly$utils$object.inherits)(Ot.FieldColour,Ze.Field),Ot.FieldColour.fromJson=function(n){return new this(n.colour,void 0,n)},Ot.FieldColour.prototype.SERIALIZABLE=!0,Ot.FieldColour.prototype.CURSOR="default",Ot.FieldColour.prototype.isDirty_=!1,Ot.FieldColour.prototype.colours_=null,Ot.FieldColour.prototype.titles_=null,Ot.FieldColour.prototype.columns_=0,Ot.FieldColour.prototype.configure_=function(n){Ot.FieldColour.superClass_.configure_.call(this,n),n.colourOptions&&(this.colours_=n.colourOptions,this.titles_=n.colourTitles),n.columns&&(this.columns_=n.columns)},Ot.FieldColour.prototype.initView=function(){this.size_=new Me.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},Ot.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},Ot.FieldColour.prototype.doClassValidation_=function(n){return typeof n!="string"?null:(0,Sn.parse)(n)},Ot.FieldColour.prototype.doValueUpdate_=function(n){this.value_=n,this.borderRect_?this.borderRect_.style.fill=n:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",n),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},Ot.FieldColour.prototype.getText=function(){var n=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(n)&&(n="#"+n[1]+n[3]+n[5]),n},Ot.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Ot.FieldColour.prototype.DEFAULT_VALUE=Ot.FieldColour.COLOURS[0],Ot.FieldColour.TITLES=[],Ot.FieldColour.COLUMNS=7,Ot.FieldColour.prototype.setColours=function(n,s){return this.colours_=n,s&&(this.titles_=s),this},Ot.FieldColour.prototype.setColumns=function(n){return this.columns_=n,this},Ot.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),Ie.DropDownDiv.getContentDiv().appendChild(this.picker_),Ie.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},Ot.FieldColour.prototype.onClick_=function(n){n=(n=n.target)&&n.label,n!==null&&(this.setValue(n),Ie.DropDownDiv.hideIfOwner(this))},Ot.FieldColour.prototype.onKeyDown_=function(n){var s=!1;n.keyCode===dt.KeyCodes.UP?(this.moveHighlightBy_(0,-1),s=!0):n.keyCode===dt.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),s=!0):n.keyCode===dt.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),s=!0):n.keyCode===dt.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),s=!0):n.keyCode===dt.KeyCodes.ENTER&&((s=this.getHighlighted_())&&(s=s&&s.label,s!==null&&this.setValue(s)),Ie.DropDownDiv.hideWithoutAnimation(),s=!0),s&&n.stopPropagation()},Ot.FieldColour.prototype.moveHighlightBy_=function(n,s){var u=this.colours_||Ot.FieldColour.COLOURS,d=this.columns_||Ot.FieldColour.COLUMNS,T=this.highlightedIndex_%d,w=Math.floor(this.highlightedIndex_/d);T+=n,w+=s,0>n?0>T&&0<w?(T=d-1,w--):0>T&&(T=0):0<n?T>d-1&&w<Math.floor(u.length/d)-1?(T=0,w++):T>d-1&&T--:0>s?0>w&&(w=0):0<s&&w>Math.floor(u.length/d)-1&&(w=Math.floor(u.length/d)-1),this.setHighlightedCell_(this.picker_.childNodes[w].childNodes[T],w*d+T)},Ot.FieldColour.prototype.onMouseMove_=function(n){var s=(n=n.target)&&Number(n.getAttribute("data-index"));s!==null&&s!==this.highlightedIndex_&&this.setHighlightedCell_(n,s)},Ot.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},Ot.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var n=this.getHighlighted_();n&&(0,S.removeClass)(n,"blocklyColourHighlighted")},Ot.FieldColour.prototype.getHighlighted_=function(){var n=this.columns_||Ot.FieldColour.COLUMNS,s=this.picker_.childNodes[Math.floor(this.highlightedIndex_/n)];return s?s.childNodes[this.highlightedIndex_%n]:null},Ot.FieldColour.prototype.setHighlightedCell_=function(n,s){var u=this.getHighlighted_();u&&(0,S.removeClass)(u,"blocklyColourHighlighted"),(0,S.addClass)(n,"blocklyColourHighlighted"),this.highlightedIndex_=s,(0,Te.setState)(this.picker_,Te.State.ACTIVEDESCENDANT,n.getAttribute("id"))},Ot.FieldColour.prototype.dropdownCreate_=function(){var n=this.columns_||Ot.FieldColour.COLUMNS,s=this.colours_||Ot.FieldColour.COLOURS,u=this.titles_||Ot.FieldColour.TITLES,d=this.getValue(),T=document.createElement("table");T.className="blocklyColourTable",T.tabIndex=0,T.dir="ltr",(0,Te.setRole)(T,Te.Role.GRID),(0,Te.setState)(T,Te.State.EXPANDED,!0),(0,Te.setState)(T,Te.State.ROWCOUNT,Math.floor(s.length/n)),(0,Te.setState)(T,Te.State.COLCOUNT,n);for(var w,N=0;N<s.length;N++){N%n===0&&(w=document.createElement("tr"),(0,Te.setRole)(w,Te.Role.ROW),T.appendChild(w));var J=document.createElement("td");w.appendChild(J),J.label=s[N],J.title=u[N]||s[N],J.id=(0,Ne.getNextUniqueId)(),J.setAttribute("data-index",N),(0,Te.setRole)(J,Te.Role.GRIDCELL),(0,Te.setState)(J,Te.State.LABEL,s[N]),(0,Te.setState)(J,Te.State.SELECTED,s[N]===d),J.style.backgroundColor=s[N],s[N]===d&&(J.className="blocklyColourSelected",this.highlightedIndex_=N)}this.onClickWrapper_=(0,A.conditionalBind)(T,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=(0,A.conditionalBind)(T,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=(0,A.conditionalBind)(T,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=(0,A.conditionalBind)(T,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=(0,A.conditionalBind)(T,"keydown",this,this.onKeyDown_),this.picker_=T},Ot.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&((0,A.unbind)(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&((0,A.unbind)(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&((0,A.unbind)(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&((0,A.unbind)(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&((0,A.unbind)(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},(0,a.register)(`
  .blocklyColourTable {
    border-collapse: collapse;
    display: block;
    outline: none;
    padding: 1px;
  }

  .blocklyColourTable>tr>td {
    border: .5px solid #888;
    box-sizing: border-box;
    cursor: pointer;
    display: inline-block;
    height: 20px;
    padding: 0;
    width: 20px;
  }

  .blocklyColourTable>tr>td.blocklyColourHighlighted {
    border-color: #eee;
    box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
    position: relative;
  }

  .blocklyColourSelected, .blocklyColourSelected:hover {
    border-color: #eee !important;
    outline: 1px solid #333;
    position: relative;
  }
`),(0,ei.register)("field_colour",Ot.FieldColour),t.module$exports$Blockly$FieldCheckbox={FieldCheckbox:function(n,s,u){this.checkChar_=null,t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.superClass_.constructor.call(this,n,s,u)}},(0,t.module$exports$Blockly$utils$object.inherits)(t.module$exports$Blockly$FieldCheckbox.FieldCheckbox,Ze.Field),t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.fromJson=function(n){return new this(n.checked,void 0,n)},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR="\u2713",t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.SERIALIZABLE=!0,t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.CURSOR="default",t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.configure_=function(n){t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.superClass_.configure_.call(this,n),n.checkCharacter&&(this.checkChar_=n.checkCharacter)},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.saveState=function(){var n=this.saveLegacyState(t.module$exports$Blockly$FieldCheckbox.FieldCheckbox);return n!==null?n:this.getValueBoolean()},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.initView=function(){t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.superClass_.initView.call(this),(0,S.addClass)(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.setCheckCharacter=function(n){this.checkChar_=n,this.forceRerender()},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.doClassValidation_=function(n){return n===!0||n==="TRUE"?"TRUE":n===!1||n==="FALSE"?"FALSE":null},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.doValueUpdate_=function(n){this.value_=this.convertValueToBool_(n),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.convertValueToBool_=function(n){return typeof n=="string"?n==="TRUE":!!n},(0,ei.register)("field_checkbox",t.module$exports$Blockly$FieldCheckbox.FieldCheckbox);var Et={FieldAngle:function(n,s,u){this.clockwise_=Et.FieldAngle.CLOCKWISE,this.offset_=Et.FieldAngle.OFFSET,this.wrap_=Et.FieldAngle.WRAP,this.round_=Et.FieldAngle.ROUND,Et.FieldAngle.superClass_.constructor.call(this,n,s,u),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null}};(0,t.module$exports$Blockly$utils$object.inherits)(Et.FieldAngle,t.module$exports$Blockly$FieldTextInput.FieldTextInput),Et.FieldAngle.prototype.DEFAULT_VALUE=0,Et.FieldAngle.fromJson=function(n){return new this(n.angle,void 0,n)},Et.FieldAngle.prototype.SERIALIZABLE=!0,Et.FieldAngle.ROUND=15,Et.FieldAngle.HALF=50,Et.FieldAngle.CLOCKWISE=!1,Et.FieldAngle.OFFSET=0,Et.FieldAngle.WRAP=360,Et.FieldAngle.RADIUS=Et.FieldAngle.HALF-1,Et.FieldAngle.prototype.configure_=function(n){switch(Et.FieldAngle.superClass_.configure_.call(this,n),n.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var s=n.clockwise;typeof s=="boolean"&&(this.clockwise_=s),s=n.offset,s!==null&&(s=Number(s),isNaN(s)||(this.offset_=s)),s=n.wrap,s!==null&&(s=Number(s),isNaN(s)||(this.wrap_=s)),n=n.round,n!==null&&(n=Number(n),isNaN(n)||(this.round_=n))},Et.FieldAngle.prototype.initView=function(){Et.FieldAngle.superClass_.initView.call(this),this.symbol_=(0,S.createSvgElement)(ce.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xB0")),this.textElement_.appendChild(this.symbol_)},Et.FieldAngle.prototype.render_=function(){Et.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},Et.FieldAngle.prototype.showEditor_=function(n){Et.FieldAngle.superClass_.showEditor_.call(this,n,b.MOBILE||b.ANDROID||b.IPAD),this.dropdownCreate_(),Ie.DropDownDiv.getContentDiv().appendChild(this.editor_),Ie.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Ie.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},Et.FieldAngle.prototype.dropdownCreate_=function(){var n=(0,S.createSvgElement)(ce.Svg.SVG,{xmlns:S.SVG_NS,"xmlns:html":S.HTML_NS,"xmlns:xlink":S.XLINK_NS,version:"1.1",height:2*Et.FieldAngle.HALF+"px",width:2*Et.FieldAngle.HALF+"px",style:"touch-action: none"},null),s=(0,S.createSvgElement)(ce.Svg.CIRCLE,{cx:Et.FieldAngle.HALF,cy:Et.FieldAngle.HALF,r:Et.FieldAngle.RADIUS,class:"blocklyAngleCircle"},n);this.gauge_=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyAngleGauge"},n),this.line_=(0,S.createSvgElement)(ce.Svg.LINE,{x1:Et.FieldAngle.HALF,y1:Et.FieldAngle.HALF,class:"blocklyAngleLine"},n);for(var u=0;360>u;u+=15)(0,S.createSvgElement)(ce.Svg.LINE,{x1:Et.FieldAngle.HALF+Et.FieldAngle.RADIUS,y1:Et.FieldAngle.HALF,x2:Et.FieldAngle.HALF+Et.FieldAngle.RADIUS-(u%45===0?10:5),y2:Et.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+u+","+Et.FieldAngle.HALF+","+Et.FieldAngle.HALF+")"},n);this.clickWrapper_=(0,A.conditionalBind)(n,"click",this,this.hide_),this.clickSurfaceWrapper_=(0,A.conditionalBind)(s,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=(0,A.conditionalBind)(s,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=n},Et.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&((0,A.unbind)(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&((0,A.unbind)(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&((0,A.unbind)(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},Et.FieldAngle.prototype.hide_=function(){Ie.DropDownDiv.hideIfOwner(this),(0,Q.hide)()},Et.FieldAngle.prototype.onMouseMove_=function(n){var s=this.gauge_.ownerSVGElement.getBoundingClientRect(),u=n.clientX-s.left-Et.FieldAngle.HALF;n=n.clientY-s.top-Et.FieldAngle.HALF,s=Math.atan(-n/u),isNaN(s)||(s=(0,me.toDegrees)(s),0>u?s+=180:0<n&&(s+=360),s=this.clockwise_?this.offset_+360-s:360-(this.offset_-s),this.displayMouseOrKeyboardValue_(s))},Et.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(n){this.round_&&(n=Math.round(n/this.round_)*this.round_),n=this.wrapValue_(n),n!==this.value_&&this.setEditorValue_(n)},Et.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var n=Number(this.getText())+this.offset_,s=(0,me.toRadians)(n%360);n=["M ",Et.FieldAngle.HALF,",",Et.FieldAngle.HALF];var u=Et.FieldAngle.HALF,d=Et.FieldAngle.HALF;if(!isNaN(s)){var T=Number(this.clockwise_),w=(0,me.toRadians)(this.offset_),N=Math.cos(w)*Et.FieldAngle.RADIUS,J=Math.sin(w)*-Et.FieldAngle.RADIUS;T&&(s=2*w-s),u+=Math.cos(s)*Et.FieldAngle.RADIUS,d-=Math.sin(s)*Et.FieldAngle.RADIUS,s=Math.abs(Math.floor((s-w)/Math.PI)%2),T&&(s=1-s),n.push(" l ",N,",",J," A ",Et.FieldAngle.RADIUS,",",Et.FieldAngle.RADIUS," 0 ",s," ",T," ",u,",",d," z")}this.gauge_.setAttribute("d",n.join("")),this.line_.setAttribute("x2",u),this.line_.setAttribute("y2",d)}},Et.FieldAngle.prototype.onHtmlInputKeyDown_=function(n){Et.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,n);var s;if(n.keyCode===dt.KeyCodes.LEFT?s=this.sourceBlock_.RTL?1:-1:n.keyCode===dt.KeyCodes.RIGHT?s=this.sourceBlock_.RTL?-1:1:n.keyCode===dt.KeyCodes.DOWN?s=-1:n.keyCode===dt.KeyCodes.UP&&(s=1),s){var u=this.getValue();this.displayMouseOrKeyboardValue_(u+s*this.round_),n.preventDefault(),n.stopPropagation()}},Et.FieldAngle.prototype.doClassValidation_=function(n){return n=Number(n),isNaN(n)||!isFinite(n)?null:this.wrapValue_(n)},Et.FieldAngle.prototype.wrapValue_=function(n){return n%=360,0>n&&(n+=360),n>this.wrap_&&(n-=360),n},(0,a.register)(`
  .blocklyAngleCircle {
    stroke: #444;
    stroke-width: 1;
    fill: #ddd;
    fill-opacity: .8;
  }

  .blocklyAngleMarks {
    stroke: #444;
    stroke-width: 1;
  }

  .blocklyAngleGauge {
    fill: #f88;
    fill-opacity: .8;
    pointer-events: none;
  }

  .blocklyAngleLine {
    stroke: #f00;
    stroke-width: 2;
    stroke-linecap: round;
    pointer-events: none;
  }
`),(0,ei.register)("field_angle",Et.FieldAngle);var Xl={TopRow:function(n){Xl.TopRow.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(Xl.TopRow,ji.TopRow),Xl.TopRow.prototype.endsWithElemSpacer=function(){return!1},Xl.TopRow.prototype.hasLeftSquareCorner=function(n){var s=(n.hat?n.hat==="cap":this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection;return!!n.outputConnection||s},Xl.TopRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection};var Ko={StatementInput:function(n,s){if(Ko.StatementInput.superClass_.constructor.call(this,n,s),this.connectedBlock){for(n=this.connectedBlock;s=n.getNextBlock();)n=s;n.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}};(0,t.module$exports$Blockly$utils$object.inherits)(Ko.StatementInput,Ca.StatementInput);var vc={RightConnectionShape:function(n){vc.RightConnectionShape.superClass_.constructor.call(this,n),this.type|=ne.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0}};(0,t.module$exports$Blockly$utils$object.inherits)(vc.RightConnectionShape,cl.Measurable);var Yo={MarkerSvg:function(n,s,u){Yo.MarkerSvg.superClass_.constructor.call(this,n,s,u)}};(0,t.module$exports$Blockly$utils$object.inherits)(Yo.MarkerSvg,_n.MarkerSvg),Yo.MarkerSvg.prototype.showWithInputOutput_=function(n){var s=n.getSourceBlock();n=n.getLocation().getOffsetInBlock(),this.positionCircle_(n.x,n.y),this.setParent_(s),this.showCurrent_()},Yo.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithInputOutput_(n)},Yo.MarkerSvg.prototype.showWithInput_=function(n){this.showWithInputOutput_(n)},Yo.MarkerSvg.prototype.showWithBlock_=function(n){n=n.getLocation();var s=n.getHeightWidth();this.positionRect_(0,0,s.width,s.height),this.setParent_(n),this.showCurrent_()},Yo.MarkerSvg.prototype.positionCircle_=function(n,s){this.markerCircle_.setAttribute("cx",n),this.markerCircle_.setAttribute("cy",s),this.currentMarkerSvg=this.markerCircle_},Yo.MarkerSvg.prototype.hide=function(){Yo.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},Yo.MarkerSvg.prototype.createDomInternal_=function(){if(Yo.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=(0,S.createSvgElement)(ce.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();(0,S.createSvgElement)(ce.Svg.ANIMATE,n,this.markerCircle_)}return this.markerSvg_},Yo.MarkerSvg.prototype.applyColour_=function(n){Yo.MarkerSvg.superClass_.applyColour_.call(this,n),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")};var jn={ConstantProvider:function(){jn.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null}};(0,t.module$exports$Blockly$utils$object.inherits)(jn.ConstantProvider,Fn.ConstantProvider),jn.ConstantProvider.prototype.setFontConstants_=function(n){jn.ConstantProvider.superClass_.setFontConstants_.call(this,n),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},jn.ConstantProvider.prototype.init=function(){jn.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},jn.ConstantProvider.prototype.setDynamicProperties_=function(n){jn.ConstantProvider.superClass_.setDynamicProperties_.call(this,n),this.SELECTED_GLOW_COLOUR=n.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var s=Number(n.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=s&&!isNaN(s)?s:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=n.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(n=Number(n.getComponentStyle("replacementGlowSize")))&&!isNaN(n)?n:this.REPLACEMENT_GLOW_SIZE},jn.ConstantProvider.prototype.dispose=function(){jn.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&(0,S.removeNode)(this.selectedGlowFilter_),this.replacementGlowFilter_&&(0,S.removeNode)(this.replacementGlowFilter_)},jn.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,s=this.START_HAT_WIDTH,u=(0,fe.curve)("c",[(0,fe.point)(25,-n),(0,fe.point)(71,-n),(0,fe.point)(s,0)]);return{height:n,width:s,path:u}},jn.ConstantProvider.prototype.makeHexagonal=function(){function n(u,d,T){var w=u/2;return w=w>s?s:w,T=T?-1:1,u=(d?-1:1)*u/2,(0,fe.lineTo)(-T*w,u)+(0,fe.lineTo)(T*w,u)}var s=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(u){return u/=2,u>s?s:u},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return n(u,!1,!1)},pathUp:function(u){return n(u,!0,!1)},pathRightDown:function(u){return n(u,!1,!0)},pathRightUp:function(u){return n(u,!1,!0)}}},jn.ConstantProvider.prototype.makeRounded=function(){function n(d,T,w){var N=d>u?d-u:0;return d=(d>u?u:d)/2,(0,fe.arc)("a","0 0,1",d,(0,fe.point)((T?-1:1)*d,(T?-1:1)*d))+(0,fe.lineOnAxis)("v",(w?1:-1)*N)+(0,fe.arc)("a","0 0,1",d,(0,fe.point)((T?1:-1)*d,(T?-1:1)*d))}var s=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=2*s;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(d){return d/=2,d>s?s:d},height:function(d){return d},connectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return n(d,!1,!1)},pathUp:function(d){return n(d,!0,!1)},pathRightDown:function(d){return n(d,!1,!0)},pathRightUp:function(d){return n(d,!1,!0)}}},jn.ConstantProvider.prototype.makeSquared=function(){function n(u,d,T){return u-=2*s,(0,fe.arc)("a","0 0,1",s,(0,fe.point)((d?-1:1)*s,(d?-1:1)*s))+(0,fe.lineOnAxis)("v",(T?1:-1)*u)+(0,fe.arc)("a","0 0,1",s,(0,fe.point)((d?1:-1)*s,(d?-1:1)*s))}var s=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(u){return s},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return n(u,!1,!1)},pathUp:function(u){return n(u,!0,!1)},pathRightDown:function(u){return n(u,!1,!0)},pathRightUp:function(u){return n(u,!1,!0)}}},jn.ConstantProvider.prototype.shapeFor=function(n){var s=n.getCheck();switch(!s&&n.targetConnection&&(s=n.targetConnection.getCheck()),n.type){case t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:case t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:if(n=n.getSourceBlock().getOutputShape(),n!==null)switch(n){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return s&&s.indexOf("Boolean")!==-1?this.HEXAGONAL:s&&s.indexOf("Number")!==-1?this.ROUNDED:(s&&s.indexOf("String"),this.ROUNDED);case t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:case t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},jn.ConstantProvider.prototype.makeNotch=function(){function n(He){return(0,fe.curve)("c",[(0,fe.point)(He*T/2,0),(0,fe.point)(He*T*3/4,N/2),(0,fe.point)(He*T,N)])+(0,fe.line)([(0,fe.point)(He*T,w)])+(0,fe.curve)("c",[(0,fe.point)(He*T/4,N/2),(0,fe.point)(He*T/2,N),(0,fe.point)(He*T,N)])+(0,fe.lineOnAxis)("h",He*d)+(0,fe.curve)("c",[(0,fe.point)(He*T/2,0),(0,fe.point)(He*T*3/4,-(N/2)),(0,fe.point)(He*T,-N)])+(0,fe.line)([(0,fe.point)(He*T,-w)])+(0,fe.curve)("c",[(0,fe.point)(He*T/4,-(N/2)),(0,fe.point)(He*T/2,-N),(0,fe.point)(He*T,-N)])}var s=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,d=s/3,T=d/3,w=u/2,N=w/2,J=n(1),ve=n(-1);return{type:this.SHAPES.NOTCH,width:s,height:u,pathLeft:J,pathRight:ve}},jn.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS,s=(0,fe.arc)("a","0 0,0",n,(0,fe.point)(-n,n)),u=(0,fe.arc)("a","0 0,1",n,(0,fe.point)(-n,n)),d=(0,fe.arc)("a","0 0,0",n,(0,fe.point)(n,n)),T=(0,fe.arc)("a","0 0,1",n,(0,fe.point)(n,n));return{width:n,height:n,pathTop:s,pathBottom:d,rightWidth:n,rightHeight:n,pathTopRight:u,pathBottomRight:T}},jn.ConstantProvider.prototype.generateSecondaryColour_=function(n){return(0,Sn.blend)("#000",n,.15)||n},jn.ConstantProvider.prototype.generateTertiaryColour_=function(n){return(0,Sn.blend)("#000",n,.25)||n},jn.ConstantProvider.prototype.createDom=function(n,s,u){jn.ConstantProvider.superClass_.createDom.call(this,n,s,u),n=(0,S.createSvgElement)(ce.Svg.DEFS,{},n),s=(0,S.createSvgElement)(ce.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),(0,S.createSvgElement)(ce.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},s),u=(0,S.createSvgElement)(ce.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},s),(0,S.createSvgElement)(ce.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},u),(0,S.createSvgElement)(ce.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},s),(0,S.createSvgElement)(ce.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},s),this.selectedGlowFilterId=s.id,this.selectedGlowFilter_=s,n=(0,S.createSvgElement)(ce.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),(0,S.createSvgElement)(ce.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},n),s=(0,S.createSvgElement)(ce.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),(0,S.createSvgElement)(ce.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},s),(0,S.createSvgElement)(ce.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),(0,S.createSvgElement)(ce.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),(0,S.createSvgElement)(ce.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},n),this.replacementGlowFilterId=n.id,this.replacementGlowFilter_=n},jn.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText,",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",n+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text,",n+" .blocklyNonEditableText>g>text,",n+" .blocklyEditableText>g>text {","fill: #575E75;","}",n+" .blocklyFlyoutLabelText {","fill: #575E75;","}",n+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",n+" .blocklyDropdownText {","fill: #fff !important;","}",n+".blocklyWidgetDiv .goog-menuitem,",n+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",n+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",n+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",n+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]};var $o={Drawer:function(n,s){$o.Drawer.superClass_.constructor.call(this,n,s)}};(0,t.module$exports$Blockly$utils$object.inherits)($o.Drawer,Zn.Drawer),$o.Drawer.prototype.draw=function(){var n=this.block_.pathObject;n.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),n.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&n.flipRTL(),(0,ko.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(n.outputShapeType=this.info_.outputConnection.shape.type),n.endDrawing()},$o.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):$o.Drawer.superClass_.drawOutline_.call(this)},$o.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():$o.Drawer.superClass_.drawLeft_.call(this)},$o.Drawer.prototype.drawRightSideRow_=function(n){if(!(0>=n.height))if(n.precedesStatement||n.followsStatement){var s=this.constants_.INSIDE_CORNERS.rightHeight;s=n.height-(n.precedesStatement?s:0),this.outlinePath_+=(n.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<s?(0,fe.lineOnAxis)("V",n.yPos+s):"")+(n.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=(0,fe.lineOnAxis)("V",n.yPos+n.height)},$o.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},$o.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},$o.Drawer.prototype.drawFlatTop_=function(){var n=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=(0,fe.moveBy)(n.xPos,this.info_.startY),this.outlinePath_+=(0,fe.lineOnAxis)("h",n.width)},$o.Drawer.prototype.drawFlatBottom_=function(){var n=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=(0,fe.lineOnAxis)("V",n.baseline),this.outlinePath_+=(0,fe.lineOnAxis)("h",-n.width)},$o.Drawer.prototype.drawInlineInput_=function(n){this.positionInlineInputConnection_(n);var s=n.input.name;if(!n.connectedBlock&&!this.info_.isInsertionMarker){var u=n.width-2*n.connectionWidth;n=(0,fe.moveTo)(n.xPos+n.connectionWidth,n.centerline-n.height/2)+(0,fe.lineOnAxis)("h",u)+n.shape.pathRightDown(n.height)+(0,fe.lineOnAxis)("h",-u)+n.shape.pathUp(n.height)+"z",this.block_.pathObject.setOutlinePath(s,n)}},$o.Drawer.prototype.drawStatementInput_=function(n){var s=n.getLastInput(),u=s.xPos+s.notchOffset+s.shape.width,d=s.shape.pathRight+(0,fe.lineOnAxis)("h",-(s.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,T=n.height-2*this.constants_.INSIDE_CORNERS.height;s=this.constants_.INSIDE_CORNERS.pathBottom+(0,fe.lineOnAxis)("h",s.notchOffset-this.constants_.INSIDE_CORNERS.width)+(s.connectedBottomNextConnection?"":s.shape.pathLeft),this.outlinePath_+=(0,fe.lineOnAxis)("H",u)+d+(0,fe.lineOnAxis)("v",T)+s+(0,fe.lineOnAxis)("H",n.xPos+n.width),this.positionStatementInputConnection_(n)};var qo={PathObject:function(n,s,u){qo.PathObject.superClass_.constructor.call(this,n,s,u),this.constants=u,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null}};(0,t.module$exports$Blockly$utils$object.inherits)(qo.PathObject,Lo.PathObject),qo.PathObject.prototype.setPath=function(n){qo.PathObject.superClass_.setPath.call(this,n),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",n)},qo.PathObject.prototype.applyColour=function(n){qo.PathObject.superClass_.applyColour.call(this,n),n.isShadow()&&n.getParent()&&this.svgPath.setAttribute("stroke",n.getParent().style.colourTertiary);for(var s in this.outlines_)this.outlines_[s].setAttribute("fill",this.style.colourTertiary)},qo.PathObject.prototype.flipRTL=function(){qo.PathObject.superClass_.flipRTL.call(this);for(var n in this.outlines_)this.outlines_[n].setAttribute("transform","scale(-1 1)")},qo.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n),n?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},qo.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n),n?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},qo.PathObject.prototype.updateShapeForInputHighlight=function(n,s){n=n.getParentInput().name,(n=this.getOutlinePath_(n))&&(s?n.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):n.removeAttribute("filter"))},qo.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_=Object.create(null);for(var n in this.outlines_)this.remainingOutlines_[n]=1},qo.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var n in this.remainingOutlines_)this.removeOutlinePath_(n);this.remainingOutlines_=null},qo.PathObject.prototype.setOutlinePath=function(n,s){n=this.getOutlinePath_(n),n.setAttribute("d",s),n.setAttribute("fill",this.style.colourTertiary)},qo.PathObject.prototype.getOutlinePath_=function(n){return this.outlines_[n]||(this.outlines_[n]=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[n],this.outlines_[n]},qo.PathObject.prototype.removeOutlinePath_=function(n){this.outlines_[n].parentNode.removeChild(this.outlines_[n]),delete this.outlines_[n]};var jl={BottomRow:function(n){jl.BottomRow.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(jl.BottomRow,Oo.BottomRow),jl.BottomRow.prototype.endsWithElemSpacer=function(){return!1},jl.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection},jl.BottomRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},t.module$exports$Blockly$FieldImage={FieldImage:function(n,s,u,d,T,w,N){if(!n)throw Error("Src value of an image field is required");if(n=(0,qt.replaceMessageReferences)(n),u=Number((0,qt.replaceMessageReferences)(u)),s=Number((0,qt.replaceMessageReferences)(s)),isNaN(u)||isNaN(s))throw Error("Height and width values of an image field must cast to numbers.");if(0>=u||0>=s)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.module$exports$Blockly$FieldImage.FieldImage.superClass_.constructor.call(this,n,null,N),N||(this.flipRtl_=!!w,this.altText_=(0,qt.replaceMessageReferences)(d)||""),this.size_=new Me.Size(s,u+t.module$exports$Blockly$FieldImage.FieldImage.Y_PADDING),this.imageHeight_=u,this.clickHandler_=null,typeof T=="function"&&(this.clickHandler_=T),this.imageElement_=null}},(0,t.module$exports$Blockly$utils$object.inherits)(t.module$exports$Blockly$FieldImage.FieldImage,Ze.Field),t.module$exports$Blockly$FieldImage.FieldImage.prototype.DEFAULT_VALUE="",t.module$exports$Blockly$FieldImage.FieldImage.fromJson=function(n){return new this(n.src,n.width,n.height,void 0,void 0,void 0,n)},t.module$exports$Blockly$FieldImage.FieldImage.Y_PADDING=1,t.module$exports$Blockly$FieldImage.FieldImage.prototype.EDITABLE=!1,t.module$exports$Blockly$FieldImage.FieldImage.prototype.isDirty_=!1,t.module$exports$Blockly$FieldImage.FieldImage.prototype.configure_=function(n){t.module$exports$Blockly$FieldImage.FieldImage.superClass_.configure_.call(this,n),this.flipRtl_=!!n.flipRtl,this.altText_=(0,qt.replaceMessageReferences)(n.alt)||""},t.module$exports$Blockly$FieldImage.FieldImage.prototype.initView=function(){this.imageElement_=(0,S.createSvgElement)(ce.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(S.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.module$exports$Blockly$FieldImage.FieldImage.prototype.updateSize_=function(){},t.module$exports$Blockly$FieldImage.FieldImage.prototype.doClassValidation_=function(n){return typeof n!="string"?null:n},t.module$exports$Blockly$FieldImage.FieldImage.prototype.doValueUpdate_=function(n){this.value_=n,this.imageElement_&&this.imageElement_.setAttributeNS(S.XLINK_NS,"xlink:href",String(this.value_))},t.module$exports$Blockly$FieldImage.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.module$exports$Blockly$FieldImage.FieldImage.prototype.setAlt=function(n){n!==this.altText_&&(this.altText_=n||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.module$exports$Blockly$FieldImage.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.module$exports$Blockly$FieldImage.FieldImage.prototype.setOnClickHandler=function(n){this.clickHandler_=n},t.module$exports$Blockly$FieldImage.FieldImage.prototype.getText_=function(){return this.altText_},(0,ei.register)("field_image",t.module$exports$Blockly$FieldImage.FieldImage);var to={RenderInfo:function(n,s){to.RenderInfo.superClass_.constructor.call(this,n,s),this.topRow=new Xl.TopRow(this.constants_),this.bottomRow=new jl.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!s.getInputsInline()||s.isCollapsed(),this.hasStatementInput=0<s.statementInputCount,this.rightSide=this.outputConnection?new vc.RightConnectionShape(this.constants_):null}};(0,t.module$exports$Blockly$utils$object.inherits)(to.RenderInfo,eo.RenderInfo),to.RenderInfo.prototype.getRenderer=function(){return this.renderer_},to.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},to.RenderInfo.prototype.shouldStartNewRow_=function(n,s){return s?n.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||s.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?!0:n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE||n.type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY?!this.isInline||this.isMultiRow:!1:!1},to.RenderInfo.prototype.getDesiredRowWidth_=function(n){return n.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):to.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},to.RenderInfo.prototype.getInRowSpacing_=function(n,s){return n&&s||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!n&&s&&ne.Types.isStatementInput(s)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:n&&ne.Types.isLeftRoundedCorner(n)&&s&&(ne.Types.isPreviousConnection(s)||ne.Types.isNextConnection(s))?s.notchOffset-this.constants_.CORNER_RADIUS:n&&ne.Types.isLeftSquareCorner(n)&&s&&ne.Types.isHat(s)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},to.RenderInfo.prototype.getSpacerRowHeight_=function(n,s){if(ne.Types.isTopRow(n)&&ne.Types.isBottomRow(s))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var u=ne.Types.isInputRow(n)&&n.hasStatement,d=ne.Types.isInputRow(s)&&s.hasStatement;return d||u?(n=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),d&&u?Math.max(n,this.constants_.DUMMY_INPUT_MIN_HEIGHT):n):ne.Types.isTopRow(n)?n.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ne.Types.isBottomRow(s)?this.outputConnection?!s.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},to.RenderInfo.prototype.getSpacerRowWidth_=function(n,s){var u=this.width-this.startX;return ne.Types.isInputRow(n)&&n.hasStatement||ne.Types.isInputRow(s)&&s.hasStatement?Math.max(u,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):u},to.RenderInfo.prototype.getElemCenterline_=function(n,s){if(n.hasStatement&&!ne.Types.isSpacer(s)&&!ne.Types.isStatementInput(s))return n.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ne.Types.isInlineInput(s)){var u=s.connectedBlock;if(u&&u.outputConnection&&u.nextConnection)return n.yPos+u.height/2}return to.RenderInfo.superClass_.getElemCenterline_.call(this,n,s)},to.RenderInfo.prototype.addInput_=function(n,s){if(n.type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&s.hasDummyInput&&s.align===t.module$exports$Blockly$Input.Align.LEFT&&n.align===t.module$exports$Blockly$Input.Align.RIGHT)s.rightAlignedDummyInput=n;else if(n.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT){s.elements.push(new Ko.StatementInput(this.constants_,n)),s.hasStatement=!0,s.align===null&&(s.align=n.align);return}to.RenderInfo.superClass_.addInput_.call(this,n,s)},to.RenderInfo.prototype.addAlignmentPadding_=function(n,s){if(n.rightAlignedDummyInput){for(var u,d=0;d<n.elements.length;d++){var T=n.elements[d];if(ne.Types.isSpacer(T)&&(u=T),ne.Types.isField(T)&&T.parentInput===n.rightAlignedDummyInput)break}if(u){u.width+=s,n.width+=s;return}}to.RenderInfo.superClass_.addAlignmentPadding_.call(this,n,s)},to.RenderInfo.prototype.adjustXPosition_=function(){for(var n=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,s=n,u=2;u<this.rows.length-1;u+=2){var d=this.rows[u-1],T=this.rows[u],w=this.rows[u+1];if(d=u===2?!!this.topRow.hasPreviousConnection:!!d.followsStatement,w=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!w.precedesStatement,ne.Types.isInputRow(T)&&T.hasStatement)T.measure(),s=T.width-T.getLastInput().width+n;else if(d&&(u===2||w)&&ne.Types.isInputRow(T)&&!T.hasStatement){w=T.xPos,d=null;for(var N=0;N<T.elements.length;N++){var J=T.elements[N];ne.Types.isSpacer(J)&&(d=J),!(d&&(ne.Types.isField(J)||ne.Types.isInput(J))&&w<s)||ne.Types.isField(J)&&(J.field instanceof t.module$exports$Blockly$FieldLabel.FieldLabel||J.field instanceof t.module$exports$Blockly$FieldImage.FieldImage)||(d.width+=s-w),w+=J.width}}}},to.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var n=0,s=0;s<this.rows.length;s++){var u=this.rows[s];u.yPos=n,n+=u.height}this.height=n,s=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,n=this.outputConnection.shape.height(s),s=this.outputConnection.shape.width(s),this.outputConnection.height=n,this.outputConnection.width=s,this.outputConnection.startX=s,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(n),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(s),u=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(u=s,this.rightSide.height=n,this.rightSide.width=u,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+u),this.startX=s,this.width+=s+u,this.widthWithChildren+=s+u}},to.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var n=0,s=0;s<this.rows.length;s++){var u=this.rows[s];if(ne.Types.isInputRow(u)){n=u.elements[u.elements.length-2];var d=this.getNegativeSpacing_(u.elements[1]),T=this.getNegativeSpacing_(n);n=d+T;var w=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-n<w&&(n=this.width-w,d=n/2,T=n/2),u.elements.unshift(new Hr.InRowSpacer(this.constants_,-d)),u.elements.push(new Hr.InRowSpacer(this.constants_,-T))}}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,s=0;s<this.rows.length;s++)u=this.rows[s],ne.Types.isTopOrBottomRow(u)&&(u.elements[1].width-=n,u.elements[1].widthWithConnectedBlocks-=n),u.width-=n,u.widthWithConnectedBlocks-=n}},to.RenderInfo.prototype.getNegativeSpacing_=function(n){if(!n)return 0;var s=this.outputConnection.width,u=this.outputConnection.shape.type,d=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(u){case d.SHAPES.ROUND:return u=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=this.height/2>u?u:this.height/2,s-u*(1-Math.sin(Math.acos((u-this.constants_.SMALL_PADDING)/u)));default:return 0}if(ne.Types.isInlineInput(n)){var T=n.connectedBlock;return n=T?T.pathObject.outputShapeType:n.shape.type,T&&T.outputConnection&&(T.statementInputCount||T.nextConnection)||u===d.SHAPES.HEXAGONAL&&u!==n?0:s-this.constants_.SHAPE_IN_SHAPE_PADDING[u][n]}return ne.Types.isField(n)?u===d.SHAPES.ROUND&&n.field instanceof t.module$exports$Blockly$FieldTextInput.FieldTextInput?s-2.75*d.GRID_UNIT:s-this.constants_.SHAPE_IN_SHAPE_PADDING[u][0]:ne.Types.isIcon(n)?this.constants_.SMALL_PADDING:0},to.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var n=2;n<this.rows.length-1;n+=2){var s=this.rows[n-1],u=this.rows[n],d=this.rows[n+1],T=n===2,w=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!d.precedesStatement;if(T?this.topRow.hasPreviousConnection:s.followsStatement){var N=u.elements.length===3&&(u.elements[1].field instanceof t.module$exports$Blockly$FieldLabel.FieldLabel||u.elements[1].field instanceof t.module$exports$Blockly$FieldImage.FieldImage);if(!T&&N)s.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING,u.height-=this.constants_.MEDIUM_PADDING;else if(!T&&!w)s.height+=this.constants_.SMALL_PADDING;else if(w){for(T=!1,w=0;w<u.elements.length;w++)if(N=u.elements[w],ne.Types.isInlineInput(N)&&N.connectedBlock&&!N.connectedBlock.isShadow()&&40<=N.connectedBlock.getHeightWidth().height){T=!0;break}T&&(s.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING)}}}},to.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),to.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)};var Ei={Renderer:function(n){Ei.Renderer.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(Ei.Renderer,No.Renderer),Ei.Renderer.prototype.makeConstants_=function(){return new jn.ConstantProvider},Ei.Renderer.prototype.makeRenderInfo_=function(n){return new to.RenderInfo(this,n)},Ei.Renderer.prototype.makeDrawer_=function(n,s){return new $o.Drawer(n,s)},Ei.Renderer.prototype.makeMarkerDrawer=function(n,s){return new Yo.MarkerSvg(n,this.getConstants(),s)},Ei.Renderer.prototype.makePathObject=function(n,s){return new qo.PathObject(n,s,this.getConstants())},Ei.Renderer.prototype.shouldHighlightConnection=function(n){return n.type!==t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&n.type!==t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE},Ei.Renderer.prototype.getConnectionPreviewMethod=function(n,s,u){return s.type===t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?n.isConnected()?tn.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:tn.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:Ei.Renderer.superClass_.getConnectionPreviewMethod(n,s,u)},(0,hn.register)("zelos",Ei.Renderer);var Er={};Er.BottomRow=jl.BottomRow,Er.ConstantProvider=jn.ConstantProvider,Er.Drawer=$o.Drawer,Er.MarkerSvg=Yo.MarkerSvg,Er.PathObject=qo.PathObject,Er.RenderInfo=to.RenderInfo,Er.Renderer=Ei.Renderer,Er.RightConnectionShape=vc.RightConnectionShape,Er.StatementInput=Ko.StatementInput,Er.TopRow=Xl.TopRow;var pt={RenderInfo:function(n,s){pt.RenderInfo.superClass_.constructor.call(this,n,s)}};(0,t.module$exports$Blockly$utils$object.inherits)(pt.RenderInfo,eo.RenderInfo),pt.RenderInfo.prototype.getRenderer=function(){return this.renderer_},pt.RenderInfo.prototype.addElemSpacing_=function(){for(var n=!1,s=0;s<this.rows.length;s++)if(this.rows[s].hasExternalInput){n=!0;break}for(s=0;s<this.rows.length;s++){var u=this.rows[s],d=u.elements;u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new Hr.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0])));for(var T=0;T<d.length-1;T++){u.elements.push(d[T]);var w=this.getInRowSpacing_(d[T],d[T+1]);u.elements.push(new Hr.InRowSpacer(this.constants_,w))}u.elements.push(d[d.length-1]),u.endsWithElemSpacer()&&(d=this.getInRowSpacing_(d[d.length-1],null),n&&u.hasDummyInput&&(d+=this.constants_.TAB_WIDTH),u.elements.push(new Hr.InRowSpacer(this.constants_,d)))}},pt.RenderInfo.prototype.getInRowSpacing_=function(n,s){if(!n)return s&&ne.Types.isField(s)&&s.isEditable?this.constants_.MEDIUM_PADDING:s&&ne.Types.isInlineInput(s)?this.constants_.MEDIUM_LARGE_PADDING:s&&ne.Types.isStatementInput(s)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ne.Types.isInput(n)&&!s)return ne.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:ne.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:ne.Types.isHat(n)?this.constants_.NO_PADDING:ne.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:ne.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:ne.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ne.Types.isInput(n)&&!s){if(ne.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(ne.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(ne.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!ne.Types.isInput(n)&&s&&ne.Types.isInput(s)){if(ne.Types.isField(n)&&n.isEditable){if(ne.Types.isInlineInput(s)||ne.Types.isExternalInput(s))return this.constants_.SMALL_PADDING}else{if(ne.Types.isInlineInput(s)||ne.Types.isExternalInput(s))return this.constants_.MEDIUM_LARGE_PADDING;if(ne.Types.isStatementInput(s))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ne.Types.isIcon(n)&&s&&!ne.Types.isInput(s))return this.constants_.LARGE_PADDING;if(ne.Types.isInlineInput(n)&&s&&ne.Types.isField(s))return s.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ne.Types.isLeftSquareCorner(n)&&s){if(ne.Types.isHat(s))return this.constants_.NO_PADDING;if(ne.Types.isPreviousConnection(s)||ne.Types.isNextConnection(s))return s.notchOffset}return ne.Types.isLeftRoundedCorner(n)&&s?s.notchOffset-this.constants_.CORNER_RADIUS:ne.Types.isField(n)&&s&&ne.Types.isField(s)&&n.isEditable===s.isEditable||s&&ne.Types.isJaggedEdge(s)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},pt.RenderInfo.prototype.getSpacerRowHeight_=function(n,s){return ne.Types.isTopRow(n)&&ne.Types.isBottomRow(s)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ne.Types.isTopRow(n)||ne.Types.isBottomRow(s)?this.constants_.NO_PADDING:n.hasExternalInput&&s.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&s.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&s.hasStatement||n.hasDummyInput||s.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},pt.RenderInfo.prototype.getElemCenterline_=function(n,s){if(ne.Types.isSpacer(s))return n.yPos+s.height/2;if(ne.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,ne.Types.isNextConnection(s)?n+s.height/2:n-s.height/2;if(ne.Types.isTopRow(n))return ne.Types.isHat(s)?n.capline-s.height/2:n.capline+s.height/2;var u=n.yPos;return u=ne.Types.isField(s)&&n.hasStatement?u+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+s.height/2):u+n.height/2},pt.RenderInfo.prototype.finalize_=function(){for(var n=0,s=0,u=0;u<this.rows.length;u++){var d=this.rows[u];d.yPos=s,d.xPos=this.startX,s+=d.height,n=Math.max(n,d.widthWithConnectedBlocks);var T=s-this.topRow.ascenderHeight;d===this.bottomRow&&T<this.constants_.MIN_BLOCK_HEIGHT&&(T=this.constants_.MIN_BLOCK_HEIGHT-T,this.bottomRow.height+=T,s+=T),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=s-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX,this.height=s,this.startY=this.topRow.capline};var ka={Renderer:function(n){ka.Renderer.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(ka.Renderer,No.Renderer),ka.Renderer.prototype.makeRenderInfo_=function(n){return new pt.RenderInfo(this,n)},(0,hn.register)("thrasos",ka.Renderer);var Wh={};Wh.RenderInfo=pt.RenderInfo,Wh.Renderer=ka.Renderer;var fl={save:function(n){var s=Object.create(null),u=(0,ue.getAllItems)(ue.Type.SERIALIZER,!0),d;for(d in u){var T=u[d].save(n);T&&(s[d]=T)}return s},load:function(n,s,u){u=u===void 0?{}:u;var d=u.recordUndo===void 0?!1:u.recordUndo;if(u=(0,ue.getAllItems)(ue.Type.SERIALIZER,!0)){var T=Object.entries(u).sort(function(J,ve){return ve[1].priority-J[1].priority});u=(0,B.getRecordUndo)(),(0,B.setRecordUndo)(d),(d=(0,B.getGroup)())||(0,B.setGroup)(!0),(0,S.startTextWidthCache)(),s.setResizesEnabled&&s.setResizesEnabled(!1);for(var w=o.makeIterator(T.reverse()),N=w.next();!N.done;N=w.next())N=o.makeIterator(N.value),N.next(),N.next().value.clear(s);for(T=o.makeIterator(T.reverse()),w=T.next();!w.done;w=T.next())N=o.makeIterator(w.value),w=N.next().value,N=N.next().value,n[w]&&N.load(n[w],s);s.setResizesEnabled&&s.setResizesEnabled(!0),(0,S.stopTextWidthCache)(),(0,B.fire)(new((0,B.get)(B.FINISHED_LOADING))(s)),(0,B.setGroup)(d),(0,B.setRecordUndo)(u)}}},Aa={},wa=function(){this.priority=$l.VARIABLES};wa.prototype.save=function(n){var s=[];n=o.makeIterator(n.getAllVariables());for(var u=n.next();!u.done;u=n.next()){u=u.value;var d={name:u.name,id:u.getId()};u.type&&(d.type=u.type),s.push(d)}return s.length?s:null},wa.prototype.load=function(n,s){n=o.makeIterator(n);for(var u=n.next();!u.done;u=n.next())u=u.value,s.createVariable(u.name,u.type,u.id)},wa.prototype.clear=function(n){n.getVariableMap().clear()},(0,ig.register)("variables",new wa);var Ma={ConstantProvider:function(){Ma.ConstantProvider.superClass_.constructor.call(this)}};(0,t.module$exports$Blockly$utils$object.inherits)(Ma.ConstantProvider,Fn.ConstantProvider);var Eu={Drawer:function(n,s){Eu.Drawer.superClass_.constructor.call(this,n,s)}};(0,t.module$exports$Blockly$utils$object.inherits)(Eu.Drawer,Zn.Drawer);var Tc={RenderInfo:function(n,s){Tc.RenderInfo.superClass_.constructor.call(this,n,s)}};(0,t.module$exports$Blockly$utils$object.inherits)(Tc.RenderInfo,eo.RenderInfo),Tc.RenderInfo.prototype.getRenderer=function(){return this.renderer_};var ri={Renderer:function(n){ri.Renderer.superClass_.constructor.call(this,n)}};(0,t.module$exports$Blockly$utils$object.inherits)(ri.Renderer,No.Renderer),ri.Renderer.prototype.makeConstants_=function(){return new Ma.ConstantProvider},ri.Renderer.prototype.makeRenderInfo_=function(n){return new Tc.RenderInfo(this,n)},ri.Renderer.prototype.makeDrawer_=function(n,s){return new Eu.Drawer(n,s)},(0,hn.register)("minimalist",ri.Renderer);var Jl={};Jl.ConstantProvider=Ma.ConstantProvider,Jl.Drawer=Eu.Drawer,Jl.RenderInfo=Tc.RenderInfo,Jl.Renderer=ri.Renderer;var xu={StatementInput:function(n,s){xu.StatementInput.superClass_.constructor.call(this,n,s),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}};(0,t.module$exports$Blockly$utils$object.inherits)(xu.StatementInput,Ca.StatementInput);var Vr={PathObject:function(n,s,u){this.constants=u,this.svgRoot=n,this.svgPathDark=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=s}};(0,t.module$exports$Blockly$utils$object.inherits)(Vr.PathObject,Lo.PathObject),Vr.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n),this.svgPathDark.setAttribute("d",n)},Vr.PathObject.prototype.setHighlightPath=function(n){this.svgPathLight.setAttribute("d",n)},Vr.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},Vr.PathObject.prototype.applyColour=function(n){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),Vr.PathObject.superClass_.applyColour.call(this,n),this.svgPath.setAttribute("stroke","none")},Vr.PathObject.prototype.setStyle=function(n){this.style=n,this.colourDark=(0,Sn.blend)("#000",this.style.colourPrimary,.2)||this.colourDark},Vr.PathObject.prototype.updateHighlighted=function(n){n?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},Vr.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Vr.PathObject.prototype.updateDisabled_=function(n){Vr.PathObject.superClass_.updateDisabled_.call(this,n),n&&this.svgPath.setAttribute("stroke","none")};var xi={ConstantProvider:function(){xi.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}};(0,t.module$exports$Blockly$utils$object.inherits)(xi.ConstantProvider,Fn.ConstantProvider),xi.ConstantProvider.prototype.getCSS_=function(n){return xi.ConstantProvider.superClass_.getCSS_.call(this,n).concat([n+" .blocklyInsertionMarker>.blocklyPathLight,",n+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])};var Si={Highlighter:function(n){this.info_=n,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,n=n.getRenderer(),this.constants_=n.getConstants(),this.highlightConstants_=n.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}};Si.Highlighter.prototype.getPath=function(){return this.steps_+`
`+this.inlineSteps_},Si.Highlighter.prototype.drawTopCorner=function(n){this.steps_+=(0,fe.moveBy)(n.xPos,this.info_.startY);for(var s=0,u;u=n.elements[s];s++)ne.Types.isLeftSquareCorner(u)?this.steps_+=this.highlightConstants_.START_POINT:ne.Types.isLeftRoundedCorner(u)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ne.Types.isPreviousConnection(u)?this.steps_+=this.notchPaths_.pathLeft:ne.Types.isHat(u)?this.steps_+=this.startPaths_.path(this.RTL_):ne.Types.isSpacer(u)&&u.width!==0&&(this.steps_+=(0,fe.lineOnAxis)("H",u.xPos+u.width-this.highlightOffset_));this.steps_+=(0,fe.lineOnAxis)("H",n.xPos+n.width-this.highlightOffset_)},Si.Highlighter.prototype.drawJaggedEdge_=function(n){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+(0,fe.lineOnAxis)("v",n.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},Si.Highlighter.prototype.drawValueInput=function(n){var s=n.getLastInput();if(this.RTL_){var u=n.height-s.connectionHeight;this.steps_+=(0,fe.moveTo)(s.xPos+s.width-this.highlightOffset_,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+(0,fe.lineOnAxis)("v",u)}else this.steps_+=(0,fe.moveTo)(s.xPos+s.width,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},Si.Highlighter.prototype.drawStatementInput=function(n){var s=n.getLastInput();if(this.RTL_){var u=n.height-2*this.insideCornerPaths_.height;this.steps_+=(0,fe.moveTo)(s.xPos,n.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+(0,fe.lineOnAxis)("v",u)+this.insideCornerPaths_.pathBottom(this.RTL_)+(0,fe.lineTo)(n.width-s.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=(0,fe.moveTo)(s.xPos,n.yPos+n.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+(0,fe.lineTo)(n.width-s.xPos-this.insideCornerPaths_.width,0)},Si.Highlighter.prototype.drawRightSideRow=function(n){var s=n.xPos+n.width-this.highlightOffset_;n.followsStatement&&(this.steps_+=(0,fe.lineOnAxis)("H",s)),this.RTL_&&(this.steps_+=(0,fe.lineOnAxis)("H",s),n.height>this.highlightOffset_&&(this.steps_+=(0,fe.lineOnAxis)("V",n.yPos+n.height-this.highlightOffset_)))},Si.Highlighter.prototype.drawBottomRow=function(n){if(this.RTL_)this.steps_+=(0,fe.lineOnAxis)("V",n.baseline-this.highlightOffset_);else{var s=this.info_.bottomRow.elements[0];ne.Types.isLeftSquareCorner(s)?this.steps_+=(0,fe.moveTo)(n.xPos+this.highlightOffset_,n.baseline-this.highlightOffset_):ne.Types.isLeftRoundedCorner(s)&&(this.steps_+=(0,fe.moveTo)(n.xPos,n.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},Si.Highlighter.prototype.drawLeft=function(){var n=this.info_.outputConnection;n&&(n=n.connectionOffsetY+n.height,this.RTL_?this.steps_+=(0,fe.moveTo)(this.info_.startX,n):(this.steps_+=(0,fe.moveTo)(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=(0,fe.lineOnAxis)("V",n)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(n=this.info_.topRow,ne.Types.isLeftRoundedCorner(n.elements[0])?this.steps_+=(0,fe.lineOnAxis)("V",this.outsideCornerPaths_.height):this.steps_+=(0,fe.lineOnAxis)("V",n.capline+this.highlightOffset_))},Si.Highlighter.prototype.drawInlineInput=function(n){var s=this.highlightOffset_,u=n.xPos+n.connectionWidth,d=n.centerline-n.height/2,T=n.width-n.connectionWidth,w=d+s;this.RTL_?(d=n.connectionOffsetY-s,n=n.height-(n.connectionOffsetY+n.connectionHeight)+s,this.inlineSteps_+=(0,fe.moveTo)(u-s,w)+(0,fe.lineOnAxis)("v",d)+this.puzzleTabPaths_.pathDown(this.RTL_)+(0,fe.lineOnAxis)("v",n)+(0,fe.lineOnAxis)("h",T)):this.inlineSteps_+=(0,fe.moveTo)(n.xPos+n.width+s,w)+(0,fe.lineOnAxis)("v",n.height)+(0,fe.lineOnAxis)("h",-T)+(0,fe.moveTo)(u,d+n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)};var Jn={Drawer:function(n,s){Jn.Drawer.superClass_.constructor.call(this,n,s),this.highlighter_=new Si.Highlighter(s)}};(0,t.module$exports$Blockly$utils$object.inherits)(Jn.Drawer,Zn.Drawer),Jn.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var n=this.block_.pathObject;n.setPath(this.outlinePath_+`
`+this.inlinePath_),n.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&n.flipRTL(),(0,ko.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Jn.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),Jn.Drawer.superClass_.drawTop_.call(this)},Jn.Drawer.prototype.drawJaggedEdge_=function(n){this.highlighter_.drawJaggedEdge_(n),Jn.Drawer.superClass_.drawJaggedEdge_.call(this,n)},Jn.Drawer.prototype.drawValueInput_=function(n){this.highlighter_.drawValueInput(n),Jn.Drawer.superClass_.drawValueInput_.call(this,n)},Jn.Drawer.prototype.drawStatementInput_=function(n){this.highlighter_.drawStatementInput(n),Jn.Drawer.superClass_.drawStatementInput_.call(this,n)},Jn.Drawer.prototype.drawRightSideRow_=function(n){this.highlighter_.drawRightSideRow(n),this.outlinePath_+=(0,fe.lineOnAxis)("H",n.xPos+n.width)+(0,fe.lineOnAxis)("V",n.yPos+n.height)},Jn.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),Jn.Drawer.superClass_.drawBottom_.call(this)},Jn.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),Jn.Drawer.superClass_.drawLeft_.call(this)},Jn.Drawer.prototype.drawInlineInput_=function(n){this.highlighter_.drawInlineInput(n),Jn.Drawer.superClass_.drawInlineInput_.call(this,n)},Jn.Drawer.prototype.positionInlineInputConnection_=function(n){var s=n.centerline-n.height/2;if(n.connectionModel){var u=n.xPos+n.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),n.connectionModel.setOffsetInBlock(u,s+n.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},Jn.Drawer.prototype.positionStatementInputConnection_=function(n){var s=n.getLastInput();if(s.connectionModel){var u=n.xPos+n.statementEdge+s.notchOffset;u=this.info_.RTL?-1*u:u+this.constants_.DARK_PATH_OFFSET,s.connectionModel.setOffsetInBlock(u,n.yPos+this.constants_.DARK_PATH_OFFSET)}},Jn.Drawer.prototype.positionExternalValueConnection_=function(n){var s=n.getLastInput();if(s.connectionModel){var u=n.xPos+n.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),s.connectionModel.setOffsetInBlock(u,n.yPos)}},Jn.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var s=n.connection,u=s.xPos;s.connectionModel.setOffsetInBlock((this.info_.RTL?-u:u)+this.constants_.DARK_PATH_OFFSET/2,n.baseline+this.constants_.DARK_PATH_OFFSET)}};var Ki={HighlightConstantProvider:function(n){this.constantProvider=n,this.OFFSET=.5,this.START_POINT=(0,fe.moveBy)(this.OFFSET,this.OFFSET)}};Ki.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},Ki.HighlightConstantProvider.prototype.makeInsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,s=this.OFFSET,u=(1-Math.SQRT1_2)*(n+s)-s,d=(0,fe.moveBy)(u,u)+(0,fe.arc)("a","0 0,0",n,(0,fe.point)(-u-s,n-u)),T=(0,fe.arc)("a","0 0,0",n+s,(0,fe.point)(n+s,n+s)),w=(0,fe.moveBy)(u,-u)+(0,fe.arc)("a","0 0,0",n+s,(0,fe.point)(n-u,u+s));return{width:n+s,height:n,pathTop:function(N){return N?d:""},pathBottom:function(N){return N?T:w}}},Ki.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,s=this.OFFSET,u=(1-Math.SQRT1_2)*(n-s)+s,d=(0,fe.moveBy)(u,u)+(0,fe.arc)("a","0 0,1",n-s,(0,fe.point)(n-u,-u+s)),T=(0,fe.moveBy)(s,n)+(0,fe.arc)("a","0 0,1",n-s,(0,fe.point)(n,-n+s)),w=-u,N=(0,fe.moveBy)(u,w)+(0,fe.arc)("a","0 0,1",n-s,(0,fe.point)(-u+s,-w-n));return{height:n,topLeft:function(J){return J?d:T},bottomLeft:function(){return N}}},Ki.HighlightConstantProvider.prototype.makePuzzleTab=function(){var n=this.constantProvider.TAB_WIDTH,s=this.constantProvider.TAB_HEIGHT,u=(0,fe.moveBy)(-2,-s+3.4)+(0,fe.lineTo)(-.45*n,-2.1),d=(0,fe.lineOnAxis)("v",2.5)+(0,fe.moveBy)(.97*-n,2.5)+(0,fe.curve)("q",[(0,fe.point)(.05*-n,10),(0,fe.point)(.3*n,9.5)])+(0,fe.moveBy)(.67*n,-1.9)+(0,fe.lineOnAxis)("v",2.5),T=(0,fe.lineOnAxis)("v",-1.5)+(0,fe.moveBy)(-.92*n,-.5)+(0,fe.curve)("q",[(0,fe.point)(-.19*n,-5.5),(0,fe.point)(0,-11)])+(0,fe.moveBy)(.92*n,1),w=(0,fe.moveBy)(-5,s-.7)+(0,fe.lineTo)(.46*n,-2.1);return{width:n,height:s,pathUp:function(N){return N?u:T},pathDown:function(N){return N?d:w}}},Ki.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:(0,fe.lineOnAxis)("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},Ki.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:(0,fe.lineTo)(5.1,2.6)+(0,fe.moveBy)(-10.2,6.8)+(0,fe.lineTo)(5.1,2.6),height:12,width:10.2}},Ki.HighlightConstantProvider.prototype.makeStartHat=function(){var n=this.constantProvider.START_HAT.height,s=(0,fe.moveBy)(25,-8.7)+(0,fe.curve)("c",[(0,fe.point)(29.7,-6.2),(0,fe.point)(57.2,-.5),(0,fe.point)(75,8.7)]),u=(0,fe.curve)("c",[(0,fe.point)(17.8,-9.2),(0,fe.point)(45.3,-14.9),(0,fe.point)(75,-8.7)])+(0,fe.moveTo)(100.5,n+.5);return{path:function(d){return d?s:u}}};var Rr={InlineInput:function(n,s){Rr.InlineInput.superClass_.constructor.call(this,n,s),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}};(0,t.module$exports$Blockly$utils$object.inherits)(Rr.InlineInput,yu.InlineInput);var ho={RenderInfo:function(n,s){ho.RenderInfo.superClass_.constructor.call(this,n,s)}};(0,t.module$exports$Blockly$utils$object.inherits)(ho.RenderInfo,eo.RenderInfo),ho.RenderInfo.prototype.getRenderer=function(){return this.renderer_},ho.RenderInfo.prototype.populateBottomRow_=function(){ho.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},ho.RenderInfo.prototype.addInput_=function(n,s){this.isInline&&n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE?(s.elements.push(new Rr.InlineInput(this.constants_,n)),s.hasInlineInput=!0):n.type===t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?(s.elements.push(new xu.StatementInput(this.constants_,n)),s.hasStatement=!0):n.type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE?(s.elements.push(new Os.ExternalValueInput(this.constants_,n)),s.hasExternalInput=!0):n.type===t.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&(s.minHeight=Math.max(s.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),s.hasDummyInput=!0),this.isInline||s.align!==null||(s.align=n.align)},ho.RenderInfo.prototype.addElemSpacing_=function(){for(var n=!1,s=0,u;u=this.rows[s];s++)u.hasExternalInput&&(n=!0);for(s=0;u=this.rows[s];s++){var d=u.elements;if(u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new Hr.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(var T=0;T<d.length-1;T++){u.elements.push(d[T]);var w=this.getInRowSpacing_(d[T],d[T+1]);u.elements.push(new Hr.InRowSpacer(this.constants_,w))}u.elements.push(d[d.length-1]),u.endsWithElemSpacer()&&(d=this.getInRowSpacing_(d[d.length-1],null),n&&u.hasDummyInput&&(d+=this.constants_.TAB_WIDTH),u.elements.push(new Hr.InRowSpacer(this.constants_,d)))}}},ho.RenderInfo.prototype.getInRowSpacing_=function(n,s){if(!n)return s&&ne.Types.isField(s)&&s.isEditable?this.constants_.MEDIUM_PADDING:s&&ne.Types.isInlineInput(s)?this.constants_.MEDIUM_LARGE_PADDING:s&&ne.Types.isStatementInput(s)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ne.Types.isInput(n)&&(!s||ne.Types.isStatementInput(s)))return ne.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:ne.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:ne.Types.isHat(n)?this.constants_.NO_PADDING:ne.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:ne.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:ne.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ne.Types.isInput(n)&&!s){if(ne.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(ne.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(ne.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!ne.Types.isInput(n)&&s&&ne.Types.isInput(s)){if(ne.Types.isField(n)&&n.isEditable){if(ne.Types.isInlineInput(s)||ne.Types.isExternalInput(s))return this.constants_.SMALL_PADDING}else{if(ne.Types.isInlineInput(s)||ne.Types.isExternalInput(s))return this.constants_.MEDIUM_LARGE_PADDING;if(ne.Types.isStatementInput(s))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ne.Types.isIcon(n)&&s&&!ne.Types.isInput(s))return this.constants_.LARGE_PADDING;if(ne.Types.isInlineInput(n)&&s&&ne.Types.isField(s))return s.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ne.Types.isLeftSquareCorner(n)&&s){if(ne.Types.isHat(s))return this.constants_.NO_PADDING;if(ne.Types.isPreviousConnection(s))return s.notchOffset;if(ne.Types.isNextConnection(s))return s.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ne.Types.isLeftRoundedCorner(n)&&s){if(ne.Types.isPreviousConnection(s))return s.notchOffset-this.constants_.CORNER_RADIUS;if(ne.Types.isNextConnection(s))return s.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ne.Types.isField(n)&&s&&ne.Types.isField(s)&&n.isEditable===s.isEditable||s&&ne.Types.isJaggedEdge(s)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},ho.RenderInfo.prototype.getSpacerRowHeight_=function(n,s){return ne.Types.isTopRow(n)&&ne.Types.isBottomRow(s)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ne.Types.isTopRow(n)||ne.Types.isBottomRow(s)?this.constants_.NO_PADDING:n.hasExternalInput&&s.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&s.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&s.hasStatement||!n.hasStatement&&s.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},ho.RenderInfo.prototype.getElemCenterline_=function(n,s){if(ne.Types.isSpacer(s))return n.yPos+s.height/2;if(ne.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,ne.Types.isNextConnection(s)?n+s.height/2:n-s.height/2;if(ne.Types.isTopRow(n))return ne.Types.isHat(s)?n.capline-s.height/2:n.capline+s.height/2;var u=n.yPos;return ne.Types.isField(s)||ne.Types.isIcon(s)?(u+=s.height/2,(n.hasInlineInput||n.hasStatement)&&s.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=n.height&&(u+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):u=ne.Types.isInlineInput(s)?u+s.height/2:u+n.height/2,u},ho.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var n=0,s=null,u=this.rows.length-1,d;d=this.rows[u];u--)d.nextRightEdge=n,ne.Types.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),s&&s.hasStatement&&d.width<s.width?d.nextRightEdge=s.width:n=d.width,s=d);for(n=u=0;s=this.rows[n];n++)s.hasStatement?u=this.getDesiredRowWidth_(s):ne.Types.isSpacer(s)?s.width=Math.max(u,s.nextRightEdge):(u=Math.max(u,s.nextRightEdge)-s.width,0<u&&this.addAlignmentPadding_(s,u),u=s.width)}else ho.RenderInfo.superClass_.alignRowElements_.call(this)},ho.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.isInline&&n.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:ho.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},ho.RenderInfo.prototype.finalize_=function(){for(var n=0,s=0,u=0,d;d=this.rows[u];u++){d.yPos=s,d.xPos=this.startX,s+=d.height,n=Math.max(n,d.widthWithConnectedBlocks);var T=s-this.topRow.ascenderHeight;d===this.bottomRow&&T<this.constants_.MIN_BLOCK_HEIGHT&&(T=this.constants_.MIN_BLOCK_HEIGHT-T,this.bottomRow.height+=T,s+=T),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=s-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=s+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline};var Mo={Renderer:function(n){Mo.Renderer.superClass_.constructor.call(this,n),this.highlightConstants_=null}};(0,t.module$exports$Blockly$utils$object.inherits)(Mo.Renderer,No.Renderer),Mo.Renderer.prototype.init=function(n,s){Mo.Renderer.superClass_.init.call(this,n,s),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},Mo.Renderer.prototype.refreshDom=function(n,s){Mo.Renderer.superClass_.refreshDom.call(this,n,s),this.getHighlightConstants().init()},Mo.Renderer.prototype.makeConstants_=function(){return new xi.ConstantProvider},Mo.Renderer.prototype.makeRenderInfo_=function(n){return new ho.RenderInfo(this,n)},Mo.Renderer.prototype.makeDrawer_=function(n,s){return new Jn.Drawer(n,s)},Mo.Renderer.prototype.makePathObject=function(n,s){return new Vr.PathObject(n,s,this.getConstants())},Mo.Renderer.prototype.makeHighlightConstants_=function(){return new Ki.HighlightConstantProvider(this.getConstants())},Mo.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},(0,hn.register)("geras",Mo.Renderer);var Yi={};Yi.ConstantProvider=xi.ConstantProvider,Yi.Drawer=Jn.Drawer,Yi.HighlightConstantProvider=Ki.HighlightConstantProvider,Yi.Highlighter=Si.Highlighter,Yi.InlineInput=Rr.InlineInput,Yi.PathObject=Vr.PathObject,Yi.RenderInfo=ho.RenderInfo,Yi.Renderer=Mo.Renderer,Yi.StatementInput=xu.StatementInput;var Ci={},lT={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Su={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}};Ci.Zelos=new An.Theme("zelos",lT,Su);var zh={};zh.Classic=To.Classic,zh.Zelos=Ci.Zelos;var Wr={names:{ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},registerEscape:function(){var n={name:Wr.names.ESCAPE,preconditionFn:function(s){return!s.options.readOnly},callback:function(s){return s.hideChaff(),!0}};Ct.ShortcutRegistry.registry.register(n),Ct.ShortcutRegistry.registry.addKeyMapping(dt.KeyCodes.ESC,n.name)},registerDelete:function(){var n={name:Wr.names.DELETE,preconditionFn:function(s){var u=(0,t.module$exports$Blockly$common.getSelected)();return!s.options.readOnly&&u&&u.isDeletable()},callback:function(s,u){return u.preventDefault(),$t.Gesture.inProgress()?!1:((0,t.module$exports$Blockly$common.getSelected)().checkAndDelete(),!0)}};Ct.ShortcutRegistry.registry.register(n),Ct.ShortcutRegistry.registry.addKeyMapping(dt.KeyCodes.DELETE,n.name),Ct.ShortcutRegistry.registry.addKeyMapping(dt.KeyCodes.BACKSPACE,n.name)},registerCopy:function(){var n={name:Wr.names.COPY,preconditionFn:function(u){var d=(0,t.module$exports$Blockly$common.getSelected)();return!u.options.readOnly&&!$t.Gesture.inProgress()&&d&&d.isDeletable()&&d.isMovable()},callback:function(u,d){return d.preventDefault(),u.hideChaff(),(0,ir.copy)((0,t.module$exports$Blockly$common.getSelected)()),!0}};Ct.ShortcutRegistry.registry.register(n);var s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.C,[dt.KeyCodes.CTRL]);Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.C,[dt.KeyCodes.ALT]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.C,[dt.KeyCodes.META]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name)},registerCut:function(){var n={name:Wr.names.CUT,preconditionFn:function(u){var d=(0,t.module$exports$Blockly$common.getSelected)();return!u.options.readOnly&&!$t.Gesture.inProgress()&&d&&d.isDeletable()&&d.isMovable()&&!d.workspace.isFlyout},callback:function(){var u=(0,t.module$exports$Blockly$common.getSelected)();return u?((0,ir.copy)(u),u.checkAndDelete(),!0):!1}};Ct.ShortcutRegistry.registry.register(n);var s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.X,[dt.KeyCodes.CTRL]);Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.X,[dt.KeyCodes.ALT]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.X,[dt.KeyCodes.META]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name)},registerPaste:function(){var n={name:Wr.names.PASTE,preconditionFn:function(u){return!u.options.readOnly&&!$t.Gesture.inProgress()},callback:function(){return(0,ir.paste)()}};Ct.ShortcutRegistry.registry.register(n);var s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.V,[dt.KeyCodes.CTRL]);Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.V,[dt.KeyCodes.ALT]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.V,[dt.KeyCodes.META]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name)},registerUndo:function(){var n={name:Wr.names.UNDO,preconditionFn:function(u){return!u.options.readOnly&&!$t.Gesture.inProgress()},callback:function(u){return u.hideChaff(),u.undo(!1),!0}};Ct.ShortcutRegistry.registry.register(n);var s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Z,[dt.KeyCodes.CTRL]);Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Z,[dt.KeyCodes.ALT]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Z,[dt.KeyCodes.META]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name)},registerRedo:function(){var n={name:Wr.names.REDO,preconditionFn:function(u){return!$t.Gesture.inProgress()&&!u.options.readOnly},callback:function(u){return u.hideChaff(),u.undo(!0),!0}};Ct.ShortcutRegistry.registry.register(n);var s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Z,[dt.KeyCodes.SHIFT,dt.KeyCodes.CTRL]);Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Z,[dt.KeyCodes.SHIFT,dt.KeyCodes.ALT]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Z,[dt.KeyCodes.SHIFT,dt.KeyCodes.META]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name),s=Ct.ShortcutRegistry.registry.createSerializedKey(dt.KeyCodes.Y,[dt.KeyCodes.CTRL]),Ct.ShortcutRegistry.registry.addKeyMapping(s,n.name)},registerDefaultShortcuts:function(){(0,Wr.registerEscape)(),(0,Wr.registerDelete)(),(0,Wr.registerCopy)(),(0,Wr.registerCut)(),(0,Wr.registerPaste)(),(0,Wr.registerUndo)(),(0,Wr.registerRedo)()}};(0,Wr.registerDefaultShortcuts)();var Ec={FinishedLoading:function(n){this.isBlank=typeof n=="undefined",this.workspaceId=n?n.id:"",this.group=(0,B.getGroup)(),this.recordUndo=!1}};(0,t.module$exports$Blockly$utils$object.inherits)(Ec.FinishedLoading,us),Ec.FinishedLoading.prototype.type=B.FINISHED_LOADING,Ec.FinishedLoading.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),this.workspaceId&&(n.workspaceId=this.workspaceId),n},Ec.FinishedLoading.prototype.fromJson=function(n){this.isBlank=!1,this.workspaceId=n.workspaceId,this.group=n.group},(0,ue.register)(ue.Type.EVENT,B.FINISHED_LOADING,Ec.FinishedLoading);var ml={Ui:function(n,s,u,d){ml.Ui.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.element=typeof s=="undefined"?"":s,this.oldValue=typeof u=="undefined"?"":u,this.newValue=typeof d=="undefined"?"":d}};(0,t.module$exports$Blockly$utils$object.inherits)(ml.Ui,lo.UiBase),ml.Ui.prototype.type=B.UI,ml.Ui.prototype.toJson=function(){var n=ml.Ui.superClass_.toJson.call(this);return n.element=this.element,this.newValue!==void 0&&(n.newValue=this.newValue),this.blockId&&(n.blockId=this.blockId),n},ml.Ui.prototype.fromJson=function(n){ml.Ui.superClass_.fromJson.call(this,n),this.element=n.element,this.newValue=n.newValue,this.blockId=n.blockId},(0,ue.register)(ue.Type.EVENT,B.UI,ml.Ui);var ms={BubbleOpen:function(n,s,u){ms.BubbleOpen.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isOpen=s,this.bubbleType=u}};(0,t.module$exports$Blockly$utils$object.inherits)(ms.BubbleOpen,lo.UiBase),ms.BubbleOpen.prototype.type=B.BUBBLE_OPEN,ms.BubbleOpen.prototype.toJson=function(){var n=ms.BubbleOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n.bubbleType=this.bubbleType,n.blockId=this.blockId,n},ms.BubbleOpen.prototype.fromJson=function(n){ms.BubbleOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen,this.bubbleType=n.bubbleType,this.blockId=n.blockId},(0,ue.register)(ue.Type.EVENT,B.BUBBLE_OPEN,ms.BubbleOpen);var qi={CommentChange:function(n,s,u){qi.CommentChange.superClass_.constructor.call(this,n),n&&(this.oldContents_=typeof s=="undefined"?"":s,this.newContents_=typeof u=="undefined"?"":u)}};(0,t.module$exports$Blockly$utils$object.inherits)(qi.CommentChange,yi.CommentBase),qi.CommentChange.prototype.type=B.COMMENT_CHANGE,qi.CommentChange.prototype.toJson=function(){var n=qi.CommentChange.superClass_.toJson.call(this);return n.oldContents=this.oldContents_,n.newContents=this.newContents_,n},qi.CommentChange.prototype.fromJson=function(n){qi.CommentChange.superClass_.fromJson.call(this,n),this.oldContents_=n.oldContents,this.newContents_=n.newContents},qi.CommentChange.prototype.isNull=function(){return this.oldContents_===this.newContents_},qi.CommentChange.prototype.run=function(n){var s=this.getEventWorkspace_().getCommentById(this.commentId);s?s.setContent(n?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},(0,ue.register)(ue.Type.EVENT,B.COMMENT_CHANGE,qi.CommentChange);var ii={CommentCreate:function(n){ii.CommentCreate.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())}};(0,t.module$exports$Blockly$utils$object.inherits)(ii.CommentCreate,yi.CommentBase),ii.CommentCreate.prototype.type=B.COMMENT_CREATE,ii.CommentCreate.prototype.toJson=function(){var n=ii.CommentCreate.superClass_.toJson.call(this);return n.xml=(0,t.module$exports$Blockly$Xml.domToText)(this.xml),n},ii.CommentCreate.prototype.fromJson=function(n){ii.CommentCreate.superClass_.fromJson.call(this,n),this.xml=(0,t.module$exports$Blockly$Xml.textToDom)(n.xml)},ii.CommentCreate.prototype.run=function(n){yi.CommentBase.CommentCreateDeleteHelper(this,n)},(0,ue.register)(ue.Type.EVENT,B.COMMENT_CREATE,ii.CommentCreate);var Ps={CommentDelete:function(n){Ps.CommentDelete.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())}};(0,t.module$exports$Blockly$utils$object.inherits)(Ps.CommentDelete,yi.CommentBase),Ps.CommentDelete.prototype.type=B.COMMENT_DELETE,Ps.CommentDelete.prototype.toJson=function(){return Ps.CommentDelete.superClass_.toJson.call(this)},Ps.CommentDelete.prototype.fromJson=function(n){Ps.CommentDelete.superClass_.fromJson.call(this,n)},Ps.CommentDelete.prototype.run=function(n){yi.CommentBase.CommentCreateDeleteHelper(this,!n)},(0,ue.register)(ue.Type.EVENT,B.COMMENT_DELETE,Ps.CommentDelete);var gl={TrashcanOpen:function(n,s){gl.TrashcanOpen.superClass_.constructor.call(this,s),this.isOpen=n}};(0,t.module$exports$Blockly$utils$object.inherits)(gl.TrashcanOpen,lo.UiBase),gl.TrashcanOpen.prototype.type=B.TRASHCAN_OPEN,gl.TrashcanOpen.prototype.toJson=function(){var n=gl.TrashcanOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n},gl.TrashcanOpen.prototype.fromJson=function(n){gl.TrashcanOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen},(0,ue.register)(ue.Type.EVENT,B.TRASHCAN_OPEN,gl.TrashcanOpen),t.module$exports$Blockly$Events={Abstract:us},t.module$exports$Blockly$Events.BubbleOpen=ms.BubbleOpen,t.module$exports$Blockly$Events.BlockBase=sr.BlockBase,t.module$exports$Blockly$Events.BlockChange=wr.BlockChange,t.module$exports$Blockly$Events.BlockCreate=Hi.BlockCreate,t.module$exports$Blockly$Events.BlockDelete=Ls.BlockDelete,t.module$exports$Blockly$Events.BlockDrag=zi.BlockDrag,t.module$exports$Blockly$Events.BlockMove=_r.BlockMove,t.module$exports$Blockly$Events.Click=ao.Click,t.module$exports$Blockly$Events.CommentBase=yi.CommentBase,t.module$exports$Blockly$Events.CommentChange=qi.CommentChange,t.module$exports$Blockly$Events.CommentCreate=ii.CommentCreate,t.module$exports$Blockly$Events.CommentDelete=Ps.CommentDelete,t.module$exports$Blockly$Events.CommentMove=Fr.CommentMove,t.module$exports$Blockly$Events.FinishedLoading=Ec.FinishedLoading,t.module$exports$Blockly$Events.MarkerMove=ds.MarkerMove,t.module$exports$Blockly$Events.Selected=fs.Selected,t.module$exports$Blockly$Events.ThemeChange=Ns.ThemeChange,t.module$exports$Blockly$Events.ToolboxItemSelect=$s.ToolboxItemSelect,t.module$exports$Blockly$Events.TrashcanOpen=gl.TrashcanOpen,t.module$exports$Blockly$Events.Ui=ml.Ui,t.module$exports$Blockly$Events.UiBase=lo.UiBase,t.module$exports$Blockly$Events.VarBase=Bs.VarBase,t.module$exports$Blockly$Events.VarCreate=Vi.VarCreate,t.module$exports$Blockly$Events.VarDelete=ti.VarDelete,t.module$exports$Blockly$Events.VarRename=lr.VarRename,t.module$exports$Blockly$Events.ViewportChange=Gl.ViewportChange,t.module$exports$Blockly$Events.BLOCK_CHANGE=B.CHANGE,t.module$exports$Blockly$Events.BLOCK_CREATE=B.CREATE,t.module$exports$Blockly$Events.BLOCK_DELETE=B.DELETE,t.module$exports$Blockly$Events.BLOCK_DRAG=B.BLOCK_DRAG,t.module$exports$Blockly$Events.BLOCK_MOVE=B.MOVE,t.module$exports$Blockly$Events.BUBBLE_OPEN=B.BUBBLE_OPEN,t.module$exports$Blockly$Events.BumpEvent=B.BumpEvent,t.module$exports$Blockly$Events.BUMP_EVENTS=B.BUMP_EVENTS,t.module$exports$Blockly$Events.CHANGE=B.CHANGE,t.module$exports$Blockly$Events.CLICK=B.CLICK,t.module$exports$Blockly$Events.COMMENT_CHANGE=B.COMMENT_CHANGE,t.module$exports$Blockly$Events.COMMENT_CREATE=B.COMMENT_CREATE,t.module$exports$Blockly$Events.COMMENT_DELETE=B.COMMENT_DELETE,t.module$exports$Blockly$Events.COMMENT_MOVE=B.COMMENT_MOVE,t.module$exports$Blockly$Events.CREATE=B.CREATE,t.module$exports$Blockly$Events.DELETE=B.DELETE,t.module$exports$Blockly$Events.FINISHED_LOADING=B.FINISHED_LOADING,t.module$exports$Blockly$Events.MARKER_MOVE=B.MARKER_MOVE,t.module$exports$Blockly$Events.MOVE=B.MOVE,t.module$exports$Blockly$Events.SELECTED=B.SELECTED,t.module$exports$Blockly$Events.THEME_CHANGE=B.THEME_CHANGE,t.module$exports$Blockly$Events.TOOLBOX_ITEM_SELECT=B.TOOLBOX_ITEM_SELECT,t.module$exports$Blockly$Events.TRASHCAN_OPEN=B.TRASHCAN_OPEN,t.module$exports$Blockly$Events.UI=B.UI,t.module$exports$Blockly$Events.VAR_CREATE=B.VAR_CREATE,t.module$exports$Blockly$Events.VAR_DELETE=B.VAR_DELETE,t.module$exports$Blockly$Events.VAR_RENAME=B.VAR_RENAME,t.module$exports$Blockly$Events.VIEWPORT_CHANGE=B.VIEWPORT_CHANGE,t.module$exports$Blockly$Events.clearPendingUndo=B.clearPendingUndo,t.module$exports$Blockly$Events.disable=B.disable,t.module$exports$Blockly$Events.enable=B.enable,t.module$exports$Blockly$Events.filter=B.filter,t.module$exports$Blockly$Events.fire=B.fire,t.module$exports$Blockly$Events.fromJson=B.fromJson,t.module$exports$Blockly$Events.getDescendantIds=B.getDescendantIds,t.module$exports$Blockly$Events.get=B.get,t.module$exports$Blockly$Events.getGroup=B.getGroup,t.module$exports$Blockly$Events.getRecordUndo=B.getRecordUndo,t.module$exports$Blockly$Events.isEnabled=B.isEnabled,t.module$exports$Blockly$Events.setGroup=B.setGroup,t.module$exports$Blockly$Events.setRecordUndo=B.setRecordUndo,t.module$exports$Blockly$Events.disableOrphans=B.disableOrphans,Object.defineProperties(t.module$exports$Blockly$Events,{recordUndo:{get:function(){return(0,l.warn)("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),(0,B.getRecordUndo)()},set:function(n){(0,l.warn)("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),(0,B.setRecordUndo)(n)}}});var Un={registerUndo:function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.UNDO},preconditionFn:function(n){return 0<n.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!1)},scopeType:on.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},registerRedo:function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.REDO},preconditionFn:function(n){return 0<n.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!0)},scopeType:on.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},registerCleanup:function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.CLEAN_UP},preconditionFn:function(n){return n.workspace.isMovable()?1<n.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(n){n.workspace.cleanUp()},scopeType:on.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})}},aT=function(n,s){var u=0,d=0,T=function(J){d--,J.setCollapsed(n),d===0&&(0,t.module$exports$Blockly$Events.setGroup)(!1)};(0,t.module$exports$Blockly$Events.setGroup)(!0);for(var w=0;w<s.length;w++)for(var N=s[w];N;)d++,setTimeout(T.bind(null,N),u),N=N.getNextBlock(),u+=10};Un.registerCollapse=function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.COLLAPSE_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var s=0;s<n.length;s++)for(var u=n[s];u;){if(!u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){aT(!0,n.workspace.getTopBlocks(!0))},scopeType:on.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Un.registerExpand=function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.EXPAND_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var s=0;s<n.length;s++)for(var u=n[s];u;){if(u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){aT(!1,n.workspace.getTopBlocks(!0))},scopeType:on.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})};var cT=function(n,s){if(n.isDeletable())Array.prototype.push.apply(s,n.getDescendants(!1));else{n=n.getChildren(!1);for(var u=0;u<n.length;u++)cT(n[u],s)}},Md=function(n){var s=[];n=n.getTopBlocks(!0);for(var u=0;u<n.length;u++)cT(n[u],s);return s},Xh=function(n,s){(0,B.setGroup)(s);var u=n.shift();u&&(u.workspace?(u.dispose(!1,!0),setTimeout(Xh,10,n,s)):Xh(n,s)),(0,B.setGroup)(!1)};Un.registerDeleteAll=function(){on.ContextMenuRegistry.registry.register({displayText:function(n){if(n.workspace)return n=Md(n.workspace).length,n===1?t.module$exports$Blockly$Msg.Msg.DELETE_BLOCK:t.module$exports$Blockly$Msg.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){if(n.workspace)return 0<Md(n.workspace).length?"enabled":"disabled"},callback:function(n){if(n.workspace){n.workspace.cancelCurrentGesture();var s=Md(n.workspace),u=(0,Ne.genUid)();2>s.length?Xh(s,u):(0,Ao.confirm)(t.module$exports$Blockly$Msg.Msg.DELETE_ALL_BLOCKS.replace("%1",String(s.length)),function(d){d&&Xh(s,u)})}},scopeType:on.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})};var xc=function(){(0,Un.registerUndo)(),(0,Un.registerRedo)(),(0,Un.registerCleanup)(),(0,Un.registerCollapse)(),(0,Un.registerExpand)(),(0,Un.registerDeleteAll)()};Un.registerDuplicate=function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.DUPLICATE_BLOCK},preconditionFn:function(n){return n=n.block,!n.isInFlyout&&n.isDeletable()&&n.isMovable()?n.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(n){n.block&&(0,ir.duplicate)(n.block)},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Un.registerComment=function(){on.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getCommentIcon()?t.module$exports$Blockly$Msg.Msg.REMOVE_COMMENT:t.module$exports$Blockly$Msg.Msg.ADD_COMMENT},preconditionFn:function(n){return n=n.block,b.IE||n.isInFlyout||!n.workspace.options.comments||n.isCollapsed()||!n.isEditable()?"hidden":"enabled"},callback:function(n){n=n.block,n.getCommentIcon()?n.setCommentText(null):n.setCommentText("")},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},Un.registerInline=function(){on.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getInputsInline()?t.module$exports$Blockly$Msg.Msg.EXTERNAL_INPUTS:t.module$exports$Blockly$Msg.Msg.INLINE_INPUTS},preconditionFn:function(n){if(n=n.block,!n.isInFlyout&&n.isMovable()&&!n.isCollapsed()){for(var s=1;s<n.inputList.length;s++)if(n.inputList[s-1].type!==t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&n.inputList[s].type!==t.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)return"enabled"}return"hidden"},callback:function(n){n.block.setInputsInline(!n.block.getInputsInline())},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},Un.registerCollapseExpandBlock=function(){on.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isCollapsed()?t.module$exports$Blockly$Msg.Msg.EXPAND_BLOCK:t.module$exports$Blockly$Msg.Msg.COLLAPSE_BLOCK},preconditionFn:function(n){return n=n.block,!n.isInFlyout&&n.isMovable()&&n.workspace.options.collapse?"enabled":"hidden"},callback:function(n){n.block.setCollapsed(!n.block.isCollapsed())},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Un.registerDisable=function(){on.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isEnabled()?t.module$exports$Blockly$Msg.Msg.DISABLE_BLOCK:t.module$exports$Blockly$Msg.Msg.ENABLE_BLOCK},preconditionFn:function(n){return n=n.block,!n.isInFlyout&&n.workspace.options.disable&&n.isEditable()?n.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(n){n=n.block;var s=(0,B.getGroup)();s||(0,B.setGroup)(!0),n.setEnabled(!n.isEnabled()),s||(0,B.setGroup)(!1)},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},Un.registerDelete=function(){on.ContextMenuRegistry.registry.register({displayText:function(n){var s=n.block;return n=s.getDescendants(!1).length,(s=s.getNextBlock())&&(n-=s.getDescendants(!1).length),n===1?t.module$exports$Blockly$Msg.Msg.DELETE_BLOCK:t.module$exports$Blockly$Msg.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){return!n.block.isInFlyout&&n.block.isDeletable()?"enabled":"hidden"},callback:function(n){n.block&&n.block.checkAndDelete()},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},Un.registerHelp=function(){on.ContextMenuRegistry.registry.register({displayText:function(){return t.module$exports$Blockly$Msg.Msg.HELP},preconditionFn:function(n){return n=n.block,(typeof n.helpUrl=="function"?n.helpUrl():n.helpUrl)?"enabled":"hidden"},callback:function(n){n.block.showHelp()},scopeType:on.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})};var aC=function(){(0,Un.registerDuplicate)(),(0,Un.registerComment)(),(0,Un.registerInline)(),(0,Un.registerCollapseExpandBlock)(),(0,Un.registerDisable)(),(0,Un.registerDelete)(),(0,Un.registerHelp)()};Un.registerDefaultOptions=function(){xc(),aC()},(0,Un.registerDefaultOptions)();var po={Icon:function(n){this.block_=n,this.iconGroup_=null}};po.Icon.prototype.collapseHidden=!0,po.Icon.prototype.SIZE=17,po.Icon.prototype.bubble_=null,po.Icon.prototype.iconXY_=null,po.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&(0,S.addClass)(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),(0,A.conditionalBind)(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},po.Icon.prototype.dispose=function(){(0,S.removeNode)(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},po.Icon.prototype.updateEditable=function(){},po.Icon.prototype.isVisible=function(){return!!this.bubble_},po.Icon.prototype.iconClick_=function(n){this.block_.workspace.isDragging()||this.block_.isInFlyout||(0,A.isRightButton)(n)||this.setVisible(!this.isVisible())},po.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},po.Icon.prototype.setIconLocation=function(n){this.iconXY_=n,this.isVisible()&&this.bubble_.setAnchorLocation(n)},po.Icon.prototype.computeIconLocation=function(){var n=this.block_.getRelativeToSurfaceXY(),s=(0,it.getRelativeXY)(this.iconGroup_);n=new W.Coordinate(n.x+s.x+this.SIZE/2,n.y+s.y+this.SIZE/2),W.Coordinate.equals(this.getIconLocation(),n)||this.setIconLocation(n)},po.Icon.prototype.getIconLocation=function(){return this.iconXY_},po.Icon.prototype.getCorrectedSize=function(){return new Me.Size(po.Icon.prototype.SIZE,po.Icon.prototype.SIZE-2)};var Qo={Warning:function(n){Qo.Warning.superClass_.constructor.call(this,n),this.createIcon(),this.text_=Object.create(null)}};(0,t.module$exports$Blockly$utils$object.inherits)(Qo.Warning,po.Icon),Qo.Warning.prototype.collapseHidden=!1,Qo.Warning.prototype.drawIcon_=function(n){(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},n),(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},n),(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},n)},Qo.Warning.prototype.setVisible=function(n){n!==this.isVisible()&&((0,B.fire)(new((0,B.get)(B.BUBBLE_OPEN))(this.block_,n,"warning")),n?this.createBubble_():this.disposeBubble_())},Qo.Warning.prototype.createBubble_=function(){this.paragraphElement_=Qe.Bubble.textToDom(this.getText()),this.bubble_=Qe.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},Qo.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},Qo.Warning.prototype.setText=function(n,s){this.text_[s]!==n&&(n?this.text_[s]=n:delete this.text_[s],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},Qo.Warning.prototype.getText=function(){var n=[],s;for(s in this.text_)n.push(this.text_[s]);return n.join(`
`)},Qo.Warning.prototype.dispose=function(){this.block_.warning=null,po.Icon.prototype.dispose.call(this)};var Po={Comment:function(n){Po.Comment.superClass_.constructor.call(this,n),this.model_=n.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()}};(0,t.module$exports$Blockly$utils$object.inherits)(Po.Comment,po.Icon),Po.Comment.prototype.drawIcon_=function(n){(0,S.createSvgElement)(ce.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},n),(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},n),(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},n)},Po.Comment.prototype.createEditor_=function(){this.foreignObject_=(0,S.createSvgElement)(ce.Svg.FOREIGNOBJECT,{x:Qe.Bubble.BORDER_WIDTH,y:Qe.Bubble.BORDER_WIDTH},null);var n=document.createElementNS(S.HTML_NS,"body");n.setAttribute("xmlns",S.HTML_NS),n.className="blocklyMinimalBody";var s=this.textarea_=document.createElementNS(S.HTML_NS,"textarea");return s.className="blocklyCommentTextarea",s.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),s.value=this.model_.text,this.resizeTextarea_(),n.appendChild(s),this.foreignObject_.appendChild(n),this.onMouseUpWrapper_=(0,A.conditionalBind)(s,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=(0,A.conditionalBind)(s,"wheel",this,function(u){u.stopPropagation()}),this.onChangeWrapper_=(0,A.conditionalBind)(s,"change",this,function(u){this.cachedText_!==this.model_.text&&(0,B.fire)(new((0,B.get)(B.CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=(0,A.conditionalBind)(s,"input",this,function(u){this.model_.text=s.value}),setTimeout(s.focus.bind(s),0),this.foreignObject_},Po.Comment.prototype.updateEditable=function(){Po.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},Po.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},Po.Comment.prototype.resizeTextarea_=function(){var n=this.model_.size,s=2*Qe.Bubble.BORDER_WIDTH,u=n.width-s;n=n.height-s,this.foreignObject_.setAttribute("width",u),this.foreignObject_.setAttribute("height",n),this.textarea_.style.width=u-4+"px",this.textarea_.style.height=n-4+"px"},Po.Comment.prototype.setVisible=function(n){n!==this.isVisible()&&((0,B.fire)(new((0,B.get)(B.BUBBLE_OPEN))(this.block_,n,"comment")),(this.model_.pinned=n)?this.createBubble_():this.disposeBubble_())},Po.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||b.IE?this.createNonEditableBubble_():this.createEditableBubble_()},Po.Comment.prototype.createEditableBubble_=function(){this.bubble_=new Qe.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},Po.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=Qe.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=Qe.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},Po.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&((0,A.unbind)(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&((0,A.unbind)(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&((0,A.unbind)(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&((0,A.unbind)(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},Po.Comment.prototype.startEdit_=function(n){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},Po.Comment.prototype.getBubbleSize=function(){return this.model_.size},Po.Comment.prototype.setBubbleSize=function(n,s){this.bubble_?this.bubble_.setBubbleSize(n,s):(this.model_.size.width=n,this.model_.size.height=s)},Po.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},Po.Comment.prototype.dispose=function(){this.block_.comment=null,po.Icon.prototype.dispose.call(this)},(0,a.register)(`
  .blocklyCommentTextarea {
    background-color: #fef49c;
    border: 0;
    display: block;
    margin: 0;
    outline: 0;
    padding: 3px;
    resize: none;
    text-overflow: hidden;
  }
`);var Ro={verticalPosition:{TOP:0,BOTTOM:1},horizontalPosition:{LEFT:0,RIGHT:1},bumpDirection:{UP:0,DOWN:1},getStartPositionRect:function(n,s,u,d,T,w){var N=w.scrollbar&&w.scrollbar.canScrollVertically();return n.horizontal===Ro.horizontalPosition.LEFT?(u=T.absoluteMetrics.left+u,N&&w.RTL&&(u+=_t.Scrollbar.scrollbarThickness)):(u=T.absoluteMetrics.left+T.viewMetrics.width-s.width-u,N&&!w.RTL&&(u-=_t.Scrollbar.scrollbarThickness)),n.vertical===Ro.verticalPosition.TOP?n=T.absoluteMetrics.top+d:(n=T.absoluteMetrics.top+T.viewMetrics.height-s.height-d,w.scrollbar&&w.scrollbar.canScrollHorizontally()&&(n-=_t.Scrollbar.scrollbarThickness)),new nt.Rect(n,n+s.height,u,u+s.width)},getCornerOppositeToolbox:function(n,s){return{horizontal:s.toolboxMetrics.position===at.Position.LEFT||n.horizontalLayout&&!n.RTL?Ro.horizontalPosition.RIGHT:Ro.horizontalPosition.LEFT,vertical:s.toolboxMetrics.position===at.Position.BOTTOM?Ro.verticalPosition.TOP:Ro.verticalPosition.BOTTOM}},bumpPositionRect:function(n,s,u,d){for(var T=n.left,w=n.right-n.left,N=n.bottom-n.top,J=0;J<d.length;J++){var ve=d[J];n.intersects(ve)&&(n=u===Ro.bumpDirection.UP?ve.top-N-s:ve.bottom+s,n=new nt.Rect(n,n+N,T,T+w),J=-1)}return n}},cC={IPositionable:function(){}},fo={ZoomControls:function(n){this.workspace_=n,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null}};fo.ZoomControls.prototype.WIDTH_=32,fo.ZoomControls.prototype.HEIGHT_=32,fo.ZoomControls.prototype.SMALL_SPACING_=2,fo.ZoomControls.prototype.LARGE_SPACING_=11,fo.ZoomControls.prototype.MARGIN_VERTICAL_=20,fo.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,fo.ZoomControls.prototype.svgGroup_=null,fo.ZoomControls.prototype.left_=0,fo.ZoomControls.prototype.top_=0,fo.ZoomControls.prototype.initialized_=!1,fo.ZoomControls.prototype.createDom=function(){this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{},null);var n=String(Math.random()).substring(2);return this.createZoomOutSvg_(n),this.createZoomInSvg_(n),this.workspace_.isMovable()&&this.createZoomResetSvg_(n),this.svgGroup_},fo.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[un.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},fo.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&(0,S.removeNode)(this.svgGroup_),this.onZoomResetWrapper_&&(0,A.unbind)(this.onZoomResetWrapper_),this.onZoomInWrapper_&&(0,A.unbind)(this.onZoomInWrapper_),this.onZoomOutWrapper_&&(0,A.unbind)(this.onZoomOutWrapper_)},fo.ZoomControls.prototype.getBoundingRectangle=function(){var n=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(n+=this.LARGE_SPACING_+this.HEIGHT_),new nt.Rect(this.top_,this.top_+n,this.left_,this.left_+this.WIDTH_)},fo.ZoomControls.prototype.position=function(n,s){if(this.initialized_){var u=(0,Ro.getCornerOppositeToolbox)(this.workspace_,n),d=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(d+=this.LARGE_SPACING_+this.HEIGHT_),n=(0,Ro.getStartPositionRect)(u,new Me.Size(this.WIDTH_,d),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),u=u.vertical,s=(0,Ro.bumpPositionRect)(n,this.MARGIN_VERTICAL_,u===Ro.verticalPosition.TOP?Ro.bumpDirection.DOWN:Ro.bumpDirection.UP,s),u===Ro.verticalPosition.TOP?(u=this.SMALL_SPACING_+this.HEIGHT_,this.zoomInGroup_.setAttribute("transform","translate(0, "+u+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING_+this.HEIGHT_)+")")):(u=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0,this.zoomInGroup_.setAttribute("transform","translate(0, "+u+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(u+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=s.top,this.left_=s.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},fo.ZoomControls.prototype.createZoomOutSvg_=function(n){this.zoomOutGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var s=(0,S.createSvgElement)(ce.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+n},this.zoomOutGroup_);(0,S.createSvgElement)(ce.Svg.RECT,{width:32,height:32},s),(0,S.createSvgElement)(ce.Svg.IMAGE,{width:t.module$exports$Blockly$internalConstants.SPRITE.width,height:t.module$exports$Blockly$internalConstants.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+n+")"},this.zoomOutGroup_).setAttributeNS(S.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.module$exports$Blockly$internalConstants.SPRITE.url),this.onZoomOutWrapper_=(0,A.conditionalBind)(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},fo.ZoomControls.prototype.createZoomInSvg_=function(n){this.zoomInGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var s=(0,S.createSvgElement)(ce.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+n},this.zoomInGroup_);(0,S.createSvgElement)(ce.Svg.RECT,{width:32,height:32},s),(0,S.createSvgElement)(ce.Svg.IMAGE,{width:t.module$exports$Blockly$internalConstants.SPRITE.width,height:t.module$exports$Blockly$internalConstants.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+n+")"},this.zoomInGroup_).setAttributeNS(S.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.module$exports$Blockly$internalConstants.SPRITE.url),this.onZoomInWrapper_=(0,A.conditionalBind)(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},fo.ZoomControls.prototype.zoom_=function(n,s){this.workspace_.markFocused(),this.workspace_.zoomCenter(n),this.fireZoomEvent_(),(0,m.clearTouchIdentifier)(),s.stopPropagation(),s.preventDefault()},fo.ZoomControls.prototype.createZoomResetSvg_=function(n){this.zoomResetGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var s=(0,S.createSvgElement)(ce.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+n},this.zoomResetGroup_);(0,S.createSvgElement)(ce.Svg.RECT,{width:32,height:32},s),(0,S.createSvgElement)(ce.Svg.IMAGE,{width:t.module$exports$Blockly$internalConstants.SPRITE.width,height:t.module$exports$Blockly$internalConstants.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+n+")"},this.zoomResetGroup_).setAttributeNS(S.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.module$exports$Blockly$internalConstants.SPRITE.url),this.onZoomResetWrapper_=(0,A.conditionalBind)(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},fo.ZoomControls.prototype.resetZoom_=function(n){this.workspace_.markFocused();var s=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(s),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),(0,m.clearTouchIdentifier)(),n.stopPropagation(),n.preventDefault()},fo.ZoomControls.prototype.fireZoomEvent_=function(){var n=new((0,B.get)(B.CLICK))(null,this.workspace_.id,"zoom_controls");(0,B.fire)(n)},(0,a.register)(`
  .blocklyZoom>image, .blocklyZoom>svg>image {
    opacity: .4;
  }

  .blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
    opacity: .6;
  }

  .blocklyZoom>image:active, .blocklyZoom>svg>image:active {
    opacity: .8;
  }
`);var pn={WorkspaceComment:function(n,s,u,d,T){this.id=T&&!n.getCommentById(T)?T:(0,Ne.genUid)(),n.addTopComment(this),this.xy_=new W.Coordinate(0,0),this.height_=u,this.width_=d,this.workspace=n,this.RTL=n.RTL,this.editable_=this.movable_=this.deletable_=!0,this.content_=s,this.disposed_=!1,this.isComment=!0,pn.WorkspaceComment.fireCreateEvent(this)}};pn.WorkspaceComment.prototype.dispose=function(){this.disposed_||((0,B.isEnabled)()&&(0,B.fire)(new((0,B.get)(B.COMMENT_DELETE))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)},pn.WorkspaceComment.prototype.getHeight=function(){return this.height_},pn.WorkspaceComment.prototype.setHeight=function(n){this.height_=n},pn.WorkspaceComment.prototype.getWidth=function(){return this.width_},pn.WorkspaceComment.prototype.setWidth=function(n){this.width_=n},pn.WorkspaceComment.prototype.getXY=function(){return new W.Coordinate(this.xy_.x,this.xy_.y)},pn.WorkspaceComment.prototype.moveBy=function(n,s){var u=new((0,B.get)(B.COMMENT_MOVE))(this);this.xy_.translate(n,s),u.recordNew(),(0,B.fire)(u)},pn.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)},pn.WorkspaceComment.prototype.setDeletable=function(n){this.deletable_=n},pn.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)},pn.WorkspaceComment.prototype.setMovable=function(n){this.movable_=n},pn.WorkspaceComment.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},pn.WorkspaceComment.prototype.setEditable=function(n){this.editable_=n},pn.WorkspaceComment.prototype.getContent=function(){return this.content_},pn.WorkspaceComment.prototype.setContent=function(n){this.content_!==n&&((0,B.fire)(new((0,B.get)(B.COMMENT_CHANGE))(this,this.content_,n)),this.content_=n)},pn.WorkspaceComment.prototype.toXmlWithXY=function(n){return n=this.toXml(n),n.setAttribute("x",Math.round(this.xy_.x)),n.setAttribute("y",Math.round(this.xy_.y)),n.setAttribute("h",this.height_),n.setAttribute("w",this.width_),n},pn.WorkspaceComment.prototype.toXml=function(n){var s=(0,t.module$exports$Blockly$utils$xml.createElement)("comment");return n||(s.id=this.id),s.textContent=this.getContent(),s},pn.WorkspaceComment.fireCreateEvent=function(n){if((0,B.isEnabled)()){var s=(0,B.getGroup)();s||(0,B.setGroup)(!0);try{(0,B.fire)(new((0,B.get)(B.COMMENT_CREATE))(n))}finally{s||(0,B.setGroup)(!1)}}},pn.WorkspaceComment.fromXml=function(n,s){var u=pn.WorkspaceComment.parseAttributes(n);return s=new pn.WorkspaceComment(s,u.content,u.h,u.w,u.id),u=parseInt(n.getAttribute("x"),10),n=parseInt(n.getAttribute("y"),10),isNaN(u)||isNaN(n)||s.moveBy(u,n),pn.WorkspaceComment.fireCreateEvent(s),s},pn.WorkspaceComment.parseAttributes=function(n){var s=n.getAttribute("h"),u=n.getAttribute("w");return{id:n.getAttribute("id"),h:s?parseInt(s,10):100,w:u?parseInt(u,10):100,x:parseInt(n.getAttribute("x"),10),y:parseInt(n.getAttribute("y"),10),content:n.textContent}};var kt={},Br=8,jh=3,Rd=2;kt.WorkspaceCommentSvg=function(n,s,u,d,T){this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyComment"},null),this.svgGroup_.translate_="",this.svgRect_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:jh,ry:jh}),this.svgGroup_.appendChild(this.svgRect_),this.rendered_=!1,this.useDragSurface_=(0,it.is3dSupported)()&&!!n.getBlockDragSurface(),kt.WorkspaceCommentSvg.superClass_.constructor.call(this,n,s,u,d,T),this.render()},(0,t.module$exports$Blockly$utils$object.inherits)(kt.WorkspaceCommentSvg,pn.WorkspaceComment),kt.WorkspaceCommentSvg.DEFAULT_SIZE=100,kt.WorkspaceCommentSvg.TOP_OFFSET=10,kt.WorkspaceCommentSvg.prototype.dispose=function(){this.disposed_||((0,t.module$exports$Blockly$common.getSelected)()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),(0,B.isEnabled)()&&(0,B.fire)(new((0,B.get)(B.COMMENT_DELETE))(this)),(0,S.removeNode)(this.svgGroup_),this.disposeInternal_(),(0,B.disable)(),kt.WorkspaceCommentSvg.superClass_.dispose.call(this),(0,B.enable)())},kt.WorkspaceCommentSvg.prototype.initSvg=function(n){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||((0,A.conditionalBind)(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),(0,A.conditionalBind)(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!n&&this.textarea_&&this.textarea_.select()},kt.WorkspaceCommentSvg.prototype.pathMouseDown_=function(n){var s=this.workspace.getGesture(n);s&&s.handleBubbleStart(n,this)},kt.WorkspaceCommentSvg.prototype.showContextMenu=function(n){if(!this.workspace.options.readOnly){var s=[];this.isDeletable()&&this.isMovable()&&(s.push((0,t.module$exports$Blockly$ContextMenu.commentDuplicateOption)(this)),s.push((0,t.module$exports$Blockly$ContextMenu.commentDeleteOption)(this))),(0,t.module$exports$Blockly$ContextMenu.show)(n,s,this.RTL)}},kt.WorkspaceCommentSvg.prototype.select=function(){if((0,t.module$exports$Blockly$common.getSelected)()!==this){var n=null;if((0,t.module$exports$Blockly$common.getSelected)()){n=(0,t.module$exports$Blockly$common.getSelected)().id,(0,B.disable)();try{(0,t.module$exports$Blockly$common.getSelected)().unselect()}finally{(0,B.enable)()}}n=new((0,B.get)(B.SELECTED))(n,this.id,this.workspace.id),(0,B.fire)(n),(0,t.module$exports$Blockly$common.setSelected)(this),this.addSelect()}},kt.WorkspaceCommentSvg.prototype.unselect=function(){if((0,t.module$exports$Blockly$common.getSelected)()===this){var n=new((0,B.get)(B.SELECTED))(this.id,null,this.workspace.id);(0,B.fire)(n),(0,t.module$exports$Blockly$common.setSelected)(null),this.removeSelect(),this.blurFocus()}},kt.WorkspaceCommentSvg.prototype.addSelect=function(){(0,S.addClass)(this.svgGroup_,"blocklySelected"),this.setFocus()},kt.WorkspaceCommentSvg.prototype.removeSelect=function(){(0,S.removeClass)(this.svgGroup_,"blocklySelected"),this.blurFocus()},kt.WorkspaceCommentSvg.prototype.addFocus=function(){(0,S.addClass)(this.svgGroup_,"blocklyFocused")},kt.WorkspaceCommentSvg.prototype.removeFocus=function(){(0,S.removeClass)(this.svgGroup_,"blocklyFocused")},kt.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY=function(){var n=0,s=0,u=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,d=this.getSvgRoot();if(d)do{var T=(0,it.getRelativeXY)(d);n+=T.x,s+=T.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===d&&(T=this.workspace.getBlockDragSurface().getSurfaceTranslation(),n+=T.x,s+=T.y),d=d.parentNode}while(d&&d!==this.workspace.getBubbleCanvas()&&d!==u);return this.xy_=new W.Coordinate(n,s)},kt.WorkspaceCommentSvg.prototype.moveBy=function(n,s){var u=new((0,B.get)(B.COMMENT_MOVE))(this),d=this.getRelativeToSurfaceXY();this.translate(d.x+n,d.y+s),this.xy_=new W.Coordinate(d.x+n,d.y+s),u.recordNew(),(0,B.fire)(u),this.workspace.resizeContents()},kt.WorkspaceCommentSvg.prototype.translate=function(n,s){this.xy_=new W.Coordinate(n,s),this.getSvgRoot().setAttribute("transform","translate("+n+","+s+")")},kt.WorkspaceCommentSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var n=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(n.x,n.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}},kt.WorkspaceCommentSvg.prototype.moveDuringDrag=function(n,s){n?n.translateSurface(s.x,s.y):(this.svgGroup_.translate_="translate("+s.x+","+s.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},kt.WorkspaceCommentSvg.prototype.moveTo=function(n,s){this.translate(n,s)},kt.WorkspaceCommentSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},kt.WorkspaceCommentSvg.prototype.getBoundingRectangle=function(){var n=this.getRelativeToSurfaceXY(),s=this.getHeightWidth(),u=n.y,d=n.y+s.height;if(this.RTL){var T=n.x-s.width;n=n.x}else T=n.x,n=n.x+s.width;return new nt.Rect(u,d,T,n)},kt.WorkspaceCommentSvg.prototype.updateMovable=function(){this.isMovable()?(0,S.addClass)(this.svgGroup_,"blocklyDraggable"):(0,S.removeClass)(this.svgGroup_,"blocklyDraggable")},kt.WorkspaceCommentSvg.prototype.setMovable=function(n){kt.WorkspaceCommentSvg.superClass_.setMovable.call(this,n),this.updateMovable()},kt.WorkspaceCommentSvg.prototype.setEditable=function(n){kt.WorkspaceCommentSvg.superClass_.setEditable.call(this,n),this.textarea_&&(this.textarea_.readOnly=!n)},kt.WorkspaceCommentSvg.prototype.setDragging=function(n){n?(n=this.getSvgRoot(),n.translate_="",n.skew_="",(0,S.addClass)(this.svgGroup_,"blocklyDragging")):(0,S.removeClass)(this.svgGroup_,"blocklyDragging")},kt.WorkspaceCommentSvg.prototype.getSvgRoot=function(){return this.svgGroup_},kt.WorkspaceCommentSvg.prototype.getContent=function(){return this.textarea_?this.textarea_.value:this.content_},kt.WorkspaceCommentSvg.prototype.setContent=function(n){kt.WorkspaceCommentSvg.superClass_.setContent.call(this,n),this.textarea_&&(this.textarea_.value=n)},kt.WorkspaceCommentSvg.prototype.setDeleteStyle=function(n){n?(0,S.addClass)(this.svgGroup_,"blocklyDraggingDelete"):(0,S.removeClass)(this.svgGroup_,"blocklyDraggingDelete")},kt.WorkspaceCommentSvg.prototype.setAutoLayout=function(n){},kt.WorkspaceCommentSvg.fromXml=function(n,s,u){(0,B.disable)();try{var d=pn.WorkspaceComment.parseAttributes(n),T=new kt.WorkspaceCommentSvg(s,d.content,d.h,d.w,d.id);if(s.rendered&&(T.initSvg(!0),T.render()),!isNaN(d.x)&&!isNaN(d.y))if(s.RTL){var w=u||s.getWidth();T.moveBy(w-d.x,d.y)}else T.moveBy(d.x,d.y)}finally{(0,B.enable)()}return pn.WorkspaceComment.fireCreateEvent(T),T},kt.WorkspaceCommentSvg.prototype.toXmlWithXY=function(n){var s;this.workspace.RTL&&(s=this.workspace.getWidth()),n=this.toXml(n);var u=this.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(this.workspace.RTL?s-u.x:u.x)),n.setAttribute("y",Math.round(u.y)),n.setAttribute("h",this.getHeight()),n.setAttribute("w",this.getWidth()),n},kt.WorkspaceCommentSvg.prototype.toCopyData=function(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}},kt.WorkspaceCommentSvg.prototype.getHeightWidth=function(){return{width:this.getWidth(),height:this.getHeight()}},kt.WorkspaceCommentSvg.prototype.render=function(){if(!this.rendered_){var n=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:jh,ry:jh}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(n.width,n.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&(0,A.conditionalBind)(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),this.isDeletable()&&((0,A.conditionalBind)(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),(0,A.conditionalBind)(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),(0,A.conditionalBind)(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}},kt.WorkspaceCommentSvg.prototype.createEditor_=function(){this.foreignObject_=(0,S.createSvgElement)(ce.Svg.FOREIGNOBJECT,{x:0,y:kt.WorkspaceCommentSvg.TOP_OFFSET,class:"blocklyCommentForeignObject"},null);var n=document.createElementNS(S.HTML_NS,"body");n.setAttribute("xmlns",S.HTML_NS),n.className="blocklyMinimalBody";var s=document.createElementNS(S.HTML_NS,"textarea");return s.className="blocklyCommentTextarea",s.setAttribute("dir",this.RTL?"RTL":"LTR"),s.readOnly=!this.isEditable(),n.appendChild(s),this.textarea_=s,this.foreignObject_.appendChild(n),(0,A.conditionalBind)(s,"wheel",this,function(u){u.stopPropagation()}),(0,A.conditionalBind)(s,"change",this,function(u){this.setContent(s.value)}),this.foreignObject_},kt.WorkspaceCommentSvg.prototype.addResizeDom_=function(){this.resizeGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),(0,S.createSvgElement)(ce.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Br.toString())},this.resizeGroup_),(0,S.createSvgElement)(ce.Svg.LINE,{class:"blocklyResizeLine",x1:Br/3,y1:Br-1,x2:Br-1,y2:Br/3},this.resizeGroup_),(0,S.createSvgElement)(ce.Svg.LINE,{class:"blocklyResizeLine",x1:2*Br/3,y1:Br-1,x2:Br-1,y2:2*Br/3},this.resizeGroup_)},kt.WorkspaceCommentSvg.prototype.addDeleteDom_=function(){this.deleteGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=(0,S.createSvgElement)(ce.Svg.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),(0,S.createSvgElement)(ce.Svg.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),(0,S.createSvgElement)(ce.Svg.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)},kt.WorkspaceCommentSvg.prototype.resizeMouseDown_=function(n){this.unbindDragEvents_(),(0,A.isRightButton)(n)||(this.workspace.startDrag(n,new W.Coordinate(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=(0,A.conditionalBind)(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=(0,A.conditionalBind)(document,"mousemove",this,this.resizeMouseMove_),this.workspace.hideChaff()),n.stopPropagation()},kt.WorkspaceCommentSvg.prototype.deleteMouseDown_=function(n){(0,S.addClass)(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),n.stopPropagation()},kt.WorkspaceCommentSvg.prototype.deleteMouseOut_=function(n){(0,S.removeClass)(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")},kt.WorkspaceCommentSvg.prototype.deleteMouseUp_=function(n){this.dispose(),n.stopPropagation()},kt.WorkspaceCommentSvg.prototype.unbindDragEvents_=function(){this.onMouseUpWrapper_&&((0,A.unbind)(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&((0,A.unbind)(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)},kt.WorkspaceCommentSvg.prototype.resizeMouseUp_=function(n){(0,m.clearTouchIdentifier)(),this.unbindDragEvents_()},kt.WorkspaceCommentSvg.prototype.resizeMouseMove_=function(n){this.autoLayout_=!1,n=this.workspace.moveDrag(n),this.setSize_(this.RTL?-n.x:n.x,n.y)},kt.WorkspaceCommentSvg.prototype.resizeComment_=function(){var n=this.getHeightWidth(),s=kt.WorkspaceCommentSvg.TOP_OFFSET,u=2*Rd;this.foreignObject_.setAttribute("width",n.width),this.foreignObject_.setAttribute("height",n.height-s),this.RTL&&this.foreignObject_.setAttribute("x",-n.width),this.textarea_.style.width=n.width-u+"px",this.textarea_.style.height=n.height-u-s+"px"},kt.WorkspaceCommentSvg.prototype.setSize_=function(n,s){n=Math.max(n,45),s=Math.max(s,20+kt.WorkspaceCommentSvg.TOP_OFFSET),this.width_=n,this.height_=s,this.svgRect_.setAttribute("width",n),this.svgRect_.setAttribute("height",s),this.svgRectTarget_.setAttribute("width",n),this.svgRectTarget_.setAttribute("height",s),this.svgHandleTarget_.setAttribute("width",n),this.svgHandleTarget_.setAttribute("height",kt.WorkspaceCommentSvg.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-n+Br)+","+(s-Br)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-n+Br)+","+-Br+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(n-Br)+","+(s-Br)+")"),this.deleteGroup_.setAttribute("transform","translate("+(n-Br)+","+-Br+")"))),this.resizeComment_()},kt.WorkspaceCommentSvg.prototype.disposeInternal_=function(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0},kt.WorkspaceCommentSvg.prototype.setFocus=function(){var n=this;this.focused_=!0,setTimeout(function(){n.disposed_||(n.textarea_.focus(),n.addFocus(),(0,S.addClass)(n.svgRectTarget_,"blocklyCommentTargetFocused"),(0,S.addClass)(n.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},kt.WorkspaceCommentSvg.prototype.blurFocus=function(){var n=this;this.focused_=!1,setTimeout(function(){n.disposed_||(n.textarea_.blur(),n.removeFocus(),(0,S.removeClass)(n.svgRectTarget_,"blocklyCommentTargetFocused"),(0,S.removeClass)(n.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},(0,a.register)(`
  .blocklyCommentForeignObject {
    position: relative;
    z-index: 0;
  }

  .blocklyCommentRect {
    fill: #E7DE8E;
    stroke: #bcA903;
    stroke-width: 1px;
  }

  .blocklyCommentTarget {
    fill: transparent;
    stroke: #bcA903;
  }

  .blocklyCommentTargetFocused {
    fill: none;
  }

  .blocklyCommentHandleTarget {
    fill: none;
  }

  .blocklyCommentHandleTargetFocused {
    fill: transparent;
  }

  .blocklyFocused>.blocklyCommentRect {
    fill: #B9B272;
    stroke: #B9B272;
  }

  .blocklySelected>.blocklyCommentTarget {
    stroke: #fc3;
    stroke-width: 3px;
  }

  .blocklyCommentDeleteIcon {
    cursor: pointer;
    fill: #000;
    display: none;
  }

  .blocklySelected > .blocklyCommentDeleteIcon {
    display: block;
  }

  .blocklyDeleteIconShape {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
    stroke: #fc3;
  }
`);var Qt={Trashcan:function(n){Qt.Trashcan.superClass_.constructor.call(this),this.workspace_=n,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(n=new mr.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(n.toolboxPosition=this.workspace_.toolboxPosition===at.Position.TOP?at.Position.BOTTOM:at.Position.TOP,this.flyout=new((0,ue.getClassFromOptions)(ue.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(n)):(n.toolboxPosition=this.workspace_.toolboxPosition===at.Position.RIGHT?at.Position.LEFT:at.Position.RIGHT,this.flyout=new((0,ue.getClassFromOptions)(ue.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(n)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))}};(0,t.module$exports$Blockly$utils$object.inherits)(Qt.Trashcan,Wl.DeleteArea);var Sc=47,Cu=44,Cc=16,Jh=20,uT=20,Bd=10,bi=0,Kh=32,uC=.1,Ra=80,Id=4,bc=.4,Cg=.8,Od=45;Qt.Trashcan.prototype.isLidOpen=!1,Qt.Trashcan.prototype.minOpenness_=0,Qt.Trashcan.prototype.svgGroup_=null,Qt.Trashcan.prototype.svgLid_=null,Qt.Trashcan.prototype.lidTask_=0,Qt.Trashcan.prototype.lidOpen_=0,Qt.Trashcan.prototype.left_=0,Qt.Trashcan.prototype.top_=0,Qt.Trashcan.prototype.initialized_=!1,Qt.Trashcan.prototype.createDom=function(){this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:"blocklyTrash"},null);var n=String(Math.random()).substring(2),s=(0,S.createSvgElement)(ce.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup_);(0,S.createSvgElement)(ce.Svg.RECT,{width:Sc,height:Cu,y:Cc},s);var u=(0,S.createSvgElement)(ce.Svg.IMAGE,{width:t.module$exports$Blockly$internalConstants.SPRITE.width,x:-bi,height:t.module$exports$Blockly$internalConstants.SPRITE.height,y:-Kh,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup_);return u.setAttributeNS(S.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.module$exports$Blockly$internalConstants.SPRITE.url),s=(0,S.createSvgElement)(ce.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup_),(0,S.createSvgElement)(ce.Svg.RECT,{width:Sc,height:Cc},s),this.svgLid_=(0,S.createSvgElement)(ce.Svg.IMAGE,{width:t.module$exports$Blockly$internalConstants.SPRITE.width,x:-bi,height:t.module$exports$Blockly$internalConstants.SPRITE.height,y:-Kh,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup_),this.svgLid_.setAttributeNS(S.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.module$exports$Blockly$internalConstants.SPRITE.url),(0,A.bind)(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),(0,A.bind)(this.svgGroup_,"mouseup",this,this.click),(0,A.bind)(u,"mouseover",this,this.mouseOver_),(0,A.bind)(u,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},Qt.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&((0,S.insertAfter)(this.flyout.createDom(ce.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[un.ComponentManager.Capability.AUTOHIDEABLE,un.ComponentManager.Capability.DELETE_AREA,un.ComponentManager.Capability.DRAG_TARGET,un.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},Qt.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&((0,S.removeNode)(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},Qt.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},Qt.Trashcan.prototype.contentsIsOpen=function(){return!!this.flyout&&this.flyout.isVisible()},Qt.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var n=this.contents_.map(function(s){return JSON.parse(s)});this.flyout.show(n),this.fireUiEvent_(!0)}},Qt.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1),this.workspace_.recordDragTargets())},Qt.Trashcan.prototype.autoHide=function(n){!n&&this.flyout&&this.closeFlyout()},Qt.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},Qt.Trashcan.prototype.position=function(n,s){if(this.initialized_){var u=(0,Ro.getCornerOppositeToolbox)(this.workspace_,n);n=(0,Ro.getStartPositionRect)(u,new Me.Size(Sc,Cu+Cc),uT,Jh,n,this.workspace_),s=(0,Ro.bumpPositionRect)(n,Jh,u.vertical===Ro.verticalPosition.TOP?Ro.bumpDirection.DOWN:Ro.bumpDirection.UP,s),this.top_=s.top,this.left_=s.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},Qt.Trashcan.prototype.getBoundingRectangle=function(){return new nt.Rect(this.top_,this.top_+Cu+Cc,this.left_,this.left_+Sc)},Qt.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var n=this.svgGroup_.getBoundingClientRect(),s=n.top+Kh-Bd;return n=n.left+bi-Bd,new nt.Rect(s,s+Cc+Cu+2*Bd,n,n+Sc+2*Bd)},Qt.Trashcan.prototype.onDragOver=function(n){this.setLidOpen(this.wouldDelete_)},Qt.Trashcan.prototype.onDragExit=function(n){this.setLidOpen(!1)},Qt.Trashcan.prototype.onDrop=function(n){setTimeout(this.setLidOpen.bind(this,!1),100)},Qt.Trashcan.prototype.setLidOpen=function(n){this.isLidOpen!==n&&(clearTimeout(this.lidTask_),this.isLidOpen=n,this.animateLid_())},Qt.Trashcan.prototype.animateLid_=function(){var n=Id,s=1/(n+1);this.lidOpen_+=this.isLidOpen?s:-s,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Od),this.svgGroup_.style.opacity=bc+this.lidOpen_*(Cg-bc),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Ra/n))},Qt.Trashcan.prototype.setLidAngle_=function(n){var s=this.workspace_.toolboxPosition===at.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(s?-n:n)+","+(s?4:Sc-4)+","+(Cc-2)+")")},Qt.Trashcan.prototype.setMinOpenness_=function(n){this.minOpenness_=n,this.isLidOpen||this.setLidAngle_(n*Od)},Qt.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},Qt.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},Qt.Trashcan.prototype.fireUiEvent_=function(n){n=new((0,B.get)(B.TRASHCAN_OPEN))(n,this.workspace_.id),(0,B.fire)(n)},Qt.Trashcan.prototype.blockMouseDownWhenOpenable_=function(n){!this.contentsIsOpen()&&this.hasContents_()&&n.stopPropagation()},Qt.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},Qt.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},Qt.Trashcan.prototype.onDelete_=function(n){if(!(0>=this.workspace_.options.maxTrashcanContents||n.type!==B.DELETE||n.wasShadow)&&(n=this.cleanBlockJson_(n.oldJson),this.contents_.indexOf(n)===-1)){for(this.contents_.unshift(n);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(uC)}},Qt.Trashcan.prototype.cleanBlockJson_=function(n){function s(u){if(u){if(delete u.id,delete u.x,delete u.y,delete u.enabled,u.icons&&u.icons.comment){var d=u.icons.comment;delete d.height,delete d.width,delete d.pinned}d=u.inputs;for(var T in d){var w=d[T];s(w.block),s(w.shadow)}u.next&&(u=u.next,s(u.block),s(u.shadow))}}return n=JSON.parse(JSON.stringify(n)),s(n),n.kind="BLOCK",JSON.stringify(n)};var Zo={FlyoutButton:function(n,s,u,d){this.workspace_=n,this.targetWorkspace_=s,this.text_=u.text,this.position_=new W.Coordinate(0,0),this.isLabel_=d,this.callbackKey_=u.callbackKey||u.callbackkey,this.cssClass_=u["web-class"]||null,this.onMouseUpWrapper_=null,this.info=u}};Zo.FlyoutButton.MARGIN_X=5,Zo.FlyoutButton.MARGIN_Y=2,Zo.FlyoutButton.prototype.width=0,Zo.FlyoutButton.prototype.height=0,Zo.FlyoutButton.prototype.createDom=function(){var n=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(n+=" "+this.cssClass_),this.svgGroup_=(0,S.createSvgElement)(ce.Svg.G,{class:n},this.workspace_.getCanvas());var s;this.isLabel_||(s=(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),n=(0,S.createSvgElement)(ce.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var u=(0,S.createSvgElement)(ce.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),d=(0,qt.replaceMessageReferences)(this.text_);this.workspace_.RTL&&(d+="\u200F"),u.textContent=d,this.isLabel_&&(this.svgText_=u,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var T=(0,we.getComputedStyle)(u,"fontSize"),w=(0,we.getComputedStyle)(u,"fontWeight"),N=(0,we.getComputedStyle)(u,"fontFamily");return this.width=(0,S.getFastTextWidthWithSizeString)(u,T,w,N),d=(0,S.measureFontMetrics)(d,T,w,N),this.height=d.height,this.isLabel_||(this.width+=2*Zo.FlyoutButton.MARGIN_X,this.height+=2*Zo.FlyoutButton.MARGIN_Y,s.setAttribute("width",this.width),s.setAttribute("height",this.height)),n.setAttribute("width",this.width),n.setAttribute("height",this.height),u.setAttribute("x",this.width/2),u.setAttribute("y",this.height/2-d.height/2+d.baseline),this.updateTransform_(),this.onMouseUpWrapper_=(0,A.conditionalBind)(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},Zo.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},Zo.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},Zo.FlyoutButton.prototype.moveTo=function(n,s){this.position_.x=n,this.position_.y=s,this.updateTransform_()},Zo.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},Zo.FlyoutButton.prototype.getPosition=function(){return this.position_},Zo.FlyoutButton.prototype.getButtonText=function(){return this.text_},Zo.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},Zo.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&(0,A.unbind)(this.onMouseUpWrapper_),this.svgGroup_&&(0,S.removeNode)(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},Zo.FlyoutButton.prototype.onMouseUp_=function(n){(n=this.targetWorkspace_.getGesture(n))&&n.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},(0,a.register)(`
  .blocklyFlyoutButton {
    fill: #888;
    cursor: default;
  }

  .blocklyFlyoutButtonShadow {
    fill: #666;
  }

  .blocklyFlyoutButton:hover {
    fill: #aaa;
  }

  .blocklyFlyoutLabel {
    cursor: default;
  }

  .blocklyFlyoutLabelBackground {
    opacity: 0;
  }
`);var hC={BlocklyOptions:function(){}},Ba={CATEGORY_NAME:"VARIABLE_DYNAMIC",onCreateVariableButtonClick_String:function(n){(0,t.module$exports$Blockly$Variables.createVariableButtonHandler)(n.getTargetWorkspace(),void 0,"String")},onCreateVariableButtonClick_Number:function(n){(0,t.module$exports$Blockly$Variables.createVariableButtonHandler)(n.getTargetWorkspace(),void 0,"Number")},onCreateVariableButtonClick_Colour:function(n){(0,t.module$exports$Blockly$Variables.createVariableButtonHandler)(n.getTargetWorkspace(),void 0,"Colour")},flyoutCategory:function(n){var s=[],u=document.createElement("button");return u.setAttribute("text",t.module$exports$Blockly$Msg.Msg.NEW_STRING_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),s.push(u),u=document.createElement("button"),u.setAttribute("text",t.module$exports$Blockly$Msg.Msg.NEW_NUMBER_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),s.push(u),u=document.createElement("button"),u.setAttribute("text",t.module$exports$Blockly$Msg.Msg.NEW_COLOUR_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),s.push(u),n.registerButtonCallback("CREATE_VARIABLE_STRING",Ba.onCreateVariableButtonClick_String),n.registerButtonCallback("CREATE_VARIABLE_NUMBER",Ba.onCreateVariableButtonClick_Number),n.registerButtonCallback("CREATE_VARIABLE_COLOUR",Ba.onCreateVariableButtonClick_Colour),n=(0,Ba.flyoutCategoryBlocks)(n),s=s.concat(n)},flyoutCategoryBlocks:function(n){n=n.getAllVariables();var s=[];if(0<n.length){if(t.module$exports$Blockly$blocks.Blocks.variables_set_dynamic){var u=n[n.length-1],d=(0,t.module$exports$Blockly$utils$xml.createElement)("block");d.setAttribute("type","variables_set_dynamic"),d.setAttribute("gap",24),d.appendChild((0,t.module$exports$Blockly$Variables.generateVariableFieldDom)(u)),s.push(d)}if(t.module$exports$Blockly$blocks.Blocks.variables_get_dynamic)for(n.sort(ya.VariableModel.compareByName),u=0;d=n[u];u++){var T=(0,t.module$exports$Blockly$utils$xml.createElement)("block");T.setAttribute("type","variables_get_dynamic"),T.setAttribute("gap",8),T.appendChild((0,t.module$exports$Blockly$Variables.generateVariableFieldDom)(d)),s.push(T)}}return s}},hT={IRegistrableField:{}},bu;t.module$exports$Blockly$Procedures={CATEGORY_NAME:"PROCEDURE",DEFAULT_ARG:"x",allProcedures:function(n){var s=n.getBlocksByType("procedures_defnoreturn",!1).map(function(u){return u.getProcedureDef()});return n=n.getBlocksByType("procedures_defreturn",!1).map(function(u){return u.getProcedureDef()}),s.sort(bu),n.sort(bu),[s,n]}},bu=function(n,s){return n[0].localeCompare(s[0],void 0,{sensitivity:"base"})},t.module$exports$Blockly$Procedures.findLegalName=function(n,s){if(s.isInFlyout)return n;for(n=n||t.module$exports$Blockly$Msg.Msg.UNNAMED_KEY||"unnamed";!pC(n,s.workspace,s);){var u=n.match(/^(.*?)(\d+)$/);n=u?u[1]+(parseInt(u[2],10)+1):n+"2"}return n};var pC=function(n,s,u){return!(0,t.module$exports$Blockly$Procedures.isNameUsed)(n,s,u)};t.module$exports$Blockly$Procedures.isNameUsed=function(n,s,u){s=s.getAllBlocks(!1);for(var d=0;d<s.length;d++)if(s[d]!==u&&s[d].getProcedureDef){var T=s[d].getProcedureDef();if(t.module$exports$Blockly$Names.Names.equals(T[0],n))return!0}return!1},t.module$exports$Blockly$Procedures.rename=function(n){n=n.trim();var s=(0,t.module$exports$Blockly$Procedures.findLegalName)(n,this.getSourceBlock()),u=this.getValue();if(u!==n&&u!==s){n=this.getSourceBlock().workspace.getAllBlocks(!1);for(var d=0;d<n.length;d++)n[d].renameProcedure&&n[d].renameProcedure(u,s)}return s},t.module$exports$Blockly$Procedures.flyoutCategory=function(n){function s(w,N){for(var J=0;J<w.length;J++){var ve=w[J][0],He=w[J][1],Tt=(0,t.module$exports$Blockly$utils$xml.createElement)("block");Tt.setAttribute("type",N),Tt.setAttribute("gap",16);var bt=(0,t.module$exports$Blockly$utils$xml.createElement)("mutation");for(bt.setAttribute("name",ve),Tt.appendChild(bt),ve=0;ve<He.length;ve++){var Gt=(0,t.module$exports$Blockly$utils$xml.createElement)("arg");Gt.setAttribute("name",He[ve]),bt.appendChild(Gt)}u.push(Tt)}}var u=[];if(t.module$exports$Blockly$blocks.Blocks.procedures_defnoreturn){var d=(0,t.module$exports$Blockly$utils$xml.createElement)("block");d.setAttribute("type","procedures_defnoreturn"),d.setAttribute("gap",16);var T=(0,t.module$exports$Blockly$utils$xml.createElement)("field");T.setAttribute("name","NAME"),T.appendChild((0,t.module$exports$Blockly$utils$xml.createTextNode)(t.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),d.appendChild(T),u.push(d)}return t.module$exports$Blockly$blocks.Blocks.procedures_defreturn&&(d=(0,t.module$exports$Blockly$utils$xml.createElement)("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),T=(0,t.module$exports$Blockly$utils$xml.createElement)("field"),T.setAttribute("name","NAME"),T.appendChild((0,t.module$exports$Blockly$utils$xml.createTextNode)(t.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(T),u.push(d)),t.module$exports$Blockly$blocks.Blocks.procedures_ifreturn&&(d=(0,t.module$exports$Blockly$utils$xml.createElement)("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),u.push(d)),u.length&&u[u.length-1].setAttribute("gap",24),n=(0,t.module$exports$Blockly$Procedures.allProcedures)(n),s(n[0],"procedures_callnoreturn"),s(n[1],"procedures_callreturn"),u};var pT=function(n){for(var s=[],u=n.getBlocksByType("procedures_mutatorarg",!1),d=0,T;T=u[d];d++)s.push(T.getFieldValue("NAME"));u=(0,t.module$exports$Blockly$utils$xml.createElement)("xml"),d=(0,t.module$exports$Blockly$utils$xml.createElement)("block"),d.setAttribute("type","procedures_mutatorarg"),T=(0,t.module$exports$Blockly$utils$xml.createElement)("field"),T.setAttribute("name","NAME"),s=(0,t.module$exports$Blockly$Variables.generateUniqueNameFromOptions)(t.module$exports$Blockly$Procedures.DEFAULT_ARG,s),s=(0,t.module$exports$Blockly$utils$xml.createTextNode)(s),T.appendChild(s),d.appendChild(T),u.appendChild(d),n.updateToolbox(u)};t.module$exports$Blockly$Procedures.mutatorOpenListener=function(n){if(n.type===B.BUBBLE_OPEN&&n.bubbleType==="mutator"&&n.isOpen){n=vt.Workspace.getById(n.workspaceId).getBlockById(n.blockId);var s=n.type;(s==="procedures_defnoreturn"||s==="procedures_defreturn")&&(n=n.mutator.getWorkspace(),pT(n),n.addChangeListener(g))}};var g=function(n){(n.type===B.CREATE||n.type===B.DELETE||n.type===B.CHANGE)&&(n=vt.Workspace.getById(n.workspaceId),pT(n))};t.module$exports$Blockly$Procedures.getCallers=function(n,s){var u=[];s=s.getAllBlocks(!1);for(var d=0;d<s.length;d++)if(s[d].getProcedureCall){var T=s[d].getProcedureCall();T&&t.module$exports$Blockly$Names.Names.equals(T,n)&&u.push(s[d])}return u},t.module$exports$Blockly$Procedures.mutateCallers=function(n){var s=(0,B.getRecordUndo)(),u=n.getProcedureDef()[0],d=n.mutationToDom(!0);n=(0,t.module$exports$Blockly$Procedures.getCallers)(u,n.workspace),u=0;for(var T;T=n[u];u++){var w=T.mutationToDom();w=w&&(0,t.module$exports$Blockly$Xml.domToText)(w),T.domToMutation(d);var N=T.mutationToDom();N=N&&(0,t.module$exports$Blockly$Xml.domToText)(N),w!==N&&((0,B.setRecordUndo)(!1),(0,B.fire)(new((0,B.get)(B.CHANGE))(T,"mutation",null,w,N)),(0,B.setRecordUndo)(s))}},t.module$exports$Blockly$Procedures.getDefinition=function(n,s){s=s.getAllBlocks(!1);for(var u=0;u<s.length;u++)if(s[u].getProcedureDef){var d=s[u].getProcedureDef();if(d&&t.module$exports$Blockly$Names.Names.equals(d[0],n))return s[u]}return null},t.module$exports$Blockly$Mutator={Mutator:function(n){t.module$exports$Blockly$Mutator.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=n}},(0,t.module$exports$Blockly$utils$object.inherits)(t.module$exports$Blockly$Mutator.Mutator,po.Icon),t.module$exports$Blockly$Mutator.Mutator.prototype.workspace_=null,t.module$exports$Blockly$Mutator.Mutator.prototype.workspaceWidth_=0,t.module$exports$Blockly$Mutator.Mutator.prototype.workspaceHeight_=0,t.module$exports$Blockly$Mutator.Mutator.prototype.setBlock=function(n){this.block_=n},t.module$exports$Blockly$Mutator.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.module$exports$Blockly$Mutator.Mutator.prototype.drawIcon_=function(n){(0,S.createSvgElement)(ce.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},n),(0,S.createSvgElement)(ce.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},n),(0,S.createSvgElement)(ce.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},n)},t.module$exports$Blockly$Mutator.Mutator.prototype.iconClick_=function(n){this.block_.isEditable()&&po.Icon.prototype.iconClick_.call(this,n)},t.module$exports$Blockly$Mutator.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=(0,S.createSvgElement)(ce.Svg.SVG,{x:Qe.Bubble.BORDER_WIDTH,y:Qe.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var n=(0,t.module$exports$Blockly$utils$xml.createElement)("xml"),s=0,u;u=this.quarkNames_[s];s++){var d=(0,t.module$exports$Blockly$utils$xml.createElement)("block");d.setAttribute("type",u),n.appendChild(d)}else n=null;return s=new mr.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides}),s.toolboxPosition=this.block_.RTL?at.Position.RIGHT:at.Position.LEFT,(u=!!n)&&(s.languageTree=(0,at.convertToolboxDefToJson)(n)),this.workspace_=new be.WorkspaceSvg(s),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(B.disableOrphans),n=u?this.workspace_.addFlyout(ce.Svg.G):null,s=this.workspace_.createDom("blocklyMutatorBackground"),n&&s.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(s),this.svgDialog_},t.module$exports$Blockly$Mutator.Mutator.prototype.updateEditable=function(){t.module$exports$Blockly$Mutator.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&(0,S.removeClass)(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&(0,S.addClass)(this.iconGroup_,"blocklyIconGroupReadonly")))},t.module$exports$Blockly$Mutator.Mutator.prototype.resizeBubble_=function(){var n=2*Qe.Bubble.BORDER_WIDTH,s=this.workspace_.getCanvas().getBBox(),u=s.width+s.x,d=s.height+3*n,T=this.workspace_.getFlyout();if(T){var w=T.getWorkspace().getMetricsManager().getScrollMetrics();d=Math.max(d,w.height+20),u+=T.getWidth()}this.block_.RTL&&(u=-s.x),u+=3*n,(Math.abs(this.workspaceWidth_-u)>n||Math.abs(this.workspaceHeight_-d)>n)&&(this.workspaceWidth_=u,this.workspaceHeight_=d,this.bubble_.setBubbleSize(u+n,d+n),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(n="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",n)),this.workspace_.resize()},t.module$exports$Blockly$Mutator.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},t.module$exports$Blockly$Mutator.Mutator.prototype.setVisible=function(n){if(n!==this.isVisible())if((0,B.fire)(new((0,B.get)(B.BUBBLE_OPEN))(this.block_,n,"mutator")),n){this.bubble_=new Qe.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var s=this.workspace_.options.languageTree;n=this.workspace_.getFlyout(),s&&(n.init(this.workspace_),n.show(s)),this.rootBlock_=this.block_.decompose(this.workspace_),s=this.rootBlock_.getDescendants(!1);for(var u=0,d=void 0;d=s[u];u++)d.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),n?(s=2*n.CORNER_RADIUS,n=this.rootBlock_.RTL?n.getWidth()+s:s):n=s=16,this.block_.RTL&&(n=-n),this.rootBlock_.moveBy(n,s),this.block_.saveConnections){var T=this,w=this.block_;w.saveConnections(this.rootBlock_),this.sourceListener_=function(){w.saveConnections(T.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateWorkspace_(),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.module$exports$Blockly$Mutator.Mutator.prototype.workspaceChanged_=function(n){n.isUiEvent||n.type===B.CHANGE&&n.element==="disabled"||n.type===B.CREATE||this.updateWorkspace_()},t.module$exports$Blockly$Mutator.Mutator.prototype.updateWorkspace_=function(){if(!this.workspace_.isDragging())for(var n=this.workspace_.getTopBlocks(!1),s=0,u=void 0;u=n[s];s++){var d=u.getRelativeToSurfaceXY();if(20>d.y&&u.moveBy(0,20-d.y),u.RTL){var T=-20,w=this.workspace_.getFlyout();w&&(T-=w.getWidth()),d.x>T&&u.moveBy(T-d.x,0)}else 20>d.x&&u.moveBy(20-d.x,0)}if(this.rootBlock_.workspace===this.workspace_){(0,B.setGroup)(!0);var N=this.block_;if(n=wr.BlockChange.getExtraBlockState_(N),s=N.rendered,N.rendered=!1,N.compose(this.rootBlock_),N.rendered=s,N.initSvg(),N.rendered&&N.render(),s=wr.BlockChange.getExtraBlockState_(N),n!==s){(0,B.fire)(new((0,B.get)(B.CHANGE))(N,"mutation",null,n,s));var J=(0,B.getGroup)();setTimeout(function(){(0,B.setGroup)(J),N.bumpNeighbours(),(0,B.setGroup)(!1)},t.module$exports$Blockly$internalConstants.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),(0,B.setGroup)(!1)}},t.module$exports$Blockly$Mutator.Mutator.prototype.dispose=function(){this.block_.mutator=null,po.Icon.prototype.dispose.call(this)},t.module$exports$Blockly$Mutator.Mutator.prototype.updateBlockStyle=function(){var n=this.workspace_;if(n&&n.getAllBlocks(!1)){for(var s=n.getAllBlocks(!1),u=0,d;d=s[u];u++)d.setStyle(d.getStyleName());if(n=n.getFlyout())for(n=n.workspace_.getAllBlocks(!1),s=0;u=n[s];s++)u.setStyle(u.getStyleName())}},t.module$exports$Blockly$Mutator.Mutator.reconnect=function(n,s,u){if(!n||!n.getSourceBlock().workspace)return!1;u=s.getInput(u).connection;var d=n.targetBlock();return d&&d!==s||u.targetConnection===n?!1:(u.isConnected()&&u.disconnect(),u.connect(n),!0)},t.module$exports$Blockly$Mutator.Mutator.findParentWs=function(n){var s=null;if(n&&n.options){var u=n.options.parentWorkspace;n.isFlyout?u&&u.options&&(s=u.options.parentWorkspace):u&&(s=u)}return s},t.Blockly={VERSION:"7.20211209.2"},t.Blockly.ALIGN_LEFT=t.module$exports$Blockly$Input.Align.LEFT,t.Blockly.ALIGN_CENTRE=t.module$exports$Blockly$Input.Align.CENTRE,t.Blockly.ALIGN_RIGHT=t.module$exports$Blockly$Input.Align.RIGHT,t.Blockly.INPUT_VALUE=t.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,t.Blockly.OUTPUT_VALUE=t.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE,t.Blockly.NEXT_STATEMENT=t.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,t.Blockly.PREVIOUS_STATEMENT=t.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT,t.Blockly.DUMMY_INPUT=t.module$exports$Blockly$inputTypes.inputTypes.DUMMY,t.Blockly.TOOLBOX_AT_TOP=at.Position.TOP,t.Blockly.TOOLBOX_AT_BOTTOM=at.Position.BOTTOM,t.Blockly.TOOLBOX_AT_LEFT=at.Position.LEFT,t.Blockly.TOOLBOX_AT_RIGHT=at.Position.RIGHT,t.Blockly.svgResize=t.module$exports$Blockly$common.svgResize;var y=function(n){(0,t.module$exports$Blockly$common.getMainWorkspace)().hideChaff(n)};t.Blockly.hideChaff=y,t.Blockly.getMainWorkspace=t.module$exports$Blockly$common.getMainWorkspace,t.Blockly.defineBlocksWithJsonArray=t.module$exports$Blockly$common.defineBlocksWithJsonArray,t.Blockly.setParentContainer=t.module$exports$Blockly$common.setParentContainer,Object.defineProperties(t.Blockly,{alert:{set:function(n){(0,l.warn)("Blockly.alert","December 2021","December 2022"),(0,Ao.setAlert)(n)},get:function(){return(0,l.warn)("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),Ao.alert}},confirm:{set:function(n){(0,l.warn)("Blockly.confirm","December 2021","December 2022"),(0,Ao.setConfirm)(n)},get:function(){return(0,l.warn)("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),Ao.confirm}},mainWorkspace:{set:function(n){(0,t.module$exports$Blockly$common.setMainWorkspace)(n)},get:function(){return(0,t.module$exports$Blockly$common.getMainWorkspace)()}},prompt:{set:function(n){(0,l.warn)("Blockly.prompt","December 2021","December 2022"),(0,Ao.setPrompt)(n)},get:function(){return(0,l.warn)("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),Ao.prompt}},selected:{get:function(){return(0,t.module$exports$Blockly$common.getSelected)()},set:function(n){(0,t.module$exports$Blockly$common.setSelected)(n)}},HSV_SATURATION:{get:function(){return Ht.colour.getHsvSaturation()},set:function(n){Ht.colour.setHsvSaturation(n)}},HSV_VALUE:{get:function(){return Ht.colour.getHsvValue()},set:function(n){Ht.colour.setHsvValue(n)}}}),t.Blockly.svgSize=it.svgSize;var C=function(n){(0,l.warn)("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),(0,be.resizeSvgContents)(n)};t.Blockly.resizeSvgContents=C;var O=function(n){(0,l.warn)("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),(0,ir.copy)(n)};t.Blockly.copy=O;var $=function(){return(0,l.warn)("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),(0,ir.paste)()};t.Blockly.paste=$;var V=function(n){(0,l.warn)("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),(0,ir.duplicate)(n)};t.Blockly.duplicate=V;var se=function(n){return(0,l.warn)("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),Ht.string.isNumber(n)};t.Blockly.isNumber=se;var ye=function(n){return(0,l.warn)("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),(0,Sn.hueToHex)(n)};t.Blockly.hueToHex=ye;var Pe=function(n,s,u,d){return(0,l.warn)("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),(0,A.bind)(n,s,u,d)};t.Blockly.bindEvent_=Pe;var st=function(n){return(0,l.warn)("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),(0,A.unbind)(n)};t.Blockly.unbindEvent_=st;var Nt=function(n,s,u,d,T,w){return(0,l.warn)("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),(0,A.conditionalBind)(n,s,u,d,T,w)};return t.Blockly.bindEventWithChecks_=Nt,t.Blockly.LINE_MODE_MULTIPLIER=t.module$exports$Blockly$internalConstants.LINE_MODE_MULTIPLIER,t.Blockly.PAGE_MODE_MULTIPLIER=t.module$exports$Blockly$internalConstants.PAGE_MODE_MULTIPLIER,t.Blockly.DRAG_RADIUS=t.module$exports$Blockly$internalConstants.DRAG_RADIUS,t.Blockly.FLYOUT_DRAG_RADIUS=t.module$exports$Blockly$internalConstants.FLYOUT_DRAG_RADIUS,t.Blockly.SNAP_RADIUS=t.module$exports$Blockly$internalConstants.SNAP_RADIUS,t.Blockly.CONNECTING_SNAP_RADIUS=t.module$exports$Blockly$internalConstants.SNAP_RADIUS,t.Blockly.CURRENT_CONNECTION_PREFERENCE=t.module$exports$Blockly$internalConstants.CURRENT_CONNECTION_PREFERENCE,t.Blockly.BUMP_DELAY=t.module$exports$Blockly$internalConstants.BUMP_DELAY,t.Blockly.BUMP_RANDOMNESS=t.module$exports$Blockly$internalConstants.BUMP_RANDOMNESS,t.Blockly.COLLAPSE_CHARS=t.module$exports$Blockly$internalConstants.COLLAPSE_CHARS,t.Blockly.LONGPRESS=t.module$exports$Blockly$internalConstants.LONGPRESS,t.Blockly.SOUND_LIMIT=t.module$exports$Blockly$internalConstants.SOUND_LIMIT,t.Blockly.DRAG_STACK=t.module$exports$Blockly$internalConstants.DRAG_STACK,t.Blockly.SPRITE=t.module$exports$Blockly$internalConstants.SPRITE,t.Blockly.DRAG_NONE=t.module$exports$Blockly$internalConstants.DRAG_NONE,t.Blockly.DRAG_STICKY=t.module$exports$Blockly$internalConstants.DRAG_STICKY,t.Blockly.DRAG_BEGIN=t.module$exports$Blockly$internalConstants.DRAG_BEGIN,t.Blockly.DRAG_FREE=t.module$exports$Blockly$internalConstants.DRAG_FREE,t.Blockly.OPPOSITE_TYPE=t.module$exports$Blockly$internalConstants.OPPOSITE_TYPE,t.Blockly.RENAME_VARIABLE_ID=t.module$exports$Blockly$internalConstants.RENAME_VARIABLE_ID,t.Blockly.DELETE_VARIABLE_ID=t.module$exports$Blockly$internalConstants.DELETE_VARIABLE_ID,t.Blockly.COLLAPSED_INPUT_NAME=pl.COLLAPSED_INPUT_NAME,t.Blockly.COLLAPSED_FIELD_NAME=pl.COLLAPSED_FIELD_NAME,t.Blockly.VARIABLE_CATEGORY_NAME=t.module$exports$Blockly$Variables.CATEGORY_NAME,t.Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME=Ba.CATEGORY_NAME,t.Blockly.PROCEDURE_CATEGORY_NAME=t.module$exports$Blockly$Procedures.CATEGORY_NAME,t.Blockly.ASTNode=Be.ASTNode,t.Blockly.BasicCursor=Jo.BasicCursor,t.Blockly.Block=Je.Block,t.Blockly.BlocklyOptions=hC.BlocklyOptions,t.Blockly.BlockDragger=rn.BlockDragger,t.Blockly.BlockDragSurfaceSvg=cn.BlockDragSurfaceSvg,t.Blockly.BlockSvg=Xe.BlockSvg,t.Blockly.Blocks=t.module$exports$Blockly$blocks.Blocks,t.Blockly.Bubble=Qe.Bubble,t.Blockly.BubbleDragger=Wi.BubbleDragger,t.Blockly.CollapsibleToolboxCategory=Xn.CollapsibleToolboxCategory,t.Blockly.Comment=Po.Comment,t.Blockly.ComponentManager=un.ComponentManager,t.Blockly.Connection=ft.Connection,t.Blockly.ConnectionType=t.module$exports$Blockly$ConnectionType.ConnectionType,t.Blockly.ConnectionChecker=yr.ConnectionChecker,t.Blockly.ConnectionDB=Tr.ConnectionDB,t.Blockly.ContextMenu=t.module$exports$Blockly$ContextMenu,t.Blockly.ContextMenuItems=Un,t.Blockly.ContextMenuRegistry=on.ContextMenuRegistry,t.Blockly.Css=a,t.Blockly.Cursor=Ji.Cursor,t.Blockly.DeleteArea=Wl.DeleteArea,t.Blockly.DragTarget=Vl.DragTarget,t.Blockly.DropDownDiv=Ie.DropDownDiv,t.Blockly.Events=t.module$exports$Blockly$Events,t.Blockly.Extensions=t.module$exports$Blockly$Extensions,t.Blockly.Field=Ze.Field,t.Blockly.FieldAngle=Et.FieldAngle,t.Blockly.FieldCheckbox=t.module$exports$Blockly$FieldCheckbox.FieldCheckbox,t.Blockly.FieldColour=Ot.FieldColour,t.Blockly.FieldDropdown=t.module$exports$Blockly$FieldDropdown.FieldDropdown,t.Blockly.FieldImage=t.module$exports$Blockly$FieldImage.FieldImage,t.Blockly.FieldLabel=t.module$exports$Blockly$FieldLabel.FieldLabel,t.Blockly.FieldLabelSerializable=co.FieldLabelSerializable,t.Blockly.FieldMultilineInput=sn.FieldMultilineInput,t.Blockly.FieldNumber=mt.FieldNumber,t.Blockly.FieldTextInput=t.module$exports$Blockly$FieldTextInput.FieldTextInput,t.Blockly.FieldVariable=Cn.FieldVariable,t.Blockly.Flyout=Bt.Flyout,t.Blockly.FlyoutButton=Zo.FlyoutButton,t.Blockly.FlyoutMetricsManager=zl.FlyoutMetricsManager,t.Blockly.Generator=t.module$exports$Blockly$Generator.Generator,t.Blockly.Gesture=$t.Gesture,t.Blockly.Grid=Se.Grid,t.Blockly.HorizontalFlyout=oi.HorizontalFlyout,t.Blockly.IASTNodeLocation=hg.IASTNodeLocation,t.Blockly.IASTNodeLocationSvg=Uv.IASTNodeLocationSvg,t.Blockly.IASTNodeLocationWithBlock=fu.IASTNodeLocationWithBlock,t.Blockly.IAutoHideable=xg.IAutoHideable,t.Blockly.IBlockDragger=fg.IBlockDragger,t.Blockly.IBoundedElement=Jv.IBoundedElement,t.Blockly.IBubble=Vv.IBubble,t.Blockly.ICollapsibleToolboxItem=kd.ICollapsibleToolboxItem,t.Blockly.IComponent=oT.IComponent,t.Blockly.IConnectionChecker=gc.IConnectionChecker,t.Blockly.IContextMenu=yd.IContextMenu,t.Blockly.Icon=po.Icon,t.Blockly.ICopyable=Yv.ICopyable,t.Blockly.IDeletable=Hv.IDeletable,t.Blockly.IDeleteArea=Eg.IDeleteArea,t.Blockly.IDragTarget=rT.IDragTarget,t.Blockly.IDraggable=Gv.IDraggable,t.Blockly.IFlyout=iT.IFlyout,t.Blockly.IKeyboardAccessible=hs.IKeyboardAccessible,t.Blockly.IMetricsManager=qv.IMetricsManager,t.Blockly.IMovable=Kv.IMovable,t.Blockly.Input=t.module$exports$Blockly$Input.Input,t.Blockly.InsertionMarkerManager=tn.InsertionMarkerManager,t.Blockly.IPositionable=cC.IPositionable,t.Blockly.IRegistrable=_a.IRegistrable,t.Blockly.IRegistrableField=hT.IRegistrableField,t.Blockly.ISelectable=vg.ISelectable,t.Blockly.ISelectableToolboxItem=bd.ISelectableToolboxItem,t.Blockly.IStyleable=Sg.IStyleable,t.Blockly.IToolbox=sT.IToolbox,t.Blockly.IToolboxItem=Cd.IToolboxItem,t.Blockly.Marker=vr.Marker,t.Blockly.MarkerManager=Pr.MarkerManager,t.Blockly.Menu=Vt.Menu,t.Blockly.MenuItem=Xo.MenuItem,t.Blockly.MetricsManager=Mr.MetricsManager,t.Blockly.Mutator=t.module$exports$Blockly$Mutator.Mutator,t.Blockly.Msg=t.module$exports$Blockly$Msg.Msg,t.Blockly.Names=t.module$exports$Blockly$Names.Names,t.Blockly.Options=mr.Options,t.Blockly.Procedures=t.module$exports$Blockly$Procedures,t.Blockly.RenderedConnection=Ft.RenderedConnection,t.Blockly.Scrollbar=_t.Scrollbar,t.Blockly.ScrollbarPair=$r.ScrollbarPair,t.Blockly.ShortcutItems=Wr,t.Blockly.ShortcutRegistry=Ct.ShortcutRegistry,t.Blockly.TabNavigateCursor=ba.TabNavigateCursor,t.Blockly.Theme=An.Theme,t.Blockly.Themes=zh,t.Blockly.ThemeManager=Ul.ThemeManager,t.Blockly.Toolbox=It.Toolbox,t.Blockly.ToolboxCategory=Wt.ToolboxCategory,t.Blockly.ToolboxItem=Ti.ToolboxItem,t.Blockly.ToolboxSeparator=ni.ToolboxSeparator,t.Blockly.Tooltip=I,t.Blockly.Touch=m,t.Blockly.TouchGesture=io.TouchGesture,t.Blockly.Trashcan=Qt.Trashcan,t.Blockly.VariableMap=Do.VariableMap,t.Blockly.VariableModel=ya.VariableModel,t.Blockly.Variables=t.module$exports$Blockly$Variables,t.Blockly.VariablesDynamic=Ba,t.Blockly.VerticalFlyout=Gr.VerticalFlyout,t.Blockly.Warning=Qo.Warning,t.Blockly.WidgetDiv=Q,t.Blockly.Workspace=vt.Workspace,t.Blockly.WorkspaceAudio=Hl.WorkspaceAudio,t.Blockly.WorkspaceComment=pn.WorkspaceComment,t.Blockly.WorkspaceCommentSvg=kt.WorkspaceCommentSvg,t.Blockly.WorkspaceDragSurfaceSvg=Ms.WorkspaceDragSurfaceSvg,t.Blockly.WorkspaceDragger=Is.WorkspaceDragger,t.Blockly.WorkspaceSvg=be.WorkspaceSvg,t.Blockly.Xml=t.module$exports$Blockly$Xml,t.Blockly.ZoomControls=fo.ZoomControls,t.Blockly.blockAnimations=gr,t.Blockly.blockRendering=hn,t.Blockly.browserEvents=A,t.Blockly.bumpObjects=Ce,t.Blockly.clipboard=ir,t.Blockly.common=t.module$exports$Blockly$common,t.Blockly.connectionTypes=t.module$exports$Blockly$ConnectionType.ConnectionType,t.Blockly.constants=pl,t.Blockly.dialog=Ao,t.Blockly.fieldRegistry=ei,t.Blockly.geras=Yi,t.Blockly.inject=Qv.inject,t.Blockly.inputTypes=t.module$exports$Blockly$inputTypes.inputTypes,t.Blockly.minimalist=Jl,t.Blockly.registry=ue,t.Blockly.serialization={blocks:jo,exceptions:so,priorities:$l,registry:ig,variables:Aa,workspaces:fl,ISerializer:ma.ISerializer},t.Blockly.thrasos=Wh,t.Blockly.uiPosition=Ro,t.Blockly.utils=Ht,t.Blockly.zelos=Er,"Blockly"in t.module$exports$Blockly$utils$global.globalThis||(t.module$exports$Blockly$utils$global.globalThis.Blockly={Msg:t.module$exports$Blockly$Msg.Msg}),t.Blockly.internal_=t,t.Blockly})})(eC);(function(r,e){(function(t,o){r.exports=o(eC.exports)})(vs,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(ZG);(function(r,e){(function(t,o){r.exports=o(ZG.exports)})(vs,function(t){return t.setLocale=function(o){Object.keys(o).forEach(function(i){t.Msg[i]=o[i]})},t})})(ZS);var e3={exports:{}};(function(r,e){(function(t,o){r.exports=o(ZS.exports)})(vs,function(o){var o={};return o.Msg={},o.Msg.ADD_COMMENT="Add Comment",o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",o.Msg.CHANGE_VALUE_TITLE="Change value:",o.Msg.CLEAN_UP="Clean up Blocks",o.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",o.Msg.COLLAPSE_ALL="Collapse Blocks",o.Msg.COLLAPSE_BLOCK="Collapse Block",o.Msg.COLOUR_BLEND_COLOUR1="colour 1",o.Msg.COLOUR_BLEND_COLOUR2="colour 2",o.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",o.Msg.COLOUR_BLEND_RATIO="ratio",o.Msg.COLOUR_BLEND_TITLE="blend",o.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",o.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",o.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",o.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",o.Msg.COLOUR_RANDOM_TITLE="random colour",o.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",o.Msg.COLOUR_RGB_BLUE="blue",o.Msg.COLOUR_RGB_GREEN="green",o.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",o.Msg.COLOUR_RGB_RED="red",o.Msg.COLOUR_RGB_TITLE="colour with",o.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",o.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",o.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",o.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",o.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",o.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",o.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",o.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",o.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",o.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",o.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",o.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",o.Msg.CONTROLS_IF_MSG_ELSE="else",o.Msg.CONTROLS_IF_MSG_ELSEIF="else if",o.Msg.CONTROLS_IF_MSG_IF="if",o.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",o.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",o.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",o.Msg.CONTROLS_REPEAT_INPUT_DO="do",o.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",o.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",o.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",o.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",o.Msg.DELETE_BLOCK="Delete Block",o.Msg.DELETE_VARIABLE="Delete the '%1' variable",o.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",o.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",o.Msg.DIALOG_CANCEL="Cancel",o.Msg.DIALOG_OK="OK",o.Msg.DISABLE_BLOCK="Disable Block",o.Msg.DUPLICATE_BLOCK="Duplicate",o.Msg.DUPLICATE_COMMENT="Duplicate Comment",o.Msg.ENABLE_BLOCK="Enable Block",o.Msg.EXPAND_ALL="Expand Blocks",o.Msg.EXPAND_BLOCK="Expand Block",o.Msg.EXTERNAL_INPUTS="External Inputs",o.Msg.HELP="Help",o.Msg.INLINE_INPUTS="Inline Inputs",o.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",o.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",o.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",o.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",o.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",o.Msg.LISTS_GET_INDEX_FIRST="first",o.Msg.LISTS_GET_INDEX_FROM_END="# from end",o.Msg.LISTS_GET_INDEX_FROM_START="#",o.Msg.LISTS_GET_INDEX_GET="get",o.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",o.Msg.LISTS_GET_INDEX_LAST="last",o.Msg.LISTS_GET_INDEX_RANDOM="random",o.Msg.LISTS_GET_INDEX_REMOVE="remove",o.Msg.LISTS_GET_INDEX_TAIL="",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",o.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",o.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",o.Msg.LISTS_GET_SUBLIST_END_LAST="to last",o.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",o.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",o.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",o.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",o.Msg.LISTS_GET_SUBLIST_TAIL="",o.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",o.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",o.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",o.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",o.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",o.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",o.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",o.Msg.LISTS_INLIST="in list",o.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",o.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",o.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",o.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",o.Msg.LISTS_LENGTH_TITLE="length of %1",o.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",o.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",o.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",o.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",o.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",o.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",o.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",o.Msg.LISTS_SET_INDEX_INPUT_TO="as",o.Msg.LISTS_SET_INDEX_INSERT="insert at",o.Msg.LISTS_SET_INDEX_SET="set",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",o.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",o.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",o.Msg.LISTS_SORT_ORDER_DESCENDING="descending",o.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",o.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",o.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",o.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",o.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",o.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",o.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",o.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",o.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",o.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",o.Msg.LOGIC_BOOLEAN_FALSE="false",o.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",o.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",o.Msg.LOGIC_BOOLEAN_TRUE="true",o.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",o.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",o.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",o.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",o.Msg.LOGIC_NEGATE_TITLE="not %1",o.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",o.Msg.LOGIC_NULL="null",o.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",o.Msg.LOGIC_NULL_TOOLTIP="Returns null.",o.Msg.LOGIC_OPERATION_AND="and",o.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",o.Msg.LOGIC_OPERATION_OR="or",o.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",o.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",o.Msg.LOGIC_TERNARY_CONDITION="test",o.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",o.Msg.LOGIC_TERNARY_IF_FALSE="if false",o.Msg.LOGIC_TERNARY_IF_TRUE="if true",o.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",o.Msg.MATH_ADDITION_SYMBOL="+",o.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",o.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",o.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",o.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",o.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",o.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",o.Msg.MATH_CHANGE_TITLE="change %1 by %2",o.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",o.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",o.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), or \u221E (infinity).",o.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",o.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",o.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",o.Msg.MATH_DIVISION_SYMBOL="\xF7",o.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",o.Msg.MATH_IS_EVEN="is even",o.Msg.MATH_IS_NEGATIVE="is negative",o.Msg.MATH_IS_ODD="is odd",o.Msg.MATH_IS_POSITIVE="is positive",o.Msg.MATH_IS_PRIME="is prime",o.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",o.Msg.MATH_IS_WHOLE="is whole",o.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",o.Msg.MATH_MODULO_TITLE="remainder of %1 \xF7 %2",o.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",o.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",o.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",o.Msg.MATH_NUMBER_TOOLTIP="A number.",o.Msg.MATH_ONLIST_HELPURL="",o.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",o.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",o.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",o.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",o.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",o.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",o.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",o.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",o.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",o.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",o.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",o.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",o.Msg.MATH_POWER_SYMBOL="^",o.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",o.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",o.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",o.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",o.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",o.Msg.MATH_ROUND_OPERATOR_ROUND="round",o.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",o.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",o.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",o.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",o.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",o.Msg.MATH_SINGLE_OP_ROOT="square root",o.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",o.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",o.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",o.Msg.MATH_SUBTRACTION_SYMBOL="-",o.Msg.MATH_TRIG_ACOS="acos",o.Msg.MATH_TRIG_ASIN="asin",o.Msg.MATH_TRIG_ATAN="atan",o.Msg.MATH_TRIG_COS="cos",o.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",o.Msg.MATH_TRIG_SIN="sin",o.Msg.MATH_TRIG_TAN="tan",o.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",o.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",o.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",o.Msg.NEW_NUMBER_VARIABLE="Create number variable...",o.Msg.NEW_STRING_VARIABLE="Create string variable...",o.Msg.NEW_VARIABLE="Create variable...",o.Msg.NEW_VARIABLE_TITLE="New variable name:",o.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",o.Msg.ORDINAL_NUMBER_SUFFIX="",o.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",o.Msg.PROCEDURES_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",o.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",o.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CREATE_DO="Create '%1'",o.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",o.Msg.PROCEDURES_DEFNORETURN_DO="",o.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",o.Msg.PROCEDURES_DEFNORETURN_TITLE="to",o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",o.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFRETURN_RETURN="return",o.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",o.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",o.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",o.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",o.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",o.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",o.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",o.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",o.Msg.REDO="Redo",o.Msg.REMOVE_COMMENT="Remove Comment",o.Msg.RENAME_VARIABLE="Rename variable...",o.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",o.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_APPEND_TITLE="to %1 append text %2",o.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",o.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",o.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",o.Msg.TEXT_CHARAT_FIRST="get first letter",o.Msg.TEXT_CHARAT_FROM_END="get letter # from end",o.Msg.TEXT_CHARAT_FROM_START="get letter #",o.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",o.Msg.TEXT_CHARAT_LAST="get last letter",o.Msg.TEXT_CHARAT_RANDOM="get random letter",o.Msg.TEXT_CHARAT_TAIL="",o.Msg.TEXT_CHARAT_TITLE="in text %1 %2",o.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",o.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",o.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",o.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",o.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",o.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",o.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",o.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",o.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",o.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",o.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",o.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",o.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",o.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",o.Msg.TEXT_GET_SUBSTRING_TAIL="",o.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",o.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",o.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",o.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",o.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",o.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",o.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",o.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",o.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",o.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",o.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",o.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",o.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_LENGTH_TITLE="length of %1",o.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",o.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",o.Msg.TEXT_PRINT_TITLE="print %1",o.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",o.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",o.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",o.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",o.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",o.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",o.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",o.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",o.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",o.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",o.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",o.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",o.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",o.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",o.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",o.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",o.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",o.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",o.Msg.TODAY="Today",o.Msg.UNDO="Undo",o.Msg.UNNAMED_KEY="unnamed",o.Msg.VARIABLES_DEFAULT_NAME="item",o.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",o.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",o.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.VARIABLES_SET="set %1 to %2",o.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",o.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",o.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",o.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",o.Msg.CONTROLS_FOREACH_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_FOR_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=o.Msg.CONTROLS_IF_MSG_ELSEIF,o.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=o.Msg.CONTROLS_IF_MSG_ELSE,o.Msg.CONTROLS_IF_IF_TITLE_IF=o.Msg.CONTROLS_IF_MSG_IF,o.Msg.CONTROLS_IF_MSG_THEN=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.LISTS_CREATE_WITH_ITEM_TITLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.LISTS_GET_INDEX_HELPURL=o.Msg.LISTS_INDEX_OF_HELPURL,o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.MATH_CHANGE_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.PROCEDURES_DEFRETURN_COMMENT=o.Msg.PROCEDURES_DEFNORETURN_COMMENT,o.Msg.PROCEDURES_DEFRETURN_DO=o.Msg.PROCEDURES_DEFNORETURN_DO,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_TITLE=o.Msg.PROCEDURES_DEFNORETURN_TITLE,o.Msg.TEXT_APPEND_VARIABLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.MATH_HUE="230",o.Msg.LOOPS_HUE="120",o.Msg.LISTS_HUE="260",o.Msg.LOGIC_HUE="210",o.Msg.VARIABLES_HUE="330",o.Msg.TEXTS_HUE="160",o.Msg.PROCEDURES_HUE="290",o.Msg.COLOUR_HUE="20",o.Msg.VARIABLES_DYNAMIC_HUE="310",o.Msg})})(e3);var t3={exports:{}},n3={exports:{}};(function(r,e){(function(t,o){r.exports=o(eC.exports)})(vs,function(t){const o=t.internal_;(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var i={customContextMenu:function(S){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(D={text:o.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},Q=this.getField("VAR").getText(),Q={text:o.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",Q),enabled:!0,callback:a(this)},S.unshift(D),S.unshift(Q));else{var D=this.getFieldValue("VAR"),H=this.workspace.getVariableById(D).type;if(this.type==="variables_get_dynamic"){D="variables_set_dynamic";var q=o.module$exports$Blockly$Msg.Msg.VARIABLES_GET_CREATE_SET}else D="variables_get_dynamic",q=o.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET;var Q={enabled:0<this.workspace.remainingCapacity()},de=this.getField("VAR").getText();Q.text=q.replace("%1",de),q=(0,o.module$exports$Blockly$utils$xml.createElement)("field"),q.setAttribute("name","VAR"),q.setAttribute("variabletype",H),q.appendChild((0,o.module$exports$Blockly$utils$xml.createTextNode)(de)),H=(0,o.module$exports$Blockly$utils$xml.createElement)("block"),H.setAttribute("type",D),H.appendChild(q),Q.callback=(0,o.module$exports$Blockly$ContextMenu.callbackFactory)(this,H),S.push(Q)}},onchange:function(S){S=this.getFieldValue("VAR"),S=(0,o.module$exports$Blockly$Variables.getVariable)(this.workspace,S),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(S.type):this.getInput("VALUE").connection.setCheck(S.type)}},l=function(S){return function(){var D=S.workspace,H=S.getField("VAR").getVariable();(0,o.module$exports$Blockly$Variables.renameVariable)(D,H)}},a=function(S){return function(){var D=S.workspace,H=S.getField("VAR").getVariable();D.deleteVariableById(H.getId()),D.refreshToolboxSelection()}};(0,o.module$exports$Blockly$Extensions.registerMixin)("contextMenu_variableDynamicSetterGetter",i),(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var c={customContextMenu:function(S){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(D={text:o.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,enabled:!0,callback:p(this)},q=this.getField("VAR").getText(),q={text:o.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",q),enabled:!0,callback:h(this)},S.unshift(D),S.unshift(q));else{if(this.type==="variables_get")var D="variables_set",H=o.module$exports$Blockly$Msg.Msg.VARIABLES_GET_CREATE_SET;else D="variables_get",H=o.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET;var q={enabled:0<this.workspace.remainingCapacity()},Q=this.getField("VAR").getText();q.text=H.replace("%1",Q),H=(0,o.module$exports$Blockly$utils$xml.createElement)("field"),H.setAttribute("name","VAR"),H.appendChild((0,o.module$exports$Blockly$utils$xml.createTextNode)(Q)),Q=(0,o.module$exports$Blockly$utils$xml.createElement)("block"),Q.setAttribute("type",D),Q.appendChild(H),q.callback=(0,o.module$exports$Blockly$ContextMenu.callbackFactory)(this,Q),S.push(q)}}},p=function(S){return function(){var D=S.workspace,H=S.getField("VAR").getVariable();(0,o.module$exports$Blockly$Variables.renameVariable)(D,H)}},h=function(S){return function(){var D=S.workspace,H=S.getField("VAR").getVariable();D.deleteVariableById(H.getId()),D.refreshToolboxSelection()}};(0,o.module$exports$Blockly$Extensions.registerMixin)("contextMenu_variableSetterGetter",c),(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xB6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),o.module$exports$Blockly$blocks.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation"),D=this.getInput("AT1").type===o.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return S.setAttribute("at1",D),D=this.getInput("AT2").type===o.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,S.setAttribute("at2",D),S},domToMutation:function(S){var D=S.getAttribute("at1")==="true";S=S.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,S)},updateAt_:function(S,D){this.removeInput("AT"+S),this.removeInput("ORDINAL"+S,!0),D?(this.appendValueInput("AT"+S).setCheck("Number"),o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+S).appendField(o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+S),S===2&&o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL));var H=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(this["WHERE_OPTIONS_"+S],function(q){var Q=q==="FROM_START"||q==="FROM_END";if(Q!==D){var de=this.getSourceBlock();return de.updateAt_(S,Q),de.setFieldValue(q,"WHERE"+S),null}});this.getInput("AT"+S).appendField(H,"WHERE"+S),S===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},o.module$exports$Blockly$blocks.Blocks.text_changeCase={init:function(){var S=[[o.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[o.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[o.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S),"CASE"),this.setOutput(!0,"String"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_TOOLTIP)}},o.module$exports$Blockly$blocks.Blocks.text_trim={init:function(){var S=[[o.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[o.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[o.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S),"MODE"),this.setOutput(!0,"String"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.TEXT_TRIM_TOOLTIP)}},o.module$exports$Blockly$blocks.Blocks.text_print={init:function(){this.jsonInit({message0:o.module$exports$Blockly$Msg.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:o.module$exports$Blockly$Msg.Msg.TEXT_PRINT_TOOLTIP,helpUrl:o.module$exports$Blockly$Msg.Msg.TEXT_PRINT_HELPURL})}};var f={updateType_:function(S){this.outputConnection.setCheck(S==="NUMBER"?"Number":"String")},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("type",this.getFieldValue("TYPE")),S},domToMutation:function(S){this.updateType_(S.getAttribute("type"))}};o.module$exports$Blockly$blocks.Blocks.text_prompt_ext=Object.assign({},f,{init:function(){var S=[[o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var D=this;S=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S,function(H){D.updateType_(H)}),this.appendValueInput("TEXT").appendField(S,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return D.getFieldValue("TYPE")==="TEXT"?o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_TEXT:o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})}}),o.module$exports$Blockly$blocks.Blocks.text_prompt=Object.assign({},f,{init:function(){this.mixin(_);var S=[[o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],D=this;this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),S=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S,function(H){D.updateType_(H)}),this.appendDummyInput().appendField(S,"TYPE").appendField(this.newQuote_(!0)).appendField(new o.module$exports$Blockly$FieldTextInput.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return D.getFieldValue("TYPE")==="TEXT"?o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_TEXT:o.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})}}),o.module$exports$Blockly$blocks.Blocks.text_count={init:function(){this.jsonInit({message0:o.module$exports$Blockly$Msg.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:o.module$exports$Blockly$Msg.Msg.TEXT_COUNT_TOOLTIP,helpUrl:o.module$exports$Blockly$Msg.Msg.TEXT_COUNT_HELPURL})}},o.module$exports$Blockly$blocks.Blocks.text_replace={init:function(){this.jsonInit({message0:o.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:o.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_HELPURL})}},o.module$exports$Blockly$blocks.Blocks.text_reverse={init:function(){this.jsonInit({message0:o.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:o.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_HELPURL})}};var _={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(S){for(var D=0,H;H=this.inputList[D];D++)for(var q=0,Q;Q=H.fieldRow[q];q++)if(S===Q.name){H.insertFieldAt(q,this.newQuote_(!0)),H.insertFieldAt(q+2,this.newQuote_(!1));return}console.warn('field named "'+S+'" not found in '+this.toDevString())},newQuote_:function(S){return S=this.RTL?!S:S,new o.module$exports$Blockly$FieldImage.FieldImage(S?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,S?"\u201C":"\u201D")}},m=function(){this.mixin(_),this.quoteField_("TEXT")},v={mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("items",this.itemCount_),S},domToMutation:function(S){this.itemCount_=parseInt(S.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(S){this.itemCount_=S.itemCount,this.updateShape_()},decompose:function(S){var D=S.newBlock("text_create_join_container");D.initSvg();for(var H=D.getInput("STACK").connection,q=0;q<this.itemCount_;q++){var Q=S.newBlock("text_create_join_item");Q.initSvg(),H.connect(Q.previousConnection),H=Q.nextConnection}return D},compose:function(S){var D=S.getInputTargetBlock("STACK");for(S=[];D&&!D.isInsertionMarker();)S.push(D.valueConnection_),D=D.nextConnection&&D.nextConnection.targetBlock();for(D=0;D<this.itemCount_;D++){var H=this.getInput("ADD"+D).connection.targetConnection;H&&S.indexOf(H)===-1&&H.disconnect()}for(this.itemCount_=S.length,this.updateShape_(),D=0;D<this.itemCount_;D++)o.module$exports$Blockly$Mutator.Mutator.reconnect(S[D],this,"ADD"+D)},saveConnections:function(S){S=S.getInputTargetBlock("STACK");for(var D=0;S;){var H=this.getInput("ADD"+D);S.valueConnection_=H&&H.connection.targetConnection,S=S.nextConnection&&S.nextConnection.targetBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var S=0;S<this.itemCount_;S++)if(!this.getInput("ADD"+S)){var D=this.appendValueInput("ADD"+S).setAlign(o.module$exports$Blockly$Input.Align.RIGHT);S===0&&D.appendField(o.module$exports$Blockly$Msg.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(S=this.itemCount_;this.getInput("ADD"+S);S++)this.removeInput("ADD"+S)}},x=function(){this.mixin(_),this.itemCount_=2,this.updateShape_(),this.setMutator(new o.module$exports$Blockly$Mutator.Mutator(["text_create_join_item"]))};(0,o.module$exports$Blockly$Extensions.register)("text_append_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var b=function(){var S=this;this.setTooltip(function(){return o.module$exports$Blockly$Msg.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",S.workspace.options.oneBasedIndex?"0":"-1")})},A={mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("at",!!this.isAt_),S},domToMutation:function(S){S=S.getAttribute("at")!=="false",this.updateAt_(S)},updateAt_:function(S){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),S&&(this.appendValueInput("AT").setCheck("Number"),o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)),o.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TAIL)),this.isAt_=S}},k=function(){this.getField("WHERE").setValidator(function(D){D=D==="FROM_START"||D==="FROM_END",D!==this.isAt_&&this.getSourceBlock().updateAt_(D)}),this.updateAt_(!0);var S=this;this.setTooltip(function(){var D=S.getFieldValue("WHERE"),H=o.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TOOLTIP;return(D==="FROM_START"||D==="FROM_END")&&(D=D==="FROM_START"?o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP:o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(H+="  "+D.replace("%1",S.workspace.options.oneBasedIndex?"#1":"#0")),H})};(0,o.module$exports$Blockly$Extensions.register)("text_indexOf_tooltip",b),(0,o.module$exports$Blockly$Extensions.register)("text_quotes",m),(0,o.module$exports$Blockly$Extensions.registerMutator)("text_join_mutator",v,x),(0,o.module$exports$Blockly$Extensions.registerMutator)("text_charAt_mutator",A,k);var E={setStatements_:function(S){this.hasStatements_!==S&&(S?(this.appendStatementInput("STACK").appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=S)},updateParams_:function(){var S="";this.arguments_.length&&(S=o.module$exports$Blockly$Msg.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),(0,o.module$exports$Blockly$Events.disable)();try{this.setFieldValue(S,"PARAMS")}finally{(0,o.module$exports$Blockly$Events.enable)()}},mutationToDom:function(S){var D=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");S&&D.setAttribute("name",this.getFieldValue("NAME"));for(var H=0;H<this.argumentVarModels_.length;H++){var q=(0,o.module$exports$Blockly$utils$xml.createElement)("arg"),Q=this.argumentVarModels_[H];q.setAttribute("name",Q.name),q.setAttribute("varid",Q.getId()),S&&this.paramIds_&&q.setAttribute("paramId",this.paramIds_[H]),D.appendChild(q)}return this.hasStatements_||D.setAttribute("statements","false"),D},domToMutation:function(S){this.arguments_=[],this.argumentVarModels_=[];for(var D=0,H;H=S.childNodes[D];D++)if(H.nodeName.toLowerCase()==="arg"){var q=H.getAttribute("name");H=H.getAttribute("varid")||H.getAttribute("varId"),this.arguments_.push(q),H=(0,o.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,H,q,""),H!==null?this.argumentVarModels_.push(H):console.log("Failed to create a variable with name "+q+", ignoring.")}this.updateParams_(),(0,o.module$exports$Blockly$Procedures.mutateCallers)(this),this.setStatements_(S.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;var S=Object.create(null);if(this.argumentVarModels_.length){S.params=[];for(var D=0;D<this.argumentVarModels_.length;D++)S.params.push({name:this.argumentVarModels_[D].name,id:this.argumentVarModels_[D].getId()})}return this.hasStatements_||(S.hasStatements=!1),S},loadExtraState:function(S){if(this.arguments_=[],this.argumentVarModels_=[],S.params)for(var D=0;D<S.params.length;D++){var H=S.params[D];H=(0,o.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,H.id,H.name,""),this.arguments_.push(H.name),this.argumentVarModels_.push(H)}this.updateParams_(),(0,o.module$exports$Blockly$Procedures.mutateCallers)(this),this.setStatements_(S.hasStatements!==!1)},decompose:function(S){var D=(0,o.module$exports$Blockly$utils$xml.createElement)("block");D.setAttribute("type","procedures_mutatorcontainer");var H=(0,o.module$exports$Blockly$utils$xml.createElement)("statement");H.setAttribute("name","STACK"),D.appendChild(H);for(var q=0;q<this.arguments_.length;q++){var Q=(0,o.module$exports$Blockly$utils$xml.createElement)("block");Q.setAttribute("type","procedures_mutatorarg");var de=(0,o.module$exports$Blockly$utils$xml.createElement)("field");de.setAttribute("name","NAME");var je=(0,o.module$exports$Blockly$utils$xml.createTextNode)(this.arguments_[q]);de.appendChild(je),Q.appendChild(de),de=(0,o.module$exports$Blockly$utils$xml.createElement)("next"),Q.appendChild(de),H.appendChild(Q),H=de}return S=(0,o.module$exports$Blockly$Xml.domToBlock)(D,S),this.type==="procedures_defreturn"?S.setFieldValue(this.hasStatements_,"STATEMENTS"):S.removeInput("STATEMENT_INPUT"),(0,o.module$exports$Blockly$Procedures.mutateCallers)(this),S},compose:function(S){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var D=S.getInputTargetBlock("STACK");D&&!D.isInsertionMarker();){var H=D.getFieldValue("NAME");this.arguments_.push(H),H=this.workspace.getVariable(H,""),this.argumentVarModels_.push(H),this.paramIds_.push(D.id),D=D.nextConnection&&D.nextConnection.targetBlock()}this.updateParams_(),(0,o.module$exports$Blockly$Procedures.mutateCallers)(this),S=S.getFieldValue("STATEMENTS"),S!==null&&(S=S==="TRUE",this.hasStatements_!==S)&&(S?(this.setStatements_(!0),o.module$exports$Blockly$Mutator.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(S=this.getInput("STACK").connection,(this.statementConnection_=S.targetConnection)&&(S=S.targetBlock(),S.unplug(),S.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(S,D){var H=this.workspace.getVariableById(S);if(H.type===""){H=H.name,D=this.workspace.getVariableById(D);for(var q=!1,Q=0;Q<this.argumentVarModels_.length;Q++)this.argumentVarModels_[Q].getId()===S&&(this.arguments_[Q]=D.name,this.argumentVarModels_[Q]=D,q=!0);q&&(this.displayRenamedVar_(H,D.name),(0,o.module$exports$Blockly$Procedures.mutateCallers)(this))}},updateVarName:function(S){for(var D=S.name,H=!1,q,Q=0;Q<this.argumentVarModels_.length;Q++)this.argumentVarModels_[Q].getId()===S.getId()&&(q=this.arguments_[Q],this.arguments_[Q]=D,H=!0);H&&(this.displayRenamedVar_(q,D),(0,o.module$exports$Blockly$Procedures.mutateCallers)(this))},displayRenamedVar_:function(S,D){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var H=this.mutator.workspace_.getAllBlocks(!1),q=0,Q;Q=H[q];q++)Q.type==="procedures_mutatorarg"&&o.module$exports$Blockly$Names.Names.equals(S,Q.getFieldValue("NAME"))&&Q.setFieldValue(D,"NAME")},customContextMenu:function(S){if(!this.isInFlyout){var D={enabled:!0},H=this.getFieldValue("NAME");D.text=o.module$exports$Blockly$Msg.Msg.PROCEDURES_CREATE_DO.replace("%1",H);var q=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");for(q.setAttribute("name",H),H=0;H<this.arguments_.length;H++){var Q=(0,o.module$exports$Blockly$utils$xml.createElement)("arg");Q.setAttribute("name",this.arguments_[H]),q.appendChild(Q)}if(H=(0,o.module$exports$Blockly$utils$xml.createElement)("block"),H.setAttribute("type",this.callType_),H.appendChild(q),D.callback=(0,o.module$exports$Blockly$ContextMenu.callbackFactory)(this,H),S.push(D),!this.isCollapsed())for(D=0;D<this.argumentVarModels_.length;D++)q={enabled:!0},H=this.argumentVarModels_[D],q.text=o.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET.replace("%1",H.name),H=(0,o.module$exports$Blockly$Variables.generateVariableFieldDom)(H),Q=(0,o.module$exports$Blockly$utils$xml.createElement)("block"),Q.setAttribute("type","variables_get"),Q.appendChild(H),q.callback=(0,o.module$exports$Blockly$ContextMenu.callbackFactory)(this,Q),S.push(q)}},callType_:"procedures_callnoreturn"};o.module$exports$Blockly$blocks.Blocks.procedures_defnoreturn=Object.assign({},E,{init:function(){var S=(0,o.module$exports$Blockly$Procedures.findLegalName)("",this);S=new o.module$exports$Blockly$FieldTextInput.FieldTextInput(S,o.module$exports$Blockly$Procedures.rename),S.setSpellcheck(!1),this.appendDummyInput().appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(S,"NAME").appendField("","PARAMS"),this.setMutator(new o.module$exports$Blockly$Mutator.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]}}),o.module$exports$Blockly$blocks.Blocks.procedures_defreturn=Object.assign({},E,{init:function(){var S=(0,o.module$exports$Blockly$Procedures.findLegalName)("",this);S=new o.module$exports$Blockly$FieldTextInput.FieldTextInput(S,o.module$exports$Blockly$Procedures.rename),S.setSpellcheck(!1),this.appendDummyInput().appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(S,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(o.module$exports$Blockly$Input.Align.RIGHT).appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new o.module$exports$Blockly$Mutator.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]}}),o.module$exports$Blockly$blocks.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new o.module$exports$Blockly$FieldCheckbox.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},o.module$exports$Blockly$blocks.Blocks.procedures_mutatorarg={init:function(){var S=new o.module$exports$Blockly$FieldTextInput.FieldTextInput(o.module$exports$Blockly$Procedures.DEFAULT_ARG,this.validator_);S.oldShowEditorFn_=S.showEditor_,S.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(S,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,S.onFinishEditing_=this.deleteIntermediateVars_,S.createdVariables_=[],S.onFinishEditing_("x")},validator_:function(S){var D=this.getSourceBlock(),H=o.module$exports$Blockly$Mutator.Mutator.findParentWs(D.workspace);if(S=S.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!S)return null;for(var q=(D.workspace.targetWorkspace||D.workspace).getAllBlocks(!1),Q=S.toLowerCase(),de=0;de<q.length;de++)if(q[de].id!==this.getSourceBlock().id){var je=q[de].getFieldValue("NAME");if(je&&je.toLowerCase()===Q)return null}return D.isInFlyout||((D=H.getVariable(S,""))&&D.name!==S&&H.renameVariableById(D.getId(),S),D||(D=H.createVariable(S,""))&&this.createdVariables_&&this.createdVariables_.push(D)),S},deleteIntermediateVars_:function(S){var D=o.module$exports$Blockly$Mutator.Mutator.findParentWs(this.getSourceBlock().workspace);if(D)for(var H=0;H<this.createdVariables_.length;H++){var q=this.createdVariables_[H];q.name!==S&&D.deleteVariableById(q.getId())}}};var M={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(S,D){o.module$exports$Blockly$Names.Names.equals(S,this.getProcedureCall())&&(this.setFieldValue(D,"NAME"),this.setTooltip((this.outputConnection?o.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLRETURN_TOOLTIP:o.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",D)))},setProcedureParameters_:function(S,D){var H=(0,o.module$exports$Blockly$Procedures.getDefinition)(this.getProcedureCall(),this.workspace),q=H&&H.mutator&&H.mutator.isVisible();if(q||(this.quarkConnections_={},this.quarkIds_=null),D)if(S.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=D;else{if(D.length!==S.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),H=this.rendered,this.rendered=!1;for(var Q=0;Q<this.arguments_.length;Q++){var de=this.getInput("ARG"+Q);de&&(de=de.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Q]]=de,q&&de&&D.indexOf(this.quarkIds_[Q])===-1&&(de.disconnect(),de.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(S),this.argumentVarModels_=[],S=0;S<this.arguments_.length;S++)q=(0,o.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,null,this.arguments_[S],""),this.argumentVarModels_.push(q);if(this.updateShape_(),this.quarkIds_=D)for(D=0;D<this.arguments_.length;D++)S=this.quarkIds_[D],S in this.quarkConnections_&&(o.module$exports$Blockly$Mutator.Mutator.reconnect(this.quarkConnections_[S],this,"ARG"+D)||delete this.quarkConnections_[S]);(this.rendered=H)&&this.render()}},updateShape_:function(){for(var S=0;S<this.arguments_.length;S++){var D=this.getField("ARGNAME"+S);if(D){(0,o.module$exports$Blockly$Events.disable)();try{D.setValue(this.arguments_[S])}finally{(0,o.module$exports$Blockly$Events.enable)()}}else D=new o.module$exports$Blockly$FieldLabel.FieldLabel(this.arguments_[S]),this.appendValueInput("ARG"+S).setAlign(o.module$exports$Blockly$Input.Align.RIGHT).appendField(D,"ARGNAME"+S).init()}for(S=this.arguments_.length;this.getInput("ARG"+S);S++)this.removeInput("ARG"+S);(S=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(S.appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),S.init()):this.getField("WITH")&&S.removeField("WITH"))},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");S.setAttribute("name",this.getProcedureCall());for(var D=0;D<this.arguments_.length;D++){var H=(0,o.module$exports$Blockly$utils$xml.createElement)("arg");H.setAttribute("name",this.arguments_[D]),S.appendChild(H)}return S},domToMutation:function(S){var D=S.getAttribute("name");this.renameProcedure(this.getProcedureCall(),D),D=[];for(var H=[],q=0,Q;Q=S.childNodes[q];q++)Q.nodeName.toLowerCase()==="arg"&&(D.push(Q.getAttribute("name")),H.push(Q.getAttribute("paramId")));this.setProcedureParameters_(D,H)},saveExtraState:function(){var S=Object.create(null);return S.name=this.getProcedureCall(),this.arguments_.length&&(S.params=this.arguments_),S},loadExtraState:function(S){if(this.renameProcedure(this.getProcedureCall(),S.name),S=S.params){var D=[];D.length=S.length,D.fill(null),this.setProcedureParameters_(S,D)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(S){if(this.workspace&&!this.workspace.isFlyout&&S.recordUndo)if(S.type===o.module$exports$Blockly$Events.BLOCK_CREATE&&S.ids.indexOf(this.id)!==-1){var D=this.getProcedureCall();if(D=(0,o.module$exports$Blockly$Procedures.getDefinition)(D,this.workspace),!D||D.type===this.defType_&&JSON.stringify(D.getVars())===JSON.stringify(this.arguments_)||(D=null),!D){(0,o.module$exports$Blockly$Events.setGroup)(S.group),S=(0,o.module$exports$Blockly$utils$xml.createElement)("xml"),D=(0,o.module$exports$Blockly$utils$xml.createElement)("block"),D.setAttribute("type",this.defType_);var H=this.getRelativeToSurfaceXY(),q=H.y+2*o.module$exports$Blockly$internalConstants.SNAP_RADIUS;D.setAttribute("x",H.x+o.module$exports$Blockly$internalConstants.SNAP_RADIUS*(this.RTL?-1:1)),D.setAttribute("y",q),H=this.mutationToDom(),D.appendChild(H),H=(0,o.module$exports$Blockly$utils$xml.createElement)("field"),H.setAttribute("name","NAME"),q=this.getProcedureCall(),q||(q=(0,o.module$exports$Blockly$Procedures.findLegalName)("",this),this.renameProcedure("",q)),H.appendChild((0,o.module$exports$Blockly$utils$xml.createTextNode)(q)),D.appendChild(H),S.appendChild(D),(0,o.module$exports$Blockly$Xml.domToWorkspace)(S,this.workspace),(0,o.module$exports$Blockly$Events.setGroup)(!1)}}else S.type===o.module$exports$Blockly$Events.BLOCK_DELETE?(D=this.getProcedureCall(),(0,o.module$exports$Blockly$Procedures.getDefinition)(D,this.workspace)||((0,o.module$exports$Blockly$Events.setGroup)(S.group),this.dispose(!0),(0,o.module$exports$Blockly$Events.setGroup)(!1))):S.type===o.module$exports$Blockly$Events.CHANGE&&S.element==="disabled"&&(D=this.getProcedureCall(),(D=(0,o.module$exports$Blockly$Procedures.getDefinition)(D,this.workspace))&&D.id===S.blockId&&((D=(0,o.module$exports$Blockly$Events.getGroup)())&&console.log("Saw an existing group while responding to a definition change"),(0,o.module$exports$Blockly$Events.setGroup)(S.group),S.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),(0,o.module$exports$Blockly$Events.setGroup)(D)))},customContextMenu:function(S){if(this.workspace.isMovable()){var D={enabled:!0};D.text=o.module$exports$Blockly$Msg.Msg.PROCEDURES_HIGHLIGHT_DEF;var H=this.getProcedureCall(),q=this.workspace;D.callback=function(){var Q=(0,o.module$exports$Blockly$Procedures.getDefinition)(H,q);Q&&(q.centerOnBlock(Q.id),Q.select())},S.push(D)}}};o.module$exports$Blockly$blocks.Blocks.procedures_callnoreturn=Object.assign({},M,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),o.module$exports$Blockly$blocks.Blocks.procedures_callreturn=Object.assign({},M,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),o.module$exports$Blockly$blocks.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("value",Number(this.hasReturnValue_)),S},domToMutation:function(S){this.hasReturnValue_=S.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(S){if(!this.workspace.isDragging||!this.workspace.isDragging()){S=!1;var D=this;do{if(this.FUNCTION_TYPES.indexOf(D.type)!==-1){S=!0;break}D=D.getSurroundParent()}while(D);S?(D.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):D.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(o.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(o.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03C0","PI"],["e","E"],["\u03C6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xBD)","SQRT1_2"],["\u221E","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var R={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};(0,o.module$exports$Blockly$Extensions.register)("math_op_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipForDropdown)("OP",R));var I={mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation"),D=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return S.setAttribute("divisor_input",D),S},domToMutation:function(S){S=S.getAttribute("divisor_input")==="true",this.updateShape_(S)},updateShape_:function(S){var D=this.getInput("DIVISOR");S?D||this.appendValueInput("DIVISOR").setCheck("Number"):D&&this.removeInput("DIVISOR")}},L=function(){this.getField("PROPERTY").setValidator(function(S){S=S==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(S)})};(0,o.module$exports$Blockly$Extensions.registerMutator)("math_is_divisibleby_mutator",I,L),(0,o.module$exports$Blockly$Extensions.register)("math_change_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var F={updateType_:function(S){S==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("op",this.getFieldValue("OP")),S},domToMutation:function(S){this.updateType_(S.getAttribute("op"))}},U=function(){this.getField("OP").setValidator(function(S){this.updateType_(S)}.bind(this))};(0,o.module$exports$Blockly$Extensions.registerMutator)("math_modes_of_list_mutator",F,U);var X={};(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var j={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};(0,o.module$exports$Blockly$Extensions.register)("controls_whileUntil_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipForDropdown)("MODE",j));var P={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};(0,o.module$exports$Blockly$Extensions.register)("controls_flow_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipForDropdown)("FLOW",P));var z={customContextMenu:function(S){if(!this.isInFlyout){var D=this.getField("VAR").getVariable(),H=D.name;if(!this.isCollapsed()&&H!==null){var q={enabled:!0};q.text=o.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET.replace("%1",H),D=(0,o.module$exports$Blockly$Variables.generateVariableFieldDom)(D),H=(0,o.module$exports$Blockly$utils$xml.createElement)("block"),H.setAttribute("type","variables_get"),H.appendChild(D),q.callback=(0,o.module$exports$Blockly$ContextMenu.callbackFactory)(this,H),S.push(q)}}}};(0,o.module$exports$Blockly$Extensions.registerMixin)("contextMenu_newGetVariableBlock",z),(0,o.module$exports$Blockly$Extensions.register)("controls_for_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),(0,o.module$exports$Blockly$Extensions.register)("controls_forEach_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),X.loopTypes=["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"];var K={getSurroundLoop:function(){var S=this;do{if(X.loopTypes.includes(S.type))return S;S=S.getSurroundParent()}while(S);return null},onchange:function(S){if(this.workspace.isDragging&&!this.workspace.isDragging()&&S.type===o.module$exports$Blockly$Events.BLOCK_MOVE){var D=this.getSurroundLoop(this);if(this.setWarningText(D?null:o.module$exports$Blockly$Msg.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var H=(0,o.module$exports$Blockly$Events.getGroup)();(0,o.module$exports$Blockly$Events.setGroup)(S.group),this.setEnabled(D),(0,o.module$exports$Blockly$Events.setGroup)(H)}}}};(0,o.module$exports$Blockly$Extensions.registerMixin)("controls_flow_in_loop_check",K),(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200F<","LT"],["\u200F\u2264","LTE"],["\u200F>","GT"],["\u200F\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var te={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};(0,o.module$exports$Blockly$Extensions.register)("logic_op_tooltip",(0,o.module$exports$Blockly$Extensions.buildTooltipForDropdown)("OP",te));var oe={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return this.elseifCount_&&S.setAttribute("elseif",this.elseifCount_),this.elseCount_&&S.setAttribute("else",1),S},domToMutation:function(S){this.elseifCount_=parseInt(S.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(S.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var S=Object.create(null);return this.elseifCount_&&(S.elseIfCount=this.elseifCount_),this.elseCount_&&(S.hasElse=!0),S},loadExtraState:function(S){this.elseifCount_=S.elseIfCount||0,this.elseCount_=S.hasElse?1:0,this.updateShape_()},decompose:function(S){var D=S.newBlock("controls_if_if");D.initSvg();for(var H=D.nextConnection,q=1;q<=this.elseifCount_;q++){var Q=S.newBlock("controls_if_elseif");Q.initSvg(),H.connect(Q.previousConnection),H=Q.nextConnection}return this.elseCount_&&(S=S.newBlock("controls_if_else"),S.initSvg(),H.connect(S.previousConnection)),D},compose:function(S){S=S.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var D=[null],H=[null],q=null;S&&!S.isInsertionMarker();){switch(S.type){case"controls_if_elseif":this.elseifCount_++,D.push(S.valueConnection_),H.push(S.statementConnection_);break;case"controls_if_else":this.elseCount_++,q=S.statementConnection_;break;default:throw TypeError("Unknown block type: "+S.type)}S=S.nextConnection&&S.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(D,H,q)},saveConnections:function(S){S=S.nextConnection.targetBlock();for(var D=1;S;){switch(S.type){case"controls_if_elseif":var H=this.getInput("IF"+D),q=this.getInput("DO"+D);S.valueConnection_=H&&H.connection.targetConnection,S.statementConnection_=q&&q.connection.targetConnection,D++;break;case"controls_if_else":H=this.getInput("ELSE"),S.statementConnection_=H&&H.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+S.type)}S=S.nextConnection&&S.nextConnection.targetBlock()}},rebuildShape_:function(){var S=[null],D=[null],H=null;this.getInput("ELSE")&&(H=this.getInput("ELSE").connection.targetConnection);for(var q=1;this.getInput("IF"+q);q++){var Q=this.getInput("IF"+q),de=this.getInput("DO"+q);S.push(Q.connection.targetConnection),D.push(de.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(S,D,H)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var S=1;this.getInput("IF"+S);S++)this.removeInput("IF"+S),this.removeInput("DO"+S);for(S=1;S<=this.elseifCount_;S++)this.appendValueInput("IF"+S).setCheck("Boolean").appendField(o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+S).appendField(o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(S,D,H){for(var q=1;q<=this.elseifCount_;q++)o.module$exports$Blockly$Mutator.Mutator.reconnect(S[q],this,"IF"+q),o.module$exports$Blockly$Mutator.Mutator.reconnect(D[q],this,"DO"+q);o.module$exports$Blockly$Mutator.Mutator.reconnect(H,this,"ELSE")}};(0,o.module$exports$Blockly$Extensions.registerMutator)("controls_if_mutator",oe,null,["controls_if_elseif","controls_if_else"]);var ee=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_4}else return o.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};(0,o.module$exports$Blockly$Extensions.register)("controls_if_tooltip",ee);var pe={onchange:function(S){this.prevBlocks_||(this.prevBlocks_=[null,null]);var D=this.getInputTargetBlock("A"),H=this.getInputTargetBlock("B");D&&H&&!this.workspace.connectionChecker.doTypeChecks(D.outputConnection,H.outputConnection)&&((0,o.module$exports$Blockly$Events.setGroup)(S.group),S=this.prevBlocks_[0],S!==D&&(D.unplug(),!S||S.isDisposed()||S.isShadow()||this.getInput("A").connection.connect(S.outputConnection)),D=this.prevBlocks_[1],D!==H&&(H.unplug(),!D||D.isDisposed()||D.isShadow()||this.getInput("B").connection.connect(D.outputConnection)),this.bumpNeighbours(),(0,o.module$exports$Blockly$Events.setGroup)(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ae=function(){this.mixin(pe)};(0,o.module$exports$Blockly$Extensions.register)("logic_compare",ae);var Ee={prevParentConnection_:null,onchange:function(S){var D=this.getInputTargetBlock("THEN"),H=this.getInputTargetBlock("ELSE"),q=this.outputConnection.targetConnection;if((D||H)&&q)for(var Q=0;2>Q;Q++){var de=Q===1?D:H;de&&!de.workspace.connectionChecker.doTypeChecks(de.outputConnection,q)&&((0,o.module$exports$Blockly$Events.setGroup)(S.group),q===this.prevParentConnection_?(this.unplug(),q.getSourceBlock().bumpNeighbours()):(de.unplug(),de.bumpNeighbours()),(0,o.module$exports$Blockly$Events.setGroup)(!1))}this.prevParentConnection_=q}};return(0,o.module$exports$Blockly$Extensions.registerMixin)("logic_ternary",Ee),(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),o.module$exports$Blockly$blocks.Blocks.lists_create_with={init:function(){this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new o.module$exports$Blockly$Mutator.Mutator(["lists_create_with_item"])),this.setTooltip(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("items",this.itemCount_),S},domToMutation:function(S){this.itemCount_=parseInt(S.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(S){this.itemCount_=S.itemCount,this.updateShape_()},decompose:function(S){var D=S.newBlock("lists_create_with_container");D.initSvg();for(var H=D.getInput("STACK").connection,q=0;q<this.itemCount_;q++){var Q=S.newBlock("lists_create_with_item");Q.initSvg(),H.connect(Q.previousConnection),H=Q.nextConnection}return D},compose:function(S){var D=S.getInputTargetBlock("STACK");for(S=[];D&&!D.isInsertionMarker();)S.push(D.valueConnection_),D=D.nextConnection&&D.nextConnection.targetBlock();for(D=0;D<this.itemCount_;D++){var H=this.getInput("ADD"+D).connection.targetConnection;H&&S.indexOf(H)===-1&&H.disconnect()}for(this.itemCount_=S.length,this.updateShape_(),D=0;D<this.itemCount_;D++)o.module$exports$Blockly$Mutator.Mutator.reconnect(S[D],this,"ADD"+D)},saveConnections:function(S){S=S.getInputTargetBlock("STACK");for(var D=0;S;){var H=this.getInput("ADD"+D);S.valueConnection_=H&&H.connection.targetConnection,S=S.nextConnection&&S.nextConnection.targetBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_EMPTY_TITLE);for(var S=0;S<this.itemCount_;S++)if(!this.getInput("ADD"+S)){var D=this.appendValueInput("ADD"+S).setAlign(o.module$exports$Blockly$Input.Align.RIGHT);S===0&&D.appendField(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(S=this.itemCount_;this.getInput("ADD"+S);S++)this.removeInput("ADD"+S)}},o.module$exports$Blockly$blocks.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},o.module$exports$Blockly$blocks.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},o.module$exports$Blockly$blocks.Blocks.lists_indexOf={init:function(){var S=[[o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S),"END"),this.setInputsInline(!0);var D=this;this.setTooltip(function(){return o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",D.workspace.options.oneBasedIndex?"0":"-1")})}},o.module$exports$Blockly$blocks.Blocks.lists_getIndex={init:function(){var S=[[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_GET,"GET"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_LAST,"LAST"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),S=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S,function(H){H=H==="REMOVE",this.getSourceBlock().updateStatement_(H)}),this.appendValueInput("VALUE").setCheck("Array").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(S,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var D=this;this.setTooltip(function(){var H=D.getFieldValue("MODE"),q=D.getFieldValue("WHERE"),Q="";switch(H+" "+q){case"GET FROM_START":case"GET FROM_END":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Q=o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(q==="FROM_START"||q==="FROM_END")&&(Q+="  "+(q==="FROM_START"?o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP:o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",D.workspace.options.oneBasedIndex?"#1":"#0")),Q})},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");S.setAttribute("statement",!this.outputConnection);var D=this.getInput("AT").type===o.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return S.setAttribute("at",D),S},domToMutation:function(S){var D=S.getAttribute("statement")==="true";this.updateStatement_(D),S=S.getAttribute("at")!=="false",this.updateAt_(S)},updateStatement_:function(S){S!==!this.outputConnection&&(this.unplug(!0,!0),S?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(S){this.removeInput("AT"),this.removeInput("ORDINAL",!0),S?(this.appendValueInput("AT").setCheck("Number"),o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var D=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(this.WHERE_OPTIONS,function(H){var q=H==="FROM_START"||H==="FROM_END";if(q!==S){var Q=this.getSourceBlock();return Q.updateAt_(q),Q.setFieldValue(H,"WHERE"),null}});this.getInput("AT").appendField(D,"WHERE"),o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},o.module$exports$Blockly$blocks.Blocks.lists_setIndex={init:function(){var S=[[o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_SET,"SET"],[o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_LAST,"LAST"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new o.module$exports$Blockly$FieldDropdown.FieldDropdown(S),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var D=this;this.setTooltip(function(){var H=D.getFieldValue("MODE"),q=D.getFieldValue("WHERE"),Q="";switch(H+" "+q){case"SET FROM_START":case"SET FROM_END":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Q=o.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(q==="FROM_START"||q==="FROM_END")&&(Q+="  "+o.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",D.workspace.options.oneBasedIndex?"#1":"#0")),Q})},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation"),D=this.getInput("AT").type===o.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return S.setAttribute("at",D),S},domToMutation:function(S){S=S.getAttribute("at")!=="false",this.updateAt_(S)},updateAt_:function(S){this.removeInput("AT"),this.removeInput("ORDINAL",!0),S?(this.appendValueInput("AT").setCheck("Number"),o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var D=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(this.WHERE_OPTIONS,function(H){var q=H==="FROM_START"||H==="FROM_END";if(q!==S){var Q=this.getSourceBlock();return Q.updateAt_(q),Q.setFieldValue(H,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(D,"WHERE")}},o.module$exports$Blockly$blocks.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation"),D=this.getInput("AT1").type===o.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return S.setAttribute("at1",D),D=this.getInput("AT2").type===o.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,S.setAttribute("at2",D),S},domToMutation:function(S){var D=S.getAttribute("at1")==="true";S=S.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,S)},updateAt_:function(S,D){this.removeInput("AT"+S),this.removeInput("ORDINAL"+S,!0),D?(this.appendValueInput("AT"+S).setCheck("Number"),o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+S).appendField(o.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+S);var H=new o.module$exports$Blockly$FieldDropdown.FieldDropdown(this["WHERE_OPTIONS_"+S],function(q){var Q=q==="FROM_START"||q==="FROM_END";if(Q!==D){var de=this.getSourceBlock();return de.updateAt_(S,Q),de.setFieldValue(q,"WHERE"+S),null}});this.getInput("AT"+S).appendField(H,"WHERE"+S),S===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),o.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},o.module$exports$Blockly$blocks.Blocks.lists_sort={init:function(){this.jsonInit({message0:o.module$exports$Blockly$Msg.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[o.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[o.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[o.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[o.module$exports$Blockly$Msg.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[o.module$exports$Blockly$Msg.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:o.module$exports$Blockly$Msg.Msg.LISTS_SORT_TOOLTIP,helpUrl:o.module$exports$Blockly$Msg.Msg.LISTS_SORT_HELPURL})}},o.module$exports$Blockly$blocks.Blocks.lists_split={init:function(){var S=this,D=new o.module$exports$Blockly$FieldDropdown.FieldDropdown([[o.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[o.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(H){S.updateType_(H)});this.setHelpUrl(o.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(D,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(o.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var H=S.getFieldValue("MODE");if(H==="SPLIT")return o.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(H==="JOIN")return o.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+H)})},updateType_:function(S){if(this.getFieldValue("MODE")!==S){var D=this.getInput("INPUT").connection;D.setShadowDom(null);var H=D.targetBlock();H&&(D.disconnect(),H.isShadow()?H.dispose():this.bumpNeighbours())}S==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var S=(0,o.module$exports$Blockly$utils$xml.createElement)("mutation");return S.setAttribute("mode",this.getFieldValue("MODE")),S},domToMutation:function(S){this.updateType_(S.getAttribute("mode"))}},(0,o.module$exports$Blockly$common.defineBlocksWithJsonArray)([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),o.Blockly.Blocks})})(n3);(function(r,e){(function(t,o){r.exports=o(n3.exports)})(vs,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(t3);var o3={exports:{}},r3={exports:{}};(function(r,e){(function(t,o){r.exports=o(eC.exports)})(vs,function(t){const o=t.internal_;var i=new o.module$exports$Blockly$Generator.Generator("JavaScript");i.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(o.module$exports$Blockly$utils$global.globalThis).join(",")),i.ORDER_ATOMIC=0,i.ORDER_NEW=1.1,i.ORDER_MEMBER=1.2,i.ORDER_FUNCTION_CALL=2,i.ORDER_INCREMENT=3,i.ORDER_DECREMENT=3,i.ORDER_BITWISE_NOT=4.1,i.ORDER_UNARY_PLUS=4.2,i.ORDER_UNARY_NEGATION=4.3,i.ORDER_LOGICAL_NOT=4.4,i.ORDER_TYPEOF=4.5,i.ORDER_VOID=4.6,i.ORDER_DELETE=4.7,i.ORDER_AWAIT=4.8,i.ORDER_EXPONENTIATION=5,i.ORDER_MULTIPLICATION=5.1,i.ORDER_DIVISION=5.2,i.ORDER_MODULUS=5.3,i.ORDER_SUBTRACTION=6.1,i.ORDER_ADDITION=6.2,i.ORDER_BITWISE_SHIFT=7,i.ORDER_RELATIONAL=8,i.ORDER_IN=8,i.ORDER_INSTANCEOF=8,i.ORDER_EQUALITY=9,i.ORDER_BITWISE_AND=10,i.ORDER_BITWISE_XOR=11,i.ORDER_BITWISE_OR=12,i.ORDER_LOGICAL_AND=13,i.ORDER_LOGICAL_OR=14,i.ORDER_CONDITIONAL=15,i.ORDER_ASSIGNMENT=16,i.ORDER_YIELD=17,i.ORDER_COMMA=18,i.ORDER_NONE=99,i.ORDER_OVERRIDES=[[i.ORDER_FUNCTION_CALL,i.ORDER_MEMBER],[i.ORDER_FUNCTION_CALL,i.ORDER_FUNCTION_CALL],[i.ORDER_MEMBER,i.ORDER_MEMBER],[i.ORDER_MEMBER,i.ORDER_FUNCTION_CALL],[i.ORDER_LOGICAL_NOT,i.ORDER_LOGICAL_NOT],[i.ORDER_MULTIPLICATION,i.ORDER_MULTIPLICATION],[i.ORDER_ADDITION,i.ORDER_ADDITION],[i.ORDER_LOGICAL_AND,i.ORDER_LOGICAL_AND],[i.ORDER_LOGICAL_OR,i.ORDER_LOGICAL_OR]],i.isInitialized=!1,i.init=function(h){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new o.module$exports$Blockly$Names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(h.getVariableMap()),this.nameDB_.populateVariables(h),this.nameDB_.populateProcedures(h);for(var f=[],_=(0,o.module$exports$Blockly$Variables.allDeveloperVariables)(h),m=0;m<_.length;m++)f.push(this.nameDB_.getName(_[m],o.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE));for(h=(0,o.module$exports$Blockly$Variables.allUsedVarModels)(h),_=0;_<h.length;_++)f.push(this.nameDB_.getName(h[_].getId(),o.module$exports$Blockly$Names.NameType.VARIABLE));f.length&&(this.definitions_.variables="var "+f.join(", ")+";"),this.isInitialized=!0},i.finish=function(h){var f=(0,o.module$exports$Blockly$utils$object.values)(this.definitions_);return h=Object.getPrototypeOf(this).finish.call(this,h),this.isInitialized=!1,this.nameDB_.reset(),f.join(`

`)+`


`+h},i.scrubNakedValue=function(h){return h+`;
`},i.quote_=function(h){return h=h.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+h+"'"},i.multiline_quote_=function(h){return h.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},i.scrub_=function(h,f,_){var m="";if(!h.outputConnection||!h.outputConnection.targetConnection){var v=h.getCommentText();v&&(v=(0,o.module$exports$Blockly$utils$string.wrap)(v,this.COMMENT_WRAP-3),m+=this.prefixLines(v+`
`,"// "));for(var x=0;x<h.inputList.length;x++)h.inputList[x].type===o.module$exports$Blockly$inputTypes.inputTypes.VALUE&&(v=h.inputList[x].connection.targetBlock())&&(v=this.allNestedComments(v))&&(m+=this.prefixLines(v,"// "))}return h=h.nextConnection&&h.nextConnection.targetBlock(),_=_?"":this.blockToCode(h),m+f+_},i.getAdjusted=function(h,f,_,m,v){_=_||0,v=v||this.ORDER_NONE,h.workspace.options.oneBasedIndex&&_--;var x=h.workspace.options.oneBasedIndex?"1":"0",b=v;if(0<_)var A=b=this.ORDER_ADDITION;else 0>_?A=b=this.ORDER_SUBTRACTION:m&&(A=b=this.ORDER_UNARY_NEGATION);return h=this.valueToCode(h,f,b)||x,(0,o.module$exports$Blockly$utils$string.isNumber)(h)?(h=Number(h)+_,m&&(h=-h)):(0<_?h=h+" + "+_:0>_&&(h=h+" - "+-_),m&&(h=_?"-("+h+")":"-"+h),A=Math.floor(A),v=Math.floor(v),A&&v>=A&&(h="("+h+")")),h},o.Blockly.JavaScript=i,o.Blockly.JavaScript.variables_get=function(h){return[o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("VAR"),o.module$exports$Blockly$Names.NameType.VARIABLE),o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.variables_set=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";return o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("VAR"),o.module$exports$Blockly$Names.NameType.VARIABLE)+" = "+f+`;
`},o.Blockly.JavaScript.variables_get_dynamic=o.Blockly.JavaScript.variables_get,o.Blockly.JavaScript.variables_set_dynamic=o.Blockly.JavaScript.variables_set;var l=/^\s*'([^']|\\')*'\s*$/,a=function(h){return l.test(h)?[h,o.Blockly.JavaScript.ORDER_ATOMIC]:["String("+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},c=function(h,f,_){return f==="FIRST"?"0":f==="FROM_END"?h+".length - 1 - "+_:f==="LAST"?h+".length - 1":_};o.Blockly.JavaScript.text=function(h){return[o.Blockly.JavaScript.quote_(h.getFieldValue("TEXT")),o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.text_multiline=function(h){h=o.Blockly.JavaScript.multiline_quote_(h.getFieldValue("TEXT"));var f=h.indexOf("+")!==-1?o.Blockly.JavaScript.ORDER_ADDITION:o.Blockly.JavaScript.ORDER_ATOMIC;return[h,f]},o.Blockly.JavaScript.text_join=function(h){switch(h.itemCount_){case 0:return["''",o.Blockly.JavaScript.ORDER_ATOMIC];case 1:return h=o.Blockly.JavaScript.valueToCode(h,"ADD0",o.Blockly.JavaScript.ORDER_NONE)||"''",a(h);case 2:var f=o.Blockly.JavaScript.valueToCode(h,"ADD0",o.Blockly.JavaScript.ORDER_NONE)||"''";return h=o.Blockly.JavaScript.valueToCode(h,"ADD1",o.Blockly.JavaScript.ORDER_NONE)||"''",[a(f)[0]+" + "+a(h)[0],o.Blockly.JavaScript.ORDER_ADDITION];default:f=Array(h.itemCount_);for(var _=0;_<h.itemCount_;_++)f[_]=o.Blockly.JavaScript.valueToCode(h,"ADD"+_,o.Blockly.JavaScript.ORDER_NONE)||"''";return["["+f.join(",")+"].join('')",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]}},o.Blockly.JavaScript.text_append=function(h){var f=o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("VAR"),o.module$exports$Blockly$Names.NameType.VARIABLE);return h=o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_NONE)||"''",f+" += "+a(h)[0]+`;
`},o.Blockly.JavaScript.text_length=function(h){return[(o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_MEMBER)||"''")+".length",o.Blockly.JavaScript.ORDER_MEMBER]},o.Blockly.JavaScript.text_isEmpty=function(h){return["!"+(o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_MEMBER)||"''")+".length",o.Blockly.JavaScript.ORDER_LOGICAL_NOT]},o.Blockly.JavaScript.text_indexOf=function(h){var f=h.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",_=o.Blockly.JavaScript.valueToCode(h,"FIND",o.Blockly.JavaScript.ORDER_NONE)||"''";return f=(o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_MEMBER)||"''")+"."+f+"("+_+")",h.workspace.options.oneBasedIndex?[f+" + 1",o.Blockly.JavaScript.ORDER_ADDITION]:[f,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_charAt=function(h){var f=h.getFieldValue("WHERE")||"FROM_START",_=o.Blockly.JavaScript.valueToCode(h,"VALUE",f==="RANDOM"?o.Blockly.JavaScript.ORDER_NONE:o.Blockly.JavaScript.ORDER_MEMBER)||"''";switch(f){case"FIRST":return[_+".charAt(0)",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[_+".slice(-1)",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return h=o.Blockly.JavaScript.getAdjusted(h,"AT"),[_+".charAt("+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return h=o.Blockly.JavaScript.getAdjusted(h,"AT",1,!0),[_+".slice("+h+").charAt(0)",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[o.Blockly.JavaScript.provideFunction_("textRandomLetter",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+_+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},o.Blockly.JavaScript.text_getSubstring=function(h){var f=h.getFieldValue("WHERE1"),_=h.getFieldValue("WHERE2"),m=f!=="FROM_END"&&f!=="LAST"&&_!=="FROM_END"&&_!=="LAST",v=o.Blockly.JavaScript.valueToCode(h,"STRING",m?o.Blockly.JavaScript.ORDER_MEMBER:o.Blockly.JavaScript.ORDER_NONE)||"''";if(f==="FIRST"&&_==="LAST")return[v,o.Blockly.JavaScript.ORDER_NONE];if(v.match(/^'?\w+'?$/)||m){switch(f){case"FROM_START":f=o.Blockly.JavaScript.getAdjusted(h,"AT1");break;case"FROM_END":f=o.Blockly.JavaScript.getAdjusted(h,"AT1",1,!1,o.Blockly.JavaScript.ORDER_SUBTRACTION),f=v+".length - "+f;break;case"FIRST":f="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(_){case"FROM_START":_=o.Blockly.JavaScript.getAdjusted(h,"AT2",1);break;case"FROM_END":_=o.Blockly.JavaScript.getAdjusted(h,"AT2",0,!1,o.Blockly.JavaScript.ORDER_SUBTRACTION),_=v+".length - "+_;break;case"LAST":_=v+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}v=v+".slice("+f+", "+_+")"}else{m=o.Blockly.JavaScript.getAdjusted(h,"AT1"),h=o.Blockly.JavaScript.getAdjusted(h,"AT2");var x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};v=o.Blockly.JavaScript.provideFunction_("subsequence"+x[f]+x[_],["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+(f==="FROM_END"||f==="FROM_START"?", at1":"")+(_==="FROM_END"||_==="FROM_START"?", at2":"")+") {","  var start = "+c("sequence",f,"at1")+";","  var end = "+c("sequence",_,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+v+(f==="FROM_END"||f==="FROM_START"?", "+m:"")+(_==="FROM_END"||_==="FROM_START"?", "+h:"")+")"}return[v,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_changeCase=function(h){var f={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[h.getFieldValue("CASE")];return h=o.Blockly.JavaScript.valueToCode(h,"TEXT",f?o.Blockly.JavaScript.ORDER_MEMBER:o.Blockly.JavaScript.ORDER_NONE)||"''",[f?h+f:o.Blockly.JavaScript.provideFunction_("textToTitleCase",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_trim=function(h){var f={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[h.getFieldValue("MODE")];return[(o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_MEMBER)||"''")+f,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_print=function(h){return"window.alert("+(o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_NONE)||"''")+`);
`},o.Blockly.JavaScript.text_prompt_ext=function(h){var f="window.prompt("+(h.getField("TEXT")?o.Blockly.JavaScript.quote_(h.getFieldValue("TEXT")):o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_NONE)||"''")+")";return h.getFieldValue("TYPE")==="NUMBER"&&(f="Number("+f+")"),[f,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_prompt=o.Blockly.JavaScript.text_prompt_ext,o.Blockly.JavaScript.text_count=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_NONE)||"''";return h=o.Blockly.JavaScript.valueToCode(h,"SUB",o.Blockly.JavaScript.ORDER_NONE)||"''",[o.Blockly.JavaScript.provideFunction_("textCount",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+f+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_replace=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_NONE)||"''",_=o.Blockly.JavaScript.valueToCode(h,"FROM",o.Blockly.JavaScript.ORDER_NONE)||"''";return h=o.Blockly.JavaScript.valueToCode(h,"TO",o.Blockly.JavaScript.ORDER_NONE)||"''",[o.Blockly.JavaScript.provideFunction_("textReplace",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+f+", "+_+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.text_reverse=function(h){return[(o.Blockly.JavaScript.valueToCode(h,"TEXT",o.Blockly.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.procedures_defreturn=function(h){var f=o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("NAME"),o.module$exports$Blockly$Names.NameType.PROCEDURE),_="";o.Blockly.JavaScript.STATEMENT_PREFIX&&(_+=o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_PREFIX,h)),o.Blockly.JavaScript.STATEMENT_SUFFIX&&(_+=o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_SUFFIX,h)),_&&(_=o.Blockly.JavaScript.prefixLines(_,o.Blockly.JavaScript.INDENT));var m="";o.Blockly.JavaScript.INFINITE_LOOP_TRAP&&(m=o.Blockly.JavaScript.prefixLines(o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.INFINITE_LOOP_TRAP,h),o.Blockly.JavaScript.INDENT));var v=o.Blockly.JavaScript.statementToCode(h,"STACK"),x=o.Blockly.JavaScript.valueToCode(h,"RETURN",o.Blockly.JavaScript.ORDER_NONE)||"",b="";v&&x&&(b=_),x&&(x=o.Blockly.JavaScript.INDENT+"return "+x+`;
`);for(var A=[],k=h.getVars(),E=0;E<k.length;E++)A[E]=o.Blockly.JavaScript.nameDB_.getName(k[E],o.module$exports$Blockly$Names.NameType.VARIABLE);return _="function "+f+"("+A.join(", ")+`) {
`+_+m+v+b+x+"}",_=o.Blockly.JavaScript.scrub_(h,_),o.Blockly.JavaScript.definitions_["%"+f]=_,null},o.Blockly.JavaScript.procedures_defnoreturn=o.Blockly.JavaScript.procedures_defreturn,o.Blockly.JavaScript.procedures_callreturn=function(h){for(var f=o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("NAME"),o.module$exports$Blockly$Names.NameType.PROCEDURE),_=[],m=h.getVars(),v=0;v<m.length;v++)_[v]=o.Blockly.JavaScript.valueToCode(h,"ARG"+v,o.Blockly.JavaScript.ORDER_NONE)||"null";return[f+"("+_.join(", ")+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.procedures_callnoreturn=function(h){return o.Blockly.JavaScript.procedures_callreturn(h)[0]+`;
`},o.Blockly.JavaScript.procedures_ifreturn=function(h){var f="if ("+(o.Blockly.JavaScript.valueToCode(h,"CONDITION",o.Blockly.JavaScript.ORDER_NONE)||"false")+`) {
`;return o.Blockly.JavaScript.STATEMENT_SUFFIX&&(f+=o.Blockly.JavaScript.prefixLines(o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_SUFFIX,h),o.Blockly.JavaScript.INDENT)),h.hasReturnValue_?(h=o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_NONE)||"null",f+=o.Blockly.JavaScript.INDENT+"return "+h+`;
`):f+=o.Blockly.JavaScript.INDENT+`return;
`,f+`}
`},o.Blockly.JavaScript.math_number=function(h){return h=Number(h.getFieldValue("NUM")),[h,0<=h?o.Blockly.JavaScript.ORDER_ATOMIC:o.Blockly.JavaScript.ORDER_UNARY_NEGATION]},o.Blockly.JavaScript.math_arithmetic=function(h){var f={ADD:[" + ",o.Blockly.JavaScript.ORDER_ADDITION],MINUS:[" - ",o.Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",o.Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",o.Blockly.JavaScript.ORDER_DIVISION],POWER:[null,o.Blockly.JavaScript.ORDER_NONE]}[h.getFieldValue("OP")],_=f[0];f=f[1];var m=o.Blockly.JavaScript.valueToCode(h,"A",f)||"0";return h=o.Blockly.JavaScript.valueToCode(h,"B",f)||"0",_?[m+_+h,f]:["Math.pow("+m+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.math_single=function(h){var f=h.getFieldValue("OP");if(f==="NEG")return h=o.Blockly.JavaScript.valueToCode(h,"NUM",o.Blockly.JavaScript.ORDER_UNARY_NEGATION)||"0",h[0]==="-"&&(h=" "+h),["-"+h,o.Blockly.JavaScript.ORDER_UNARY_NEGATION];switch(h=f==="SIN"||f==="COS"||f==="TAN"?o.Blockly.JavaScript.valueToCode(h,"NUM",o.Blockly.JavaScript.ORDER_DIVISION)||"0":o.Blockly.JavaScript.valueToCode(h,"NUM",o.Blockly.JavaScript.ORDER_NONE)||"0",f){case"ABS":var _="Math.abs("+h+")";break;case"ROOT":_="Math.sqrt("+h+")";break;case"LN":_="Math.log("+h+")";break;case"EXP":_="Math.exp("+h+")";break;case"POW10":_="Math.pow(10,"+h+")";break;case"ROUND":_="Math.round("+h+")";break;case"ROUNDUP":_="Math.ceil("+h+")";break;case"ROUNDDOWN":_="Math.floor("+h+")";break;case"SIN":_="Math.sin("+h+" / 180 * Math.PI)";break;case"COS":_="Math.cos("+h+" / 180 * Math.PI)";break;case"TAN":_="Math.tan("+h+" / 180 * Math.PI)"}if(_)return[_,o.Blockly.JavaScript.ORDER_FUNCTION_CALL];switch(f){case"LOG10":_="Math.log("+h+") / Math.log(10)";break;case"ASIN":_="Math.asin("+h+") / Math.PI * 180";break;case"ACOS":_="Math.acos("+h+") / Math.PI * 180";break;case"ATAN":_="Math.atan("+h+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+f)}return[_,o.Blockly.JavaScript.ORDER_DIVISION]},o.Blockly.JavaScript.math_constant=function(h){return{PI:["Math.PI",o.Blockly.JavaScript.ORDER_MEMBER],E:["Math.E",o.Blockly.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",o.Blockly.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",o.Blockly.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",o.Blockly.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",o.Blockly.JavaScript.ORDER_ATOMIC]}[h.getFieldValue("CONSTANT")]},o.Blockly.JavaScript.math_number_property=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"NUMBER_TO_CHECK",o.Blockly.JavaScript.ORDER_MODULUS)||"0",_=h.getFieldValue("PROPERTY");if(_==="PRIME")return[o.Blockly.JavaScript.provideFunction_("mathIsPrime",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) === 0 || n % (x + 1) === 0) {","      return false;","    }","  }","  return true;","}"])+"("+f+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];switch(_){case"EVEN":var m=f+" % 2 === 0";break;case"ODD":m=f+" % 2 === 1";break;case"WHOLE":m=f+" % 1 === 0";break;case"POSITIVE":m=f+" > 0";break;case"NEGATIVE":m=f+" < 0";break;case"DIVISIBLE_BY":h=o.Blockly.JavaScript.valueToCode(h,"DIVISOR",o.Blockly.JavaScript.ORDER_MODULUS)||"0",m=f+" % "+h+" === 0"}return[m,o.Blockly.JavaScript.ORDER_EQUALITY]},o.Blockly.JavaScript.math_change=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"DELTA",o.Blockly.JavaScript.ORDER_ADDITION)||"0";return h=o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("VAR"),o.module$exports$Blockly$Names.NameType.VARIABLE),h+" = (typeof "+h+" === 'number' ? "+h+" : 0) + "+f+`;
`},o.Blockly.JavaScript.math_round=o.Blockly.JavaScript.math_single,o.Blockly.JavaScript.math_trig=o.Blockly.JavaScript.math_single,o.Blockly.JavaScript.math_on_list=function(h){var f=h.getFieldValue("OP");switch(f){case"SUM":h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_MEMBER)||"[]",h+=".reduce(function(x, y) {return x + y;})";break;case"MIN":h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h="Math.min.apply(null, "+h+")";break;case"MAX":h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h="Math.max.apply(null, "+h+")";break;case"AVERAGE":f=o.Blockly.JavaScript.provideFunction_("mathMean",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]),h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h=f+"("+h+")";break;case"MEDIAN":f=o.Blockly.JavaScript.provideFunction_("mathMedian",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x === 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 === 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]),h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h=f+"("+h+")";break;case"MODE":f=o.Blockly.JavaScript.provideFunction_("mathModes",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] === maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]),h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h=f+"("+h+")";break;case"STD_DEV":f=o.Blockly.JavaScript.provideFunction_("mathStandardDeviation",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]),h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h=f+"("+h+")";break;case"RANDOM":f=o.Blockly.JavaScript.provideFunction_("mathRandomList",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]),h=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_NONE)||"[]",h=f+"("+h+")";break;default:throw Error("Unknown operator: "+f)}return[h,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.math_modulo=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"DIVIDEND",o.Blockly.JavaScript.ORDER_MODULUS)||"0";return h=o.Blockly.JavaScript.valueToCode(h,"DIVISOR",o.Blockly.JavaScript.ORDER_MODULUS)||"0",[f+" % "+h,o.Blockly.JavaScript.ORDER_MODULUS]},o.Blockly.JavaScript.math_constrain=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_NONE)||"0",_=o.Blockly.JavaScript.valueToCode(h,"LOW",o.Blockly.JavaScript.ORDER_NONE)||"0";return h=o.Blockly.JavaScript.valueToCode(h,"HIGH",o.Blockly.JavaScript.ORDER_NONE)||"Infinity",["Math.min(Math.max("+f+", "+_+"), "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.math_random_int=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"FROM",o.Blockly.JavaScript.ORDER_NONE)||"0";return h=o.Blockly.JavaScript.valueToCode(h,"TO",o.Blockly.JavaScript.ORDER_NONE)||"0",[o.Blockly.JavaScript.provideFunction_("mathRandomInt",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+f+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.math_random_float=function(h){return["Math.random()",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.math_atan2=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"X",o.Blockly.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(o.Blockly.JavaScript.valueToCode(h,"Y",o.Blockly.JavaScript.ORDER_NONE)||"0")+", "+f+") / Math.PI * 180",o.Blockly.JavaScript.ORDER_DIVISION]},o.Blockly.JavaScript.controls_repeat_ext=function(h){var f=h.getField("TIMES")?String(Number(h.getFieldValue("TIMES"))):o.Blockly.JavaScript.valueToCode(h,"TIMES",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",_=o.Blockly.JavaScript.statementToCode(h,"DO");_=o.Blockly.JavaScript.addLoopTrap(_,h),h="";var m=o.Blockly.JavaScript.nameDB_.getDistinctName("count",o.module$exports$Blockly$Names.NameType.VARIABLE),v=f;return f.match(/^\w+$/)||(0,o.module$exports$Blockly$utils$string.isNumber)(f)||(v=o.Blockly.JavaScript.nameDB_.getDistinctName("repeat_end",o.module$exports$Blockly$Names.NameType.VARIABLE),h+="var "+v+" = "+f+`;
`),h+("for (var "+m+" = 0; "+m+" < "+v+"; "+m+`++) {
`+_+`}
`)},o.Blockly.JavaScript.controls_repeat=o.Blockly.JavaScript.controls_repeat_ext,o.Blockly.JavaScript.controls_whileUntil=function(h){var f=h.getFieldValue("MODE")==="UNTIL",_=o.Blockly.JavaScript.valueToCode(h,"BOOL",f?o.Blockly.JavaScript.ORDER_LOGICAL_NOT:o.Blockly.JavaScript.ORDER_NONE)||"false",m=o.Blockly.JavaScript.statementToCode(h,"DO");return m=o.Blockly.JavaScript.addLoopTrap(m,h),f&&(_="!"+_),"while ("+_+`) {
`+m+`}
`},o.Blockly.JavaScript.controls_for=function(h){var f=o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("VAR"),o.module$exports$Blockly$Names.NameType.VARIABLE),_=o.Blockly.JavaScript.valueToCode(h,"FROM",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",m=o.Blockly.JavaScript.valueToCode(h,"TO",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",v=o.Blockly.JavaScript.valueToCode(h,"BY",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"1",x=o.Blockly.JavaScript.statementToCode(h,"DO");if(x=o.Blockly.JavaScript.addLoopTrap(x,h),(0,o.module$exports$Blockly$utils$string.isNumber)(_)&&(0,o.module$exports$Blockly$utils$string.isNumber)(m)&&(0,o.module$exports$Blockly$utils$string.isNumber)(v)){var b=Number(_)<=Number(m);h="for ("+f+" = "+_+"; "+f+(b?" <= ":" >= ")+m+"; "+f,f=Math.abs(Number(v)),h=(f===1?h+(b?"++":"--"):h+((b?" += ":" -= ")+f))+(`) {
`+x+`}
`)}else h="",b=_,_.match(/^\w+$/)||(0,o.module$exports$Blockly$utils$string.isNumber)(_)||(b=o.Blockly.JavaScript.nameDB_.getDistinctName(f+"_start",o.module$exports$Blockly$Names.NameType.VARIABLE),h+="var "+b+" = "+_+`;
`),_=m,m.match(/^\w+$/)||(0,o.module$exports$Blockly$utils$string.isNumber)(m)||(_=o.Blockly.JavaScript.nameDB_.getDistinctName(f+"_end",o.module$exports$Blockly$Names.NameType.VARIABLE),h+="var "+_+" = "+m+`;
`),m=o.Blockly.JavaScript.nameDB_.getDistinctName(f+"_inc",o.module$exports$Blockly$Names.NameType.VARIABLE),h+="var "+m+" = ",h=(0,o.module$exports$Blockly$utils$string.isNumber)(v)?h+(Math.abs(v)+`;
`):h+("Math.abs("+v+`);
`),h=h+("if ("+b+" > "+_+`) {
`)+(o.Blockly.JavaScript.INDENT+m+" = -"+m+`;
`),h+=`}
`,h+="for ("+f+" = "+b+"; "+m+" >= 0 ? "+f+" <= "+_+" : "+f+" >= "+_+"; "+f+" += "+m+`) {
`+x+`}
`;return h},o.Blockly.JavaScript.controls_forEach=function(h){var f=o.Blockly.JavaScript.nameDB_.getName(h.getFieldValue("VAR"),o.module$exports$Blockly$Names.NameType.VARIABLE),_=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"[]",m=o.Blockly.JavaScript.statementToCode(h,"DO");m=o.Blockly.JavaScript.addLoopTrap(m,h),h="";var v=_;return _.match(/^\w+$/)||(v=o.Blockly.JavaScript.nameDB_.getDistinctName(f+"_list",o.module$exports$Blockly$Names.NameType.VARIABLE),h+="var "+v+" = "+_+`;
`),_=o.Blockly.JavaScript.nameDB_.getDistinctName(f+"_index",o.module$exports$Blockly$Names.NameType.VARIABLE),m=o.Blockly.JavaScript.INDENT+f+" = "+v+"["+_+`];
`+m,h+("for (var "+_+" in "+v+`) {
`+m+`}
`)},o.Blockly.JavaScript.controls_flow_statements=function(h){var f="";if(o.Blockly.JavaScript.STATEMENT_PREFIX&&(f+=o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_PREFIX,h)),o.Blockly.JavaScript.STATEMENT_SUFFIX&&(f+=o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_SUFFIX,h)),o.Blockly.JavaScript.STATEMENT_PREFIX){var _=h.getSurroundLoop();_&&!_.suppressPrefixSuffix&&(f+=o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_PREFIX,_))}switch(h.getFieldValue("FLOW")){case"BREAK":return f+`break;
`;case"CONTINUE":return f+`continue;
`}throw Error("Unknown flow statement.")},o.Blockly.JavaScript.controls_if=function(h){var f=0,_="";o.Blockly.JavaScript.STATEMENT_PREFIX&&(_+=o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_PREFIX,h));do{var m=o.Blockly.JavaScript.valueToCode(h,"IF"+f,o.Blockly.JavaScript.ORDER_NONE)||"false",v=o.Blockly.JavaScript.statementToCode(h,"DO"+f);o.Blockly.JavaScript.STATEMENT_SUFFIX&&(v=o.Blockly.JavaScript.prefixLines(o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_SUFFIX,h),o.Blockly.JavaScript.INDENT)+v),_+=(0<f?" else ":"")+"if ("+m+`) {
`+v+"}",f++}while(h.getInput("IF"+f));return(h.getInput("ELSE")||o.Blockly.JavaScript.STATEMENT_SUFFIX)&&(f=o.Blockly.JavaScript.statementToCode(h,"ELSE"),o.Blockly.JavaScript.STATEMENT_SUFFIX&&(f=o.Blockly.JavaScript.prefixLines(o.Blockly.JavaScript.injectId(o.Blockly.JavaScript.STATEMENT_SUFFIX,h),o.Blockly.JavaScript.INDENT)+f),_+=` else {
`+f+"}"),_+`
`},o.Blockly.JavaScript.controls_ifelse=o.Blockly.JavaScript.controls_if,o.Blockly.JavaScript.logic_compare=function(h){var f={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[h.getFieldValue("OP")],_=f==="=="||f==="!="?o.Blockly.JavaScript.ORDER_EQUALITY:o.Blockly.JavaScript.ORDER_RELATIONAL,m=o.Blockly.JavaScript.valueToCode(h,"A",_)||"0";return h=o.Blockly.JavaScript.valueToCode(h,"B",_)||"0",[m+" "+f+" "+h,_]},o.Blockly.JavaScript.logic_operation=function(h){var f=h.getFieldValue("OP")==="AND"?"&&":"||",_=f==="&&"?o.Blockly.JavaScript.ORDER_LOGICAL_AND:o.Blockly.JavaScript.ORDER_LOGICAL_OR,m=o.Blockly.JavaScript.valueToCode(h,"A",_);if(h=o.Blockly.JavaScript.valueToCode(h,"B",_),m||h){var v=f==="&&"?"true":"false";m||(m=v),h||(h=v)}else h=m="false";return[m+" "+f+" "+h,_]},o.Blockly.JavaScript.logic_negate=function(h){var f=o.Blockly.JavaScript.ORDER_LOGICAL_NOT;return["!"+(o.Blockly.JavaScript.valueToCode(h,"BOOL",f)||"true"),f]},o.Blockly.JavaScript.logic_boolean=function(h){return[h.getFieldValue("BOOL")==="TRUE"?"true":"false",o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.logic_null=function(h){return["null",o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.logic_ternary=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"IF",o.Blockly.JavaScript.ORDER_CONDITIONAL)||"false",_=o.Blockly.JavaScript.valueToCode(h,"THEN",o.Blockly.JavaScript.ORDER_CONDITIONAL)||"null";return h=o.Blockly.JavaScript.valueToCode(h,"ELSE",o.Blockly.JavaScript.ORDER_CONDITIONAL)||"null",[f+" ? "+_+" : "+h,o.Blockly.JavaScript.ORDER_CONDITIONAL]},o.Blockly.JavaScript.lists_create_empty=function(h){return["[]",o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.lists_create_with=function(h){for(var f=Array(h.itemCount_),_=0;_<h.itemCount_;_++)f[_]=o.Blockly.JavaScript.valueToCode(h,"ADD"+_,o.Blockly.JavaScript.ORDER_NONE)||"null";return["["+f.join(", ")+"]",o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.lists_repeat=function(h){var f=o.Blockly.JavaScript.provideFunction_("listsRepeat",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"]),_=o.Blockly.JavaScript.valueToCode(h,"ITEM",o.Blockly.JavaScript.ORDER_NONE)||"null";return h=o.Blockly.JavaScript.valueToCode(h,"NUM",o.Blockly.JavaScript.ORDER_NONE)||"0",[f+"("+_+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.lists_length=function(h){return[(o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",o.Blockly.JavaScript.ORDER_MEMBER]},o.Blockly.JavaScript.lists_isEmpty=function(h){return["!"+(o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",o.Blockly.JavaScript.ORDER_LOGICAL_NOT]},o.Blockly.JavaScript.lists_indexOf=function(h){var f=h.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",_=o.Blockly.JavaScript.valueToCode(h,"FIND",o.Blockly.JavaScript.ORDER_NONE)||"''";return f=(o.Blockly.JavaScript.valueToCode(h,"VALUE",o.Blockly.JavaScript.ORDER_MEMBER)||"[]")+"."+f+"("+_+")",h.workspace.options.oneBasedIndex?[f+" + 1",o.Blockly.JavaScript.ORDER_ADDITION]:[f,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.lists_getIndex=function(h){var f=h.getFieldValue("MODE")||"GET",_=h.getFieldValue("WHERE")||"FROM_START",m=o.Blockly.JavaScript.valueToCode(h,"VALUE",_==="RANDOM"?o.Blockly.JavaScript.ORDER_NONE:o.Blockly.JavaScript.ORDER_MEMBER)||"[]";switch(_){case"FIRST":if(f==="GET")return[m+"[0]",o.Blockly.JavaScript.ORDER_MEMBER];if(f==="GET_REMOVE")return[m+".shift()",o.Blockly.JavaScript.ORDER_MEMBER];if(f==="REMOVE")return m+`.shift();
`;break;case"LAST":if(f==="GET")return[m+".slice(-1)[0]",o.Blockly.JavaScript.ORDER_MEMBER];if(f==="GET_REMOVE")return[m+".pop()",o.Blockly.JavaScript.ORDER_MEMBER];if(f==="REMOVE")return m+`.pop();
`;break;case"FROM_START":if(h=o.Blockly.JavaScript.getAdjusted(h,"AT"),f==="GET")return[m+"["+h+"]",o.Blockly.JavaScript.ORDER_MEMBER];if(f==="GET_REMOVE")return[m+".splice("+h+", 1)[0]",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(f==="REMOVE")return m+".splice("+h+`, 1);
`;break;case"FROM_END":if(h=o.Blockly.JavaScript.getAdjusted(h,"AT",1,!0),f==="GET")return[m+".slice("+h+")[0]",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(f==="GET_REMOVE")return[m+".splice("+h+", 1)[0]",o.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(f==="REMOVE")return m+".splice("+h+", 1);";break;case"RANDOM":if(m=o.Blockly.JavaScript.provideFunction_("listsGetRandomItem",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+m+", "+(f!=="GET")+")",f==="GET"||f==="GET_REMOVE")return[m,o.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(f==="REMOVE")return m+`;
`}throw Error("Unhandled combination (lists_getIndex).")},o.Blockly.JavaScript.lists_setIndex=function(h){function f(){if(_.match(/^\w+$/))return"";var b=o.Blockly.JavaScript.nameDB_.getDistinctName("tmpList",o.module$exports$Blockly$Names.NameType.VARIABLE),A="var "+b+" = "+_+`;
`;return _=b,A}var _=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_MEMBER)||"[]",m=h.getFieldValue("MODE")||"GET",v=h.getFieldValue("WHERE")||"FROM_START",x=o.Blockly.JavaScript.valueToCode(h,"TO",o.Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";switch(v){case"FIRST":if(m==="SET")return _+"[0] = "+x+`;
`;if(m==="INSERT")return _+".unshift("+x+`);
`;break;case"LAST":if(m==="SET")return f()+(_+"["+_+".length - 1] = "+x+`;
`);if(m==="INSERT")return _+".push("+x+`);
`;break;case"FROM_START":if(h=o.Blockly.JavaScript.getAdjusted(h,"AT"),m==="SET")return _+"["+h+"] = "+x+`;
`;if(m==="INSERT")return _+".splice("+h+", 0, "+x+`);
`;break;case"FROM_END":if(h=o.Blockly.JavaScript.getAdjusted(h,"AT",1,!1,o.Blockly.JavaScript.ORDER_SUBTRACTION),v=f(),m==="SET")return v+(_+"["+_+".length - "+h+"] = "+x+`;
`);if(m==="INSERT")return v+(_+".splice("+_+".length - "+h+", 0, "+x+`);
`);break;case"RANDOM":if(h=f(),v=o.Blockly.JavaScript.nameDB_.getDistinctName("tmpX",o.module$exports$Blockly$Names.NameType.VARIABLE),h+="var "+v+" = Math.floor(Math.random() * "+_+`.length);
`,m==="SET")return h+(_+"["+v+"] = "+x+`;
`);if(m==="INSERT")return h+(_+".splice("+v+", 0, "+x+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var p=function(h,f,_){return f==="FIRST"?"0":f==="FROM_END"?h+".length - 1 - "+_:f==="LAST"?h+".length - 1":_};return o.Blockly.JavaScript.lists_getSublist=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_MEMBER)||"[]",_=h.getFieldValue("WHERE1"),m=h.getFieldValue("WHERE2");if(_==="FIRST"&&m==="LAST")f+=".slice(0)";else if(f.match(/^\w+$/)||_!=="FROM_END"&&m==="FROM_START"){switch(_){case"FROM_START":_=o.Blockly.JavaScript.getAdjusted(h,"AT1");break;case"FROM_END":_=o.Blockly.JavaScript.getAdjusted(h,"AT1",1,!1,o.Blockly.JavaScript.ORDER_SUBTRACTION),_=f+".length - "+_;break;case"FIRST":_="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(m){case"FROM_START":m=o.Blockly.JavaScript.getAdjusted(h,"AT2",1);break;case"FROM_END":m=o.Blockly.JavaScript.getAdjusted(h,"AT2",0,!1,o.Blockly.JavaScript.ORDER_SUBTRACTION),m=f+".length - "+m;break;case"LAST":m=f+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}f=f+".slice("+_+", "+m+")"}else{var v=o.Blockly.JavaScript.getAdjusted(h,"AT1");h=o.Blockly.JavaScript.getAdjusted(h,"AT2");var x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};f=o.Blockly.JavaScript.provideFunction_("subsequence"+x[_]+x[m],["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+(_==="FROM_END"||_==="FROM_START"?", at1":"")+(m==="FROM_END"||m==="FROM_START"?", at2":"")+") {",p("sequence",_,"at1")+";","  var end = "+p("sequence",m,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+f+(_==="FROM_END"||_==="FROM_START"?", "+v:"")+(m==="FROM_END"||m==="FROM_START"?", "+h:"")+")"}return[f,o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.lists_sort=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]",_=h.getFieldValue("DIRECTION")==="1"?1:-1;h=h.getFieldValue("TYPE");var m=o.Blockly.JavaScript.provideFunction_("listsGetSortCompare",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"]);return[f+".slice().sort("+m+'("'+h+'", '+_+"))",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.lists_split=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"INPUT",o.Blockly.JavaScript.ORDER_MEMBER),_=o.Blockly.JavaScript.valueToCode(h,"DELIM",o.Blockly.JavaScript.ORDER_NONE)||"''";if(h=h.getFieldValue("MODE"),h==="SPLIT")f||(f="''"),h="split";else if(h==="JOIN")f||(f="[]"),h="join";else throw Error("Unknown mode: "+h);return[f+"."+h+"("+_+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.lists_reverse=function(h){return[(o.Blockly.JavaScript.valueToCode(h,"LIST",o.Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.colour_picker=function(h){return[o.Blockly.JavaScript.quote_(h.getFieldValue("COLOUR")),o.Blockly.JavaScript.ORDER_ATOMIC]},o.Blockly.JavaScript.colour_random=function(h){return[o.Blockly.JavaScript.provideFunction_("colourRandom",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.colour_rgb=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"RED",o.Blockly.JavaScript.ORDER_NONE)||0,_=o.Blockly.JavaScript.valueToCode(h,"GREEN",o.Blockly.JavaScript.ORDER_NONE)||0;return h=o.Blockly.JavaScript.valueToCode(h,"BLUE",o.Blockly.JavaScript.ORDER_NONE)||0,[o.Blockly.JavaScript.provideFunction_("colourRgb",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+f+", "+_+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript.colour_blend=function(h){var f=o.Blockly.JavaScript.valueToCode(h,"COLOUR1",o.Blockly.JavaScript.ORDER_NONE)||"'#000000'",_=o.Blockly.JavaScript.valueToCode(h,"COLOUR2",o.Blockly.JavaScript.ORDER_NONE)||"'#000000'";return h=o.Blockly.JavaScript.valueToCode(h,"RATIO",o.Blockly.JavaScript.ORDER_NONE)||.5,[o.Blockly.JavaScript.provideFunction_("colourBlend",["function "+o.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+f+", "+_+", "+h+")",o.Blockly.JavaScript.ORDER_FUNCTION_CALL]},o.Blockly.JavaScript})})(r3);(function(r,e){(function(t,o){r.exports=o(ZS.exports,r3.exports)})(vs,function(t,o){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return o})})(o3);(function(r,e){(function(t,o){r.exports=o(ZS.exports,e3.exports,t3.exports,o3.exports)})(vs,function(t,o,i,l){return t.setLocale(o),t})})(QG);(function(r,e){(function(t,o){r.exports=o(QG.exports)})(vs,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(qG);var V_=qG.exports;function bhe(r,e){var t=null,o=null,i=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];o=function(){t=null,r.apply(void 0,a)},clearTimeout(t),t=setTimeout(o,e)},l=function(){t!==null&&(clearTimeout(t),o())};return[i,l]}var fx=globalThis&&globalThis.__assign||function(){return fx=Object.assign||function(r){for(var e,t=1,o=arguments.length;t<o;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},fx.apply(this,arguments)};function khe(r,e,t){try{return V_.Xml.domToWorkspace(V_.Xml.textToDom(r),e),!0}catch(o){return t&&t(o),!1}}var Ahe=function(r){var e=r.ref,t=r.initialXml,o=r.toolboxConfiguration,i=r.workspaceConfiguration,l=r.onWorkspaceChange,a=r.onImportXmlError,c=r.onInject,p=r.onDispose,h=zt.useState(null),f=h[0],_=h[1],m=zt.useState(t),v=m[0],x=m[1],b=zt.useState(!1),A=b[0],k=b[1],E=zt.useState(!1),M=E[0],R=E[1],I=zt.useRef(i);zt.useEffect(function(){I.current=i},[i]);var L=zt.useRef(o);zt.useEffect(function(){L.current=o,o&&f&&f.updateToolbox(o)},[o,f]);var F=zt.useRef(c),U=zt.useRef(p);zt.useEffect(function(){F.current=c},[c]),zt.useEffect(function(){U.current=p},[p]);var X=zt.useCallback(function(j){l&&l(j)},[l]);return zt.useEffect(function(){if(!!e.current){var j=V_.inject(e.current,fx(fx({},I.current),{toolbox:L.current}));_(j),k(!1),R(!1),F.current&&F.current(j);var P=U.current;return function(){j.dispose(),P&&P(j)}}},[e]),zt.useEffect(function(){f&&!M&&X(f)},[X,M,f]),zt.useEffect(function(){if(f!=null){var j=function(){X(f)};return f.addChangeListener(j),function(){f.removeChangeListener(j)}}},[f,X]),zt.useEffect(function(){if(f!=null){var j=bhe(function(){var K=V_.Xml.domToText(V_.Xml.workspaceToDom(f));K!==v&&x(K)},200),P=j[0],z=j[1];return f.addChangeListener(P),function(){f.removeChangeListener(P),z()}}},[f,v]),zt.useEffect(function(){if(v&&f&&!A){var j=khe(v,f,a);j||x(null),k(!0)}},[v,f,A,a]),{workspace:f,xml:v}},whe={initialXml:Lt.string,toolboxConfiguration:Lt.object,workspaceConfiguration:Lt.object,className:Lt.string,onWorkspaceChange:Lt.func,onImportXmlError:Lt.func,onXmlChange:Lt.func,onInject:Lt.func,onDispose:Lt.func},Mhe={initialXml:null,toolboxConfiguration:null,workspaceConfiguration:null,className:null,onWorkspaceChange:null,onImportXmlError:null,onXmlChange:null,onInject:null,onDispose:null};function i3(r){var e=r.initialXml,t=r.toolboxConfiguration,o=r.workspaceConfiguration,i=r.className,l=r.onWorkspaceChange,a=r.onXmlChange,c=r.onImportXmlError,p=r.onInject,h=r.onDispose,f=zt.useRef(null),_=Ahe({ref:f,initialXml:e,toolboxConfiguration:t,workspaceConfiguration:o,onWorkspaceChange:l,onImportXmlError:c,onInject:p,onDispose:h}).xml,m=zt.useRef(a);return zt.useEffect(function(){m.current=a},[a]),zt.useEffect(function(){m.current&&_&&m.current(_)},[_]),Ge("div",{className:i,ref:f},void 0)}i3.propTypes=whe;i3.defaultProps=Mhe;export{ope as $,tpe as A,Vhe as B,Lhe as C,Whe as D,nre as E,Ihe as F,Phe as G,epe as H,Ghe as I,Gre as J,ise as K,Nhe as L,Khe as M,V_ as N,sY as O,Uhe as P,lpe as Q,Hhe as R,Yhe as S,qhe as T,_pe as U,spe as V,ipe as W,rpe as X,cpe as Y,fpe as Z,ype as _,Jr as a,Rne as a0,Zhe as a1,Qhe as a2,dB as a3,YG as a4,pB as a5,i3 as a6,dx as a7,FC as a8,zt as a9,bo as b,$he as c,Fhe as d,Ux as e,Mf as f,jhe as g,Xhe as h,Jhe as i,Ge as j,zhe as k,ppe as l,Jz as m,mpe as n,Ohe as o,gpe as p,npe as q,G as r,upe as s,Bhe as t,kU as u,ape as v,dpe as w,hpe as x,vpe as y,br as z};
